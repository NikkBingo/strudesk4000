var strudel=function(exports){"use strict";var _documentCurrentScript=typeof document<"u"?document.currentScript:null;typeof BigInt>"u"&&(BigInt=function(l){if(isNaN(l))throw new Error("");return l});const C_ZERO=BigInt(0),C_ONE=BigInt(1),C_TWO=BigInt(2),C_FIVE=BigInt(5),C_TEN=BigInt(10),MAX_CYCLE_LEN=2e3,P={s:C_ONE,n:C_ZERO,d:C_ONE};function assign(l,a){try{l=BigInt(l)}catch{throw InvalidParameter()}return l*a}function trunc(l){return typeof l=="bigint"?l:Math.floor(l)}function newFraction(l,a){if(a===C_ZERO)throw DivisionByZero();const o=Object.create(Fraction.prototype);o.s=l<C_ZERO?-C_ONE:C_ONE,l=l<C_ZERO?-l:l;const u=gcd$1(l,a);return o.n=l/u,o.d=a/u,o}function factorize(l){const a={};let o=l,u=C_TWO,p=C_FIVE-C_ONE;for(;p<=o;){for(;o%u===C_ZERO;)o/=u,a[u]=(a[u]||C_ZERO)+C_ONE;p+=C_ONE+C_TWO*u++}return o!==l?o>1&&(a[o]=(a[o]||C_ZERO)+C_ONE):a[l]=(a[l]||C_ZERO)+C_ONE,a}const parse$7=function(l,a){let o=C_ZERO,u=C_ONE,p=C_ONE;if(l!=null)if(a!==void 0){if(typeof l=="bigint")o=l;else{if(isNaN(l))throw InvalidParameter();if(l%1!==0)throw NonIntegerParameter();o=BigInt(l)}if(typeof a=="bigint")u=a;else{if(isNaN(a))throw InvalidParameter();if(a%1!==0)throw NonIntegerParameter();u=BigInt(a)}p=o*u}else if(typeof l=="object"){if("d"in l&&"n"in l)o=BigInt(l.n),u=BigInt(l.d),"s"in l&&(o*=BigInt(l.s));else if(0 in l)o=BigInt(l[0]),1 in l&&(u=BigInt(l[1]));else if(typeof l=="bigint")o=l;else throw InvalidParameter();p=o*u}else if(typeof l=="number"){if(isNaN(l))throw InvalidParameter();if(l<0&&(p=-C_ONE,l=-l),l%1===0)o=BigInt(l);else if(l>0){let d=1,f=0,g=1,b=1,O=1,S=1e7;for(l>=1&&(d=10**Math.floor(1+Math.log10(l)),l/=d);g<=S&&O<=S;){let M=(f+b)/(g+O);if(l===M){g+O<=S?(o=f+b,u=g+O):O>g?(o=b,u=O):(o=f,u=g);break}else l>M?(f+=b,g+=O):(b+=f,O+=g),g>S?(o=b,u=O):(o=f,u=g)}o=BigInt(o)*BigInt(d),u=BigInt(u)}}else if(typeof l=="string"){let d=0,f=C_ZERO,g=C_ZERO,b=C_ZERO,O=C_ONE,S=C_ONE,M=l.replace(/_/g,"").match(/\d+|./g);if(M===null)throw InvalidParameter();if(M[d]==="-"?(p=-C_ONE,d++):M[d]==="+"&&d++,M.length===d+1?g=assign(M[d++],p):M[d+1]==="."||M[d]==="."?(M[d]!=="."&&(f=assign(M[d++],p)),d++,(d+1===M.length||M[d+1]==="("&&M[d+3]===")"||M[d+1]==="'"&&M[d+3]==="'")&&(g=assign(M[d],p),O=C_TEN**BigInt(M[d].length),d++),(M[d]==="("&&M[d+2]===")"||M[d]==="'"&&M[d+2]==="'")&&(b=assign(M[d+1],p),S=C_TEN**BigInt(M[d+1].length)-C_ONE,d+=3)):M[d+1]==="/"||M[d+1]===":"?(g=assign(M[d],p),O=assign(M[d+2],C_ONE),d+=3):M[d+3]==="/"&&M[d+1]===" "&&(f=assign(M[d],p),g=assign(M[d+2],p),O=assign(M[d+4],C_ONE),d+=5),M.length<=d)u=O*S,p=o=b+u*f+S*g;else throw InvalidParameter()}else if(typeof l=="bigint")o=l,p=l,u=C_ONE;else throw InvalidParameter();if(u===C_ZERO)throw DivisionByZero();P.s=p<C_ZERO?-C_ONE:C_ONE,P.n=o<C_ZERO?-o:o,P.d=u<C_ZERO?-u:u};function modpow(l,a,o){let u=C_ONE;for(;a>C_ZERO;l=l*l%o,a>>=C_ONE)a&C_ONE&&(u=u*l%o);return u}function cycleLen(l,a){for(;a%C_TWO===C_ZERO;a/=C_TWO);for(;a%C_FIVE===C_ZERO;a/=C_FIVE);if(a===C_ONE)return C_ZERO;let o=C_TEN%a,u=1;for(;o!==C_ONE;u++)if(o=o*C_TEN%a,u>MAX_CYCLE_LEN)return C_ZERO;return BigInt(u)}function cycleStart(l,a,o){let u=C_ONE,p=modpow(C_TEN,o,a);for(let d=0;d<300;d++){if(u===p)return BigInt(d);u=u*C_TEN%a,p=p*C_TEN%a}return 0}function gcd$1(l,a){if(!l)return a;if(!a)return l;for(;;){if(l%=a,!l)return a;if(a%=l,!a)return l}}function Fraction(l,a){if(parse$7(l,a),this instanceof Fraction)l=gcd$1(P.d,P.n),this.s=P.s,this.n=P.n/l,this.d=P.d/l;else return newFraction(P.s*P.n,P.d)}var DivisionByZero=function(){return new Error("Division by Zero")},InvalidParameter=function(){return new Error("Invalid argument")},NonIntegerParameter=function(){return new Error("Parameters must be integer")};Fraction.prototype={s:C_ONE,n:C_ZERO,d:C_ONE,abs:function(){return newFraction(this.n,this.d)},neg:function(){return newFraction(-this.s*this.n,this.d)},add:function(l,a){return parse$7(l,a),newFraction(this.s*this.n*P.d+P.s*this.d*P.n,this.d*P.d)},sub:function(l,a){return parse$7(l,a),newFraction(this.s*this.n*P.d-P.s*this.d*P.n,this.d*P.d)},mul:function(l,a){return parse$7(l,a),newFraction(this.s*P.s*this.n*P.n,this.d*P.d)},div:function(l,a){return parse$7(l,a),newFraction(this.s*P.s*this.n*P.d,this.d*P.n)},clone:function(){return newFraction(this.s*this.n,this.d)},mod:function(l,a){if(l===void 0)return newFraction(this.s*this.n%this.d,C_ONE);if(parse$7(l,a),C_ZERO===P.n*this.d)throw DivisionByZero();return newFraction(this.s*(P.d*this.n)%(P.n*this.d),P.d*this.d)},gcd:function(l,a){return parse$7(l,a),newFraction(gcd$1(P.n,this.n)*gcd$1(P.d,this.d),P.d*this.d)},lcm:function(l,a){return parse$7(l,a),P.n===C_ZERO&&this.n===C_ZERO?newFraction(C_ZERO,C_ONE):newFraction(P.n*this.n,gcd$1(P.n,this.n)*gcd$1(P.d,this.d))},inverse:function(){return newFraction(this.s*this.d,this.n)},pow:function(l,a){if(parse$7(l,a),P.d===C_ONE)return P.s<C_ZERO?newFraction((this.s*this.d)**P.n,this.n**P.n):newFraction((this.s*this.n)**P.n,this.d**P.n);if(this.s<C_ZERO)return null;let o=factorize(this.n),u=factorize(this.d),p=C_ONE,d=C_ONE;for(let f in o)if(f!=="1"){if(f==="0"){p=C_ZERO;break}if(o[f]*=P.n,o[f]%P.d===C_ZERO)o[f]/=P.d;else return null;p*=BigInt(f)**o[f]}for(let f in u)if(f!=="1"){if(u[f]*=P.n,u[f]%P.d===C_ZERO)u[f]/=P.d;else return null;d*=BigInt(f)**u[f]}return P.s<C_ZERO?newFraction(d,p):newFraction(p,d)},log:function(l,a){if(parse$7(l,a),this.s<=C_ZERO||P.s<=C_ZERO)return null;const o={},u=factorize(P.n),p=factorize(P.d),d=factorize(this.n),f=factorize(this.d);for(const O in p)u[O]=(u[O]||C_ZERO)-p[O];for(const O in f)d[O]=(d[O]||C_ZERO)-f[O];for(const O in u)O!=="1"&&(o[O]=!0);for(const O in d)O!=="1"&&(o[O]=!0);let g=null,b=null;for(const O in o){const S=u[O]||C_ZERO,M=d[O]||C_ZERO;if(S===C_ZERO){if(M!==C_ZERO)return null;continue}let A=M,F=S;const $=gcd$1(A,F);if(A/=$,F/=$,g===null&&b===null)g=A,b=F;else if(A*b!==g*F)return null}return g!==null&&b!==null?newFraction(g,b):null},equals:function(l,a){return parse$7(l,a),this.s*this.n*P.d===P.s*P.n*this.d},lt:function(l,a){return parse$7(l,a),this.s*this.n*P.d<P.s*P.n*this.d},lte:function(l,a){return parse$7(l,a),this.s*this.n*P.d<=P.s*P.n*this.d},gt:function(l,a){return parse$7(l,a),this.s*this.n*P.d>P.s*P.n*this.d},gte:function(l,a){return parse$7(l,a),this.s*this.n*P.d>=P.s*P.n*this.d},compare:function(l,a){parse$7(l,a);let o=this.s*this.n*P.d-P.s*P.n*this.d;return(C_ZERO<o)-(o<C_ZERO)},ceil:function(l){return l=C_TEN**BigInt(l||0),newFraction(trunc(this.s*l*this.n/this.d)+(l*this.n%this.d>C_ZERO&&this.s>=C_ZERO?C_ONE:C_ZERO),l)},floor:function(l){return l=C_TEN**BigInt(l||0),newFraction(trunc(this.s*l*this.n/this.d)-(l*this.n%this.d>C_ZERO&&this.s<C_ZERO?C_ONE:C_ZERO),l)},round:function(l){return l=C_TEN**BigInt(l||0),newFraction(trunc(this.s*l*this.n/this.d)+this.s*((this.s>=C_ZERO?C_ONE:C_ZERO)+C_TWO*(l*this.n%this.d)>this.d?C_ONE:C_ZERO),l)},roundTo:function(l,a){parse$7(l,a);const o=this.n*P.d,u=this.d*P.n,p=o%u;let d=trunc(o/u);return p+p>=u&&d++,newFraction(this.s*d*P.n,P.d)},divisible:function(l,a){return parse$7(l,a),!(!(P.n*this.d)||this.n*P.d%(P.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(l){let a=this.n,o=this.d;l=l||15;let u=cycleLen(a,o),p=cycleStart(a,o,u),d=this.s<C_ZERO?"-":"";if(d+=trunc(a/o),a%=o,a*=C_TEN,a&&(d+="."),u){for(let f=p;f--;)d+=trunc(a/o),a%=o,a*=C_TEN;d+="(";for(let f=u;f--;)d+=trunc(a/o),a%=o,a*=C_TEN;d+=")"}else for(let f=l;a&&f--;)d+=trunc(a/o),a%=o,a*=C_TEN;return d},toFraction:function(l){let a=this.n,o=this.d,u=this.s<C_ZERO?"-":"";if(o===C_ONE)u+=a;else{let p=trunc(a/o);l&&p>C_ZERO&&(u+=p,u+=" ",a%=o),u+=a,u+="/",u+=o}return u},toLatex:function(l){let a=this.n,o=this.d,u=this.s<C_ZERO?"-":"";if(o===C_ONE)u+=a;else{let p=trunc(a/o);l&&p>C_ZERO&&(u+=p,a%=o),u+="\\frac{",u+=a,u+="}{",u+=o,u+="}"}return u},toContinued:function(){let l=this.n,a=this.d,o=[];do{o.push(trunc(l/a));let u=l%a;l=a,a=u}while(l!==C_ONE);return o},simplify:function(l){const a=BigInt(1/(l||.001)|0),o=this.abs(),u=o.toContinued();for(let p=1;p<u.length;p++){let d=newFraction(u[p-1],C_ONE);for(let g=p-2;g>=0;g--)d=d.inverse().add(u[g]);let f=d.sub(o);if(f.n*a<f.d)return d.mul(this.s)}return this}};const logKey="strudel.log";let debounce=1e3,lastMessage,lastTime;function errorLogger$1(l,a="cyclist"){logger$2(`[${a}] error: ${l.message}`)}function logger$2(l,a,o={}){let u=performance.now();lastMessage===l&&u-lastTime<debounce||(lastMessage=l,lastTime=u,console.log(`%c${l}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(logKey,{detail:{message:l,type:a,data:o}})))}logger$2.key=logKey;const isNoteWithOctave=l=>/^[a-gA-G][#bs]*[0-9]$/.test(l),isNote=l=>/^[a-gA-G][#bsf]*-?[0-9]?$/.test(l),tokenizeNote$3=l=>{if(typeof l!="string")return[];const[a,o="",u]=l.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return a?[a,o,u?Number(u):void 0]:[]},chromas$2={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$2={"#":1,b:-1,s:1,f:-1},noteToMidi$1=(l,a=3)=>{const[o,u,p=a]=tokenizeNote$3(l);if(!o)throw new Error('not a note: "'+l+'"');const d=chromas$2[o.toLowerCase()],f=u?.split("").reduce((g,b)=>g+accs$2[b],0)||0;return(Number(p)+1)*12+d+f},midiToFreq$2=l=>Math.pow(2,(l-69)/12)*440,freqToMidi$2=l=>12*Math.log(l/440)/Math.LN2+69,valueToMidi$1=(l,a)=>{if(typeof l!="object")throw new Error("valueToMidi: expected object value");let{freq:o,note:u}=l;if(typeof o=="number")return freqToMidi$2(o);if(typeof u=="string")return noteToMidi$1(u);if(typeof u=="number")return u;if(!a)throw new Error("valueToMidi: expected freq or note to be set");return a},getEventOffsetMs=(l,a)=>(l-a)*1e3,getFreq=l=>midiToFreq$2(typeof l=="number"?l:noteToMidi$1(l)),pcs$1=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],midi2note$1=l=>{const a=Math.floor(l/12)-1;return pcs$1[l%12]+a},_mod$2=(l,a)=>(l%a+a)%a,averageArray=l=>l.reduce((a,o)=>a+o)/l.length;function nanFallback$1(l,a=0){return isNaN(Number(l))?(logger$2(`"${l}" is not a number, falling back to ${a}`,"warning"),a):l}const getSoundIndex$1=(l,a)=>_mod$2(Math.round(nanFallback$1(l??0,0)),a),getPlayableNoteValue=l=>{let{value:a,context:o}=l,u=a;if(typeof u=="object"&&!Array.isArray(u)&&(u=u.note||u.n||u.value,u===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(a)}`);if(typeof u=="number"&&o.type!=="frequency")u=midiToFreq$2(l.value);else if(typeof u=="number"&&o.type==="frequency")u=l.value;else if(typeof u!="string"||!isNote(u))throw new Error("not a note: "+JSON.stringify(u));return u},getFrequency=l=>{let{value:a,context:o}=l;if(typeof a=="object")return a.freq?a.freq:getFreq(a.note||a.n||a.value);if(typeof a=="number"&&o.type!=="frequency")a=midiToFreq$2(l.value);else if(typeof a=="string"&&isNote(a))a=midiToFreq$2(noteToMidi$1(l.value));else if(typeof a!="number")throw new Error("not a note or frequency: "+a);return a},rotate$2=(l,a)=>l.slice(a).concat(l.slice(0,a)),pipe=(...l)=>l.reduce((a,o)=>(...u)=>a(o(...u)),a=>a),compose=(...l)=>pipe(...l.reverse()),removeUndefineds=l=>l.filter(a=>a!=null),flatten$1=l=>[].concat(...l),id$1=l=>l,constant=(l,a)=>l,listRange=(l,a)=>Array.from({length:a-l+1},(o,u)=>u+l);function curry(l,a,o=l.length){const u=function p(...d){if(d.length>=o)return l.apply(this,d);{const f=function(...g){return p.apply(this,d.concat(g))};return a&&a(f,d),f}};return a&&a(u,[]),u}function parseNumeral(l){const a=Number(l);if(!isNaN(a))return a;if(isNote(l))return noteToMidi$1(l);throw new Error(`cannot parse as numeral: "${l}"`)}function mapArgs(l,a){return(...o)=>l(...o.map(a))}function numeralArgs(l){return mapArgs(l,parseNumeral)}function parseFractional(l){const a=Number(l);if(!isNaN(a))return a;const o={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[l];if(typeof o<"u")return o;throw new Error(`cannot parse as fractional: "${l}"`)}const fractionalArgs=l=>mapArgs(l,parseFractional),splitAt=function(l,a){return[a.slice(0,l),a.slice(l)]},zipWith=(l,a,o)=>a.map((u,p)=>l(u,o[p])),pairs=function(l){const a=[];for(let o=0;o<l.length-1;++o)a.push([l[o],l[o+1]]);return a},clamp$1=(l,a,o)=>Math.min(Math.max(l,a),o),solfeggio=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],indian=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],german=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],byzantine=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],japanese=["I","Ro","Ha","Ni","Ho","He","To"],english=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],sol2note=(l,a="letters")=>{const u=(a==="solfeggio"?solfeggio:a==="indian"?indian:a==="german"?german:a==="byzantine"?byzantine:a==="japanese"?japanese:english)[l%12],p=Math.floor(l/12)-1;return u+p};function uniq(l){var a={};return l.filter(function(o){return a.hasOwn(o)?!1:a[o]=!0})}function uniqsort(l){return l.sort().filter(function(a,o,u){return!o||a!=u[o-1]})}function uniqsortr(l){return l.sort((a,o)=>a.compare(o)).filter(function(a,o,u){return!o||a.ne(u[o-1])})}function unicodeToBase64(l){const a=new TextEncoder().encode(l);return btoa(String.fromCharCode(...a))}function base64ToUnicode(l){const a=new Uint8Array(atob(l).split("").map(u=>u.charCodeAt(0)));return new TextDecoder().decode(a)}function code2hash(l){return encodeURIComponent(unicodeToBase64(l))}function hash2code(l){return base64ToUnicode(decodeURIComponent(l))}function objectMap(l,a){return Array.isArray(l)?l.map(a):Object.fromEntries(Object.entries(l).map(([o,u],p)=>[o,a(u,o,p)]))}function cycleToSeconds$1(l,a){return l/a}class ClockCollator{constructor({getTargetClockTime:a=getUnixTimeSeconds,weight:o=16,offsetDelta:u=.005,checkAfterTime:p=2,resetAfterTime:d=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=a,this.weight=o,this.offsetDelta=u,this.checkAfterTime=p,this.resetAfterTime=d,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(a){const o=this.getTargetClockTime(),u=o-this.timeAtPrevOffsetSample,p=o-a;if(u>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=p),this.prevOffsetTimes.push(p),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||u>this.checkAfterTime){this.timeAtPrevOffsetSample=o;const d=averageArray(this.prevOffsetTimes);Math.abs(d-this.offsetTime)>this.offsetDelta&&(this.offsetTime=d)}return this.offsetTime}calculateTimestamp(a,o){return this.calculateOffset(a)+o}}function getPerformanceTimeSeconds(){return performance.now()*.001}function getUnixTimeSeconds(){return Date.now()*.001}const keyAlias=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let keyState;function getCurrentKeyboardState(){if(keyState==null){if(typeof window>"u")return;keyState={},window.addEventListener("keydown",l=>{keyState[l.key]=!0}),window.addEventListener("keyup",l=>{keyState[l.key]=!1})}return{...keyState}}function stringifyValues(l,a=!1){return typeof l=="object"?a?JSON.stringify(l).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(l):l}Fraction.prototype.sam=function(){return this.floor()},Fraction.prototype.nextSam=function(){return this.sam().add(1)},Fraction.prototype.wholeCycle=function(){return new TimeSpan(this.sam(),this.nextSam())},Fraction.prototype.cyclePos=function(){return this.sub(this.sam())},Fraction.prototype.lt=function(l){return this.compare(l)<0},Fraction.prototype.gt=function(l){return this.compare(l)>0},Fraction.prototype.lte=function(l){return this.compare(l)<=0},Fraction.prototype.gte=function(l){return this.compare(l)>=0},Fraction.prototype.eq=function(l){return this.compare(l)==0},Fraction.prototype.ne=function(l){return this.compare(l)!=0},Fraction.prototype.max=function(l){return this.gt(l)?this:l},Fraction.prototype.maximum=function(...l){return l=l.map(a=>new Fraction(a)),l.reduce((a,o)=>o.max(a),this)},Fraction.prototype.min=function(l){return this.lt(l)?this:l},Fraction.prototype.mulmaybe=function(l){return l!==void 0?this.mul(l):void 0},Fraction.prototype.divmaybe=function(l){return l!==void 0?this.div(l):void 0},Fraction.prototype.addmaybe=function(l){return l!==void 0?this.add(l):void 0},Fraction.prototype.submaybe=function(l){return l!==void 0?this.sub(l):void 0},Fraction.prototype.show=function(){return this.s*this.n+"/"+this.d},Fraction.prototype.or=function(l){return this.eq(0)?l:this};const fraction$1=l=>Fraction(l),gcd=(...l)=>{if(l=removeUndefineds(l),l.length!==0)return l.reduce((a,o)=>a.gcd(o),fraction$1(1))},lcm=(...l)=>{if(l=removeUndefineds(l),l.length===0)return;const a=l.pop();return l.reduce((o,u)=>o===void 0||u===void 0?void 0:o.lcm(u),a)},isFraction=l=>l instanceof Fraction;fraction$1._original=Fraction;class TimeSpan{constructor(a,o){this.begin=fraction$1(a),this.end=fraction$1(o)}get spanCycles(){const a=[];var o=this.begin;const u=this.end,p=u.sam();if(o.equals(u))return[new TimeSpan(o,u)];for(;u.gt(o);){if(o.sam().equals(p)){a.push(new TimeSpan(o,this.end));break}const d=o.nextSam();a.push(new TimeSpan(o,d)),o=d}return a}get duration(){return this.end.sub(this.begin)}cycleArc(){const a=this.begin.cyclePos(),o=a.add(this.duration);return new TimeSpan(a,o)}withTime(a){return new TimeSpan(a(this.begin),a(this.end))}withEnd(a){return new TimeSpan(this.begin,a(this.end))}withCycle(a){const o=this.begin.sam(),u=o.add(a(this.begin.sub(o))),p=o.add(a(this.end.sub(o)));return new TimeSpan(u,p)}intersection(a){const o=this.begin.max(a.begin),u=this.end.min(a.end);if(!o.gt(u)&&!(o.equals(u)&&(o.equals(this.end)&&this.begin.lt(this.end)||o.equals(a.end)&&a.begin.lt(a.end))))return new TimeSpan(o,u)}intersection_e(a){const o=this.intersection(a);if(o==null)throw"TimeSpans do not intersect";return o}midpoint(){return this.begin.add(this.duration.div(fraction$1(2)))}equals(a){return this.begin.equals(a.begin)&&this.end.equals(a.end)}show(){return this.begin.show()+" → "+this.end.show()}}class Hap{constructor(a,o,u,p={},d=!1){this.whole=a,this.part=o,this.value=u,this.context=p,this.stateful=d,d&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let a;return typeof this.value?.duration=="number"?a=fraction$1(this.value.duration):a=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?a.mul(this.value.clip):a}get endClipped(){return this.whole.begin.add(this.duration)}isActive(a){return this.whole.begin<=a&&this.endClipped>=a}isInPast(a){return a>this.endClipped}isInNearPast(a,o){return o-a<=this.endClipped}isInFuture(a){return a<this.whole.begin}isInNearFuture(a,o){return o<this.whole.begin&&o>this.whole.begin-a}isWithinTime(a,o){return this.whole.begin<=o&&this.endClipped>=a}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(a){const o=this.whole?a(this.whole):void 0;return new Hap(o,a(this.part),this.value,this.context)}withValue(a){return new Hap(this.whole,this.part,a(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(a){return this.context.tags?.includes(a)}resolveState(a){if(this.stateful&&this.hasOnset()){console.log("stateful");const o=this.value,[u,p]=o(a);return[u,new Hap(this.whole,this.part,p,this.context,!1)]}return[a,this]}spanEquals(a){return this.whole==null&&a.whole==null||this.whole.equals(a.whole)}equals(a){return this.spanEquals(a)&&this.part.equals(a.part)&&this.value===a.value}show(a=!1){const o=typeof this.value=="object"?a?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var u="";if(this.whole==null)u="~"+this.part.show;else{var p=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(u=this.whole.begin.show()+" ⇜ "),p||(u+="("),u+=this.part.show(),p||(u+=")"),this.whole.end.equals(this.part.end)||(u+=" ⇝ "+this.whole.end.show())}return"[ "+u+" | "+o+" ]"}showWhole(a=!1){return`${this.whole==null?"~":this.whole.show()}: ${stringifyValues(this.value,a)}`}combineContext(a){const o=this;return{...o.context,...a.context,locations:(o.context.locations||[]).concat(a.context.locations||[])}}setContext(a){return new Hap(this.whole,this.part,this.value,a)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class State{constructor(a,o={}){this.span=a,this.controls=o}setSpan(a){return new State(a,this.controls)}withSpan(a){return this.setSpan(a(this.span))}setControls(a){return new State(this.span,{...this.controls,...a})}}function unionWithObj(l,a,o){if(a?.value!==void 0&&Object.keys(a).length===1)return logger$2("[warn]: Can't do arithmetic on control pattern."),l;const u=Object.keys(l).filter(p=>Object.keys(a).includes(p));return Object.assign({},l,a,Object.fromEntries(u.map(p=>[p,o(l[p],a[p])])))}curry((l,a)=>l*a),curry((l,a)=>a.map(l));function drawLine(l,a=60){let o=0,u=fraction$1(0),p=[""],d="";for(;p[0].length<a;){const f=l.queryArc(o,o+1),g=f.filter(S=>S.hasOnset()).map(S=>S.duration),b=gcd(...g),O=b.inverse();p=p.map(S=>S+"|"),d+="|";for(let S=0;S<O;S++){const[M,A]=[u,u.add(b)],F=f.filter(B=>B.whole.begin.lte(M)&&B.whole.end.gte(A)),$=F.length-p.length;$>0&&(p=p.concat(Array($).fill(d))),p=p.map((B,I)=>{const U=F[I];if(U){const de=U.whole.begin.eq(M)?""+U.value:"-";return B+de}return B+"."}),d+=".",u=u.add(b)}o++}return p.join(`
`)}let stringParser,__steps=!0;const calculateSteps=function(l){__steps=!!l},setStringParser=l=>stringParser=l;let Pattern$1=class zt{constructor(a,o=void 0){this.query=a,this._Pattern=!0,this._steps=o}get _steps(){return this.__steps}set _steps(a){this.__steps=a===void 0?void 0:fraction$1(a)}setSteps(a){return this._steps=a,this}withSteps(a){return __steps?new zt(this.query,this._steps===void 0?void 0:a(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(a){const o=new zt(u=>this.query(u).map(p=>p.withValue(a)));return o._steps=this._steps,o}withState(a){return new zt(o=>this.query(a(o)))}fmap(a){return this.withValue(a)}appWhole(a,o){const u=this,p=function(d){const f=u.query(d),g=o.query(d),b=function(O,S){const M=O.part.intersection(S.part);if(M!=null)return new Hap(a(O.whole,S.whole),M,O.value(S.value),S.combineContext(O))};return flatten$1(f.map(O=>removeUndefineds(g.map(S=>b(O,S)))))};return new zt(p)}appBoth(a){const o=this,u=function(d,f){if(!(d==null||f==null))return d.intersection_e(f)},p=o.appWhole(u,a);return __steps&&(p._steps=lcm(a._steps,o._steps)),p}appLeft(a){const o=this,u=function(d){const f=[];for(const g of o.query(d)){const b=a.query(d.setSpan(g.wholeOrPart()));for(const O of b){const S=g.whole,M=g.part.intersection(O.part);if(M){const A=g.value(O.value),F=O.combineContext(g),$=new Hap(S,M,A,F);f.push($)}}}return f},p=new zt(u);return p._steps=this._steps,p}appRight(a){const o=this,u=function(d){const f=[];for(const g of a.query(d)){const b=o.query(d.setSpan(g.wholeOrPart()));for(const O of b){const S=g.whole,M=O.part.intersection(g.part);if(M){const A=O.value(g.value),F=g.combineContext(O),$=new Hap(S,M,A,F);f.push($)}}}return f},p=new zt(u);return p._steps=a._steps,p}bindWhole(a,o){const u=this,p=function(d){const f=function(b,O){return new Hap(a(b.whole,O.whole),O.part,O.value,Object.assign({},b.context,O.context,{locations:(b.context.locations||[]).concat(O.context.locations||[])}))},g=function(b){return o(b.value).query(d.setSpan(b.part)).map(O=>f(b,O))};return flatten$1(u.query(d).map(b=>g(b)))};return new zt(p)}bind(a){const o=function(u,p){if(!(u==null||p==null))return u.intersection_e(p)};return this.bindWhole(o,a)}join(){return this.bind(id$1)}outerBind(a){return this.bindWhole(o=>o,a).setSteps(this._steps)}outerJoin(){return this.outerBind(id$1)}innerBind(a){return this.bindWhole((o,u)=>u,a)}innerJoin(){return this.innerBind(id$1)}resetJoin(a=!1){const o=this;return new zt(u=>o.discreteOnly().query(u).map(p=>p.value.late(a?p.whole.begin:p.whole.begin.cyclePos()).query(u).map(d=>new Hap(d.whole?d.whole.intersection(p.whole):void 0,d.part.intersection(p.part),d.value).setContext(p.combineContext(d))).filter(d=>d.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const a=this;function o(u){const p=a.discreteOnly().query(u);function d(g){const O=g.value._focusSpan(g.wholeOrPart()).query(u.setSpan(g.part));function S(M,A){let F;if(A.whole&&M.whole&&(F=A.whole.intersection(M.whole),!F))return;const $=A.part.intersection(M.part);if(!$)return;const B=A.combineContext(M);return new Hap(F,$,A.value,B)}return O.map(M=>S(g,M))}return flatten$1(p.map(d)).filter(g=>g)}return new zt(o)}squeezeBind(a){return this.fmap(a).squeezeJoin()}polyJoin=function(){const a=this;return a.fmap(o=>o.extend(a._steps.div(o._steps))).outerJoin()};polyBind(a){return this.fmap(a).polyJoin()}queryArc(a,o,u={}){try{return this.query(new State(new TimeSpan(a,o),u))}catch(p){return logger$2(`[query]: ${p.message}`,"error"),[]}}splitQueries(){const a=this,o=u=>flatten$1(u.span.spanCycles.map(p=>a.query(u.setSpan(p))));return new zt(o)}withQuerySpan(a){return new zt(o=>this.query(o.withSpan(a)))}withQuerySpanMaybe(a){const o=this;return new zt(u=>{const p=u.withSpan(a);return p.span?o.query(p):[]})}withQueryTime(a){return new zt(o=>this.query(o.withSpan(u=>u.withTime(a))))}withHapSpan(a){return new zt(o=>this.query(o).map(u=>u.withSpan(a)))}withHapTime(a){return this.withHapSpan(o=>o.withTime(a))}withHaps(a){const o=new zt(u=>a(this.query(u),u));return o._steps=this._steps,o}withHap(a){return this.withHaps(o=>o.map(a))}setContext(a){return this.withHap(o=>o.setContext(a))}withContext(a){const o=this.withHap(u=>u.setContext(a(u.context)));return this.__pure!==void 0&&(o.__pure=this.__pure,o.__pure_loc=this.__pure_loc),o}stripContext(){return this.withHap(a=>a.setContext({}))}withLoc(a,o){const u={start:a,end:o},p=this.withContext(d=>{const f=(d.locations||[]).concat([u]);return{...d,locations:f}});return this.__pure&&(p.__pure=this.__pure,p.__pure_loc=u),p}filterHaps(a){return new zt(o=>this.query(o).filter(a))}filterValues(a){return new zt(o=>this.query(o).filter(u=>a(u.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(a=>a!=null)}onsetsOnly(){return this.filterHaps(a=>a.hasOnset())}discreteOnly(){return this.filterHaps(a=>a.whole)}defragmentHaps(){return this.discreteOnly().withHaps(o=>{const u=[];for(var p=0;p<o.length;++p){for(var d=!0,f=o[p];d;){const O=JSON.stringify(o[p].value);for(var g=!1,b=p+1;b<o.length;b++){const S=o[b];if(f.whole.equals(S.whole)){if(f.part.begin.eq(S.part.end)){if(O===JSON.stringify(S.value)){f=new Hap(f.whole,new TimeSpan(S.part.begin,f.part.end),f.value),o.splice(b,1),g=!0;break}}else if(S.part.begin.eq(f.part.end)&&O==JSON.stringify(S.value)){f=new Hap(f.whole,new TimeSpan(f.part.begin,S.part.end),f.value),o.splice(b,1),g=!0;break}}}d=g}u.push(f)}return u})}firstCycle(a=!1){var o=this;return a||(o=o.stripContext()),o.query(new State(new TimeSpan(fraction$1(0),fraction$1(1))))}get firstCycleValues(){return this.firstCycle().map(a=>a.value)}get showFirstCycle(){return this.firstCycle().map(a=>`${a.value}: ${a.whole.begin.toFraction()} - ${a.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(a=>a.sort((o,u)=>o.part.begin.sub(u.part.begin).or(o.part.end.sub(u.part.end)).or(o.whole.begin.sub(u.whole.begin).or(o.whole.end.sub(u.whole.end)))))}asNumber(){return this.fmap(parseNumeral)}_opIn(a,o){return this.fmap(o).appLeft(reify(a))}_opOut(a,o){return this.fmap(o).appRight(reify(a))}_opMix(a,o){return this.fmap(o).appBoth(reify(a))}_opSqueeze(a,o){const u=reify(a);return this.fmap(p=>u.fmap(d=>o(p)(d))).squeezeJoin()}_opSqueezeOut(a,o){const u=this;return reify(a).fmap(d=>u.fmap(f=>o(f)(d))).squeezeJoin()}_opReset(a,o){return reify(a).fmap(p=>this.fmap(d=>o(d)(p))).resetJoin()}_opRestart(a,o){return reify(a).fmap(p=>this.fmap(d=>o(d)(p))).restartJoin()}_opPoly(a,o){const u=reify(a);return this.fmap(p=>u.fmap(d=>o(d)(p))).polyJoin()}layer(...a){return stack(...a.map(o=>o(this)))}superimpose(...a){return this.stack(...a.map(o=>o(this)))}stack(...a){return stack(this,...a)}sequence(...a){return sequence(this,...a)}seq(...a){return sequence(this,...a)}cat(...a){return cat(this,...a)}fastcat(...a){return fastcat(this,...a)}slowcat(...a){return slowcat(this,...a)}onTrigger(a,o=!0){return this.withHap(u=>u.setContext({...u.context,onTrigger:(...p)=>{u.context.onTrigger?.(...p),a(...p)},dominantTrigger:u.context.dominantTrigger||o}))}log(a=u=>`[hap] ${u.showWhole(!0)}`,o=u=>({hap:u})){return this.onTrigger((...u)=>{logger$2(a(...u),void 0,o(...u))},!1)}logValues(a=o=>`[hap] ${stringifyValues(o,!0)}`){return this.log(o=>a(o.value))}drawLine(){return console.log(drawLine(this)),this}unjoin(a,o=id$1){return a.withHap(u=>u.withValue(p=>p?o(this.ribbon(u.whole.begin,u.whole.duration)):this))}into(a,o){return this.unjoin(a,o).innerJoin()}};function groupHapsBy(l,a){let o=[];return a.forEach(u=>{const p=o.findIndex(([d])=>l(u,d));p===-1?o.push([u]):o[p].push(u)}),o}const congruent=(l,a)=>l.spanEquals(a);Pattern$1.prototype.collect=function(){return this.withHaps(l=>groupHapsBy(congruent,l).map(a=>new Hap(a[0].whole,a[0].part,a,{})))};const arpWith=register("arpWith",(l,a)=>a.collect().fmap(o=>reify(l(o))).innerJoin().withHap(o=>new Hap(o.whole,o.part,o.value.value,o.combineContext(o.value)))),arp=register("arp",(l,a)=>a.arpWith(o=>reify(l).fmap(u=>o[u%o.length])),!1);function _nonArrayObject(l){return!Array.isArray(l)&&typeof l=="object"&&!isFraction(l)}function _composeOp(l,a,o){return _nonArrayObject(l)||_nonArrayObject(a)?(_nonArrayObject(l)||(l={value:l}),_nonArrayObject(a)||(a={value:a}),unionWithObj(l,a,o)):o(l,a)}(function(){const l={set:[(o,u)=>u],keep:[o=>o],keepif:[(o,u)=>u?o:void 0],add:[numeralArgs((o,u)=>o+u)],sub:[numeralArgs((o,u)=>o-u)],mul:[numeralArgs((o,u)=>o*u)],div:[numeralArgs((o,u)=>o/u)],mod:[numeralArgs(_mod$2)],pow:[numeralArgs(Math.pow)],log2:[numeralArgs(Math.log2)],band:[numeralArgs((o,u)=>o&u)],bor:[numeralArgs((o,u)=>o|u)],bxor:[numeralArgs((o,u)=>o^u)],blshift:[numeralArgs((o,u)=>o<<u)],brshift:[numeralArgs((o,u)=>o>>u)],lt:[(o,u)=>o<u],gt:[(o,u)=>o>u],lte:[(o,u)=>o<=u],gte:[(o,u)=>o>=u],eq:[(o,u)=>o==u],eqt:[(o,u)=>o===u],ne:[(o,u)=>o!=u],net:[(o,u)=>o!==u],and:[(o,u)=>o&&u],or:[(o,u)=>o||u],func:[(o,u)=>u(o)]},a=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[o,[u,p]]of Object.entries(l)){Pattern$1.prototype["_"+o]=function(d){return this.fmap(f=>u(f,d))},Object.defineProperty(Pattern$1.prototype,o,{get:function(){const d=this,f=(...g)=>d[o].in(...g);for(const g of a)f[g.toLowerCase()]=function(...b){var O=d;b=sequence(b),p&&(O=p(O),b=p(b));var S;return o==="keepif"?(S=O["_op"+g](b,M=>A=>u(M,A)),S=S.removeUndefineds()):S=O["_op"+g](b,M=>A=>_composeOp(M,A,u)),S};return f.squeezein=f.squeeze,f}});for(const d of a)Pattern$1.prototype[d.toLowerCase()]=function(...f){return this.set[d.toLowerCase()](f)}}Pattern$1.prototype.struct=function(...o){return this.keepif.out(...o)},Pattern$1.prototype.structAll=function(...o){return this.keep.out(...o)},Pattern$1.prototype.mask=function(...o){return this.keepif.in(...o)},Pattern$1.prototype.maskAll=function(...o){return this.keep.in(...o)},Pattern$1.prototype.reset=function(...o){return this.keepif.reset(...o)},Pattern$1.prototype.resetAll=function(...o){return this.keep.reset(...o)},Pattern$1.prototype.restart=function(...o){return this.keepif.restart(...o)},Pattern$1.prototype.restartAll=function(...o){return this.keep.restart(...o)}})();const polyrhythm=stack,pr=stack,pm=polymeter,gap=l=>new Pattern$1(()=>[],l),silence=gap(1),nothing=gap(0);function pure(l){function a(u){return u.span.spanCycles.map(p=>new Hap(fraction$1(p.begin).wholeCycle(),p,l))}const o=new Pattern$1(a,1);return o.__pure=l,o}function isPattern(l){return l instanceof Pattern$1||l?._Pattern}function reify(l){return isPattern(l)?l:stringParser&&typeof l=="string"?stringParser(l):pure(l)}function sequenceP(l){let a=pure([]);for(const o of l)a=a.bind(u=>o.fmap(p=>u.concat([p])));return a}function stack(...l){l=l.map(u=>Array.isArray(u)?sequence(...u):reify(u));const a=u=>flatten$1(l.map(p=>p.query(u))),o=new Pattern$1(a);return __steps&&(o._steps=lcm(...l.map(u=>u._steps))),o}function _stackWith(l,a){if(a=a.map(d=>Array.isArray(d)?sequence(...d):reify(d)),a.length===0)return silence;if(a.length===1)return a[0];const[o,...u]=a.map(d=>d._steps),p=__steps?o.maximum(...u):void 0;return stack(...l(p,a))}function stackLeft(...l){return _stackWith((a,o)=>o.map(u=>u._steps.eq(a)?u:stepcat(u,gap(a.sub(u._steps)))),l)}function stackRight(...l){return _stackWith((a,o)=>o.map(u=>u._steps.eq(a)?u:stepcat(gap(a.sub(u._steps)),u)),l)}function stackCentre(...l){return _stackWith((a,o)=>o.map(u=>{if(u._steps.eq(a))return u;const p=gap(a.sub(u._steps).div(2));return stepcat(p,u,p)}),l)}function stackBy(l,...a){const[o,...u]=a.map(f=>f._steps),p=o.maximum(...u),d={centre:stackCentre,left:stackLeft,right:stackRight,expand:stack,repeat:(...f)=>polymeter(...f).steps(p)};return l.inhabit(d).fmap(f=>f(...a)).innerJoin().setSteps(p)}function slowcat(...l){if(l=l.map(u=>Array.isArray(u)?fastcat(...u):reify(u)),l.length==1)return l[0];const a=function(u){const p=u.span,d=_mod$2(p.begin.sam(),l.length),f=l[d];if(!f)return[];const g=p.begin.floor().sub(p.begin.div(l.length).floor());return f.withHapTime(b=>b.add(g)).query(u.setSpan(p.withTime(b=>b.sub(g))))},o=__steps?lcm(...l.map(u=>u._steps)):void 0;return new Pattern$1(a).splitQueries().setSteps(o)}function slowcatPrime(...l){l=l.map(reify);const a=function(o){const u=Math.floor(o.span.begin)%l.length;return l[u]?.query(o)||[]};return new Pattern$1(a).splitQueries()}function cat(...l){return slowcat(...l)}function arrange(...l){const a=l.reduce((o,[u])=>o+u,0);return l=l.map(([o,u])=>[o,u.fast(o)]),stepcat(...l).slow(a)}function seqPLoop(...l){let a=fraction$1(0);for(let o of l)o.length==2&&o.unshift(a),a=o[1];return stack(...l.map(([o,u,p])=>pure(reify(p)).compress(fraction$1(o).div(a),fraction$1(u).div(a)))).slow(a).innerJoin()}function fastcat(...l){let a=slowcat(...l);return l.length>1&&(a=a._fast(l.length),a._steps=l.length),l.length==1&&l[0].__steps_source&&(l._steps=l[0]._steps),a}function sequence(...l){return fastcat(...l)}function seq(...l){return fastcat(...l)}function _sequenceCount(l){return Array.isArray(l)?l.length==0?[silence,0]:l.length==1?_sequenceCount(l[0]):[fastcat(...l.map(a=>_sequenceCount(a)[0])),l.length]:[reify(l),1]}const mask=curry((l,a)=>reify(a).mask(l)),struct=curry((l,a)=>reify(a).struct(l)),superimpose=curry((l,a)=>reify(a).superimpose(...l)),withValue=curry((l,a)=>reify(a).withValue(l)),bind=curry((l,a)=>reify(a).bind(l)),innerBind=curry((l,a)=>reify(a).innerBind(l)),outerBind=curry((l,a)=>reify(a).outerBind(l)),squeezeBind=curry((l,a)=>reify(a).squeezeBind(l)),stepBind=curry((l,a)=>reify(a).stepBind(l)),polyBind=curry((l,a)=>reify(a).polyBind(l)),set=curry((l,a)=>reify(a).set(l)),keep=curry((l,a)=>reify(a).keep(l)),keepif=curry((l,a)=>reify(a).keepif(l)),add$6=curry((l,a)=>reify(a).add(l)),sub=curry((l,a)=>reify(a).sub(l)),mul=curry((l,a)=>reify(a).mul(l)),div=curry((l,a)=>reify(a).div(l)),mod$3=curry((l,a)=>reify(a).mod(l)),pow=curry((l,a)=>reify(a).pow(l)),band=curry((l,a)=>reify(a).band(l)),bor=curry((l,a)=>reify(a).bor(l)),bxor=curry((l,a)=>reify(a).bxor(l)),blshift=curry((l,a)=>reify(a).blshift(l)),brshift=curry((l,a)=>reify(a).brshift(l)),lt$1=curry((l,a)=>reify(a).lt(l)),gt=curry((l,a)=>reify(a).gt(l)),lte=curry((l,a)=>reify(a).lte(l)),gte=curry((l,a)=>reify(a).gte(l)),eq=curry((l,a)=>reify(a).eq(l)),eqt=curry((l,a)=>reify(a).eqt(l)),ne=curry((l,a)=>reify(a).ne(l)),net=curry((l,a)=>reify(a).net(l)),and=curry((l,a)=>reify(a).and(l)),or=curry((l,a)=>reify(a).or(l)),func=curry((l,a)=>reify(a).func(l));function register(l,a,o=!0,u=!1,p=d=>d.innerJoin()){if(Array.isArray(l)){const g={};for(const b of l)g[b]=register(b,a,o,u,p);return g}const d=a.length;var f;return o?f=function(...g){g=g.map(reify);const b=g[g.length-1];let O;if(d===1)O=a(b);else{const S=g.slice(0,-1);if(S.every(M=>M.__pure!=null)){const M=S.map(F=>F.__pure),A=S.filter(F=>F.__pure_loc).map(F=>F.__pure_loc);O=a(...M,b),O=O.withContext(F=>{const $=(F.locations||[]).concat(A);return{...F,locations:$}})}else{const[M,...A]=S;let F=(...$)=>a(...$,b);F=curry(F,null,d-1),O=p(A.reduce(($,B)=>$.appLeft(B),M.fmap(F)))}}return u&&(O._steps=b._steps),O}:f=function(...g){g=g.map(reify);const b=a(...g);return u&&(b._steps=g[g.length-1]._steps),b},Pattern$1.prototype[l]=function(...g){if(d===2&&g.length!==1)g=[sequence(...g)];else if(d!==g.length+1)throw new Error(`.${l}() expects ${d-1} inputs but got ${g.length}.`);return g=g.map(reify),f(...g,this)},d>1&&(Pattern$1.prototype["_"+l]=function(...g){const b=a(...g,this);return u&&b.setSteps(this._steps),b}),curry(f,null,d)}function stepRegister(l,a,o=!0,u=!1,p=d=>d.stepJoin()){return register(l,a,o,u,p)}const round=register("round",function(l){return l.asNumber().fmap(a=>Math.round(a))}),floor=register("floor",function(l){return l.asNumber().fmap(a=>Math.floor(a))}),ceil=register("ceil",function(l){return l.asNumber().fmap(a=>Math.ceil(a))}),toBipolar=register("toBipolar",function(l){return l.fmap(a=>a*2-1)}),fromBipolar=register("fromBipolar",function(l){return l.fmap(a=>(a+1)/2)}),range$2=register("range",function(l,a,o){return o.mul(a-l).add(l)}),rangex=register("rangex",function(l,a,o){return o._range(Math.log(l),Math.log(a)).fmap(Math.exp)}),range2=register("range2",function(l,a,o){return o.fromBipolar()._range(l,a)}),ratio=register("ratio",l=>l.fmap(a=>Array.isArray(a)?a.slice(1).reduce((o,u)=>o/u,a[0]):a)),compress=register("compress",function(l,a,o){return l=fraction$1(l),a=fraction$1(a),l.gt(a)||l.gt(1)||a.gt(1)||l.lt(0)||a.lt(0)?silence:o._fastGap(fraction$1(1).div(a.sub(l)))._late(l)}),{compressSpan,compressspan}=register(["compressSpan","compressspan"],function(l,a){return a._compress(l.begin,l.end)}),{fastGap,fastgap}=register(["fastGap","fastgap"],function(l,a){const o=function(p){const d=p.begin.sam(),f=p.begin.sub(d).mul(l).min(1),g=p.end.sub(d).mul(l).min(1);if(!(f>=1))return new TimeSpan(d.add(f),d.add(g))},u=function(p){const d=p.part.begin,f=p.part.end,g=d.sam(),b=d.sub(g).div(l).min(1),O=f.sub(g).div(l).min(1),S=new TimeSpan(g.add(b),g.add(O)),M=p.whole?new TimeSpan(S.begin.sub(d.sub(p.whole.begin).div(l)),S.end.add(p.whole.end.sub(f).div(l))):void 0;return new Hap(M,S,p.value,p.context)};return a.withQuerySpanMaybe(o).withHap(u).splitQueries()}),focus=register("focus",function(l,a,o){return l=fraction$1(l),a=fraction$1(a),o._early(l.sam())._fast(fraction$1(1).div(a.sub(l)))._late(l)}),{focusSpan,focusspan}=register(["focusSpan","focusspan"],function(l,a){return a._focus(l.begin,l.end)}),ply=register("ply",function(l,a){const o=a.fmap(u=>pure(u)._fast(l)).squeezeJoin();return __steps&&(o._steps=fraction$1(l).mulmaybe(a._steps)),o}),{fast,density:density$1}=register(["fast","density"],function(l,a){return l===0?silence:(l=fraction$1(l),a.withQueryTime(u=>u.mul(l)).withHapTime(u=>u.div(l)).setSteps(a._steps))},!0,!0),hurry=register("hurry",function(l,a){return a._fast(l).mul(pure({speed:l}))}),{slow,sparsity}=register(["slow","sparsity"],function(l,a){return l===0?silence:a._fast(fraction$1(1).div(l))}),inside$1=register("inside",function(l,a,o){return a(o._slow(l))._fast(l)}),outside=register("outside",function(l,a,o){return a(o._fast(l))._slow(l)}),lastOf=register("lastOf",function(l,a,o){const u=Array(l-1).fill(o);return u.push(a(o)),slowcatPrime(...u)}),{firstOf,every}=register(["firstOf","every"],function(l,a,o){const u=Array(l-1).fill(o);return u.unshift(a(o)),slowcatPrime(...u)}),apply=register("apply",function(l,a){return l(a)}),cpm=register("cpm",function(l,a){return a._fast(l/60/1)}),early=register("early",function(l,a){return l=fraction$1(l),a.withQueryTime(o=>o.add(l)).withHapTime(o=>o.sub(l))},!0,!0),late=register("late",function(l,a){return l=fraction$1(l),a._early(fraction$1(0).sub(l))},!0,!0),zoom=register("zoom",function(l,a,o){if(a=fraction$1(a),l=fraction$1(l),l.gte(a))return nothing;const u=a.sub(l),p=__steps?o._steps?.mulmaybe(u):void 0;return o.withQuerySpan(d=>d.withCycle(f=>f.mul(u).add(l))).withHapSpan(d=>d.withCycle(f=>f.sub(l).div(u))).splitQueries().setSteps(p)}),{zoomArc,zoomarc}=register(["zoomArc","zoomarc"],function(l,a){return a.zoom(l.begin,l.end)}),bite=register("bite",(l,a,o)=>a.fmap(u=>p=>{const d=fraction$1(u).div(p).mod(1),f=d.add(fraction$1(1).div(p));return o.zoom(d,f)}).appLeft(l).squeezeJoin(),!1),linger=register("linger",function(l,a){return l==0?silence:l<0?a._zoom(l.add(1),1)._slow(l):a._zoom(0,l)._slow(l)},!0,!0),{segment,seg}=register(["segment","seg"],function(l,a){return a.struct(pure(!0)._fast(l)).setSteps(l)}),swingBy=register("swingBy",(l,a,o)=>o.inside(a,late(seq(0,l/2)))),swing=register("swing",(l,a)=>a.swingBy(1/3,l)),{invert:invert$1,inv}=register(["invert","inv"],function(l){return l.fmap(a=>!a)},!0,!0),when=register("when",function(l,a,o){return l?a(o):o}),off$1=register("off",function(l,a,o){return stack(o,a(o.late(l)))}),brak=register("brak",function(l){return l.when(slowcat(!1,!0),a=>fastcat(a,silence)._late(.25))}),rev=register("rev",function(l){const a=function(o){const u=o.span,p=u.begin.sam(),d=u.begin.nextSam(),f=function(b){const O=b.withTime(M=>p.add(d.sub(M))),S=O.begin;return O.begin=O.end,O.end=S,O};return l.query(o.setSpan(f(u))).map(b=>b.withSpan(f))};return new Pattern$1(a).splitQueries()},!1,!0),pressBy=register("pressBy",function(l,a){return a.fmap(o=>pure(o).compress(l,1)).squeezeJoin()}),press=register("press",function(l){return l._pressBy(.5)});Pattern$1.prototype.hush=function(){return silence};const palindrome=register("palindrome",function(l){return l.lastOf(2,rev)},!0,!0),{juxBy,juxby}=register(["juxBy","juxby"],function(l,a,o){l/=2;const u=function(f,g,b){return g in f?f[g]:b},p=o.withValue(f=>Object.assign({},f,{pan:u(f,"pan",.5)-l})),d=a(o.withValue(f=>Object.assign({},f,{pan:u(f,"pan",.5)+l})));return stack(p,d).setSteps(__steps?lcm(p._steps,d._steps):void 0)}),jux=register("jux",function(l,a){return a._juxBy(1,l,a)}),{echoWith,echowith,stutWith,stutwith}=register(["echoWith","echowith","stutWith","stutwith"],function(l,a,o,u){return stack(...listRange(0,l-1).map(p=>o(u.late(fraction$1(a).mul(p)),p)))}),echo=register("echo",function(l,a,o,u){return u._echoWith(l,a,(p,d)=>p.gain(Math.pow(o,d)))}),stut=register("stut",function(l,a,o,u){return u._echoWith(l,o,(p,d)=>p.gain(Math.pow(a,d)))}),applyN=register("applyN",function(l,a,o){let u=o;for(let p=0;p<l;p++)u=a(u);return u}),plyWith=register(["plyWith","plywith"],function(l,a,o){const u=o.fmap(p=>cat(...listRange(0,l-1).map(d=>applyN(d,a,p)))._fast(l)).squeezeJoin();return __steps&&(u._steps=fraction$1(l).mulmaybe(o._steps)),u}),plyForEach=register(["plyForEach","plyforeach"],function(l,a,o){const u=o.fmap(p=>cat(cat(pure(p),...listRange(1,l-1).map(d=>a(pure(p),d))))._fast(l)).squeezeJoin();return __steps&&(u._steps=fraction$1(l).mulmaybe(o._steps)),u}),_iter=function(l,a,o=!1){return l=fraction$1(l),slowcat(...listRange(0,l.sub(1)).map(u=>o?a.late(fraction$1(u).div(l)):a.early(fraction$1(u).div(l))))},iter=register("iter",function(l,a){return _iter(l,a,!1)},!0,!0),{iterBack,iterback}=register(["iterBack","iterback"],function(l,a){return _iter(l,a,!0)},!0,!0),{repeatCycles}=register("repeatCycles",function(l,a){return new Pattern$1(function(o){const u=o.span.begin.sam(),p=u.div(l).sam(),d=u.sub(p);return o=o.withSpan(f=>f.withTime(g=>g.sub(d))),a.query(o).map(f=>f.withSpan(g=>g.withTime(b=>b.add(d))))}).splitQueries()},!0,!0),_chunk=function(l,a,o,u=!1,p=!1){const d=Array(l-1).fill(!1);d.unshift(!0);const f=_iter(l,sequence(...d),!u);return p||(o=o.repeatCycles(l)),o.when(f,a)},{chunk,slowchunk,slowChunk}=register(["chunk","slowchunk","slowChunk"],function(l,a,o){return _chunk(l,a,o,!1,!1)},!0,!0),{chunkBack,chunkback}=register(["chunkBack","chunkback"],function(l,a,o){return _chunk(l,a,o,!0)},!0,!0),{fastchunk,fastChunk}=register(["fastchunk","fastChunk"],function(l,a,o){return _chunk(l,a,o,!1,!0)},!0,!0),{chunkinto,chunkInto}=register(["chunkinto","chunkInto"],function(l,a,o){return o.into(fastcat(!0,...Array(l-1).fill(!1))._iterback(l),a)}),{chunkbackinto,chunkBackInto}=register(["chunkbackinto","chunkBackInto"],function(l,a,o){return o.into(fastcat(!0,...Array(l-1).fill(!1))._iter(l)._early(1),a)}),bypass=register("bypass",function(l,a){return l=!!parseInt(l),l?silence:a},!0,!0),{ribbon,rib}=register(["ribbon","rib"],(l,a,o)=>o.early(l).restart(pure(1).slow(a))),hsla=register("hsla",(l,a,o,u,p)=>p.color(`hsla(${l}turn,${a*100}%,${o*100}%,${u})`)),hsl=register("hsl",(l,a,o,u)=>u.color(`hsl(${l}turn,${a*100}%,${o*100}%)`));Pattern$1.prototype.tag=function(l){return this.withContext(a=>({...a,tags:(a.tags||[]).concat([l])}))};const filter$1=register("filter",(l,a)=>a.withHaps(o=>o.filter(l))),filterWhen=register("filterWhen",(l,a)=>a.filter(o=>l(o.whole.begin))),within=register("within",(l,a,o,u)=>stack(o(u.filterWhen(p=>p.cyclePos()>=l&&p.cyclePos()<=a)),u.filterWhen(p=>p.cyclePos()<l||p.cyclePos()>a)));Pattern$1.prototype.stepJoin=function(){const l=this,a=stepcat(..._retime(_slices(l.queryArc(0,1))))._steps,o=function(u){const d=l.early(u.span.begin.sam()).query(u.setSpan(new TimeSpan(fraction$1(0),fraction$1(1))));return stepcat(..._retime(_slices(d))).query(u)};return new Pattern$1(o,a)},Pattern$1.prototype.stepBind=function(l){return this.fmap(l).stepJoin()};function _retime(l){const a=l.filter((d,f)=>f.hasSteps).reduce((d,f)=>d.add(f),fraction$1(0)),o=removeUndefineds(l.map((d,f)=>f._steps)).reduce((d,f)=>d.add(f),fraction$1(0)),u=a.eq(0)?void 0:o.div(a);function p(d,f){return f._steps===void 0?[d.mulmaybe(u),f]:[f._steps,f]}return l.map(d=>p(...d))}function _slices(l){const a=flatten$1(l.map(p=>[p.part.begin,p.part.end])),o=uniqsortr([fraction$1(0),fraction$1(1),...a]);return pairs(o).map(p=>[p[1].sub(p[0]),stack(..._fitslice(new TimeSpan(...p),l).map(d=>d.value.withHap(f=>f.setContext(f.combineContext(d)))))])}function _fitslice(l,a){return removeUndefineds(a.map(o=>_match(l,o)))}function _match(l,a){const o=l.intersection(a.part);if(o!=null)return new Hap(a.whole,o,a.value,a.context)}const pace=register("pace",function(l,a){return a._steps===void 0?a:a._steps.eq(fraction$1(0))?nothing:a._fast(fraction$1(l).div(a._steps)).setSteps(l)});function _polymeterListSteps(l,...a){const o=a.map(p=>_sequenceCount(p));if(o.length==0)return silence;l==0&&(l=o[0][1]);const u=[];for(const p of o)p[1]!=0&&(l==p[1]?u.push(p[0]):u.push(p[0]._fast(fraction$1(l).div(fraction$1(p[1])))));return stack(...u)}function polymeter(...l){if(Array.isArray(l[0]))return _polymeterListSteps(0,...l);if(l=l.filter(u=>u.hasSteps),l.length==0)return silence;const a=lcm(...l.map(u=>u._steps));if(a.eq(fraction$1(0)))return nothing;const o=stack(...l.map(u=>u.pace(a)));return o._steps=a,o}function stepcat(...l){if(l.length===0)return nothing;const a=f=>Array.isArray(f)?f:[f._steps??1,f];if(l=l.map(a),l.find(f=>f[0]===void 0)){const f=l.map(b=>b[0]).filter(b=>b!==void 0);if(f.length===0)return fastcat(...l.map(b=>b[1]));if(f.length===l.length)return nothing;const g=f.reduce((b,O)=>b.add(O),fraction$1(0)).div(f.length);for(let b of l)b[0]===void 0&&(b[0]=g)}if(l.length==1)return reify(l[0][1]).withSteps(g=>l[0][0]);const o=l.map(f=>f[0]).reduce((f,g)=>f.add(g),fraction$1(0));let u=fraction$1(0);const p=[];for(const[f,g]of l){if(fraction$1(f).eq(0))continue;const b=u.add(f);p.push(reify(g)._compress(u.div(o),b.div(o))),u=b}const d=stack(...p);return d._steps=o,d}function stepalt(...l){l=l.map(p=>Array.isArray(p)?p.map(reify):[reify(p)]);const a=lcm(...l.map(p=>fraction$1(p.length)));let o=[];for(let p=0;p<a;++p)o.push(...l.map(d=>d.length==0?silence:d[p%d.length]));o=o.filter(p=>p.hasSteps&&p._steps>0);const u=o.reduce((p,d)=>p.add(d._steps),fraction$1(0));return o=stepcat(...o),o._steps=u,o}const take=stepRegister("take",function(l,a){if(!a.hasSteps||a._steps.lte(0)||(l=fraction$1(l),l.eq(0)))return nothing;const o=l<0;o&&(l=l.abs());const u=l.div(a._steps);return u.lte(0)?nothing:u.gte(1)?a:o?a.zoom(fraction$1(1).sub(u),1):a.zoom(0,u)}),drop=stepRegister("drop",function(l,a){return a.hasSteps?(l=fraction$1(l),l.lt(0)?a.take(a._steps.add(l)):a.take(fraction$1(0).sub(a._steps.sub(l)))):nothing}),extend=stepRegister("extend",function(l,a){return a.fast(l).expand(l)}),replicate=stepRegister("replicate",function(l,a){return a.repeatCycles(l).fast(l).expand(l)}),expand=stepRegister("expand",function(l,a){return a.withSteps(o=>o.mul(fraction$1(l)))}),contract=stepRegister("contract",function(l,a){return a.withSteps(o=>o.div(fraction$1(l)))});Pattern$1.prototype.shrinklist=function(l){const a=this;if(!a.hasSteps)return[a];let[o,u]=Array.isArray(l)?l:[l,a._steps];if(o=fraction$1(o),u===0||o===0)return[a];const p=o>0,d=[];if(p){const f=fraction$1(1).div(a._steps).mul(o);for(let g=0;g<u;++g){const b=f.mul(g);if(b.gt(1))break;d.push([b,1])}}else{o=fraction$1(0).sub(o);const f=fraction$1(1).div(a._steps).mul(o);for(let g=0;g<u;++g){const b=fraction$1(1).sub(f.mul(g));if(b.lt(0))break;d.push([fraction$1(0),b])}}return d.map(f=>a.zoom(...f))};const shrinklist=(l,a)=>a.shrinklist(l),shrink=register("shrink",function(l,a){if(!a.hasSteps)return nothing;const o=a.shrinklist(l),u=stepcat(...o);return u._steps=o.reduce((p,d)=>p.add(d._steps),fraction$1(0)),u},!0,!1,l=>l.stepJoin()),grow=register("grow",function(l,a){if(!a.hasSteps)return nothing;const o=a.shrinklist(fraction$1(0).sub(l));o.reverse();const u=stepcat(...o);return u._steps=o.reduce((p,d)=>p.add(d._steps),fraction$1(0)),u},!0,!1,l=>l.stepJoin()),tour=function(l,...a){return l.tour(...a)};Pattern$1.prototype.tour=function(...l){return stepcat(...[].concat(...l.map((a,o)=>[...l.slice(0,l.length-o),this,...l.slice(l.length-o)]),this,...l))};const zip=function(...l){l=l.filter(u=>u.hasSteps);const a=slowcat(...l.map(u=>u._slow(u._steps))),o=lcm(...l.map(u=>u._steps));return a._fast(o).setSteps(o)},timecat=stepcat,timeCat=stepcat,s_cat=stepcat,s_alt=stepalt,s_polymeter=polymeter;Pattern$1.prototype.s_polymeter=Pattern$1.prototype.polymeter;const s_taper=shrink;Pattern$1.prototype.s_taper=Pattern$1.prototype.shrink;const s_taperlist=shrinklist;Pattern$1.prototype.s_taperlist=Pattern$1.prototype.shrinklist;const s_add=take;Pattern$1.prototype.s_add=Pattern$1.prototype.take;const s_sub=drop;Pattern$1.prototype.s_sub=Pattern$1.prototype.drop;const s_expand=expand;Pattern$1.prototype.s_expand=Pattern$1.prototype.expand;const s_extend=extend;Pattern$1.prototype.s_extend=Pattern$1.prototype.extend;const s_contract=contract;Pattern$1.prototype.s_contract=Pattern$1.prototype.contract;const s_tour=tour;Pattern$1.prototype.s_tour=Pattern$1.prototype.tour;const s_zip=zip;Pattern$1.prototype.s_zip=Pattern$1.prototype.zip;const steps$2=pace;Pattern$1.prototype.steps=Pattern$1.prototype.pace;const chop=register("chop",function(l,a){const u=Array.from({length:l},(f,g)=>g).map(f=>({begin:f/l,end:(f+1)/l})),p=function(f,g){if("begin"in f&&"end"in f&&f.begin!==void 0&&f.end!==void 0){const b=f.end-f.begin;g={begin:f.begin+g.begin*b,end:f.begin+g.end*b}}return Object.assign({},f,g)},d=function(f){return sequence(u.map(g=>p(f,g)))};return a.squeezeBind(d).setSteps(__steps?fraction$1(l).mulmaybe(a._steps):void 0)}),striate=register("striate",function(l,a){const u=Array.from({length:l},(d,f)=>f).map(d=>({begin:d/l,end:(d+1)/l})),p=slowcat(...u);return a.set(p)._fast(l).setSteps(__steps?fraction$1(l).mulmaybe(a._steps):void 0)}),_loopAt=function(l,a,o=.5){return a.speed(1/l*o).unit("c").slow(l)},slice=register("slice",function(l,a,o){return l.innerBind(u=>a.outerBind(p=>o.outerBind(d=>{d=d instanceof Object?d:{s:d};const f=Array.isArray(u)?u[p]:p/u,g=Array.isArray(u)?u[p+1]:(p+1)/u;return pure({begin:f,end:g,_slices:u,...d})}))).setSteps(a._steps)},!1);Pattern$1.prototype.onTriggerTime=function(l){return this.onTrigger((a,o,u,p)=>{const d=p-o;window.setTimeout(()=>{l(a)},d*1e3)},!1)};const splice=register("splice",function(l,a,o){const u=slice(l,a,o);return new Pattern$1(p=>{const d=p.controls._cps||1;return u.query(p).map(g=>g.withValue(b=>({speed:d/b._slices/g.whole.duration*(b.speed||1),unit:"c",...b})))}).setSteps(a._steps)},!1),{loopAt,loopat}=register(["loopAt","loopat"],function(l,a){const o=a._steps?a._steps.div(l):void 0;return new Pattern$1(u=>_loopAt(l,a,u.controls._cps).query(u),o)}),fit=register("fit",l=>l.withHaps((a,o)=>a.map(u=>u.withValue(p=>{const d=("end"in p?p.end:1)-("begin"in p?p.begin:0);return{...p,speed:(o.controls._cps||1)/u.whole.duration*d,unit:"c"}})))),{loopAtCps,loopatcps}=register(["loopAtCps","loopatcps"],function(l,a,o){return _loopAt(l,o,a)}),ref$1=l=>pure(1).withValue(()=>reify(l())).innerJoin();let fadeGain=l=>l<.5?1:1-(l-.5)/.5,xfade=(l,a,o)=>{a=reify(a),l=reify(l),o=reify(o);let u=a.fmap(d=>({gain:fadeGain(d)})),p=a.fmap(d=>({gain:fadeGain(1-d)}));return stack(l.mul(u),o.mul(p))};Pattern$1.prototype.xfade=function(l,a){return xfade(this,l,a)};const __beat=l=>(a,o,u)=>{a=fraction$1(a).mod(o),o=fraction$1(o);const p=a.div(o),d=a.add(1).div(o);return l(u.fmap(f=>pure(f)._compress(p,d)))},{beat}=register(["beat"],__beat(l=>l.innerJoin())),_morph=(l,a,o)=>{o=fraction$1(o);const u=fraction$1(1).div(l.length),p=g=>{const b=[];for(const[O,S]of g.entries())S&&b.push([fraction$1(O).div(g.length),S]);return b},d=zipWith(([g,b],[O,S])=>{const M=o.mul(O-g).add(g),A=M.add(u);return new TimeSpan(M,A)},p(l),p(a));function f(g){const b=g.span.begin.sam(),O=g.span.cycleArc(),S=[];for(const M of d){const A=M.intersection(O);A!==void 0&&S.push(new Hap(M.withTime(F=>F.add(b)),A.withTime(F=>F.add(b)),!0))}return S}return new Pattern$1(f).splitQueries()},morph=(l,a,o)=>(l=reify(l),a=reify(a),o=reify(o),l.innerBind(u=>a.innerBind(p=>o.innerBind(d=>_morph(u,p,d))))),distAlgoNames=["scurve","soft","hard","cubic","diode","asym","fold","sinefold","chebyshev"];for(const l of distAlgoNames)Pattern$1.prototype[l]=function(a){const o=reify(a).fmap(u=>Array.isArray(u)?[...u,l]:[u,1,l]);return this.distort(o)};function createParam(l){let a=Array.isArray(l);l=a?l:[l];const o=l[0],u=d=>{let f;if(typeof d=="object"&&d.value!==void 0&&(f={...d},d=d.value,delete f.value),a&&Array.isArray(d)){const g=f||{};return d.forEach((b,O)=>{O<l.length&&(g[l[O]]=b)}),g}else return f?(f[o]=d,f):{[o]:d}},p=function(d,f){return f?typeof d>"u"?f.fmap(u):f.set(reify(d).withValue(u)):reify(d).withValue(u)};return Pattern$1.prototype[o]=function(d){return p(d,this)},p}const controlAlias=new Map;function isControlName(l){return controlAlias.has(l)}function registerControl(l,...a){const o=Array.isArray(l)?l[0]:l;let u={};return u[o]=createParam(l),controlAlias.set(o,o),a.forEach(p=>{u[p]=u[o],controlAlias.set(p,o),Pattern$1.prototype[p]=Pattern$1.prototype[o]}),u}const{s,sound}=registerControl(["s","n","gain"],"sound"),{wt,wavetablePosition}=registerControl("wt","wavetablePosition"),{wtenv}=registerControl("wtenv"),{wtattack,wtatt}=registerControl("wtattack","wtatt"),{wtdecay,wtdec}=registerControl("wtdecay","wtdec"),{wtsustain,wtsus}=registerControl("wtsustain","wtsus"),{wtrelease,wtrel}=registerControl("wtrelease","wtrel"),{wtrate}=registerControl("wtrate"),{wtsync}=registerControl("wtsync"),{wtdepth}=registerControl("wtdepth"),{wtshape}=registerControl("wtshape"),{wtdc}=registerControl("wtdc"),{wtskew}=registerControl("wtskew"),{warp,wavetableWarp}=registerControl("warp","wavetableWarp"),{warpattack,warpatt}=registerControl("warpattack","warpatt"),{warpdecay,warpdec}=registerControl("warpdecay","warpdec"),{warpsustain,warpsus}=registerControl("warpsustain","warpsus"),{warprelease,warprel}=registerControl("warprelease","warprel"),{warprate}=registerControl("warprate"),{warpdepth}=registerControl("warpdepth"),{warpshape}=registerControl("warpshape"),{warpdc}=registerControl("warpdc"),{warpskew}=registerControl("warpskew"),{warpmode,wavetableWarpMode}=registerControl("warpmode","wavetableWarpMode"),{wtphaserand,wavetablePhaseRand}=registerControl("wtphaserand","wavetablePhaseRand"),{warpenv}=registerControl("warpenv"),{warpsync}=registerControl("warpsync"),{source,src}=registerControl("source","src"),{n}=registerControl("n"),{note:note$2}=registerControl(["note","n"]),{accelerate}=registerControl("accelerate"),{velocity}=registerControl("velocity"),{gain}=registerControl("gain"),{postgain}=registerControl("postgain"),{amp}=registerControl("amp"),{attack,att}=registerControl("attack","att"),{fmh}=registerControl(["fmh","fmi"],"fmh"),{fmi,fm:fm$1}=registerControl(["fmi","fmh"],"fm"),{fmenv}=registerControl("fmenv"),{fmattack}=registerControl("fmattack"),{fmwave}=registerControl("fmwave"),{fmdecay}=registerControl("fmdecay"),{fmsustain}=registerControl("fmsustain"),{fmrelease}=registerControl("fmrelease"),{fmvelocity}=registerControl("fmvelocity"),{bank}=registerControl("bank"),{chorus}=registerControl("chorus"),{analyze}=registerControl("analyze"),{fft}=registerControl("fft"),{decay,dec:dec$1}=registerControl("decay","dec"),{sustain,sus}=registerControl("sustain","sus"),{release,rel}=registerControl("release","rel"),{hold}=registerControl("hold"),{bandf,bpf,bp}=registerControl(["bandf","bandq","bpenv"],"bpf","bp"),{bandq,bpq}=registerControl("bandq","bpq"),{begin}=registerControl("begin"),{end}=registerControl("end"),{loop}=registerControl("loop"),{loopBegin,loopb}=registerControl("loopBegin","loopb"),{loopEnd,loope}=registerControl("loopEnd","loope"),{crush}=registerControl("crush"),{coarse}=registerControl("coarse"),{tremolo}=registerControl(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync}=registerControl(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth}=registerControl("tremolodepth","tremdepth"),{tremoloskew}=registerControl("tremoloskew","tremskew"),{tremolophase}=registerControl("tremolophase","tremphase"),{tremoloshape}=registerControl("tremoloshape","tremshape"),{drive}=registerControl("drive"),{duck}=registerControl("duckorbit","duck"),{duckdepth}=registerControl("duckdepth"),{duckonset}=registerControl("duckonset","duckons"),{duckattack}=registerControl("duckattack","duckatt"),{byteBeatExpression,bbexpr}=registerControl("byteBeatExpression","bbexpr"),{byteBeatStartTime,bbst}=registerControl("byteBeatStartTime","bbst"),{channels,ch}=registerControl("channels","ch"),{pw}=registerControl(["pw","pwrate","pwsweep"]),{pwrate}=registerControl("pwrate"),{pwsweep}=registerControl("pwsweep"),{phaserrate,ph,phaser}=registerControl(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep,phs}=registerControl("phasersweep","phs"),{phasercenter,phc}=registerControl("phasercenter","phc"),{phaserdepth,phd,phasdp}=registerControl("phaserdepth","phd","phasdp"),{channel}=registerControl("channel"),{cut}=registerControl("cut"),{cutoff,ctf,lpf,lp}=registerControl(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv,lpe}=registerControl("lpenv","lpe"),{hpenv,hpe}=registerControl("hpenv","hpe"),{bpenv,bpe}=registerControl("bpenv","bpe"),{lpattack,lpa}=registerControl("lpattack","lpa"),{hpattack,hpa}=registerControl("hpattack","hpa"),{bpattack,bpa}=registerControl("bpattack","bpa"),{lpdecay,lpd}=registerControl("lpdecay","lpd"),{hpdecay,hpd}=registerControl("hpdecay","hpd"),{bpdecay,bpd}=registerControl("bpdecay","bpd"),{lpsustain,lps}=registerControl("lpsustain","lps"),{hpsustain,hps}=registerControl("hpsustain","hps"),{bpsustain,bps}=registerControl("bpsustain","bps"),{lprelease,lpr}=registerControl("lprelease","lpr"),{hprelease,hpr}=registerControl("hprelease","hpr"),{bprelease,bpr}=registerControl("bprelease","bpr"),{ftype}=registerControl("ftype"),{fanchor}=registerControl("fanchor"),{vib,vibrato,v}=registerControl(["vib","vibmod"],"vibrato","v"),{noise}=registerControl("noise"),{vibmod,vmod}=registerControl(["vibmod","vib"],"vmod"),{hcutoff,hpf,hp}=registerControl(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance,hpq}=registerControl("hresonance","hpq"),{resonance,lpq}=registerControl("resonance","lpq"),{djf}=registerControl("djf"),{delay}=registerControl(["delay","delaytime","delayfeedback"]),{delayfeedback,delayfb,dfb}=registerControl("delayfeedback","delayfb","dfb"),{delayspeed}=registerControl("delayspeed"),{delaytime,delayt,dt}=registerControl("delaytime","delayt","dt"),{delaysync}=registerControl("delaysync"),{lock}=registerControl("lock"),{detune,det}=registerControl("detune","det"),{unison}=registerControl("unison"),{spread}=registerControl("spread"),{dry}=registerControl("dry"),{fadeTime,fadeOutTime}=registerControl("fadeTime","fadeOutTime"),{fadeInTime}=registerControl("fadeInTime"),{freq:freq$1}=registerControl("freq"),{pattack,patt}=registerControl("pattack","patt"),{pdecay,pdec}=registerControl("pdecay","pdec"),{psustain,psus}=registerControl("psustain","psus"),{prelease,prel}=registerControl("prelease","prel"),{penv}=registerControl("penv"),{pcurve}=registerControl("pcurve"),{panchor}=registerControl("panchor"),{gate,gat}=registerControl("gate","gat"),{leslie}=registerControl("leslie"),{lrate}=registerControl("lrate"),{lsize}=registerControl("lsize"),{activeLabel}=registerControl("activeLabel"),{label}=registerControl(["label","activeLabel"]),{degree}=registerControl("degree"),{mtranspose}=registerControl("mtranspose"),{ctranspose}=registerControl("ctranspose"),{harmonic}=registerControl("harmonic"),{stepsPerOctave}=registerControl("stepsPerOctave"),{octaveR}=registerControl("octaveR"),{nudge}=registerControl("nudge"),{octave:octave$1}=registerControl("octave"),{orbit}=registerControl("orbit"),{overgain}=registerControl("overgain"),{overshape}=registerControl("overshape"),{pan}=registerControl("pan"),{panspan}=registerControl("panspan"),{pansplay}=registerControl("pansplay"),{panwidth:panwidth$1}=registerControl("panwidth"),{panorient}=registerControl("panorient"),{rate}=registerControl("rate"),{slide}=registerControl("slide"),{semitone}=registerControl("semitone"),{voice}=registerControl("voice"),{chord:chord$1}=registerControl("chord"),{dictionary:dictionary$3,dict}=registerControl("dictionary","dict"),{anchor}=registerControl("anchor"),{offset}=registerControl("offset"),{octaves}=registerControl("octaves"),{mode:mode$1}=registerControl(["mode","anchor"]),{room}=registerControl(["room","size"]),{roomlp,rlp}=registerControl("roomlp","rlp"),{roomdim,rdim}=registerControl("roomdim","rdim"),{roomfade,rfade}=registerControl("roomfade","rfade"),{ir,iresponse}=registerControl(["ir","i"],"iresponse"),{irspeed}=registerControl("irspeed"),{irbegin}=registerControl("irbegin"),{roomsize,size,sz,rsize}=registerControl("roomsize","size","sz","rsize"),{shape}=registerControl(["shape","shapevol"]),{distort,dist:dist$3}=registerControl(["distort","distortvol","distorttype"],"dist"),{distortvol}=registerControl("distortvol","distvol"),{distorttype}=registerControl("distorttype","disttype"),{compressor}=registerControl(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee}=registerControl("compressorKnee"),{compressorRatio}=registerControl("compressorRatio"),{compressorAttack}=registerControl("compressorAttack"),{compressorRelease}=registerControl("compressorRelease"),{speed}=registerControl("speed"),{stretch}=registerControl("stretch"),{unit}=registerControl("unit"),{squiz}=registerControl("squiz"),{vowel}=registerControl("vowel"),{waveloss}=registerControl("waveloss"),{density}=registerControl("density"),{expression}=registerControl("expression"),{sustainpedal}=registerControl("sustainpedal"),{fshift}=registerControl("fshift"),{fshiftnote}=registerControl("fshiftnote"),{fshiftphase}=registerControl("fshiftphase"),{triode}=registerControl("triode"),{krush}=registerControl("krush"),{kcutoff}=registerControl("kcutoff"),{octer}=registerControl("octer"),{octersub}=registerControl("octersub"),{octersubsub}=registerControl("octersubsub"),{ring}=registerControl("ring"),{ringf}=registerControl("ringf"),{ringdf}=registerControl("ringdf"),{freeze}=registerControl("freeze"),{xsdelay}=registerControl("xsdelay"),{tsdelay}=registerControl("tsdelay"),{real}=registerControl("real"),{imag}=registerControl("imag"),{enhance}=registerControl("enhance"),{partials}=registerControl("partials"),{comb}=registerControl("comb"),{smear:smear$1}=registerControl("smear"),{scram}=registerControl("scram"),{binshift}=registerControl("binshift"),{hbrick}=registerControl("hbrick"),{lbrick}=registerControl("lbrick"),{frameRate}=registerControl("frameRate"),{frames}=registerControl("frames"),{hours}=registerControl("hours"),{minutes}=registerControl("minutes"),{seconds}=registerControl("seconds"),{songPtr}=registerControl("songPtr"),{uid}=registerControl("uid"),{val}=registerControl("val"),{cps}=registerControl("cps"),{clip:clip$1,legato}=registerControl("clip","legato"),{duration,dur}=registerControl("duration","dur"),{zrand}=registerControl("zrand"),{curve}=registerControl("curve"),{deltaSlide}=registerControl("deltaSlide"),{pitchJump}=registerControl("pitchJump"),{pitchJumpTime}=registerControl("pitchJumpTime"),{lfo,repeatTime}=registerControl("lfo","repeatTime"),{znoise}=registerControl("znoise"),{zmod}=registerControl("zmod"),{zcrush}=registerControl("zcrush"),{zdelay}=registerControl("zdelay"),{zzfx}=registerControl("zzfx"),{color,colour}=registerControl(["color","colour"]);let createParams=(...l)=>l.reduce((a,o)=>Object.assign(a,{[o]:createParam(o)}),{});const adsr=register("adsr",(l,a)=>{l=Array.isArray(l)?l:[l];const[o,u,p,d]=l;return a.set({attack:o,decay:u,sustain:p,release:d})}),ad=register("ad",(l,a)=>{l=Array.isArray(l)?l:[l];const[o,u=o]=l;return a.attack(o).decay(u)}),ds=register("ds",(l,a)=>{l=Array.isArray(l)?l:[l];const[o,u=0]=l;return a.set({decay:o,sustain:u})}),ar=register("ar",(l,a)=>{l=Array.isArray(l)?l:[l];const[o,u=o]=l;return a.set({attack:o,release:u})}),{midichan}=registerControl("midichan"),{midimap}=registerControl("midimap"),{midiport}=registerControl("midiport"),{midicmd}=registerControl("midicmd"),control=register("control",(l,a)=>{if(!Array.isArray(l))throw new Error("control expects an array of [ccn, ccv]");const[o,u]=l;return a.ccn(o).ccv(u)}),{ccn}=registerControl("ccn"),{ccv}=registerControl("ccv"),{ctlNum}=registerControl("ctlNum"),{nrpnn}=registerControl("nrpnn"),{nrpv}=registerControl("nrpv"),{progNum}=registerControl("progNum"),sysex=register("sysex",(l,a)=>{if(!Array.isArray(l))throw new Error("sysex expects an array of [id, data]");const[o,u]=l;return a.sysexid(o).sysexdata(u)}),{sysexid}=registerControl("sysexid"),{sysexdata}=registerControl("sysexdata"),{midibend}=registerControl("midibend"),{miditouch}=registerControl("miditouch"),{polyTouch}=registerControl("polyTouch"),{oschost}=registerControl("oschost"),{oscport}=registerControl("oscport"),getControlName=l=>controlAlias.has(l)?controlAlias.get(l):l,as=register("as",(l,a)=>(l=Array.isArray(l)?l:[l],a.fmap(o=>(o=Array.isArray(o)?o:[o],o=Object.fromEntries(l.map((u,p)=>[getControlName(u),o[p]])),o)))),scrub=register("scrub",(l,a)=>l.outerBind(o=>{Array.isArray(o)||(o=[o]);const[u,p=1]=o;return a.begin(u).mul(speed(p)).clip(1)}),!1),controls=Object.freeze(Object.defineProperty({__proto__:null,accelerate,activeLabel,ad,adsr,amp,analyze,anchor,ar,as,att,attack,bandf,bandq,bank,bbexpr,bbst,begin,binshift,bp,bpa,bpattack,bpd,bpdecay,bpe,bpenv,bpf,bpq,bpr,bprelease,bps,bpsustain,byteBeatExpression,byteBeatStartTime,ccn,ccv,ch,channel,channels,chord:chord$1,chorus,clip:clip$1,coarse,color,colour,comb,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,control,cps,createParam,createParams,crush,ctf,ctlNum,ctranspose,curve,cut,cutoff,dec:dec$1,decay,degree,delay,delayfb,delayfeedback,delayspeed,delaysync,delayt,delaytime,deltaSlide,density,det,detune,dfb,dict,dictionary:dictionary$3,dist:dist$3,distort,distorttype,distortvol,djf,drive,dry,ds,dt,duck,duckattack,duckdepth,duckonset,dur,duration,end,enhance,expression,fadeInTime,fadeOutTime,fadeTime,fanchor,fft,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,fmwave,frameRate,frames,freeze,freq:freq$1,fshift,fshiftnote,fshiftphase,ftype,gain,gat,gate,getControlName,harmonic,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdecay,hpe,hpenv,hpf,hpq,hpr,hprelease,hps,hpsustain,hresonance,imag,ir,irbegin,iresponse,irspeed,isControlName,kcutoff,krush,label,lbrick,legato,leslie,lfo,lock,loop,loopBegin,loopEnd,loopb,loope,lp,lpa,lpattack,lpd,lpdecay,lpe,lpenv,lpf,lpq,lpr,lprelease,lps,lpsustain,lrate,lsize,midibend,midichan,midicmd,midimap,midiport,miditouch,minutes,mode:mode$1,mtranspose,n,noise,note:note$2,nrpnn,nrpv,nudge,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,offset,orbit,oschost,oscport,overgain,overshape,pan,panchor,panorient,panspan,pansplay,panwidth:panwidth$1,partials,patt,pattack,pcurve,pdec,pdecay,penv,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phc,phd,phs,pitchJump,pitchJumpTime,polyTouch,postgain,prel,prelease,progNum,psus,psustain,pw,pwrate,pwsweep,rate,rdim,real,registerControl,rel,release,repeatTime,resonance,rfade,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rsize,s,scram,scrub,seconds,semitone,shape,size,slide,smear:smear$1,songPtr,sound,source,speed,spread,squiz,src,stepsPerOctave,stretch,sus,sustain,sustainpedal,sysex,sysexdata,sysexid,sz,tremolo,tremolodepth,tremolophase,tremoloshape,tremoloskew,tremolosync,triode,tsdelay,uid,unison,unit,v,val,velocity,vib,vibmod,vibrato,vmod,voice,vowel,warp,warpatt,warpattack,warpdc,warpdec,warpdecay,warpdepth,warpenv,warpmode,warprate,warprel,warprelease,warpshape,warpskew,warpsus,warpsustain,warpsync,waveloss,wavetablePhaseRand,wavetablePosition,wavetableWarp,wavetableWarpMode,wt,wtatt,wtattack,wtdc,wtdec,wtdecay,wtdepth,wtenv,wtphaserand,wtrate,wtrel,wtrelease,wtshape,wtskew,wtsus,wtsustain,wtsync,xsdelay,zcrush,zdelay,zmod,znoise,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),left=function(l,a){const[o,u]=l,[p,d]=a,[f,g]=splitAt(u,p);return[[u,o-u],[zipWith((b,O)=>b.concat(O),f,d),g]]},right=function(l,a){const[o,u]=l,[p,d]=a,[f,g]=splitAt(o,d);return[[o,u-o],[zipWith((O,S)=>O.concat(S),p,f),g]]},_bjork=function(l,a){const[o,u]=l;return Math.min(o,u)<=1?[l,a]:_bjork(...o>u?left(l,a):right(l,a))},bjork=function(l,a){const o=l<0,u=Math.abs(l),p=a-u,d=Array(u).fill([1]),f=Array(p).fill([0]),g=_bjork([u,p],[d,f]),b=flatten$1(g[1][0]).concat(flatten$1(g[1][1]));return o?b.map(O=>1-O):b},_euclidRot=function(l,a,o){const u=bjork(l,a);return o?rotate$2(u,-o):u},euclid=register("euclid",function(l,a,o){return o.struct(_euclidRot(l,a,0))}),e=register("e",function(l,a){Array.isArray(l)||(l=[l]);const[o,u=o,p=0]=l;return a.struct(_euclidRot(o,u,p))}),{euclidrot,euclidRot}=register(["euclidrot","euclidRot"],function(l,a,o,u){return u.struct(_euclidRot(l,a,o))}),_euclidLegato=function(l,a,o,u){if(l<1)return silence;const d=_euclidRot(l,a,0).join("").split("1").slice(1).map(f=>[f.length+1,!0]);return u.struct(timeCat(...d)).late(fraction$1(o).div(a))},euclidLegato=register(["euclidLegato"],function(l,a,o){return _euclidLegato(l,a,0,o)}),euclidLegatoRot=register(["euclidLegatoRot"],function(l,a,o,u){return _euclidLegato(l,a,o,u)}),{euclidish,eish}=register(["euclidish","eish"],function(l,a,o,u){const p=_morph(bjork(l,a),new Array(l).fill(1),o);return u.struct(p).setSteps(a)});function createClock(l,a,o=.05,u=.1,p=.1,d=globalThis.setInterval,f=globalThis.clearInterval,g=!0){let b=0,O=0,S=10**4,M=.01;const A=se=>o=se(o);p=p||u/2;const F=()=>{const se=l(),q=se+u+p;for(O===0&&(O=se+M);O<q;)O=g?Math.round(O*S)/S:O,a(O,o,b,se),O+=o,b++};let $;const B=()=>{I(),F(),$=d(F,u*1e3)},I=()=>{$!==void 0&&f($),$=void 0};return{setDuration:A,start:B,stop:()=>{b=0,O=0,I()},pause:()=>I(),duration:o,interval:u,getPhase:()=>O,minLatency:M}}function steady(l){return new Pattern$1(a=>[new Hap(void 0,a.span,l)])}const signal$1=l=>{const a=o=>[new Hap(void 0,o.span,l(o.span.begin))];return new Pattern$1(a)},saw=signal$1(l=>l%1),saw2=saw.toBipolar(),isaw=signal$1(l=>1-l%1),isaw2=isaw.toBipolar(),sine2=signal$1(l=>Math.sin(Math.PI*2*l)),sine=sine2.fromBipolar(),cosine=sine._early(fraction$1(1).div(4)),cosine2=sine2._early(fraction$1(1).div(4)),square=signal$1(l=>Math.floor(l*2%2)),square2=square.toBipolar(),tri=fastcat(saw,isaw),tri2=fastcat(saw2,isaw2),itri=fastcat(isaw,saw),itri2=fastcat(isaw2,saw2),time$1=signal$1(id$1);let _mouseY=0,_mouseX=0;typeof window<"u"&&document.addEventListener("mousemove",l=>{_mouseY=l.clientY/document.body.clientHeight,_mouseX=l.clientX/document.body.clientWidth});const mousey=signal$1(()=>_mouseY),mouseY=signal$1(()=>_mouseY),mousex=signal$1(()=>_mouseX),mouseX=signal$1(()=>_mouseX),xorwise=l=>{const a=l<<13^l,o=a>>17^a;return o<<5^o},_frac=l=>l-Math.trunc(l),timeToIntSeed=l=>xorwise(Math.trunc(_frac(l/300)*536870912)),intSeedToRand=l=>l%536870912/536870912,timeToRand=l=>Math.abs(intSeedToRand(timeToIntSeed(l))),timeToRandsPrime=(l,a)=>{const o=[];for(let u=0;u<a;++u)o.push(intSeedToRand(l)),l=xorwise(l);return o},timeToRands=(l,a)=>timeToRandsPrime(timeToIntSeed(l),a),run=l=>saw.range(0,l).round().segment(l),binary=l=>{const a=reify(l).log2(0).floor().add(1);return binaryN(l,a)},binaryN=(l,a=16)=>{a=reify(a);const o=run(a).mul(-1).add(a.sub(1));return reify(l).segment(a).brshift(o).band(pure(1))},randrun=l=>signal$1(a=>{const u=timeToRands(a.floor().add(.5),l).map((d,f)=>[d,f]).sort((d,f)=>(d[0]>f[0])-(d[0]<f[0])).map(d=>d[1]),p=a.cyclePos().mul(l).floor()%l;return u[p]})._segment(l),_rearrangeWith=(l,a,o)=>{const u=[...Array(a).keys()].map(p=>o.zoom(fraction$1(p).div(a),fraction$1(p+1).div(a)));return l.fmap(p=>u[p].repeatCycles(a)._fast(a)).innerJoin()},shuffle$2=register("shuffle",(l,a)=>_rearrangeWith(randrun(l),l,a)),scramble=register("scramble",(l,a)=>_rearrangeWith(_irand(l)._segment(l),l,a)),rand=signal$1(timeToRand),rand2=rand.toBipolar(),_brandBy=l=>rand.fmap(a=>a<l),brandBy=l=>reify(l).fmap(_brandBy).innerJoin(),brand=_brandBy(.5),_irand=l=>rand.fmap(a=>Math.trunc(a*l)),irand=l=>reify(l).fmap(_irand).innerJoin(),__chooseWith=(l,a)=>(a=a.map(reify),a.length==0?silence:l.range(0,a.length).fmap(o=>{const u=Math.min(Math.max(Math.floor(o),0),a.length-1);return a[u]})),chooseWith=(l,a)=>__chooseWith(l,a).outerJoin(),chooseInWith=(l,a)=>__chooseWith(l,a).innerJoin(),choose=(...l)=>chooseWith(rand,l),chooseIn=(...l)=>chooseInWith(rand,l),chooseOut=choose;Pattern$1.prototype.choose=function(...l){return chooseWith(this,l)},Pattern$1.prototype.choose2=function(...l){return chooseWith(this.fromBipolar(),l)};const chooseCycles=(...l)=>chooseInWith(rand.segment(1),l),randcat=chooseCycles,_wchooseWith=function(l,...a){const o=a.map(g=>reify(g[0])),u=[];let p=pure(0);for(const g of a)p=p.add(g[1]),u.push(p);const d=sequenceP(u),f=function(g){const b=p.mul(g);return d.fmap(O=>S=>o[O.findIndex(M=>M>S,O)]).appLeft(b)};return l.bind(f)},wchooseWith=(...l)=>_wchooseWith(...l).outerJoin(),wchoose=(...l)=>wchooseWith(rand,...l),wchooseCycles=(...l)=>_wchooseWith(rand.segment(1),...l).innerJoin(),wrandcat=wchooseCycles;function _perlin(l){let a=Math.floor(l),o=a+1;const u=f=>6*f**5-15*f**4+10*f**3;return(f=>g=>b=>g+u(f)*(b-g))(l-a)(timeToRand(a))(timeToRand(o))}const perlinWith=l=>l.fmap(_perlin);function _berlin(l){const a=Math.floor(l),o=a+1,u=timeToRand(a),p=timeToRand(o)+u,d=(l-a)/(o-a);return((g,b,O)=>g+(b-g)*O)(u,p,d)/2}const berlinWith=l=>l.fmap(_berlin),perlin=perlinWith(time$1.fmap(l=>Number(l))),berlin=berlinWith(time$1.fmap(l=>Number(l))),degradeByWith=register("degradeByWith",(l,a,o)=>o.fmap(u=>p=>u).appLeft(l.filterValues(u=>u>a)),!0,!0),degradeBy=register("degradeBy",function(l,a){return a._degradeByWith(rand,l)},!0,!0),degrade=register("degrade",l=>l._degradeBy(.5),!0,!0),undegradeBy=register("undegradeBy",function(l,a){return a._degradeByWith(rand.fmap(o=>1-o),l)},!0,!0),undegrade=register("undegrade",l=>l._undegradeBy(.5),!0,!0),sometimesBy=register("sometimesBy",function(l,a,o){return reify(l).fmap(u=>stack(o._degradeBy(u),a(o._undegradeBy(1-u)))).innerJoin()}),sometimes=register("sometimes",function(l,a){return a._sometimesBy(.5,l)}),someCyclesBy=register("someCyclesBy",function(l,a,o){return reify(l).fmap(u=>stack(o._degradeByWith(rand._segment(1),u),a(o._degradeByWith(rand.fmap(p=>1-p)._segment(1),1-u)))).innerJoin()}),someCycles=register("someCycles",function(l,a){return a._someCyclesBy(.5,l)}),often=register("often",function(l,a){return a.sometimesBy(.75,l)}),rarely=register("rarely",function(l,a){return a.sometimesBy(.25,l)}),almostNever=register("almostNever",function(l,a){return a.sometimesBy(.1,l)}),almostAlways=register("almostAlways",function(l,a){return a.sometimesBy(.9,l)}),never=register("never",function(l,a){return a}),always=register("always",function(l,a){return l(a)});function _keyDown(l){Array.isArray(l)===!1&&(l=[l]);const a=getCurrentKeyboardState();return l.every(o=>{const u=keyAlias.get(o)??o;return a[u]})}const whenKey=register("whenKey",function(l,a,o){return o.when(_keyDown(l),a)}),keyDown=register("keyDown",function(l){return l.fmap(_keyDown)}),_pick=function(l,a,o=!0){const u=Array.isArray(l),p=Object.keys(l).length;return l=objectMap(l,reify),p===0?silence:a.fmap(d=>{let f=d;return u&&(f=o?Math.round(f)%p:clamp$1(Math.round(f),0,l.length-1)),l[f]})},pick=function(l,a){return Array.isArray(a)&&([a,l]=[l,a]),__pick(l,a)},__pick=register("pick",function(l,a){return _pick(l,a,!1).innerJoin()}),pickmod=register("pickmod",function(l,a){return _pick(l,a,!0).innerJoin()}),pickF=register("pickF",function(l,a,o){return o.apply(pick(l,a))}),pickmodF=register("pickmodF",function(l,a,o){return o.apply(pickmod(l,a))}),pickOut=register("pickOut",function(l,a){return _pick(l,a,!1).outerJoin()}),pickmodOut=register("pickmodOut",function(l,a){return _pick(l,a,!0).outerJoin()}),pickRestart=register("pickRestart",function(l,a){return _pick(l,a,!1).restartJoin()}),pickmodRestart=register("pickmodRestart",function(l,a){return _pick(l,a,!0).restartJoin()}),pickReset=register("pickReset",function(l,a){return _pick(l,a,!1).resetJoin()}),pickmodReset=register("pickmodReset",function(l,a){return _pick(l,a,!0).resetJoin()}),{inhabit,pickSqueeze}=register(["inhabit","pickSqueeze"],function(l,a){return _pick(l,a,!1).squeezeJoin()}),{inhabitmod,pickmodSqueeze}=register(["inhabitmod","pickmodSqueeze"],function(l,a){return _pick(l,a,!0).squeezeJoin()}),squeeze=(l,a)=>(a=a.map(reify),a.length==0?silence:l.fmap(o=>{const u=_mod$2(Math.round(o),a.length);return a[u]}).squeezeJoin());let synth;try{synth=window?.speechSynthesis}catch(l){console.warn("cannot use window: not in browser?")}let allVoices=synth?.getVoices();function triggerSpeech(l,a,o){synth.cancel();const u=new SpeechSynthesisUtterance(l);u.lang=a,allVoices=synth.getVoices();const p=allVoices.filter(d=>d.lang.includes(a));typeof o=="number"?u.voice=p[o%p.length]:typeof o=="string"&&(u.voice=p.find(d=>d.name===d)),speechSynthesis.speak(u)}const speak=register("speak",function(l,a,o){return o.onTrigger(u=>{triggerSpeech(u.value,l,a)})}),strudelScope={},evalScope=async(...l)=>{const a=await Promise.allSettled(l),o=a.filter(u=>u.status==="fulfilled").map(u=>u.value);return a.forEach((u,p)=>{u.status==="rejected"&&console.warn(`evalScope: module with index ${p} could not be loaded:`,u.reason)}),o.forEach(u=>{Object.entries(u).forEach(([p,d])=>{globalThis[p]=d,strudelScope[p]=d})}),o};function safeEval(l,a={}){const{wrapExpression:o=!0,wrapAsync:u=!0}=a;o&&(l=`{${l}}`),u&&(l=`(async ()=>${l})()`);const p=`"use strict";return (${l})`;return Function(p)()}const evaluate=async(l,a,o)=>{let u={};if(a){const f=a(l,o);l=f.output,u=f}return{mode:"javascript",pattern:await safeEval(l,{wrapExpression:!!a}),meta:u}};class NeoCyclist{constructor({onTrigger:a,onToggle:o,getTime:u}){this.started=!1,this.cps=.5,this.getTime=u,this.time_at_last_tick_message=0,this.collator=new ClockCollator({getTargetClockTime:u}),this.onToggle=o,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL(""+new URL("assets/clockworker-ZDiUtESR.js",document.currentScript&&document.currentScript.tagName.toUpperCase()==="SCRIPT"&&document.currentScript.src||document.baseURI).href,_documentCurrentScript&&_documentCurrentScript.tagName.toUpperCase()==="SCRIPT"&&_documentCurrentScript.src||new URL("index.js",document.baseURI).href)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const p=f=>{const{cps:g,begin:b,end:O,cycle:S,time:M}=f;this.cps=g,this.cycle=S;const A=this.collator.calculateOffset(M)+M;d(b,O,A),this.time_at_last_tick_message=A},d=(f,g,b)=>{if(this.started===!1)return;this.pattern.queryArc(f,g,{_cps:this.cps,cyclist:"neocyclist"}).forEach(S=>{if(S.hasOnset()){const A=cycleToSeconds$1(S.whole.begin-this.cycle,this.cps)+b+this.latency,F=cycleToSeconds$1(S.duration,this.cps);a?.(S,0,F,this.cps,A)}})};this.channel.onmessage=f=>{if(!this.started)return;const{payload:g,type:b}=f.data;switch(b){case"tick":p(g)}}}sendMessage(a,o){this.worker.port.postMessage({type:a,payload:o,id:this.id})}now(){const a=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+a}setCps(a=1){this.sendMessage("cpschange",{cps:a})}setCycle(a){this.sendMessage("setcycle",{cycle:a})}setStarted(a){this.sendMessage("toggle",{started:a}),this.started=a,this.onToggle?.(a)}start(){logger$2("[cyclist] start"),this.setStarted(!0)}stop(){logger$2("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(a,o=!1){this.pattern=a,o&&!this.started&&this.start()}log(a,o,u){const p=u.filter(d=>d.hasOnset());console.log(`${a.toFixed(4)} - ${o.toFixed(4)} ${Array(p.length).fill("I").join("")}`)}}class Cyclist{constructor({interval:a,onTrigger:o,onToggle:u,onError:p,getTime:d,latency:f=.1,setInterval:g,clearInterval:b,beforeStart:O}){this.started=!1,this.beforeStart=O,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=d,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=u,this.latency=f,this.clock=createClock(d,(S,M,A,F)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=S),this.num_ticks_since_cps_change++;const B=this.num_ticks_since_cps_change*M*this.cps;try{const I=this.lastEnd;this.lastBegin=I;const U=this.num_cycles_at_cps_change+B;if(this.lastEnd=U,this.lastTick=S,S<F){console.log("skip query: too late");return}this.pattern.queryArc(I,U,{_cps:this.cps,cyclist:"cyclist"}).forEach(de=>{if(de.hasOnset()){const se=(de.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+f,q=de.duration/this.cps,le=se-S;o?.(de,le,q,this.cps,se),de.value.cps!==void 0&&this.cps!=de.value.cps&&(this.cps=de.value.cps,this.num_ticks_since_cps_change=0)}})}catch(I){errorLogger$1(I),p?.(I)}},a,.1,.1,g,b)}now(){if(!this.started)return 0;const a=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+a*this.cps}setStarted(a){this.started=a,this.onToggle?.(a)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");logger$2("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){logger$2("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){logger$2("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(a,o=!1){this.pattern=a,o&&!this.started&&await this.start()}setCps(a=.5){this.cps!==a&&(this.cps=a,this.num_ticks_since_cps_change=0)}log(a,o,u){const p=u.filter(d=>d.hasOnset());console.log(`${a.toFixed(4)} - ${o.toFixed(4)} ${Array(p.length).fill("I").join("")}`)}}let time;function getTime(){if(!time)throw new Error("no time set! use setTime to define a time source");return time()}function setTime(l){time=l}function repl$1({defaultOutput:l,onEvalError:a,beforeEval:o,beforeStart:u,afterEval:p,getTime:d,transpiler:f,onToggle:g,editPattern:b,onUpdateState:O,sync:S=!1,setInterval:M,clearInterval:A,id:F,mondo:$=!1}){const B={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},I={id:F},U=Me=>{Object.assign(B,Me),B.isDirty=B.code!==B.activeCode,B.error=B.evalError||B.schedulerError,O?.(B)},te={onTrigger:getTrigger({defaultOutput:l,getTime:d}),getTime:d,onToggle:Me=>{U({started:Me}),g?.(Me)},setInterval:M,clearInterval:A,beforeStart:u},de=S&&typeof SharedWorker<"u"?new NeoCyclist(te):new Cyclist(te);let se={},q=0,le;const fe=function(){return se={},q=0,le=void 0,silence};function _e(Me){return Me._Pattern?Me.__pure:Me}const Pe=async(Me,Xe=!0)=>(Me=b?.(Me)||Me,await de.setPattern(Me,Xe),Me);setTime(()=>de.now());const Oe=()=>de.stop(),Fe=()=>de.start(),we=()=>de.pause(),ke=()=>de.toggle(),Ge=Me=>(de.setCps(_e(Me)),silence),Be=Me=>(de.setCps(_e(Me)/60),silence);let Ze=[];const Ve=function(Me){return Ze.push(Me),silence},Ee=function(Me){return le=Me,silence},He=()=>{Pattern$1.prototype.p=function(Xe){return typeof Xe=="string"&&(Xe.startsWith("_")||Xe.endsWith("_"))?silence:(Xe==="$"&&(Xe=`$${q}`,q++),se[Xe]=this,this)},Pattern$1.prototype.q=function(Xe){return silence};try{for(let Xe=1;Xe<10;++Xe)Object.defineProperty(Pattern$1.prototype,`d${Xe}`,{get(){return this.p(Xe)},configurable:!0}),Object.defineProperty(Pattern$1.prototype,`p${Xe}`,{get(){return this.p(Xe)},configurable:!0}),Pattern$1.prototype[`q${Xe}`]=silence}catch(Xe){console.warn("injectPatternMethods: error:",Xe)}const Me=register("cpm",function(Xe,kt){return kt._fast(Xe/60/de.cps)});return evalScope({all:Ve,each:Ee,hush:fe,cpm:Me,setCps:Ge,setcps:Ge,setCpm:Be,setcpm:Be})};return{scheduler:de,evaluate:async(Me,Xe=!0,kt=!0)=>{if(!Me)throw new Error("no code to evaluate");try{U({code:Me,pending:!0}),await He(),setTime(()=>de.now()),await o?.({code:Me}),Ze=[],kt&&fe(),$&&(Me=`mondolang\`${Me}\``);let{pattern:je,meta:rt}=await evaluate(Me,f,I);if(Object.keys(se).length){let ft=[];for(const[pt,Rt]of Object.entries(se))ft.push(Rt.withState(Bt=>Bt.setControls({id:pt})));le&&(ft=ft.map(pt=>le(pt))),je=stack(...ft)}else le&&(je=le(je));if(Ze.length)for(let ft in Ze)je=Ze[ft](je);if(!isPattern(je)){const ft=`got "${typeof evaluated}" instead of pattern`;throw new Error(ft+(typeof evaluated=="function"?", did you forget to call a function?":"."))}return logger$2("[eval] code updated"),je=await Pe(je,Xe),U({miniLocations:rt?.miniLocations||[],widgets:rt?.widgets||[],activeCode:Me,pattern:je,evalError:void 0,schedulerError:void 0,pending:!1}),p?.({code:Me,pattern:je,meta:rt}),je}catch(je){logger$2(`[eval] error: ${je.message}`,"error"),console.error(je),U({evalError:je,pending:!1}),a?.(je)}},start:Fe,stop:Oe,pause:we,setCps:Ge,setPattern:Pe,setCode:Me=>U({code:Me}),toggle:ke,state:B}}const getTrigger=({getTime:l,defaultOutput:a})=>async(o,u,p,d,f)=>{try{(!o.context.onTrigger||!o.context.dominantTrigger)&&await a(o,u,p,d,f),o.context.onTrigger&&await o.context.onTrigger(o,l(),d,f)}catch(g){errorLogger$1(g,"getTrigger")}},backgroundImage=function(l,a={}){const o=document.getElementById("code"),u="background-image:url("+l+");background-size:contain;";o.style=u;const{className:p}=o,d=(b,O)=>{({style:()=>o.style=u+";"+O,className:()=>o.className=O+" "+p})[b]()},f=Object.entries(a).filter(([b,O])=>typeof O=="function");Object.entries(a).filter(([b,O])=>typeof O=="string").forEach(([b,O])=>d(b,O)),f.length},cleanupUi=()=>{const l=document.getElementById("code");l&&(l.style="")};logger$2("🌀 @strudel/core loaded 🌀"),globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`),globalThis._strudelLoaded=!0;const core=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator,Cyclist,Fraction:fraction$1,Hap,Pattern:Pattern$1,State,TimeSpan,__chooseWith,_brandBy,_fitslice,_irand,_keyDown,_match,_mod:_mod$2,_morph,_polymeterListSteps,_retime,_slices,accelerate,activeLabel,ad,add:add$6,adsr,almostAlways,almostNever,always,amp,analyze,anchor,and,apply,applyN,ar,arp,arpWith,arrange,as,att,attack,averageArray,backgroundImage,band,bandf,bandq,bank,base64ToUnicode,bbexpr,bbst,beat,begin,berlin,berlinWith,binary,binaryN,bind,binshift,bite,bjork,blshift,bor,bp,bpa,bpattack,bpd,bpdecay,bpe,bpenv,bpf,bpq,bpr,bprelease,bps,bpsustain,brak,brand,brandBy,brshift,bxor,bypass,byteBeatExpression,byteBeatStartTime,calculateSteps,cat,ccn,ccv,ceil,ch,channel,channels,choose,chooseCycles,chooseIn,chooseInWith,chooseOut,chooseWith,chop,chord:chord$1,chorus,chunk,chunkBack,chunkBackInto,chunkInto,chunkback,chunkbackinto,chunkinto,clamp:clamp$1,cleanupUi,clip:clip$1,coarse,code2hash,color,colour,comb,compose,compress,compressSpan,compressor,compressorAttack,compressorKnee,compressorRatio,compressorRelease,compressspan,constant,contract,control,controls,cosine,cosine2,cpm,cps,createClock,createParam,createParams,crush,ctf,ctlNum,ctranspose,curry,curve,cut,cutoff,cycleToSeconds:cycleToSeconds$1,dec:dec$1,decay,degrade,degradeBy,degradeByWith,degree,delay,delayfb,delayfeedback,delayspeed,delaysync,delayt,delaytime,deltaSlide,det,detune,dfb,dict,dictionary:dictionary$3,dist:dist$3,distort,distorttype,distortvol,div,djf,drawLine,drive,drop,dry,ds,dt,duck,duckattack,duckdepth,duckonset,dur,duration,e,early,echo,echoWith,echowith,eish,end,enhance,eq,eqt,errorLogger:errorLogger$1,euclid,euclidLegato,euclidLegatoRot,euclidRot,euclidish,euclidrot,evalScope,evaluate,every,expand,expression,extend,fadeInTime,fadeOutTime,fadeTime,fanchor,fast,fastChunk,fastGap,fastcat,fastchunk,fastgap,fft,filter:filter$1,filterWhen,firstOf,fit,flatten:flatten$1,floor,fm:fm$1,fmattack,fmdecay,fmenv,fmh,fmi,fmrelease,fmsustain,fmvelocity,fmwave,focus,focusSpan,focusspan,fractionalArgs,frameRate,frames,freeze,freq:freq$1,freqToMidi:freqToMidi$2,fromBipolar,fshift,fshiftnote,fshiftphase,ftype,func,gain,gap,gat,gate,getControlName,getCurrentKeyboardState,getEventOffsetMs,getFreq,getFrequency,getPerformanceTimeSeconds,getPlayableNoteValue,getSoundIndex:getSoundIndex$1,getTime,getTrigger,grow,gt,gte,harmonic,hash2code,hbrick,hcutoff,hold,hours,hp,hpa,hpattack,hpd,hpdecay,hpe,hpenv,hpf,hpq,hpr,hprelease,hps,hpsustain,hresonance,hsl,hsla,hurry,id:id$1,imag,inhabit,inhabitmod,innerBind,inside:inside$1,inv,invert:invert$1,ir,irand,irbegin,iresponse,irspeed,isControlName,isNote,isNoteWithOctave,isPattern,isaw,isaw2,iter,iterBack,iterback,itri,itri2,jux,juxBy,juxby,kcutoff,keep,keepif,keyAlias,keyDown,krush,label,lastOf,late,lbrick,legato,leslie,lfo,linger,listRange,lock,logKey,logger:logger$2,loop,loopAt,loopAtCps,loopBegin,loopEnd,loopat,loopatcps,loopb,loope,lp,lpa,lpattack,lpd,lpdecay,lpe,lpenv,lpf,lpq,lpr,lprelease,lps,lpsustain,lrate,lsize,lt:lt$1,lte,mapArgs,mask,midi2note:midi2note$1,midiToFreq:midiToFreq$2,midibend,midichan,midicmd,midimap,midiport,miditouch,minutes,mod:mod$3,mode:mode$1,morph,mouseX,mouseY,mousex,mousey,mtranspose,mul,n,nanFallback:nanFallback$1,ne,net,never,noise,note:note$2,noteToMidi:noteToMidi$1,nothing,nrpnn,nrpv,nudge,numeralArgs,objectMap,octave:octave$1,octaveR,octaves,octer,octersub,octersubsub,off:off$1,offset,often,or,orbit,oschost,oscport,outerBind,outside,overgain,overshape,pace,pairs,palindrome,pan,panchor,panorient,panspan,pansplay,panwidth:panwidth$1,parseFractional,parseNumeral,partials,patt,pattack,pcurve,pdec,pdecay,penv,perlin,perlinWith,ph,phasdp,phaser,phasercenter,phaserdepth,phaserrate,phasersweep,phc,phd,phs,pick,pickF,pickOut,pickReset,pickRestart,pickSqueeze,pickmod,pickmodF,pickmodOut,pickmodReset,pickmodRestart,pickmodSqueeze,pipe,pitchJump,pitchJumpTime,ply,plyForEach,plyWith,pm,polyBind,polyTouch,polymeter,polyrhythm,postgain,pow,pr,prel,prelease,press,pressBy,progNum,psus,psustain,pure,pw,pwrate,pwsweep,rand,rand2,randcat,randrun,range:range$2,range2,rangex,rarely,rate,ratio,rdim,real,ref:ref$1,register,registerControl,reify,rel,release,removeUndefineds,repeatCycles,repeatTime,repl:repl$1,replicate,resonance,rev,rfade,rib,ribbon,ring,ringdf,ringf,rlp,room,roomdim,roomfade,roomlp,roomsize,rotate:rotate$2,round,rsize,run,s,s_add,s_alt,s_cat,s_contract,s_expand,s_extend,s_polymeter,s_sub,s_taper,s_taperlist,s_tour,s_zip,saw,saw2,scram,scramble,scrub,seconds,seg,segment,semitone,seq,seqPLoop,sequence,sequenceP,set,setStringParser,setTime,shape,shrink,shrinklist,shuffle:shuffle$2,signal:signal$1,silence,sine,sine2,size,slice,slide,slow,slowChunk,slowcat,slowcatPrime,slowchunk,smear:smear$1,sol2note,someCycles,someCyclesBy,sometimes,sometimesBy,songPtr,sound,source,sparsity,speak,speed,splice,splitAt,spread,square,square2,squeeze,squeezeBind,squiz,src,stack,stackBy,stackCentre,stackLeft,stackRight,steady,stepBind,stepalt,stepcat,steps:steps$2,stepsPerOctave,stretch,striate,stringifyValues,struct,strudelScope,stut,stutWith,stutwith,sub,superimpose,sus,sustain,sustainpedal,swing,swingBy,sysex,sysexdata,sysexid,sz,take,time:time$1,timeCat,timecat,toBipolar,tokenizeNote:tokenizeNote$3,tour,tremolo,tremolodepth,tremolophase,tremoloshape,tremoloskew,tremolosync,tri,tri2,triode,tsdelay,uid,undegrade,undegradeBy,unicodeToBase64,uniq,uniqsort,uniqsortr,unison,unit,v,val,valueToMidi:valueToMidi$1,velocity,vib,vibmod,vibrato,vmod,voice,vowel,warp,warpatt,warpattack,warpdc,warpdec,warpdecay,warpdepth,warpenv,warpmode,warprate,warprel,warprelease,warpshape,warpskew,warpsus,warpsustain,warpsync,waveloss,wavetablePhaseRand,wavetablePosition,wavetableWarp,wavetableWarpMode,wchoose,wchooseCycles,when,whenKey,withValue,within,wrandcat,wt,wtatt,wtattack,wtdc,wtdec,wtdecay,wtdepth,wtenv,wtphaserand,wtrate,wtrel,wtrelease,wtshape,wtskew,wtsus,wtsustain,wtsync,xfade,xsdelay,zcrush,zdelay,zip,zipWith,zmod,znoise,zoom,zoomArc,zoomarc,zrand,zzfx},Symbol.toStringTag,{value:"Module"})),getDrawContext=(l="test-canvas",a)=>{let{contextType:o="2d",pixelated:u=!1,pixelRatio:p=window.devicePixelRatio}=a||{},d=document.querySelector("#"+l);if(!d){d=document.createElement("canvas"),d.id=l,d.width=window.innerWidth*p,d.height=window.innerHeight*p,d.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",u&&(d.style.imageRendering="pixelated"),document.body.prepend(d);let f;window.addEventListener("resize",()=>{f&&clearTimeout(f),f=setTimeout(()=>{d.width=window.innerWidth*p,d.height=window.innerHeight*p},200)})}return d.getContext(o,{willReadFrequently:!0})};let animationFrames={};function stopAnimationFrame(l){animationFrames[l]!==void 0&&(cancelAnimationFrame(animationFrames[l]),delete animationFrames[l])}function stopAllAnimations(l){Object.keys(animationFrames).forEach(a=>(!l||a.startsWith(l))&&stopAnimationFrame(a))}let memory={};Pattern$1.prototype.draw=function(l,a){if(typeof window>"u")return this;let{id:o=1,lookbehind:u=0,lookahead:p=0}=a,d=Math.max(getTime(),0);stopAnimationFrame(o),u=Math.abs(u),memory[o]=(memory[o]||[]).filter(O=>!O.isInFuture(d));let f=this.queryArc(d,d+p).filter(O=>O.hasOnset());memory[o]=memory[o].concat(f);let g;const b=()=>{const O=getTime(),S=O+p;memory[o]=memory[o].filter(F=>F.isInNearPast(u,O));let M=Math.max(g||S,S-1/10);const A=this.queryArc(M,S).filter(F=>F.hasOnset());memory[o]=memory[o].concat(A),g=S,l(memory[o],O,S,this),animationFrames[o]=requestAnimationFrame(b)};return animationFrames[o]=requestAnimationFrame(b),this};const cleanupDraw=(l=!0,a)=>{const o=getDrawContext();l&&o.clearRect(0,0,o.canvas.width,o.canvas.height),stopAllAnimations(a)};Pattern$1.prototype.onPaint=function(l){return this.withState(a=>(a.controls.painters||(a.controls.painters=[]),a.controls.painters.push(l),a))},Pattern$1.prototype.getPainters=function(){let l=[];return this.queryArc(0,0,{painters:l}),l};class Framer{constructor(a,o){this.onFrame=a,this.onError=o}start(){const a=this;let o=requestAnimationFrame(function u(p){try{a.onFrame(p)}catch(d){a.onError(d)}o=requestAnimationFrame(u)});a.cancel=()=>{cancelAnimationFrame(o)}}stop(){this.cancel&&this.cancel()}}class Drawer{constructor(a,o){this.visibleHaps=[],this.lastFrame=null,this.drawTime=o,this.painters=[],this.framer=new Framer(()=>{if(!this.scheduler){console.warn("Drawer: no scheduler");return}const u=Math.abs(this.drawTime[0]),p=this.drawTime[1],d=this.scheduler.now()+p;if(this.lastFrame===null){this.lastFrame=d;return}const f=this.scheduler.pattern.queryArc(Math.max(this.lastFrame,d-1/10),d);this.lastFrame=d,this.visibleHaps=(this.visibleHaps||[]).filter(b=>b.whole&&b.endClipped>=d-u-p).concat(f.filter(b=>b.hasOnset()));const g=d-p;a(this.visibleHaps,g,this,this.painters)},u=>{console.warn("draw error",u)})}setDrawTime(a){this.drawTime=a}invalidate(a=this.scheduler,o){if(!a)return;o=o??a.now(),this.scheduler=a;let[u,p]=this.drawTime;const[d,f]=[Math.max(o,0),o+p+.1];this.visibleHaps=this.visibleHaps.filter(b=>b.whole?.begin<o),this.painters=[];const g=a.pattern.queryArc(d,f,{painters:this.painters});this.visibleHaps=this.visibleHaps.concat(g)}start(a){this.scheduler=a,this.invalidate(),this.framer.start()}stop(){this.framer&&this.framer.stop()}}function getComputedPropertyValue(l){return typeof window>"u"?"#fff":getComputedStyle(document.documentElement).getPropertyValue(l)}let theme$2={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function getTheme(){return theme$2}function setTheme(l){theme$2=l}let clearColor="#22222210";Pattern$1.prototype.animate=function({callback:l,sync:a=!1,smear:o=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const u=getDrawContext();let{clientWidth:p,clientHeight:d}=u.canvas;p*=window.devicePixelRatio,d*=window.devicePixelRatio;let f=o===0?"99":Number((1-o)*100).toFixed(0);f=f.length===1?`0${f}`:f,clearColor=`#200010${f}`;const g=b=>{let O;b=Math.round(b),O=this.slow(1e3).queryArc(b,b),u.fillStyle=clearColor,u.fillRect(0,0,p,d),O.forEach(S=>{let{x:M,y:A,w:F,h:$,s:B,r:I,angle:U=0,fill:te="darkseagreen"}=S.value;if(F*=p,$*=d,I!==void 0&&U!==void 0){const se=U*2*Math.PI,[q,le]=[(p-F)/2,(d-$)/2];M=q+Math.cos(se)*I*q,A=le+Math.sin(se)*I*le}else M*=p-F,A*=d-$;const de={...S.value,x:M,y:A,w:F,h:$};u.fillStyle=te,B==="rect"?u.fillRect(M,A,F,$):B==="ellipse"&&(u.beginPath(),u.ellipse(M+F/2,A+$/2,F/2,$/2,0,0,2*Math.PI),u.fill()),l&&l(u,de,S)}),window.frame=requestAnimationFrame(g)};return window.frame=requestAnimationFrame(g),silence};const{x:x$1,y,w,h:h$2,angle,r,fill,smear}=createParams("x","y","w","h","angle","r","fill","smear"),rescale=register("rescale",function(l,a){return a.mul(x$1(l).w(l).y(l).h(l))}),moveXY=register("moveXY",function(l,a,o){return o.add(x$1(l).y(a))}),zoomIn=register("zoomIn",function(l,a){const o=pure(1).sub(l).div(2);return a.rescale(l).move(o,o)}),colorMap={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function convertColorToNumber(l){return l=l.toLowerCase(),l[0]==="#"?convertHexToNumber(l):colorMap[l]!==void 0?convertHexToNumber(colorMap[l]):-1}function convertHexToNumber(l){return l=l.slice(1),parseInt(l,16)}const scale$2=(l,a,o)=>l*(o-a)+a,getValue=l=>{let{value:a}=l;typeof l.value!="object"&&(a={value:a});let{note:o,n:u,freq:p,s:d}=a;if(p)return freqToMidi$2(p);if(o=o??u,typeof o=="string")try{return noteToMidi$1(o)}catch{return 0}return typeof o=="number"?o:d?"_"+d:a};Pattern$1.prototype.pianoroll=function(l={}){let{cycles:a=4,playhead:o=.5,overscan:u=0,hideNegative:p=!1,ctx:d=getDrawContext(),id:f=1}=l,g=-a*o,b=a*(1-o);const O=(S,M)=>(!p||S.whole.begin>=0)&&S.isWithinTime(M+g,M+b);return this.draw((S,M)=>{__pianoroll({...l,time:M,ctx:d,haps:S.filter(A=>O(A,M))})},{lookbehind:g-u,lookahead:b+u,id:f}),this};function pianoroll(l){return isPattern(l)?l.pianoroll():a=>a.pianoroll(l)}function __pianoroll({time:l,haps:a,cycles:o=4,playhead:u=.5,flipTime:p=0,flipValues:d=0,hideNegative:f=!1,inactive:g=getTheme().foreground,active:b=getTheme().foreground,background:O="transparent",smear:S=0,playheadColor:M=getTheme().foreground,minMidi:A=10,maxMidi:F=90,autorange:$=0,timeframe:B,fold:I=1,vertical:U=0,labels:te=!1,fill:de=1,fillActive:se=!1,strokeActive:q=!0,stroke:le,hideInactive:fe=0,colorizeInactive:_e=1,fontFamily:Pe,ctx:Oe,id:Fe}={}){const we=Oe.canvas.width,ke=Oe.canvas.height;let Ge=-o*u,Be=o*(1-u);Fe&&(a=a.filter(pt=>pt.hasTag(Fe))),B&&(console.warn("timeframe is deprecated! use from/to instead"),Ge=0,Be=B);const Ze=U?ke:we,Ve=U?we:ke;let Ee=U?[Ze,0]:[0,Ze];const He=Be-Ge,nt=U?[0,Ve]:[Ve,0];let ht=F-A+1,Me=Ve/ht,Xe=[];p&&Ee.reverse(),d&&nt.reverse();const{min:kt,max:je,values:rt}=a.reduce(({min:pt,max:Rt,values:Bt},Wt)=>{const Pt=getValue(Wt);return{min:Pt<pt?Pt:pt,max:Pt>Rt?Pt:Rt,values:Bt.includes(Pt)?Bt:[...Bt,Pt]}},{min:1/0,max:-1/0,values:[]});$&&(A=kt,F=je,ht=F-A+1),Xe=rt.sort((pt,Rt)=>typeof pt=="number"&&typeof Rt=="number"?pt-Rt:typeof pt=="number"?1:String(pt).localeCompare(String(Rt))),Me=I?Ve/Xe.length:Ve/ht,Oe.fillStyle=O,Oe.globalAlpha=1,S||(Oe.clearRect(0,0,we,ke),Oe.fillRect(0,0,we,ke)),a.forEach(pt=>{const Rt=pt.whole.begin<=l&&pt.endClipped>l;let Bt=le??(q&&Rt),Wt=!Rt&&de||Rt&&se;if(fe&&!Rt)return;let Pt=pt.value?.color;b=Pt||b,g=_e&&Pt||g,Pt=Rt?b:g,Oe.fillStyle=Wt?Pt:"transparent",Oe.strokeStyle=Pt;const{velocity:hn=1,gain:Et=1}=pt.value||{};Oe.globalAlpha=hn*Et;const Mt=(pt.whole.begin-(p?Be:Ge))/He,sn=scale$2(Mt,...Ee);let Lt=scale$2(pt.duration/He,0,Ze);const pn=getValue(pt),dn=I?Xe.indexOf(pn)/Xe.length:(Number(pn)-A)/ht,fn=scale$2(dn,...nt);let Ut=0;const Nt=scale$2(l/He,...Ee);let qt;if(U?qt=[fn+1-(d?Me:0),Ze-Nt+sn+Ut+1-(p?0:Lt),Me-2,Lt-2]:qt=[sn-Nt+Ut+1-(p?Lt:0),fn+1-(d?0:Me),Lt-2,Me-2],Bt&&Oe.strokeRect(...qt),Wt&&Oe.fillRect(...qt),te){const yn=pt.value.note??pt.value.s+(pt.value.n?`:${pt.value.n}`:""),{label:at,activeLabel:Dt}=pt.value,Tt=(Rt&&Dt||at)??yn;let st=U?Lt:Me*.75;Oe.font=`${st}px ${Pe||"monospace"}`,Oe.fillStyle=Wt?"black":Pt,Oe.textBaseline="top",Oe.fillText(Tt,...qt)}}),Oe.globalAlpha=1;const ft=scale$2(-Ge/He,...Ee);return Oe.strokeStyle=M,Oe.beginPath(),U?(Oe.moveTo(0,ft),Oe.lineTo(Ve,ft)):(Oe.moveTo(ft,0),Oe.lineTo(ft,Ve)),Oe.stroke(),this}function getDrawOptions(l,a={}){let[o,u]=l;o=Math.abs(o);const p=u+o,d=p!==0?o/p:0;return{fold:1,...a,cycles:p,playhead:d}}const getPunchcardPainter=(l={})=>(a,o,u,p)=>__pianoroll({ctx:a,time:o,haps:u,...getDrawOptions(p,l)});Pattern$1.prototype.punchcard=function(l){return this.onPaint(getPunchcardPainter(l))},Pattern$1.prototype.wordfall=function(l){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...l})};function drawPianoroll(l){const{drawTime:a,...o}=l;__pianoroll({...getDrawOptions(a),...o})}function fromPolar(l,a,o,u){const p=(l-90)*Math.PI/180;return[o+Math.cos(p)*a,u+Math.sin(p)*a]}const xyOnSpiral=(l,a,o,u,p=0)=>fromPolar((l+p)*360,a*l,o,u);function spiralSegment(l){let{ctx:a,from:o=0,to:u=3,margin:p=50,cx:d=100,cy:f=100,rotate:g=0,thickness:b=p/2,color:O=getTheme().foreground,cap:S="round",stretch:M=1,fromOpacity:A=1,toOpacity:F=1}=l;o*=M,u*=M,g*=M,a.lineWidth=b,a.lineCap=S,a.strokeStyle=O,a.globalAlpha=A,a.beginPath();let[$,B]=xyOnSpiral(o,p,d,f,g);a.moveTo($,B);const I=1/60;let U=o;for(;U<=u;){const[te,de]=xyOnSpiral(U,p,d,f,g);a.globalAlpha=(U-o)/(u-o)*F,a.lineTo(te,de),U+=I}a.stroke()}function drawSpiral(l){let{stretch:a=1,size:o=80,thickness:u=o/2,cap:p="butt",inset:d=3,playheadColor:f="#ffffff",playheadLength:g=.02,playheadThickness:b=u,padding:O=0,steady:S=1,activeColor:M=getTheme().foreground,inactiveColor:A=getTheme().gutterForeground,colorizeInactive:F=0,fade:$=!0,ctx:B,time:I,haps:U,drawTime:te,id:de}=l;de&&(U=U.filter(we=>we.hasTag(de)));const[se,q]=[B.canvas.width,B.canvas.height];B.clearRect(0,0,se*2,q*2);const[le,fe]=[se/2,q/2],_e={margin:o/a,cx:le,cy:fe,stretch:a,cap:p,thickness:u},Pe={..._e,thickness:b,from:d-g,to:d,color:f},[Oe]=te,Fe=S*I;U.forEach(we=>{const ke=we.whole.begin<=I&&we.endClipped>I,Ge=we.whole.begin-I+d,Be=we.endClipped-I+d-O,Ze=we.value?.color||M,Ve=F||ke?Ze:A,Ee=$?1-Math.abs((we.whole.begin-I)/Oe):1;spiralSegment({ctx:B,..._e,from:Ge,to:Be,rotate:Fe,color:Ve,fromOpacity:Ee,toOpacity:Ee})}),spiralSegment({ctx:B,...Pe,rotate:Fe})}Pattern$1.prototype.spiral=function(l={}){return this.onPaint((a,o,u,p)=>drawSpiral({ctx:a,time:o,haps:u,drawTime:p,...l}))};const c$2=midiToFreq$2(36),circlePos=(l,a,o,u)=>{u=u*Math.PI*2;const p=Math.sin(u)*o+l,d=Math.cos(u)*o+a;return[p,d]},freq2angle=(l,a)=>.5-Math.log2(l/a)%1;function pitchwheel({haps:l,ctx:a,id:o,hapcircles:u=1,circle:p=0,edo:d=12,root:f=c$2,thickness:g=3,hapRadius:b=6,mode:O="flake",margin:S=10}={}){const M=O==="polygon",A=O==="flake",F=a.canvas.width,$=a.canvas.height;a.clearRect(0,0,F,$);const B=getTheme().foreground,U=Math.min(F,$)/2-g/2-b-S,te=F/2,de=$/2;o&&(l=l.filter(q=>q.hasTag(o))),a.strokeStyle=B,a.fillStyle=B,a.globalAlpha=1,a.lineWidth=g,p&&(a.beginPath(),a.arc(te,de,U,0,2*Math.PI),a.stroke()),d&&(Array.from({length:d},(q,le)=>{const fe=freq2angle(f*Math.pow(2,le/d),f),[_e,Pe]=circlePos(te,de,U,fe);a.beginPath(),a.arc(_e,Pe,b,0,2*Math.PI),a.fill()}),a.stroke());let se=[];a.lineWidth=b,l.forEach(q=>{let le;try{le=getFrequency(q)}catch{return}const fe=freq2angle(le,f),[_e,Pe]=circlePos(te,de,U,fe),Oe=q.value.color||B;a.strokeStyle=Oe,a.fillStyle=Oe;const{velocity:Fe=1,gain:we=1}=q.value||{},ke=Fe*we;a.globalAlpha=ke,se.push([_e,Pe,fe,Oe,ke]),a.beginPath(),u&&(a.moveTo(_e+b,Pe),a.arc(_e,Pe,b,0,2*Math.PI),a.fill()),A&&(a.moveTo(te,de),a.lineTo(_e,Pe)),a.stroke()}),a.strokeStyle=B,a.globalAlpha=1,M&&se.length&&(se=se.sort((q,le)=>q[2]-le[2]),a.beginPath(),a.moveTo(se[0][0],se[0][1]),se.forEach(([q,le,fe,_e,Pe])=>{a.strokeStyle=_e,a.globalAlpha=Pe,a.lineTo(q,le)}),a.lineTo(se[0][0],se[0][1]),a.stroke())}Pattern$1.prototype.pitchwheel=function(l={}){let{ctx:a=getDrawContext(),id:o=1}=l;return this.tag(o).onPaint((u,p,d)=>pitchwheel({...l,time:p,ctx:a,haps:d.filter(f=>f.isActive(p)),id:o}))};const index$b=Object.freeze(Object.defineProperty({__proto__:null,Drawer,Framer,__pianoroll,angle,cleanupDraw,colorMap,convertColorToNumber,convertHexToNumber,drawPianoroll,fill,getComputedPropertyValue,getDrawContext,getDrawOptions,getPunchcardPainter,getTheme,h:h$2,moveXY,pianoroll,pitchwheel,r,rescale,setTheme,smear,w,x:x$1,y,zoomIn},Symbol.toStringTag,{value:"Module"}));function peg$subclass(l,a){function o(){this.constructor=l}o.prototype=a.prototype,l.prototype=new o}function peg$SyntaxError(l,a,o,u){var p=Error.call(this,l);return Object.setPrototypeOf&&Object.setPrototypeOf(p,peg$SyntaxError.prototype),p.expected=a,p.found=o,p.location=u,p.name="SyntaxError",p}peg$subclass(peg$SyntaxError,Error);function peg$padEnd(l,a,o){return o=o||" ",l.length>a?l:(a-=l.length,o+=o.repeat(a),l+o.slice(0,a))}peg$SyntaxError.prototype.format=function(l){var a="Error: "+this.message;if(this.location){var o=null,u;for(u=0;u<l.length;u++)if(l[u].source===this.location.source){o=l[u].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(p):p,f=this.location.source+":"+d.line+":"+d.column;if(o){var g=this.location.end,b=peg$padEnd("",d.line.toString().length," "),O=o[p.line-1],S=p.line===g.line?g.column:O.length+1,M=S-p.column||1;a+=`
 --> `+f+`
`+b+` |
`+d.line+" | "+O+`
`+b+" | "+peg$padEnd("",p.column-1," ")+peg$padEnd("",M,"^")}else a+=`
 at `+f}return a},peg$SyntaxError.buildMessage=function(l,a){var o={literal:function(O){return'"'+p(O.text)+'"'},class:function(O){var S=O.parts.map(function(M){return Array.isArray(M)?d(M[0])+"-"+d(M[1]):d(M)});return"["+(O.inverted?"^":"")+S.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(O){return O.description}};function u(O){return O.charCodeAt(0).toString(16).toUpperCase()}function p(O){return O.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+u(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+u(S)})}function d(O){return O.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+u(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+u(S)})}function f(O){return o[O.type](O)}function g(O){var S=O.map(f),M,A;if(S.sort(),S.length>0){for(M=1,A=1;M<S.length;M++)S[M-1]!==S[M]&&(S[A]=S[M],A++);S.length=A}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function b(O){return O?'"'+p(O)+'"':"end of input"}return"Expected "+g(l)+" but "+b(a)+" found."};function peg$parse(l,a){a=a!==void 0?a:{};var o={},u=a.grammarSource,p={start:nr},d=nr,f=".",g="-",b="0",O=",",S="|",M="[",A="]",F="{",$="}",B="%",I="<",U=">",te="!",de="(",se=")",q="/",le="*",fe="?",_e=":",Pe="..",Oe="^",Fe="struct",we="target",ke="euclid",Ge="slow",Be="rotL",Ze="rotR",Ve="fast",Ee="scale",He="//",nt="cat",ht="$",Me="setcps",Xe="setbpm",kt="hush",je=/^[1-9]/,rt=/^[eE]/,ft=/^[+\-]/,pt=/^[0-9]/,Rt=/^[ \n\r\t\xA0]/,Bt=/^["']/,Wt=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Pt=/^[@_]/,hn=/^[^\n]/,Et=Ln("number"),Mt=it(".",!1),sn=un([["1","9"]],!1,!1),Lt=un(["e","E"],!1,!1),pn=un(["+","-"],!1,!1),dn=it("-",!1),fn=it("0",!1),Ut=un([["0","9"]],!1,!1),Nt=Ln("whitespace"),qt=un([" ",`
`,"\r","	"," "],!1,!1),yn=it(",",!1),at=it("|",!1),Dt=un(['"',"'"],!1,!1),Qe=Ln('a letter, a number, "-", "#", ".", "^", "_"'),Tt=un(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],["Ͷ","ͷ"],["ͺ","ͽ"],"Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԯ"],["Ա","Ֆ"],"ՙ",["ՠ","ֈ"],["א","ת"],["ׯ","ײ"],["ؠ","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۥ","ۦ"],["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ߴ","ߵ"],"ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๆ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏽ"],["ᏸ","ᏽ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛮ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᲀ","ᲈ"],["Ა","Ჺ"],["Ჽ","Ჿ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ",["Ⅰ","ↈ"],["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],["Ⳳ","ⳳ"],["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ",["々","〇"],["〡","〩"],["〱","〵"],["〸","〼"],["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],["Ꙁ","ꙮ"],["ꙿ","ꚝ"],["ꚠ","ꛯ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞹ"],["ꟷ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꧠ","ꧤ"],["ꧦ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꬰ","ꭚ"],["ꭜ","ꭥ"],["ꭰ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),st=it("[",!1),tn=it("]",!1),St=it("{",!1),Ht=it("}",!1),wn=it("%",!1),mn=it("<",!1),Ft=it(">",!1),vt=un(["@","_"],!1,!1),It=it("!",!1),Ke=it("(",!1),Ot=it(")",!1),Xt=it("/",!1),an=it("*",!1),$t=it("?",!1),On=it(":",!1),Cn=it("..",!1),N=it("^",!1),K=it("struct",!1),z=it("target",!1),ee=it("euclid",!1),pe=it("slow",!1),Ae=it("rotL",!1),De=it("rotR",!1),Re=it("fast",!1),Ne=it("scale",!1),ot=it("//",!1),mt=un([`
`],!0,!1),Yt=it("cat",!1),bt=it("$",!1),Zt=it("setcps",!1),nn=it("setbpm",!1),Ye=it("hush",!1),jt=function(){return parseFloat(Jt())},Vt=function(Z){const ue=Z.join("");return ue==="."||ue==="_"},Sn=function(Z){return new Kr(Z.join(""))},Pn=function(Z){return Z},dr=function(Z,ue){return Z.arguments_.stepsPerCycle=ue,Z},Zn=function(Z){return Z},fr=function(Z){return Z.arguments_.alignment="polymeter_slowcat",Z},Vn=function(Z){return ue=>ue.options_.weight=(ue.options_.weight??1)+(Z??2)-1},$n=function(Z){return ue=>{const ge=(ue.options_.reps??1)+(Z??2)-1;ue.options_.reps=ge,ue.options_.ops=ue.options_.ops.filter(Te=>Te.type_!=="replicate"),ue.options_.ops.push({type_:"replicate",arguments_:{amount:ge}}),ue.options_.weight=ge}},mr=function(Z,ue,ge){return Te=>Te.options_.ops.push({type_:"bjorklund",arguments_:{pulse:Z,step:ue,rotation:ge}})},bn=function(Z){return ue=>ue.options_.ops.push({type_:"stretch",arguments_:{amount:Z,type:"slow"}})},gr=function(Z){return ue=>ue.options_.ops.push({type_:"stretch",arguments_:{amount:Z,type:"fast"}})},Qn=function(Z){return ue=>ue.options_.ops.push({type_:"degradeBy",arguments_:{amount:Z,seed:Rr++}})},Xn=function(Z){return ue=>ue.options_.ops.push({type_:"tail",arguments_:{element:Z}})},yr=function(Z){return ue=>ue.options_.ops.push({type_:"range",arguments_:{element:Z}})},jn=function(Z,ue){const ge=new ei(Z,{ops:[],weight:1,reps:1});for(const Te of ue)Te(ge);return ge},br=function(Z,ue){return new hr(ue,"fastcat",void 0,!!Z)},_r=function(Z){return{alignment:"stack",list:Z}},ln=function(Z){return{alignment:"rand",list:Z,seed:Rr++}},vr=function(Z){return{alignment:"feet",list:Z,seed:Rr++}},Or=function(Z,ue){return ue&&ue.list.length>0?new hr([Z,...ue.list],ue.alignment,ue.seed):Z},Wn=function(Z,ue){return new hr(ue?[Z,...ue.list]:[Z],"polymeter")},Un=function(Z){return Z},xr=function(Z){return{name:"struct",args:{mini:Z}}},zn=function(Z){return{name:"target",args:{name:Z}}},wr=function(Z,ue,ge){return{name:"bjorklund",args:{pulse:Z,step:parseInt(ue)}}},qn=function(Z){return{name:"stretch",args:{amount:Z}}},Cr=function(Z){return{name:"shift",args:{amount:"-"+Z}}},Hn=function(Z){return{name:"shift",args:{amount:Z}}},cn=function(Z){return{name:"stretch",args:{amount:"1/"+Z}}},_t=function(Z){return{name:"scale",args:{scale:Z.join("")}}},Yn=function(Z,ue){return ue},Fn=function(Z,ue){return ue.unshift(Z),new hr(ue,"slowcat")},Sr=function(Z){return Z},Mn=function(Z,ue){return new Jr(Z.name,Z.args,ue)},kr=function(Z){return Z},An=function(Z){return Z},Gn=function(Z){return new Tr("setcps",{value:Z})},Kn=function(Z){return new Tr("setcps",{value:Z/120/2})},Pr=function(){return new Tr("hush")},me=a.peg$currPos|0,tt=me,vn=[{line:1,column:1}],Kt=me,En=a.peg$maxFailExpected||[],We=a.peg$silentFails|0,kn;if(a.startRule){if(!(a.startRule in p))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');d=p[a.startRule]}function Jt(){return l.substring(tt,me)}function Jn(){return Bn(tt,me)}function it(Z,ue){return{type:"literal",text:Z,ignoreCase:ue}}function un(Z,ue,ge){return{type:"class",parts:Z,inverted:ue,ignoreCase:ge}}function Mr(){return{type:"end"}}function Ln(Z){return{type:"other",description:Z}}function er(Z){var ue=vn[Z],ge;if(ue)return ue;if(Z>=vn.length)ge=vn.length-1;else for(ge=Z;!vn[--ge];);for(ue=vn[ge],ue={line:ue.line,column:ue.column};ge<Z;)l.charCodeAt(ge)===10?(ue.line++,ue.column=1):ue.column++,ge++;return vn[Z]=ue,ue}function Bn(Z,ue,ge){var Te=er(Z),ze=er(ue),Gt={source:u,start:{offset:Z,line:Te.line,column:Te.column},end:{offset:ue,line:ze.line,column:ze.column}};return Gt}function qe(Z){me<Kt||(me>Kt&&(Kt=me,En=[]),En.push(Z))}function Ar(Z,ue,ge){return new peg$SyntaxError(peg$SyntaxError.buildMessage(Z,ue),Z,ue,ge)}function nr(){var Z;return Z=Yr(),Z}function gn(){var Z,ue;return We++,Z=me,Nn(),ue=Dn(),ue!==o?(ur(),cr(),tt=Z,Z=jt()):(me=Z,Z=o),We--,Z===o&&We===0&&qe(Et),Z}function rr(){var Z;return l.charCodeAt(me)===46?(Z=f,me++):(Z=o,We===0&&qe(Mt)),Z}function sr(){var Z;return Z=l.charAt(me),je.test(Z)?me++:(Z=o,We===0&&qe(sn)),Z}function lr(){var Z;return Z=l.charAt(me),rt.test(Z)?me++:(Z=o,We===0&&qe(Lt)),Z}function cr(){var Z,ue,ge,Te,ze;if(Z=me,ue=lr(),ue!==o){if(ge=l.charAt(me),ft.test(ge)?me++:(ge=o,We===0&&qe(pn)),ge===o&&(ge=null),Te=[],ze=k(),ze!==o)for(;ze!==o;)Te.push(ze),ze=k();else Te=o;Te!==o?(ue=[ue,ge,Te],Z=ue):(me=Z,Z=o)}else me=Z,Z=o;return Z}function ur(){var Z,ue,ge,Te;if(Z=me,ue=rr(),ue!==o){if(ge=[],Te=k(),Te!==o)for(;Te!==o;)ge.push(Te),Te=k();else ge=o;ge!==o?(ue=[ue,ge],Z=ue):(me=Z,Z=o)}else me=Z,Z=o;return Z}function Dn(){var Z,ue,ge,Te;if(Z=Er(),Z===o)if(Z=me,ue=sr(),ue!==o){for(ge=[],Te=k();Te!==o;)ge.push(Te),Te=k();ue=[ue,ge],Z=ue}else me=Z,Z=o;return Z}function Nn(){var Z;return l.charCodeAt(me)===45?(Z=g,me++):(Z=o,We===0&&qe(dn)),Z}function Er(){var Z;return l.charCodeAt(me)===48?(Z=b,me++):(Z=o,We===0&&qe(fn)),Z}function k(){var Z;return Z=l.charAt(me),pt.test(Z)?me++:(Z=o,We===0&&qe(Ut)),Z}function E(){var Z,ue;for(We++,Z=[],ue=l.charAt(me),Rt.test(ue)?me++:(ue=o,We===0&&qe(qt));ue!==o;)Z.push(ue),ue=l.charAt(me),Rt.test(ue)?me++:(ue=o,We===0&&qe(qt));return We--,ue=o,We===0&&qe(Nt),Z}function R(){var Z,ue,ge,Te;return Z=me,ue=E(),l.charCodeAt(me)===44?(ge=O,me++):(ge=o,We===0&&qe(yn)),ge!==o?(Te=E(),ue=[ue,ge,Te],Z=ue):(me=Z,Z=o),Z}function L(){var Z,ue,ge,Te;return Z=me,ue=E(),l.charCodeAt(me)===124?(ge=S,me++):(ge=o,We===0&&qe(at)),ge!==o?(Te=E(),ue=[ue,ge,Te],Z=ue):(me=Z,Z=o),Z}function V(){var Z,ue,ge,Te;return Z=me,ue=E(),l.charCodeAt(me)===46?(ge=f,me++):(ge=o,We===0&&qe(Mt)),ge!==o?(Te=E(),ue=[ue,ge,Te],Z=ue):(me=Z,Z=o),Z}function j(){var Z;return Z=l.charAt(me),Bt.test(Z)?me++:(Z=o,We===0&&qe(Dt)),Z}function re(){var Z;return We++,Z=l.charAt(me),Wt.test(Z)?me++:(Z=o,We===0&&qe(Tt)),We--,Z===o&&We===0&&qe(Qe),Z}function oe(){var Z,ue,ge,Te;if(Z=me,E(),ue=[],ge=re(),ge!==o)for(;ge!==o;)ue.push(ge),ge=re();else ue=o;return ue!==o?(ge=E(),tt=me,Te=Vt(ue),Te?Te=o:Te=void 0,Te!==o?(tt=Z,Z=Sn(ue)):(me=Z,Z=o)):(me=Z,Z=o),Z}function he(){var Z,ue,ge,Te;return Z=me,E(),l.charCodeAt(me)===91?(ue=M,me++):(ue=o,We===0&&qe(st)),ue!==o?(E(),ge=en(),ge!==o?(E(),l.charCodeAt(me)===93?(Te=A,me++):(Te=o,We===0&&qe(tn)),Te!==o?(E(),tt=Z,Z=Pn(ge)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o),Z}function be(){var Z,ue,ge,Te,ze;return Z=me,E(),l.charCodeAt(me)===123?(ue=F,me++):(ue=o,We===0&&qe(St)),ue!==o?(E(),ge=Qt(),ge!==o?(E(),l.charCodeAt(me)===125?(Te=$,me++):(Te=o,We===0&&qe(Ht)),Te!==o?(ze=ye(),ze===o&&(ze=null),E(),tt=Z,Z=dr(ge,ze)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o),Z}function ye(){var Z,ue,ge;return Z=me,l.charCodeAt(me)===37?(ue=B,me++):(ue=o,We===0&&qe(wn)),ue!==o?(ge=xe(),ge!==o?(tt=Z,Z=Zn(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Ce(){var Z,ue,ge,Te;return Z=me,E(),l.charCodeAt(me)===60?(ue=I,me++):(ue=o,We===0&&qe(mn)),ue!==o?(E(),ge=Qt(),ge!==o?(E(),l.charCodeAt(me)===62?(Te=U,me++):(Te=o,We===0&&qe(Ft)),Te!==o?(E(),tt=Z,Z=fr(ge)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o),Z}function xe(){var Z;return Z=oe(),Z===o&&(Z=he(),Z===o&&(Z=be(),Z===o&&(Z=Ce()))),Z}function Se(){var Z;return Z=ve(),Z===o&&(Z=Le(),Z===o&&(Z=Ue(),Z===o&&(Z=Ie(),Z===o&&(Z=$e(),Z===o&&(Z=et(),Z===o&&(Z=ut(),Z===o&&(Z=ct()))))))),Z}function ve(){var Z,ue,ge;return Z=me,E(),ue=l.charAt(me),Pt.test(ue)?me++:(ue=o,We===0&&qe(vt)),ue!==o?(ge=gn(),ge===o&&(ge=null),tt=Z,Z=Vn(ge)):(me=Z,Z=o),Z}function $e(){var Z,ue,ge;return Z=me,E(),l.charCodeAt(me)===33?(ue=te,me++):(ue=o,We===0&&qe(It)),ue!==o?(ge=gn(),ge===o&&(ge=null),tt=Z,Z=$n(ge)):(me=Z,Z=o),Z}function Le(){var Z,ue,ge,Te,ze,Gt,_n;return Z=me,l.charCodeAt(me)===40?(ue=de,me++):(ue=o,We===0&&qe(Ke)),ue!==o?(E(),ge=Ct(),ge!==o?(E(),Te=R(),Te!==o?(E(),ze=Ct(),ze!==o?(E(),R(),E(),Gt=Ct(),Gt===o&&(Gt=null),E(),l.charCodeAt(me)===41?(_n=se,me++):(_n=o,We===0&&qe(Ot)),_n!==o?(tt=Z,Z=mr(ge,ze,Gt)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Ue(){var Z,ue,ge;return Z=me,l.charCodeAt(me)===47?(ue=q,me++):(ue=o,We===0&&qe(Xt)),ue!==o?(ge=xe(),ge!==o?(tt=Z,Z=bn(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Ie(){var Z,ue,ge;return Z=me,l.charCodeAt(me)===42?(ue=le,me++):(ue=o,We===0&&qe(an)),ue!==o?(ge=xe(),ge!==o?(tt=Z,Z=gr(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function et(){var Z,ue,ge;return Z=me,l.charCodeAt(me)===63?(ue=fe,me++):(ue=o,We===0&&qe($t)),ue!==o?(ge=gn(),ge===o&&(ge=null),tt=Z,Z=Qn(ge)):(me=Z,Z=o),Z}function ut(){var Z,ue,ge;return Z=me,l.charCodeAt(me)===58?(ue=_e,me++):(ue=o,We===0&&qe(On)),ue!==o?(ge=xe(),ge!==o?(tt=Z,Z=Xn(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function ct(){var Z,ue,ge;return Z=me,l.substr(me,2)===Pe?(ue=Pe,me+=2):(ue=o,We===0&&qe(Cn)),ue!==o?(ge=xe(),ge!==o?(tt=Z,Z=yr(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Ct(){var Z,ue,ge,Te;if(Z=me,ue=xe(),ue!==o){for(ge=[],Te=Se();Te!==o;)ge.push(Te),Te=Se();tt=Z,Z=jn(ue,ge)}else me=Z,Z=o;return Z}function xt(){var Z,ue,ge,Te;if(Z=me,l.charCodeAt(me)===94?(ue=Oe,me++):(ue=o,We===0&&qe(N)),ue===o&&(ue=null),ge=[],Te=Ct(),Te!==o)for(;Te!==o;)ge.push(Te),Te=Ct();else ge=o;return ge!==o?(tt=Z,Z=br(ue,ge)):(me=Z,Z=o),Z}function yt(){var Z,ue,ge,Te,ze;if(Z=me,ue=[],ge=me,Te=R(),Te!==o?(ze=xt(),ze!==o?ge=ze:(me=ge,ge=o)):(me=ge,ge=o),ge!==o)for(;ge!==o;)ue.push(ge),ge=me,Te=R(),Te!==o?(ze=xt(),ze!==o?ge=ze:(me=ge,ge=o)):(me=ge,ge=o);else ue=o;return ue!==o&&(tt=Z,ue=_r(ue)),Z=ue,Z}function Je(){var Z,ue,ge,Te,ze;if(Z=me,ue=[],ge=me,Te=L(),Te!==o?(ze=xt(),ze!==o?ge=ze:(me=ge,ge=o)):(me=ge,ge=o),ge!==o)for(;ge!==o;)ue.push(ge),ge=me,Te=L(),Te!==o?(ze=xt(),ze!==o?ge=ze:(me=ge,ge=o)):(me=ge,ge=o);else ue=o;return ue!==o&&(tt=Z,ue=ln(ue)),Z=ue,Z}function At(){var Z,ue,ge,Te,ze;if(Z=me,ue=[],ge=me,Te=V(),Te!==o?(ze=xt(),ze!==o?ge=ze:(me=ge,ge=o)):(me=ge,ge=o),ge!==o)for(;ge!==o;)ue.push(ge),ge=me,Te=V(),Te!==o?(ze=xt(),ze!==o?ge=ze:(me=ge,ge=o)):(me=ge,ge=o);else ue=o;return ue!==o&&(tt=Z,ue=vr(ue)),Z=ue,Z}function en(){var Z,ue,ge;return Z=me,ue=xt(),ue!==o?(ge=yt(),ge===o&&(ge=Je(),ge===o&&(ge=At())),ge===o&&(ge=null),tt=Z,Z=Or(ue,ge)):(me=Z,Z=o),Z}function Qt(){var Z,ue,ge;return Z=me,ue=xt(),ue!==o?(ge=yt(),ge===o&&(ge=null),tt=Z,Z=Wn(ue,ge)):(me=Z,Z=o),Z}function rn(){var Z,ue,ge,Te;return Z=me,E(),ue=j(),ue!==o?(E(),ge=en(),ge!==o?(E(),Te=j(),Te!==o?(tt=Z,Z=Un(ge)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o),Z}function xn(){var Z;return Z=Vr(),Z===o&&(Z=Br(),Z===o&&(Z=Zr(),Z===o&&(Z=In(),Z===o&&(Z=Lr(),Z===o&&(Z=Dr(),Z===o&&(Z=Ir(),Z===o&&(Z=Nr()))))))),Z}function Dr(){var Z,ue,ge;return Z=me,l.substr(me,6)===Fe?(ue=Fe,me+=6):(ue=o,We===0&&qe(K)),ue!==o?(E(),ge=Tn(),ge!==o?(tt=Z,Z=xr(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function In(){var Z,ue,ge,Te,ze;return Z=me,l.substr(me,6)===we?(ue=we,me+=6):(ue=o,We===0&&qe(z)),ue!==o?(E(),ge=j(),ge!==o?(Te=oe(),Te!==o?(ze=j(),ze!==o?(tt=Z,Z=zn(Te)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Lr(){var Z,ue,ge,Te;return Z=me,l.substr(me,6)===ke?(ue=ke,me+=6):(ue=o,We===0&&qe(ee)),ue!==o?(E(),ge=Dn(),ge!==o?(E(),Te=Dn(),Te!==o?(E(),Dn(),tt=Z,Z=wr(ge,Te)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Br(){var Z,ue,ge;return Z=me,l.substr(me,4)===Ge?(ue=Ge,me+=4):(ue=o,We===0&&qe(pe)),ue!==o?(E(),ge=gn(),ge!==o?(tt=Z,Z=qn(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Nr(){var Z,ue,ge;return Z=me,l.substr(me,4)===Be?(ue=Be,me+=4):(ue=o,We===0&&qe(Ae)),ue!==o?(E(),ge=gn(),ge!==o?(tt=Z,Z=Cr(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Ir(){var Z,ue,ge;return Z=me,l.substr(me,4)===Ze?(ue=Ze,me+=4):(ue=o,We===0&&qe(De)),ue!==o?(E(),ge=gn(),ge!==o?(tt=Z,Z=Hn(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Zr(){var Z,ue,ge;return Z=me,l.substr(me,4)===Ve?(ue=Ve,me+=4):(ue=o,We===0&&qe(Re)),ue!==o?(E(),ge=gn(),ge!==o?(tt=Z,Z=cn(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Vr(){var Z,ue,ge,Te,ze;if(Z=me,l.substr(me,5)===Ee?(ue=Ee,me+=5):(ue=o,We===0&&qe(Ne)),ue!==o)if(E(),ge=j(),ge!==o){if(Te=[],ze=re(),ze!==o)for(;ze!==o;)Te.push(ze),ze=re();else Te=o;Te!==o?(ze=j(),ze!==o?(tt=Z,Z=_t(Te)):(me=Z,Z=o)):(me=Z,Z=o)}else me=Z,Z=o;else me=Z,Z=o;return Z}function Fr(){var Z,ue,ge,Te;if(Z=me,l.substr(me,2)===He?(ue=He,me+=2):(ue=o,We===0&&qe(ot)),ue!==o){for(ge=[],Te=l.charAt(me),hn.test(Te)?me++:(Te=o,We===0&&qe(mt));Te!==o;)ge.push(Te),Te=l.charAt(me),hn.test(Te)?me++:(Te=o,We===0&&qe(mt));ue=[ue,ge],Z=ue}else me=Z,Z=o;return Z}function Qr(){var Z,ue,ge,Te,ze,Gt,_n,Rn;if(Z=me,l.substr(me,3)===nt?(ue=nt,me+=3):(ue=o,We===0&&qe(Yt)),ue!==o)if(E(),l.charCodeAt(me)===91?(ge=M,me++):(ge=o,We===0&&qe(st)),ge!==o)if(E(),Te=Tn(),Te!==o){for(ze=[],Gt=me,_n=R(),_n!==o?(Rn=Tn(),Rn!==o?(tt=Gt,Gt=Yn(Te,Rn)):(me=Gt,Gt=o)):(me=Gt,Gt=o);Gt!==o;)ze.push(Gt),Gt=me,_n=R(),_n!==o?(Rn=Tn(),Rn!==o?(tt=Gt,Gt=Yn(Te,Rn)):(me=Gt,Gt=o)):(me=Gt,Gt=o);Gt=E(),l.charCodeAt(me)===93?(_n=A,me++):(_n=o,We===0&&qe(tn)),_n!==o?(tt=Z,Z=Fn(Te,ze)):(me=Z,Z=o)}else me=Z,Z=o;else me=Z,Z=o;else me=Z,Z=o;return Z}function Xr(){var Z;return Z=Qr(),Z===o&&(Z=rn()),Z}function Tn(){var Z,ue,ge,Te,ze;if(Z=me,ue=Xr(),ue!==o){for(E(),ge=[],Te=Fr();Te!==o;)ge.push(Te),Te=Fr();tt=Z,Z=Sr(ue)}else me=Z,Z=o;return Z===o&&(Z=me,ue=xn(),ue!==o?(E(),l.charCodeAt(me)===36?(ge=ht,me++):(ge=o,We===0&&qe(bt)),ge!==o?(Te=E(),ze=Tn(),ze!==o?(tt=Z,Z=Mn(ue,ze)):(me=Z,Z=o)):(me=Z,Z=o)):(me=Z,Z=o)),Z}function jr(){var Z,ue;return Z=me,ue=Tn(),ue!==o&&(tt=Z,ue=kr(ue)),Z=ue,Z===o&&(Z=Fr()),Z}function Wr(){var Z;return Z=jr(),Z}function Ur(){var Z,ue;return Z=me,E(),ue=zr(),ue===o&&(ue=qr(),ue===o&&(ue=Hr())),ue!==o?(E(),tt=Z,Z=An(ue)):(me=Z,Z=o),Z}function zr(){var Z,ue,ge;return Z=me,l.substr(me,6)===Me?(ue=Me,me+=6):(ue=o,We===0&&qe(Zt)),ue!==o?(E(),ge=gn(),ge!==o?(tt=Z,Z=Gn(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function qr(){var Z,ue,ge;return Z=me,l.substr(me,6)===Xe?(ue=Xe,me+=6):(ue=o,We===0&&qe(nn)),ue!==o?(E(),ge=gn(),ge!==o?(tt=Z,Z=Kn(ge)):(me=Z,Z=o)):(me=Z,Z=o),Z}function Hr(){var Z,ue;return Z=me,l.substr(me,4)===kt?(ue=kt,me+=4):(ue=o,We===0&&qe(Ye)),ue!==o&&(tt=Z,ue=Pr()),Z=ue,Z}function Yr(){var Z;return Z=Wr(),Z===o&&(Z=Ur()),Z}var Kr=function(Z){this.type_="atom",this.source_=Z,this.location_=Jn()},hr=function(Z,ue,ge,Te){this.type_="pattern",this.arguments_={alignment:ue,_steps:Te},ge!==void 0&&(this.arguments_.seed=ge),this.source_=Z},Jr=function(Z,ue,ge){this.type_=Z,this.arguments_=ue,this.source_=ge},ei=function(Z,ue){this.type_="element",this.source_=Z,this.options_=ue,this.location_=Jn()},Tr=function(Z,ue){this.type_="command",this.name_=Z,this.options_=ue},Rr=0;if(kn=d(),a.peg$library)return{peg$result:kn,peg$currPos:me,peg$FAILED:o,peg$maxFailExpected:En,peg$maxFailPos:Kt};if(kn!==o&&me===l.length)return kn;throw kn!==o&&me<l.length&&qe(Mr()),Ar(En,Kt<l.length?l.charAt(Kt):null,Kt<l.length?Bn(Kt,Kt+1):Bn(Kt,Kt))}const peg$allowedStartRules=["start"],randOffset=3e-4,applyOptions=(l,a)=>(o,u)=>{const f=l.source_[u].options_?.ops,g=o.__steps_source;if(f)for(const b of f)switch(b.type_){case"stretch":{const O=["fast","slow"],{type:S,amount:M}=b.arguments_;if(!O.includes(S))throw new Error(`mini: stretch: type must be one of ${O.join("|")} but got ${S}`);o=reify(o)[S](a(M));break}case"replicate":{const{amount:O}=b.arguments_;o=reify(o),o=o._repeatCycles(O)._fast(O);break}case"bjorklund":{b.arguments_.rotation?o=o.euclidRot(a(b.arguments_.pulse),a(b.arguments_.step),a(b.arguments_.rotation)):o=o.euclid(a(b.arguments_.pulse),a(b.arguments_.step));break}case"degradeBy":{o=reify(o)._degradeByWith(rand.early(randOffset*b.arguments_.seed),b.arguments_.amount??.5);break}case"tail":{const O=a(b.arguments_.element);o=o.fmap(S=>M=>Array.isArray(S)?[...S,M]:[S,M]).appLeft(O);break}case"range":{const O=a(b.arguments_.element);o=reify(o);const S=(A,F,$=1)=>Array.from({length:Math.abs(F-A)/$+1},(B,I)=>A<F?A+I*$:A-I*$);o=((A,F)=>A.squeezeBind($=>F.bind(B=>fastcat(...S($,B)))))(o,O);break}default:console.warn(`operator "${b.type_}" not implemented`)}return o.__steps_source=o.__steps_source||g,o};function patternifyAST(l,a,o,u=0){o?.(l);const p=d=>patternifyAST(d,a,o,u);switch(l.type_){case"pattern":{const d=l.source_.map(O=>p(O)).map(applyOptions(l,p)),f=l.arguments_.alignment,g=d.filter(O=>O.__steps_source);let b;switch(f){case"stack":{b=stack(...d),g.length&&(b._steps=lcm(...g.map(O=>fraction$1(O._steps))));break}case"polymeter_slowcat":{b=stack(...d.map(O=>O._slow(O.__weight))),g.length&&(b._steps=lcm(...g.map(O=>fraction$1(O._steps))));break}case"polymeter":{const O=l.arguments_.stepsPerCycle?p(l.arguments_.stepsPerCycle).fmap(M=>fraction$1(M)):pure(fraction$1(d.length>0?d[0].__weight:1)),S=d.map(M=>M.fast(O.fmap(A=>A.div(M.__weight))));b=stack(...S);break}case"rand":{b=chooseInWith(rand.early(randOffset*l.arguments_.seed).segment(1),d),g.length&&(b._steps=lcm(...g.map(O=>fraction$1(O._steps))));break}case"feet":{b=fastcat(...d);break}default:{if(l.source_.some(S=>!!S.options_?.weight)){const S=l.source_.reduce((M,A)=>M.add(A.options_?.weight||fraction$1(1)),fraction$1(0));b=timeCat(...l.source_.map((M,A)=>[M.options_?.weight||fraction$1(1),d[A]])),b.__weight=S,b._steps=S,g.length&&(b._steps=b._steps.mul(lcm(...g.map(M=>fraction$1(M._steps)))))}else b=sequence(...d),b._steps=d.length;l.arguments_._steps&&(b.__steps_source=!0)}}return g.length&&(b.__steps_source=!0),b}case"element":return p(l.source_);case"atom":{if(l.source_==="~"||l.source_==="-")return silence;if(!l.location_)return console.warn("no location for",l),l.source_;const d=isNaN(Number(l.source_))?l.source_:Number(l.source_);if(u===-1)return pure(d);const[f,g]=getLeafLocation(a,l,u);return pure(d).withLoc(f,g)}case"stretch":return p(l.source_).slow(p(l.arguments_.amount));default:return console.warn(`node type "${l.type_}" not implemented -> returning silence`),silence}}const getLeafLocation=(l,a,o=0)=>{const{start:u,end:p}=a.location_,d=l?.split("").slice(u.offset,p.offset).join(""),[f=0,g=0]=d?d.split(a.source_).map(b=>b.split("").filter(O=>O===" ").length):[];return[u.offset+f+o,p.offset-g+o]},mini2ast=(l,a=0,o=l)=>{try{return peg$parse(l)}catch(u){const p=[u.location.start.offset+a,u.location.end.offset+a],d=o.slice(0,p[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${d}: ${u.message}`)}},getLeaves=(l,a,o)=>{const u=mini2ast(l,a,o);let p=[];return patternifyAST(u,l,d=>{d.type_==="atom"&&p.push(d)},-1),p},getLeafLocations=(l,a=0,o)=>getLeaves(l,a,o).map(u=>getLeafLocation(l,u,a)),mini$1=(...l)=>{const a=l.map(o=>{const u=`"${o}"`,p=mini2ast(u);return patternifyAST(p,u)});return sequence(...a)},m$1=(l,a)=>{const o=`"${l}"`,u=mini2ast(o);return patternifyAST(u,o,null,a)},h$1=l=>{const a=mini2ast(l);return patternifyAST(a,l)};function minify(l){return typeof l=="string"?mini$1(l):reify(l)}function miniAllStrings(){setStringParser(mini$1)}const index$a=Object.freeze(Object.defineProperty({__proto__:null,StartRules:peg$allowedStartRules,SyntaxError:peg$SyntaxError,getLeafLocation,getLeafLocations,getLeaves,h:h$1,m:m$1,mini:mini$1,mini2ast,miniAllStrings,minify,parse:peg$parse,patternifyAST},Symbol.toStringTag,{value:"Module"}));var astralIdentifierCodes=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],astralIdentifierStartCodes=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],nonASCIIidentifierChars="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",nonASCIIidentifierStartChars="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},ecma5AndLessKeywords="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",keywords$1={5:ecma5AndLessKeywords,"5module":ecma5AndLessKeywords+" export import",6:ecma5AndLessKeywords+" const class extends export import super"},keywordRelationalOperator=/^in(stanceof)?$/,nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");function isInAstralSet(l,a){for(var o=65536,u=0;u<a.length;u+=2){if(o+=a[u],o>l)return!1;if(o+=a[u+1],o>=l)return!0}return!1}function isIdentifierStart(l,a){return l<65?l===36:l<91?!0:l<97?l===95:l<123?!0:l<=65535?l>=170&&nonASCIIidentifierStart.test(String.fromCharCode(l)):a===!1?!1:isInAstralSet(l,astralIdentifierStartCodes)}function isIdentifierChar(l,a){return l<48?l===36:l<58?!0:l<65?!1:l<91?!0:l<97?l===95:l<123?!0:l<=65535?l>=170&&nonASCIIidentifier.test(String.fromCharCode(l)):a===!1?!1:isInAstralSet(l,astralIdentifierStartCodes)||isInAstralSet(l,astralIdentifierCodes)}var TokenType=function(a,o){o===void 0&&(o={}),this.label=a,this.keyword=o.keyword,this.beforeExpr=!!o.beforeExpr,this.startsExpr=!!o.startsExpr,this.isLoop=!!o.isLoop,this.isAssign=!!o.isAssign,this.prefix=!!o.prefix,this.postfix=!!o.postfix,this.binop=o.binop||null,this.updateContext=null};function binop(l,a){return new TokenType(l,{beforeExpr:!0,binop:a})}var beforeExpr={beforeExpr:!0},startsExpr={startsExpr:!0},keywords$2={};function kw(l,a){return a===void 0&&(a={}),a.keyword=l,keywords$2[l]=new TokenType(l,a)}var types$1={num:new TokenType("num",startsExpr),regexp:new TokenType("regexp",startsExpr),string:new TokenType("string",startsExpr),name:new TokenType("name",startsExpr),privateId:new TokenType("privateId",startsExpr),eof:new TokenType("eof"),bracketL:new TokenType("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new TokenType("]"),braceL:new TokenType("{",{beforeExpr:!0,startsExpr:!0}),braceR:new TokenType("}"),parenL:new TokenType("(",{beforeExpr:!0,startsExpr:!0}),parenR:new TokenType(")"),comma:new TokenType(",",beforeExpr),semi:new TokenType(";",beforeExpr),colon:new TokenType(":",beforeExpr),dot:new TokenType("."),question:new TokenType("?",beforeExpr),questionDot:new TokenType("?."),arrow:new TokenType("=>",beforeExpr),template:new TokenType("template"),invalidTemplate:new TokenType("invalidTemplate"),ellipsis:new TokenType("...",beforeExpr),backQuote:new TokenType("`",startsExpr),dollarBraceL:new TokenType("${",{beforeExpr:!0,startsExpr:!0}),eq:new TokenType("=",{beforeExpr:!0,isAssign:!0}),assign:new TokenType("_=",{beforeExpr:!0,isAssign:!0}),incDec:new TokenType("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new TokenType("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop("||",1),logicalAND:binop("&&",2),bitwiseOR:binop("|",3),bitwiseXOR:binop("^",4),bitwiseAND:binop("&",5),equality:binop("==/!=/===/!==",6),relational:binop("</>/<=/>=",7),bitShift:binop("<</>>/>>>",8),plusMin:new TokenType("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop("%",10),star:binop("*",10),slash:binop("/",10),starstar:new TokenType("**",{beforeExpr:!0}),coalesce:binop("??",1),_break:kw("break"),_case:kw("case",beforeExpr),_catch:kw("catch"),_continue:kw("continue"),_debugger:kw("debugger"),_default:kw("default",beforeExpr),_do:kw("do",{isLoop:!0,beforeExpr:!0}),_else:kw("else",beforeExpr),_finally:kw("finally"),_for:kw("for",{isLoop:!0}),_function:kw("function",startsExpr),_if:kw("if"),_return:kw("return",beforeExpr),_switch:kw("switch"),_throw:kw("throw",beforeExpr),_try:kw("try"),_var:kw("var"),_const:kw("const"),_while:kw("while",{isLoop:!0}),_with:kw("with"),_new:kw("new",{beforeExpr:!0,startsExpr:!0}),_this:kw("this",startsExpr),_super:kw("super",startsExpr),_class:kw("class",startsExpr),_extends:kw("extends",beforeExpr),_export:kw("export"),_import:kw("import",startsExpr),_null:kw("null",startsExpr),_true:kw("true",startsExpr),_false:kw("false",startsExpr),_in:kw("in",{beforeExpr:!0,binop:7}),_instanceof:kw("instanceof",{beforeExpr:!0,binop:7}),_typeof:kw("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},lineBreak=/\r\n?|\n|\u2028|\u2029/,lineBreakG=new RegExp(lineBreak.source,"g");function isNewLine(l){return l===10||l===13||l===8232||l===8233}function nextLineBreak(l,a,o){o===void 0&&(o=l.length);for(var u=a;u<o;u++){var p=l.charCodeAt(u);if(isNewLine(p))return u<o-1&&p===13&&l.charCodeAt(u+1)===10?u+2:u+1}return-1}var nonASCIIwhitespace=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ref=Object.prototype,hasOwnProperty=ref.hasOwnProperty,toString=ref.toString,hasOwn=Object.hasOwn||function(l,a){return hasOwnProperty.call(l,a)},isArray=Array.isArray||function(l){return toString.call(l)==="[object Array]"},regexpCache=Object.create(null);function wordsRegexp(l){return regexpCache[l]||(regexpCache[l]=new RegExp("^(?:"+l.replace(/ /g,"|")+")$"))}function codePointToString(l){return l<=65535?String.fromCharCode(l):(l-=65536,String.fromCharCode((l>>10)+55296,(l&1023)+56320))}var loneSurrogate=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Position=function(a,o){this.line=a,this.column=o};Position.prototype.offset=function(a){return new Position(this.line,this.column+a)};var SourceLocation=function(a,o,u){this.start=o,this.end=u,a.sourceFile!==null&&(this.source=a.sourceFile)};function getLineInfo(l,a){for(var o=1,u=0;;){var p=nextLineBreak(l,u,a);if(p<0)return new Position(o,a-u);++o,u=p}}var defaultOptions={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},warnedAboutEcmaVersion=!1;function getOptions(l){var a={};for(var o in defaultOptions)a[o]=l&&hasOwn(l,o)?l[o]:defaultOptions[o];if(a.ecmaVersion==="latest"?a.ecmaVersion=1e8:a.ecmaVersion==null?(!warnedAboutEcmaVersion&&typeof console=="object"&&console.warn&&(warnedAboutEcmaVersion=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),a.ecmaVersion=11):a.ecmaVersion>=2015&&(a.ecmaVersion-=2009),a.allowReserved==null&&(a.allowReserved=a.ecmaVersion<5),(!l||l.allowHashBang==null)&&(a.allowHashBang=a.ecmaVersion>=14),isArray(a.onToken)){var u=a.onToken;a.onToken=function(p){return u.push(p)}}return isArray(a.onComment)&&(a.onComment=pushComment(a,a.onComment)),a}function pushComment(l,a){return function(o,u,p,d,f,g){var b={type:o?"Block":"Line",value:u,start:p,end:d};l.locations&&(b.loc=new SourceLocation(this,f,g)),l.ranges&&(b.range=[p,d]),a.push(b)}}var SCOPE_TOP=1,SCOPE_FUNCTION=2,SCOPE_ASYNC=4,SCOPE_GENERATOR=8,SCOPE_ARROW=16,SCOPE_SIMPLE_CATCH=32,SCOPE_SUPER=64,SCOPE_DIRECT_SUPER=128,SCOPE_CLASS_STATIC_BLOCK=256,SCOPE_VAR=SCOPE_TOP|SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK;function functionFlags(l,a){return SCOPE_FUNCTION|(l?SCOPE_ASYNC:0)|(a?SCOPE_GENERATOR:0)}var BIND_NONE=0,BIND_VAR=1,BIND_LEXICAL=2,BIND_FUNCTION=3,BIND_SIMPLE_CATCH=4,BIND_OUTSIDE=5,Parser$1=function(a,o,u){this.options=a=getOptions(a),this.sourceFile=a.sourceFile,this.keywords=wordsRegexp(keywords$1[a.ecmaVersion>=6?6:a.sourceType==="module"?"5module":5]);var p="";a.allowReserved!==!0&&(p=reservedWords[a.ecmaVersion>=6?6:a.ecmaVersion===5?5:3],a.sourceType==="module"&&(p+=" await")),this.reservedWords=wordsRegexp(p);var d=(p?p+" ":"")+reservedWords.strict;this.reservedWordsStrict=wordsRegexp(d),this.reservedWordsStrictBind=wordsRegexp(d+" "+reservedWords.strictBind),this.input=String(o),this.containsEsc=!1,u?(this.pos=u,this.lineStart=this.input.lastIndexOf(`
`,u-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=types$1.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=a.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&a.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(SCOPE_TOP),this.regexpState=null,this.privateNameStack=[]},prototypeAccessors={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Parser$1.prototype.parse=function(){var a=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(a)},prototypeAccessors.inFunction.get=function(){return(this.currentVarScope().flags&SCOPE_FUNCTION)>0},prototypeAccessors.inGenerator.get=function(){return(this.currentVarScope().flags&SCOPE_GENERATOR)>0&&!this.currentVarScope().inClassFieldInit},prototypeAccessors.inAsync.get=function(){return(this.currentVarScope().flags&SCOPE_ASYNC)>0&&!this.currentVarScope().inClassFieldInit},prototypeAccessors.canAwait.get=function(){for(var l=this.scopeStack.length-1;l>=0;l--){var a=this.scopeStack[l];if(a.inClassFieldInit||a.flags&SCOPE_CLASS_STATIC_BLOCK)return!1;if(a.flags&SCOPE_FUNCTION)return(a.flags&SCOPE_ASYNC)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},prototypeAccessors.allowSuper.get=function(){var l=this.currentThisScope(),a=l.flags,o=l.inClassFieldInit;return(a&SCOPE_SUPER)>0||o||this.options.allowSuperOutsideMethod},prototypeAccessors.allowDirectSuper.get=function(){return(this.currentThisScope().flags&SCOPE_DIRECT_SUPER)>0},prototypeAccessors.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},prototypeAccessors.allowNewDotTarget.get=function(){var l=this.currentThisScope(),a=l.flags,o=l.inClassFieldInit;return(a&(SCOPE_FUNCTION|SCOPE_CLASS_STATIC_BLOCK))>0||o},prototypeAccessors.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&SCOPE_CLASS_STATIC_BLOCK)>0},Parser$1.extend=function(){for(var a=[],o=arguments.length;o--;)a[o]=arguments[o];for(var u=this,p=0;p<a.length;p++)u=a[p](u);return u},Parser$1.parse=function(a,o){return new this(o,a).parse()},Parser$1.parseExpressionAt=function(a,o,u){var p=new this(u,a,o);return p.nextToken(),p.parseExpression()},Parser$1.tokenizer=function(a,o){return new this(o,a)},Object.defineProperties(Parser$1.prototype,prototypeAccessors);var pp$9=Parser$1.prototype,literal$1=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;pp$9.strictDirective=function(l){if(this.options.ecmaVersion<5)return!1;for(;;){skipWhiteSpace.lastIndex=l,l+=skipWhiteSpace.exec(this.input)[0].length;var a=literal$1.exec(this.input.slice(l));if(!a)return!1;if((a[1]||a[2])==="use strict"){skipWhiteSpace.lastIndex=l+a[0].length;var o=skipWhiteSpace.exec(this.input),u=o.index+o[0].length,p=this.input.charAt(u);return p===";"||p==="}"||lineBreak.test(o[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(p)||p==="!"&&this.input.charAt(u+1)==="=")}l+=a[0].length,skipWhiteSpace.lastIndex=l,l+=skipWhiteSpace.exec(this.input)[0].length,this.input[l]===";"&&l++}},pp$9.eat=function(l){return this.type===l?(this.next(),!0):!1},pp$9.isContextual=function(l){return this.type===types$1.name&&this.value===l&&!this.containsEsc},pp$9.eatContextual=function(l){return this.isContextual(l)?(this.next(),!0):!1},pp$9.expectContextual=function(l){this.eatContextual(l)||this.unexpected()},pp$9.canInsertSemicolon=function(){return this.type===types$1.eof||this.type===types$1.braceR||lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$9.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},pp$9.semicolon=function(){!this.eat(types$1.semi)&&!this.insertSemicolon()&&this.unexpected()},pp$9.afterTrailingComma=function(l,a){if(this.type===l)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),a||this.next(),!0},pp$9.expect=function(l){this.eat(l)||this.unexpected()},pp$9.unexpected=function(l){this.raise(l??this.start,"Unexpected token")};var DestructuringErrors=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};pp$9.checkPatternErrors=function(l,a){if(l){l.trailingComma>-1&&this.raiseRecoverable(l.trailingComma,"Comma is not permitted after the rest element");var o=a?l.parenthesizedAssign:l.parenthesizedBind;o>-1&&this.raiseRecoverable(o,a?"Assigning to rvalue":"Parenthesized pattern")}},pp$9.checkExpressionErrors=function(l,a){if(!l)return!1;var o=l.shorthandAssign,u=l.doubleProto;if(!a)return o>=0||u>=0;o>=0&&this.raise(o,"Shorthand property assignments are valid only in destructuring patterns"),u>=0&&this.raiseRecoverable(u,"Redefinition of __proto__ property")},pp$9.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},pp$9.isSimpleAssignTarget=function(l){return l.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(l.expression):l.type==="Identifier"||l.type==="MemberExpression"};var pp$8=Parser$1.prototype;pp$8.parseTopLevel=function(l){var a=Object.create(null);for(l.body||(l.body=[]);this.type!==types$1.eof;){var o=this.parseStatement(null,!0,a);l.body.push(o)}if(this.inModule)for(var u=0,p=Object.keys(this.undefinedExports);u<p.length;u+=1){var d=p[u];this.raiseRecoverable(this.undefinedExports[d].start,"Export '"+d+"' is not defined")}return this.adaptDirectivePrologue(l.body),this.next(),l.sourceType=this.options.sourceType,this.finishNode(l,"Program")};var loopLabel={kind:"loop"},switchLabel={kind:"switch"};pp$8.isLet=function(l){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;skipWhiteSpace.lastIndex=this.pos;var a=skipWhiteSpace.exec(this.input),o=this.pos+a[0].length,u=this.input.charCodeAt(o);if(u===91||u===92)return!0;if(l)return!1;if(u===123||u>55295&&u<56320)return!0;if(isIdentifierStart(u,!0)){for(var p=o+1;isIdentifierChar(u=this.input.charCodeAt(p),!0);)++p;if(u===92||u>55295&&u<56320)return!0;var d=this.input.slice(o,p);if(!keywordRelationalOperator.test(d))return!0}return!1},pp$8.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;skipWhiteSpace.lastIndex=this.pos;var l=skipWhiteSpace.exec(this.input),a=this.pos+l[0].length,o;return!lineBreak.test(this.input.slice(this.pos,a))&&this.input.slice(a,a+8)==="function"&&(a+8===this.input.length||!(isIdentifierChar(o=this.input.charCodeAt(a+8))||o>55295&&o<56320))},pp$8.parseStatement=function(l,a,o){var u=this.type,p=this.startNode(),d;switch(this.isLet(l)&&(u=types$1._var,d="let"),u){case types$1._break:case types$1._continue:return this.parseBreakContinueStatement(p,u.keyword);case types$1._debugger:return this.parseDebuggerStatement(p);case types$1._do:return this.parseDoStatement(p);case types$1._for:return this.parseForStatement(p);case types$1._function:return l&&(this.strict||l!=="if"&&l!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(p,!1,!l);case types$1._class:return l&&this.unexpected(),this.parseClass(p,!0);case types$1._if:return this.parseIfStatement(p);case types$1._return:return this.parseReturnStatement(p);case types$1._switch:return this.parseSwitchStatement(p);case types$1._throw:return this.parseThrowStatement(p);case types$1._try:return this.parseTryStatement(p);case types$1._const:case types$1._var:return d=d||this.value,l&&d!=="var"&&this.unexpected(),this.parseVarStatement(p,d);case types$1._while:return this.parseWhileStatement(p);case types$1._with:return this.parseWithStatement(p);case types$1.braceL:return this.parseBlock(!0,p);case types$1.semi:return this.parseEmptyStatement(p);case types$1._export:case types$1._import:if(this.options.ecmaVersion>10&&u===types$1._import){skipWhiteSpace.lastIndex=this.pos;var f=skipWhiteSpace.exec(this.input),g=this.pos+f[0].length,b=this.input.charCodeAt(g);if(b===40||b===46)return this.parseExpressionStatement(p,this.parseExpression())}return this.options.allowImportExportEverywhere||(a||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),u===types$1._import?this.parseImport(p):this.parseExport(p,o);default:if(this.isAsyncFunction())return l&&this.unexpected(),this.next(),this.parseFunctionStatement(p,!0,!l);var O=this.value,S=this.parseExpression();return u===types$1.name&&S.type==="Identifier"&&this.eat(types$1.colon)?this.parseLabeledStatement(p,O,S,l):this.parseExpressionStatement(p,S)}},pp$8.parseBreakContinueStatement=function(l,a){var o=a==="break";this.next(),this.eat(types$1.semi)||this.insertSemicolon()?l.label=null:this.type!==types$1.name?this.unexpected():(l.label=this.parseIdent(),this.semicolon());for(var u=0;u<this.labels.length;++u){var p=this.labels[u];if((l.label==null||p.name===l.label.name)&&(p.kind!=null&&(o||p.kind==="loop")||l.label&&o))break}return u===this.labels.length&&this.raise(l.start,"Unsyntactic "+a),this.finishNode(l,o?"BreakStatement":"ContinueStatement")},pp$8.parseDebuggerStatement=function(l){return this.next(),this.semicolon(),this.finishNode(l,"DebuggerStatement")},pp$8.parseDoStatement=function(l){return this.next(),this.labels.push(loopLabel),l.body=this.parseStatement("do"),this.labels.pop(),this.expect(types$1._while),l.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(types$1.semi):this.semicolon(),this.finishNode(l,"DoWhileStatement")},pp$8.parseForStatement=function(l){this.next();var a=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(loopLabel),this.enterScope(0),this.expect(types$1.parenL),this.type===types$1.semi)return a>-1&&this.unexpected(a),this.parseFor(l,null);var o=this.isLet();if(this.type===types$1._var||this.type===types$1._const||o){var u=this.startNode(),p=o?"let":this.value;return this.next(),this.parseVar(u,!0,p),this.finishNode(u,"VariableDeclaration"),(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&u.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===types$1._in?a>-1&&this.unexpected(a):l.await=a>-1),this.parseForIn(l,u)):(a>-1&&this.unexpected(a),this.parseFor(l,u))}var d=this.isContextual("let"),f=!1,g=this.containsEsc,b=new DestructuringErrors,O=this.start,S=a>-1?this.parseExprSubscripts(b,"await"):this.parseExpression(!0,b);return this.type===types$1._in||(f=this.options.ecmaVersion>=6&&this.isContextual("of"))?(a>-1?(this.type===types$1._in&&this.unexpected(a),l.await=!0):f&&this.options.ecmaVersion>=8&&(S.start===O&&!g&&S.type==="Identifier"&&S.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(l.await=!1)),d&&f&&this.raise(S.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(S,!1,b),this.checkLValPattern(S),this.parseForIn(l,S)):(this.checkExpressionErrors(b,!0),a>-1&&this.unexpected(a),this.parseFor(l,S))},pp$8.parseFunctionStatement=function(l,a,o){return this.next(),this.parseFunction(l,FUNC_STATEMENT|(o?0:FUNC_HANGING_STATEMENT),!1,a)},pp$8.parseIfStatement=function(l){return this.next(),l.test=this.parseParenExpression(),l.consequent=this.parseStatement("if"),l.alternate=this.eat(types$1._else)?this.parseStatement("if"):null,this.finishNode(l,"IfStatement")},pp$8.parseReturnStatement=function(l){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(types$1.semi)||this.insertSemicolon()?l.argument=null:(l.argument=this.parseExpression(),this.semicolon()),this.finishNode(l,"ReturnStatement")},pp$8.parseSwitchStatement=function(l){this.next(),l.discriminant=this.parseParenExpression(),l.cases=[],this.expect(types$1.braceL),this.labels.push(switchLabel),this.enterScope(0);for(var a,o=!1;this.type!==types$1.braceR;)if(this.type===types$1._case||this.type===types$1._default){var u=this.type===types$1._case;a&&this.finishNode(a,"SwitchCase"),l.cases.push(a=this.startNode()),a.consequent=[],this.next(),u?a.test=this.parseExpression():(o&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),o=!0,a.test=null),this.expect(types$1.colon)}else a||this.unexpected(),a.consequent.push(this.parseStatement(null));return this.exitScope(),a&&this.finishNode(a,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(l,"SwitchStatement")},pp$8.parseThrowStatement=function(l){return this.next(),lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),l.argument=this.parseExpression(),this.semicolon(),this.finishNode(l,"ThrowStatement")};var empty$1=[];pp$8.parseCatchClauseParam=function(){var l=this.parseBindingAtom(),a=l.type==="Identifier";return this.enterScope(a?SCOPE_SIMPLE_CATCH:0),this.checkLValPattern(l,a?BIND_SIMPLE_CATCH:BIND_LEXICAL),this.expect(types$1.parenR),l},pp$8.parseTryStatement=function(l){if(this.next(),l.block=this.parseBlock(),l.handler=null,this.type===types$1._catch){var a=this.startNode();this.next(),this.eat(types$1.parenL)?a.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),a.param=null,this.enterScope(0)),a.body=this.parseBlock(!1),this.exitScope(),l.handler=this.finishNode(a,"CatchClause")}return l.finalizer=this.eat(types$1._finally)?this.parseBlock():null,!l.handler&&!l.finalizer&&this.raise(l.start,"Missing catch or finally clause"),this.finishNode(l,"TryStatement")},pp$8.parseVarStatement=function(l,a,o){return this.next(),this.parseVar(l,!1,a,o),this.semicolon(),this.finishNode(l,"VariableDeclaration")},pp$8.parseWhileStatement=function(l){return this.next(),l.test=this.parseParenExpression(),this.labels.push(loopLabel),l.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(l,"WhileStatement")},pp$8.parseWithStatement=function(l){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),l.object=this.parseParenExpression(),l.body=this.parseStatement("with"),this.finishNode(l,"WithStatement")},pp$8.parseEmptyStatement=function(l){return this.next(),this.finishNode(l,"EmptyStatement")},pp$8.parseLabeledStatement=function(l,a,o,u){for(var p=0,d=this.labels;p<d.length;p+=1){var f=d[p];f.name===a&&this.raise(o.start,"Label '"+a+"' is already declared")}for(var g=this.type.isLoop?"loop":this.type===types$1._switch?"switch":null,b=this.labels.length-1;b>=0;b--){var O=this.labels[b];if(O.statementStart===l.start)O.statementStart=this.start,O.kind=g;else break}return this.labels.push({name:a,kind:g,statementStart:this.start}),l.body=this.parseStatement(u?u.indexOf("label")===-1?u+"label":u:"label"),this.labels.pop(),l.label=o,this.finishNode(l,"LabeledStatement")},pp$8.parseExpressionStatement=function(l,a){return l.expression=a,this.semicolon(),this.finishNode(l,"ExpressionStatement")},pp$8.parseBlock=function(l,a,o){for(l===void 0&&(l=!0),a===void 0&&(a=this.startNode()),a.body=[],this.expect(types$1.braceL),l&&this.enterScope(0);this.type!==types$1.braceR;){var u=this.parseStatement(null);a.body.push(u)}return o&&(this.strict=!1),this.next(),l&&this.exitScope(),this.finishNode(a,"BlockStatement")},pp$8.parseFor=function(l,a){return l.init=a,this.expect(types$1.semi),l.test=this.type===types$1.semi?null:this.parseExpression(),this.expect(types$1.semi),l.update=this.type===types$1.parenR?null:this.parseExpression(),this.expect(types$1.parenR),l.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(l,"ForStatement")},pp$8.parseForIn=function(l,a){var o=this.type===types$1._in;return this.next(),a.type==="VariableDeclaration"&&a.declarations[0].init!=null&&(!o||this.options.ecmaVersion<8||this.strict||a.kind!=="var"||a.declarations[0].id.type!=="Identifier")&&this.raise(a.start,(o?"for-in":"for-of")+" loop variable declaration may not have an initializer"),l.left=a,l.right=o?this.parseExpression():this.parseMaybeAssign(),this.expect(types$1.parenR),l.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(l,o?"ForInStatement":"ForOfStatement")},pp$8.parseVar=function(l,a,o,u){for(l.declarations=[],l.kind=o;;){var p=this.startNode();if(this.parseVarId(p,o),this.eat(types$1.eq)?p.init=this.parseMaybeAssign(a):!u&&o==="const"&&!(this.type===types$1._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!u&&p.id.type!=="Identifier"&&!(a&&(this.type===types$1._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):p.init=null,l.declarations.push(this.finishNode(p,"VariableDeclarator")),!this.eat(types$1.comma))break}return l},pp$8.parseVarId=function(l,a){l.id=this.parseBindingAtom(),this.checkLValPattern(l.id,a==="var"?BIND_VAR:BIND_LEXICAL,!1)};var FUNC_STATEMENT=1,FUNC_HANGING_STATEMENT=2,FUNC_NULLABLE_ID=4;pp$8.parseFunction=function(l,a,o,u,p){this.initFunction(l),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!u)&&(this.type===types$1.star&&a&FUNC_HANGING_STATEMENT&&this.unexpected(),l.generator=this.eat(types$1.star)),this.options.ecmaVersion>=8&&(l.async=!!u),a&FUNC_STATEMENT&&(l.id=a&FUNC_NULLABLE_ID&&this.type!==types$1.name?null:this.parseIdent(),l.id&&!(a&FUNC_HANGING_STATEMENT)&&this.checkLValSimple(l.id,this.strict||l.generator||l.async?this.treatFunctionsAsVar?BIND_VAR:BIND_LEXICAL:BIND_FUNCTION));var d=this.yieldPos,f=this.awaitPos,g=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(l.async,l.generator)),a&FUNC_STATEMENT||(l.id=this.type===types$1.name?this.parseIdent():null),this.parseFunctionParams(l),this.parseFunctionBody(l,o,!1,p),this.yieldPos=d,this.awaitPos=f,this.awaitIdentPos=g,this.finishNode(l,a&FUNC_STATEMENT?"FunctionDeclaration":"FunctionExpression")},pp$8.parseFunctionParams=function(l){this.expect(types$1.parenL),l.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},pp$8.parseClass=function(l,a){this.next();var o=this.strict;this.strict=!0,this.parseClassId(l,a),this.parseClassSuper(l);var u=this.enterClassBody(),p=this.startNode(),d=!1;for(p.body=[],this.expect(types$1.braceL);this.type!==types$1.braceR;){var f=this.parseClassElement(l.superClass!==null);f&&(p.body.push(f),f.type==="MethodDefinition"&&f.kind==="constructor"?(d&&this.raiseRecoverable(f.start,"Duplicate constructor in the same class"),d=!0):f.key&&f.key.type==="PrivateIdentifier"&&isPrivateNameConflicted(u,f)&&this.raiseRecoverable(f.key.start,"Identifier '#"+f.key.name+"' has already been declared"))}return this.strict=o,this.next(),l.body=this.finishNode(p,"ClassBody"),this.exitClassBody(),this.finishNode(l,a?"ClassDeclaration":"ClassExpression")},pp$8.parseClassElement=function(l){if(this.eat(types$1.semi))return null;var a=this.options.ecmaVersion,o=this.startNode(),u="",p=!1,d=!1,f="method",g=!1;if(this.eatContextual("static")){if(a>=13&&this.eat(types$1.braceL))return this.parseClassStaticBlock(o),o;this.isClassElementNameStart()||this.type===types$1.star?g=!0:u="static"}if(o.static=g,!u&&a>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===types$1.star)&&!this.canInsertSemicolon()?d=!0:u="async"),!u&&(a>=9||!d)&&this.eat(types$1.star)&&(p=!0),!u&&!d&&!p){var b=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?f=b:u=b)}if(u?(o.computed=!1,o.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),o.key.name=u,this.finishNode(o.key,"Identifier")):this.parseClassElementName(o),a<13||this.type===types$1.parenL||f!=="method"||p||d){var O=!o.static&&checkKeyName(o,"constructor"),S=O&&l;O&&f!=="method"&&this.raise(o.key.start,"Constructor can't have get/set modifier"),o.kind=O?"constructor":f,this.parseClassMethod(o,p,d,S)}else this.parseClassField(o);return o},pp$8.isClassElementNameStart=function(){return this.type===types$1.name||this.type===types$1.privateId||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword},pp$8.parseClassElementName=function(l){this.type===types$1.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),l.computed=!1,l.key=this.parsePrivateIdent()):this.parsePropertyName(l)},pp$8.parseClassMethod=function(l,a,o,u){var p=l.key;l.kind==="constructor"?(a&&this.raise(p.start,"Constructor can't be a generator"),o&&this.raise(p.start,"Constructor can't be an async method")):l.static&&checkKeyName(l,"prototype")&&this.raise(p.start,"Classes may not have a static property named prototype");var d=l.value=this.parseMethod(a,o,u);return l.kind==="get"&&d.params.length!==0&&this.raiseRecoverable(d.start,"getter should have no params"),l.kind==="set"&&d.params.length!==1&&this.raiseRecoverable(d.start,"setter should have exactly one param"),l.kind==="set"&&d.params[0].type==="RestElement"&&this.raiseRecoverable(d.params[0].start,"Setter cannot use rest params"),this.finishNode(l,"MethodDefinition")},pp$8.parseClassField=function(l){if(checkKeyName(l,"constructor")?this.raise(l.key.start,"Classes can't have a field named 'constructor'"):l.static&&checkKeyName(l,"prototype")&&this.raise(l.key.start,"Classes can't have a static field named 'prototype'"),this.eat(types$1.eq)){var a=this.currentThisScope(),o=a.inClassFieldInit;a.inClassFieldInit=!0,l.value=this.parseMaybeAssign(),a.inClassFieldInit=o}else l.value=null;return this.semicolon(),this.finishNode(l,"PropertyDefinition")},pp$8.parseClassStaticBlock=function(l){l.body=[];var a=this.labels;for(this.labels=[],this.enterScope(SCOPE_CLASS_STATIC_BLOCK|SCOPE_SUPER);this.type!==types$1.braceR;){var o=this.parseStatement(null);l.body.push(o)}return this.next(),this.exitScope(),this.labels=a,this.finishNode(l,"StaticBlock")},pp$8.parseClassId=function(l,a){this.type===types$1.name?(l.id=this.parseIdent(),a&&this.checkLValSimple(l.id,BIND_LEXICAL,!1)):(a===!0&&this.unexpected(),l.id=null)},pp$8.parseClassSuper=function(l){l.superClass=this.eat(types$1._extends)?this.parseExprSubscripts(null,!1):null},pp$8.enterClassBody=function(){var l={declared:Object.create(null),used:[]};return this.privateNameStack.push(l),l.declared},pp$8.exitClassBody=function(){var l=this.privateNameStack.pop(),a=l.declared,o=l.used;if(this.options.checkPrivateFields)for(var u=this.privateNameStack.length,p=u===0?null:this.privateNameStack[u-1],d=0;d<o.length;++d){var f=o[d];hasOwn(a,f.name)||(p?p.used.push(f):this.raiseRecoverable(f.start,"Private field '#"+f.name+"' must be declared in an enclosing class"))}};function isPrivateNameConflicted(l,a){var o=a.key.name,u=l[o],p="true";return a.type==="MethodDefinition"&&(a.kind==="get"||a.kind==="set")&&(p=(a.static?"s":"i")+a.kind),u==="iget"&&p==="iset"||u==="iset"&&p==="iget"||u==="sget"&&p==="sset"||u==="sset"&&p==="sget"?(l[o]="true",!1):u?!0:(l[o]=p,!1)}function checkKeyName(l,a){var o=l.computed,u=l.key;return!o&&(u.type==="Identifier"&&u.name===a||u.type==="Literal"&&u.value===a)}pp$8.parseExportAllDeclaration=function(l,a){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(l.exported=this.parseModuleExportName(),this.checkExport(a,l.exported,this.lastTokStart)):l.exported=null),this.expectContextual("from"),this.type!==types$1.string&&this.unexpected(),l.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(l.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(l,"ExportAllDeclaration")},pp$8.parseExport=function(l,a){if(this.next(),this.eat(types$1.star))return this.parseExportAllDeclaration(l,a);if(this.eat(types$1._default))return this.checkExport(a,"default",this.lastTokStart),l.declaration=this.parseExportDefaultDeclaration(),this.finishNode(l,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())l.declaration=this.parseExportDeclaration(l),l.declaration.type==="VariableDeclaration"?this.checkVariableExport(a,l.declaration.declarations):this.checkExport(a,l.declaration.id,l.declaration.id.start),l.specifiers=[],l.source=null;else{if(l.declaration=null,l.specifiers=this.parseExportSpecifiers(a),this.eatContextual("from"))this.type!==types$1.string&&this.unexpected(),l.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(l.attributes=this.parseWithClause());else{for(var o=0,u=l.specifiers;o<u.length;o+=1){var p=u[o];this.checkUnreserved(p.local),this.checkLocalExport(p.local),p.local.type==="Literal"&&this.raise(p.local.start,"A string literal cannot be used as an exported binding without `from`.")}l.source=null}this.semicolon()}return this.finishNode(l,"ExportNamedDeclaration")},pp$8.parseExportDeclaration=function(l){return this.parseStatement(null)},pp$8.parseExportDefaultDeclaration=function(){var l;if(this.type===types$1._function||(l=this.isAsyncFunction())){var a=this.startNode();return this.next(),l&&this.next(),this.parseFunction(a,FUNC_STATEMENT|FUNC_NULLABLE_ID,!1,l)}else if(this.type===types$1._class){var o=this.startNode();return this.parseClass(o,"nullableID")}else{var u=this.parseMaybeAssign();return this.semicolon(),u}},pp$8.checkExport=function(l,a,o){l&&(typeof a!="string"&&(a=a.type==="Identifier"?a.name:a.value),hasOwn(l,a)&&this.raiseRecoverable(o,"Duplicate export '"+a+"'"),l[a]=!0)},pp$8.checkPatternExport=function(l,a){var o=a.type;if(o==="Identifier")this.checkExport(l,a,a.start);else if(o==="ObjectPattern")for(var u=0,p=a.properties;u<p.length;u+=1){var d=p[u];this.checkPatternExport(l,d)}else if(o==="ArrayPattern")for(var f=0,g=a.elements;f<g.length;f+=1){var b=g[f];b&&this.checkPatternExport(l,b)}else o==="Property"?this.checkPatternExport(l,a.value):o==="AssignmentPattern"?this.checkPatternExport(l,a.left):o==="RestElement"&&this.checkPatternExport(l,a.argument)},pp$8.checkVariableExport=function(l,a){if(l)for(var o=0,u=a;o<u.length;o+=1){var p=u[o];this.checkPatternExport(l,p.id)}},pp$8.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},pp$8.parseExportSpecifier=function(l){var a=this.startNode();return a.local=this.parseModuleExportName(),a.exported=this.eatContextual("as")?this.parseModuleExportName():a.local,this.checkExport(l,a.exported,a.exported.start),this.finishNode(a,"ExportSpecifier")},pp$8.parseExportSpecifiers=function(l){var a=[],o=!0;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(o)o=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;a.push(this.parseExportSpecifier(l))}return a},pp$8.parseImport=function(l){return this.next(),this.type===types$1.string?(l.specifiers=empty$1,l.source=this.parseExprAtom()):(l.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),l.source=this.type===types$1.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(l.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(l,"ImportDeclaration")},pp$8.parseImportSpecifier=function(){var l=this.startNode();return l.imported=this.parseModuleExportName(),this.eatContextual("as")?l.local=this.parseIdent():(this.checkUnreserved(l.imported),l.local=l.imported),this.checkLValSimple(l.local,BIND_LEXICAL),this.finishNode(l,"ImportSpecifier")},pp$8.parseImportDefaultSpecifier=function(){var l=this.startNode();return l.local=this.parseIdent(),this.checkLValSimple(l.local,BIND_LEXICAL),this.finishNode(l,"ImportDefaultSpecifier")},pp$8.parseImportNamespaceSpecifier=function(){var l=this.startNode();return this.next(),this.expectContextual("as"),l.local=this.parseIdent(),this.checkLValSimple(l.local,BIND_LEXICAL),this.finishNode(l,"ImportNamespaceSpecifier")},pp$8.parseImportSpecifiers=function(){var l=[],a=!0;if(this.type===types$1.name&&(l.push(this.parseImportDefaultSpecifier()),!this.eat(types$1.comma)))return l;if(this.type===types$1.star)return l.push(this.parseImportNamespaceSpecifier()),l;for(this.expect(types$1.braceL);!this.eat(types$1.braceR);){if(a)a=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;l.push(this.parseImportSpecifier())}return l},pp$8.parseWithClause=function(){var l=[];if(!this.eat(types$1._with))return l;this.expect(types$1.braceL);for(var a={},o=!0;!this.eat(types$1.braceR);){if(o)o=!1;else if(this.expect(types$1.comma),this.afterTrailingComma(types$1.braceR))break;var u=this.parseImportAttribute(),p=u.key.type==="Identifier"?u.key.name:u.key.value;hasOwn(a,p)&&this.raiseRecoverable(u.key.start,"Duplicate attribute key '"+p+"'"),a[p]=!0,l.push(u)}return l},pp$8.parseImportAttribute=function(){var l=this.startNode();return l.key=this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(types$1.colon),this.type!==types$1.string&&this.unexpected(),l.value=this.parseExprAtom(),this.finishNode(l,"ImportAttribute")},pp$8.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===types$1.string){var l=this.parseLiteral(this.value);return loneSurrogate.test(l.value)&&this.raise(l.start,"An export name cannot include a lone surrogate."),l}return this.parseIdent(!0)},pp$8.adaptDirectivePrologue=function(l){for(var a=0;a<l.length&&this.isDirectiveCandidate(l[a]);++a)l[a].directive=l[a].expression.raw.slice(1,-1)},pp$8.isDirectiveCandidate=function(l){return this.options.ecmaVersion>=5&&l.type==="ExpressionStatement"&&l.expression.type==="Literal"&&typeof l.expression.value=="string"&&(this.input[l.start]==='"'||this.input[l.start]==="'")};var pp$7=Parser$1.prototype;pp$7.toAssignable=function(l,a,o){if(this.options.ecmaVersion>=6&&l)switch(l.type){case"Identifier":this.inAsync&&l.name==="await"&&this.raise(l.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":l.type="ObjectPattern",o&&this.checkPatternErrors(o,!0);for(var u=0,p=l.properties;u<p.length;u+=1){var d=p[u];this.toAssignable(d,a),d.type==="RestElement"&&(d.argument.type==="ArrayPattern"||d.argument.type==="ObjectPattern")&&this.raise(d.argument.start,"Unexpected token")}break;case"Property":l.kind!=="init"&&this.raise(l.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(l.value,a);break;case"ArrayExpression":l.type="ArrayPattern",o&&this.checkPatternErrors(o,!0),this.toAssignableList(l.elements,a);break;case"SpreadElement":l.type="RestElement",this.toAssignable(l.argument,a),l.argument.type==="AssignmentPattern"&&this.raise(l.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":l.operator!=="="&&this.raise(l.left.end,"Only '=' operator can be used for specifying default value."),l.type="AssignmentPattern",delete l.operator,this.toAssignable(l.left,a);break;case"ParenthesizedExpression":this.toAssignable(l.expression,a,o);break;case"ChainExpression":this.raiseRecoverable(l.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!a)break;default:this.raise(l.start,"Assigning to rvalue")}else o&&this.checkPatternErrors(o,!0);return l},pp$7.toAssignableList=function(l,a){for(var o=l.length,u=0;u<o;u++){var p=l[u];p&&this.toAssignable(p,a)}if(o){var d=l[o-1];this.options.ecmaVersion===6&&a&&d&&d.type==="RestElement"&&d.argument.type!=="Identifier"&&this.unexpected(d.argument.start)}return l},pp$7.parseSpread=function(l){var a=this.startNode();return this.next(),a.argument=this.parseMaybeAssign(!1,l),this.finishNode(a,"SpreadElement")},pp$7.parseRestBinding=function(){var l=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==types$1.name&&this.unexpected(),l.argument=this.parseBindingAtom(),this.finishNode(l,"RestElement")},pp$7.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case types$1.bracketL:var l=this.startNode();return this.next(),l.elements=this.parseBindingList(types$1.bracketR,!0,!0),this.finishNode(l,"ArrayPattern");case types$1.braceL:return this.parseObj(!0)}return this.parseIdent()},pp$7.parseBindingList=function(l,a,o,u){for(var p=[],d=!0;!this.eat(l);)if(d?d=!1:this.expect(types$1.comma),a&&this.type===types$1.comma)p.push(null);else{if(o&&this.afterTrailingComma(l))break;if(this.type===types$1.ellipsis){var f=this.parseRestBinding();this.parseBindingListItem(f),p.push(f),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(l);break}else p.push(this.parseAssignableListItem(u))}return p},pp$7.parseAssignableListItem=function(l){var a=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(a),a},pp$7.parseBindingListItem=function(l){return l},pp$7.parseMaybeDefault=function(l,a,o){if(o=o||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(types$1.eq))return o;var u=this.startNodeAt(l,a);return u.left=o,u.right=this.parseMaybeAssign(),this.finishNode(u,"AssignmentPattern")},pp$7.checkLValSimple=function(l,a,o){a===void 0&&(a=BIND_NONE);var u=a!==BIND_NONE;switch(l.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(l.name)&&this.raiseRecoverable(l.start,(u?"Binding ":"Assigning to ")+l.name+" in strict mode"),u&&(a===BIND_LEXICAL&&l.name==="let"&&this.raiseRecoverable(l.start,"let is disallowed as a lexically bound name"),o&&(hasOwn(o,l.name)&&this.raiseRecoverable(l.start,"Argument name clash"),o[l.name]=!0),a!==BIND_OUTSIDE&&this.declareName(l.name,a,l.start));break;case"ChainExpression":this.raiseRecoverable(l.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":u&&this.raiseRecoverable(l.start,"Binding member expression");break;case"ParenthesizedExpression":return u&&this.raiseRecoverable(l.start,"Binding parenthesized expression"),this.checkLValSimple(l.expression,a,o);default:this.raise(l.start,(u?"Binding":"Assigning to")+" rvalue")}},pp$7.checkLValPattern=function(l,a,o){switch(a===void 0&&(a=BIND_NONE),l.type){case"ObjectPattern":for(var u=0,p=l.properties;u<p.length;u+=1){var d=p[u];this.checkLValInnerPattern(d,a,o)}break;case"ArrayPattern":for(var f=0,g=l.elements;f<g.length;f+=1){var b=g[f];b&&this.checkLValInnerPattern(b,a,o)}break;default:this.checkLValSimple(l,a,o)}},pp$7.checkLValInnerPattern=function(l,a,o){switch(a===void 0&&(a=BIND_NONE),l.type){case"Property":this.checkLValInnerPattern(l.value,a,o);break;case"AssignmentPattern":this.checkLValPattern(l.left,a,o);break;case"RestElement":this.checkLValPattern(l.argument,a,o);break;default:this.checkLValPattern(l,a,o)}};var TokContext=function(a,o,u,p,d){this.token=a,this.isExpr=!!o,this.preserveSpace=!!u,this.override=p,this.generator=!!d},types$2={b_stat:new TokContext("{",!1),b_expr:new TokContext("{",!0),b_tmpl:new TokContext("${",!1),p_stat:new TokContext("(",!1),p_expr:new TokContext("(",!0),q_tmpl:new TokContext("`",!0,!0,function(l){return l.tryReadTemplateToken()}),f_stat:new TokContext("function",!1),f_expr:new TokContext("function",!0),f_expr_gen:new TokContext("function",!0,!1,null,!0),f_gen:new TokContext("function",!1,!1,null,!0)},pp$6=Parser$1.prototype;pp$6.initialContext=function(){return[types$2.b_stat]},pp$6.curContext=function(){return this.context[this.context.length-1]},pp$6.braceIsBlock=function(l){var a=this.curContext();return a===types$2.f_expr||a===types$2.f_stat?!0:l===types$1.colon&&(a===types$2.b_stat||a===types$2.b_expr)?!a.isExpr:l===types$1._return||l===types$1.name&&this.exprAllowed?lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):l===types$1._else||l===types$1.semi||l===types$1.eof||l===types$1.parenR||l===types$1.arrow?!0:l===types$1.braceL?a===types$2.b_stat:l===types$1._var||l===types$1._const||l===types$1.name?!1:!this.exprAllowed},pp$6.inGeneratorContext=function(){for(var l=this.context.length-1;l>=1;l--){var a=this.context[l];if(a.token==="function")return a.generator}return!1},pp$6.updateContext=function(l){var a,o=this.type;o.keyword&&l===types$1.dot?this.exprAllowed=!1:(a=o.updateContext)?a.call(this,l):this.exprAllowed=o.beforeExpr},pp$6.overrideContext=function(l){this.curContext()!==l&&(this.context[this.context.length-1]=l)},types$1.parenR.updateContext=types$1.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var l=this.context.pop();l===types$2.b_stat&&this.curContext().token==="function"&&(l=this.context.pop()),this.exprAllowed=!l.isExpr},types$1.braceL.updateContext=function(l){this.context.push(this.braceIsBlock(l)?types$2.b_stat:types$2.b_expr),this.exprAllowed=!0},types$1.dollarBraceL.updateContext=function(){this.context.push(types$2.b_tmpl),this.exprAllowed=!0},types$1.parenL.updateContext=function(l){var a=l===types$1._if||l===types$1._for||l===types$1._with||l===types$1._while;this.context.push(a?types$2.p_stat:types$2.p_expr),this.exprAllowed=!0},types$1.incDec.updateContext=function(){},types$1._function.updateContext=types$1._class.updateContext=function(l){l.beforeExpr&&l!==types$1._else&&!(l===types$1.semi&&this.curContext()!==types$2.p_stat)&&!(l===types$1._return&&lineBreak.test(this.input.slice(this.lastTokEnd,this.start)))&&!((l===types$1.colon||l===types$1.braceL)&&this.curContext()===types$2.b_stat)?this.context.push(types$2.f_expr):this.context.push(types$2.f_stat),this.exprAllowed=!1},types$1.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},types$1.backQuote.updateContext=function(){this.curContext()===types$2.q_tmpl?this.context.pop():this.context.push(types$2.q_tmpl),this.exprAllowed=!1},types$1.star.updateContext=function(l){if(l===types$1._function){var a=this.context.length-1;this.context[a]===types$2.f_expr?this.context[a]=types$2.f_expr_gen:this.context[a]=types$2.f_gen}this.exprAllowed=!0},types$1.name.updateContext=function(l){var a=!1;this.options.ecmaVersion>=6&&l!==types$1.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(a=!0),this.exprAllowed=a};var pp$5=Parser$1.prototype;pp$5.checkPropClash=function(l,a,o){if(!(this.options.ecmaVersion>=9&&l.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(l.computed||l.method||l.shorthand))){var u=l.key,p;switch(u.type){case"Identifier":p=u.name;break;case"Literal":p=String(u.value);break;default:return}var d=l.kind;if(this.options.ecmaVersion>=6){p==="__proto__"&&d==="init"&&(a.proto&&(o?o.doubleProto<0&&(o.doubleProto=u.start):this.raiseRecoverable(u.start,"Redefinition of __proto__ property")),a.proto=!0);return}p="$"+p;var f=a[p];if(f){var g;d==="init"?g=this.strict&&f.init||f.get||f.set:g=f.init||f[d],g&&this.raiseRecoverable(u.start,"Redefinition of property")}else f=a[p]={init:!1,get:!1,set:!1};f[d]=!0}},pp$5.parseExpression=function(l,a){var o=this.start,u=this.startLoc,p=this.parseMaybeAssign(l,a);if(this.type===types$1.comma){var d=this.startNodeAt(o,u);for(d.expressions=[p];this.eat(types$1.comma);)d.expressions.push(this.parseMaybeAssign(l,a));return this.finishNode(d,"SequenceExpression")}return p},pp$5.parseMaybeAssign=function(l,a,o){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(l);this.exprAllowed=!1}var u=!1,p=-1,d=-1,f=-1;a?(p=a.parenthesizedAssign,d=a.trailingComma,f=a.doubleProto,a.parenthesizedAssign=a.trailingComma=-1):(a=new DestructuringErrors,u=!0);var g=this.start,b=this.startLoc;(this.type===types$1.parenL||this.type===types$1.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=l==="await");var O=this.parseMaybeConditional(l,a);if(o&&(O=o.call(this,O,g,b)),this.type.isAssign){var S=this.startNodeAt(g,b);return S.operator=this.value,this.type===types$1.eq&&(O=this.toAssignable(O,!1,a)),u||(a.parenthesizedAssign=a.trailingComma=a.doubleProto=-1),a.shorthandAssign>=O.start&&(a.shorthandAssign=-1),this.type===types$1.eq?this.checkLValPattern(O):this.checkLValSimple(O),S.left=O,this.next(),S.right=this.parseMaybeAssign(l),f>-1&&(a.doubleProto=f),this.finishNode(S,"AssignmentExpression")}else u&&this.checkExpressionErrors(a,!0);return p>-1&&(a.parenthesizedAssign=p),d>-1&&(a.trailingComma=d),O},pp$5.parseMaybeConditional=function(l,a){var o=this.start,u=this.startLoc,p=this.parseExprOps(l,a);if(this.checkExpressionErrors(a))return p;if(this.eat(types$1.question)){var d=this.startNodeAt(o,u);return d.test=p,d.consequent=this.parseMaybeAssign(),this.expect(types$1.colon),d.alternate=this.parseMaybeAssign(l),this.finishNode(d,"ConditionalExpression")}return p},pp$5.parseExprOps=function(l,a){var o=this.start,u=this.startLoc,p=this.parseMaybeUnary(a,!1,!1,l);return this.checkExpressionErrors(a)||p.start===o&&p.type==="ArrowFunctionExpression"?p:this.parseExprOp(p,o,u,-1,l)},pp$5.parseExprOp=function(l,a,o,u,p){var d=this.type.binop;if(d!=null&&(!p||this.type!==types$1._in)&&d>u){var f=this.type===types$1.logicalOR||this.type===types$1.logicalAND,g=this.type===types$1.coalesce;g&&(d=types$1.logicalAND.binop);var b=this.value;this.next();var O=this.start,S=this.startLoc,M=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,p),O,S,d,p),A=this.buildBinary(a,o,l,M,b,f||g);return(f&&this.type===types$1.coalesce||g&&(this.type===types$1.logicalOR||this.type===types$1.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(A,a,o,u,p)}return l},pp$5.buildBinary=function(l,a,o,u,p,d){u.type==="PrivateIdentifier"&&this.raise(u.start,"Private identifier can only be left side of binary expression");var f=this.startNodeAt(l,a);return f.left=o,f.operator=p,f.right=u,this.finishNode(f,d?"LogicalExpression":"BinaryExpression")},pp$5.parseMaybeUnary=function(l,a,o,u){var p=this.start,d=this.startLoc,f;if(this.isContextual("await")&&this.canAwait)f=this.parseAwait(u),a=!0;else if(this.type.prefix){var g=this.startNode(),b=this.type===types$1.incDec;g.operator=this.value,g.prefix=!0,this.next(),g.argument=this.parseMaybeUnary(null,!0,b,u),this.checkExpressionErrors(l,!0),b?this.checkLValSimple(g.argument):this.strict&&g.operator==="delete"&&isLocalVariableAccess(g.argument)?this.raiseRecoverable(g.start,"Deleting local variable in strict mode"):g.operator==="delete"&&isPrivateFieldAccess(g.argument)?this.raiseRecoverable(g.start,"Private fields can not be deleted"):a=!0,f=this.finishNode(g,b?"UpdateExpression":"UnaryExpression")}else if(!a&&this.type===types$1.privateId)(u||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),f=this.parsePrivateIdent(),this.type!==types$1._in&&this.unexpected();else{if(f=this.parseExprSubscripts(l,u),this.checkExpressionErrors(l))return f;for(;this.type.postfix&&!this.canInsertSemicolon();){var O=this.startNodeAt(p,d);O.operator=this.value,O.prefix=!1,O.argument=f,this.checkLValSimple(f),this.next(),f=this.finishNode(O,"UpdateExpression")}}if(!o&&this.eat(types$1.starstar))if(a)this.unexpected(this.lastTokStart);else return this.buildBinary(p,d,f,this.parseMaybeUnary(null,!1,!1,u),"**",!1);else return f};function isLocalVariableAccess(l){return l.type==="Identifier"||l.type==="ParenthesizedExpression"&&isLocalVariableAccess(l.expression)}function isPrivateFieldAccess(l){return l.type==="MemberExpression"&&l.property.type==="PrivateIdentifier"||l.type==="ChainExpression"&&isPrivateFieldAccess(l.expression)||l.type==="ParenthesizedExpression"&&isPrivateFieldAccess(l.expression)}pp$5.parseExprSubscripts=function(l,a){var o=this.start,u=this.startLoc,p=this.parseExprAtom(l,a);if(p.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return p;var d=this.parseSubscripts(p,o,u,!1,a);return l&&d.type==="MemberExpression"&&(l.parenthesizedAssign>=d.start&&(l.parenthesizedAssign=-1),l.parenthesizedBind>=d.start&&(l.parenthesizedBind=-1),l.trailingComma>=d.start&&(l.trailingComma=-1)),d},pp$5.parseSubscripts=function(l,a,o,u,p){for(var d=this.options.ecmaVersion>=8&&l.type==="Identifier"&&l.name==="async"&&this.lastTokEnd===l.end&&!this.canInsertSemicolon()&&l.end-l.start===5&&this.potentialArrowAt===l.start,f=!1;;){var g=this.parseSubscript(l,a,o,u,d,f,p);if(g.optional&&(f=!0),g===l||g.type==="ArrowFunctionExpression"){if(f){var b=this.startNodeAt(a,o);b.expression=g,g=this.finishNode(b,"ChainExpression")}return g}l=g}},pp$5.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(types$1.arrow)},pp$5.parseSubscriptAsyncArrow=function(l,a,o,u){return this.parseArrowExpression(this.startNodeAt(l,a),o,!0,u)},pp$5.parseSubscript=function(l,a,o,u,p,d,f){var g=this.options.ecmaVersion>=11,b=g&&this.eat(types$1.questionDot);u&&b&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var O=this.eat(types$1.bracketL);if(O||b&&this.type!==types$1.parenL&&this.type!==types$1.backQuote||this.eat(types$1.dot)){var S=this.startNodeAt(a,o);S.object=l,O?(S.property=this.parseExpression(),this.expect(types$1.bracketR)):this.type===types$1.privateId&&l.type!=="Super"?S.property=this.parsePrivateIdent():S.property=this.parseIdent(this.options.allowReserved!=="never"),S.computed=!!O,g&&(S.optional=b),l=this.finishNode(S,"MemberExpression")}else if(!u&&this.eat(types$1.parenL)){var M=new DestructuringErrors,A=this.yieldPos,F=this.awaitPos,$=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var B=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1,M);if(p&&!b&&this.shouldParseAsyncArrow())return this.checkPatternErrors(M,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=A,this.awaitPos=F,this.awaitIdentPos=$,this.parseSubscriptAsyncArrow(a,o,B,f);this.checkExpressionErrors(M,!0),this.yieldPos=A||this.yieldPos,this.awaitPos=F||this.awaitPos,this.awaitIdentPos=$||this.awaitIdentPos;var I=this.startNodeAt(a,o);I.callee=l,I.arguments=B,g&&(I.optional=b),l=this.finishNode(I,"CallExpression")}else if(this.type===types$1.backQuote){(b||d)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var U=this.startNodeAt(a,o);U.tag=l,U.quasi=this.parseTemplate({isTagged:!0}),l=this.finishNode(U,"TaggedTemplateExpression")}return l},pp$5.parseExprAtom=function(l,a,o){this.type===types$1.slash&&this.readRegexp();var u,p=this.potentialArrowAt===this.start;switch(this.type){case types$1._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),u=this.startNode(),this.next(),this.type===types$1.parenL&&!this.allowDirectSuper&&this.raise(u.start,"super() call outside constructor of a subclass"),this.type!==types$1.dot&&this.type!==types$1.bracketL&&this.type!==types$1.parenL&&this.unexpected(),this.finishNode(u,"Super");case types$1._this:return u=this.startNode(),this.next(),this.finishNode(u,"ThisExpression");case types$1.name:var d=this.start,f=this.startLoc,g=this.containsEsc,b=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!g&&b.name==="async"&&!this.canInsertSemicolon()&&this.eat(types$1._function))return this.overrideContext(types$2.f_expr),this.parseFunction(this.startNodeAt(d,f),0,!1,!0,a);if(p&&!this.canInsertSemicolon()){if(this.eat(types$1.arrow))return this.parseArrowExpression(this.startNodeAt(d,f),[b],!1,a);if(this.options.ecmaVersion>=8&&b.name==="async"&&this.type===types$1.name&&!g&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return b=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(types$1.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(d,f),[b],!0,a)}return b;case types$1.regexp:var O=this.value;return u=this.parseLiteral(O.value),u.regex={pattern:O.pattern,flags:O.flags},u;case types$1.num:case types$1.string:return this.parseLiteral(this.value);case types$1._null:case types$1._true:case types$1._false:return u=this.startNode(),u.value=this.type===types$1._null?null:this.type===types$1._true,u.raw=this.type.keyword,this.next(),this.finishNode(u,"Literal");case types$1.parenL:var S=this.start,M=this.parseParenAndDistinguishExpression(p,a);return l&&(l.parenthesizedAssign<0&&!this.isSimpleAssignTarget(M)&&(l.parenthesizedAssign=S),l.parenthesizedBind<0&&(l.parenthesizedBind=S)),M;case types$1.bracketL:return u=this.startNode(),this.next(),u.elements=this.parseExprList(types$1.bracketR,!0,!0,l),this.finishNode(u,"ArrayExpression");case types$1.braceL:return this.overrideContext(types$2.b_expr),this.parseObj(!1,l);case types$1._function:return u=this.startNode(),this.next(),this.parseFunction(u,0);case types$1._class:return this.parseClass(this.startNode(),!1);case types$1._new:return this.parseNew();case types$1.backQuote:return this.parseTemplate();case types$1._import:return this.options.ecmaVersion>=11?this.parseExprImport(o):this.unexpected();default:return this.parseExprAtomDefault()}},pp$5.parseExprAtomDefault=function(){this.unexpected()},pp$5.parseExprImport=function(l){var a=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===types$1.parenL&&!l)return this.parseDynamicImport(a);if(this.type===types$1.dot){var o=this.startNodeAt(a.start,a.loc&&a.loc.start);return o.name="import",a.meta=this.finishNode(o,"Identifier"),this.parseImportMeta(a)}else this.unexpected()},pp$5.parseDynamicImport=function(l){if(this.next(),l.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(types$1.parenR)?l.options=null:(this.expect(types$1.comma),this.afterTrailingComma(types$1.parenR)?l.options=null:(l.options=this.parseMaybeAssign(),this.eat(types$1.parenR)||(this.expect(types$1.comma),this.afterTrailingComma(types$1.parenR)||this.unexpected())));else if(!this.eat(types$1.parenR)){var a=this.start;this.eat(types$1.comma)&&this.eat(types$1.parenR)?this.raiseRecoverable(a,"Trailing comma is not allowed in import()"):this.unexpected(a)}return this.finishNode(l,"ImportExpression")},pp$5.parseImportMeta=function(l){this.next();var a=this.containsEsc;return l.property=this.parseIdent(!0),l.property.name!=="meta"&&this.raiseRecoverable(l.property.start,"The only valid meta property for import is 'import.meta'"),a&&this.raiseRecoverable(l.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(l.start,"Cannot use 'import.meta' outside a module"),this.finishNode(l,"MetaProperty")},pp$5.parseLiteral=function(l){var a=this.startNode();return a.value=l,a.raw=this.input.slice(this.start,this.end),a.raw.charCodeAt(a.raw.length-1)===110&&(a.bigint=a.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(a,"Literal")},pp$5.parseParenExpression=function(){this.expect(types$1.parenL);var l=this.parseExpression();return this.expect(types$1.parenR),l},pp$5.shouldParseArrow=function(l){return!this.canInsertSemicolon()},pp$5.parseParenAndDistinguishExpression=function(l,a){var o=this.start,u=this.startLoc,p,d=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var f=this.start,g=this.startLoc,b=[],O=!0,S=!1,M=new DestructuringErrors,A=this.yieldPos,F=this.awaitPos,$;for(this.yieldPos=0,this.awaitPos=0;this.type!==types$1.parenR;)if(O?O=!1:this.expect(types$1.comma),d&&this.afterTrailingComma(types$1.parenR,!0)){S=!0;break}else if(this.type===types$1.ellipsis){$=this.start,b.push(this.parseParenItem(this.parseRestBinding())),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else b.push(this.parseMaybeAssign(!1,M,this.parseParenItem));var B=this.lastTokEnd,I=this.lastTokEndLoc;if(this.expect(types$1.parenR),l&&this.shouldParseArrow(b)&&this.eat(types$1.arrow))return this.checkPatternErrors(M,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=A,this.awaitPos=F,this.parseParenArrowList(o,u,b,a);(!b.length||S)&&this.unexpected(this.lastTokStart),$&&this.unexpected($),this.checkExpressionErrors(M,!0),this.yieldPos=A||this.yieldPos,this.awaitPos=F||this.awaitPos,b.length>1?(p=this.startNodeAt(f,g),p.expressions=b,this.finishNodeAt(p,"SequenceExpression",B,I)):p=b[0]}else p=this.parseParenExpression();if(this.options.preserveParens){var U=this.startNodeAt(o,u);return U.expression=p,this.finishNode(U,"ParenthesizedExpression")}else return p},pp$5.parseParenItem=function(l){return l},pp$5.parseParenArrowList=function(l,a,o,u){return this.parseArrowExpression(this.startNodeAt(l,a),o,!1,u)};var empty$2=[];pp$5.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var l=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===types$1.dot){var a=this.startNodeAt(l.start,l.loc&&l.loc.start);a.name="new",l.meta=this.finishNode(a,"Identifier"),this.next();var o=this.containsEsc;return l.property=this.parseIdent(!0),l.property.name!=="target"&&this.raiseRecoverable(l.property.start,"The only valid meta property for new is 'new.target'"),o&&this.raiseRecoverable(l.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(l.start,"'new.target' can only be used in functions and class static block"),this.finishNode(l,"MetaProperty")}var u=this.start,p=this.startLoc;return l.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),u,p,!0,!1),this.eat(types$1.parenL)?l.arguments=this.parseExprList(types$1.parenR,this.options.ecmaVersion>=8,!1):l.arguments=empty$2,this.finishNode(l,"NewExpression")},pp$5.parseTemplateElement=function(l){var a=l.isTagged,o=this.startNode();return this.type===types$1.invalidTemplate?(a||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),o.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):o.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),o.tail=this.type===types$1.backQuote,this.finishNode(o,"TemplateElement")},pp$5.parseTemplate=function(l){l===void 0&&(l={});var a=l.isTagged;a===void 0&&(a=!1);var o=this.startNode();this.next(),o.expressions=[];var u=this.parseTemplateElement({isTagged:a});for(o.quasis=[u];!u.tail;)this.type===types$1.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(types$1.dollarBraceL),o.expressions.push(this.parseExpression()),this.expect(types$1.braceR),o.quasis.push(u=this.parseTemplateElement({isTagged:a}));return this.next(),this.finishNode(o,"TemplateLiteral")},pp$5.isAsyncProp=function(l){return!l.computed&&l.key.type==="Identifier"&&l.key.name==="async"&&(this.type===types$1.name||this.type===types$1.num||this.type===types$1.string||this.type===types$1.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===types$1.star)&&!lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},pp$5.parseObj=function(l,a){var o=this.startNode(),u=!0,p={};for(o.properties=[],this.next();!this.eat(types$1.braceR);){if(u)u=!1;else if(this.expect(types$1.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(types$1.braceR))break;var d=this.parseProperty(l,a);l||this.checkPropClash(d,p,a),o.properties.push(d)}return this.finishNode(o,l?"ObjectPattern":"ObjectExpression")},pp$5.parseProperty=function(l,a){var o=this.startNode(),u,p,d,f;if(this.options.ecmaVersion>=9&&this.eat(types$1.ellipsis))return l?(o.argument=this.parseIdent(!1),this.type===types$1.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(o.argument=this.parseMaybeAssign(!1,a),this.type===types$1.comma&&a&&a.trailingComma<0&&(a.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(l||a)&&(d=this.start,f=this.startLoc),l||(u=this.eat(types$1.star)));var g=this.containsEsc;return this.parsePropertyName(o),!l&&!g&&this.options.ecmaVersion>=8&&!u&&this.isAsyncProp(o)?(p=!0,u=this.options.ecmaVersion>=9&&this.eat(types$1.star),this.parsePropertyName(o)):p=!1,this.parsePropertyValue(o,l,u,p,d,f,a,g),this.finishNode(o,"Property")},pp$5.parseGetterSetter=function(l){l.kind=l.key.name,this.parsePropertyName(l),l.value=this.parseMethod(!1);var a=l.kind==="get"?0:1;if(l.value.params.length!==a){var o=l.value.start;l.kind==="get"?this.raiseRecoverable(o,"getter should have no params"):this.raiseRecoverable(o,"setter should have exactly one param")}else l.kind==="set"&&l.value.params[0].type==="RestElement"&&this.raiseRecoverable(l.value.params[0].start,"Setter cannot use rest params")},pp$5.parsePropertyValue=function(l,a,o,u,p,d,f,g){(o||u)&&this.type===types$1.colon&&this.unexpected(),this.eat(types$1.colon)?(l.value=a?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,f),l.kind="init"):this.options.ecmaVersion>=6&&this.type===types$1.parenL?(a&&this.unexpected(),l.kind="init",l.method=!0,l.value=this.parseMethod(o,u)):!a&&!g&&this.options.ecmaVersion>=5&&!l.computed&&l.key.type==="Identifier"&&(l.key.name==="get"||l.key.name==="set")&&this.type!==types$1.comma&&this.type!==types$1.braceR&&this.type!==types$1.eq?((o||u)&&this.unexpected(),this.parseGetterSetter(l)):this.options.ecmaVersion>=6&&!l.computed&&l.key.type==="Identifier"?((o||u)&&this.unexpected(),this.checkUnreserved(l.key),l.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=p),l.kind="init",a?l.value=this.parseMaybeDefault(p,d,this.copyNode(l.key)):this.type===types$1.eq&&f?(f.shorthandAssign<0&&(f.shorthandAssign=this.start),l.value=this.parseMaybeDefault(p,d,this.copyNode(l.key))):l.value=this.copyNode(l.key),l.shorthand=!0):this.unexpected()},pp$5.parsePropertyName=function(l){if(this.options.ecmaVersion>=6){if(this.eat(types$1.bracketL))return l.computed=!0,l.key=this.parseMaybeAssign(),this.expect(types$1.bracketR),l.key;l.computed=!1}return l.key=this.type===types$1.num||this.type===types$1.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},pp$5.initFunction=function(l){l.id=null,this.options.ecmaVersion>=6&&(l.generator=l.expression=!1),this.options.ecmaVersion>=8&&(l.async=!1)},pp$5.parseMethod=function(l,a,o){var u=this.startNode(),p=this.yieldPos,d=this.awaitPos,f=this.awaitIdentPos;return this.initFunction(u),this.options.ecmaVersion>=6&&(u.generator=l),this.options.ecmaVersion>=8&&(u.async=!!a),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(functionFlags(a,u.generator)|SCOPE_SUPER|(o?SCOPE_DIRECT_SUPER:0)),this.expect(types$1.parenL),u.params=this.parseBindingList(types$1.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(u,!1,!0,!1),this.yieldPos=p,this.awaitPos=d,this.awaitIdentPos=f,this.finishNode(u,"FunctionExpression")},pp$5.parseArrowExpression=function(l,a,o,u){var p=this.yieldPos,d=this.awaitPos,f=this.awaitIdentPos;return this.enterScope(functionFlags(o,!1)|SCOPE_ARROW),this.initFunction(l),this.options.ecmaVersion>=8&&(l.async=!!o),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,l.params=this.toAssignableList(a,!0),this.parseFunctionBody(l,!0,!1,u),this.yieldPos=p,this.awaitPos=d,this.awaitIdentPos=f,this.finishNode(l,"ArrowFunctionExpression")},pp$5.parseFunctionBody=function(l,a,o,u){var p=a&&this.type!==types$1.braceL,d=this.strict,f=!1;if(p)l.body=this.parseMaybeAssign(u),l.expression=!0,this.checkParams(l,!1);else{var g=this.options.ecmaVersion>=7&&!this.isSimpleParamList(l.params);(!d||g)&&(f=this.strictDirective(this.end),f&&g&&this.raiseRecoverable(l.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var b=this.labels;this.labels=[],f&&(this.strict=!0),this.checkParams(l,!d&&!f&&!a&&!o&&this.isSimpleParamList(l.params)),this.strict&&l.id&&this.checkLValSimple(l.id,BIND_OUTSIDE),l.body=this.parseBlock(!1,void 0,f&&!d),l.expression=!1,this.adaptDirectivePrologue(l.body.body),this.labels=b}this.exitScope()},pp$5.isSimpleParamList=function(l){for(var a=0,o=l;a<o.length;a+=1){var u=o[a];if(u.type!=="Identifier")return!1}return!0},pp$5.checkParams=function(l,a){for(var o=Object.create(null),u=0,p=l.params;u<p.length;u+=1){var d=p[u];this.checkLValInnerPattern(d,BIND_VAR,a?null:o)}},pp$5.parseExprList=function(l,a,o,u){for(var p=[],d=!0;!this.eat(l);){if(d)d=!1;else if(this.expect(types$1.comma),a&&this.afterTrailingComma(l))break;var f=void 0;o&&this.type===types$1.comma?f=null:this.type===types$1.ellipsis?(f=this.parseSpread(u),u&&this.type===types$1.comma&&u.trailingComma<0&&(u.trailingComma=this.start)):f=this.parseMaybeAssign(!1,u),p.push(f)}return p},pp$5.checkUnreserved=function(l){var a=l.start,o=l.end,u=l.name;if(this.inGenerator&&u==="yield"&&this.raiseRecoverable(a,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&u==="await"&&this.raiseRecoverable(a,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&u==="arguments"&&this.raiseRecoverable(a,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(u==="arguments"||u==="await")&&this.raise(a,"Cannot use "+u+" in class static initialization block"),this.keywords.test(u)&&this.raise(a,"Unexpected keyword '"+u+"'"),!(this.options.ecmaVersion<6&&this.input.slice(a,o).indexOf("\\")!==-1)){var p=this.strict?this.reservedWordsStrict:this.reservedWords;p.test(u)&&(!this.inAsync&&u==="await"&&this.raiseRecoverable(a,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(a,"The keyword '"+u+"' is reserved"))}},pp$5.parseIdent=function(l){var a=this.parseIdentNode();return this.next(!!l),this.finishNode(a,"Identifier"),l||(this.checkUnreserved(a),a.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=a.start)),a},pp$5.parseIdentNode=function(){var l=this.startNode();return this.type===types$1.name?l.name=this.value:this.type.keyword?(l.name=this.type.keyword,(l.name==="class"||l.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=types$1.name):this.unexpected(),l},pp$5.parsePrivateIdent=function(){var l=this.startNode();return this.type===types$1.privateId?l.name=this.value:this.unexpected(),this.next(),this.finishNode(l,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(l.start,"Private field '#"+l.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(l)),l},pp$5.parseYield=function(l){this.yieldPos||(this.yieldPos=this.start);var a=this.startNode();return this.next(),this.type===types$1.semi||this.canInsertSemicolon()||this.type!==types$1.star&&!this.type.startsExpr?(a.delegate=!1,a.argument=null):(a.delegate=this.eat(types$1.star),a.argument=this.parseMaybeAssign(l)),this.finishNode(a,"YieldExpression")},pp$5.parseAwait=function(l){this.awaitPos||(this.awaitPos=this.start);var a=this.startNode();return this.next(),a.argument=this.parseMaybeUnary(null,!0,!1,l),this.finishNode(a,"AwaitExpression")};var pp$4=Parser$1.prototype;pp$4.raise=function(l,a){var o=getLineInfo(this.input,l);a+=" ("+o.line+":"+o.column+")";var u=new SyntaxError(a);throw u.pos=l,u.loc=o,u.raisedAt=this.pos,u},pp$4.raiseRecoverable=pp$4.raise,pp$4.curPosition=function(){if(this.options.locations)return new Position(this.curLine,this.pos-this.lineStart)};var pp$3=Parser$1.prototype,Scope=function(a){this.flags=a,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};pp$3.enterScope=function(l){this.scopeStack.push(new Scope(l))},pp$3.exitScope=function(){this.scopeStack.pop()},pp$3.treatFunctionsAsVarInScope=function(l){return l.flags&SCOPE_FUNCTION||!this.inModule&&l.flags&SCOPE_TOP},pp$3.declareName=function(l,a,o){var u=!1;if(a===BIND_LEXICAL){var p=this.currentScope();u=p.lexical.indexOf(l)>-1||p.functions.indexOf(l)>-1||p.var.indexOf(l)>-1,p.lexical.push(l),this.inModule&&p.flags&SCOPE_TOP&&delete this.undefinedExports[l]}else if(a===BIND_SIMPLE_CATCH){var d=this.currentScope();d.lexical.push(l)}else if(a===BIND_FUNCTION){var f=this.currentScope();this.treatFunctionsAsVar?u=f.lexical.indexOf(l)>-1:u=f.lexical.indexOf(l)>-1||f.var.indexOf(l)>-1,f.functions.push(l)}else for(var g=this.scopeStack.length-1;g>=0;--g){var b=this.scopeStack[g];if(b.lexical.indexOf(l)>-1&&!(b.flags&SCOPE_SIMPLE_CATCH&&b.lexical[0]===l)||!this.treatFunctionsAsVarInScope(b)&&b.functions.indexOf(l)>-1){u=!0;break}if(b.var.push(l),this.inModule&&b.flags&SCOPE_TOP&&delete this.undefinedExports[l],b.flags&SCOPE_VAR)break}u&&this.raiseRecoverable(o,"Identifier '"+l+"' has already been declared")},pp$3.checkLocalExport=function(l){this.scopeStack[0].lexical.indexOf(l.name)===-1&&this.scopeStack[0].var.indexOf(l.name)===-1&&(this.undefinedExports[l.name]=l)},pp$3.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},pp$3.currentVarScope=function(){for(var l=this.scopeStack.length-1;;l--){var a=this.scopeStack[l];if(a.flags&SCOPE_VAR)return a}},pp$3.currentThisScope=function(){for(var l=this.scopeStack.length-1;;l--){var a=this.scopeStack[l];if(a.flags&SCOPE_VAR&&!(a.flags&SCOPE_ARROW))return a}};var Node=function(a,o,u){this.type="",this.start=o,this.end=0,a.options.locations&&(this.loc=new SourceLocation(a,u)),a.options.directSourceFile&&(this.sourceFile=a.options.directSourceFile),a.options.ranges&&(this.range=[o,0])},pp$2=Parser$1.prototype;pp$2.startNode=function(){return new Node(this,this.start,this.startLoc)},pp$2.startNodeAt=function(l,a){return new Node(this,l,a)};function finishNodeAt(l,a,o,u){return l.type=a,l.end=o,this.options.locations&&(l.loc.end=u),this.options.ranges&&(l.range[1]=o),l}pp$2.finishNode=function(l,a){return finishNodeAt.call(this,l,a,this.lastTokEnd,this.lastTokEndLoc)},pp$2.finishNodeAt=function(l,a,o,u){return finishNodeAt.call(this,l,a,o,u)},pp$2.copyNode=function(l){var a=new Node(this,l.start,this.startLoc);for(var o in l)a[o]=l[o];return a};var scriptValuesAddedInUnicode="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",ecma9BinaryProperties="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ecma10BinaryProperties=ecma9BinaryProperties+" Extended_Pictographic",ecma11BinaryProperties=ecma10BinaryProperties,ecma12BinaryProperties=ecma11BinaryProperties+" EBase EComp EMod EPres ExtPict",ecma13BinaryProperties=ecma12BinaryProperties,ecma14BinaryProperties=ecma13BinaryProperties,unicodeBinaryProperties={9:ecma9BinaryProperties,10:ecma10BinaryProperties,11:ecma11BinaryProperties,12:ecma12BinaryProperties,13:ecma13BinaryProperties,14:ecma14BinaryProperties},ecma14BinaryPropertiesOfStrings="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",unicodeBinaryPropertiesOfStrings={9:"",10:"",11:"",12:"",13:"",14:ecma14BinaryPropertiesOfStrings},unicodeGeneralCategoryValues="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ecma9ScriptValues="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ecma10ScriptValues=ecma9ScriptValues+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ecma11ScriptValues=ecma10ScriptValues+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ecma12ScriptValues=ecma11ScriptValues+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ecma13ScriptValues=ecma12ScriptValues+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",ecma14ScriptValues=ecma13ScriptValues+" "+scriptValuesAddedInUnicode,unicodeScriptValues={9:ecma9ScriptValues,10:ecma10ScriptValues,11:ecma11ScriptValues,12:ecma12ScriptValues,13:ecma13ScriptValues,14:ecma14ScriptValues},data={};function buildUnicodeData(l){var a=data[l]={binary:wordsRegexp(unicodeBinaryProperties[l]+" "+unicodeGeneralCategoryValues),binaryOfStrings:wordsRegexp(unicodeBinaryPropertiesOfStrings[l]),nonBinary:{General_Category:wordsRegexp(unicodeGeneralCategoryValues),Script:wordsRegexp(unicodeScriptValues[l])}};a.nonBinary.Script_Extensions=a.nonBinary.Script,a.nonBinary.gc=a.nonBinary.General_Category,a.nonBinary.sc=a.nonBinary.Script,a.nonBinary.scx=a.nonBinary.Script_Extensions}for(var i$1=0,list$1=[9,10,11,12,13,14];i$1<list$1.length;i$1+=1){var ecmaVersion=list$1[i$1];buildUnicodeData(ecmaVersion)}var pp$1=Parser$1.prototype,BranchID=function(a,o){this.parent=a,this.base=o||this};BranchID.prototype.separatedFrom=function(a){for(var o=this;o;o=o.parent)for(var u=a;u;u=u.parent)if(o.base===u.base&&o!==u)return!0;return!1},BranchID.prototype.sibling=function(){return new BranchID(this.parent,this.base)};var RegExpValidationState=function(a){this.parser=a,this.validFlags="gim"+(a.options.ecmaVersion>=6?"uy":"")+(a.options.ecmaVersion>=9?"s":"")+(a.options.ecmaVersion>=13?"d":"")+(a.options.ecmaVersion>=15?"v":""),this.unicodeProperties=data[a.options.ecmaVersion>=14?14:a.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};RegExpValidationState.prototype.reset=function(a,o,u){var p=u.indexOf("v")!==-1,d=u.indexOf("u")!==-1;this.start=a|0,this.source=o+"",this.flags=u,p&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=d&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=d&&this.parser.options.ecmaVersion>=9)},RegExpValidationState.prototype.raise=function(a){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+a)},RegExpValidationState.prototype.at=function(a,o){o===void 0&&(o=!1);var u=this.source,p=u.length;if(a>=p)return-1;var d=u.charCodeAt(a);if(!(o||this.switchU)||d<=55295||d>=57344||a+1>=p)return d;var f=u.charCodeAt(a+1);return f>=56320&&f<=57343?(d<<10)+f-56613888:d},RegExpValidationState.prototype.nextIndex=function(a,o){o===void 0&&(o=!1);var u=this.source,p=u.length;if(a>=p)return p;var d=u.charCodeAt(a),f;return!(o||this.switchU)||d<=55295||d>=57344||a+1>=p||(f=u.charCodeAt(a+1))<56320||f>57343?a+1:a+2},RegExpValidationState.prototype.current=function(a){return a===void 0&&(a=!1),this.at(this.pos,a)},RegExpValidationState.prototype.lookahead=function(a){return a===void 0&&(a=!1),this.at(this.nextIndex(this.pos,a),a)},RegExpValidationState.prototype.advance=function(a){a===void 0&&(a=!1),this.pos=this.nextIndex(this.pos,a)},RegExpValidationState.prototype.eat=function(a,o){return o===void 0&&(o=!1),this.current(o)===a?(this.advance(o),!0):!1},RegExpValidationState.prototype.eatChars=function(a,o){o===void 0&&(o=!1);for(var u=this.pos,p=0,d=a;p<d.length;p+=1){var f=d[p],g=this.at(u,o);if(g===-1||g!==f)return!1;u=this.nextIndex(u,o)}return this.pos=u,!0},pp$1.validateRegExpFlags=function(l){for(var a=l.validFlags,o=l.flags,u=!1,p=!1,d=0;d<o.length;d++){var f=o.charAt(d);a.indexOf(f)===-1&&this.raise(l.start,"Invalid regular expression flag"),o.indexOf(f,d+1)>-1&&this.raise(l.start,"Duplicate regular expression flag"),f==="u"&&(u=!0),f==="v"&&(p=!0)}this.options.ecmaVersion>=15&&u&&p&&this.raise(l.start,"Invalid regular expression flag")};function hasProp(l){for(var a in l)return!0;return!1}pp$1.validateRegExpPattern=function(l){this.regexp_pattern(l),!l.switchN&&this.options.ecmaVersion>=9&&hasProp(l.groupNames)&&(l.switchN=!0,this.regexp_pattern(l))},pp$1.regexp_pattern=function(l){l.pos=0,l.lastIntValue=0,l.lastStringValue="",l.lastAssertionIsQuantifiable=!1,l.numCapturingParens=0,l.maxBackReference=0,l.groupNames=Object.create(null),l.backReferenceNames.length=0,l.branchID=null,this.regexp_disjunction(l),l.pos!==l.source.length&&(l.eat(41)&&l.raise("Unmatched ')'"),(l.eat(93)||l.eat(125))&&l.raise("Lone quantifier brackets")),l.maxBackReference>l.numCapturingParens&&l.raise("Invalid escape");for(var a=0,o=l.backReferenceNames;a<o.length;a+=1){var u=o[a];l.groupNames[u]||l.raise("Invalid named capture referenced")}},pp$1.regexp_disjunction=function(l){var a=this.options.ecmaVersion>=16;for(a&&(l.branchID=new BranchID(l.branchID,null)),this.regexp_alternative(l);l.eat(124);)a&&(l.branchID=l.branchID.sibling()),this.regexp_alternative(l);a&&(l.branchID=l.branchID.parent),this.regexp_eatQuantifier(l,!0)&&l.raise("Nothing to repeat"),l.eat(123)&&l.raise("Lone quantifier brackets")},pp$1.regexp_alternative=function(l){for(;l.pos<l.source.length&&this.regexp_eatTerm(l););},pp$1.regexp_eatTerm=function(l){return this.regexp_eatAssertion(l)?(l.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(l)&&l.switchU&&l.raise("Invalid quantifier"),!0):(l.switchU?this.regexp_eatAtom(l):this.regexp_eatExtendedAtom(l))?(this.regexp_eatQuantifier(l),!0):!1},pp$1.regexp_eatAssertion=function(l){var a=l.pos;if(l.lastAssertionIsQuantifiable=!1,l.eat(94)||l.eat(36))return!0;if(l.eat(92)){if(l.eat(66)||l.eat(98))return!0;l.pos=a}if(l.eat(40)&&l.eat(63)){var o=!1;if(this.options.ecmaVersion>=9&&(o=l.eat(60)),l.eat(61)||l.eat(33))return this.regexp_disjunction(l),l.eat(41)||l.raise("Unterminated group"),l.lastAssertionIsQuantifiable=!o,!0}return l.pos=a,!1},pp$1.regexp_eatQuantifier=function(l,a){return a===void 0&&(a=!1),this.regexp_eatQuantifierPrefix(l,a)?(l.eat(63),!0):!1},pp$1.regexp_eatQuantifierPrefix=function(l,a){return l.eat(42)||l.eat(43)||l.eat(63)||this.regexp_eatBracedQuantifier(l,a)},pp$1.regexp_eatBracedQuantifier=function(l,a){var o=l.pos;if(l.eat(123)){var u=0,p=-1;if(this.regexp_eatDecimalDigits(l)&&(u=l.lastIntValue,l.eat(44)&&this.regexp_eatDecimalDigits(l)&&(p=l.lastIntValue),l.eat(125)))return p!==-1&&p<u&&!a&&l.raise("numbers out of order in {} quantifier"),!0;l.switchU&&!a&&l.raise("Incomplete quantifier"),l.pos=o}return!1},pp$1.regexp_eatAtom=function(l){return this.regexp_eatPatternCharacters(l)||l.eat(46)||this.regexp_eatReverseSolidusAtomEscape(l)||this.regexp_eatCharacterClass(l)||this.regexp_eatUncapturingGroup(l)||this.regexp_eatCapturingGroup(l)},pp$1.regexp_eatReverseSolidusAtomEscape=function(l){var a=l.pos;if(l.eat(92)){if(this.regexp_eatAtomEscape(l))return!0;l.pos=a}return!1},pp$1.regexp_eatUncapturingGroup=function(l){var a=l.pos;if(l.eat(40)){if(l.eat(63)){if(this.options.ecmaVersion>=16){var o=this.regexp_eatModifiers(l),u=l.eat(45);if(o||u){for(var p=0;p<o.length;p++){var d=o.charAt(p);o.indexOf(d,p+1)>-1&&l.raise("Duplicate regular expression modifiers")}if(u){var f=this.regexp_eatModifiers(l);!o&&!f&&l.current()===58&&l.raise("Invalid regular expression modifiers");for(var g=0;g<f.length;g++){var b=f.charAt(g);(f.indexOf(b,g+1)>-1||o.indexOf(b)>-1)&&l.raise("Duplicate regular expression modifiers")}}}}if(l.eat(58)){if(this.regexp_disjunction(l),l.eat(41))return!0;l.raise("Unterminated group")}}l.pos=a}return!1},pp$1.regexp_eatCapturingGroup=function(l){if(l.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(l):l.current()===63&&l.raise("Invalid group"),this.regexp_disjunction(l),l.eat(41))return l.numCapturingParens+=1,!0;l.raise("Unterminated group")}return!1},pp$1.regexp_eatModifiers=function(l){for(var a="",o=0;(o=l.current())!==-1&&isRegularExpressionModifier(o);)a+=codePointToString(o),l.advance();return a};function isRegularExpressionModifier(l){return l===105||l===109||l===115}pp$1.regexp_eatExtendedAtom=function(l){return l.eat(46)||this.regexp_eatReverseSolidusAtomEscape(l)||this.regexp_eatCharacterClass(l)||this.regexp_eatUncapturingGroup(l)||this.regexp_eatCapturingGroup(l)||this.regexp_eatInvalidBracedQuantifier(l)||this.regexp_eatExtendedPatternCharacter(l)},pp$1.regexp_eatInvalidBracedQuantifier=function(l){return this.regexp_eatBracedQuantifier(l,!0)&&l.raise("Nothing to repeat"),!1},pp$1.regexp_eatSyntaxCharacter=function(l){var a=l.current();return isSyntaxCharacter(a)?(l.lastIntValue=a,l.advance(),!0):!1};function isSyntaxCharacter(l){return l===36||l>=40&&l<=43||l===46||l===63||l>=91&&l<=94||l>=123&&l<=125}pp$1.regexp_eatPatternCharacters=function(l){for(var a=l.pos,o=0;(o=l.current())!==-1&&!isSyntaxCharacter(o);)l.advance();return l.pos!==a},pp$1.regexp_eatExtendedPatternCharacter=function(l){var a=l.current();return a!==-1&&a!==36&&!(a>=40&&a<=43)&&a!==46&&a!==63&&a!==91&&a!==94&&a!==124?(l.advance(),!0):!1},pp$1.regexp_groupSpecifier=function(l){if(l.eat(63)){this.regexp_eatGroupName(l)||l.raise("Invalid group");var a=this.options.ecmaVersion>=16,o=l.groupNames[l.lastStringValue];if(o)if(a)for(var u=0,p=o;u<p.length;u+=1){var d=p[u];d.separatedFrom(l.branchID)||l.raise("Duplicate capture group name")}else l.raise("Duplicate capture group name");a?(o||(l.groupNames[l.lastStringValue]=[])).push(l.branchID):l.groupNames[l.lastStringValue]=!0}},pp$1.regexp_eatGroupName=function(l){if(l.lastStringValue="",l.eat(60)){if(this.regexp_eatRegExpIdentifierName(l)&&l.eat(62))return!0;l.raise("Invalid capture group name")}return!1},pp$1.regexp_eatRegExpIdentifierName=function(l){if(l.lastStringValue="",this.regexp_eatRegExpIdentifierStart(l)){for(l.lastStringValue+=codePointToString(l.lastIntValue);this.regexp_eatRegExpIdentifierPart(l);)l.lastStringValue+=codePointToString(l.lastIntValue);return!0}return!1},pp$1.regexp_eatRegExpIdentifierStart=function(l){var a=l.pos,o=this.options.ecmaVersion>=11,u=l.current(o);return l.advance(o),u===92&&this.regexp_eatRegExpUnicodeEscapeSequence(l,o)&&(u=l.lastIntValue),isRegExpIdentifierStart(u)?(l.lastIntValue=u,!0):(l.pos=a,!1)};function isRegExpIdentifierStart(l){return isIdentifierStart(l,!0)||l===36||l===95}pp$1.regexp_eatRegExpIdentifierPart=function(l){var a=l.pos,o=this.options.ecmaVersion>=11,u=l.current(o);return l.advance(o),u===92&&this.regexp_eatRegExpUnicodeEscapeSequence(l,o)&&(u=l.lastIntValue),isRegExpIdentifierPart(u)?(l.lastIntValue=u,!0):(l.pos=a,!1)};function isRegExpIdentifierPart(l){return isIdentifierChar(l,!0)||l===36||l===95||l===8204||l===8205}pp$1.regexp_eatAtomEscape=function(l){return this.regexp_eatBackReference(l)||this.regexp_eatCharacterClassEscape(l)||this.regexp_eatCharacterEscape(l)||l.switchN&&this.regexp_eatKGroupName(l)?!0:(l.switchU&&(l.current()===99&&l.raise("Invalid unicode escape"),l.raise("Invalid escape")),!1)},pp$1.regexp_eatBackReference=function(l){var a=l.pos;if(this.regexp_eatDecimalEscape(l)){var o=l.lastIntValue;if(l.switchU)return o>l.maxBackReference&&(l.maxBackReference=o),!0;if(o<=l.numCapturingParens)return!0;l.pos=a}return!1},pp$1.regexp_eatKGroupName=function(l){if(l.eat(107)){if(this.regexp_eatGroupName(l))return l.backReferenceNames.push(l.lastStringValue),!0;l.raise("Invalid named reference")}return!1},pp$1.regexp_eatCharacterEscape=function(l){return this.regexp_eatControlEscape(l)||this.regexp_eatCControlLetter(l)||this.regexp_eatZero(l)||this.regexp_eatHexEscapeSequence(l)||this.regexp_eatRegExpUnicodeEscapeSequence(l,!1)||!l.switchU&&this.regexp_eatLegacyOctalEscapeSequence(l)||this.regexp_eatIdentityEscape(l)},pp$1.regexp_eatCControlLetter=function(l){var a=l.pos;if(l.eat(99)){if(this.regexp_eatControlLetter(l))return!0;l.pos=a}return!1},pp$1.regexp_eatZero=function(l){return l.current()===48&&!isDecimalDigit(l.lookahead())?(l.lastIntValue=0,l.advance(),!0):!1},pp$1.regexp_eatControlEscape=function(l){var a=l.current();return a===116?(l.lastIntValue=9,l.advance(),!0):a===110?(l.lastIntValue=10,l.advance(),!0):a===118?(l.lastIntValue=11,l.advance(),!0):a===102?(l.lastIntValue=12,l.advance(),!0):a===114?(l.lastIntValue=13,l.advance(),!0):!1},pp$1.regexp_eatControlLetter=function(l){var a=l.current();return isControlLetter(a)?(l.lastIntValue=a%32,l.advance(),!0):!1};function isControlLetter(l){return l>=65&&l<=90||l>=97&&l<=122}pp$1.regexp_eatRegExpUnicodeEscapeSequence=function(l,a){a===void 0&&(a=!1);var o=l.pos,u=a||l.switchU;if(l.eat(117)){if(this.regexp_eatFixedHexDigits(l,4)){var p=l.lastIntValue;if(u&&p>=55296&&p<=56319){var d=l.pos;if(l.eat(92)&&l.eat(117)&&this.regexp_eatFixedHexDigits(l,4)){var f=l.lastIntValue;if(f>=56320&&f<=57343)return l.lastIntValue=(p-55296)*1024+(f-56320)+65536,!0}l.pos=d,l.lastIntValue=p}return!0}if(u&&l.eat(123)&&this.regexp_eatHexDigits(l)&&l.eat(125)&&isValidUnicode(l.lastIntValue))return!0;u&&l.raise("Invalid unicode escape"),l.pos=o}return!1};function isValidUnicode(l){return l>=0&&l<=1114111}pp$1.regexp_eatIdentityEscape=function(l){if(l.switchU)return this.regexp_eatSyntaxCharacter(l)?!0:l.eat(47)?(l.lastIntValue=47,!0):!1;var a=l.current();return a!==99&&(!l.switchN||a!==107)?(l.lastIntValue=a,l.advance(),!0):!1},pp$1.regexp_eatDecimalEscape=function(l){l.lastIntValue=0;var a=l.current();if(a>=49&&a<=57){do l.lastIntValue=10*l.lastIntValue+(a-48),l.advance();while((a=l.current())>=48&&a<=57);return!0}return!1};var CharSetNone=0,CharSetOk=1,CharSetString=2;pp$1.regexp_eatCharacterClassEscape=function(l){var a=l.current();if(isCharacterClassEscape(a))return l.lastIntValue=-1,l.advance(),CharSetOk;var o=!1;if(l.switchU&&this.options.ecmaVersion>=9&&((o=a===80)||a===112)){l.lastIntValue=-1,l.advance();var u;if(l.eat(123)&&(u=this.regexp_eatUnicodePropertyValueExpression(l))&&l.eat(125))return o&&u===CharSetString&&l.raise("Invalid property name"),u;l.raise("Invalid property name")}return CharSetNone};function isCharacterClassEscape(l){return l===100||l===68||l===115||l===83||l===119||l===87}pp$1.regexp_eatUnicodePropertyValueExpression=function(l){var a=l.pos;if(this.regexp_eatUnicodePropertyName(l)&&l.eat(61)){var o=l.lastStringValue;if(this.regexp_eatUnicodePropertyValue(l)){var u=l.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(l,o,u),CharSetOk}}if(l.pos=a,this.regexp_eatLoneUnicodePropertyNameOrValue(l)){var p=l.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(l,p)}return CharSetNone},pp$1.regexp_validateUnicodePropertyNameAndValue=function(l,a,o){hasOwn(l.unicodeProperties.nonBinary,a)||l.raise("Invalid property name"),l.unicodeProperties.nonBinary[a].test(o)||l.raise("Invalid property value")},pp$1.regexp_validateUnicodePropertyNameOrValue=function(l,a){if(l.unicodeProperties.binary.test(a))return CharSetOk;if(l.switchV&&l.unicodeProperties.binaryOfStrings.test(a))return CharSetString;l.raise("Invalid property name")},pp$1.regexp_eatUnicodePropertyName=function(l){var a=0;for(l.lastStringValue="";isUnicodePropertyNameCharacter(a=l.current());)l.lastStringValue+=codePointToString(a),l.advance();return l.lastStringValue!==""};function isUnicodePropertyNameCharacter(l){return isControlLetter(l)||l===95}pp$1.regexp_eatUnicodePropertyValue=function(l){var a=0;for(l.lastStringValue="";isUnicodePropertyValueCharacter(a=l.current());)l.lastStringValue+=codePointToString(a),l.advance();return l.lastStringValue!==""};function isUnicodePropertyValueCharacter(l){return isUnicodePropertyNameCharacter(l)||isDecimalDigit(l)}pp$1.regexp_eatLoneUnicodePropertyNameOrValue=function(l){return this.regexp_eatUnicodePropertyValue(l)},pp$1.regexp_eatCharacterClass=function(l){if(l.eat(91)){var a=l.eat(94),o=this.regexp_classContents(l);return l.eat(93)||l.raise("Unterminated character class"),a&&o===CharSetString&&l.raise("Negated character class may contain strings"),!0}return!1},pp$1.regexp_classContents=function(l){return l.current()===93?CharSetOk:l.switchV?this.regexp_classSetExpression(l):(this.regexp_nonEmptyClassRanges(l),CharSetOk)},pp$1.regexp_nonEmptyClassRanges=function(l){for(;this.regexp_eatClassAtom(l);){var a=l.lastIntValue;if(l.eat(45)&&this.regexp_eatClassAtom(l)){var o=l.lastIntValue;l.switchU&&(a===-1||o===-1)&&l.raise("Invalid character class"),a!==-1&&o!==-1&&a>o&&l.raise("Range out of order in character class")}}},pp$1.regexp_eatClassAtom=function(l){var a=l.pos;if(l.eat(92)){if(this.regexp_eatClassEscape(l))return!0;if(l.switchU){var o=l.current();(o===99||isOctalDigit(o))&&l.raise("Invalid class escape"),l.raise("Invalid escape")}l.pos=a}var u=l.current();return u!==93?(l.lastIntValue=u,l.advance(),!0):!1},pp$1.regexp_eatClassEscape=function(l){var a=l.pos;if(l.eat(98))return l.lastIntValue=8,!0;if(l.switchU&&l.eat(45))return l.lastIntValue=45,!0;if(!l.switchU&&l.eat(99)){if(this.regexp_eatClassControlLetter(l))return!0;l.pos=a}return this.regexp_eatCharacterClassEscape(l)||this.regexp_eatCharacterEscape(l)},pp$1.regexp_classSetExpression=function(l){var a=CharSetOk,o;if(!this.regexp_eatClassSetRange(l))if(o=this.regexp_eatClassSetOperand(l)){o===CharSetString&&(a=CharSetString);for(var u=l.pos;l.eatChars([38,38]);){if(l.current()!==38&&(o=this.regexp_eatClassSetOperand(l))){o!==CharSetString&&(a=CharSetOk);continue}l.raise("Invalid character in character class")}if(u!==l.pos)return a;for(;l.eatChars([45,45]);)this.regexp_eatClassSetOperand(l)||l.raise("Invalid character in character class");if(u!==l.pos)return a}else l.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(l)){if(o=this.regexp_eatClassSetOperand(l),!o)return a;o===CharSetString&&(a=CharSetString)}},pp$1.regexp_eatClassSetRange=function(l){var a=l.pos;if(this.regexp_eatClassSetCharacter(l)){var o=l.lastIntValue;if(l.eat(45)&&this.regexp_eatClassSetCharacter(l)){var u=l.lastIntValue;return o!==-1&&u!==-1&&o>u&&l.raise("Range out of order in character class"),!0}l.pos=a}return!1},pp$1.regexp_eatClassSetOperand=function(l){return this.regexp_eatClassSetCharacter(l)?CharSetOk:this.regexp_eatClassStringDisjunction(l)||this.regexp_eatNestedClass(l)},pp$1.regexp_eatNestedClass=function(l){var a=l.pos;if(l.eat(91)){var o=l.eat(94),u=this.regexp_classContents(l);if(l.eat(93))return o&&u===CharSetString&&l.raise("Negated character class may contain strings"),u;l.pos=a}if(l.eat(92)){var p=this.regexp_eatCharacterClassEscape(l);if(p)return p;l.pos=a}return null},pp$1.regexp_eatClassStringDisjunction=function(l){var a=l.pos;if(l.eatChars([92,113])){if(l.eat(123)){var o=this.regexp_classStringDisjunctionContents(l);if(l.eat(125))return o}else l.raise("Invalid escape");l.pos=a}return null},pp$1.regexp_classStringDisjunctionContents=function(l){for(var a=this.regexp_classString(l);l.eat(124);)this.regexp_classString(l)===CharSetString&&(a=CharSetString);return a},pp$1.regexp_classString=function(l){for(var a=0;this.regexp_eatClassSetCharacter(l);)a++;return a===1?CharSetOk:CharSetString},pp$1.regexp_eatClassSetCharacter=function(l){var a=l.pos;if(l.eat(92))return this.regexp_eatCharacterEscape(l)||this.regexp_eatClassSetReservedPunctuator(l)?!0:l.eat(98)?(l.lastIntValue=8,!0):(l.pos=a,!1);var o=l.current();return o<0||o===l.lookahead()&&isClassSetReservedDoublePunctuatorCharacter(o)||isClassSetSyntaxCharacter(o)?!1:(l.advance(),l.lastIntValue=o,!0)};function isClassSetReservedDoublePunctuatorCharacter(l){return l===33||l>=35&&l<=38||l>=42&&l<=44||l===46||l>=58&&l<=64||l===94||l===96||l===126}function isClassSetSyntaxCharacter(l){return l===40||l===41||l===45||l===47||l>=91&&l<=93||l>=123&&l<=125}pp$1.regexp_eatClassSetReservedPunctuator=function(l){var a=l.current();return isClassSetReservedPunctuator(a)?(l.lastIntValue=a,l.advance(),!0):!1};function isClassSetReservedPunctuator(l){return l===33||l===35||l===37||l===38||l===44||l===45||l>=58&&l<=62||l===64||l===96||l===126}pp$1.regexp_eatClassControlLetter=function(l){var a=l.current();return isDecimalDigit(a)||a===95?(l.lastIntValue=a%32,l.advance(),!0):!1},pp$1.regexp_eatHexEscapeSequence=function(l){var a=l.pos;if(l.eat(120)){if(this.regexp_eatFixedHexDigits(l,2))return!0;l.switchU&&l.raise("Invalid escape"),l.pos=a}return!1},pp$1.regexp_eatDecimalDigits=function(l){var a=l.pos,o=0;for(l.lastIntValue=0;isDecimalDigit(o=l.current());)l.lastIntValue=10*l.lastIntValue+(o-48),l.advance();return l.pos!==a};function isDecimalDigit(l){return l>=48&&l<=57}pp$1.regexp_eatHexDigits=function(l){var a=l.pos,o=0;for(l.lastIntValue=0;isHexDigit(o=l.current());)l.lastIntValue=16*l.lastIntValue+hexToInt(o),l.advance();return l.pos!==a};function isHexDigit(l){return l>=48&&l<=57||l>=65&&l<=70||l>=97&&l<=102}function hexToInt(l){return l>=65&&l<=70?10+(l-65):l>=97&&l<=102?10+(l-97):l-48}pp$1.regexp_eatLegacyOctalEscapeSequence=function(l){if(this.regexp_eatOctalDigit(l)){var a=l.lastIntValue;if(this.regexp_eatOctalDigit(l)){var o=l.lastIntValue;a<=3&&this.regexp_eatOctalDigit(l)?l.lastIntValue=a*64+o*8+l.lastIntValue:l.lastIntValue=a*8+o}else l.lastIntValue=a;return!0}return!1},pp$1.regexp_eatOctalDigit=function(l){var a=l.current();return isOctalDigit(a)?(l.lastIntValue=a-48,l.advance(),!0):(l.lastIntValue=0,!1)};function isOctalDigit(l){return l>=48&&l<=55}pp$1.regexp_eatFixedHexDigits=function(l,a){var o=l.pos;l.lastIntValue=0;for(var u=0;u<a;++u){var p=l.current();if(!isHexDigit(p))return l.pos=o,!1;l.lastIntValue=16*l.lastIntValue+hexToInt(p),l.advance()}return!0};var Token=function(a){this.type=a.type,this.value=a.value,this.start=a.start,this.end=a.end,a.options.locations&&(this.loc=new SourceLocation(a,a.startLoc,a.endLoc)),a.options.ranges&&(this.range=[a.start,a.end])},pp=Parser$1.prototype;pp.next=function(l){!l&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Token(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},pp.getToken=function(){return this.next(),new Token(this)},typeof Symbol<"u"&&(pp[Symbol.iterator]=function(){var l=this;return{next:function(){var a=l.getToken();return{done:a.type===types$1.eof,value:a}}}}),pp.nextToken=function(){var l=this.curContext();if((!l||!l.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(types$1.eof);if(l.override)return l.override(this);this.readToken(this.fullCharCodeAtPos())},pp.readToken=function(l){return isIdentifierStart(l,this.options.ecmaVersion>=6)||l===92?this.readWord():this.getTokenFromCode(l)},pp.fullCharCodeAtPos=function(){var l=this.input.charCodeAt(this.pos);if(l<=55295||l>=56320)return l;var a=this.input.charCodeAt(this.pos+1);return a<=56319||a>=57344?l:(l<<10)+a-56613888},pp.skipBlockComment=function(){var l=this.options.onComment&&this.curPosition(),a=this.pos,o=this.input.indexOf("*/",this.pos+=2);if(o===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=o+2,this.options.locations)for(var u=void 0,p=a;(u=nextLineBreak(this.input,p,this.pos))>-1;)++this.curLine,p=this.lineStart=u;this.options.onComment&&this.options.onComment(!0,this.input.slice(a+2,o),a,this.pos,l,this.curPosition())},pp.skipLineComment=function(l){for(var a=this.pos,o=this.options.onComment&&this.curPosition(),u=this.input.charCodeAt(this.pos+=l);this.pos<this.input.length&&!isNewLine(u);)u=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(a+l,this.pos),a,this.pos,o,this.curPosition())},pp.skipSpace=function(){e:for(;this.pos<this.input.length;){var l=this.input.charCodeAt(this.pos);switch(l){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(l>8&&l<14||l>=5760&&nonASCIIwhitespace.test(String.fromCharCode(l)))++this.pos;else break e}}},pp.finishToken=function(l,a){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var o=this.type;this.type=l,this.value=a,this.updateContext(o)},pp.readToken_dot=function(){var l=this.input.charCodeAt(this.pos+1);if(l>=48&&l<=57)return this.readNumber(!0);var a=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&l===46&&a===46?(this.pos+=3,this.finishToken(types$1.ellipsis)):(++this.pos,this.finishToken(types$1.dot))},pp.readToken_slash=function(){var l=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):l===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.slash,1)},pp.readToken_mult_modulo_exp=function(l){var a=this.input.charCodeAt(this.pos+1),o=1,u=l===42?types$1.star:types$1.modulo;return this.options.ecmaVersion>=7&&l===42&&a===42&&(++o,u=types$1.starstar,a=this.input.charCodeAt(this.pos+2)),a===61?this.finishOp(types$1.assign,o+1):this.finishOp(u,o)},pp.readToken_pipe_amp=function(l){var a=this.input.charCodeAt(this.pos+1);if(a===l){if(this.options.ecmaVersion>=12){var o=this.input.charCodeAt(this.pos+2);if(o===61)return this.finishOp(types$1.assign,3)}return this.finishOp(l===124?types$1.logicalOR:types$1.logicalAND,2)}return a===61?this.finishOp(types$1.assign,2):this.finishOp(l===124?types$1.bitwiseOR:types$1.bitwiseAND,1)},pp.readToken_caret=function(){var l=this.input.charCodeAt(this.pos+1);return l===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.bitwiseXOR,1)},pp.readToken_plus_min=function(l){var a=this.input.charCodeAt(this.pos+1);return a===l?a===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||lineBreak.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(types$1.incDec,2):a===61?this.finishOp(types$1.assign,2):this.finishOp(types$1.plusMin,1)},pp.readToken_lt_gt=function(l){var a=this.input.charCodeAt(this.pos+1),o=1;return a===l?(o=l===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+o)===61?this.finishOp(types$1.assign,o+1):this.finishOp(types$1.bitShift,o)):a===33&&l===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(a===61&&(o=2),this.finishOp(types$1.relational,o))},pp.readToken_eq_excl=function(l){var a=this.input.charCodeAt(this.pos+1);return a===61?this.finishOp(types$1.equality,this.input.charCodeAt(this.pos+2)===61?3:2):l===61&&a===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(types$1.arrow)):this.finishOp(l===61?types$1.eq:types$1.prefix,1)},pp.readToken_question=function(){var l=this.options.ecmaVersion;if(l>=11){var a=this.input.charCodeAt(this.pos+1);if(a===46){var o=this.input.charCodeAt(this.pos+2);if(o<48||o>57)return this.finishOp(types$1.questionDot,2)}if(a===63){if(l>=12){var u=this.input.charCodeAt(this.pos+2);if(u===61)return this.finishOp(types$1.assign,3)}return this.finishOp(types$1.coalesce,2)}}return this.finishOp(types$1.question,1)},pp.readToken_numberSign=function(){var l=this.options.ecmaVersion,a=35;if(l>=13&&(++this.pos,a=this.fullCharCodeAtPos(),isIdentifierStart(a,!0)||a===92))return this.finishToken(types$1.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+codePointToString(a)+"'")},pp.getTokenFromCode=function(l){switch(l){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(types$1.parenL);case 41:return++this.pos,this.finishToken(types$1.parenR);case 59:return++this.pos,this.finishToken(types$1.semi);case 44:return++this.pos,this.finishToken(types$1.comma);case 91:return++this.pos,this.finishToken(types$1.bracketL);case 93:return++this.pos,this.finishToken(types$1.bracketR);case 123:return++this.pos,this.finishToken(types$1.braceL);case 125:return++this.pos,this.finishToken(types$1.braceR);case 58:return++this.pos,this.finishToken(types$1.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(types$1.backQuote);case 48:var a=this.input.charCodeAt(this.pos+1);if(a===120||a===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(a===111||a===79)return this.readRadixNumber(8);if(a===98||a===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(l);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(l);case 124:case 38:return this.readToken_pipe_amp(l);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(l);case 60:case 62:return this.readToken_lt_gt(l);case 61:case 33:return this.readToken_eq_excl(l);case 63:return this.readToken_question();case 126:return this.finishOp(types$1.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+codePointToString(l)+"'")},pp.finishOp=function(l,a){var o=this.input.slice(this.pos,this.pos+a);return this.pos+=a,this.finishToken(l,o)},pp.readRegexp=function(){for(var l,a,o=this.pos;;){this.pos>=this.input.length&&this.raise(o,"Unterminated regular expression");var u=this.input.charAt(this.pos);if(lineBreak.test(u)&&this.raise(o,"Unterminated regular expression"),l)l=!1;else{if(u==="[")a=!0;else if(u==="]"&&a)a=!1;else if(u==="/"&&!a)break;l=u==="\\"}++this.pos}var p=this.input.slice(o,this.pos);++this.pos;var d=this.pos,f=this.readWord1();this.containsEsc&&this.unexpected(d);var g=this.regexpState||(this.regexpState=new RegExpValidationState(this));g.reset(o,p,f),this.validateRegExpFlags(g),this.validateRegExpPattern(g);var b=null;try{b=new RegExp(p,f)}catch{}return this.finishToken(types$1.regexp,{pattern:p,flags:f,value:b})},pp.readInt=function(l,a,o){for(var u=this.options.ecmaVersion>=12&&a===void 0,p=o&&this.input.charCodeAt(this.pos)===48,d=this.pos,f=0,g=0,b=0,O=a??1/0;b<O;++b,++this.pos){var S=this.input.charCodeAt(this.pos),M=void 0;if(u&&S===95){p&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),g===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),b===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),g=S;continue}if(S>=97?M=S-97+10:S>=65?M=S-65+10:S>=48&&S<=57?M=S-48:M=1/0,M>=l)break;g=S,f=f*l+M}return u&&g===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===d||a!=null&&this.pos-d!==a?null:f};function stringToNumber(l,a){return a?parseInt(l,8):parseFloat(l.replace(/_/g,""))}function stringToBigInt(l){return typeof BigInt!="function"?null:BigInt(l.replace(/_/g,""))}pp.readRadixNumber=function(l){var a=this.pos;this.pos+=2;var o=this.readInt(l);return o==null&&this.raise(this.start+2,"Expected number in radix "+l),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(o=stringToBigInt(this.input.slice(a,this.pos)),++this.pos):isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,o)},pp.readNumber=function(l){var a=this.pos;!l&&this.readInt(10,void 0,!0)===null&&this.raise(a,"Invalid number");var o=this.pos-a>=2&&this.input.charCodeAt(a)===48;o&&this.strict&&this.raise(a,"Invalid number");var u=this.input.charCodeAt(this.pos);if(!o&&!l&&this.options.ecmaVersion>=11&&u===110){var p=stringToBigInt(this.input.slice(a,this.pos));return++this.pos,isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(types$1.num,p)}o&&/[89]/.test(this.input.slice(a,this.pos))&&(o=!1),u===46&&!o&&(++this.pos,this.readInt(10),u=this.input.charCodeAt(this.pos)),(u===69||u===101)&&!o&&(u=this.input.charCodeAt(++this.pos),(u===43||u===45)&&++this.pos,this.readInt(10)===null&&this.raise(a,"Invalid number")),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var d=stringToNumber(this.input.slice(a,this.pos),o);return this.finishToken(types$1.num,d)},pp.readCodePoint=function(){var l=this.input.charCodeAt(this.pos),a;if(l===123){this.options.ecmaVersion<6&&this.unexpected();var o=++this.pos;a=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,a>1114111&&this.invalidStringToken(o,"Code point out of bounds")}else a=this.readHexChar(4);return a},pp.readString=function(l){for(var a="",o=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var u=this.input.charCodeAt(this.pos);if(u===l)break;u===92?(a+=this.input.slice(o,this.pos),a+=this.readEscapedChar(!1),o=this.pos):u===8232||u===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(isNewLine(u)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return a+=this.input.slice(o,this.pos++),this.finishToken(types$1.string,a)};var INVALID_TEMPLATE_ESCAPE_ERROR={};pp.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(l){if(l===INVALID_TEMPLATE_ESCAPE_ERROR)this.readInvalidTemplateToken();else throw l}this.inTemplateElement=!1},pp.invalidStringToken=function(l,a){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw INVALID_TEMPLATE_ESCAPE_ERROR;this.raise(l,a)},pp.readTmplToken=function(){for(var l="",a=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var o=this.input.charCodeAt(this.pos);if(o===96||o===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===types$1.template||this.type===types$1.invalidTemplate)?o===36?(this.pos+=2,this.finishToken(types$1.dollarBraceL)):(++this.pos,this.finishToken(types$1.backQuote)):(l+=this.input.slice(a,this.pos),this.finishToken(types$1.template,l));if(o===92)l+=this.input.slice(a,this.pos),l+=this.readEscapedChar(!0),a=this.pos;else if(isNewLine(o)){switch(l+=this.input.slice(a,this.pos),++this.pos,o){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:l+=`
`;break;default:l+=String.fromCharCode(o);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),a=this.pos}else++this.pos}},pp.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(types$1.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},pp.readEscapedChar=function(l){var a=this.input.charCodeAt(++this.pos);switch(++this.pos,a){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),l){var o=this.pos-1;this.invalidStringToken(o,"Invalid escape sequence in template string")}default:if(a>=48&&a<=55){var u=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],p=parseInt(u,8);return p>255&&(u=u.slice(0,-1),p=parseInt(u,8)),this.pos+=u.length-1,a=this.input.charCodeAt(this.pos),(u!=="0"||a===56||a===57)&&(this.strict||l)&&this.invalidStringToken(this.pos-1-u.length,l?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(p)}return isNewLine(a)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(a)}},pp.readHexChar=function(l){var a=this.pos,o=this.readInt(16,l);return o===null&&this.invalidStringToken(a,"Bad character escape sequence"),o},pp.readWord1=function(){this.containsEsc=!1;for(var l="",a=!0,o=this.pos,u=this.options.ecmaVersion>=6;this.pos<this.input.length;){var p=this.fullCharCodeAtPos();if(isIdentifierChar(p,u))this.pos+=p<=65535?1:2;else if(p===92){this.containsEsc=!0,l+=this.input.slice(o,this.pos);var d=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var f=this.readCodePoint();(a?isIdentifierStart:isIdentifierChar)(f,u)||this.invalidStringToken(d,"Invalid Unicode escape"),l+=codePointToString(f),o=this.pos}else break;a=!1}return l+this.input.slice(o,this.pos)},pp.readWord=function(){var l=this.readWord1(),a=types$1.name;return this.keywords.test(l)&&(a=keywords$2[l]),this.finishToken(a,l)};var version$1="8.14.0";Parser$1.acorn={Parser:Parser$1,version:version$1,defaultOptions,Position,SourceLocation,getLineInfo,Node,TokenType,tokTypes:types$1,keywordTypes:keywords$2,TokContext,tokContexts:types$2,isIdentifierChar,isIdentifierStart,Token,isNewLine,lineBreak,lineBreakG,nonASCIIwhitespace};function parse$6(l,a){return Parser$1.parse(l,a)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function getAugmentedNamespace(l){if(l.__esModule)return l;var a=l.default;if(typeof a=="function"){var o=function u(){return this instanceof u?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};o.prototype=a.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(l).forEach(function(u){var p=Object.getOwnPropertyDescriptor(l,u);Object.defineProperty(o,u,p.get?p:{enumerable:!0,get:function(){return l[u]}})}),o}var escodegen$1={},estraverse={},hasRequiredEstraverse;function requireEstraverse(){return hasRequiredEstraverse||(hasRequiredEstraverse=1,function(l){(function a(o){var u,p,d,f,g,b;function O(q){var le={},fe,_e;for(fe in q)q.hasOwnProperty(fe)&&(_e=q[fe],typeof _e=="object"&&_e!==null?le[fe]=O(_e):le[fe]=_e);return le}function S(q,le){var fe,_e,Pe,Oe;for(_e=q.length,Pe=0;_e;)fe=_e>>>1,Oe=Pe+fe,le(q[Oe])?_e=fe:(Pe=Oe+1,_e-=fe+1);return Pe}u={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},d={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},f={},g={},b={},p={Break:f,Skip:g,Remove:b};function M(q,le){this.parent=q,this.key=le}M.prototype.replace=function(le){this.parent[this.key]=le},M.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function A(q,le,fe,_e){this.node=q,this.path=le,this.wrap=fe,this.ref=_e}function F(){}F.prototype.path=function(){var le,fe,_e,Pe,Oe,Fe;function we(ke,Ge){if(Array.isArray(Ge))for(_e=0,Pe=Ge.length;_e<Pe;++_e)ke.push(Ge[_e]);else ke.push(Ge)}if(!this.__current.path)return null;for(Oe=[],le=2,fe=this.__leavelist.length;le<fe;++le)Fe=this.__leavelist[le],we(Oe,Fe.path);return we(Oe,this.__current.path),Oe},F.prototype.type=function(){var q=this.current();return q.type||this.__current.wrap},F.prototype.parents=function(){var le,fe,_e;for(_e=[],le=1,fe=this.__leavelist.length;le<fe;++le)_e.push(this.__leavelist[le].node);return _e},F.prototype.current=function(){return this.__current.node},F.prototype.__execute=function(le,fe){var _e,Pe;return Pe=void 0,_e=this.__current,this.__current=fe,this.__state=null,le&&(Pe=le.call(this,fe.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=_e,Pe},F.prototype.notify=function(le){this.__state=le},F.prototype.skip=function(){this.notify(g)},F.prototype.break=function(){this.notify(f)},F.prototype.remove=function(){this.notify(b)},F.prototype.__initialize=function(q,le){this.visitor=le,this.root=q,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,le.fallback==="iteration"?this.__fallback=Object.keys:typeof le.fallback=="function"&&(this.__fallback=le.fallback),this.__keys=d,le.keys&&(this.__keys=Object.assign(Object.create(this.__keys),le.keys))};function $(q){return q==null?!1:typeof q=="object"&&typeof q.type=="string"}function B(q,le){return(q===u.ObjectExpression||q===u.ObjectPattern)&&le==="properties"}function I(q,le){for(var fe=q.length-1;fe>=0;--fe)if(q[fe].node===le)return!0;return!1}F.prototype.traverse=function(le,fe){var _e,Pe,Oe,Fe,we,ke,Ge,Be,Ze,Ve,Ee,He;for(this.__initialize(le,fe),He={},_e=this.__worklist,Pe=this.__leavelist,_e.push(new A(le,null,null,null)),Pe.push(new A(null,null,null,null));_e.length;){if(Oe=_e.pop(),Oe===He){if(Oe=Pe.pop(),ke=this.__execute(fe.leave,Oe),this.__state===f||ke===f)return;continue}if(Oe.node){if(ke=this.__execute(fe.enter,Oe),this.__state===f||ke===f)return;if(_e.push(He),Pe.push(Oe),this.__state===g||ke===g)continue;if(Fe=Oe.node,we=Fe.type||Oe.wrap,Ve=this.__keys[we],!Ve)if(this.__fallback)Ve=this.__fallback(Fe);else throw new Error("Unknown node type "+we+".");for(Be=Ve.length;(Be-=1)>=0;)if(Ge=Ve[Be],Ee=Fe[Ge],!!Ee){if(Array.isArray(Ee)){for(Ze=Ee.length;(Ze-=1)>=0;)if(Ee[Ze]&&!I(Pe,Ee[Ze])){if(B(we,Ve[Be]))Oe=new A(Ee[Ze],[Ge,Ze],"Property",null);else if($(Ee[Ze]))Oe=new A(Ee[Ze],[Ge,Ze],null,null);else continue;_e.push(Oe)}}else if($(Ee)){if(I(Pe,Ee))continue;_e.push(new A(Ee,Ge,null,null))}}}}},F.prototype.replace=function(le,fe){var _e,Pe,Oe,Fe,we,ke,Ge,Be,Ze,Ve,Ee,He,nt;function ht(Me){var Xe,kt,je,rt;if(Me.ref.remove()){for(kt=Me.ref.key,rt=Me.ref.parent,Xe=_e.length;Xe--;)if(je=_e[Xe],je.ref&&je.ref.parent===rt){if(je.ref.key<kt)break;--je.ref.key}}}for(this.__initialize(le,fe),Ee={},_e=this.__worklist,Pe=this.__leavelist,He={root:le},ke=new A(le,null,null,new M(He,"root")),_e.push(ke),Pe.push(ke);_e.length;){if(ke=_e.pop(),ke===Ee){if(ke=Pe.pop(),we=this.__execute(fe.leave,ke),we!==void 0&&we!==f&&we!==g&&we!==b&&ke.ref.replace(we),(this.__state===b||we===b)&&ht(ke),this.__state===f||we===f)return He.root;continue}if(we=this.__execute(fe.enter,ke),we!==void 0&&we!==f&&we!==g&&we!==b&&(ke.ref.replace(we),ke.node=we),(this.__state===b||we===b)&&(ht(ke),ke.node=null),this.__state===f||we===f)return He.root;if(Oe=ke.node,!!Oe&&(_e.push(Ee),Pe.push(ke),!(this.__state===g||we===g))){if(Fe=Oe.type||ke.wrap,Ze=this.__keys[Fe],!Ze)if(this.__fallback)Ze=this.__fallback(Oe);else throw new Error("Unknown node type "+Fe+".");for(Ge=Ze.length;(Ge-=1)>=0;)if(nt=Ze[Ge],Ve=Oe[nt],!!Ve)if(Array.isArray(Ve)){for(Be=Ve.length;(Be-=1)>=0;)if(Ve[Be]){if(B(Fe,Ze[Ge]))ke=new A(Ve[Be],[nt,Be],"Property",new M(Ve,Be));else if($(Ve[Be]))ke=new A(Ve[Be],[nt,Be],null,new M(Ve,Be));else continue;_e.push(ke)}}else $(Ve)&&_e.push(new A(Ve,nt,null,new M(Oe,nt)))}}return He.root};function U(q,le){var fe=new F;return fe.traverse(q,le)}function te(q,le){var fe=new F;return fe.replace(q,le)}function de(q,le){var fe;return fe=S(le,function(Pe){return Pe.range[0]>q.range[0]}),q.extendedRange=[q.range[0],q.range[1]],fe!==le.length&&(q.extendedRange[1]=le[fe].range[0]),fe-=1,fe>=0&&(q.extendedRange[0]=le[fe].range[1]),q}function se(q,le,fe){var _e=[],Pe,Oe,Fe,we;if(!q.range)throw new Error("attachComments needs range information");if(!fe.length){if(le.length){for(Fe=0,Oe=le.length;Fe<Oe;Fe+=1)Pe=O(le[Fe]),Pe.extendedRange=[0,q.range[0]],_e.push(Pe);q.leadingComments=_e}return q}for(Fe=0,Oe=le.length;Fe<Oe;Fe+=1)_e.push(de(O(le[Fe]),fe));return we=0,U(q,{enter:function(ke){for(var Ge;we<_e.length&&(Ge=_e[we],!(Ge.extendedRange[1]>ke.range[0]));)Ge.extendedRange[1]===ke.range[0]?(ke.leadingComments||(ke.leadingComments=[]),ke.leadingComments.push(Ge),_e.splice(we,1)):we+=1;if(we===_e.length)return p.Break;if(_e[we].extendedRange[0]>ke.range[1])return p.Skip}}),we=0,U(q,{leave:function(ke){for(var Ge;we<_e.length&&(Ge=_e[we],!(ke.range[1]<Ge.extendedRange[0]));)ke.range[1]===Ge.extendedRange[0]?(ke.trailingComments||(ke.trailingComments=[]),ke.trailingComments.push(Ge),_e.splice(we,1)):we+=1;if(we===_e.length)return p.Break;if(_e[we].extendedRange[0]>ke.range[1])return p.Skip}}),q}return o.Syntax=u,o.traverse=U,o.replace=te,o.attachComments=se,o.VisitorKeys=d,o.VisitorOption=p,o.Controller=F,o.cloneEnvironment=function(){return a({})},o})(l)}(estraverse)),estraverse}var utils={},ast={exports:{}},hasRequiredAst;function requireAst(){return hasRequiredAst||(hasRequiredAst=1,function(){function l(f){if(f==null)return!1;switch(f.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function a(f){if(f==null)return!1;switch(f.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function o(f){if(f==null)return!1;switch(f.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function u(f){return o(f)||f!=null&&f.type==="FunctionDeclaration"}function p(f){switch(f.type){case"IfStatement":return f.alternate!=null?f.alternate:f.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return f.body}return null}function d(f){var g;if(f.type!=="IfStatement"||f.alternate==null)return!1;g=f.consequent;do{if(g.type==="IfStatement"&&g.alternate==null)return!0;g=p(g)}while(g);return!1}ast.exports={isExpression:l,isStatement:o,isIterationStatement:a,isSourceElement:u,isProblematicIfStatement:d,trailingStatement:p}}()),ast.exports}var code$1={exports:{}},hasRequiredCode;function requireCode(){return hasRequiredCode||(hasRequiredCode=1,function(){var l,a,o,u,p,d;a={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},l={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function f(I){return 48<=I&&I<=57}function g(I){return 48<=I&&I<=57||97<=I&&I<=102||65<=I&&I<=70}function b(I){return I>=48&&I<=55}o=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function O(I){return I===32||I===9||I===11||I===12||I===160||I>=5760&&o.indexOf(I)>=0}function S(I){return I===10||I===13||I===8232||I===8233}function M(I){if(I<=65535)return String.fromCharCode(I);var U=String.fromCharCode(Math.floor((I-65536)/1024)+55296),te=String.fromCharCode((I-65536)%1024+56320);return U+te}for(u=new Array(128),d=0;d<128;++d)u[d]=d>=97&&d<=122||d>=65&&d<=90||d===36||d===95;for(p=new Array(128),d=0;d<128;++d)p[d]=d>=97&&d<=122||d>=65&&d<=90||d>=48&&d<=57||d===36||d===95;function A(I){return I<128?u[I]:a.NonAsciiIdentifierStart.test(M(I))}function F(I){return I<128?p[I]:a.NonAsciiIdentifierPart.test(M(I))}function $(I){return I<128?u[I]:l.NonAsciiIdentifierStart.test(M(I))}function B(I){return I<128?p[I]:l.NonAsciiIdentifierPart.test(M(I))}code$1.exports={isDecimalDigit:f,isHexDigit:g,isOctalDigit:b,isWhiteSpace:O,isLineTerminator:S,isIdentifierStartES5:A,isIdentifierPartES5:F,isIdentifierStartES6:$,isIdentifierPartES6:B}}()),code$1.exports}var keyword$1={exports:{}},hasRequiredKeyword;function requireKeyword(){return hasRequiredKeyword||(hasRequiredKeyword=1,function(){var l=requireCode();function a(A){switch(A){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function o(A,F){return!F&&A==="yield"?!1:u(A,F)}function u(A,F){if(F&&a(A))return!0;switch(A.length){case 2:return A==="if"||A==="in"||A==="do";case 3:return A==="var"||A==="for"||A==="new"||A==="try";case 4:return A==="this"||A==="else"||A==="case"||A==="void"||A==="with"||A==="enum";case 5:return A==="while"||A==="break"||A==="catch"||A==="throw"||A==="const"||A==="yield"||A==="class"||A==="super";case 6:return A==="return"||A==="typeof"||A==="delete"||A==="switch"||A==="export"||A==="import";case 7:return A==="default"||A==="finally"||A==="extends";case 8:return A==="function"||A==="continue"||A==="debugger";case 10:return A==="instanceof";default:return!1}}function p(A,F){return A==="null"||A==="true"||A==="false"||o(A,F)}function d(A,F){return A==="null"||A==="true"||A==="false"||u(A,F)}function f(A){return A==="eval"||A==="arguments"}function g(A){var F,$,B;if(A.length===0||(B=A.charCodeAt(0),!l.isIdentifierStartES5(B)))return!1;for(F=1,$=A.length;F<$;++F)if(B=A.charCodeAt(F),!l.isIdentifierPartES5(B))return!1;return!0}function b(A,F){return(A-55296)*1024+(F-56320)+65536}function O(A){var F,$,B,I,U;if(A.length===0)return!1;for(U=l.isIdentifierStartES6,F=0,$=A.length;F<$;++F){if(B=A.charCodeAt(F),55296<=B&&B<=56319){if(++F,F>=$||(I=A.charCodeAt(F),!(56320<=I&&I<=57343)))return!1;B=b(B,I)}if(!U(B))return!1;U=l.isIdentifierPartES6}return!0}function S(A,F){return g(A)&&!p(A,F)}function M(A,F){return O(A)&&!d(A,F)}keyword$1.exports={isKeywordES5:o,isKeywordES6:u,isReservedWordES5:p,isReservedWordES6:d,isRestrictedWord:f,isIdentifierNameES5:g,isIdentifierNameES6:O,isIdentifierES5:S,isIdentifierES6:M}}()),keyword$1.exports}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,function(){utils.ast=requireAst(),utils.code=requireCode(),utils.keyword=requireKeyword()}()),utils}var sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return base64.encode=function(a){if(0<=a&&a<l.length)return l[a];throw new TypeError("Must be between 0 and 63: "+a)},base64.decode=function(a){var o=65,u=90,p=97,d=122,f=48,g=57,b=43,O=47,S=26,M=52;return o<=a&&a<=u?a-o:p<=a&&a<=d?a-p+S:f<=a&&a<=g?a-f+M:a==b?62:a==O?63:-1},base64}var hasRequiredBase64Vlq;function requireBase64Vlq(){if(hasRequiredBase64Vlq)return base64Vlq;hasRequiredBase64Vlq=1;var l=requireBase64(),a=5,o=1<<a,u=o-1,p=o;function d(g){return g<0?(-g<<1)+1:(g<<1)+0}function f(g){var b=(g&1)===1,O=g>>1;return b?-O:O}return base64Vlq.encode=function(b){var O="",S,M=d(b);do S=M&u,M>>>=a,M>0&&(S|=p),O+=l.encode(S);while(M>0);return O},base64Vlq.decode=function(b,O,S){var M=b.length,A=0,F=0,$,B;do{if(O>=M)throw new Error("Expected more digits in base 64 VLQ value.");if(B=l.decode(b.charCodeAt(O++)),B===-1)throw new Error("Invalid base64 digit: "+b.charAt(O-1));$=!!(B&p),B&=u,A=A+(B<<F),F+=a}while($);S.value=f(A),S.rest=O},base64Vlq}var util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,function(l){function a(se,q,le){if(q in se)return se[q];if(arguments.length===3)return le;throw new Error('"'+q+'" is a required argument.')}l.getArg=a;var o=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,u=/^data:.+\,.+$/;function p(se){var q=se.match(o);return q?{scheme:q[1],auth:q[2],host:q[3],port:q[4],path:q[5]}:null}l.urlParse=p;function d(se){var q="";return se.scheme&&(q+=se.scheme+":"),q+="//",se.auth&&(q+=se.auth+"@"),se.host&&(q+=se.host),se.port&&(q+=":"+se.port),se.path&&(q+=se.path),q}l.urlGenerate=d;function f(se){var q=se,le=p(se);if(le){if(!le.path)return se;q=le.path}for(var fe=l.isAbsolute(q),_e=q.split(/\/+/),Pe,Oe=0,Fe=_e.length-1;Fe>=0;Fe--)Pe=_e[Fe],Pe==="."?_e.splice(Fe,1):Pe===".."?Oe++:Oe>0&&(Pe===""?(_e.splice(Fe+1,Oe),Oe=0):(_e.splice(Fe,2),Oe--));return q=_e.join("/"),q===""&&(q=fe?"/":"."),le?(le.path=q,d(le)):q}l.normalize=f;function g(se,q){se===""&&(se="."),q===""&&(q=".");var le=p(q),fe=p(se);if(fe&&(se=fe.path||"/"),le&&!le.scheme)return fe&&(le.scheme=fe.scheme),d(le);if(le||q.match(u))return q;if(fe&&!fe.host&&!fe.path)return fe.host=q,d(fe);var _e=q.charAt(0)==="/"?q:f(se.replace(/\/+$/,"")+"/"+q);return fe?(fe.path=_e,d(fe)):_e}l.join=g,l.isAbsolute=function(se){return se.charAt(0)==="/"||o.test(se)};function b(se,q){se===""&&(se="."),se=se.replace(/\/$/,"");for(var le=0;q.indexOf(se+"/")!==0;){var fe=se.lastIndexOf("/");if(fe<0||(se=se.slice(0,fe),se.match(/^([^\/]+:\/)?\/*$/)))return q;++le}return Array(le+1).join("../")+q.substr(se.length+1)}l.relative=b;var O=function(){var se=Object.create(null);return!("__proto__"in se)}();function S(se){return se}function M(se){return F(se)?"$"+se:se}l.toSetString=O?S:M;function A(se){return F(se)?se.slice(1):se}l.fromSetString=O?S:A;function F(se){if(!se)return!1;var q=se.length;if(q<9||se.charCodeAt(q-1)!==95||se.charCodeAt(q-2)!==95||se.charCodeAt(q-3)!==111||se.charCodeAt(q-4)!==116||se.charCodeAt(q-5)!==111||se.charCodeAt(q-6)!==114||se.charCodeAt(q-7)!==112||se.charCodeAt(q-8)!==95||se.charCodeAt(q-9)!==95)return!1;for(var le=q-10;le>=0;le--)if(se.charCodeAt(le)!==36)return!1;return!0}function $(se,q,le){var fe=I(se.source,q.source);return fe!==0||(fe=se.originalLine-q.originalLine,fe!==0)||(fe=se.originalColumn-q.originalColumn,fe!==0||le)||(fe=se.generatedColumn-q.generatedColumn,fe!==0)||(fe=se.generatedLine-q.generatedLine,fe!==0)?fe:I(se.name,q.name)}l.compareByOriginalPositions=$;function B(se,q,le){var fe=se.generatedLine-q.generatedLine;return fe!==0||(fe=se.generatedColumn-q.generatedColumn,fe!==0||le)||(fe=I(se.source,q.source),fe!==0)||(fe=se.originalLine-q.originalLine,fe!==0)||(fe=se.originalColumn-q.originalColumn,fe!==0)?fe:I(se.name,q.name)}l.compareByGeneratedPositionsDeflated=B;function I(se,q){return se===q?0:se===null?1:q===null?-1:se>q?1:-1}function U(se,q){var le=se.generatedLine-q.generatedLine;return le!==0||(le=se.generatedColumn-q.generatedColumn,le!==0)||(le=I(se.source,q.source),le!==0)||(le=se.originalLine-q.originalLine,le!==0)||(le=se.originalColumn-q.originalColumn,le!==0)?le:I(se.name,q.name)}l.compareByGeneratedPositionsInflated=U;function te(se){return JSON.parse(se.replace(/^\)]}'[^\n]*\n/,""))}l.parseSourceMapInput=te;function de(se,q,le){if(q=q||"",se&&(se[se.length-1]!=="/"&&q[0]!=="/"&&(se+="/"),q=se+q),le){var fe=p(le);if(!fe)throw new Error("sourceMapURL could not be parsed");if(fe.path){var _e=fe.path.lastIndexOf("/");_e>=0&&(fe.path=fe.path.substring(0,_e+1))}q=g(d(fe),q)}return f(q)}l.computeSourceURL=de}(util)),util}var arraySet={},hasRequiredArraySet;function requireArraySet(){if(hasRequiredArraySet)return arraySet;hasRequiredArraySet=1;var l=requireUtil(),a=Object.prototype.hasOwnProperty,o=typeof Map<"u";function u(){this._array=[],this._set=o?new Map:Object.create(null)}return u.fromArray=function(d,f){for(var g=new u,b=0,O=d.length;b<O;b++)g.add(d[b],f);return g},u.prototype.size=function(){return o?this._set.size:Object.getOwnPropertyNames(this._set).length},u.prototype.add=function(d,f){var g=o?d:l.toSetString(d),b=o?this.has(d):a.call(this._set,g),O=this._array.length;(!b||f)&&this._array.push(d),b||(o?this._set.set(d,O):this._set[g]=O)},u.prototype.has=function(d){if(o)return this._set.has(d);var f=l.toSetString(d);return a.call(this._set,f)},u.prototype.indexOf=function(d){if(o){var f=this._set.get(d);if(f>=0)return f}else{var g=l.toSetString(d);if(a.call(this._set,g))return this._set[g]}throw new Error('"'+d+'" is not in the set.')},u.prototype.at=function(d){if(d>=0&&d<this._array.length)return this._array[d];throw new Error("No element indexed by "+d)},u.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=u,arraySet}var mappingList={},hasRequiredMappingList;function requireMappingList(){if(hasRequiredMappingList)return mappingList;hasRequiredMappingList=1;var l=requireUtil();function a(u,p){var d=u.generatedLine,f=p.generatedLine,g=u.generatedColumn,b=p.generatedColumn;return f>d||f==d&&b>=g||l.compareByGeneratedPositionsInflated(u,p)<=0}function o(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return o.prototype.unsortedForEach=function(p,d){this._array.forEach(p,d)},o.prototype.add=function(p){a(this._last,p)?(this._last=p,this._array.push(p)):(this._sorted=!1,this._array.push(p))},o.prototype.toArray=function(){return this._sorted||(this._array.sort(l.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=o,mappingList}var hasRequiredSourceMapGenerator;function requireSourceMapGenerator(){if(hasRequiredSourceMapGenerator)return sourceMapGenerator;hasRequiredSourceMapGenerator=1;var l=requireBase64Vlq(),a=requireUtil(),o=requireArraySet().ArraySet,u=requireMappingList().MappingList;function p(d){d||(d={}),this._file=a.getArg(d,"file",null),this._sourceRoot=a.getArg(d,"sourceRoot",null),this._skipValidation=a.getArg(d,"skipValidation",!1),this._sources=new o,this._names=new o,this._mappings=new u,this._sourcesContents=null}return p.prototype._version=3,p.fromSourceMap=function(f){var g=f.sourceRoot,b=new p({file:f.file,sourceRoot:g});return f.eachMapping(function(O){var S={generated:{line:O.generatedLine,column:O.generatedColumn}};O.source!=null&&(S.source=O.source,g!=null&&(S.source=a.relative(g,S.source)),S.original={line:O.originalLine,column:O.originalColumn},O.name!=null&&(S.name=O.name)),b.addMapping(S)}),f.sources.forEach(function(O){var S=O;g!==null&&(S=a.relative(g,O)),b._sources.has(S)||b._sources.add(S);var M=f.sourceContentFor(O);M!=null&&b.setSourceContent(O,M)}),b},p.prototype.addMapping=function(f){var g=a.getArg(f,"generated"),b=a.getArg(f,"original",null),O=a.getArg(f,"source",null),S=a.getArg(f,"name",null);this._skipValidation||this._validateMapping(g,b,O,S),O!=null&&(O=String(O),this._sources.has(O)||this._sources.add(O)),S!=null&&(S=String(S),this._names.has(S)||this._names.add(S)),this._mappings.add({generatedLine:g.line,generatedColumn:g.column,originalLine:b!=null&&b.line,originalColumn:b!=null&&b.column,source:O,name:S})},p.prototype.setSourceContent=function(f,g){var b=f;this._sourceRoot!=null&&(b=a.relative(this._sourceRoot,b)),g!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[a.toSetString(b)]=g):this._sourcesContents&&(delete this._sourcesContents[a.toSetString(b)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},p.prototype.applySourceMap=function(f,g,b){var O=g;if(g==null){if(f.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);O=f.file}var S=this._sourceRoot;S!=null&&(O=a.relative(S,O));var M=new o,A=new o;this._mappings.unsortedForEach(function(F){if(F.source===O&&F.originalLine!=null){var $=f.originalPositionFor({line:F.originalLine,column:F.originalColumn});$.source!=null&&(F.source=$.source,b!=null&&(F.source=a.join(b,F.source)),S!=null&&(F.source=a.relative(S,F.source)),F.originalLine=$.line,F.originalColumn=$.column,$.name!=null&&(F.name=$.name))}var B=F.source;B!=null&&!M.has(B)&&M.add(B);var I=F.name;I!=null&&!A.has(I)&&A.add(I)},this),this._sources=M,this._names=A,f.sources.forEach(function(F){var $=f.sourceContentFor(F);$!=null&&(b!=null&&(F=a.join(b,F)),S!=null&&(F=a.relative(S,F)),this.setSourceContent(F,$))},this)},p.prototype._validateMapping=function(f,g,b,O){if(g&&typeof g.line!="number"&&typeof g.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(f&&"line"in f&&"column"in f&&f.line>0&&f.column>=0&&!g&&!b&&!O)){if(f&&"line"in f&&"column"in f&&g&&"line"in g&&"column"in g&&f.line>0&&f.column>=0&&g.line>0&&g.column>=0&&b)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:f,source:b,original:g,name:O}))}},p.prototype._serializeMappings=function(){for(var f=0,g=1,b=0,O=0,S=0,M=0,A="",F,$,B,I,U=this._mappings.toArray(),te=0,de=U.length;te<de;te++){if($=U[te],F="",$.generatedLine!==g)for(f=0;$.generatedLine!==g;)F+=";",g++;else if(te>0){if(!a.compareByGeneratedPositionsInflated($,U[te-1]))continue;F+=","}F+=l.encode($.generatedColumn-f),f=$.generatedColumn,$.source!=null&&(I=this._sources.indexOf($.source),F+=l.encode(I-M),M=I,F+=l.encode($.originalLine-1-O),O=$.originalLine-1,F+=l.encode($.originalColumn-b),b=$.originalColumn,$.name!=null&&(B=this._names.indexOf($.name),F+=l.encode(B-S),S=B)),A+=F}return A},p.prototype._generateSourcesContent=function(f,g){return f.map(function(b){if(!this._sourcesContents)return null;g!=null&&(b=a.relative(g,b));var O=a.toSetString(b);return Object.prototype.hasOwnProperty.call(this._sourcesContents,O)?this._sourcesContents[O]:null},this)},p.prototype.toJSON=function(){var f={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(f.file=this._file),this._sourceRoot!=null&&(f.sourceRoot=this._sourceRoot),this._sourcesContents&&(f.sourcesContent=this._generateSourcesContent(f.sources,f.sourceRoot)),f},p.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=p,sourceMapGenerator}var sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch;function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,function(l){l.GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2;function a(o,u,p,d,f,g){var b=Math.floor((u-o)/2)+o,O=f(p,d[b],!0);return O===0?b:O>0?u-b>1?a(b,u,p,d,f,g):g==l.LEAST_UPPER_BOUND?u<d.length?u:-1:b:b-o>1?a(o,b,p,d,f,g):g==l.LEAST_UPPER_BOUND?b:o<0?-1:o}l.search=function(u,p,d,f){if(p.length===0)return-1;var g=a(-1,p.length,u,p,d,f||l.GREATEST_LOWER_BOUND);if(g<0)return-1;for(;g-1>=0&&d(p[g],p[g-1],!0)===0;)--g;return g}}(binarySearch)),binarySearch}var quickSort={},hasRequiredQuickSort;function requireQuickSort(){if(hasRequiredQuickSort)return quickSort;hasRequiredQuickSort=1;function l(u,p,d){var f=u[p];u[p]=u[d],u[d]=f}function a(u,p){return Math.round(u+Math.random()*(p-u))}function o(u,p,d,f){if(d<f){var g=a(d,f),b=d-1;l(u,g,f);for(var O=u[f],S=d;S<f;S++)p(u[S],O)<=0&&(b+=1,l(u,b,S));l(u,b+1,S);var M=b+1;o(u,p,d,M-1),o(u,p,M+1,f)}}return quickSort.quickSort=function(u,p){o(u,p,0,u.length-1)},quickSort}var hasRequiredSourceMapConsumer;function requireSourceMapConsumer(){if(hasRequiredSourceMapConsumer)return sourceMapConsumer;hasRequiredSourceMapConsumer=1;var l=requireUtil(),a=requireBinarySearch(),o=requireArraySet().ArraySet,u=requireBase64Vlq(),p=requireQuickSort().quickSort;function d(O,S){var M=O;return typeof O=="string"&&(M=l.parseSourceMapInput(O)),M.sections!=null?new b(M,S):new f(M,S)}d.fromSourceMap=function(O,S){return f.fromSourceMap(O,S)},d.prototype._version=3,d.prototype.__generatedMappings=null,Object.defineProperty(d.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),d.prototype.__originalMappings=null,Object.defineProperty(d.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),d.prototype._charIsMappingSeparator=function(S,M){var A=S.charAt(M);return A===";"||A===","},d.prototype._parseMappings=function(S,M){throw new Error("Subclasses must implement _parseMappings")},d.GENERATED_ORDER=1,d.ORIGINAL_ORDER=2,d.GREATEST_LOWER_BOUND=1,d.LEAST_UPPER_BOUND=2,d.prototype.eachMapping=function(S,M,A){var F=M||null,$=A||d.GENERATED_ORDER,B;switch($){case d.GENERATED_ORDER:B=this._generatedMappings;break;case d.ORIGINAL_ORDER:B=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var I=this.sourceRoot;B.map(function(U){var te=U.source===null?null:this._sources.at(U.source);return te=l.computeSourceURL(I,te,this._sourceMapURL),{source:te,generatedLine:U.generatedLine,generatedColumn:U.generatedColumn,originalLine:U.originalLine,originalColumn:U.originalColumn,name:U.name===null?null:this._names.at(U.name)}},this).forEach(S,F)},d.prototype.allGeneratedPositionsFor=function(S){var M=l.getArg(S,"line"),A={source:l.getArg(S,"source"),originalLine:M,originalColumn:l.getArg(S,"column",0)};if(A.source=this._findSourceIndex(A.source),A.source<0)return[];var F=[],$=this._findMapping(A,this._originalMappings,"originalLine","originalColumn",l.compareByOriginalPositions,a.LEAST_UPPER_BOUND);if($>=0){var B=this._originalMappings[$];if(S.column===void 0)for(var I=B.originalLine;B&&B.originalLine===I;)F.push({line:l.getArg(B,"generatedLine",null),column:l.getArg(B,"generatedColumn",null),lastColumn:l.getArg(B,"lastGeneratedColumn",null)}),B=this._originalMappings[++$];else for(var U=B.originalColumn;B&&B.originalLine===M&&B.originalColumn==U;)F.push({line:l.getArg(B,"generatedLine",null),column:l.getArg(B,"generatedColumn",null),lastColumn:l.getArg(B,"lastGeneratedColumn",null)}),B=this._originalMappings[++$]}return F},sourceMapConsumer.SourceMapConsumer=d;function f(O,S){var M=O;typeof O=="string"&&(M=l.parseSourceMapInput(O));var A=l.getArg(M,"version"),F=l.getArg(M,"sources"),$=l.getArg(M,"names",[]),B=l.getArg(M,"sourceRoot",null),I=l.getArg(M,"sourcesContent",null),U=l.getArg(M,"mappings"),te=l.getArg(M,"file",null);if(A!=this._version)throw new Error("Unsupported version: "+A);B&&(B=l.normalize(B)),F=F.map(String).map(l.normalize).map(function(de){return B&&l.isAbsolute(B)&&l.isAbsolute(de)?l.relative(B,de):de}),this._names=o.fromArray($.map(String),!0),this._sources=o.fromArray(F,!0),this._absoluteSources=this._sources.toArray().map(function(de){return l.computeSourceURL(B,de,S)}),this.sourceRoot=B,this.sourcesContent=I,this._mappings=U,this._sourceMapURL=S,this.file=te}f.prototype=Object.create(d.prototype),f.prototype.consumer=d,f.prototype._findSourceIndex=function(O){var S=O;if(this.sourceRoot!=null&&(S=l.relative(this.sourceRoot,S)),this._sources.has(S))return this._sources.indexOf(S);var M;for(M=0;M<this._absoluteSources.length;++M)if(this._absoluteSources[M]==O)return M;return-1},f.fromSourceMap=function(S,M){var A=Object.create(f.prototype),F=A._names=o.fromArray(S._names.toArray(),!0),$=A._sources=o.fromArray(S._sources.toArray(),!0);A.sourceRoot=S._sourceRoot,A.sourcesContent=S._generateSourcesContent(A._sources.toArray(),A.sourceRoot),A.file=S._file,A._sourceMapURL=M,A._absoluteSources=A._sources.toArray().map(function(le){return l.computeSourceURL(A.sourceRoot,le,M)});for(var B=S._mappings.toArray().slice(),I=A.__generatedMappings=[],U=A.__originalMappings=[],te=0,de=B.length;te<de;te++){var se=B[te],q=new g;q.generatedLine=se.generatedLine,q.generatedColumn=se.generatedColumn,se.source&&(q.source=$.indexOf(se.source),q.originalLine=se.originalLine,q.originalColumn=se.originalColumn,se.name&&(q.name=F.indexOf(se.name)),U.push(q)),I.push(q)}return p(A.__originalMappings,l.compareByOriginalPositions),A},f.prototype._version=3,Object.defineProperty(f.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function g(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}f.prototype._parseMappings=function(S,M){for(var A=1,F=0,$=0,B=0,I=0,U=0,te=S.length,de=0,se={},q={},le=[],fe=[],_e,Pe,Oe,Fe,we;de<te;)if(S.charAt(de)===";")A++,de++,F=0;else if(S.charAt(de)===",")de++;else{for(_e=new g,_e.generatedLine=A,Fe=de;Fe<te&&!this._charIsMappingSeparator(S,Fe);Fe++);if(Pe=S.slice(de,Fe),Oe=se[Pe],Oe)de+=Pe.length;else{for(Oe=[];de<Fe;)u.decode(S,de,q),we=q.value,de=q.rest,Oe.push(we);if(Oe.length===2)throw new Error("Found a source, but no line and column");if(Oe.length===3)throw new Error("Found a source and line, but no column");se[Pe]=Oe}_e.generatedColumn=F+Oe[0],F=_e.generatedColumn,Oe.length>1&&(_e.source=I+Oe[1],I+=Oe[1],_e.originalLine=$+Oe[2],$=_e.originalLine,_e.originalLine+=1,_e.originalColumn=B+Oe[3],B=_e.originalColumn,Oe.length>4&&(_e.name=U+Oe[4],U+=Oe[4])),fe.push(_e),typeof _e.originalLine=="number"&&le.push(_e)}p(fe,l.compareByGeneratedPositionsDeflated),this.__generatedMappings=fe,p(le,l.compareByOriginalPositions),this.__originalMappings=le},f.prototype._findMapping=function(S,M,A,F,$,B){if(S[A]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+S[A]);if(S[F]<0)throw new TypeError("Column must be greater than or equal to 0, got "+S[F]);return a.search(S,M,$,B)},f.prototype.computeColumnSpans=function(){for(var S=0;S<this._generatedMappings.length;++S){var M=this._generatedMappings[S];if(S+1<this._generatedMappings.length){var A=this._generatedMappings[S+1];if(M.generatedLine===A.generatedLine){M.lastGeneratedColumn=A.generatedColumn-1;continue}}M.lastGeneratedColumn=1/0}},f.prototype.originalPositionFor=function(S){var M={generatedLine:l.getArg(S,"line"),generatedColumn:l.getArg(S,"column")},A=this._findMapping(M,this._generatedMappings,"generatedLine","generatedColumn",l.compareByGeneratedPositionsDeflated,l.getArg(S,"bias",d.GREATEST_LOWER_BOUND));if(A>=0){var F=this._generatedMappings[A];if(F.generatedLine===M.generatedLine){var $=l.getArg(F,"source",null);$!==null&&($=this._sources.at($),$=l.computeSourceURL(this.sourceRoot,$,this._sourceMapURL));var B=l.getArg(F,"name",null);return B!==null&&(B=this._names.at(B)),{source:$,line:l.getArg(F,"originalLine",null),column:l.getArg(F,"originalColumn",null),name:B}}}return{source:null,line:null,column:null,name:null}},f.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(S){return S==null}):!1},f.prototype.sourceContentFor=function(S,M){if(!this.sourcesContent)return null;var A=this._findSourceIndex(S);if(A>=0)return this.sourcesContent[A];var F=S;this.sourceRoot!=null&&(F=l.relative(this.sourceRoot,F));var $;if(this.sourceRoot!=null&&($=l.urlParse(this.sourceRoot))){var B=F.replace(/^file:\/\//,"");if($.scheme=="file"&&this._sources.has(B))return this.sourcesContent[this._sources.indexOf(B)];if((!$.path||$.path=="/")&&this._sources.has("/"+F))return this.sourcesContent[this._sources.indexOf("/"+F)]}if(M)return null;throw new Error('"'+F+'" is not in the SourceMap.')},f.prototype.generatedPositionFor=function(S){var M=l.getArg(S,"source");if(M=this._findSourceIndex(M),M<0)return{line:null,column:null,lastColumn:null};var A={source:M,originalLine:l.getArg(S,"line"),originalColumn:l.getArg(S,"column")},F=this._findMapping(A,this._originalMappings,"originalLine","originalColumn",l.compareByOriginalPositions,l.getArg(S,"bias",d.GREATEST_LOWER_BOUND));if(F>=0){var $=this._originalMappings[F];if($.source===A.source)return{line:l.getArg($,"generatedLine",null),column:l.getArg($,"generatedColumn",null),lastColumn:l.getArg($,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=f;function b(O,S){var M=O;typeof O=="string"&&(M=l.parseSourceMapInput(O));var A=l.getArg(M,"version"),F=l.getArg(M,"sections");if(A!=this._version)throw new Error("Unsupported version: "+A);this._sources=new o,this._names=new o;var $={line:-1,column:0};this._sections=F.map(function(B){if(B.url)throw new Error("Support for url field in sections not implemented.");var I=l.getArg(B,"offset"),U=l.getArg(I,"line"),te=l.getArg(I,"column");if(U<$.line||U===$.line&&te<$.column)throw new Error("Section offsets must be ordered and non-overlapping.");return $=I,{generatedOffset:{generatedLine:U+1,generatedColumn:te+1},consumer:new d(l.getArg(B,"map"),S)}})}return b.prototype=Object.create(d.prototype),b.prototype.constructor=d,b.prototype._version=3,Object.defineProperty(b.prototype,"sources",{get:function(){for(var O=[],S=0;S<this._sections.length;S++)for(var M=0;M<this._sections[S].consumer.sources.length;M++)O.push(this._sections[S].consumer.sources[M]);return O}}),b.prototype.originalPositionFor=function(S){var M={generatedLine:l.getArg(S,"line"),generatedColumn:l.getArg(S,"column")},A=a.search(M,this._sections,function($,B){var I=$.generatedLine-B.generatedOffset.generatedLine;return I||$.generatedColumn-B.generatedOffset.generatedColumn}),F=this._sections[A];return F?F.consumer.originalPositionFor({line:M.generatedLine-(F.generatedOffset.generatedLine-1),column:M.generatedColumn-(F.generatedOffset.generatedLine===M.generatedLine?F.generatedOffset.generatedColumn-1:0),bias:S.bias}):{source:null,line:null,column:null,name:null}},b.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(S){return S.consumer.hasContentsOfAllSources()})},b.prototype.sourceContentFor=function(S,M){for(var A=0;A<this._sections.length;A++){var F=this._sections[A],$=F.consumer.sourceContentFor(S,!0);if($)return $}if(M)return null;throw new Error('"'+S+'" is not in the SourceMap.')},b.prototype.generatedPositionFor=function(S){for(var M=0;M<this._sections.length;M++){var A=this._sections[M];if(A.consumer._findSourceIndex(l.getArg(S,"source"))!==-1){var F=A.consumer.generatedPositionFor(S);if(F){var $={line:F.line+(A.generatedOffset.generatedLine-1),column:F.column+(A.generatedOffset.generatedLine===F.line?A.generatedOffset.generatedColumn-1:0)};return $}}}return{line:null,column:null}},b.prototype._parseMappings=function(S,M){this.__generatedMappings=[],this.__originalMappings=[];for(var A=0;A<this._sections.length;A++)for(var F=this._sections[A],$=F.consumer._generatedMappings,B=0;B<$.length;B++){var I=$[B],U=F.consumer._sources.at(I.source);U=l.computeSourceURL(F.consumer.sourceRoot,U,this._sourceMapURL),this._sources.add(U),U=this._sources.indexOf(U);var te=null;I.name&&(te=F.consumer._names.at(I.name),this._names.add(te),te=this._names.indexOf(te));var de={source:U,generatedLine:I.generatedLine+(F.generatedOffset.generatedLine-1),generatedColumn:I.generatedColumn+(F.generatedOffset.generatedLine===I.generatedLine?F.generatedOffset.generatedColumn-1:0),originalLine:I.originalLine,originalColumn:I.originalColumn,name:te};this.__generatedMappings.push(de),typeof de.originalLine=="number"&&this.__originalMappings.push(de)}p(this.__generatedMappings,l.compareByGeneratedPositionsDeflated),p(this.__originalMappings,l.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=b,sourceMapConsumer}var sourceNode={},hasRequiredSourceNode;function requireSourceNode(){if(hasRequiredSourceNode)return sourceNode;hasRequiredSourceNode=1;var l=requireSourceMapGenerator().SourceMapGenerator,a=requireUtil(),o=/(\r?\n)/,u=10,p="$$$isSourceNode$$$";function d(f,g,b,O,S){this.children=[],this.sourceContents={},this.line=f??null,this.column=g??null,this.source=b??null,this.name=S??null,this[p]=!0,O!=null&&this.add(O)}return d.fromStringWithSourceMap=function(g,b,O){var S=new d,M=g.split(o),A=0,F=function(){var te=se(),de=se()||"";return te+de;function se(){return A<M.length?M[A++]:void 0}},$=1,B=0,I=null;return b.eachMapping(function(te){if(I!==null)if($<te.generatedLine)U(I,F()),$++,B=0;else{var de=M[A]||"",se=de.substr(0,te.generatedColumn-B);M[A]=de.substr(te.generatedColumn-B),B=te.generatedColumn,U(I,se),I=te;return}for(;$<te.generatedLine;)S.add(F()),$++;if(B<te.generatedColumn){var de=M[A]||"";S.add(de.substr(0,te.generatedColumn)),M[A]=de.substr(te.generatedColumn),B=te.generatedColumn}I=te},this),A<M.length&&(I&&U(I,F()),S.add(M.splice(A).join(""))),b.sources.forEach(function(te){var de=b.sourceContentFor(te);de!=null&&(O!=null&&(te=a.join(O,te)),S.setSourceContent(te,de))}),S;function U(te,de){if(te===null||te.source===void 0)S.add(de);else{var se=O?a.join(O,te.source):te.source;S.add(new d(te.originalLine,te.originalColumn,se,de,te.name))}}},d.prototype.add=function(g){if(Array.isArray(g))g.forEach(function(b){this.add(b)},this);else if(g[p]||typeof g=="string")g&&this.children.push(g);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+g);return this},d.prototype.prepend=function(g){if(Array.isArray(g))for(var b=g.length-1;b>=0;b--)this.prepend(g[b]);else if(g[p]||typeof g=="string")this.children.unshift(g);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+g);return this},d.prototype.walk=function(g){for(var b,O=0,S=this.children.length;O<S;O++)b=this.children[O],b[p]?b.walk(g):b!==""&&g(b,{source:this.source,line:this.line,column:this.column,name:this.name})},d.prototype.join=function(g){var b,O,S=this.children.length;if(S>0){for(b=[],O=0;O<S-1;O++)b.push(this.children[O]),b.push(g);b.push(this.children[O]),this.children=b}return this},d.prototype.replaceRight=function(g,b){var O=this.children[this.children.length-1];return O[p]?O.replaceRight(g,b):typeof O=="string"?this.children[this.children.length-1]=O.replace(g,b):this.children.push("".replace(g,b)),this},d.prototype.setSourceContent=function(g,b){this.sourceContents[a.toSetString(g)]=b},d.prototype.walkSourceContents=function(g){for(var b=0,O=this.children.length;b<O;b++)this.children[b][p]&&this.children[b].walkSourceContents(g);for(var S=Object.keys(this.sourceContents),b=0,O=S.length;b<O;b++)g(a.fromSetString(S[b]),this.sourceContents[S[b]])},d.prototype.toString=function(){var g="";return this.walk(function(b){g+=b}),g},d.prototype.toStringWithSourceMap=function(g){var b={code:"",line:1,column:0},O=new l(g),S=!1,M=null,A=null,F=null,$=null;return this.walk(function(B,I){b.code+=B,I.source!==null&&I.line!==null&&I.column!==null?((M!==I.source||A!==I.line||F!==I.column||$!==I.name)&&O.addMapping({source:I.source,original:{line:I.line,column:I.column},generated:{line:b.line,column:b.column},name:I.name}),M=I.source,A=I.line,F=I.column,$=I.name,S=!0):S&&(O.addMapping({generated:{line:b.line,column:b.column}}),M=null,S=!1);for(var U=0,te=B.length;U<te;U++)B.charCodeAt(U)===u?(b.line++,b.column=0,U+1===te?(M=null,S=!1):S&&O.addMapping({source:I.source,original:{line:I.line,column:I.column},generated:{line:b.line,column:b.column},name:I.name})):b.column++}),this.walkSourceContents(function(B,I){O.setSourceContent(B,I)}),{code:b.code,map:O}},sourceNode.SourceNode=d,sourceNode}var hasRequiredSourceMap;function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}const name$3="escodegen",description="ECMAScript code generator",homepage="http://github.com/estools/escodegen",main="escodegen.js",bin={esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files=["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version="2.1.0",engines={node:">=6.0"},maintainers=[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository={type:"git",url:"http://github.com/estools/escodegen.git"},dependencies={estraverse:"^5.2.0",esutils:"^2.0.2",esprima:"^4.0.1"},optionalDependencies={"source-map":"~0.6.1"},devDependencies={acorn:"^8.0.4",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^4.2.0","chai-exclude":"^2.0.2","commonjs-everywhere":"^0.9.7",gulp:"^4.0.2","gulp-eslint":"^6.0.0","gulp-mocha":"^7.0.2",minimist:"^1.2.5",optionator:"^0.9.1",semver:"^7.3.4"},license="BSD-2-Clause",scripts={test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"},require$$3={name:name$3,description,homepage,main,bin,files,version,engines,maintainers,repository,dependencies,optionalDependencies,devDependencies,license,scripts};var hasRequiredEscodegen;function requireEscodegen(){return hasRequiredEscodegen||(hasRequiredEscodegen=1,function(l){(function(){var a,o,u,p,d,f,g,b,O,S,M,A,F,$,B,I,U,te,de,se,q,le,fe,_e,Pe,Oe;d=requireEstraverse(),f=requireUtils(),a=d.Syntax;function Fe(N){return Ke.Expression.hasOwnProperty(N.type)}function we(N){return Ke.Statement.hasOwnProperty(N.type)}o={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},u={"??":o.Coalesce,"||":o.LogicalOR,"&&":o.LogicalAND,"|":o.BitwiseOR,"^":o.BitwiseXOR,"&":o.BitwiseAND,"==":o.Equality,"!=":o.Equality,"===":o.Equality,"!==":o.Equality,is:o.Equality,isnt:o.Equality,"<":o.Relational,">":o.Relational,"<=":o.Relational,">=":o.Relational,in:o.Relational,instanceof:o.Relational,"<<":o.BitwiseSHIFT,">>":o.BitwiseSHIFT,">>>":o.BitwiseSHIFT,"+":o.Additive,"-":o.Additive,"*":o.Multiplicative,"%":o.Multiplicative,"/":o.Multiplicative,"**":o.Exponentiation};var ke=1,Ge=2,Be=4,Ze=8,Ve=16,Ee=32,He=64,nt=Ge|Be,ht=ke|Ge,Me=ke|Ge|Be,Xe=ke,kt=Be,je=ke|Be,rt=ke,ft=ke|Ee,pt=0,Rt=ke|Ve,Bt=ke|Ze;function Wt(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Pt(N,K){var z="";for(K|=0;K>0;K>>>=1,N+=N)K&1&&(z+=N);return z}function hn(N){return/[\r\n]/g.test(N)}function Et(N){var K=N.length;return K&&f.code.isLineTerminator(N.charCodeAt(K-1))}function Mt(N,K){var z;for(z in K)K.hasOwnProperty(z)&&(N[z]=K[z]);return N}function sn(N,K){var z,ee;function pe(Ae){return typeof Ae=="object"&&Ae instanceof Object&&!(Ae instanceof RegExp)}for(z in K)K.hasOwnProperty(z)&&(ee=K[z],pe(ee)?pe(N[z])?sn(N[z],ee):N[z]=sn({},ee):N[z]=ee);return N}function Lt(N){var K,z,ee,pe,Ae;if(N!==N)throw new Error("Numeric literal whose value is NaN");if(N<0||N===0&&1/N<0)throw new Error("Numeric literal whose value is negative");if(N===1/0)return O?"null":S?"1e400":"1e+400";if(K=""+N,!S||K.length<3)return K;for(z=K.indexOf("."),!O&&K.charCodeAt(0)===48&&z===1&&(z=0,K=K.slice(1)),ee=K,K=K.replace("e+","e"),pe=0,(Ae=ee.indexOf("e"))>0&&(pe=+ee.slice(Ae+1),ee=ee.slice(0,Ae)),z>=0&&(pe-=ee.length-z-1,ee=+(ee.slice(0,z)+ee.slice(z+1))+""),Ae=0;ee.charCodeAt(ee.length+Ae-1)===48;)--Ae;return Ae!==0&&(pe-=Ae,ee=ee.slice(0,Ae)),pe!==0&&(ee+="e"+pe),(ee.length<K.length||M&&N>1e12&&Math.floor(N)===N&&(ee="0x"+N.toString(16)).length<K.length)&&+ee===N&&(K=ee),K}function pn(N,K){return(N&-2)===8232?(K?"u":"\\u")+(N===8232?"2028":"2029"):N===10||N===13?(K?"":"\\")+(N===10?"n":"r"):String.fromCharCode(N)}function dn(N){var K,z,ee,pe,Ae,De,Re,Ne;if(z=N.toString(),N.source){if(K=z.match(/\/([^/]*)$/),!K)return z;for(ee=K[1],z="",Re=!1,Ne=!1,pe=0,Ae=N.source.length;pe<Ae;++pe)De=N.source.charCodeAt(pe),Ne?(z+=pn(De,Ne),Ne=!1):(Re?De===93&&(Re=!1):De===47?z+="\\":De===91&&(Re=!0),z+=pn(De,Ne),Ne=De===92);return"/"+z+"/"+ee}return z}function fn(N,K){var z;return N===8?"\\b":N===12?"\\f":N===9?"\\t":(z=N.toString(16).toUpperCase(),O||N>255?"\\u"+"0000".slice(z.length)+z:N===0&&!f.code.isDecimalDigit(K)?"\\0":N===11?"\\x0B":"\\x"+"00".slice(z.length)+z)}function Ut(N){if(N===92)return"\\\\";if(N===10)return"\\n";if(N===13)return"\\r";if(N===8232)return"\\u2028";if(N===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function Nt(N){var K,z,ee,pe;for(pe=A==="double"?'"':"'",K=0,z=N.length;K<z;++K)if(ee=N.charCodeAt(K),ee===39){pe='"';break}else if(ee===34){pe="'";break}else ee===92&&++K;return pe+N+pe}function qt(N){var K="",z,ee,pe,Ae=0,De=0,Re,Ne;for(z=0,ee=N.length;z<ee;++z){if(pe=N.charCodeAt(z),pe===39)++Ae;else if(pe===34)++De;else if(pe===47&&O)K+="\\";else if(f.code.isLineTerminator(pe)||pe===92){K+=Ut(pe);continue}else if(!f.code.isIdentifierPartES5(pe)&&(O&&pe<32||!O&&!F&&(pe<32||pe>126))){K+=fn(pe,N.charCodeAt(z+1));continue}K+=String.fromCharCode(pe)}if(Re=!(A==="double"||A==="auto"&&De<Ae),Ne=Re?"'":'"',!(Re?Ae:De))return Ne+K+Ne;for(N=K,K=Ne,z=0,ee=N.length;z<ee;++z)pe=N.charCodeAt(z),(pe===39&&Re||pe===34&&!Re)&&(K+="\\"),K+=String.fromCharCode(pe);return K+Ne}function yn(N){var K,z,ee,pe="";for(K=0,z=N.length;K<z;++K)ee=N[K],pe+=Array.isArray(ee)?yn(ee):ee;return pe}function at(N,K){if(!le)return Array.isArray(N)?yn(N):N;if(K==null){if(N instanceof p)return N;K={}}return K.loc==null?new p(null,null,le,N,K.name||null):new p(K.loc.start.line,K.loc.start.column,le===!0?K.loc.source||null:le,N,K.name||null)}function Dt(){return B||" "}function Qe(N,K){var z,ee,pe,Ae;return z=at(N).toString(),z.length===0?[K]:(ee=at(K).toString(),ee.length===0?[N]:(pe=z.charCodeAt(z.length-1),Ae=ee.charCodeAt(0),(pe===43||pe===45)&&pe===Ae||f.code.isIdentifierPartES5(pe)&&f.code.isIdentifierPartES5(Ae)||pe===47&&Ae===105?[N,Dt(),K]:f.code.isWhiteSpace(pe)||f.code.isLineTerminator(pe)||f.code.isWhiteSpace(Ae)||f.code.isLineTerminator(Ae)?[N,K]:[N,B,K]))}function Tt(N){return[g,N]}function st(N){var K;K=g,g+=b,N(g),g=K}function tn(N){var K;for(K=N.length-1;K>=0&&!f.code.isLineTerminator(N.charCodeAt(K));--K);return N.length-1-K}function St(N,K){var z,ee,pe,Ae,De,Re,Ne,ot;for(z=N.split(/\r\n|[\r\n]/),Re=Number.MAX_VALUE,ee=1,pe=z.length;ee<pe;++ee){for(Ae=z[ee],De=0;De<Ae.length&&f.code.isWhiteSpace(Ae.charCodeAt(De));)++De;Re>De&&(Re=De)}for(typeof K<"u"?(Ne=g,z[1][Re]==="*"&&(K+=" "),g=K):(Re&1&&--Re,Ne=g),ee=1,pe=z.length;ee<pe;++ee)ot=at(Tt(z[ee].slice(Re))),z[ee]=le?ot.join(""):ot;return g=Ne,z.join(`
`)}function Ht(N,K){if(N.type==="Line"){if(Et(N.value))return"//"+N.value;var z="//"+N.value;return _e||(z+=`
`),z}return se.format.indent.adjustMultilineComment&&/[\n\r]/.test(N.value)?St("/*"+N.value+"*/",K):"/*"+N.value+"*/"}function wn(N,K){var z,ee,pe,Ae,De,Re,Ne,ot,mt,Yt,bt,Zt,nn,Ye;if(N.leadingComments&&N.leadingComments.length>0){if(Ae=K,_e){for(pe=N.leadingComments[0],K=[],ot=pe.extendedRange,mt=pe.range,bt=fe.substring(ot[0],mt[0]),Ye=(bt.match(/\n/g)||[]).length,Ye>0?(K.push(Pt(`
`,Ye)),K.push(Tt(Ht(pe)))):(K.push(bt),K.push(Ht(pe))),Yt=mt,z=1,ee=N.leadingComments.length;z<ee;z++)pe=N.leadingComments[z],mt=pe.range,Zt=fe.substring(Yt[1],mt[0]),Ye=(Zt.match(/\n/g)||[]).length,K.push(Pt(`
`,Ye)),K.push(Tt(Ht(pe))),Yt=mt;nn=fe.substring(mt[1],ot[1]),Ye=(nn.match(/\n/g)||[]).length,K.push(Pt(`
`,Ye))}else for(pe=N.leadingComments[0],K=[],te&&N.type===a.Program&&N.body.length===0&&K.push(`
`),K.push(Ht(pe)),Et(at(K).toString())||K.push(`
`),z=1,ee=N.leadingComments.length;z<ee;++z)pe=N.leadingComments[z],Ne=[Ht(pe)],Et(at(Ne).toString())||Ne.push(`
`),K.push(Tt(Ne));K.push(Tt(Ae))}if(N.trailingComments)if(_e)pe=N.trailingComments[0],ot=pe.extendedRange,mt=pe.range,bt=fe.substring(ot[0],mt[0]),Ye=(bt.match(/\n/g)||[]).length,Ye>0?(K.push(Pt(`
`,Ye)),K.push(Tt(Ht(pe)))):(K.push(bt),K.push(Ht(pe)));else for(De=!Et(at(K).toString()),Re=Pt(" ",tn(at([g,K,b]).toString())),z=0,ee=N.trailingComments.length;z<ee;++z)pe=N.trailingComments[z],De?(z===0?K=[K,b]:K=[K,Re],K.push(Ht(pe,Re))):K=[K,Tt(Ht(pe))],z!==ee-1&&!Et(at(K).toString())&&(K=[K,`
`]);return K}function mn(N,K,z){var ee,pe=0;for(ee=N;ee<K;ee++)fe[ee]===`
`&&pe++;for(ee=1;ee<pe;ee++)z.push($)}function Ft(N,K,z){return K<z?["(",N,")"]:N}function vt(N){var K,z,ee;for(ee=N.split(/\r\n|\n/),K=1,z=ee.length;K<z;K++)ee[K]=$+g+ee[K];return ee}function It(N,K){var z,ee,pe;return z=N[se.verbatim],typeof z=="string"?ee=Ft(vt(z),o.Sequence,K):(ee=vt(z.content),pe=z.precedence!=null?z.precedence:o.Sequence,ee=Ft(ee,pe,K)),at(ee,N)}function Ke(){}Ke.prototype.maybeBlock=function(N,K){var z,ee,pe=this;return ee=!se.comment||!N.leadingComments,N.type===a.BlockStatement&&ee?[B,this.generateStatement(N,K)]:N.type===a.EmptyStatement&&ee?";":(st(function(){z=[$,Tt(pe.generateStatement(N,K))]}),z)},Ke.prototype.maybeBlockSuffix=function(N,K){var z=Et(at(K).toString());return N.type===a.BlockStatement&&(!se.comment||!N.leadingComments)&&!z?[K,B]:z?[K,g]:[K,$,g]};function Ot(N){return at(N.name,N)}function Xt(N,K){return N.async?"async"+(K?Dt():B):""}function an(N){var K=N.generator&&!se.moz.starlessGenerator;return K?"*"+B:""}function $t(N){var K=N.value,z="";return K.async&&(z+=Xt(K,!N.computed)),K.generator&&(z+=an(K)?"*":""),z}Ke.prototype.generatePattern=function(N,K,z){return N.type===a.Identifier?Ot(N):this.generateExpression(N,K,z)},Ke.prototype.generateFunctionParams=function(N){var K,z,ee,pe;if(pe=!1,N.type===a.ArrowFunctionExpression&&!N.rest&&(!N.defaults||N.defaults.length===0)&&N.params.length===1&&N.params[0].type===a.Identifier)ee=[Xt(N,!0),Ot(N.params[0])];else{for(ee=N.type===a.ArrowFunctionExpression?[Xt(N,!1)]:[],ee.push("("),N.defaults&&(pe=!0),K=0,z=N.params.length;K<z;++K)pe&&N.defaults[K]?ee.push(this.generateAssignment(N.params[K],N.defaults[K],"=",o.Assignment,Me)):ee.push(this.generatePattern(N.params[K],o.Assignment,Me)),K+1<z&&ee.push(","+B);N.rest&&(N.params.length&&ee.push(","+B),ee.push("..."),ee.push(Ot(N.rest))),ee.push(")")}return ee},Ke.prototype.generateFunctionBody=function(N){var K,z;return K=this.generateFunctionParams(N),N.type===a.ArrowFunctionExpression&&(K.push(B),K.push("=>")),N.expression?(K.push(B),z=this.generateExpression(N.body,o.Assignment,Me),z.toString().charAt(0)==="{"&&(z=["(",z,")"]),K.push(z)):K.push(this.maybeBlock(N.body,Bt)),K},Ke.prototype.generateIterationForStatement=function(N,K,z){var ee=["for"+(K.await?Dt()+"await":"")+B+"("],pe=this;return st(function(){K.left.type===a.VariableDeclaration?st(function(){ee.push(K.left.kind+Dt()),ee.push(pe.generateStatement(K.left.declarations[0],pt))}):ee.push(pe.generateExpression(K.left,o.Call,Me)),ee=Qe(ee,N),ee=[Qe(ee,pe.generateExpression(K.right,o.Assignment,Me)),")"]}),ee.push(this.maybeBlock(K.body,z)),ee},Ke.prototype.generatePropertyKey=function(N,K){var z=[];return K&&z.push("["),z.push(this.generateExpression(N,o.Assignment,Me)),K&&z.push("]"),z},Ke.prototype.generateAssignment=function(N,K,z,ee,pe){return o.Assignment<ee&&(pe|=ke),Ft([this.generateExpression(N,o.Call,pe),B+z+B,this.generateExpression(K,o.Assignment,pe)],o.Assignment,ee)},Ke.prototype.semicolon=function(N){return!U&&N&Ee?"":";"},Ke.Statement={BlockStatement:function(N,K){var z,ee,pe=["{",$],Ae=this;return st(function(){N.body.length===0&&_e&&(z=N.range,z[1]-z[0]>2&&(ee=fe.substring(z[0]+1,z[1]-1),ee[0]===`
`&&(pe=["{"]),pe.push(ee)));var De,Re,Ne,ot;for(ot=rt,K&Ze&&(ot|=Ve),De=0,Re=N.body.length;De<Re;++De)_e&&(De===0&&(N.body[0].leadingComments&&(z=N.body[0].leadingComments[0].extendedRange,ee=fe.substring(z[0],z[1]),ee[0]===`
`&&(pe=["{"])),N.body[0].leadingComments||mn(N.range[0],N.body[0].range[0],pe)),De>0&&!N.body[De-1].trailingComments&&!N.body[De].leadingComments&&mn(N.body[De-1].range[1],N.body[De].range[0],pe)),De===Re-1&&(ot|=Ee),N.body[De].leadingComments&&_e?Ne=Ae.generateStatement(N.body[De],ot):Ne=Tt(Ae.generateStatement(N.body[De],ot)),pe.push(Ne),Et(at(Ne).toString())||_e&&De<Re-1&&N.body[De+1].leadingComments||pe.push($),_e&&De===Re-1&&(N.body[De].trailingComments||mn(N.body[De].range[1],N.range[1],pe))}),pe.push(Tt("}")),pe},BreakStatement:function(N,K){return N.label?"break "+N.label.name+this.semicolon(K):"break"+this.semicolon(K)},ContinueStatement:function(N,K){return N.label?"continue "+N.label.name+this.semicolon(K):"continue"+this.semicolon(K)},ClassBody:function(N,K){var z=["{",$],ee=this;return st(function(pe){var Ae,De;for(Ae=0,De=N.body.length;Ae<De;++Ae)z.push(pe),z.push(ee.generateExpression(N.body[Ae],o.Sequence,Me)),Ae+1<De&&z.push($)}),Et(at(z).toString())||z.push($),z.push(g),z.push("}"),z},ClassDeclaration:function(N,K){var z,ee;return z=["class"],N.id&&(z=Qe(z,this.generateExpression(N.id,o.Sequence,Me))),N.superClass&&(ee=Qe("extends",this.generateExpression(N.superClass,o.Unary,Me)),z=Qe(z,ee)),z.push(B),z.push(this.generateStatement(N.body,ft)),z},DirectiveStatement:function(N,K){return se.raw&&N.raw?N.raw+this.semicolon(K):Nt(N.directive)+this.semicolon(K)},DoWhileStatement:function(N,K){var z=Qe("do",this.maybeBlock(N.body,rt));return z=this.maybeBlockSuffix(N.body,z),Qe(z,["while"+B+"(",this.generateExpression(N.test,o.Sequence,Me),")"+this.semicolon(K)])},CatchClause:function(N,K){var z,ee=this;return st(function(){var pe;N.param?(z=["catch"+B+"(",ee.generateExpression(N.param,o.Sequence,Me),")"],N.guard&&(pe=ee.generateExpression(N.guard,o.Sequence,Me),z.splice(2,0," if ",pe))):z=["catch"]}),z.push(this.maybeBlock(N.body,rt)),z},DebuggerStatement:function(N,K){return"debugger"+this.semicolon(K)},EmptyStatement:function(N,K){return";"},ExportDefaultDeclaration:function(N,K){var z=["export"],ee;return ee=K&Ee?ft:rt,z=Qe(z,"default"),we(N.declaration)?z=Qe(z,this.generateStatement(N.declaration,ee)):z=Qe(z,this.generateExpression(N.declaration,o.Assignment,Me)+this.semicolon(K)),z},ExportNamedDeclaration:function(N,K){var z=["export"],ee,pe=this;return ee=K&Ee?ft:rt,N.declaration?Qe(z,this.generateStatement(N.declaration,ee)):(N.specifiers&&(N.specifiers.length===0?z=Qe(z,"{"+B+"}"):N.specifiers[0].type===a.ExportBatchSpecifier?z=Qe(z,this.generateExpression(N.specifiers[0],o.Sequence,Me)):(z=Qe(z,"{"),st(function(Ae){var De,Re;for(z.push($),De=0,Re=N.specifiers.length;De<Re;++De)z.push(Ae),z.push(pe.generateExpression(N.specifiers[De],o.Sequence,Me)),De+1<Re&&z.push(","+$)}),Et(at(z).toString())||z.push($),z.push(g+"}")),N.source?z=Qe(z,["from"+B,this.generateExpression(N.source,o.Sequence,Me),this.semicolon(K)]):z.push(this.semicolon(K))),z)},ExportAllDeclaration:function(N,K){return["export"+B,"*"+B,"from"+B,this.generateExpression(N.source,o.Sequence,Me),this.semicolon(K)]},ExpressionStatement:function(N,K){var z,ee;function pe(Re){var Ne;return Re.slice(0,5)!=="class"?!1:(Ne=Re.charCodeAt(5),Ne===123||f.code.isWhiteSpace(Ne)||f.code.isLineTerminator(Ne))}function Ae(Re){var Ne;return Re.slice(0,8)!=="function"?!1:(Ne=Re.charCodeAt(8),Ne===40||f.code.isWhiteSpace(Ne)||Ne===42||f.code.isLineTerminator(Ne))}function De(Re){var Ne,ot,mt;if(Re.slice(0,5)!=="async"||!f.code.isWhiteSpace(Re.charCodeAt(5)))return!1;for(ot=6,mt=Re.length;ot<mt&&f.code.isWhiteSpace(Re.charCodeAt(ot));++ot);return ot===mt||Re.slice(ot,ot+8)!=="function"?!1:(Ne=Re.charCodeAt(ot+8),Ne===40||f.code.isWhiteSpace(Ne)||Ne===42||f.code.isLineTerminator(Ne))}return z=[this.generateExpression(N.expression,o.Sequence,Me)],ee=at(z).toString(),ee.charCodeAt(0)===123||pe(ee)||Ae(ee)||De(ee)||de&&K&Ve&&N.expression.type===a.Literal&&typeof N.expression.value=="string"?z=["(",z,")"+this.semicolon(K)]:z.push(this.semicolon(K)),z},ImportDeclaration:function(N,K){var z,ee,pe=this;return N.specifiers.length===0?["import",B,this.generateExpression(N.source,o.Sequence,Me),this.semicolon(K)]:(z=["import"],ee=0,N.specifiers[ee].type===a.ImportDefaultSpecifier&&(z=Qe(z,[this.generateExpression(N.specifiers[ee],o.Sequence,Me)]),++ee),N.specifiers[ee]&&(ee!==0&&z.push(","),N.specifiers[ee].type===a.ImportNamespaceSpecifier?z=Qe(z,[B,this.generateExpression(N.specifiers[ee],o.Sequence,Me)]):(z.push(B+"{"),N.specifiers.length-ee===1?(z.push(B),z.push(this.generateExpression(N.specifiers[ee],o.Sequence,Me)),z.push(B+"}"+B)):(st(function(Ae){var De,Re;for(z.push($),De=ee,Re=N.specifiers.length;De<Re;++De)z.push(Ae),z.push(pe.generateExpression(N.specifiers[De],o.Sequence,Me)),De+1<Re&&z.push(","+$)}),Et(at(z).toString())||z.push($),z.push(g+"}"+B)))),z=Qe(z,["from"+B,this.generateExpression(N.source,o.Sequence,Me),this.semicolon(K)]),z)},VariableDeclarator:function(N,K){var z=K&ke?Me:nt;return N.init?[this.generateExpression(N.id,o.Assignment,z),B,"=",B,this.generateExpression(N.init,o.Assignment,z)]:this.generatePattern(N.id,o.Assignment,z)},VariableDeclaration:function(N,K){var z,ee,pe,Ae,De,Re=this;z=[N.kind],De=K&ke?rt:pt;function Ne(){for(Ae=N.declarations[0],se.comment&&Ae.leadingComments?(z.push(`
`),z.push(Tt(Re.generateStatement(Ae,De)))):(z.push(Dt()),z.push(Re.generateStatement(Ae,De))),ee=1,pe=N.declarations.length;ee<pe;++ee)Ae=N.declarations[ee],se.comment&&Ae.leadingComments?(z.push(","+$),z.push(Tt(Re.generateStatement(Ae,De)))):(z.push(","+B),z.push(Re.generateStatement(Ae,De)))}return N.declarations.length>1?st(Ne):Ne(),z.push(this.semicolon(K)),z},ThrowStatement:function(N,K){return[Qe("throw",this.generateExpression(N.argument,o.Sequence,Me)),this.semicolon(K)]},TryStatement:function(N,K){var z,ee,pe,Ae;if(z=["try",this.maybeBlock(N.block,rt)],z=this.maybeBlockSuffix(N.block,z),N.handlers)for(ee=0,pe=N.handlers.length;ee<pe;++ee)z=Qe(z,this.generateStatement(N.handlers[ee],rt)),(N.finalizer||ee+1!==pe)&&(z=this.maybeBlockSuffix(N.handlers[ee].body,z));else{for(Ae=N.guardedHandlers||[],ee=0,pe=Ae.length;ee<pe;++ee)z=Qe(z,this.generateStatement(Ae[ee],rt)),(N.finalizer||ee+1!==pe)&&(z=this.maybeBlockSuffix(Ae[ee].body,z));if(N.handler)if(Array.isArray(N.handler))for(ee=0,pe=N.handler.length;ee<pe;++ee)z=Qe(z,this.generateStatement(N.handler[ee],rt)),(N.finalizer||ee+1!==pe)&&(z=this.maybeBlockSuffix(N.handler[ee].body,z));else z=Qe(z,this.generateStatement(N.handler,rt)),N.finalizer&&(z=this.maybeBlockSuffix(N.handler.body,z))}return N.finalizer&&(z=Qe(z,["finally",this.maybeBlock(N.finalizer,rt)])),z},SwitchStatement:function(N,K){var z,ee,pe,Ae,De,Re=this;if(st(function(){z=["switch"+B+"(",Re.generateExpression(N.discriminant,o.Sequence,Me),")"+B+"{"+$]}),N.cases)for(De=rt,pe=0,Ae=N.cases.length;pe<Ae;++pe)pe===Ae-1&&(De|=Ee),ee=Tt(this.generateStatement(N.cases[pe],De)),z.push(ee),Et(at(ee).toString())||z.push($);return z.push(Tt("}")),z},SwitchCase:function(N,K){var z,ee,pe,Ae,De,Re=this;return st(function(){for(N.test?z=[Qe("case",Re.generateExpression(N.test,o.Sequence,Me)),":"]:z=["default:"],pe=0,Ae=N.consequent.length,Ae&&N.consequent[0].type===a.BlockStatement&&(ee=Re.maybeBlock(N.consequent[0],rt),z.push(ee),pe=1),pe!==Ae&&!Et(at(z).toString())&&z.push($),De=rt;pe<Ae;++pe)pe===Ae-1&&K&Ee&&(De|=Ee),ee=Tt(Re.generateStatement(N.consequent[pe],De)),z.push(ee),pe+1!==Ae&&!Et(at(ee).toString())&&z.push($)}),z},IfStatement:function(N,K){var z,ee,pe,Ae=this;return st(function(){z=["if"+B+"(",Ae.generateExpression(N.test,o.Sequence,Me),")"]}),pe=K&Ee,ee=rt,pe&&(ee|=Ee),N.alternate?(z.push(this.maybeBlock(N.consequent,rt)),z=this.maybeBlockSuffix(N.consequent,z),N.alternate.type===a.IfStatement?z=Qe(z,["else ",this.generateStatement(N.alternate,ee)]):z=Qe(z,Qe("else",this.maybeBlock(N.alternate,ee)))):z.push(this.maybeBlock(N.consequent,ee)),z},ForStatement:function(N,K){var z,ee=this;return st(function(){z=["for"+B+"("],N.init?N.init.type===a.VariableDeclaration?z.push(ee.generateStatement(N.init,pt)):(z.push(ee.generateExpression(N.init,o.Sequence,nt)),z.push(";")):z.push(";"),N.test&&(z.push(B),z.push(ee.generateExpression(N.test,o.Sequence,Me))),z.push(";"),N.update&&(z.push(B),z.push(ee.generateExpression(N.update,o.Sequence,Me))),z.push(")")}),z.push(this.maybeBlock(N.body,K&Ee?ft:rt)),z},ForInStatement:function(N,K){return this.generateIterationForStatement("in",N,K&Ee?ft:rt)},ForOfStatement:function(N,K){return this.generateIterationForStatement("of",N,K&Ee?ft:rt)},LabeledStatement:function(N,K){return[N.label.name+":",this.maybeBlock(N.body,K&Ee?ft:rt)]},Program:function(N,K){var z,ee,pe,Ae,De;for(Ae=N.body.length,z=[te&&Ae>0?`
`:""],De=Rt,pe=0;pe<Ae;++pe)!te&&pe===Ae-1&&(De|=Ee),_e&&(pe===0&&(N.body[0].leadingComments||mn(N.range[0],N.body[pe].range[0],z)),pe>0&&!N.body[pe-1].trailingComments&&!N.body[pe].leadingComments&&mn(N.body[pe-1].range[1],N.body[pe].range[0],z)),ee=Tt(this.generateStatement(N.body[pe],De)),z.push(ee),pe+1<Ae&&!Et(at(ee).toString())&&(_e&&N.body[pe+1].leadingComments||z.push($)),_e&&pe===Ae-1&&(N.body[pe].trailingComments||mn(N.body[pe].range[1],N.range[1],z));return z},FunctionDeclaration:function(N,K){return[Xt(N,!0),"function",an(N)||Dt(),N.id?Ot(N.id):"",this.generateFunctionBody(N)]},ReturnStatement:function(N,K){return N.argument?[Qe("return",this.generateExpression(N.argument,o.Sequence,Me)),this.semicolon(K)]:["return"+this.semicolon(K)]},WhileStatement:function(N,K){var z,ee=this;return st(function(){z=["while"+B+"(",ee.generateExpression(N.test,o.Sequence,Me),")"]}),z.push(this.maybeBlock(N.body,K&Ee?ft:rt)),z},WithStatement:function(N,K){var z,ee=this;return st(function(){z=["with"+B+"(",ee.generateExpression(N.object,o.Sequence,Me),")"]}),z.push(this.maybeBlock(N.body,K&Ee?ft:rt)),z}},Mt(Ke.prototype,Ke.Statement),Ke.Expression={SequenceExpression:function(N,K,z){var ee,pe,Ae;for(o.Sequence<K&&(z|=ke),ee=[],pe=0,Ae=N.expressions.length;pe<Ae;++pe)ee.push(this.generateExpression(N.expressions[pe],o.Assignment,z)),pe+1<Ae&&ee.push(","+B);return Ft(ee,o.Sequence,K)},AssignmentExpression:function(N,K,z){return this.generateAssignment(N.left,N.right,N.operator,K,z)},ArrowFunctionExpression:function(N,K,z){return Ft(this.generateFunctionBody(N),o.ArrowFunction,K)},ConditionalExpression:function(N,K,z){return o.Conditional<K&&(z|=ke),Ft([this.generateExpression(N.test,o.Coalesce,z),B+"?"+B,this.generateExpression(N.consequent,o.Assignment,z),B+":"+B,this.generateExpression(N.alternate,o.Assignment,z)],o.Conditional,K)},LogicalExpression:function(N,K,z){return N.operator==="??"&&(z|=He),this.BinaryExpression(N,K,z)},BinaryExpression:function(N,K,z){var ee,pe,Ae,De,Re,Ne;return De=u[N.operator],pe=N.operator==="**"?o.Postfix:De,Ae=N.operator==="**"?De:De+1,De<K&&(z|=ke),Re=this.generateExpression(N.left,pe,z),Ne=Re.toString(),Ne.charCodeAt(Ne.length-1)===47&&f.code.isIdentifierPartES5(N.operator.charCodeAt(0))?ee=[Re,Dt(),N.operator]:ee=Qe(Re,N.operator),Re=this.generateExpression(N.right,Ae,z),N.operator==="/"&&Re.toString().charAt(0)==="/"||N.operator.slice(-1)==="<"&&Re.toString().slice(0,3)==="!--"?(ee.push(Dt()),ee.push(Re)):ee=Qe(ee,Re),N.operator==="in"&&!(z&ke)?["(",ee,")"]:(N.operator==="||"||N.operator==="&&")&&z&He?["(",ee,")"]:Ft(ee,De,K)},CallExpression:function(N,K,z){var ee,pe,Ae;for(ee=[this.generateExpression(N.callee,o.Call,ht)],N.optional&&ee.push("?."),ee.push("("),pe=0,Ae=N.arguments.length;pe<Ae;++pe)ee.push(this.generateExpression(N.arguments[pe],o.Assignment,Me)),pe+1<Ae&&ee.push(","+B);return ee.push(")"),z&Ge?Ft(ee,o.Call,K):["(",ee,")"]},ChainExpression:function(N,K,z){o.OptionalChaining<K&&(z|=Ge);var ee=this.generateExpression(N.expression,o.OptionalChaining,z);return Ft(ee,o.OptionalChaining,K)},NewExpression:function(N,K,z){var ee,pe,Ae,De,Re;if(pe=N.arguments.length,Re=z&Be&&!I&&pe===0?je:Xe,ee=Qe("new",this.generateExpression(N.callee,o.New,Re)),!(z&Be)||I||pe>0){for(ee.push("("),Ae=0,De=pe;Ae<De;++Ae)ee.push(this.generateExpression(N.arguments[Ae],o.Assignment,Me)),Ae+1<De&&ee.push(","+B);ee.push(")")}return Ft(ee,o.New,K)},MemberExpression:function(N,K,z){var ee,pe;return ee=[this.generateExpression(N.object,o.Call,z&Ge?ht:Xe)],N.computed?(N.optional&&ee.push("?."),ee.push("["),ee.push(this.generateExpression(N.property,o.Sequence,z&Ge?Me:je)),ee.push("]")):(!N.optional&&N.object.type===a.Literal&&typeof N.object.value=="number"&&(pe=at(ee).toString(),pe.indexOf(".")<0&&!/[eExX]/.test(pe)&&f.code.isDecimalDigit(pe.charCodeAt(pe.length-1))&&!(pe.length>=2&&pe.charCodeAt(0)===48)&&ee.push(" ")),ee.push(N.optional?"?.":"."),ee.push(Ot(N.property))),Ft(ee,o.Member,K)},MetaProperty:function(N,K,z){var ee;return ee=[],ee.push(typeof N.meta=="string"?N.meta:Ot(N.meta)),ee.push("."),ee.push(typeof N.property=="string"?N.property:Ot(N.property)),Ft(ee,o.Member,K)},UnaryExpression:function(N,K,z){var ee,pe,Ae,De,Re;return pe=this.generateExpression(N.argument,o.Unary,Me),B===""?ee=Qe(N.operator,pe):(ee=[N.operator],N.operator.length>2?ee=Qe(ee,pe):(De=at(ee).toString(),Re=De.charCodeAt(De.length-1),Ae=pe.toString().charCodeAt(0),((Re===43||Re===45)&&Re===Ae||f.code.isIdentifierPartES5(Re)&&f.code.isIdentifierPartES5(Ae))&&ee.push(Dt()),ee.push(pe))),Ft(ee,o.Unary,K)},YieldExpression:function(N,K,z){var ee;return N.delegate?ee="yield*":ee="yield",N.argument&&(ee=Qe(ee,this.generateExpression(N.argument,o.Yield,Me))),Ft(ee,o.Yield,K)},AwaitExpression:function(N,K,z){var ee=Qe(N.all?"await*":"await",this.generateExpression(N.argument,o.Await,Me));return Ft(ee,o.Await,K)},UpdateExpression:function(N,K,z){return N.prefix?Ft([N.operator,this.generateExpression(N.argument,o.Unary,Me)],o.Unary,K):Ft([this.generateExpression(N.argument,o.Postfix,Me),N.operator],o.Postfix,K)},FunctionExpression:function(N,K,z){var ee=[Xt(N,!0),"function"];return N.id?(ee.push(an(N)||Dt()),ee.push(Ot(N.id))):ee.push(an(N)||B),ee.push(this.generateFunctionBody(N)),ee},ArrayPattern:function(N,K,z){return this.ArrayExpression(N,K,z,!0)},ArrayExpression:function(N,K,z,ee){var pe,Ae,De=this;return N.elements.length?(Ae=ee?!1:N.elements.length>1,pe=["[",Ae?$:""],st(function(Re){var Ne,ot;for(Ne=0,ot=N.elements.length;Ne<ot;++Ne)N.elements[Ne]?(pe.push(Ae?Re:""),pe.push(De.generateExpression(N.elements[Ne],o.Assignment,Me))):(Ae&&pe.push(Re),Ne+1===ot&&pe.push(",")),Ne+1<ot&&pe.push(","+(Ae?$:B))}),Ae&&!Et(at(pe).toString())&&pe.push($),pe.push(Ae?g:""),pe.push("]"),pe):"[]"},RestElement:function(N,K,z){return"..."+this.generatePattern(N.argument)},ClassExpression:function(N,K,z){var ee,pe;return ee=["class"],N.id&&(ee=Qe(ee,this.generateExpression(N.id,o.Sequence,Me))),N.superClass&&(pe=Qe("extends",this.generateExpression(N.superClass,o.Unary,Me)),ee=Qe(ee,pe)),ee.push(B),ee.push(this.generateStatement(N.body,ft)),ee},MethodDefinition:function(N,K,z){var ee,pe;return N.static?ee=["static"+B]:ee=[],N.kind==="get"||N.kind==="set"?pe=[Qe(N.kind,this.generatePropertyKey(N.key,N.computed)),this.generateFunctionBody(N.value)]:pe=[$t(N),this.generatePropertyKey(N.key,N.computed),this.generateFunctionBody(N.value)],Qe(ee,pe)},Property:function(N,K,z){return N.kind==="get"||N.kind==="set"?[N.kind,Dt(),this.generatePropertyKey(N.key,N.computed),this.generateFunctionBody(N.value)]:N.shorthand?N.value.type==="AssignmentPattern"?this.AssignmentPattern(N.value,o.Sequence,Me):this.generatePropertyKey(N.key,N.computed):N.method?[$t(N),this.generatePropertyKey(N.key,N.computed),this.generateFunctionBody(N.value)]:[this.generatePropertyKey(N.key,N.computed),":"+B,this.generateExpression(N.value,o.Assignment,Me)]},ObjectExpression:function(N,K,z){var ee,pe,Ae,De=this;return N.properties.length?(ee=N.properties.length>1,st(function(){Ae=De.generateExpression(N.properties[0],o.Sequence,Me)}),!ee&&!hn(at(Ae).toString())?["{",B,Ae,B,"}"]:(st(function(Re){var Ne,ot;if(pe=["{",$,Re,Ae],ee)for(pe.push(","+$),Ne=1,ot=N.properties.length;Ne<ot;++Ne)pe.push(Re),pe.push(De.generateExpression(N.properties[Ne],o.Sequence,Me)),Ne+1<ot&&pe.push(","+$)}),Et(at(pe).toString())||pe.push($),pe.push(g),pe.push("}"),pe)):"{}"},AssignmentPattern:function(N,K,z){return this.generateAssignment(N.left,N.right,"=",K,z)},ObjectPattern:function(N,K,z){var ee,pe,Ae,De,Re,Ne=this;if(!N.properties.length)return"{}";if(De=!1,N.properties.length===1)Re=N.properties[0],Re.type===a.Property&&Re.value.type!==a.Identifier&&(De=!0);else for(pe=0,Ae=N.properties.length;pe<Ae;++pe)if(Re=N.properties[pe],Re.type===a.Property&&!Re.shorthand){De=!0;break}return ee=["{",De?$:""],st(function(ot){var mt,Yt;for(mt=0,Yt=N.properties.length;mt<Yt;++mt)ee.push(De?ot:""),ee.push(Ne.generateExpression(N.properties[mt],o.Sequence,Me)),mt+1<Yt&&ee.push(","+(De?$:B))}),De&&!Et(at(ee).toString())&&ee.push($),ee.push(De?g:""),ee.push("}"),ee},ThisExpression:function(N,K,z){return"this"},Super:function(N,K,z){return"super"},Identifier:function(N,K,z){return Ot(N)},ImportDefaultSpecifier:function(N,K,z){return Ot(N.id||N.local)},ImportNamespaceSpecifier:function(N,K,z){var ee=["*"],pe=N.id||N.local;return pe&&ee.push(B+"as"+Dt()+Ot(pe)),ee},ImportSpecifier:function(N,K,z){var ee=N.imported,pe=[ee.name],Ae=N.local;return Ae&&Ae.name!==ee.name&&pe.push(Dt()+"as"+Dt()+Ot(Ae)),pe},ExportSpecifier:function(N,K,z){var ee=N.local,pe=[ee.name],Ae=N.exported;return Ae&&Ae.name!==ee.name&&pe.push(Dt()+"as"+Dt()+Ot(Ae)),pe},Literal:function(N,K,z){var ee;if(N.hasOwnProperty("raw")&&q&&se.raw)try{if(ee=q(N.raw).body[0].expression,ee.type===a.Literal&&ee.value===N.value)return N.raw}catch{}return N.regex?"/"+N.regex.pattern+"/"+N.regex.flags:typeof N.value=="bigint"?N.value.toString()+"n":N.bigint?N.bigint+"n":N.value===null?"null":typeof N.value=="string"?qt(N.value):typeof N.value=="number"?Lt(N.value):typeof N.value=="boolean"?N.value?"true":"false":dn(N.value)},GeneratorExpression:function(N,K,z){return this.ComprehensionExpression(N,K,z)},ComprehensionExpression:function(N,K,z){var ee,pe,Ae,De,Re=this;return ee=N.type===a.GeneratorExpression?["("]:["["],se.moz.comprehensionExpressionStartsWithAssignment&&(De=this.generateExpression(N.body,o.Assignment,Me),ee.push(De)),N.blocks&&st(function(){for(pe=0,Ae=N.blocks.length;pe<Ae;++pe)De=Re.generateExpression(N.blocks[pe],o.Sequence,Me),pe>0||se.moz.comprehensionExpressionStartsWithAssignment?ee=Qe(ee,De):ee.push(De)}),N.filter&&(ee=Qe(ee,"if"+B),De=this.generateExpression(N.filter,o.Sequence,Me),ee=Qe(ee,["(",De,")"])),se.moz.comprehensionExpressionStartsWithAssignment||(De=this.generateExpression(N.body,o.Assignment,Me),ee=Qe(ee,De)),ee.push(N.type===a.GeneratorExpression?")":"]"),ee},ComprehensionBlock:function(N,K,z){var ee;return N.left.type===a.VariableDeclaration?ee=[N.left.kind,Dt(),this.generateStatement(N.left.declarations[0],pt)]:ee=this.generateExpression(N.left,o.Call,Me),ee=Qe(ee,N.of?"of":"in"),ee=Qe(ee,this.generateExpression(N.right,o.Sequence,Me)),["for"+B+"(",ee,")"]},SpreadElement:function(N,K,z){return["...",this.generateExpression(N.argument,o.Assignment,Me)]},TaggedTemplateExpression:function(N,K,z){var ee=ht;z&Ge||(ee=Xe);var pe=[this.generateExpression(N.tag,o.Call,ee),this.generateExpression(N.quasi,o.Primary,kt)];return Ft(pe,o.TaggedTemplate,K)},TemplateElement:function(N,K,z){return N.value.raw},TemplateLiteral:function(N,K,z){var ee,pe,Ae;for(ee=["`"],pe=0,Ae=N.quasis.length;pe<Ae;++pe)ee.push(this.generateExpression(N.quasis[pe],o.Primary,Me)),pe+1<Ae&&(ee.push("${"+B),ee.push(this.generateExpression(N.expressions[pe],o.Sequence,Me)),ee.push(B+"}"));return ee.push("`"),ee},ModuleSpecifier:function(N,K,z){return this.Literal(N,K,z)},ImportExpression:function(N,K,z){return Ft(["import(",this.generateExpression(N.source,o.Assignment,Me),")"],o.Call,K)}},Mt(Ke.prototype,Ke.Expression),Ke.prototype.generateExpression=function(N,K,z){var ee,pe;return pe=N.type||a.Property,se.verbatim&&N.hasOwnProperty(se.verbatim)?It(N,K):(ee=this[pe](N,K,z),se.comment&&(ee=wn(N,ee)),at(ee,N))},Ke.prototype.generateStatement=function(N,K){var z,ee;return z=this[N.type](N,K),se.comment&&(z=wn(N,z)),ee=at(z).toString(),N.type===a.Program&&!te&&$===""&&ee.charAt(ee.length-1)===`
`&&(z=le?at(z).replaceRight(/\s+$/,""):ee.replace(/\s+$/,"")),at(z,N)};function On(N){var K;if(K=new Ke,we(N))return K.generateStatement(N,rt);if(Fe(N))return K.generateExpression(N,o.Sequence,Me);throw new Error("Unknown node type: "+N.type)}function Cn(N,K){var z=Wt(),ee,pe;return K!=null?(typeof K.indent=="string"&&(z.format.indent.style=K.indent),typeof K.base=="number"&&(z.format.indent.base=K.base),K=sn(z,K),b=K.format.indent.style,typeof K.base=="string"?g=K.base:g=Pt(b,K.format.indent.base)):(K=z,b=K.format.indent.style,g=Pt(b,K.format.indent.base)),O=K.format.json,S=K.format.renumber,M=O?!1:K.format.hexadecimal,A=O?"double":K.format.quotes,F=K.format.escapeless,$=K.format.newline,B=K.format.space,K.format.compact&&($=B=b=g=""),I=K.format.parentheses,U=K.format.semicolons,te=K.format.safeConcatenation,de=K.directive,q=O?null:K.parse,le=K.sourceMap,fe=K.sourceCode,_e=K.format.preserveBlankLines&&fe!==null,se=K,le&&(l.browser?p=commonjsGlobal.sourceMap.SourceNode:p=requireSourceMap().SourceNode),ee=On(N),le?(pe=ee.toStringWithSourceMap({file:K.file,sourceRoot:K.sourceMapRoot}),K.sourceContent&&pe.map.setSourceContent(K.sourceMap,K.sourceContent),K.sourceMapWithCode?pe:pe.map.toString()):(pe={code:ee.toString(),map:null},K.sourceMapWithCode?pe:pe.code)}Pe={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},Oe=Wt().format,l.version=require$$3.version,l.generate=Cn,l.attachComments=d.attachComments,l.Precedence=sn({},o),l.browser=!1,l.FORMAT_MINIFY=Pe,l.FORMAT_DEFAULTS=Oe})()}(escodegen$1)),escodegen$1}var escodegenExports=requireEscodegen();const escodegen=getDefaultExportFromCjs(escodegenExports);class WalkerBase{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:a=>this.replacement=a}}replace(a,o,u,p){a&&o&&(u!=null?a[o][u]=p:a[o]=p)}remove(a,o,u){a&&o&&(u!=null?a[o].splice(u,1):delete a[o])}}class SyncWalker extends WalkerBase{constructor(a,o){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:u=>this.replacement=u},this.enter=a,this.leave=o}visit(a,o,u,p){if(a){if(this.enter){const f=this.should_skip,g=this.should_remove,b=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,a,o,u,p),this.replacement&&(a=this.replacement,this.replace(o,u,p,a)),this.should_remove&&this.remove(o,u,p);const O=this.should_skip,S=this.should_remove;if(this.should_skip=f,this.should_remove=g,this.replacement=b,O)return a;if(S)return null}let d;for(d in a){const f=a[d];if(f&&typeof f=="object")if(Array.isArray(f)){const g=f;for(let b=0;b<g.length;b+=1){const O=g[b];isNode(O)&&(this.visit(O,a,d,b)||b--)}}else isNode(f)&&this.visit(f,a,d,null)}if(this.leave){const f=this.replacement,g=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,a,o,u,p),this.replacement&&(a=this.replacement,this.replace(o,u,p,a)),this.should_remove&&this.remove(o,u,p);const b=this.should_remove;if(this.replacement=f,this.should_remove=g,b)return null}}return a}}function isNode(l){return l!==null&&typeof l=="object"&&"type"in l&&typeof l.type=="string"}function walk(l,{enter:a,leave:o}){return new SyncWalker(a,o).visit(l,null)}let widgetMethods=[];function registerWidgetType(l){widgetMethods.push(l)}let languages=new Map;function transpiler(l,a={}){const{wrapAsync:o=!1,addReturn:u=!0,emitMiniLocations:p=!0,emitWidgets:d=!0}=a;let f=parse$6(l,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0}),g=[];const b=(A,F)=>{const $=languages.get("minilang");if($){const B=`[${A}]`,I=$.getLocations(B,F.start);g=g.concat(I)}else{const B=getLeafLocations(`"${A}"`,F.start,l);g=g.concat(B)}};let O=[];walk(f,{enter(A,F){if(isLanguageLiteral(A)){const{name:$}=A.tag,B=languages.get($),I=A.quasi.quasis[0].value.raw,U=A.quasi.start+1;if(p){const te=B.getLocations(I,U);g=g.concat(te)}return this.skip(),this.replace(languageWithLocation($,I,U))}if(isTemplateLiteral(A,"tidal")){const $=A.quasi.quasis[0].value.raw,B=A.quasi.start+1;if(p){const I=collectHaskellMiniLocations($,B);g=g.concat(I)}return this.skip(),this.replace(tidalWithLocation($,B))}if(isBackTickString(A,F)){const{quasis:$}=A,{raw:B}=$[0].value;return this.skip(),p&&b(B,A),this.replace(miniWithLocation(B,A))}if(isStringWithDoubleQuotes(A)){const{value:$}=A;return this.skip(),p&&b($,A),this.replace(miniWithLocation($,A))}if(isSliderFunction(A))return d&&O.push({from:A.arguments[0].start,to:A.arguments[0].end,value:A.arguments[0].raw,min:A.arguments[1]?.value??0,max:A.arguments[2]?.value??1,step:A.arguments[3]?.value,type:"slider"}),this.replace(sliderWithLocation(A));if(isWidgetMethod(A)){const $=A.callee.property.name,B=O.filter(U=>U.type===$).length,I={to:A.end,index:B,type:$,id:a.id};return d&&O.push(I),this.replace(widgetWithLocation(A,I))}if(isBareSamplesCall(A,F))return this.replace(withAwait(A));if(isLabelStatement(A))return this.replace(labelToP(A))},leave(A,F,$,B){}});let{body:S}=f;if(!S.length)console.warn("empty body -> fallback to silence"),S.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!S?.[S.length-1]?.expression)throw new Error("unexpected ast format without body expression");if(u){const{expression:A}=S[S.length-1];S[S.length-1]={type:"ReturnStatement",argument:A}}let M=escodegen.generate(f);return o&&(M=`(async ()=>{${M}})()`),p?{output:M,miniLocations:g,widgets:O}:{output:M}}function isStringWithDoubleQuotes(l,a,o){return l.type!=="Literal"?!1:l.raw[0]==='"'}function isBackTickString(l,a){return l.type==="TemplateLiteral"&&a.type!=="TaggedTemplateExpression"}function miniWithLocation(l,a){const{start:o}=a,u=languages.get("minilang");let p="m";return u&&u.name&&(p=u.name),{type:"CallExpression",callee:{type:"Identifier",name:p},arguments:[{type:"Literal",value:l},{type:"Literal",value:o}],optional:!1}}function isSliderFunction(l){return l.type==="CallExpression"&&l.callee.name==="slider"}function isWidgetMethod(l){return l.type==="CallExpression"&&widgetMethods.includes(l.callee.property?.name)}function sliderWithLocation(l){const a="slider_"+l.arguments[0].start;return l.arguments.unshift({type:"Literal",value:a,raw:a}),l.callee.name="sliderWithID",l}function getWidgetID(l){return`${l.id||""}_widget_${l.type}_${l.index}`}function widgetWithLocation(l,a){const o=getWidgetID(a);return l.arguments.unshift({type:"Literal",value:o,raw:o}),l}function isBareSamplesCall(l,a){return l.type==="CallExpression"&&l.callee.name==="samples"&&a.type!=="AwaitExpression"}function withAwait(l){return{type:"AwaitExpression",argument:l}}function isLabelStatement(l){return l.type==="LabeledStatement"}function labelToP(l){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:l.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:l.label.name,raw:`'${l.label.name}'`}]}}}function isLanguageLiteral(l){return l.type==="TaggedTemplateExpression"&&languages.has(l.tag.name)}function isTemplateLiteral(l,a){return l.type==="TaggedTemplateExpression"&&l.tag.name===a}function collectHaskellMiniLocations(l,a){return l.split("").reduce((o,u,p)=>(u!=='"'||(!o.length||o[o.length-1].length>1?o.push([p+1]):o[o.length-1].push(p)),o),[]).map(([o,u])=>{const p=l.slice(o,u);return getLeafLocations(`"${p}"`,a+o-1)}).flat()}function tidalWithLocation(l,a){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:l},{type:"Literal",value:a}],optional:!1}}function languageWithLocation(l,a,o){return{type:"CallExpression",callee:{type:"Identifier",name:l},arguments:[{type:"Literal",value:a},{type:"Literal",value:o}],optional:!1}}if(typeof DelayNode<"u"){class l extends DelayNode{constructor(o,u,p,d){super(o),u=Math.abs(u),this.delayTime.value=p;const f=o.createGain();f.gain.value=Math.min(Math.abs(d),.995),this.feedback=f.gain;const g=o.createGain();return g.gain.value=u,this.delayGain=g,this.connect(f),this.connect(g),f.connect(this),this.connect=b=>g.connect(b),this}start(o){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,o+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(a,o,u){return new l(this,a,o,u)}}var reverbGen={};reverbGen.generateReverb=function(l,a){for(var o=l.audioContext||new AudioContext,u=o.sampleRate,p=l.numChannels||2,d=l.decayTime*1.5,f=Math.round(l.decayTime*u),g=Math.round(d*u),b=Math.round((l.fadeInTime||0)*u),O=Math.pow(1/1e3,1/f),S=o.createBuffer(p,g,u),M=0;M<p;M++){for(var A=S.getChannelData(M),F=0;F<g;F++)A[F]=randomSample()*Math.pow(O,F);for(var F=0;F<b;F++)A[F]*=F/b}applyGradualLowpass(S,l.lpFreqStart||0,l.lpFreqEnd||0,l.decayTime,a)},reverbGen.generateGraph=function(l,a,o,u,p){var d=document.createElement("canvas");d.width=a,d.height=o;var f=d.getContext("2d");f.fillStyle="#000",f.fillRect(0,0,d.width,d.height),f.fillStyle="#fff";for(var g=a/l.length,b=o/(p-u),O=0;O<l.length;O++)f.fillRect(O*g,o-(l[O]-u)*b,1,1);return d};var applyGradualLowpass=function(l,a,o,u,p){if(a==0){p(l);return}var d=getAllChannelData(l),f=new OfflineAudioContext(l.numberOfChannels,d[0].length,l.sampleRate),g=f.createBufferSource();g.buffer=l;var b=f.createBiquadFilter();a=Math.min(a,l.sampleRate/2),o=Math.min(o,l.sampleRate/2),b.type="lowpass",b.Q.value=1e-4,b.frequency.setValueAtTime(a,0),b.frequency.linearRampToValueAtTime(o,u),g.connect(b),b.connect(f.destination),g.start(),f.oncomplete=function(O){p(O.renderedBuffer)},f.startRendering(),window.filterNode=b},getAllChannelData=function(l){for(var a=[],o=0;o<l.numberOfChannels;o++)a[o]=l.getChannelData(o);return a},randomSample=function(){return Math.random()*2-1};let log=l=>console.log(l);function errorLogger(l,a="superdough"){logger$1(`[${a}] error: ${l.message}`)}const logger$1=(...l)=>log(...l),setLogger=l=>{log=l},tokenizeNote$2=l=>{if(typeof l!="string")return[];const[a,o="",u]=l.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return a?[a,o,u?Number(u):void 0]:[]},chromas$1={c:0,d:2,e:4,f:5,g:7,a:9,b:11},accs$1={"#":1,b:-1,s:1,f:-1},noteToMidi=(l,a=3)=>{const[o,u,p=a]=tokenizeNote$2(l);if(!o)throw new Error('not a note: "'+l+'"');const d=chromas$1[o.toLowerCase()],f=u?.split("").reduce((g,b)=>g+accs$1[b],0)||0;return(Number(p)+1)*12+d+f},midiToFreq$1=l=>Math.pow(2,(l-69)/12)*440,clamp=(l,a,o)=>Math.min(Math.max(l,a),o),freqToMidi$1=l=>12*Math.log(l/440)/Math.LN2+69,valueToMidi=(l,a)=>{if(typeof l!="object")throw new Error("valueToMidi: expected object value");let{freq:o,note:u}=l;return typeof o=="number"?freqToMidi$1(o):typeof u=="string"?noteToMidi(u):typeof u=="number"?u:a};function nanFallback(l,a=0,o){return isNaN(Number(l))?(!o&&logger$1(`"${l}" is not a number, falling back to ${a}`,"warning"),a):l}const _mod$1=(l,a)=>(l%a+a)%a,getSoundIndex=(l,a)=>_mod$1(Math.round(nanFallback(l,0)),a);function cycleToSeconds(l,a){return l/a}function getCommonSampleInfo(l,a){const{s:o,n:u=0}=l;let p=valueToMidi(l,36),d=p-36,f,g=0;if(Array.isArray(a))g=getSoundIndex(u,a.length),f=a[g];else{const O=M=>noteToMidi(M)-p,S=Object.keys(a).filter(M=>!M.startsWith("_")).reduce((M,A,F)=>!M||Math.abs(O(A))<Math.abs(O(M))?A:M,null);d=-O(S),g=getSoundIndex(u,a[S].length),f=a[S][g]}const b=`${o}:${g}`;return{transpose:d,url:f,index:g,midi:p,label:b}}typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(l,a,o=1,u=0){const p=Math.floor(clamp(u,0,1)*a.length),d=a.sampleRate*l,f=this.createBuffer(a.numberOfChannels,a.length,a.sampleRate);for(let g=0;g<a.numberOfChannels;g++){let b=a.getChannelData(g),O=f.getChannelData(g);for(let S=0;S<d;S++){let M=(p+S*Math.abs(o))%b.length;o<1&&(M=M*-1),O[S]=b.at(M)||0}}return f},AudioContext.prototype.createReverb=function(l,a,o,u,p,d,f){const g=this.createConvolver();return g.generate=(b=2,O=.1,S=15e3,M=1e3,A,F,$)=>{g.duration=b,g.fade=O,g.lp=S,g.dim=M,g.ir=A,g.irspeed=F,g.irbegin=$,A?g.buffer=this.adjustLength(b,A,F,$):reverbGen.generateReverb({audioContext:this,numChannels:2,decayTime:b,fadeInTime:O,lpFreqStart:S,lpFreqEnd:M},B=>{g.buffer=B})},g.generate(l,a,o,u,p,d,f),g});var vowelFormant={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class l extends GainNode{constructor(o,u){if(super(o),!vowelFormant[u])throw new Error("vowel: unknown vowel "+u);const{gains:p,qs:d,freqs:f}=vowelFormant[u],g=o.createGain();for(let b=0;b<5;b++){const O=o.createGain();O.gain.value=p[b];const S=o.createBiquadFilter();S.type="bandpass",S.Q.value=d[b],S.frequency.value=f[b],this.connect(S),S.connect(O),O.connect(g)}return g.gain.value=8,this.connect=b=>g.connect(b),this}}AudioContext.prototype.createVowelFilter=function(a){return new l(this,a)}}const workletsUrl="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oQyl7InVzZSBzdHJpY3QiO3ZhciBUZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIHllPShDLEQsTCk9PkQgaW4gQz9UZShDLEQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOkx9KTpDW0RdPUw7dmFyIFN0PShDLEQsTCk9PnllKEMsdHlwZW9mIEQhPSJzeW1ib2wiP0QrIiI6RCxMKTtjbGFzcyBMIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMoZSwxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGUsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKXtsZXQgcj10W3NdLmxlbmd0aDtyIT10aGlzLmlucHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKHMscil9Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspe2xldCByPWVbc10ubGVuZ3RoO3IhPXRoaXMub3V0cHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhzLHIpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxlKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkoZSk7Zm9yKGxldCBzPTA7czxlO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KGUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtzXT10aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQsZSl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bc109bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dFtlXVtzXTt0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5zZXQocix0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dGhpcy5vdXRwdXRCdWZmZXJzW2VdW3NdLnN1YmFycmF5KDAsMTI4KTt0W2VdW3NdLnNldChyKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IGU9MDtlPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW2VdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspZm9yKGxldCBzPTA7czx0aGlzLmJsb2NrU2l6ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdW3NdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW2VdW3NdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQsZSxzKXtjb25zdCBpPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIWk/ITE6KHRoaXMuc3RhcnRlZD1pLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLHMpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhlKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQsZSxzKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBrdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLnNpemUqMikscz0wO3M8ZS5sZW5ndGg7cys9Mil7Y29uc3QgYz1NYXRoLlBJKnMvdGhpcy5zaXplO2Vbc109TWF0aC5jb3MoYyksZVtzKzFdPS1NYXRoLnNpbihjKX10aGlzLnRhYmxlPWU7Zm9yKHZhciByPTAsaT0xO3RoaXMuc2l6ZT5pO2k8PD0xKXIrKzt0aGlzLl93aWR0aD1yJTI9PT0wP3ItMTpyLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgbz0wO288dGhpcy5fYml0cmV2Lmxlbmd0aDtvKyspe3RoaXMuX2JpdHJldltvXT0wO2Zvcih2YXIgYT0wO2E8dGhpcy5fd2lkdGg7YSs9Mil7dmFyIHU9dGhpcy5fd2lkdGgtYS0yO3RoaXMuX2JpdHJldltvXXw9KG8+Pj5hJjMpPDx1fX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxyPTA7cjx0Lmxlbmd0aDtyKz0yKXNbcj4+PjFdPXRbcl07cmV0dXJuIHN9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLHI9MDtyPHMubGVuZ3RoO3IrPTIpc1tyXT10W3I+Pj4xXSxzW3IrMV09MDtyZXR1cm4gc31jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgZT10aGlzLl9jc2l6ZSxzPWU+Pj4xLHI9MjtyPHM7cis9Mil0W2Utcl09dFtyXSx0W2UtcisxXT0tdFtyKzFdfXRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxlKXtpZih0PT09ZSl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9ZSx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLGk9ZS9yPDwxLG8sYSx1PXRoaXMuX2JpdHJldjtpZihpPT09NClmb3Iobz0wLGE9MDtvPGU7bys9aSxhKyspe2NvbnN0IGQ9dVthXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG8sZCxyKX1lbHNlIGZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3QgZD11W2FdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQobyxkLHIpfXZhciBjPXRoaXMuX2ludj8tMToxLGg9dGhpcy50YWJsZTtmb3Iocj4+PTI7cj49MjtyPj49Mil7aT1lL3I8PDE7dmFyIGY9aT4+PjI7Zm9yKG89MDtvPGU7bys9aSlmb3IodmFyIHA9bytmLGw9byxtPTA7bDxwO2wrPTIsbSs9cil7Y29uc3QgZD1sLGI9ZCtmLEk9YitmLHY9SStmLFA9dFtkXSx3PXRbZCsxXSxUPXRbYl0sQj10W2IrMV0sQT10W0ldLHk9dFtJKzFdLE89dFt2XSxxPXRbdisxXSx4PVAsRT13LE49aFttXSxGPWMqaFttKzFdLFY9VCpOLUIqRixrPVQqRitCKk4sUj1oWzIqbV0sWD1jKmhbMiptKzFdLHR0PUEqUi15KlgsZXQ9QSpYK3kqUixzdD1oWzMqbV0scnQ9YypoWzMqbSsxXSxudD1PKnN0LXEqcnQsaXQ9TypydCtxKnN0LG90PXgrdHQsSz1FK2V0LGo9eC10dCxhdD1FLWV0LGN0PVYrbnQsWj1rK2l0LCQ9YyooVi1udCksdXQ9Yyooay1pdCksbHQ9b3QrY3QsZ3Q9SytaLGJ0PW90LWN0LEl0PUstWixfdD1qK3V0LEJ0PWF0LSQsTXQ9ai11dCxQdD1hdCskO3RbZF09bHQsdFtkKzFdPWd0LHRbYl09X3QsdFtiKzFdPUJ0LHRbSV09YnQsdFtJKzFdPUl0LHRbdl09TXQsdFt2KzFdPVB0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPWlbZV0sYT1pW2UrMV0sdT1pW2Urc10sYz1pW2UrcysxXSxoPW8rdSxmPWErYyxwPW8tdSxsPWEtYztyW3RdPWgsclt0KzFdPWYsclt0KzJdPXAsclt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPXRoaXMuX2ludj8tMToxLGE9cyoyLHU9cyozLGM9aVtlXSxoPWlbZSsxXSxmPWlbZStzXSxwPWlbZStzKzFdLGw9aVtlK2FdLG09aVtlK2ErMV0sZD1pW2UrdV0sYj1pW2UrdSsxXSxJPWMrbCx2PWgrbSxQPWMtbCx3PWgtbSxUPWYrZCxCPXArYixBPW8qKGYtZCkseT1vKihwLWIpLE89SStULHE9ditCLHg9UCt5LEU9dy1BLE49SS1ULEY9di1CLFY9UC15LGs9dytBO3JbdF09TyxyW3QrMV09cSxyW3QrMl09eCxyW3QrM109RSxyW3QrNF09TixyW3QrNV09RixyW3QrNl09VixyW3QrN109a31fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQsZT10aGlzLl9jc2l6ZSxzPXRoaXMuX3dpZHRoLHI9MTw8cyxpPWUvcjw8MSxvLGEsdT10aGlzLl9iaXRyZXY7aWYoaT09PTQpZm9yKG89MCxhPTA7bzxlO28rPWksYSsrKXtjb25zdCB3dD11W2FdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKG8sd3Q+Pj4xLHI+Pj4xKX1lbHNlIGZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3Qgd3Q9dVthXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChvLHd0Pj4+MSxyPj4+MSl9dmFyIGM9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtpPWUvcjw8MTt2YXIgZj1pPj4+MSxwPWY+Pj4xLGw9cD4+PjE7Zm9yKG89MDtvPGU7bys9aSlmb3IodmFyIG09MCxkPTA7bTw9bDttKz0yLGQrPXIpe3ZhciBiPW8rbSxJPWIrcCx2PUkrcCxQPXYrcCx3PXRbYl0sVD10W2IrMV0sQj10W0ldLEE9dFtJKzFdLHk9dFt2XSxPPXRbdisxXSxxPXRbUF0seD10W1ArMV0sRT13LE49VCxGPWhbZF0sVj1jKmhbZCsxXSxrPUIqRi1BKlYsUj1CKlYrQSpGLFg9aFsyKmRdLHR0PWMqaFsyKmQrMV0sZXQ9eSpYLU8qdHQsc3Q9eSp0dCtPKlgscnQ9aFszKmRdLG50PWMqaFszKmQrMV0saXQ9cSpydC14Km50LG90PXEqbnQreCpydCxLPUUrZXQsaj1OK3N0LGF0PUUtZXQsY3Q9Ti1zdCxaPWsraXQsJD1SK290LHV0PWMqKGstaXQpLGx0PWMqKFItb3QpLGd0PUsrWixidD1qKyQsSXQ9YXQrbHQsX3Q9Y3QtdXQ7aWYodFtiXT1ndCx0W2IrMV09YnQsdFtJXT1JdCx0W0krMV09X3QsbT09PTApe3ZhciBCdD1LLVosTXQ9ai0kO3Rbdl09QnQsdFt2KzFdPU10O2NvbnRpbnVlfWlmKG0hPT1sKXt2YXIgUHQ9YXQsbWU9LWN0LHZlPUssZ2U9LWosYmU9LWMqbHQsSWU9LWMqdXQsX2U9LWMqJCxCZT0tYypaLE1lPVB0K2JlLFBlPW1lK0llLHdlPXZlK0JlLFNlPWdlLV9lLEN0PW8rcC1tLEV0PW8rZi1tO3RbQ3RdPU1lLHRbQ3QrMV09UGUsdFtFdF09d2UsdFtFdCsxXT1TZX19fX1fc2luZ2xlUmVhbFRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPWlbZV0sYT1pW2Urc10sdT1vK2EsYz1vLWE7clt0XT11LHJbdCsxXT0wLHJbdCsyXT1jLHJbdCszXT0wfV9zaW5nbGVSZWFsVHJhbnNmb3JtNCh0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89dGhpcy5faW52Py0xOjEsYT1zKjIsdT1zKjMsYz1pW2VdLGg9aVtlK3NdLGY9aVtlK2FdLHA9aVtlK3VdLGw9YytmLG09Yy1mLGQ9aCtwLGI9byooaC1wKSxJPWwrZCx2PW0sUD0tYix3PWwtZCxUPW0sQj1iO3JbdF09SSxyW3QrMV09MCxyW3QrMl09dixyW3QrM109UCxyW3QrNF09dyxyW3QrNV09MCxyW3QrNl09VCxyW3QrN109Qn19bGV0IER0PW49PmNvbnNvbGUubG9nKG4pO2NvbnN0IHp0PSguLi5uKT0+RHQoLi4ubikscXQ9KG4sdCxlKT0+TWF0aC5taW4oTWF0aC5tYXgobix0KSxlKSxUdD1uPT5uLygxK24pLFd0PShuLHQpPT4obiV0K3QpJXQsTHQ9KG4sdCk9PigxK3QpKm4vKDErdCpNYXRoLmFicyhuKSksWT0obix0KT0+TWF0aC50YW5oKG4qKDErdCkpLFl0PShuLHQpPT5xdCgoMSt0KSpuLC0xLDEpLHl0PShuLHQpPT57bGV0IGU9KDErLjUqdCkqbjtjb25zdCBzPVd0KGUrMSw0KTtyZXR1cm4gMS1NYXRoLmFicyhzLTIpfSxIdD0obix0KT0+TWF0aC5zaW4oTWF0aC5QSS8yKnl0KG4sdCkpLFV0PShuLHQpPT57Y29uc3QgZT1UdChNYXRoLmxvZzFwKHQpKSxzPShuLWUvMypuKm4qbikvKDEtZS8zKTtyZXR1cm4gWShzLHQpfSxBdD0obix0LGU9ITEpPT57Y29uc3Qgcz0xKzIqdCxpPS4wNypUdChNYXRoLmxvZzFwKHQpKSxvPVkobitpLDIqdCksYT1ZKGU/aTotbitpLDIqdCksdT1vLWEsYz0xL01hdGguY29zaChzKmkpLGg9YypjLGY9TWF0aC5tYXgoMWUtOCwoZT8xOjIpKnMqaCk7cmV0dXJuIFkodS9mLHQpfSxPdD17c2N1cnZlOkx0LHNvZnQ6WSxoYXJkOll0LGN1YmljOlV0LGRpb2RlOkF0LGFzeW06KG4sdCk9PkF0KG4sdCwhMCksZm9sZDp5dCxzaW5lZm9sZDpIdCxjaGVieXNoZXY6KG4sdCk9Pntjb25zdCBlPTEwKk1hdGgubG9nMXAodCk7bGV0IHM9MSxyPW4saSxvPTA7Zm9yKGxldCBhPTE7YTw2NDthKyspe2lmKGE8Mil7bys9YT09MD9zOnI7Y29udGludWV9aT0yKm4qcy1yLHI9cyxzPWksYSUyPT09MCYmKG8rPU1hdGgubWluKDEuMyplL2EsMikqaSl9cmV0dXJuIFkobyxlLzIwKX19LEc9T2JqZWN0LmZyZWV6ZShPYmplY3Qua2V5cyhPdCkpLEt0PW49PntsZXQgdD1uO3R5cGVvZiBuPT0ic3RyaW5nIiYmKHQ9Ry5pbmRleE9mKG4pLHQ9PT0tMSYmKHp0KGBbc3VwZXJkb3VnaF0gQ291bGQgbm90IGZpbmQgd2F2ZXNoYXBpbmcgYWxnb3JpdGhtICR7bn0uCiAgICAgICAgQXZhaWxhYmxlIG9wdGlvbnMgYXJlICR7Ry5qb2luKCIsICIpfS4KICAgICAgICBEZWZhdWx0aW5nIHRvICR7R1swXX0uYCksdD0wKSk7Y29uc3QgZT1HW3QlRy5sZW5ndGhdO3JldHVybiBPdFtlXX0sTT0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLHh0PShuLHQpPT4obiV0K3QpJXQsanQ9KG4sdCxlKT0+ZSoodC1uKStuLFM9KG4sdCk9Pm5bdF0/P25bMF0sVz1uPT5uLU1hdGguZmxvb3IobiksZnQ9bj0+bnwwLE50PShuLHQsZSk9Pm48Mj8wOmp0KC10Ki41LHQqLjUsZS8obi0xKSksSD0obix0KT0+bipNYXRoLnBvdygyLHQvMTIpO2Z1bmN0aW9uIEZ0KG4sdD0xKXtyZXR1cm4gbj49dD9uLT10Om48MCYmKG4rPXQpLG59Y29uc3QgVT0xMjg7ZnVuY3Rpb24gWnQobix0KXtyZXR1cm4gdD1NYXRoLm1pbih0LDEtdCksbjx0PyhuLz10LG4rbi1uKm4tMSk6bj4xLXQ/KG49KG4tMSkvdCxuKm4rbituKzEpOjB9Y29uc3QgcHQ9e3RyaShuLHQ9LjUpe2NvbnN0IGU9MS10O3JldHVybiBuPj10PzEvZS1uL2U6bi90fSxzaW5lKG4pe3JldHVybiBNYXRoLnNpbihNYXRoLlBJKjIqbikqLjUrLjV9LHJhbXAobil7cmV0dXJuIG59LHNhdyhuKXtyZXR1cm4gMS1ufSxzcXVhcmUobix0PS41KXtyZXR1cm4gbj49dD8wOjF9LGN1c3RvbShuLHQ9WzAsMV0pe2NvbnN0IGU9dC5sZW5ndGgtMSxzPU1hdGguZmxvb3IobiplKSxyPTEvZSxpPU0odFtzXSwwLDEpLGE9TSh0W3MrMV0sMCwxKSx1PWksYz0wLGg9cjtyZXR1cm4oYS11KS8oaC1jKSoobi1yKnMpK2l9LHNhd2JsZXAobix0KXtyZXR1cm4gMipuLTEtWnQobix0KX19O2Z1bmN0aW9uIFEobix0KXtyZXR1cm4gdC5sZW5ndGg+MT90W25dOnRbMF19Y29uc3QgJHQ9T2JqZWN0LmtleXMocHQpO2NsYXNzIEd0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InRpbWUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOi41fSx7bmFtZToic2tldyIsZGVmYXVsdFZhbHVlOi41fSx7bmFtZToiZGVwdGgiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToicGhhc2VvZmZzZXQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiY3VydmUiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZGNvZmZzZXQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToibWluIixkZWZhdWx0VmFsdWU6MH0se25hbWU6Im1heCIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGFzZX1pbmNyZW1lbnRQaGFzZSh0KXt0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2U9dGhpcy5waGFzZS0xKX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXMuYmVnaW5bMF07aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1yKXJldHVybiEwO2NvbnN0IGk9ZVswXSxvPXMuZnJlcXVlbmN5WzBdLGE9cy50aW1lWzBdLHU9cy5kZXB0aFswXSxjPXMuc2tld1swXSxoPXMucGhhc2VvZmZzZXRbMF0sZj1zLmN1cnZlWzBdLHA9cy5kY29mZnNldFswXSxsPXMubWluWzBdLG09cy5tYXhbMF0sZD0kdFtzLnNoYXBlWzBdXSxiPWlbMF0ubGVuZ3RoPz8wO3RoaXMucGhhc2U9PW51bGwmJih0aGlzLnBoYXNlPXh0KGEqbytoLDEpKTtjb25zdCBJPW8vc2FtcGxlUmF0ZTtmb3IobGV0IHY9MDt2PGI7disrKXtmb3IobGV0IFA9MDtQPGkubGVuZ3RoO1ArKyl7bGV0IHc9KHB0W2RdKHRoaXMucGhhc2UsYykrcCkqdTt3PU1hdGgucG93KHcsZiksaVtQXVt2XT1NKHcsbCxtKX10aGlzLmluY3JlbWVudFBoYXNlKEkpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGZvLXByb2Nlc3NvciIsR3QpO2NsYXNzIFF0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNvYXJzZSIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87bGV0IGE9cy5jb2Fyc2VbMF0/PzA7YT1NYXRoLm1heCgxLGEpO2ZvcihsZXQgdT0wO3U8VTt1KyspZm9yKGxldCBjPTA7YzxyLmxlbmd0aDtjKyspaVtjXVt1XT11JWE9PT0wP3JbY11bdV06aVtjXVt1LTFdO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY29hcnNlLXByb2Nlc3NvciIsUXQpO2NsYXNzIEp0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNydXNoIixkZWZhdWx0VmFsdWU6MH1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztsZXQgYT1zLmNydXNoWzBdPz84O2E9TWF0aC5tYXgoMSxhKTtmb3IobGV0IHU9MDt1PFU7dSsrKWZvcihsZXQgYz0wO2M8ci5sZW5ndGg7YysrKXtjb25zdCBoPU1hdGgucG93KDIsYS0xKTtpW2NdW3VdPU1hdGgucm91bmQocltjXVt1XSpoKS9ofXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY3J1c2gtcHJvY2Vzc29yIixKdCk7Y2xhc3MgWHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2xldCBhPXMuc2hhcGVbMF07YT1hPDE/YTouOTk5OTk5OTk5NixhPTIqYS8oMS1hKTtjb25zdCB1PU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxzLnBvc3RnYWluWzBdKSk7Zm9yKGxldCBjPTA7YzxVO2MrKylmb3IobGV0IGg9MDtoPHIubGVuZ3RoO2grKylpW2hdW2NdPSgxK2EpKnJbaF1bY10vKDErYSpNYXRoLmFicyhyW2hdW2NdKSkqdTtyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInNoYXBlLXByb2Nlc3NvciIsWHQpO2NsYXNzIFZ0e2NvbnN0cnVjdG9yKCl7U3QodGhpcywiczAiLDApO1N0KHRoaXMsInMxIiwwKX11cGRhdGUodCxlLHM9MCl7cz1NKHMsMCwxKSxlPU0oZSwwLHNhbXBsZVJhdGUvMi0xKTtjb25zdCByPU0oMipNYXRoLnNpbihlKihkdC9zYW1wbGVSYXRlKSksMCwxLjE0KSxvPTEtTWF0aC5wb3coLjUsKHMrLjEyNSkvLjEyNSkqcjtyZXR1cm4gdGhpcy5zMD1vKnRoaXMuczAtcip0aGlzLnMxK3IqdCx0aGlzLnMxPW8qdGhpcy5zMStyKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgdGUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToidmFsdWUiLGRlZmF1bHRWYWx1ZTouNX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmZpbHRlcnM9W25ldyBWdCxuZXcgVnRdfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9TShzLnZhbHVlWzBdLDAsMSk7bGV0IHU9Im5vbmUiLGMsaD0xO2E+LjUxPyh1PSJoaXBhc3MiLGg9KGEtLjUpKjIpOmE8LjQ5JiYodT0ibG9wYXNzIixoPWEqMiksYz1NYXRoLnBvdyhoKjExLDQpO2ZvcihsZXQgZj0wO2Y8ci5sZW5ndGg7ZisrKWZvcihsZXQgcD0wO3A8VTtwKyspdT09Im5vbmUiP2lbZl1bcF09cltmXVtwXToodGhpcy5maWx0ZXJzW2ZdLnVwZGF0ZShyW2ZdW3BdLGMsLjEpLHU9PT0ibG9wYXNzIj9pW2ZdW3BdPXRoaXMuZmlsdGVyc1tmXS5zMTp1PT09ImhpcGFzcyI/aVtmXVtwXT1yW2ZdW3BdLXRoaXMuZmlsdGVyc1tmXS5zMTppW2ZdW3BdPXJbZl1bcF0pO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGpmLXByb2Nlc3NvciIsdGUpO2Z1bmN0aW9uIHoobil7Y29uc3QgdD1uKm47cmV0dXJuIG4qKDI3K3QpLygyNys5KnQpfWNvbnN0IGR0PTMuMTQxNTkyNjUzNTk7Y2xhc3MgZWUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NTAwfSx7bmFtZToicSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkcml2ZSIsZGVmYXVsdFZhbHVlOi42OX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5wMD1bMCwwXSx0aGlzLnAxPVswLDBdLHRoaXMucDI9WzAsMF0sdGhpcy5wMz1bMCwwXSx0aGlzLnAzMj1bMCwwXSx0aGlzLnAzMz1bMCwwXSx0aGlzLnAzND1bMCwwXX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9cy5xWzBdLHU9TShNYXRoLmV4cChzLmRyaXZlWzBdKSwuMSwyZTMpO2xldCBjPXMuZnJlcXVlbmN5WzBdO2M9YyoyKmR0L3NhbXBsZVJhdGUsYz1jPjE/MTpjO2NvbnN0IGg9TWF0aC5taW4oOCxhKi4xMyk7bGV0IGY9MS91Kk1hdGgubWluKDEuNzUsMStoKTtmb3IobGV0IHA9MDtwPFU7cCsrKWZvcihsZXQgbD0wO2w8ci5sZW5ndGg7bCsrKXtjb25zdCBtPXRoaXMucDNbbF0qLjM2MDg5MSt0aGlzLnAzMltsXSouNDE3MjkrdGhpcy5wMzNbbF0qLjE3Nzg5Nit0aGlzLnAzNFtsXSouMDQzOTcyNTt0aGlzLnAzNFtsXT10aGlzLnAzM1tsXSx0aGlzLnAzM1tsXT10aGlzLnAzMltsXSx0aGlzLnAzMltsXT10aGlzLnAzW2xdLHRoaXMucDBbbF0rPSh6KHJbbF1bcF0qdS1oKm0pLXoodGhpcy5wMFtsXSkpKmMsdGhpcy5wMVtsXSs9KHoodGhpcy5wMFtsXSkteih0aGlzLnAxW2xdKSkqYyx0aGlzLnAyW2xdKz0oeih0aGlzLnAxW2xdKS16KHRoaXMucDJbbF0pKSpjLHRoaXMucDNbbF0rPSh6KHRoaXMucDJbbF0pLXoodGhpcy5wM1tsXSkpKmMsaVtsXVtwXT1tKmZ9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsYWRkZXItcHJvY2Vzc29yIixlZSk7Y2xhc3Mgc2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiZGlzdG9ydCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcih7cHJvY2Vzc29yT3B0aW9uczp0fSl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5hbGdvcml0aG09S3QodC5hbGdvcml0aG0pfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87Zm9yKGxldCBhPTA7YTxVO2ErKyl7Y29uc3QgdT1NKFMocy5wb3N0Z2FpbixhKSwuMDAxLDEpLGM9TWF0aC5leHBtMShTKHMuZGlzdG9ydCxhKSk7Zm9yKGxldCBoPTA7aDxyLmxlbmd0aDtoKyspe2NvbnN0IGY9cltoXVthXTtpW2hdW2FdPXUqdGhpcy5hbGdvcml0aG0oZixjKX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJkaXN0b3J0LXByb2Nlc3NvciIsc2UpO2NsYXNzIHJlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlPVtdfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjF9XX1wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdO2ZvcihsZXQgaT0wO2k8clswXS5sZW5ndGg7aSsrKXtjb25zdCBvPVMocy5kZXR1bmUsaSksYT1TKHMudm9pY2VzLGkpLHU9UyhzLmZyZXFzcHJlYWQsaSksYz1TKHMucGFuc3ByZWFkLGkpKi41Ky41LGg9TWF0aC5zcXJ0KDEtYyksZj1NYXRoLnNxcnQoYyk7bGV0IHA9UyhzLmZyZXF1ZW5jeSxpKTtwPUgocCxvLzEwMCk7Zm9yKGxldCBsPTA7bDxhO2wrKyl7Y29uc3QgbT0obCYxKT09MTtsZXQgZD1oLGI9ZjttJiYoZD1mLGI9aCk7Y29uc3QgST1IKHAsTnQoYSx1LGwpKSx2PXh0KEkvc2FtcGxlUmF0ZSwxKTt0aGlzLnBoYXNlW2xdPXRoaXMucGhhc2VbbF0/P01hdGgucmFuZG9tKCk7Y29uc3QgUD1wdC5zYXdibGVwKHRoaXMucGhhc2VbbF0sdik7clswXVtpXT1yWzBdW2ldK1AqZCxyWzFdW2ldPXJbMV1baV0rUCpiLHRoaXMucGhhc2VbbF09RnQodGhpcy5waGFzZVtsXSt2KX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzdXBlcnNhdy1vc2NpbGxhdG9yIixyZSk7Y29uc3QgbmU9MjA0ODtmdW5jdGlvbiBpZShuKXtsZXQgdD1uZXcgRmxvYXQzMkFycmF5KG4pO2Zvcih2YXIgZT0wO2U8bjtlKyspdFtlXT0uNSooMS1NYXRoLmNvcygyKk1hdGguUEkqZS9uKSk7cmV0dXJuIHR9Y2xhc3Mgb2UgZXh0ZW5kcyBMe3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOm5lfSxzdXBlcih0KSx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy50aW1lQ3Vyc29yPTAsdGhpcy5oYW5uV2luZG93PWllKHRoaXMuYmxvY2tTaXplKSx0aGlzLmZmdD1uZXcga3QodGhpcy5mZnRTaXplKSx0aGlzLmZyZXFDb21wbGV4QnVmZmVyPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMudGltZUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5tYWduaXR1ZGVzPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5mZnRTaXplLzIrMSksdGhpcy5wZWFrSW5kZXhlcz1uZXcgSW50MzJBcnJheSh0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSx0aGlzLm5iUGVha3M9MH1wcm9jZXNzT0xBKHQsZSxzKXtsZXQgcj1zLnBpdGNoRmFjdG9yW3MucGl0Y2hGYWN0b3IubGVuZ3RoLTFdO3I8MCYmKHI9ciouMjUpLHI9TWF0aC5tYXgoMCxyKzEpO2Zvcih2YXIgaT0wO2k8dGhpcy5uYklucHV0cztpKyspZm9yKHZhciBvPTA7bzx0W2ldLmxlbmd0aDtvKyspe3ZhciBhPXRbaV1bb10sdT1lW2ldW29dO3RoaXMuYXBwbHlIYW5uV2luZG93KGEpLHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlcixhKSx0aGlzLmNvbXB1dGVNYWduaXR1ZGVzKCksdGhpcy5maW5kUGVha3MoKSx0aGlzLnNoaWZ0UGVha3MociksdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkKSx0aGlzLmZmdC5mcm9tQ29tcGxleEFycmF5KHRoaXMudGltZUNvbXBsZXhCdWZmZXIsdSksdGhpcy5hcHBseUhhbm5XaW5kb3codSl9dGhpcy50aW1lQ3Vyc29yKz10aGlzLmhvcFNpemV9YXBwbHlIYW5uV2luZG93KHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5ibG9ja1NpemU7ZSsrKXRbZV09dFtlXSp0aGlzLmhhbm5XaW5kb3dbZV0qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2Zvcih2YXIgdD0wLGU9MDt0PHRoaXMubWFnbml0dWRlcy5sZW5ndGg7KXtsZXQgcz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW2VdLHI9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlKzFdO3RoaXMubWFnbml0dWRlc1t0XT1zKioyK3IqKjIsdCs9MSxlKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDt2YXIgdD0yO2xldCBlPXRoaXMubWFnbml0dWRlcy5sZW5ndGgtMjtmb3IoO3Q8ZTspe2xldCBzPXRoaXMubWFnbml0dWRlc1t0XTtpZih0aGlzLm1hZ25pdHVkZXNbdC0xXT49c3x8dGhpcy5tYWduaXR1ZGVzW3QtMl0+PXMpe3QrKztjb250aW51ZX1pZih0aGlzLm1hZ25pdHVkZXNbdCsxXT49c3x8dGhpcy5tYWduaXR1ZGVzW3QrMl0+PXMpe3QrKztjb250aW51ZX10aGlzLnBlYWtJbmRleGVzW3RoaXMubmJQZWFrc109dCx0aGlzLm5iUGVha3MrKyx0Kz0yfX1zaGlmdFBlYWtzKHQpe3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkLmZpbGwoMCk7Zm9yKHZhciBlPTA7ZTx0aGlzLm5iUGVha3M7ZSsrKXtsZXQgbz10aGlzLnBlYWtJbmRleGVzW2VdLGE9TWF0aC5yb3VuZChvKnQpO2lmKGE+dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhazt2YXIgcz0wLHI9dGhpcy5mZnRTaXplO2lmKGU+MCl7bGV0IGg9dGhpcy5wZWFrSW5kZXhlc1tlLTFdO3M9by1NYXRoLmZsb29yKChvLWgpLzIpfWlmKGU8dGhpcy5uYlBlYWtzLTEpe2xldCBoPXRoaXMucGVha0luZGV4ZXNbZSsxXTtyPW8rTWF0aC5jZWlsKChoLW8pLzIpfWxldCB1PXMtbyxjPXItbztmb3IodmFyIGk9dTtpPGM7aSsrKXtsZXQgaD1vK2ksZj1hK2k7aWYoZj49dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhaztsZXQgcD0yKk1hdGguUEkqKGYtaCkvdGhpcy5mZnRTaXplLGw9TWF0aC5jb3MocCp0aGlzLnRpbWVDdXJzb3IpLG09TWF0aC5zaW4ocCp0aGlzLnRpbWVDdXJzb3IpLGQ9aCoyLGI9ZCsxLEk9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltkXSx2PXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbYl0sUD1JKmwtdiptLHc9SSptK3YqbCxUPWYqMixCPVQrMTt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtUXSs9UCx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtCXSs9d319fX1yZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2Rlci1wcm9jZXNzb3IiLG9lKTtjbGFzcyBhZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waT1kdCx0aGlzLnBoaT0tdGhpcy5waSx0aGlzLlkwPTAsdGhpcy5ZMT0wLHRoaXMuUFc9dGhpcy5waSx0aGlzLkI9Mi4zLHRoaXMuZHBoaWY9MCx0aGlzLmVudmY9MH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6InB1bHNld2lkdGgiLGRlZmF1bHRWYWx1ZToxLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9XX1wcm9jZXNzKHQsZSxzKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdO2xldCBpPTEsbztmb3IobGV0IGE9MDthPChyWzBdLmxlbmd0aD8/MCk7YSsrKXtjb25zdCB1PSgxLU0oUShhLHMucHVsc2V3aWR0aCksLS45OSwuOTkpKSp0aGlzLnBpLGM9UShhLHMuZGV0dW5lKSxoPUgoUShhLHMuZnJlcXVlbmN5KSxjLzEwMCk7bz1oKih0aGlzLnBpLyhzYW1wbGVSYXRlKi41KSksdGhpcy5kcGhpZis9LjEqKG8tdGhpcy5kcGhpZiksaSo9Ljk5OTgsdGhpcy5lbnZmKz0uMSooaS10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpoKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49dGhpcy5waSYmKHRoaXMucGhpLT0yKnRoaXMucGkpO2xldCBmPU1hdGguY29zKHRoaXMucGhpK3RoaXMuQip0aGlzLlkwKTt0aGlzLlkwPS41KihmK3RoaXMuWTApO2xldCBwPU1hdGguY29zKHRoaXMucGhpK3RoaXMuQip0aGlzLlkxK3UpO3RoaXMuWTE9LjUqKHArdGhpcy5ZMSk7Zm9yKGxldCBsPTA7bDxyLmxlbmd0aDtsKyspcltsXVthXT0uMTUqKGYtcCkqdGhpcy5lbnZmfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigicHVsc2Utb3NjaWxsYXRvciIsYWUpO2NvbnN0IG10PXtiaXRDOmZ1bmN0aW9uKG4sdCxlKXtyZXR1cm4gbiZ0P2U6MH0sYnI6ZnVuY3Rpb24obix0PTgpe2lmKHQ+MzIpdGhyb3cgbmV3IEVycm9yKCJicigpIFNpemUgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiAzMiIpO3tsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dC0wO3MrKyllKz1tdC5iaXRDKG4sMioqcywyKioodC0ocysxKSkpO3JldHVybiBlfX0sc2luZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5zaW4obi8oMTI4L01hdGguUEkpKX0sY29zZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5jb3Mobi8oMTI4L01hdGguUEkpKX0sdGFuZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC50YW4obi8oMTI4L01hdGguUEkpKX0scmVnRzpmdW5jdGlvbihuLHQpe3JldHVybiB0LnRlc3Qobi50b1N0cmluZygyKSl9fTtsZXQgSixodDtmdW5jdGlvbiBjZShuKXtpZigoSnx8aHQpPT1udWxsKXtKPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE1hdGgpLGh0PUoubWFwKHM9Pk1hdGhbc10pO2NvbnN0IHQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobXQpLGU9dC5tYXAocz0+bXRbc10pO0oucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSxodC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5lKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLkosInQiLGByZXR1cm4gMCwKJHtufHwwfTtgKS5iaW5kKGdsb2JhbFRoaXMsLi4uaHQpfWNsYXNzIHVlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBvcnQub25tZXNzYWdlPXQ9PntsZXR7Y29kZVRleHQ6ZX09dC5kYXRhO2NvbnN0e2J5dGVCZWF0U3RhcnRUaW1lOnN9PXQuZGF0YTtzIT1udWxsJiYodGhpcy50PTAsdGhpcy5pbml0aWFsT2Zmc2V0PU1hdGguZmxvb3IocykpLGU9ZS50cmltKCkucmVwbGFjZSgvXmV2YWxcKHVuZXNjYXBlXChlc2NhcGUoPzpgfFwoJ3xcKCJ8XChgKSguKj8pKD86YHwnXCl8IlwpfGBcKSkucmVwbGFjZVwoXC91XChcLlwuXClcL2csWyInYF1cJDElWyInYF1cKVwpXCkkLywocixpKT0+dW5lc2NhcGUoZXNjYXBlKGkpLnJlcGxhY2UoL3UoLi4pL2csIiQxJSIpKSksdGhpcy5mdW5jPWNlKGUpfSx0aGlzLmluaXRpYWxPZmZzZXQ9bnVsbCx0aGlzLnQ9bnVsbCx0aGlzLmZ1bmM9bnVsbH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH1dfXByb2Nlc3ModCxlLHMpe2lmKHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1zLmJlZ2luWzBdKXJldHVybiEwO2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTt0aGlzLnQ9PW51bGwmJih0aGlzLnQ9cy5iZWdpblswXSpzYW1wbGVSYXRlKTtjb25zdCByPWVbMF07Zm9yKGxldCBpPTA7aTxyWzBdLmxlbmd0aDtpKyspe2NvbnN0IG89UShpLHMuZGV0dW5lKSxhPUgoUShpLHMuZnJlcXVlbmN5KSxvLzEwMCk7bGV0IHU9dGhpcy50LyhzYW1wbGVSYXRlLzI1NikqYSt0aGlzLmluaXRpYWxPZmZzZXQ7Y29uc3QgZj0oKHRoaXMuZnVuYyh1KSYyNTUpLzEyNy41LTEpKi4yO2ZvcihsZXQgcD0wO3A8ci5sZW5ndGg7cCsrKXJbcF1baV09TShmLC0uNCwuNCk7dGhpcy50PXRoaXMudCsxfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiYnl0ZS1iZWF0LXByb2Nlc3NvciIsdWUpO2NvbnN0IGc9T2JqZWN0LmZyZWV6ZSh7Tk9ORTowLEFTWU06MSxNSVJST1I6MixCRU5EUDozLEJFTkRNOjQsQkVORE1QOjUsU1lOQzo2LFFVQU5UOjcsRk9MRDo4LFBXTTo5LE9SQklUOjEwLFNQSU46MTEsQ0hBT1M6MTIsUFJJTUVTOjEzLEJJTkFSWToxNCxCUk9XTklBTjoxNSxSRUNJUFJPQ0FMOjE2LFdPUk1IT0xFOjE3LExPR0lTVElDOjE4LFNJR01PSUQ6MTksRlJBQ1RBTDoyMCxGTElQOjIxfSk7ZnVuY3Rpb24gaGUobil7cmV0dXJuIG49bisyMTI3OTEyMjE0KyhuPDwxMiksbj1uXjMzNDUwNzI3MDBebj4+PjE5LG49biszNzQ3NjEzOTMrKG48PDUpLG49biszNTUwNjM1MTE2Xm48PDksbj1uKzQyNTE5OTM3OTcrKG48PDMpLG49bl4zMDQyNTk0NTY5Xm4+Pj4xNixuPj4+MH1jb25zdCBSdD1uPT4oaGUobik+Pj44KS8xNjc3NzIxNjtmdW5jdGlvbiBsZShuLHQpe2xldCBlPTA7Zm9yKGxldCBzPTA7czx0O3MrKyllPWU8PDF8biYxLG4+Pj49MTtyZXR1cm4gZX1mdW5jdGlvbiBmZShuKXtjb25zdCB0PU1hdGguZmxvb3IobiksZT1uLXQscz1SdCh0KSxyPVJ0KHQrMSk7cmV0dXJuIHMrKHItcykqZX1mdW5jdGlvbiBwZShuLHQ9NCl7bGV0IGU9LjUscz0wLHI9MCxpPTE7Zm9yKGxldCBvPTA7bzx0O28rKylzKz1lKmZlKG4qaSkscis9ZSxlKj0uNSxpKj0yO3JldHVybiBzL3IqMi0xfWNvbnN0IHZ0PXt9O2NsYXNzIGRlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJmcmVxc3ByZWFkIixkZWZhdWx0VmFsdWU6LjE4LG1pbjowfSx7bmFtZToicG9zaXRpb24iLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfSx7bmFtZToid2FycCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwTW9kZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJ2b2ljZXMiLGRlZmF1bHRWYWx1ZToxLG1pbjoxfSx7bmFtZToicGFuc3ByZWFkIixkZWZhdWx0VmFsdWU6LjcsbWluOjAsbWF4OjF9LHtuYW1lOiJwaGFzZXJhbmQiLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfV19Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5mcmFtZUxlbj0wLHRoaXMubnVtRnJhbWVzPTAsdGhpcy5waGFzZT1bXSx0aGlzLmludlNSPTEvc2FtcGxlUmF0ZSx0aGlzLnBvcnQub25tZXNzYWdlPWU9Pntjb25zdHt0eXBlOnMscGF5bG9hZDpyfT1lLmRhdGF8fHt9O2lmKHM9PT0idGFibGUiKXtjb25zdCBpPXIua2V5O2lmKHRoaXMuZnJhbWVMZW49ci5mcmFtZUxlbiwhdnRbaV0pe2NvbnN0IG89W3IuZnJhbWVzXTtsZXQgYT1vWzBdO2ZvcihsZXQgdT0xO3U8MTt1Kyspe2NvbnN0IGM9YS5sZW5ndGg+PjEsaD1hLm1hcChmPT57Y29uc3QgcD1uZXcgRmxvYXQzMkFycmF5KGMpO2ZvcihsZXQgbD0wO2w8YztsKyspcFtsXT0oZlsyKmxdK2ZbMipsKzFdKS8yO3JldHVybiBwfSk7aWYoby5wdXNoKGgpLGE9aCxjPD0zMilicmVha312dFtpXT1vfXRoaXMudGFibGVzPXZ0W2ldLHRoaXMubnVtRnJhbWVzPXRoaXMudGFibGVzWzBdLmxlbmd0aH19fV9taXJyb3IodCl7cmV0dXJuIDEtTWF0aC5hYnMoMip0LTEpfV90b0JpdHModCxlPTIscz0xMil7Y29uc3Qgcj1zKyhlLXMpKnQ7cmV0dXJue2I6cixuOk1hdGgucm91bmQoTWF0aC5wb3coMixyKSl9fV93YXJwUGhhc2UodCxlLHMpe3N3aXRjaChzKXtjYXNlIGcuTk9ORTpyZXR1cm4gdDtjYXNlIGcuQVNZTTp7Y29uc3Qgcj0uMDErLjk5KmU7cmV0dXJuIHQ8cj8uNSp0L3I6LjUrLjUqKHQtcikvKDEtcil9Y2FzZSBnLk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LGUsZy5BU1lNKSk7Y2FzZSBnLkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMyplKTtjYXNlIGcuQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKmUpKTtjYXNlIGcuQkVORE1QOnJldHVybiBlPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMiplLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqZS0xLDIpO2Nhc2UgZy5TWU5DOntjb25zdCByPU1hdGgucG93KDE2LGUqZSk7cmV0dXJuIHQqciUxfWNhc2UgZy5RVUFOVDp7Y29uc3R7bjpyfT10aGlzLl90b0JpdHMoZSk7cmV0dXJuIGZ0KHQqcikvcn1jYXNlIGcuRk9MRDp7Y29uc3QgaT0xK01hdGgubWF4KDEsTWF0aC5yb3VuZCg3KmUpKTtyZXR1cm4gTWF0aC5hYnMoVyhpKnQpLS41KSoyfWNhc2UgZy5QV006e2NvbnN0IHI9TSguNSsuNDkqKDIqZS0xKSwwLDEpO3JldHVybiB0PHI/dC9yKi41Oi41Kyh0LXIpLygxLXIpKi41fWNhc2UgZy5PUkJJVDp7Y29uc3Qgcj0uNSplO3JldHVybiBXKHQrcipNYXRoLnNpbigyKk1hdGguUEkqMyp0KSl9Y2FzZSBnLlNQSU46e2NvbnN0IHI9LjUqZSx7bjppfT10aGlzLl90b0JpdHMoZSwxLDYpO3JldHVybiBXKHQrcipNYXRoLnNpbigyKk1hdGguUEkqaSp0KSl9Y2FzZSBnLkNIQU9TOntjb25zdCBpPSgzLjcrLjMqZSkqdCooMS10KTtyZXR1cm4gTSgoMS1lKSp0K2UqaSwwLDEpfWNhc2UgZy5QUklNRVM6e2NvbnN0IHI9bz0+e2lmKG88MilyZXR1cm4hMTtpZihvJTI9PT0wKXJldHVybiBvPT09Mjtmb3IobGV0IGE9MzthKmE8PW87YSs9MilpZihvJWE9PT0wKXJldHVybiExO3JldHVybiEwfTtsZXR7bjppfT10aGlzLl90b0JpdHMoZSwzKTtmb3IoOyFyKGkpOylpKys7cmV0dXJuIGZ0KHQqaSkvaX1jYXNlIGcuQklOQVJZOntsZXR7YjpyfT10aGlzLl90b0JpdHMoZSwzKTtyPU1hdGgucm91bmQocik7Y29uc3QgaT0xPDxyLG89ZnQodCppKTtyZXR1cm4gbGUobyxyKS9pfWNhc2UgZy5NT0RVTEFSOntjb25zdHtuOnJ9PXRoaXMuX3RvQml0cyhlKSxpPS41KmUsbz1XKHQqcikvcjtyZXR1cm4gVyh0K2kqbyl9Y2FzZSBnLkJST1dOSUFOOntjb25zdCByPS4yNSplKnBlKDY0KnQsNCk7cmV0dXJuIFcodCtyKX1jYXNlIGcuUkVDSVBST0NBTDp7Y29uc3Qgcj0yKzQqZSxpPXQqcixvPXQrKDEtdCkqcixhPW8+MWUtMTI/aS9vOjA7cmV0dXJuIE0oYSwwLDEpfWNhc2UgZy5XT1JNSE9MRTp7Y29uc3Qgcj1NKC44KmUsMCwxKSxpPS41KigxLXIpLG89LjUqKDErcik7cmV0dXJuIHQ8aT90L2kqLjU6dD5vPy41KigxKyh0LW8pLygxLW8pKTouNX1jYXNlIGcuTE9HSVNUSUM6e2xldCByPXQ7Y29uc3QgaT0zLjYrLjQqZSxvPTErTWF0aC5yb3VuZCgyKmUpO2ZvcihsZXQgYT0wO2E8bzthKyspcj1pKnIqKDEtcik7cmV0dXJuIE0ociwwLDEpfWNhc2UgZy5TSUdNT0lEOntjb25zdCByPTErMTAqZSxpPXQtLjUsbz0xLygxK01hdGguZXhwKC1yKmkpKSxhPTEvKDErTWF0aC5leHAoLjUqcikpLHU9MS8oMStNYXRoLmV4cCgtLjUqcikpO3JldHVybihvLWEpLyh1LWEpfWNhc2UgZy5GUkFDVEFMOntjb25zdCByPS41Kk1hdGguc2luKDIqTWF0aC5QSSp0KSplO3JldHVybiBXKHQrcil9Y2FzZSBnLkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQsZSl7Y29uc3Qgcz10Lmxlbmd0aCxyPWUqcztsZXQgaT1yfDA7aT49cyYmKGk9MCk7Y29uc3Qgbz1yLWksYT10W2ldO2xldCB1PWkrMTt1Pj1zJiYodT0wKTtjb25zdCBjPXRbdV07cmV0dXJuIGErKGMtYSkqb31fY2hvb3NlTWlwKHQpe3ZhciByO2NvbnN0IGU9TSh0LDFlLTYsNjQpO2xldCBzPTA7Zm9yKDtzKzE8KCgocj10aGlzLnRhYmxlcyk9PW51bGw/dm9pZCAwOnIubGVuZ3RoKXx8MSkmJmU8dGhpcy50YWJsZXNbc11bMF0ubGVuZ3RoLzg7KXMrKztyZXR1cm4gc31wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7Y29uc3Qgcj1lWzBdWzBdLGk9ZVswXVsxXXx8ZVswXVswXTtpZighdGhpcy50YWJsZXMpcmV0dXJuIHIuZmlsbCgwKSxpIT09ciYmaS5zZXQociksITA7Zm9yKGxldCBvPTA7bzxyLmxlbmd0aDtvKyspe2NvbnN0IGE9UyhzLmRldHVuZSxvKSx1PVMocy5mcmVxc3ByZWFkLG8pLGg9TShTKHMucG9zaXRpb24sbyksMCwxKSoodGhpcy5udW1GcmFtZXMtMSksZj1ofDAscD1oLWYsbD1NKFMocy53YXJwLG8pLDAsMSksbT1TKHMud2FycE1vZGUsbyksZD1TKHMudm9pY2VzLG8pLGI9TShTKHMucGhhc2VyYW5kLG8pLDAsMSksST1kPjE/TShTKHMucGFuc3ByZWFkLG8pLDAsMSk6MCx2PU1hdGguc3FydCguNS0uNSpJKSxQPU1hdGguc3FydCguNSsuNSpJKTtsZXQgdz1TKHMuZnJlcXVlbmN5LG8pO3c9SCh3LGEvMTAwKTtjb25zdCBUPTEvTWF0aC5zcXJ0KGQpO2ZvcihsZXQgQj0wO0I8ZDtCKyspe2NvbnN0IEE9KEImMSk9PTE7bGV0IHk9dixPPVA7QSYmKHk9UCxPPXYpO2NvbnN0IHg9SCh3LE50KGQsdSxCKSkqdGhpcy5pbnZTUixFPXRoaXMuX2Nob29zZU1pcCh4KSxOPXRoaXMudGFibGVzW0VdO3RoaXMucGhhc2VbQl09dGhpcy5waGFzZVtCXT8/TWF0aC5yYW5kb20oKSpiO2NvbnN0IEY9dGhpcy5fd2FycFBoYXNlKHRoaXMucGhhc2VbQl0sbCxtKSxWPXRoaXMuX3NhbXBsZUZyYW1lKE5bZl0sRiksaz10aGlzLl9zYW1wbGVGcmFtZShOW01hdGgubWluKHRoaXMubnVtRnJhbWVzLTEsZisxKV0sRik7bGV0IFI9Visoay1WKSpwO209PT1nLkZMSVAmJnRoaXMucGhhc2VbQl08bCYmKFI9LVIpLHJbb10rPVIqeSpULGlbb10rPVIqTypULHRoaXMucGhhc2VbQl09RnQodGhpcy5waGFzZVtCXSt4KX19cmV0dXJuITB9fXJldHVybiByZWdpc3RlclByb2Nlc3Nvcigid2F2ZXRhYmxlLW9zY2lsbGF0b3ItcHJvY2Vzc29yIixkZSksQy5XYXJwTW9kZT1nLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxDfSh7fSk7Cg==";let audioContext;const setDefaultAudioContext=()=>(audioContext=new AudioContext,audioContext),getAudioContext=()=>audioContext||setDefaultAudioContext();function getAudioContextCurrentTime(){return getAudioContext().currentTime}let noiseCache={};function getNoiseBuffer(l,a){const o=getAudioContext();if(noiseCache[l])return noiseCache[l];const u=2*o.sampleRate,p=o.createBuffer(1,u,o.sampleRate),d=p.getChannelData(0);let f=0,g,b,O,S,M,A,F;g=b=O=S=M=A=F=0;for(let $=0;$<u;$++)if(l==="white")d[$]=Math.random()*2-1;else if(l==="brown"){let B=Math.random()*2-1;d[$]=(f+.02*B)/1.02,f=d[$]}else if(l==="pink"){let B=Math.random()*2-1;g=.99886*g+B*.0555179,b=.99332*b+B*.0750759,O=.969*O+B*.153852,S=.8665*S+B*.3104856,M=.55*M+B*.5329522,A=-.7616*A-B*.016898,d[$]=g+b+O+S+M+A+F+B*.5362,d[$]*=.11,F=B*.115926}else if(l==="crackle"){const B=a*.01;Math.random()<B?d[$]=Math.random()*2-1:d[$]=0}return l!=="crackle"&&(noiseCache[l]=p),p}function getNoiseOscillator(l="white",a,o=.02){const p=getAudioContext().createBufferSource();return p.buffer=getNoiseBuffer(l,o),p.loop=!0,p.start(a),{node:p,stop:d=>p.stop(d)}}function getNoiseMix(l,a,o){const u=getNoiseOscillator("pink",o);return{node:drywet(l,u.node,a),stop:d=>u?.stop(d)}}const noises=["pink","white","brown","crackle"];function gainNode(l){const a=getAudioContext().createGain();return a.gain.value=l,a}function effectSend(l,a,o){const u=gainNode(o);return l.connect(u),u.connect(a),u}const getSlope=(l,a,o,u)=>u-o===0?0:(a-l)/(u-o);function getWorklet(l,a,o,u){const p=new AudioWorkletNode(l,a,u);return Object.entries(o).forEach(([d,f])=>{f!==void 0&&(p.parameters.get(d).value=f)}),p}const getParamADSR=(l,a,o,u,p,d,f,g,b,O="exponential")=>{a=nanFallback(a),o=nanFallback(o),u=nanFallback(u),p=nanFallback(p);const S=O==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";O==="exponential"&&(d=d===0?.001:d,f=f===0?.001:f);const M=f-d,A=f,F=d+u*M,$=b-g,B=I=>{let U;if(a>I){let te=getSlope(d,A,0,a);U=I*te+(d>A?d:0)}else U=(I-a)*getSlope(A,F,0,o)+A;return O==="exponential"&&(U=U||.001),U};l.setValueAtTime(d,g),a>$?l[S](B($),b):a+o>$?(l[S](B(a),g+a),l[S](B($),b)):(l[S](B(a),g+a),l[S](B(a+o),g+a+o),l.setValueAtTime(F,b)),l[S](d,b+p)};function getModulationShapeInput(l){return typeof l=="number"?l%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[l]??0}function getLfo(l,a,o,u={}){const{shape:p=0,...d}=u,{dcoffset:f=-.5,depth:g=1}=u,b={frequency:1,depth:g,skew:.5,phaseoffset:0,time:a,begin:a,end:o,shape:getModulationShapeInput(p),dcoffset:f,min:f*g,max:f*g+g,curve:1,...d};return getWorklet(l,"lfo-processor",b)}function getCompressor(l,a,o,u,p,d){const f={threshold:a??-3,ratio:o??10,knee:u??10,attack:p??.005,release:d??.05};return new DynamicsCompressorNode(l,f)}const getADSRValues=(l,a="linear",o)=>{const[f,g,b,O]=l;if(f==null&&g==null&&b==null&&O==null)return o??[.001,.001,1,.01];const S=b??(f!=null&&g==null||f==null&&g==null?1:.001);return[Math.max(f??0,.001),Math.max(g??0,.001),Math.min(S,1),Math.max(O??0,.01)]};function applyParameterModulators(l,a,o,u,p,d){let{amount:f,offset:g,defaultAmount:b=1,curve:O="linear",values:S,holdEnd:M,defaultValues:A}=p;f==null&&(f=S.some(le=>le!=null)?b:0);const F=g??0,$=f+F;if(Math.abs($-F)){const[q,le,fe,_e]=getADSRValues(S,O,A);getParamADSR(a,q,le,fe,_e,F,$,o,M,O)}let I,{defaultDepth:U=1,depth:te,dcoffset:de,...se}=d;return te==null&&(te=Object.values(se).some(le=>le!=null)?U:0),te&&(I=getLfo(l,o,u,{depth:te,dcoffset:de,...se}),I.connect(a)),{lfo:I,disconnect:()=>I?.disconnect()}}function createFilter(l,a,o,u,p,d,f,g,b,O,S,M,A,F){const $="exponential",[B,I,U,te]=getADSRValues([p,d,f,g],$,[.005,.14,0,.1]);let de,se;if(A==="ladder"?(de=getWorklet(l,"ladder-processor",{frequency:o,q:u,drive:F}),se=de.parameters.get("frequency")):(de=l.createBiquadFilter(),de.type=a,de.Q.value=u,de.frequency.value=o,se=de.frequency),(p??d??f??g??b)!==void 0){b=nanFallback(b,1,!0),M=nanFallback(M,0,!0);const le=Math.abs(b),fe=le*M;let _e=clamp(2**-fe*o,0,2e4),Pe=clamp(2**(le-fe)*o,0,2e4);return b<0&&([_e,Pe]=[Pe,_e]),getParamADSR(se,B,I,U,te,_e,Pe,O,S,$),de}return de}let wetfade=l=>l<.5?1:1-(l-.5)/.5;function drywet(l,a,o=0){const u=getAudioContext();if(!o)return l;let p=u.createGain(),d=u.createGain();l.connect(p),a.connect(d),p.gain.value=wetfade(o),d.gain.value=wetfade(1-o);let f=u.createGain();return p.connect(f),d.connect(f),f}let curves=["linear","exponential"];function getPitchEnvelope(l,a,o,u){if((a.pattack??a.pdecay??a.psustain??a.prelease??a.penv)===void 0)return;const d=nanFallback(a.penv,1,!0),f=curves[a.pcurve??0];let[g,b,O,S]=getADSRValues([a.pattack,a.pdecay,a.psustain,a.prelease],f,[.2,.001,1,.001]),M=a.panchor??O;const A=d*100,F=0-A*M,$=A-A*M;getParamADSR(l,g,b,O,S,F,$,o,u,f)}function getVibratoOscillator(l,a,o){const{vibmod:u=.5,vib:p}=a;let d;if(p>0){d=getAudioContext().createOscillator(),d.frequency.value=p;const f=getAudioContext().createGain();return f.gain.value=u*100,d.connect(f),f.connect(l),d.start(o),d}}function webAudioTimeout(l,a,o,u){const p=new ConstantSourceNode(l),d=gainNode(0);return d.connect(l.destination),p.connect(d),p.onended=()=>{try{d.disconnect()}catch{}try{p.disconnect()}catch{}a()},p.start(o),p.stop(u),p}const mod$2=(l,a=1,o="sine")=>{const u=getAudioContext();let p;noises.includes(o)?(p=u.createBufferSource(),p.buffer=getNoiseBuffer(o,2),p.loop=!0):(p=u.createOscillator(),p.type=o,p.frequency.value=l),p.start();const d=new GainNode(u,{gain:a});return p.connect(d),{node:d,stop:f=>p.stop(f)}},fm=(l,a,o,u="sine")=>{const d=l.value*a,f=d*o;return mod$2(d,f,u)};function applyFM(l,a,o){const{fmh:u=1,fmi:p,fmenv:d="exp",fmattack:f,fmdecay:g,fmsustain:b,fmrelease:O,fmvelocity:S,fmwave:M="sine",duration:A}=a;let F,$=()=>{};if(p){const I=getAudioContext().createGain(),U=fm(l,u,p,M);if(F=U.node,$=U.stop,![f,g,b,O,S].some(te=>te!==void 0))F.connect(l);else{const[te,de,se,q]=getADSRValues([f,g,b,O]),le=o+A;getParamADSR(I.gain,te,de,se,q,0,1,o,le,d==="exp"?"exponential":"linear"),F.connect(I),I.connect(l)}}return{stop:$}}const __squash=l=>l/(1+l),_mod=(l,a)=>(l%a+a)%a,_scurve=(l,a)=>(1+a)*l/(1+a*Math.abs(l)),_soft=(l,a)=>Math.tanh(l*(1+a)),_hard=(l,a)=>clamp((1+a)*l,-1,1),_fold=(l,a)=>{let o=(1+.5*a)*l;const u=_mod(o+1,4);return 1-Math.abs(u-2)},_sineFold=(l,a)=>Math.sin(Math.PI/2*_fold(l,a)),_cubic=(l,a)=>{const o=__squash(Math.log1p(a)),u=(l-o/3*l*l*l)/(1-o/3);return _soft(u,a)},_diode=(l,a,o=!1)=>{const u=1+2*a,d=.07*__squash(Math.log1p(a)),f=_soft(l+d,2*a),g=_soft(o?d:-l+d,2*a),b=f-g,O=1/Math.cosh(u*d),S=O*O,M=Math.max(1e-8,(o?1:2)*u*S);return _soft(b/M,a)},_asym=(l,a)=>_diode(l,a,!0),_chebyshev=(l,a)=>{const o=10*Math.log1p(a);let u=1,p=l,d,f=0;for(let g=1;g<64;g++){if(g<2){f+=g==0?u:p;continue}d=2*l*u-p,p=u,u=d,g%2===0&&(f+=Math.min(1.3*o/g,2)*d)}return _soft(f,o/20)},distortionAlgorithms={scurve:_scurve,soft:_soft,hard:_hard,cubic:_cubic,diode:_diode,asym:_asym,fold:_fold,sinefold:_sineFold,chebyshev:_chebyshev},_algoNames=Object.freeze(Object.keys(distortionAlgorithms)),getDistortionAlgorithm=l=>{let a=l;typeof l=="string"&&(a=_algoNames.indexOf(l),a===-1&&(logger$1(`[superdough] Could not find waveshaping algorithm ${l}.
        Available options are ${_algoNames.join(", ")}.
        Defaulting to ${_algoNames[0]}.`),a=0));const o=_algoNames[a%_algoNames.length];return distortionAlgorithms[o]},getDistortion=(l,a,o)=>getWorklet(getAudioContext(),"distort-processor",{distort:l,postgain:a},{processorOptions:{algorithm:o}}),getFrequencyFromValue=(l,a=36)=>{let{note:o,freq:u}=l;return o=o||a,typeof o=="string"&&(o=noteToMidi(o)),!u&&typeof o=="number"&&(u=midiToFreq$1(o)),Number(u)},destroyAudioWorkletNode=l=>{l!=null&&(l.disconnect(),l.parameters.get("end")?.setValueAtTime(0,0))};let listenerQueue=[],lqIndex=0;const QUEUE_ITEMS_PER_LISTENER=4;let atom=l=>{let a=[],o={get(){return o.lc||o.listen(()=>{})(),o.value},lc:0,listen(u){return o.lc=a.push(u),()=>{for(let d=lqIndex+QUEUE_ITEMS_PER_LISTENER;d<listenerQueue.length;)listenerQueue[d]===u?listenerQueue.splice(d,QUEUE_ITEMS_PER_LISTENER):d+=QUEUE_ITEMS_PER_LISTENER;let p=a.indexOf(u);~p&&(a.splice(p,1),--o.lc||o.off())}},notify(u,p){let d=!listenerQueue.length;for(let f of a)listenerQueue.push(f,o.value,u,p);if(d){for(lqIndex=0;lqIndex<listenerQueue.length;lqIndex+=QUEUE_ITEMS_PER_LISTENER)listenerQueue[lqIndex](listenerQueue[lqIndex+1],listenerQueue[lqIndex+2],listenerQueue[lqIndex+3]);listenerQueue.length=0}},off(){},set(u){let p=o.value;p!==u&&(o.value=u,o.notify(p))},subscribe(u){let p=o.listen(u);return u(o.value),p},value:l};return o};const MOUNT=5,UNMOUNT=6,REVERT_MUTATION=10;let on$1=(l,a,o,u)=>(l.events=l.events||{},l.events[o+REVERT_MUTATION]||(l.events[o+REVERT_MUTATION]=u(p=>{l.events[o].reduceRight((d,f)=>(f(d),d),{shared:{},...p})})),l.events[o]=l.events[o]||[],l.events[o].push(a),()=>{let p=l.events[o],d=p.indexOf(a);p.splice(d,1),p.length||(delete l.events[o],l.events[o+REVERT_MUTATION](),delete l.events[o+REVERT_MUTATION])}),STORE_UNMOUNT_DELAY=1e3,onMount=(l,a)=>on$1(l,u=>{let p=a(u);p&&l.events[UNMOUNT].push(p)},MOUNT,u=>{let p=l.listen;l.listen=(...f)=>(!l.lc&&!l.active&&(l.active=!0,u()),p(...f));let d=l.off;return l.events[UNMOUNT]=[],l.off=()=>{d(),setTimeout(()=>{if(l.active&&!l.lc){l.active=!1;for(let f of l.events[UNMOUNT])f();l.events[UNMOUNT]=[]}},STORE_UNMOUNT_DELAY)},()=>{l.listen=p,l.off=d}}),map=(l={})=>{let a=atom(l);return a.setKey=function(o,u){let p=a.value;typeof u>"u"&&o in a.value?(a.value={...a.value},delete a.value[o],a.notify(p,o)):a.value[o]!==u&&(a.value={...a.value,[o]:u},a.notify(p,o))},a};const bufferCache$1={},loadCache$3={},getCachedBuffer=l=>bufferCache$1[l];function humanFileSize$1(l,a){var o=1024;if(l<o)return l+" B";var u=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],p=-1;do l/=o,++p;while(l>=o);return l.toFixed(1)+" "+u[p]}function getSampleInfo(l,a){const{speed:o=1}=l,{transpose:u,url:p,index:d,midi:f,label:g}=getCommonSampleInfo(l,a);let b=Math.abs(o)*Math.pow(2,u/12);return{transpose:u,url:p,index:d,midi:f,label:g,playbackRate:b}}const getSampleBuffer=async(l,a,o)=>{let{url:u,label:p,playbackRate:d}=getSampleInfo(l,a);o&&(u=await o(u));const f=getAudioContext(),g=await loadBuffer$1(u,f,p);return l.unit==="c"&&(d=d*g.duration),{buffer:g,playbackRate:d}},getSampleBufferSource=async(l,a,o)=>{let{buffer:u,playbackRate:p}=await getSampleBuffer(l,a,o);l.speed<0&&(u=reverseBuffer(u));const f=getAudioContext().createBufferSource();f.buffer=u,f.playbackRate.value=p;const{loopBegin:g=0,loopEnd:b=1,begin:O=0,end:S=1}=l,M=O*f.buffer.duration;l.loop&&(f.loop=!0,f.loopStart=g*f.buffer.duration-M,f.loopEnd=b*f.buffer.duration-M);const F=f.buffer.duration/f.playbackRate.value,$=(S-O)*F;return{bufferSource:f,offset:M,bufferDuration:F,sliceDuration:$}},loadBuffer$1=(l,a,o,u=0)=>{const p=o?`sound "${o}:${u}"`:"sample";if(l=l.replace("#","%23"),!loadCache$3[l]){logger$1(`[sampler] load ${p}..`,"load-sample",{url:l});const d=Date.now();loadCache$3[l]=fetch(l).then(f=>f.arrayBuffer()).then(async f=>{const g=Date.now()-d,b=humanFileSize$1(f.byteLength);logger$1(`[sampler] load ${p}... done! loaded ${b} in ${g}ms`,"loaded-sample",{url:l});const O=await a.decodeAudioData(f);return bufferCache$1[l]=O,O})}return loadCache$3[l]};function reverseBuffer(l){const a=getAudioContext(),o=a.createBuffer(l.numberOfChannels,l.length,a.sampleRate);for(let u=0;u<l.numberOfChannels;u++)o.copyToChannel(l.getChannelData(u).slice().reverse(),u,u);return o}const getLoadedBuffer=l=>bufferCache$1[l];function resolveSpecialPaths(l){if(l.startsWith("bubo:")){const[a,o]=l.split(":");l=`github:Bubobubobubobubo/dough-${o}`}return l}function githubPath$3(l,a=""){if(!l.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let o=l.slice(7);o=o.endsWith("/")?o.slice(0,-1):o;let u=o.split("/"),p=u[0],d=u.length>=2?u[1]:"samples",f=u.length>=3?u[2]:"main",g=u.slice(3);return g.push(a||""),g=g.join("/"),`https://raw.githubusercontent.com/${p}/${d}/${f}/${g}`}const processSampleMap=(l,a,o=l._base||"")=>Object.entries(l).forEach(([u,p])=>{if(typeof p=="string"&&(p=[p]),typeof p!="object")throw new Error("wrong sample map format for "+u);o=p._base||o,o=resolveSpecialPaths(o),o.startsWith("github:")&&(o=githubPath$3(o,""));const d=f=>o+f;Array.isArray(p)?p=p.map(d):p=Object.fromEntries(Object.entries(p).map(([f,g])=>[f,(typeof g=="string"?[g]:g).map(d)])),a(u,p)});let resourcePrefixHandlers={};function registerSamplesPrefix(l,a){resourcePrefixHandlers[l]=a}function getSamplesPrefixHandler(l){const a=Object.entries(resourcePrefixHandlers).find(([o])=>l.startsWith(o));if(a)return a[1]}async function fetchSampleMap$1(l){const a=getSamplesPrefixHandler(l);if(a)return a(l);if(l=resolveSpecialPaths(l),l.startsWith("github:")&&(l=githubPath$3(l,"strudel.json")),l.startsWith("local:")&&(l="http://localhost:5432"),l.startsWith("shabda:")){let[p,d]=l.split("shabda:");l=`https://shabda.ndre.gr/${d}.json?strudel=1`}if(l.startsWith("shabda/speech")){let[p,d]=l.split("shabda/speech");d=d.startsWith("/")?d.substring(1):d;let[f,g]=d.split(":"),b="f",O="en-GB";f&&([O,b]=f.split("/")),l=`https://shabda.ndre.gr/speech/${g}.json?gender=${b}&language=${O}&strudel=1'`}if(typeof fetch!="function")return;const o=l.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const u=await fetch(l).then(p=>p.json()).catch(p=>{throw console.error(p),new Error(`error loading "${l}"`)});return[u,u._base||o]}const samples=async(l,a=l._base||"",o={})=>{if(typeof l=="string"){const[d,f]=await fetchSampleMap$1(l);return samples(d,a||f,o)}const{prebake:u,tag:p}=o;processSampleMap(l,(d,f)=>{registerSampleSource(d,f,{baseUrl:a,prebake:u,tag:p})},a)},cutGroups=[];async function onTriggerSample(l,a,o,u,p){let{s:d,nudge:f=0,cut:g,loop:b,clip:O=void 0,n:S=0,speed:M=1,duration:A}=a;if(M===0)return;const F=getAudioContext();let[$,B,I,U]=getADSRValues([a.attack,a.decay,a.sustain,a.release]);const{bufferSource:te,sliceDuration:de,offset:se}=await getSampleBufferSource(a,u,p);if(F.currentTime>l){logger$1(`[sampler] still loading sound "${d}:${S}"`,"highlight");return}if(!te){logger$1(`[sampler] could not load "${d}:${S}"`,"error");return}let q=getVibratoOscillator(te.detune,a,l);const le=l+f;te.start(le,se);const fe=F.createGain(),_e=te.connect(fe);O==null&&b==null&&a.release==null&&(A=de);let Pe=l+A;getParamADSR(_e.gain,$,B,I,U,0,1,l,Pe,"linear"),getPitchEnvelope(te.detune,a,l,Pe);const Oe=F.createGain();_e.connect(Oe),te.onended=function(){te.disconnect(),q?.stop(),_e.disconnect(),Oe.disconnect(),o()};let Fe=Pe+U+.01;te.stop(Fe);const ke={node:Oe,bufferSource:te,stop:Ge=>{te.stop(Ge)}};if(g!==void 0){const Ge=cutGroups[g];Ge&&(Ge.node.gain.setValueAtTime(1,le),Ge.node.gain.linearRampToValueAtTime(0,le+.01)),cutGroups[g]=ke}return ke}function registerSample(l,a,o){registerSound(l,(u,p,d)=>onTriggerSample(u,p,d,a),{type:"sample",samples:a,...o})}function registerSampleSource(l,a,o){l.startsWith("wt_")?registerWaveTable(l,a,o):registerSample(l,a,o)}let hasChanged=(l,a)=>l!==void 0&&l!==a;class Orbit{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(a){this.audioContext=a,this.output=new GainNode(a,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode=new GainNode(a,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(a,o=0){this.djfNode==null&&(this.djfNode=getWorklet(this.audioContext,"djf-processor",{value:a}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(a,o)}getDelay(a=0,o=.5,u){return o=clamp(o,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,a,o),this.delayNode.connect(this.summingNode),this.delayNode.start?.(u)),this.delayNode.delayTime.value!==a&&this.delayNode.delayTime.setValueAtTime(a,u),this.delayNode.feedback.value!==o&&this.delayNode.feedback.setValueAtTime(o,u),this.delayNode}getReverb(a,o,u,p,d,f,g){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(a,o,u,p,d,f,g),this.reverbNode.connect(this.summingNode)),(hasChanged(a,this.reverbNode.duration)||hasChanged(o,this.reverbNode.fade)||hasChanged(u,this.reverbNode.lp)||hasChanged(p,this.reverbNode.dim)||hasChanged(f,this.reverbNode.irspeed)||hasChanged(g,this.reverbNode.irbegin)||this.reverbNode.ir!==d)&&this.reverbNode.generate(a,o,u,p,d,f,g),this.reverbNode}sendReverb(a,o){effectSend(a,this.reverbNode,o)}sendDelay(a,o){effectSend(a,this.delayNode,o)}duck(a,o=0,u=.1,p=1){const d=o,f=Math.max(u,.002),g=this.output.gain;webAudioTimeout(this.audioContext,()=>{const b=this.audioContext.currentTime,O=g.value;g.cancelScheduledValues(b),g.setValueAtTime(O,b);const S=Math.max(a,b),M=clamp(1-Math.sqrt(p),.01,O);g.exponentialRampToValueAtTime(M,S+d),g.exponentialRampToValueAtTime(1,S+d+f)},0,a-.01)}connectToOutput(a){a.connect(this.summingNode)}}class SuperdoughOutput{channelMerger;destinationGain;constructor(a){this.audioContext=a,this.initializeAudio()}initializeAudio(){const a=this.audioContext,o=a.destination.maxChannelCount;this.audioContext.destination.channelCount=o,this.channelMerger=new ChannelMergerNode(a,{numberOfInputs:a.destination.channelCount}),this.destinationGain=new GainNode(a),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(a.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(a,o=[0,1])=>{const u=new StereoPannerNode(this.audioContext);a.connect(u);const p=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:u.channelCount});u.connect(p),o.forEach((d,f)=>{p.connect(this.channelMerger,f%u.channelCount,d%this.audioContext.destination.channelCount)})}}class SuperdoughAudioController{audioContext;output;nodes={};constructor(a){this.audioContext=a,this.output=new SuperdoughOutput(a)}reset(){Array.from(this.nodes).forEach(a=>{a.disconnect()}),this.nodes={},this.output.reset()}duck(a,o,u=0,p=.1,d=1){const f=[a].flat(),g=[u].flat(),b=[p].flat(),O=[d].flat();f.forEach((S,M)=>{const A=this.nodes[S];if(A==null){errorLogger(new Error(`duck target orbit ${S} does not exist`),"superdough");return}const F=g[M]??g[0],$=Math.max(b[M]??b[0],.002),B=O[M]??O[0];A.duck(o,F,$,B)})}getOrbit(a,o){return this.nodes[a]==null&&(this.nodes[a]=new Orbit(this.audioContext),this.output.connectToDestination(this.nodes[a].output,o)),this.nodes[a]}}const DEFAULT_MAX_POLYPHONY=128,DEFAULT_AUDIO_DEVICE_NAME="System Standard";let maxPolyphony=DEFAULT_MAX_POLYPHONY;function setMaxPolyphony(l){maxPolyphony=parseInt(l)??DEFAULT_MAX_POLYPHONY}let multiChannelOrbits=!1;function setMultiChannelOrbits(l){multiChannelOrbits=l==!0}const soundMap$1=map();function registerSound(l,a,o={}){l=l.toLowerCase().replace(/\s+/g,"_"),soundMap$1.setKey(l,{onTrigger:a,data:o})}let gainCurveFunc=l=>l;function applyGainCurve(l){return gainCurveFunc(l)}function setGainCurve(l){gainCurveFunc=l}function aliasBankMap(l){for(const o in l)l[o.toLowerCase()]=l[o];const a=soundMap$1.get();for(const o in a){const[u,p]=o.split("_");if(!p)continue;const d=l[u];if(d){if(typeof d=="string")a[`${d}_${p}`.toLowerCase()]=a[o];else if(Array.isArray(d))for(const f of d)a[`${f}_${p}`.toLowerCase()]=a[o]}}soundMap$1.set({...a})}async function aliasBankPath(l){const o=await(await fetch(l)).json();aliasBankMap(o)}async function aliasBank(...l){switch(l.length){case 1:return typeof l[0]=="string"?aliasBankPath(l[0]):aliasBankMap(l[0]);case 2:return aliasBankMap({[l[0]]:l[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+l.length)}}function soundAlias(l,a){if(getSound(l)==null){logger$1("soundAlias: original sound not found");return}soundMap$1.setKey(a,getSound(l))}function getSound(l){return typeof l!="string"?(console.warn(`getSound: expected string got "${l}". fall back to triangle`),soundMap$1.get().triangle):soundMap$1.get()[l.toLowerCase()]}const getAudioDevices=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let l=await navigator.mediaDevices.enumerateDevices();l=l.filter(o=>o.kind==="audiooutput"&&o.deviceId!=="default");const a=new Map;return a.set(DEFAULT_AUDIO_DEVICE_NAME,""),l.forEach(o=>{a.set(o.label,o.deviceId)}),a};let defaultDefaultValues={s:"triangle",gain:.8,postgain:1,density:".03",ftype:"12db",fanchor:0,resonance:1,hresonance:1,bandq:1,channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const defaultDefaultDefaultValues=Object.freeze({...defaultDefaultValues});function setDefault(l,a){defaultDefaultValues[l]=a}function resetDefaults(){defaultDefaultValues={...defaultDefaultDefaultValues}}let defaultControls=new Map(Object.entries(defaultDefaultValues));function setDefaultValue(l,a){defaultControls.set(l,a)}function getDefaultValue(l){return defaultControls.get(l)}function setDefaultValues(l){Object.keys(l).forEach(a=>{setDefaultValue(a,l[a])})}function resetDefaultValues(){defaultControls=new Map(Object.entries(defaultDefaultValues))}function setVersionDefaults(l){resetDefaultValues(),l==="1.0"&&setDefaultValue("fanchor",.5)}const resetLoadedSounds=()=>soundMap$1.set({});let externalWorklets=[];function registerWorklet(l){externalWorklets.push(l)}let workletsLoading;function loadWorklets(){if(!workletsLoading){const l=getAudioContext(),a=externalWorklets.concat([workletsUrl]);workletsLoading=Promise.all(a.map(o=>l.audioWorklet.addModule(o)))}return workletsLoading}async function initAudio(l={}){const{disableWorklets:a=!1,maxPolyphony:o,audioDeviceName:u=DEFAULT_AUDIO_DEVICE_NAME,multiChannelOrbits:p=!1}=l;if(setMaxPolyphony(o),setMultiChannelOrbits(p),typeof window>"u")return;const d=getAudioContext();if(u!=null&&u!=DEFAULT_AUDIO_DEVICE_NAME)try{const g=(await getAudioDevices()).get(u),b=(g??"").length>0;d.sinkId!==g&&b&&await d.setSinkId(g),logger$1(`[superdough] Audio Device set to ${u}, it might take a few seconds before audio plays on all output channels`)}catch{logger$1("[superdough] failed to set audio interface","warning")}if(await d.resume(),a){logger$1("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await loadWorklets(),logger$1("[superdough] AudioWorklets loaded")}catch(f){console.warn("could not load AudioWorklet effects",f)}logger$1("[superdough] ready")}let audioReady;async function initAudioOnFirstClick(l){return audioReady||(audioReady=new Promise(a=>{document.addEventListener("click",async function o(){document.removeEventListener("click",o),await initAudio(l),a()})})),audioReady}let controller;function getSuperdoughAudioController(){return controller==null&&(controller=new SuperdoughAudioController(getAudioContext())),controller}function connectToDestination(l,a){getSuperdoughAudioController().output.connectToDestination(l,a)}function getPhaser(l,a,o=1,u=.5,p=1e3,d=2e3){const f=getAudioContext(),g=getLfo(f,l,a,{frequency:o,depth:d*2}),b=2;let O=0;const S=[];for(let M=0;M<b;M++){const A=f.createBiquadFilter();A.type="notch",A.gain.value=1,A.frequency.value=p+O,A.Q.value=2-Math.min(Math.max(u*2,0),1.9),g.connect(A.detune),O+=282,M>0&&S[M-1].connect(A),S.push(A)}return S[S.length-1]}function getFilterType(l){l=l??0;const a=["12db","ladder","24db"];return typeof l=="number"?a[Math.floor(_mod$1(l,a.length))]:l}let analysers={},analysersData={};function getAnalyserById(l,a=1024,o=.5){if(!analysers[l]){const u=getAudioContext().createAnalyser();u.fftSize=a,u.smoothingTimeConstant=o,analysers[l]=u,analysersData[l]=new Float32Array(analysers[l].frequencyBinCount)}return analysers[l].fftSize!==a&&(analysers[l].fftSize=a,analysersData[l]=new Float32Array(analysers[l].frequencyBinCount)),analysers[l]}function getAnalyzerData(l="time",a=1){const o={time:()=>analysers[a]?.getFloatTimeDomainData(analysersData[a]),frequency:()=>analysers[a]?.getFloatFrequencyData(analysersData[a])}[l];if(!o)throw new Error(`getAnalyzerData: ${l} not supported. use one of ${Object.keys(o).join(", ")}`);return o(),analysersData[a]}function resetGlobalEffects(){controller?.reset(),analysers={},analysersData={}}let activeSoundSources=new Map;function mapChannelNumbers(l){return(Array.isArray(l)?l:[l]).map(a=>a-1)}const superdough=async(l,a,o,u=.5,p=.5)=>{const d=getAudioContext(),f=getSuperdoughAudioController();let{stretch:g}=l;if(g!=null&&(a=a-.04),typeof l!="object")throw new Error(`expected hap.value to be an object, but got "${l}". Hint: append .note() or .s() to the end`,"error");if(l.duration=o,a<d.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${a.toFixed(2)}, now: ${d.currentTime.toFixed(2)})`);return}let{tremolo:b,tremolosync:O,tremolodepth:S=1,tremoloskew:M,tremolophase:A=0,tremoloshape:F,s:$=getDefaultValue("s"),bank:B,source:I,gain:U=getDefaultValue("gain"),postgain:te=getDefaultValue("postgain"),density:de=getDefaultValue("density"),duckorbit:se,duckonset:q,duckattack:le,duckdepth:fe,djf:_e,fanchor:Pe=getDefaultValue("fanchor"),drive:Oe=.69,release:Fe=0,cutoff:we,lpenv:ke,lpattack:Ge,lpdecay:Be,lpsustain:Ze,lprelease:Ve,resonance:Ee=getDefaultValue("resonance"),hpenv:He,hcutoff:nt,hpattack:ht,hpdecay:Me,hpsustain:Xe,hprelease:kt,hresonance:je=getDefaultValue("hresonance"),bpenv:rt,bandf:ft,bpattack:pt,bpdecay:Rt,bpsustain:Bt,bprelease:Wt,bandq:Pt=getDefaultValue("bandq"),phaserrate:hn,phaserdepth:Et=getDefaultValue("phaserdepth"),phasersweep:Mt,phasercenter:sn,coarse:Lt,crush:pn,dry:dn,shape:fn,shapevol:Ut=getDefaultValue("shapevol"),distort:Nt,distortvol:qt=getDefaultValue("distortvol"),distorttype:yn=getDefaultValue("distorttype"),pan:at,vowel:Dt,delay:Qe=getDefaultValue("delay"),delayfeedback:Tt=getDefaultValue("delayfeedback"),delaysync:st=getDefaultValue("delaysync"),delaytime:tn,orbit:St=getDefaultValue("orbit"),room:Ht,roomfade:wn,roomlp:mn,roomdim:Ft,roomsize:vt,ir:It,irspeed:Ke,irbegin:Ot,i:Xt=getDefaultValue("i"),velocity:an=getDefaultValue("velocity"),analyze:$t,fft:On=getDefaultValue("fft"),compressor:Cn,compressorRatio:N,compressorKnee:K,compressorAttack:z,compressorRelease:ee}=l;tn=tn??cycleToSeconds(st,u);const pe=mapChannelNumbers(multiChannelOrbits&&St>0?[St*2-1,St*2]:getDefaultValue("channels")),Ae=l.channels!=null?mapChannelNumbers(l.channels):pe,De=f.getOrbit(St,Ae);se!=null&&f.duck(se,a,q,le,fe),U=applyGainCurve(nanFallback(U,1)),te=applyGainCurve(te),Ut=applyGainCurve(Ut),qt=applyGainCurve(qt),Qe=applyGainCurve(Qe),an=applyGainCurve(an),S=applyGainCurve(S),U*=an;const Re=a+o,Ne=Re+Fe,ot=Math.round(Math.random()*1e6);for(let Ye=0;Ye<=activeSoundSources.size-maxPolyphony;Ye++){const jt=activeSoundSources.entries().next(),Vt=jt.value[1],Sn=jt.value[0],Pn=a+.25;Vt?.node?.gain?.linearRampToValueAtTime(0,Pn),Vt?.stop?.(Pn),activeSoundSources.delete(Sn)}let mt=[];if(["-","~","_"].includes($))return;B&&$&&($=`${B}_${$}`,l.s=$);let Yt;if(I)Yt=I(a,l,o,u);else if(getSound($)){const{onTrigger:Ye}=getSound($),Vt=await Ye(a,l,()=>{mt.forEach(Sn=>Sn?.disconnect()),activeSoundSources.delete(ot)},u);Vt&&(Yt=Vt.node,activeSoundSources.set(ot,Vt))}else throw new Error(`sound ${$} not found! Is it loaded?`);if(!Yt)return;if(d.currentTime>a){logger$1("[webaudio] skip hap: still loading",d.currentTime-a);return}const bt=[];bt.push(Yt),g!==void 0&&bt.push(getWorklet(d,"phase-vocoder-processor",{pitchFactor:g})),bt.push(gainNode(U));const Zt=getFilterType(l.ftype);if(we!==void 0){let Ye=()=>createFilter(d,"lowpass",we,Ee,Ge,Be,Ze,Ve,ke,a,Re,Pe,Zt,Oe);bt.push(Ye()),Zt==="24db"&&bt.push(Ye())}if(nt!==void 0){let Ye=()=>createFilter(d,"highpass",nt,je,ht,Me,Xe,kt,He,a,Re,Pe);bt.push(Ye()),Zt==="24db"&&bt.push(Ye())}if(ft!==void 0){let Ye=()=>createFilter(d,"bandpass",ft,Pt,pt,Rt,Bt,Wt,rt,a,Re,Pe);bt.push(Ye()),Zt==="24db"&&bt.push(Ye())}if(Dt!==void 0){const Ye=d.createVowelFilter(Dt);bt.push(Ye)}if(Lt!==void 0&&bt.push(getWorklet(d,"coarse-processor",{coarse:Lt})),pn!==void 0&&bt.push(getWorklet(d,"crush-processor",{crush:pn})),fn!==void 0&&bt.push(getWorklet(d,"shape-processor",{shape:fn,postgain:Ut})),Nt!==void 0&&bt.push(getDistortion(Nt,qt,yn)),O!=null&&(b=u*O),l.wtPosSynced!=null&&(l.wtPosRate/=u),l.wtWarpSynced!=null&&(l.wtWarpRate/=u),b!==void 0){const Ye=Math.max(1-S,0),jt=new GainNode(d,{gain:Ye}),Vt=p/u;getLfo(d,a,Ne,{skew:M??(F!=null?.5:1),frequency:b,depth:S,time:Vt,dcoffset:0,shape:F,phaseoffset:A,min:0,max:1,curve:1.5}).connect(jt.gain),bt.push(jt)}if(Cn!==void 0&&bt.push(getCompressor(d,Cn,N,K,z,ee)),at!==void 0){const Ye=d.createStereoPanner();Ye.pan.value=2*at-1,bt.push(Ye)}if(hn!==void 0&&Et>0){const Ye=getPhaser(a,Ne,hn,Et,sn,Mt);bt.push(Ye)}const nn=new GainNode(d,{gain:te});if(bt.push(nn),Qe>0&&tn>0&&Tt>0&&(De.getDelay(tn,Tt,a),De.sendDelay(nn,Qe)),Ht>0){let Ye;if(It!==void 0){let jt,Vt=getSound(It);Array.isArray(Vt)?jt=Vt.data.samples[Xt%Vt.data.samples.length]:typeof Vt=="object"&&(jt=Object.values(Vt.data.samples).flat()[Xt%Object.values(Vt.data.samples).length]),Ye=await loadBuffer$1(jt,d,It,0)}De.getReverb(vt,wn,mn,Ft,Ye,Ke,Ot),De.sendReverb(nn,Ht)}if(_e!=null&&De.getDjf(_e,a),$t){const Ye=getAnalyserById($t,2**(On+5)),jt=effectSend(nn,Ye,1);mt.push(jt)}if(dn!=null){dn=applyGainCurve(dn);const Ye=new GainNode(d,{gain:dn});bt.push(Ye),De.connectToOutput(Ye)}else De.connectToOutput(nn);bt.slice(1).reduce((Ye,jt)=>Ye.connect(jt),bt[0]),mt=mt.concat(bt)},superdoughTrigger=(l,a,o,u)=>{superdough(a,l-o,a.duration/u,u)},waveforms=["triangle","square","sawtooth","sine"],waveformAliases=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function makeSaturationCurve(l,a){const o=l,u=new Float32Array(a);for(let p=0;p<a;p++){const d=p*2/a-1;u[p]=Math.tanh(d*o)}return u}function registerSynthSounds(){[...waveforms].forEach(l=>{registerSound(l,(a,o,u)=>{const[p,d,f,g]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]);let b=getOscillator(l,a,o),{node:O,stop:S,triggerRelease:M}=b;const A=gainNode(.3),{duration:F}=o;O.onended=()=>{O.disconnect(),A.disconnect(),u()};const $=gainNode(1);let B=O.connect(A).connect($);const I=a+F;getParamADSR(B.gain,p,d,f,g,0,1,a,I,"linear");const U=I+g+.01;return M?.(U),S(U),{node:B,stop:te=>{S(te)}}},{type:"synth",prebake:!0})}),registerSound("sbd",(l,a,o)=>{const{duration:u,decay:p=.5,pdecay:d=.5,penv:f=36,clip:g}=a,b=getAudioContext(),O=.02,S=1.2,M=.025,A=1,F=b.createOscillator();F.type="triangle",F.frequency.value=getFrequencyFromValue(a,29),F.detune.setValueAtTime(f*100,0),F.detune.setValueAtTime(f*100,l),F.detune.exponentialRampToValueAtTime(.001,l+d);const $=gainNode(1);$.gain.setValueAtTime(1,l+O),$.gain.exponentialRampToValueAtTime(.001,l+O+p),F.start(l);const B=getNoiseOscillator("brown",l,2),I=gainNode(1);I.gain.setValueAtTime(S,l),I.gain.exponentialRampToValueAtTime(.001,l+M);const U=new WaveShaperNode(b);U.curve=makeSaturationCurve(2,b.sampleRate);const te=gainNode(A);F.onended=()=>{F.disconnect(),$.disconnect(),U.disconnect(),B.node.disconnect(),I.disconnect(),te.disconnect(),o()};const de=F.connect(U).connect($).connect(te);B.node.connect(I).connect(te);let q=l+p+.01;return g!=null&&(q=Math.min(l+g*u,q)),te.gain.setValueAtTime(A,q-.01),te.gain.linearRampToValueAtTime(0,q),F.stop(q),B.stop(q),{node:de,stop:le=>{F.stop(le)}}},{type:"synth",prebake:!0}),registerSound("supersaw",(l,a,o)=>{const u=getAudioContext();let{duration:p,n:d,unison:f=5,spread:g=.6,detune:b}=a;b=b??d??.18;const O=getFrequencyFromValue(a),[S,M,A,F]=getADSRValues([a.attack,a.decay,a.sustain,a.release],"linear",[.001,.05,.6,.01]),$=l+p,B=$+F+.01,I=clamp(f,1,100);let U=I>1?clamp(g,0,1):0,te=getWorklet(u,"supersaw-oscillator",{frequency:O,begin:l,end:B,freqspread:b,voices:I,panspread:U},{outputChannelCount:[2]});const de=1/Math.sqrt(I);getPitchEnvelope(te.parameters.get("detune"),a,l,$);const se=getVibratoOscillator(te.parameters.get("detune"),a,l),q=applyFM(te.parameters.get("frequency"),a,l);let le=gainNode(1);le=te.connect(le),getParamADSR(le.gain,S,M,A,F,0,.3*de,l,$,"linear");let fe=webAudioTimeout(u,()=>{destroyAudioWorkletNode(te),le.disconnect(),o(),q?.stop(),se?.stop()},l,B);return{node:le,stop:_e=>{fe.stop(_e)}}},{prebake:!0,type:"synth"}),registerSound("bytebeat",(l,a,o)=>{const u=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:p=0}=a,d=getFrequencyFromValue(a),{byteBeatExpression:f=u[p%u.length],byteBeatStartTime:g}=a,b=getAudioContext();let{duration:O}=a;const[S,M,A,F]=getADSRValues([a.attack,a.decay,a.sustain,a.release],"linear",[.001,.05,.6,.01]),$=l+O,B=$+F+.01;let I=getWorklet(b,"byte-beat-processor",{frequency:d,begin:l,end:B},{outputChannelCount:[2]});I.port.postMessage({codeText:f,byteBeatStartTime:g,frequency:d});let U=gainNode(1);U=I.connect(U),getParamADSR(U.gain,S,M,A,F,0,1,l,$,"linear");let te=webAudioTimeout(b,()=>{destroyAudioWorkletNode(I),U.disconnect(),o()},l,B);return{node:U,stop:de=>{te.stop(de)}}},{prebake:!0,type:"synth"}),registerSound("pulse",(l,a,o)=>{const u=getAudioContext();let{pwrate:p,pwsweep:d}=a;d==null&&(p!=null?d=.3:d=0),p==null&&d!=null&&(p=1);let{duration:f,pw:g=.5}=a;const b=getFrequencyFromValue(a),[O,S,M,A]=getADSRValues([a.attack,a.decay,a.sustain,a.release],"linear",[.001,.05,.6,.01]),F=l+f,$=F+A+.01;let B=getWorklet(u,"pulse-oscillator",{frequency:b,begin:l,end:$,pulsewidth:g},{outputChannelCount:[2]});getPitchEnvelope(B.parameters.get("detune"),a,l,F);const I=getVibratoOscillator(B.parameters.get("detune"),a,l),U=applyFM(B.parameters.get("frequency"),a,l);let te=gainNode(1);te=B.connect(te),getParamADSR(te.gain,O,S,M,A,0,1,l,F,"linear");let de;d!=0&&(de=getLfo(u,l,$,{frequency:p,depth:d}),de.connect(B.parameters.get("pulsewidth")));let se=webAudioTimeout(u,()=>{destroyAudioWorkletNode(B),destroyAudioWorkletNode(de),te.disconnect(),o(),U?.stop(),I?.stop()},l,$);return{node:te,stop:q=>{se.stop(q)}}},{prebake:!0,type:"synth"}),[...noises].forEach(l=>{registerSound(l,(a,o,u)=>{const[p,d,f,g]=getADSRValues([o.attack,o.decay,o.sustain,o.release],"linear",[.001,.05,.6,.01]);let b,{density:O}=o;b=getNoiseOscillator(l,a,O);let{node:S,stop:M,triggerRelease:A}=b;const F=gainNode(.3),{duration:$}=o;S.onended=()=>{S.disconnect(),F.disconnect(),u()};const B=gainNode(1);let I=S.connect(F).connect(B);const U=a+$;getParamADSR(I.gain,p,d,f,g,0,1,a,U,"linear");const te=U+g+.01;return A?.(te),M(te),{node:I,stop:de=>{M(de)}}},{type:"synth",prebake:!0})}),waveformAliases.forEach(([l,a])=>soundMap$1.set({...soundMap$1.get(),[l]:soundMap$1.get()[a]}))}function waveformN(l,a){const o=new Float32Array(l+1),u=new Float32Array(l+1),p=getAudioContext(),d=p.createOscillator(),f={sawtooth:O=>[0,-1/O],square:O=>[0,O%2===0?0:1/O],triangle:O=>[O%2===0?0:1/(O*O),0]};if(!f[a])throw new Error(`unknown wave type ${a}`);o[0]=0,u[0]=0;let g=1;for(;g<=l;){const[O,S]=f[a](g);o[g]=O,u[g]=S,g++}const b=p.createPeriodicWave(o,u);return d.setPeriodicWave(b),d}function getOscillator(l,a,o){let{n:u,duration:p,noise:d=0}=o,f;!u||l==="sine"?(f=getAudioContext().createOscillator(),f.type=l||"triangle"):f=waveformN(u,l),f.frequency.value=getFrequencyFromValue(o),f.start(a);let g=getVibratoOscillator(f.detune,o,a);getPitchEnvelope(f.detune,o,a,a+p);const b=applyFM(f.frequency,o,a);let O;return d&&(O=getNoiseMix(f,d,a)),{node:O?.node||f,stop:S=>{b.stop(S),g?.stop(S),O?.stop(S),f.stop(S)},triggerRelease:S=>{}}}function buildSamples(l=1,a=.05,o=220,u=0,p=0,d=.1,f=0,g=1,b=0,O=0,S=0,M=0,A=0,F=0,$=0,B=0,I=0,U=1,te=0,de=0){let se=Math.PI*2,q=getAudioContext().sampleRate,le=He=>He>0?1:-1,fe=b*=500*se/q/q,_e=o*=(1+a*2*Math.random()-a)*se/q,Pe=[],Oe=0,Fe=0,we=0,ke=1,Ge=0,Be=0,Ze=0,Ve,Ee;for(u=u*q+9,te*=q,p*=q,d*=q,I*=q,O*=500*se/q**3,$*=se/q,S*=se/q,M*=q,A=A*q|0,Ee=u+te+p+d+I|0;we<Ee;Pe[we++]=Ze)++Be%(B*100|0)||(Ze=f?f>1?f>2?f>3?Math.sin((Oe%se)**3):Math.max(Math.min(Math.tan(Oe),1),-1):1-(2*Oe/se%2+2)%2:1-4*Math.abs(Math.round(Oe/se)-Oe/se):Math.sin(Oe),Ze=(A?1-de+de*Math.sin(se*we/A):1)*le(Ze)*Math.abs(Ze)**g*l*1*(we<u?we/u:we<u+te?1-(we-u)/te*(1-U):we<u+te+p?U:we<Ee-I?(Ee-we-I)/d*U:0),Ze=I?Ze/2+(I>we?0:(we<Ee-I?1:(Ee-we)/I)*Pe[we-I|0]/2):Ze),Ve=(o+=b+=O)*Math.cos($*Fe++),Oe+=Ve-Ve*F*(1-(Math.sin(we)+1)*1e9%2),ke&&++ke>M&&(o+=S,_e+=S,ke=0),A&&!(++Ge%A)&&(o=_e,b=fe,ke||=1);return Pe}const getZZFX=(l,a)=>{let{s:o,note:u=36,freq:p,zrand:d=0,attack:f=0,decay:g=0,sustain:b=.8,release:O=.1,curve:S=1,slide:M=0,deltaSlide:A=0,pitchJump:F=0,pitchJumpTime:$=0,lfo:B=0,znoise:I=0,zmod:U=0,zcrush:te=0,zdelay:de=0,tremolo:se=0,duration:q=.2,zzfx:le}=l;const fe=Math.max(q-f-g,0);typeof u=="string"&&(u=noteToMidi(u)),!p&&typeof u=="number"&&(p=midiToFreq$1(u)),o=o.replace("z_","");const _e=["sine","triangle","sawtooth","tan","noise"].indexOf(o)||0;S=o==="square"?0:S;const Oe=buildSamples(...le||[.25,d,p,f,fe,O,_e,S,M,A,F,$,B,I,U,te,de,b,g,se]),Fe=getAudioContext(),we=Fe.createBuffer(1,Oe.length,Fe.sampleRate);we.getChannelData(0).set(Oe);const ke=getAudioContext().createBufferSource();return ke.buffer=we,ke.start(a),{node:ke}};function registerZZFXSounds(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(l=>{registerSound(l,(a,o,u)=>{const{node:p}=getZZFX({s:l,...o},a);return p.onended=()=>{p.disconnect(),u()},{node:p,stop:()=>{}}},{type:"synth",prebake:!0})})}let worklet;async function dspWorklet(l,a){const o=`dsp-worklet-${Date.now()}`,u=`${a}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${o}', MyProcessor);
`,d=`data:text/javascript;base64,${btoa(u)}`;await l.audioWorklet.addModule(d);const f=new AudioWorkletNode(l,o);return{node:f,stop:()=>f.port.postMessage("stop")}}const stop=()=>{worklet&&(worklet?.stop(),worklet?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",l=>{l.data==="strudel-stop"?stop():l.data?.dough&&worklet?.node.port.postMessage(l.data)});const dough=async l=>{const a=getAudioContext();stop(),worklet=await dspWorklet(a,l),worklet.node.connect(a.destination)};function doughTrigger(l,a,o,u){window.postMessage({time:u,dough:l.value,currentTime:a,duration:l.duration,cps:o})}const Warpmode=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),seenKeys=new Set;async function getPayload(l,a,o=2048){const u=`${l},${o}`;if(!seenKeys.has(u)){const d=(await loadBuffer(l,a)).getChannelData(0),f=d.length,g=Math.max(1,Math.floor(f/o)),b=new Array(g);for(let O=0;O<g;O++){const S=O*o;b[O]=d.subarray(S,S+o)}return seenKeys.add(u),{frames:b,frameLen:o,numFrames:g,key:u}}return{frameLen:o,key:u}}function humanFileSize(l,a){var o=1024;if(l<o)return l+" B";var u=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],p=-1;do l/=o,++p;while(l>=o);return l.toFixed(1)+" "+u[p]}function parseWavSampleRate(l){const a=new DataView(l);let o=12;for(;o+8<=a.byteLength;){const u=String.fromCharCode(a.getUint8(o),a.getUint8(o+1),a.getUint8(o+2),a.getUint8(o+3)),p=a.getUint32(o+4,!0);if(u==="fmt ")return a.getUint32(o+12,!0);o+=8+p+(p&1)}return null}async function decodeAtNativeRate(l){const a=parseWavSampleRate(l)||44100;return await new OfflineAudioContext(1,1,a).decodeAudioData(l)}const loadCache$2={},loadBuffer=(l,a)=>{if(l=l.replace("#","%23"),!loadCache$2[l]){logger$1(`[wavetable] load table ${a}..`,"load-table",{url:l});const o=Date.now();loadCache$2[l]=fetch(l).then(u=>u.arrayBuffer()).then(async u=>{const p=Date.now()-o,d=humanFileSize(u.byteLength);return logger$1(`[wavetable] load table ${a}... done! loaded ${d} in ${p}ms`,"loaded-table",{url:l}),await decodeAtNativeRate(u)})}return loadCache$2[l]};function githubPath$2(l,a=""){if(!l.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[o,u]=l.split("github:");return u=u.endsWith("/")?u.slice(0,-1):u,u.split("/").length===2&&(u+="/main"),`https://raw.githubusercontent.com/${u}/${a}`}const _processTables=(l,a,o,u={})=>(a=l._base||a,Object.entries(l).forEach(([p,d])=>{if(p==="_base")return!1;if(typeof d=="string"&&(d=[d]),typeof d!="object")throw new Error("wrong json format for "+p);let f=a;f.startsWith("github:")&&(f=githubPath$2(f,"")),d=d.map(g=>f+g).filter(g=>g.toLowerCase().endsWith(".wav")?!0:(logger$1(`[wavetable] skipping ${g} -- wavetables must be ".wav" format`),!1)),d.length&&registerWaveTable(p,d,{baseUrl:a,frameLen:o})}));function registerWaveTable(l,a,o){registerSound(l,(u,p,d,f)=>onTriggerSynth(u,p,d,a,f,o?.frameLen??2048),{type:"wavetable",tables:a,...o})}const tables=async(l,a,o,u={})=>{if(o!==void 0)return _processTables(o,l,a);if(l.startsWith("github:")&&(l=githubPath$2(l,"strudel.json")),l.startsWith("local:")&&(l="http://localhost:5432"),typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(l).then(p=>p.json()).then(p=>_processTables(p,l,a,u)).catch(p=>{throw console.error(p),new Error(`error loading "${l}"`)})};async function onTriggerSynth(l,a,o,u,p,d){const{s:f,n:g=0,duration:b,clip:O}=a,S=getAudioContext(),[M,A,F,$]=getADSRValues([a.attack,a.decay,a.sustain,a.release]);let{warpmode:B}=a;typeof B=="string"&&(B=Warpmode[B.toUpperCase()]??Warpmode.NONE);const I=getFrequencyFromValue(a),{url:U,label:te}=getCommonSampleInfo(a,u),de=await getPayload(U,te,d);let se=l+b;O!==void 0&&(se=Math.min(l+O*b,se));const q=se+$,le=q+.01,fe=getWorklet(S,"wavetable-oscillator-processor",{begin:l,end:le,frequency:I,freqspread:a.detune,position:a.wt,warp:a.warp,warpMode:B,voices:Math.max(a.unison??1,1),panspread:a.spread,phaserand:a.wtphaserand??a.unison>1?1:0},{outputChannelCount:[2]});if(fe.port.postMessage({type:"table",payload:de}),S.currentTime>l){logger$1(`[wavetable] still loading sound "${f}:${g}"`,"highlight");return}const _e=[a.wtattack,a.wtdecay,a.wtsustain,a.wtrelease],Pe=[a.warpattack,a.warpdecay,a.warpsustain,a.warprelease],Oe=fe.parameters,Fe=Oe.get("position"),we=Oe.get("warp");let ke=a.wtrate;a.wtsync!=null&&(ke=p*a.wtsync);const Ge=applyParameterModulators(S,Fe,l,q,{offset:a.wt,amount:a.wtenv,defaultAmount:.5,shape:"linear",values:_e,holdEnd:se,defaultValues:[0,.5,0,.1]},{frequency:ke,depth:a.wtdepth,defaultDepth:.5,shape:a.wtshape,skew:a.wtskew,dcoffset:a.wtdc??0});let Be=a.warprate;a.warpsync!=null&&(Be=Be=p*a.warpsync);const Ze=applyParameterModulators(S,we,l,q,{offset:a.warp,amount:a.warpenv,defaultAmount:.5,shape:"linear",values:Pe,holdEnd:se,defaultValues:[0,.5,0,.1]},{frequency:Be,depth:a.warpdepth,defaultDepth:.5,shape:a.warpshape,skew:a.warpskew,dcoffset:a.warpdc??0}),Ve=getVibratoOscillator(fe.parameters.get("detune"),a,l),Ee=applyFM(fe.parameters.get("frequency"),a,l),He=S.createGain(),nt=fe.connect(He);getParamADSR(nt.gain,M,A,F,$,0,.3,l,se,"linear"),getPitchEnvelope(fe.parameters.get("detune"),a,l,se);const ht={node:nt,source:fe},Me=webAudioTimeout(S,()=>{destroyAudioWorkletNode(fe),Ve?.stop(),Ee?.stop(),nt.disconnect(),Ge?.disconnect(),Ze?.disconnect(),o()},l,le);return ht.stop=Xe=>{Me.stop(Xe)},ht}let doughWorklet;function initDoughWorklet(){const l=getAudioContext();doughWorklet=getWorklet(l,"dough-processor",{},{outputChannelCount:[2]}),connectToDestination(doughWorklet)}const soundMap=new Map,loadedSounds=new Map;Pattern$1.prototype.supradough=function(){return this.onTrigger((l,a,o,u)=>{l.value._begin=u,l.value._duration=l.duration/o,!doughWorklet&&initDoughWorklet();const p=(l.value.bank?l.value.bank+"_":"")+l.value.s,d=l.value.n??0,f=`${p}:${d}`;if(soundMap.has(p)&&(l.value.s=f),soundMap.has(p)&&!loadedSounds.has(f)){const g=soundMap.get(p),b=g[d%g.length];console.log(`load ${f} from ${b}`);const O=fetchSample(b);loadedSounds.set(f,O),O.then(({channels:S,sampleRate:M})=>doughWorklet.port.postMessage({sample:f,channels:S,sampleRate:M}))}doughWorklet.port.postMessage({spawn:l.value})},1)};function githubPath$1(l,a=""){if(!l.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[o,u]=l.split("github:");return u=u.endsWith("/")?u.slice(0,-1):u,u.split("/").length===2&&(u+="/main"),`https://raw.githubusercontent.com/${u}/${a}`}async function fetchSampleMap(l){if(l.startsWith("github:")&&(l=githubPath$1(l,"strudel.json")),l.startsWith("local:")&&(l="http://localhost:5432"),l.startsWith("shabda:")){let[u,p]=l.split("shabda:");l=`https://shabda.ndre.gr/${p}.json?strudel=1`}if(l.startsWith("shabda/speech")){let[u,p]=l.split("shabda/speech");p=p.startsWith("/")?p.substring(1):p;let[d,f]=p.split(":"),g="f",b="en-GB";d&&([b,g]=d.split("/")),l=`https://shabda.ndre.gr/speech/${f}.json?gender=${g}&language=${b}&strudel=1'`}if(typeof fetch!="function")return;const a=l.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const o=await fetch(l).then(u=>u.json()).catch(u=>{throw console.error(u),new Error(`error loading "${l}"`)});return[o,o._base||a]}async function fetchSample(l){const a=await fetch(l).then(u=>u.arrayBuffer()).then(u=>getAudioContext().decodeAudioData(u));let o=[];for(let u=0;u<a.numberOfChannels;u++)o.push(a.getChannelData(u));return{channels:o,sampleRate:a.sampleRate}}async function doughsamples(l,a){if(typeof l=="string"){const[o,u]=await fetchSampleMap(l);return doughsamples(o,u)}Object.entries(l).map(async([o,u])=>{o!=="_base"&&(u=u.map(p=>a+p),soundMap.set(o,u))})}const _workletUrl="data:text/javascript;base64,dmFyIGF0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgaHQ9KHUsbSxmKT0+bSBpbiB1P2F0KHUsbSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Zn0pOnVbbV09Zjt2YXIgZT0odSxtLGYpPT5odCh1LHR5cGVvZiBtIT0ic3ltYm9sIj9tKyIiOm0sZik7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxtPU1hdGguUEkvdSxmPTEvdTtsZXQgVj1oPT5NYXRoLnBvdyhoLDIpO2Z1bmN0aW9uIF8oaCl7cmV0dXJuIFYoaCl9ZnVuY3Rpb24gTyhoLHMsdCl7Y29uc3QgaT1NYXRoLnNpbigoMS10KSouNSpNYXRoLlBJKSxuPU1hdGguc2luKHQqLjUqTWF0aC5QSSk7cmV0dXJuIGgqaStzKm59Y2xhc3MgZ3tjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDApfXVwZGF0ZShzKXtjb25zdCB0PU1hdGguc2luKHRoaXMucGhhc2UqMipNYXRoLlBJKTtyZXR1cm4gdGhpcy5waGFzZT0odGhpcy5waGFzZStzL3UpJTEsdH19Y2xhc3MgSXtjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDApfXVwZGF0ZShzKXtyZXR1cm4gdGhpcy5waGFzZSs9ZipzLHRoaXMucGhhc2UlMSoyLTF9fWZ1bmN0aW9uIE0oaCxzKXtyZXR1cm4gaDxzPyhoLz1zLGgraC1oKmgtMSk6aD4xLXM/KGg9KGgtMSkvcyxoKmgraCtoKzEpOjB9Y2xhc3MgU3tjb25zdHJ1Y3RvcihzPXt9KXt0aGlzLnBoYXNlPXMucGhhc2U/PzB9dXBkYXRlKHMpe2NvbnN0IHQ9cy91O2xldCBpPU0odGhpcy5waGFzZSx0KSxuPTIqdGhpcy5waGFzZS0xLWk7cmV0dXJuIHRoaXMucGhhc2UrPXQsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZS09MSksbn19ZnVuY3Rpb24gVChoLHMsdCl7cmV0dXJuIGg8Mj8wOigobixsLHIpPT5yKihsLW4pK24pKC1zKi41LHMqLjUsdC8oaC0xKSl9ZnVuY3Rpb24geihoLHMpe3JldHVybiBoKk1hdGgucG93KDIscy8xMil9Y2xhc3MgRntjb25zdHJ1Y3RvcihzPXt9KXt0aGlzLnZvaWNlcz1zLnZvaWNlcz8/NSx0aGlzLmZyZXFzcHJlYWQ9cy5mcmVxc3ByZWFkPz8uMix0aGlzLnBhbnNwcmVhZD1zLnBhbnNwcmVhZD8/LjQsdGhpcy5waGFzZT1uZXcgRmxvYXQzMkFycmF5KHRoaXMudm9pY2VzKS5tYXAoKCk9Pk1hdGgucmFuZG9tKCkpfXVwZGF0ZShzKXtjb25zdCB0PU1hdGguc3FydCgxLXRoaXMucGFuc3ByZWFkKSxpPU1hdGguc3FydCh0aGlzLnBhbnNwcmVhZCk7bGV0IG49MCxsPTA7Zm9yKGxldCByPTA7cjx0aGlzLnZvaWNlcztyKyspe2NvbnN0IGE9eihzLFQodGhpcy52b2ljZXMsdGhpcy5mcmVxc3ByZWFkLHIpKS91LGM9KHImMSk9PTE7bGV0IGQ9dDtjJiYoZD1pKTtsZXQgYj1NKHRoaXMucGhhc2Vbcl0sYSksRT0yKnRoaXMucGhhc2Vbcl0tMS1iO249bitFKmQsbD1sK0UqZCx0aGlzLnBoYXNlW3JdKz1hLHRoaXMucGhhc2Vbcl0+MSYmKHRoaXMucGhhc2Vbcl0tPTEpfXJldHVybiBuK2x9fWNsYXNzIGt7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7dGhpcy5waGFzZSs9ZipzO2xldCB0PXRoaXMucGhhc2UlMTtyZXR1cm4odDwuNT8yKnQ6MS0yKih0LS41KSkqMi0xfX1jbGFzcyBxe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJzMCIsMCk7ZSh0aGlzLCJzMSIsMCl9dXBkYXRlKHMsdCxpPTApe2k9TWF0aC5tYXgoaSwwKSx0PU1hdGgubWluKHQsMmU0KTtjb25zdCBuPTIqTWF0aC5zaW4odCptKSxyPTEtTWF0aC5wb3coLjUsKGkrLjEyNSkvLjEyNSkqbjtyZXR1cm4gdGhpcy5zMD1yKnRoaXMuczAtbip0aGlzLnMxK24qcyx0aGlzLnMxPXIqdGhpcy5zMStuKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgQ3tjb25zdHJ1Y3RvcihzPTApe3RoaXMucGhhc2U9c31zYXcocyx0KXtsZXQgaT0odGhpcy5waGFzZStzKSUxLG49TShpLHQpO3JldHVybiAyKmktMS1ufXVwZGF0ZShzLHQ9LjUpe2NvbnN0IGk9cy91O2xldCBuPXRoaXMuc2F3KDAsaSktdGhpcy5zYXcodCxpKTtyZXR1cm4gdGhpcy5waGFzZT0odGhpcy5waGFzZStpKSUxLG4rdCoyLTF9fWNsYXNzIEx7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyx0PS41KXtyZXR1cm4gdGhpcy5waGFzZSs9ZipzLHRoaXMucGhhc2UlMTx0PzE6LTF9fWNsYXNzIFB7Y29uc3RydWN0b3IoKXtlKHRoaXMsInVwZGF0ZSIscz0+TWF0aC5yYW5kb20oKTxzKmY/TWF0aC5yYW5kb20oKTowKX19Y2xhc3MgTnt1cGRhdGUoKXtyZXR1cm4gTWF0aC5yYW5kb20oKSoyLTF9fWNsYXNzIEd7Y29uc3RydWN0b3IoKXt0aGlzLm91dD0wfXVwZGF0ZSgpe2xldCBzPU1hdGgucmFuZG9tKCkqMi0xO3JldHVybiB0aGlzLm91dD0odGhpcy5vdXQrLjAyKnMpLzEuMDIsdGhpcy5vdXR9fWNsYXNzIGp7Y29uc3RydWN0b3IoKXt0aGlzLmIwPTAsdGhpcy5iMT0wLHRoaXMuYjI9MCx0aGlzLmIzPTAsdGhpcy5iND0wLHRoaXMuYjU9MCx0aGlzLmI2PTB9dXBkYXRlKCl7Y29uc3Qgcz1NYXRoLnJhbmRvbSgpKjItMTt0aGlzLmIwPS45OTg4Nip0aGlzLmIwK3MqLjA1NTUxNzksdGhpcy5iMT0uOTkzMzIqdGhpcy5iMStzKi4wNzUwNzU5LHRoaXMuYjI9Ljk2OSp0aGlzLmIyK3MqLjE1Mzg1Mix0aGlzLmIzPS44NjY1KnRoaXMuYjMrcyouMzEwNDg1Nix0aGlzLmI0PS41NSp0aGlzLmI0K3MqLjUzMjk1MjIsdGhpcy5iNT0tLjc2MTYqdGhpcy5iNS1zKi4wMTY4OTg7Y29uc3QgdD10aGlzLmIwK3RoaXMuYjErdGhpcy5iMit0aGlzLmIzK3RoaXMuYjQrdGhpcy5iNSt0aGlzLmI2K3MqLjUzNjI7cmV0dXJuIHRoaXMuYjY9cyouMTE1OTI2LHQqLjExfX1jbGFzcyBCe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMSl9dXBkYXRlKHMpe3RoaXMucGhhc2UrPWYqcztsZXQgdD10aGlzLnBoYXNlPj0xPzE6MDtyZXR1cm4gdGhpcy5waGFzZT10aGlzLnBoYXNlJTEsdH19ZnVuY3Rpb24gUihoLHMsdCxpPTEpe2lmKGg8PTApcmV0dXJuIHM7aWYoaD49MSlyZXR1cm4gdDtsZXQgbjtyZXR1cm4gaT09PTA/bj1oOmk+MD9uPU1hdGgucG93KGgsaSk6bj0xLU1hdGgucG93KDEtaCwtaSkscysodC1zKSpufWNsYXNzIHZ7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5zdGF0ZT0ib2ZmIix0aGlzLnN0YXJ0VGltZT0wLHRoaXMuc3RhcnRWYWw9MCx0aGlzLmRlY2F5Q3VydmU9cy5kZWNheUN1cnZlPz8xfXVwZGF0ZShzLHQsaSxuLGwscil7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2Uib2ZmIjpyZXR1cm4gdD4wJiYodGhpcy5zdGF0ZT0iYXR0YWNrIix0aGlzLnN0YXJ0VGltZT1zLHRoaXMuc3RhcnRWYWw9MCksMDtjYXNlImF0dGFjayI6e2xldCBwPXMtdGhpcy5zdGFydFRpbWU7cmV0dXJuIHA+aT8odGhpcy5zdGF0ZT0iZGVjYXkiLHRoaXMuc3RhcnRUaW1lPXMsMSk6UihwL2ksdGhpcy5zdGFydFZhbCwxLDEpfWNhc2UiZGVjYXkiOntsZXQgcD1zLXRoaXMuc3RhcnRUaW1lLGE9UihwL24sMSxsLC10aGlzLmRlY2F5Q3VydmUpO3JldHVybiB0PD0wPyh0aGlzLnN0YXRlPSJyZWxlYXNlIix0aGlzLnN0YXJ0VGltZT1zLHRoaXMuc3RhcnRWYWw9YSxhKTpwPm4/KHRoaXMuc3RhdGU9InN1c3RhaW4iLHRoaXMuc3RhcnRUaW1lPXMsbCk6YX1jYXNlInN1c3RhaW4iOnJldHVybiB0PD0wJiYodGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWwpLGw7Y2FzZSJyZWxlYXNlIjp7bGV0IHA9cy10aGlzLnN0YXJ0VGltZTtpZihwPnIpcmV0dXJuIHRoaXMuc3RhdGU9Im9mZiIsMDtsZXQgYT1SKHAvcix0aGlzLnN0YXJ0VmFsLDAsLXRoaXMuZGVjYXlDdXJ2ZSk7cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWEpLGF9fXRocm93ImludmFsaWQgZW52ZWxvcGUgc3RhdGUifX1jb25zdCBXPTEwO2NsYXNzIHh7Y29uc3RydWN0b3IoKXtlKHRoaXMsIndyaXRlSWR4IiwwKTtlKHRoaXMsInJlYWRJZHgiLDApO2UodGhpcywiYnVmZmVyIixuZXcgRmxvYXQzMkFycmF5KFcqdSkpfXdyaXRlKHMsdCl7dGhpcy53cml0ZUlkeD0odGhpcy53cml0ZUlkeCsxKSV0aGlzLmJ1ZmZlci5sZW5ndGgsdGhpcy5idWZmZXJbdGhpcy53cml0ZUlkeF09cztsZXQgaT1NYXRoLm1pbihNYXRoLmZsb29yKHUqdCksdGhpcy5idWZmZXIubGVuZ3RoLTEpO3RoaXMucmVhZElkeD10aGlzLndyaXRlSWR4LWksdGhpcy5yZWFkSWR4PDAmJih0aGlzLnJlYWRJZHgrPXRoaXMuYnVmZmVyLmxlbmd0aCl9dXBkYXRlKHMsdCl7cmV0dXJuIHRoaXMud3JpdGUocyx0KSx0aGlzLmJ1ZmZlclt0aGlzLnJlYWRJZHhdfX1jbGFzcyBYe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJkZWxheSIsbmV3IHgpO2UodGhpcywibW9kdWxhdG9yIixuZXcgayl9dXBkYXRlKHMsdCxpLG4sbCl7Y29uc3Qgcj10aGlzLm1vZHVsYXRvci51cGRhdGUobikqbCxwPXRoaXMuZGVsYXkudXBkYXRlKHMsaSooMStyKSk7cmV0dXJuIE8ocyxwLHQpfX1jbGFzcyAke2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJob2xkIiwwKTtlKHRoaXMsInQiLDApfXVwZGF0ZShzLHQpe3JldHVybiB0aGlzLnQrKyV0PT09MCYmKHRoaXMudD0wLHRoaXMuaG9sZD1zKSx0aGlzLmhvbGR9fWNsYXNzIFV7dXBkYXRlKHMsdCl7dD1NYXRoLm1heCgxLHQpO2NvbnN0IGk9TWF0aC5wb3coMix0LTEpO3JldHVybiBNYXRoLnJvdW5kKHMqaSkvaX19Y2xhc3MgWXt1cGRhdGUocyx0PTAsaT0xKXtpPU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxpKSk7Y29uc3Qgbj1NYXRoLmV4cG0xKHQpO3JldHVybigxK24pKnMvKDErbipNYXRoLmFicyhzKSkqaX19Y2xhc3Mgd3tjb25zdHJ1Y3RvcihzLHQsaSl7ZSh0aGlzLCJidWZmZXIiKTtlKHRoaXMsInNhbXBsZVJhdGUiKTtlKHRoaXMsInBvcyIsMCk7ZSh0aGlzLCJzYW1wbGVGcmVxIixBKCkpO3RoaXMuYnVmZmVyPXMsdGhpcy5zYW1wbGVSYXRlPXQsdGhpcy5kdXJhdGlvbj10aGlzLmJ1ZmZlci5sZW5ndGgvdGhpcy5zYW1wbGVSYXRlLHRoaXMuc3BlZWQ9dS90aGlzLnNhbXBsZVJhdGUsaSYmKHRoaXMuc3BlZWQqPXRoaXMuZHVyYXRpb24pfXVwZGF0ZShzKXtpZih0aGlzLnBvcz49dGhpcy5idWZmZXIubGVuZ3RoKXJldHVybiAwO2NvbnN0IHQ9cy90aGlzLnNhbXBsZUZyZXEqdGhpcy5zcGVlZDtsZXQgaT10aGlzLmJ1ZmZlcltNYXRoLmZsb29yKHRoaXMucG9zKV07cmV0dXJuIHRoaXMucG9zPXRoaXMucG9zK3QsaX19ZSh3LCJzYW1wbGVzIixuZXcgTWFwKTtjb25zdCB5PShoLHM9ImxpbmVhciIsdCk9Pntjb25zdFtyLHAsYSxjXT1oO2lmKHI9PW51bGwmJnA9PW51bGwmJmE9PW51bGwmJmM9PW51bGwpcmV0dXJuIHQ/P1suMDAxLC4wMDEsMSwuMDFdO2NvbnN0IGQ9YT8/KHIhPW51bGwmJnA9PW51bGx8fHI9PW51bGwmJnA9PW51bGw/MTouMDAxKTtyZXR1cm5bTWF0aC5tYXgocj8/MCwuMDAxKSxNYXRoLm1heChwPz8wLC4wMDEpLE1hdGgubWluKGQsMSksTWF0aC5tYXgoYz8/MCwuMDEpXX07bGV0IEQ9e3NpbmU6ZyxzYXc6Uyx6YXc6SSxzYXd0b290aDpTLHphd3Rvb3RoOkksc3VwZXJzYXc6Rix0cmk6ayx0cmlhbmdsZTprLHB1bHNlOkMsc3F1YXJlOkMscHVsemU6TCxkdXN0OlAsY3JhY2tsZTpQLGltcHVsc2U6Qix3aGl0ZTpOLGJyb3duOkcscGluazpqfTtjb25zdCBaPXtjaG9ydXM6MCxub3RlOjQ4LHM6InRyaWFuZ2xlIixiYW5rOiIiLGdhaW46MSxwb3N0Z2FpbjoxLHZlbG9jaXR5OjEsZGVuc2l0eToiLjAzIixmdHlwZToiMTJkYiIsZmFuY2hvcjowLHJlc29uYW5jZTowLGhyZXNvbmFuY2U6MCxiYW5kcTowLGNoYW5uZWxzOlsxLDJdLHBoYXNlcmRlcHRoOi43NSxzaGFwZXZvbDoxLGRpc3RvcnR2b2w6MSxkZWxheTowLGJ5dGVCZWF0RXhwcmVzc2lvbjoiMCIsZGVsYXlmZWVkYmFjazouNSxkZWxheXNwZWVkOjEsZGVsYXl0aW1lOi4yNSxvcmJpdDoxLGk6MSxmZnQ6OCx6OiJ0cmlhbmdsZSIscGFuOi41LGZtaDoxLGZtZW52OjAsc3BlZWQ6MSxwdzouNX07bGV0IG89aD0+WltoXTtjb25zdCBIPXtjOjAsZDoyLGU6NCxmOjUsZzo3LGE6OSxiOjExfSxKPXsiIyI6MSxiOi0xLHM6MSxmOi0xfSxLPShoLHM9Myk9Pnt2YXIgYTtsZXRbdCxpPSIiLG49IiJdPSgoYT1TdHJpbmcoaCkubWF0Y2goL14oW2EtZ0EtR10pKFsjYnNmXSopKFswLTldKikkLykpPT1udWxsP3ZvaWQgMDphLnNsaWNlKDEpKXx8W107aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdub3QgYSBub3RlOiAiJytoKyciJyk7Y29uc3QgbD1IW3QudG9Mb3dlckNhc2UoKV0scj0oaT09bnVsbD92b2lkIDA6aS5zcGxpdCgiIikucmVkdWNlKChjLGQpPT5jK0pbZF0sMCkpfHwwO3JldHVybihOdW1iZXIobnx8cykrMSkqMTIrbCtyfSxRPWg9Pk1hdGgucG93KDIsKGgtNjkpLzEyKSo0NDAsQT1oPT4oaD1ofHxvKCJub3RlIiksdHlwZW9mIGg9PSJzdHJpbmciJiYoaD1LKGgsMykpLFEoaCkpO2NsYXNzIHR0e2NvbnN0cnVjdG9yKHMpe2UodGhpcywiaWQiLDApO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJhdHRhY2siKTtlKHRoaXMsImRlY2F5Iik7ZSh0aGlzLCJzdXN0YWluIik7ZSh0aGlzLCJyZWxlYXNlIik7ZSh0aGlzLCJfYmVnaW4iKTtlKHRoaXMsIl9kdXJhdGlvbiIpO2UodGhpcywiX3NvdW5kIik7ZSh0aGlzLCJfY2hhbm5lbHMiLDEpO2UodGhpcywiX2J1ZmZlcnMiKTtlKHRoaXMsInVuaXQiKTtlKHRoaXMsIl9wZW52Iik7ZSh0aGlzLCJwZW52Iik7ZSh0aGlzLCJwYXR0YWNrIik7ZSh0aGlzLCJwZGVjYXkiKTtlKHRoaXMsInBzdXN0YWluIik7ZSh0aGlzLCJwcmVsZWFzZSIpO2UodGhpcywidmliIik7ZSh0aGlzLCJfdmliIik7ZSh0aGlzLCJ2aWJtb2QiKTtlKHRoaXMsIl9mbSIpO2UodGhpcywiZm1oIik7ZSh0aGlzLCJmbWkiKTtlKHRoaXMsIl9mbWVudiIpO2UodGhpcywiZm1hdHRhY2siKTtlKHRoaXMsImZtZGVjYXkiKTtlKHRoaXMsImZtc3VzdGFpbiIpO2UodGhpcywiZm1yZWxlYXNlIik7ZSh0aGlzLCJfbHBlbnYiKTtlKHRoaXMsImxwZW52Iik7ZSh0aGlzLCJscGF0dGFjayIpO2UodGhpcywibHBkZWNheSIpO2UodGhpcywibHBzdXN0YWluIik7ZSh0aGlzLCJscHJlbGVhc2UiKTtlKHRoaXMsIl9ocGVudiIpO2UodGhpcywiaHBlbnYiKTtlKHRoaXMsImhwYXR0YWNrIik7ZSh0aGlzLCJocGRlY2F5Iik7ZSh0aGlzLCJocHN1c3RhaW4iKTtlKHRoaXMsImhwcmVsZWFzZSIpO2UodGhpcywiX2JwZW52Iik7ZSh0aGlzLCJicGVudiIpO2UodGhpcywiYnBhdHRhY2siKTtlKHRoaXMsImJwZGVjYXkiKTtlKHRoaXMsImJwc3VzdGFpbiIpO2UodGhpcywiYnByZWxlYXNlIik7ZSh0aGlzLCJjdXRvZmYiKTtlKHRoaXMsImhjdXRvZmYiKTtlKHRoaXMsImJhbmRmIik7ZSh0aGlzLCJjb2Fyc2UiKTtlKHRoaXMsImNydXNoIik7ZSh0aGlzLCJkaXN0b3J0Iik7ZSh0aGlzLCJmcmVxIik7ZSh0aGlzLCJub3RlIik7ZSh0aGlzLCJfbHBmIik7ZSh0aGlzLCJfaHBmIik7ZSh0aGlzLCJfYnBmIik7ZSh0aGlzLCJfY2hvcnVzIik7ZSh0aGlzLCJfY29hcnNlIik7ZSh0aGlzLCJfY3J1c2giKTtlKHRoaXMsIl9kaXN0b3J0Iik7dmFyIGksbixsLHIscCxhLGM7dGhpcy5mcmVxPz8odGhpcy5mcmVxPUEocy5ub3RlKSksdGhpcy5fYmVnaW49cy5fYmVnaW4sdGhpcy5fZHVyYXRpb249cy5fZHVyYXRpb24sdGhpcy5yZWxlYXNlPXMucmVsZWFzZT8/MDtsZXQgdD10aGlzO2lmKE9iamVjdC5hc3NpZ24odCxzKSx0LnM9dC5zPz9vKCJzIiksdC5nYWluPV8odC5nYWluPz9vKCJnYWluIikpLHQudmVsb2NpdHk9Xyh0LnZlbG9jaXR5Pz9vKCJ2ZWxvY2l0eSIpKSx0LnBvc3RnYWluPV8odC5wb3N0Z2Fpbj8/bygicG9zdGdhaW4iKSksdC5kZW5zaXR5PXQuZGVuc2l0eT8/bygiZGVuc2l0eSIpLHQuZmFuY2hvcj10LmZhbmNob3I/P28oImZhbmNob3IiKSx0LmRyaXZlPXQuZHJpdmU/Py42OSx0LnBoYXNlcmRlcHRoPXQucGhhc2VyZGVwdGg/P28oInBoYXNlcmRlcHRoIiksdC5zaGFwZXZvbD1fKHQuc2hhcGV2b2w/P28oInNoYXBldm9sIikpLHQuZGlzdG9ydHZvbD1fKHQuZGlzdG9ydHZvbD8/bygiZGlzdG9ydHZvbCIpKSx0Lmk9dC5pPz9vKCJpIiksdC5jaG9ydXM9dC5jaG9ydXM/P28oImNob3J1cyIpLHQuZmZ0PXQuZmZ0Pz9vKCJmZnQiKSx0LnBhbj10LnBhbj8/bygicGFuIiksdC5vcmJpdD10Lm9yYml0Pz9vKCJvcmJpdCIpLHQuZm1lbnY9dC5mbWVudj8/bygiZm1lbnYiKSx0LnJlc29uYW5jZT10LnJlc29uYW5jZT8/bygicmVzb25hbmNlIiksdC5ocmVzb25hbmNlPXQuaHJlc29uYW5jZT8/bygiaHJlc29uYW5jZSIpLHQuYmFuZHE9dC5iYW5kcT8/bygiYmFuZHEiKSx0LnNwZWVkPXQuc3BlZWQ/P28oInNwZWVkIiksdC5wdz10LnB3Pz9vKCJwdyIpLFt0LmF0dGFjayx0LmRlY2F5LHQuc3VzdGFpbix0LnJlbGVhc2VdPXkoW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV0pLHQuX2hvbGRFbmQ9dC5fYmVnaW4rdC5fZHVyYXRpb24sdC5fZW5kPXQuX2hvbGRFbmQrdC5yZWxlYXNlKy4wMSx0LmZtaSYmKHQucz09PSJzYXcifHx0LnM9PT0ic2F3dG9vdGgiKSYmKHQucz0iemF3IiksRFt0LnNdKXtjb25zdCBkPURbdC5zXTt0Ll9zb3VuZD1uZXcgZCx0Ll9jaGFubmVscz0xfWVsc2UgaWYody5zYW1wbGVzLmhhcyh0LnMpKXtjb25zdCBkPXcuc2FtcGxlcy5nZXQodC5zKTt0Ll9idWZmZXJzPVtdLHQuX2NoYW5uZWxzPWQuY2hhbm5lbHMubGVuZ3RoO2ZvcihsZXQgYj0wO2I8dC5fY2hhbm5lbHM7YisrKXQuX2J1ZmZlcnMucHVzaChuZXcgdyhkLmNoYW5uZWxzW2JdLGQuc2FtcGxlUmF0ZSx0LnVuaXQ9PT0iYyIpKX1lbHNlIGNvbnNvbGUud2Fybigic291bmQgbm90IGxvYWRlZCIsdC5zKTt0LnBlbnYmJih0Ll9wZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV09eShbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV0pKSx0LnZpYiYmKHQuX3ZpYj1uZXcgZyx0LnZpYm1vZD10LnZpYm1vZD8/bygidmlibW9kIikpLHQuZm1pJiYodC5fZm09bmV3IGcsdC5mbWg9dC5mbWg/P28oImZtaCIpLHQuZm1lbnYmJih0Ll9mbWVudj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXT15KFt0LmZtYXR0YWNrLHQuZm1kZWNheSx0LmZtc3VzdGFpbix0LmZtcmVsZWFzZV0pKSksdC5fYWRzcj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksdC5kZWxheT1fKHQuZGVsYXk/P28oImRlbGF5IikpLHQuZGVsYXlmZWVkYmFjaz10LmRlbGF5ZmVlZGJhY2s/P28oImRlbGF5ZmVlZGJhY2siKSx0LmRlbGF5c3BlZWQ9dC5kZWxheXNwZWVkPz9vKCJkZWxheXNwZWVkIiksdC5kZWxheXRpbWU9dC5kZWxheXRpbWU/P28oImRlbGF5dGltZSIpLHQubHBlbnYmJih0Ll9scGVudj1uZXcgdih7ZGVjYXlDdXJ2ZTo0fSksW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXT15KFt0LmxwYXR0YWNrLHQubHBkZWNheSx0Lmxwc3VzdGFpbix0LmxwcmVsZWFzZV0pKSx0LmhwZW52JiYodC5faHBlbnY9bmV3IHYoe2RlY2F5Q3VydmU6NH0pLFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV09eShbdC5ocGF0dGFjayx0LmhwZGVjYXksdC5ocHN1c3RhaW4sdC5ocHJlbGVhc2VdKSksdC5icGVudiYmKHQuX2JwZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdPXkoW3QuYnBhdHRhY2ssdC5icGRlY2F5LHQuYnBzdXN0YWluLHQuYnByZWxlYXNlXSkpLHQuX2Nob3J1cz10LmNob3J1cz9bXTpudWxsLHQuX2xwZj10LmN1dG9mZj9bXTpudWxsLHQuX2hwZj10LmhjdXRvZmY/W106bnVsbCx0Ll9icGY9dC5iYW5kZj9bXTpudWxsLHQuX2NvYXJzZT10LmNvYXJzZT9bXTpudWxsLHQuX2NydXNoPXQuY3J1c2g/W106bnVsbCx0Ll9kaXN0b3J0PXQuZGlzdG9ydD9bXTpudWxsO2ZvcihsZXQgZD0wO2Q8dGhpcy5fY2hhbm5lbHM7ZCsrKShpPXQuX2xwZik9PW51bGx8fGkucHVzaChuZXcgcSksKG49dC5faHBmKT09bnVsbHx8bi5wdXNoKG5ldyBxKSwobD10Ll9icGYpPT1udWxsfHxsLnB1c2gobmV3IHEpLChyPXQuX2Nob3J1cyk9PW51bGx8fHIucHVzaChuZXcgWCksKHA9dC5fY29hcnNlKT09bnVsbHx8cC5wdXNoKG5ldyAkKSwoYT10Ll9jcnVzaCk9PW51bGx8fGEucHVzaChuZXcgVSksKGM9dC5fZGlzdG9ydCk9PW51bGx8fGMucHVzaChuZXcgWSl9dXBkYXRlKHMpe2lmKCF0aGlzLl9zb3VuZCYmIXRoaXMuX2J1ZmZlcnMpcmV0dXJuIDA7bGV0IHQ9KyhzPj10aGlzLl9iZWdpbiYmczw9dGhpcy5faG9sZEVuZCksaT10aGlzLmZyZXEqdGhpcy5zcGVlZDtpZih0aGlzLl9mbSYmdGhpcy5mbWghPT12b2lkIDAmJnRoaXMuZm1pIT09dm9pZCAwKXtsZXQgYT10aGlzLmZtaTtpZih0aGlzLl9mbWVudil7Y29uc3QgYj10aGlzLl9mbWVudi51cGRhdGUocyx0LHRoaXMuZm1hdHRhY2ssdGhpcy5mbWRlY2F5LHRoaXMuZm1zdXN0YWluLHRoaXMuZm1yZWxlYXNlKTthPXRoaXMuZm1lbnYqYiphfWNvbnN0IGM9aSp0aGlzLmZtaCxkPWMqYTtpPWkrdGhpcy5fZm0udXBkYXRlKGMpKmR9aWYodGhpcy5fdmliJiZ0aGlzLnZpYm1vZCE9PXZvaWQgMCYmKGk9aSoyKioodGhpcy5fdmliLnVwZGF0ZSh0aGlzLnZpYikqdGhpcy52aWJtb2QvMTIpKSx0aGlzLl9wZW52JiZ0aGlzLnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fcGVudi51cGRhdGUocyx0LHRoaXMucGF0dGFjayx0aGlzLnBkZWNheSx0aGlzLnBzdXN0YWluLHRoaXMucHJlbGVhc2UpO2k9aSthKnRoaXMucGVudn1sZXQgbj10aGlzLmN1dG9mZjtpZihuIT09dm9pZCAwJiZ0aGlzLl9scGVudil7Y29uc3QgYT10aGlzLl9scGVudi51cGRhdGUocyx0LHRoaXMubHBhdHRhY2ssdGhpcy5scGRlY2F5LHRoaXMubHBzdXN0YWluLHRoaXMubHByZWxlYXNlKTtuPXRoaXMubHBlbnYqYSpuK259bGV0IGw9dGhpcy5oY3V0b2ZmO2lmKGwhPT12b2lkIDAmJnRoaXMuX2hwZW52JiZ0aGlzLmhwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2hwZW52LnVwZGF0ZShzLHQsdGhpcy5ocGF0dGFjayx0aGlzLmhwZGVjYXksdGhpcy5ocHN1c3RhaW4sdGhpcy5ocHJlbGVhc2UpO2w9MioqdGhpcy5ocGVudiphKmwrbH1sZXQgcj10aGlzLmJhbmRmO2lmKHIhPT12b2lkIDAmJnRoaXMuX2JwZW52JiZ0aGlzLmJwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2JwZW52LnVwZGF0ZShzLHQsdGhpcy5icGF0dGFjayx0aGlzLmJwZGVjYXksdGhpcy5icHN1c3RhaW4sdGhpcy5icHJlbGVhc2UpO3I9MioqdGhpcy5icGVudiphKnIrcn1jb25zdCBwPXRoaXMuX2Fkc3IudXBkYXRlKHMsdCx0aGlzLmF0dGFjayx0aGlzLmRlY2F5LHRoaXMuc3VzdGFpbix0aGlzLnJlbGVhc2UpO2ZvcihsZXQgYT0wO2E8dGhpcy5fY2hhbm5lbHM7YSsrKXtpZih0aGlzLl9zb3VuZCYmdGhpcy5zPT09InB1bHNlIj90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSx0aGlzLnB3KTp0aGlzLl9zb3VuZD90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSk6dGhpcy5fYnVmZmVycyYmKHRoaXMub3V0W2FdPXRoaXMuX2J1ZmZlcnNbYV0udXBkYXRlKGkpKSx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLmdhaW4qdGhpcy52ZWxvY2l0eSx0aGlzLl9jaG9ydXMpe2NvbnN0IGM9dGhpcy5fY2hvcnVzW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNob3J1cywuMDMrLjA1KmEsMSwuMTEpO3RoaXMub3V0W2FdPWMrdGhpcy5vdXRbYV19dGhpcy5fbHBmJiYodGhpcy5fbHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxuLHRoaXMucmVzb25hbmNlKSx0aGlzLm91dFthXT10aGlzLl9scGZbYV0uczEpLHRoaXMuX2hwZiYmKHRoaXMuX2hwZlthXS51cGRhdGUodGhpcy5vdXRbYV0sbCx0aGlzLmhyZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdLXRoaXMuX2hwZlthXS5zMSksdGhpcy5fYnBmJiYodGhpcy5fYnBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxyLHRoaXMuYmFuZHEpLHRoaXMub3V0W2FdPXRoaXMuX2JwZlthXS5zMCksdGhpcy5fY29hcnNlJiYodGhpcy5vdXRbYV09dGhpcy5fY29hcnNlW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNvYXJzZSkpLHRoaXMuX2NydXNoJiYodGhpcy5vdXRbYV09dGhpcy5fY3J1c2hbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY3J1c2gpKSx0aGlzLl9kaXN0b3J0JiYodGhpcy5vdXRbYV09dGhpcy5fZGlzdG9ydFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5kaXN0b3J0LHRoaXMuZGlzdG9ydHZvbCkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnAsdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qdGhpcy5wb3N0Z2Fpbix0aGlzLl9idWZmZXJzfHwodGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qLjIpfWlmKHRoaXMuX2NoYW5uZWxzPT09MSYmKHRoaXMub3V0WzFdPXRoaXMub3V0WzBdKSx0aGlzLnBhbiE9PS41KXtjb25zdCBhPXRoaXMucGFuKk1hdGguUEkvMjt0aGlzLm91dFswXT10aGlzLm91dFswXSpNYXRoLmNvcyhhKSx0aGlzLm91dFsxXT10aGlzLm91dFsxXSpNYXRoLnNpbihhKX19fWNsYXNzIHN0e2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe2UodGhpcywidm9pY2VzIixbXSk7ZSh0aGlzLCJ2aWQiLDApO2UodGhpcywicSIsW10pO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJkZWxheXNlbmQiLFswLDBdKTtlKHRoaXMsImRlbGF5dGltZSIsbygiZGVsYXl0aW1lIikpO2UodGhpcywiZGVsYXlmZWVkYmFjayIsbygiZGVsYXlmZWVkYmFjayIpKTtlKHRoaXMsImRlbGF5c3BlZWQiLG8oImRlbGF5c3BlZWQiKSk7ZSh0aGlzLCJ0IiwwKTt0aGlzLnNhbXBsZVJhdGU9cyx0aGlzLnQ9TWF0aC5mbG9vcih0KnMpLHRoaXMuX2RlbGF5TD1uZXcgeCx0aGlzLl9kZWxheVI9bmV3IHh9bG9hZFNhbXBsZShzLHQsaSl7dy5zYW1wbGVzLnNldChzLHtjaGFubmVsczp0LHNhbXBsZVJhdGU6aX0pfXNjaGVkdWxlU3Bhd24ocyl7aWYocy5fYmVnaW49PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJbZG91Z2hdOiBzY2hlZHVsZVNwYXduIGV4cGVjdGVkIF9iZWdpbiB0byBiZSBzZXQiKTtpZihzLl9kdXJhdGlvbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2R1cmF0aW9uIHRvIGJlIHNldCIpO3Muc2FtcGxlUmF0ZT10aGlzLnNhbXBsZVJhdGU7Y29uc3QgdD1NYXRoLmZsb29yKHMuX2JlZ2luKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTp0LHR5cGU6InNwYXduIixhcmc6c30pfXNwYXduKHMpe3MuaWQ9dGhpcy52aWQrKztjb25zdCB0PW5ldyB0dChzKTt0aGlzLnZvaWNlcy5wdXNoKHQpO2NvbnN0IGk9TWF0aC5jZWlsKHQuX2VuZCp0aGlzLnNhbXBsZVJhdGUpO3RoaXMuc2NoZWR1bGUoe3RpbWU6aSx0eXBlOiJkZXNwYXduIixhcmc6dC5pZH0pfWRlc3Bhd24ocyl7dGhpcy52b2ljZXM9dGhpcy52b2ljZXMuZmlsdGVyKHQ9PnQuaWQhPT1zKX1zY2hlZHVsZShzKXtpZighdGhpcy5xLmxlbmd0aCl7dGhpcy5xLnB1c2gocyk7cmV0dXJufWxldCB0PTA7Zm9yKDt0PHRoaXMucS5sZW5ndGgmJnRoaXMucVt0XS50aW1lPHMudGltZTspdCsrO3RoaXMucS5zcGxpY2UodCwwLHMpfXVwZGF0ZSgpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy50Oyl0aGlzW3RoaXMucVswXS50eXBlXSh0aGlzLnFbMF0uYXJnKSx0aGlzLnEuc2hpZnQoKTt0aGlzLm91dFswXT0wLHRoaXMub3V0WzFdPTA7Zm9yKGxldCBpPTA7aTx0aGlzLnZvaWNlcy5sZW5ndGg7aSsrKXRoaXMudm9pY2VzW2ldLnVwZGF0ZSh0aGlzLnQvdGhpcy5zYW1wbGVSYXRlKSx0aGlzLm91dFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdLHRoaXMub3V0WzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0sdGhpcy52b2ljZXNbaV0uZGVsYXkmJih0aGlzLmRlbGF5c2VuZFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdKnRoaXMudm9pY2VzW2ldLmRlbGF5LHRoaXMuZGVsYXlzZW5kWzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0qdGhpcy52b2ljZXNbaV0uZGVsYXksdGhpcy5kZWxheXRpbWU9dGhpcy52b2ljZXNbaV0uZGVsYXl0aW1lLHRoaXMuZGVsYXlzcGVlZD10aGlzLnZvaWNlc1tpXS5kZWxheXNwZWVkLHRoaXMuZGVsYXlmZWVkYmFjaz10aGlzLnZvaWNlc1tpXS5kZWxheWZlZWRiYWNrKTtjb25zdCBzPXRoaXMuX2RlbGF5TC51cGRhdGUodGhpcy5kZWxheXNlbmRbMF0sdGhpcy5kZWxheXRpbWUpLHQ9dGhpcy5fZGVsYXlSLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFsxXSx0aGlzLmRlbGF5dGltZSk7dGhpcy5kZWxheXNlbmRbMF09cyp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5kZWxheXNlbmRbMV09dCp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5vdXRbMF0rPXMsdGhpcy5vdXRbMV0rPXQsdGhpcy50Kyt9fWNvbnN0IGV0PShoLHMsdCk9Pk1hdGgubWluKE1hdGgubWF4KGgscyksdCk7Y2xhc3MgaXQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZG91Z2g9bmV3IHN0KHNhbXBsZVJhdGUsY3VycmVudFRpbWUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3MuZGF0YS5zcGF3bj90aGlzLmRvdWdoLnNjaGVkdWxlU3Bhd24ocy5kYXRhLnNwYXduKTpzLmRhdGEuc2FtcGxlP3RoaXMuZG91Z2gubG9hZFNhbXBsZShzLmRhdGEuc2FtcGxlLHMuZGF0YS5jaGFubmVscyxzLmRhdGEuc2FtcGxlUmF0ZSk6cy5kYXRhLnNhbXBsZXM/cy5kYXRhLnNhbXBsZXMuZm9yRWFjaCgoW3QsaSxuXSk9Pnt0aGlzLmRvdWdoLmxvYWRTYW1wbGUodCxpLG4pfSk6Y29uc29sZS5sb2coInVucmVjb2duaXplZCBldmVudCB0eXBlIixzLmRhdGEpfX1wcm9jZXNzKHMsdCxpKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtjb25zdCBuPXRbMF07Zm9yKGxldCBsPTA7bDxuWzBdLmxlbmd0aDtsKyspe3RoaXMuZG91Z2gudXBkYXRlKCk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspbltyXVtsXT1ldCh0aGlzLmRvdWdoLm91dFtyXSwtMSwxKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRvdWdoLXByb2Nlc3NvciIsaXQpfSkoKTsK";typeof sampleRate<"u"&&sampleRate;const workletUrl=_workletUrl;registerWorklet(workletUrl);const{Pattern,logger,repl}=core;setLogger(logger);const hap2value=l=>(l.ensureObjectValue(),l.value),webaudioOutput=(l,a,o,u,p)=>superdough(hap2value(l),p,o,u,l.whole?.begin.valueOf());function webaudioRepl(l={}){return l={getTime:()=>getAudioContext().currentTime,defaultOutput:webaudioOutput,...l},repl(l)}Pattern.prototype.dough=function(){return this.onTrigger(doughTrigger,1)};function drawTimeScope(l,{align:a=!0,color:o="white",thickness:u=3,scale:p=.25,pos:d=.75,trigger:f=0,ctx:g=getDrawContext(),id:b=1}={}){g.lineWidth=u,g.strokeStyle=o;let O=g.canvas;if(!l){g.beginPath();let B=d*O.height;g.moveTo(0,B),g.lineTo(O.width,B),g.stroke();return}const S=getAnalyzerData("time",b);g.beginPath();const M=l.frequencyBinCount;let A=a?Array.from(S).findIndex((B,I,U)=>I&&U[I-1]>-f&&B<=-f):0;A=Math.max(A,0);const F=O.width*1/M;let $=0;for(let B=A;B<M;B++){const I=S[B]+1,U=(d-p*(I-1))*O.height;B===0?g.moveTo($,U):g.lineTo($,U),$+=F}g.stroke()}function drawFrequencyScope(l,{color:a="white",scale:o=.25,pos:u=.75,lean:p=.5,min:d=-150,max:f=0,ctx:g=getDrawContext(),id:b=1}={}){if(!l){g.beginPath();let $=u*S.height;g.moveTo(0,$),g.lineTo(S.width,$),g.stroke();return}const O=getAnalyzerData("frequency",b),S=g.canvas;g.fillStyle=a;const M=l.frequencyBinCount,A=S.width*1/M;let F=0;for(let $=0;$<M;$++){const I=clamp$1((O[$]-d)/(f-d),0,1)*o,U=I*S.height,te=(u-I*p)*S.height;g.fillRect(F,te,Math.max(A,1),U),F+=A}}function clearScreen(l=0,a="0,0,0",o=getDrawContext()){l?(o.fillStyle=`rgba(${a},${1-l})`,o.fillRect(0,0,o.canvas.width,o.canvas.height)):o.clearRect(0,0,o.canvas.width,o.canvas.height)}Pattern$1.prototype.fscope=function(l={}){let a=l.id??1;return this.analyze(a).draw(()=>{clearScreen(l.smear,"0,0,0",l.ctx),analysers[a]&&drawFrequencyScope(analysers[a],l)},{id:a})},Pattern$1.prototype.tscope=function(l={}){let a=l.id??1;return this.analyze(a).draw(o=>{l.color=o[0]?.value?.color||getTheme().foreground,l.color,clearScreen(l.smear,"0,0,0",l.ctx),drawTimeScope(analysers[a],l)},{id:a})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;let latestColor={};Pattern$1.prototype.spectrum=function(l={}){let a=l.id??1;return this.analyze(a).draw(o=>{l.color=o[0]?.value?.color||latestColor[a]||getTheme().foreground,latestColor[a]=l.color,drawSpectrum(analysers[a],l)},{id:a})},Pattern$1.prototype.scope=Pattern$1.prototype.tscope;const lastFrames=new Map;function drawSpectrum(l,{thickness:a=3,speed:o=1,min:u=-80,max:p=0,ctx:d=getDrawContext(),id:f=1,color:g}={}){if(d.lineWidth=a,d.strokeStyle=g,!l)return;const b=o,O=getAnalyzerData("frequency",f),S=d.canvas;d.fillStyle=g;const M=l.frequencyBinCount;let A=lastFrames.get(f)||d.getImageData(0,0,S.width,S.height);lastFrames.set(f,A),d.clearRect(0,0,d.canvas.width,d.canvas.height),d.putImageData(A,-b,0);let F=S.width-o;for(let $=0;$<M;$++){const B=clamp$1((O[$]-u)/(p-u),0,1);d.globalAlpha=B;const I=Math.log($+1)/Math.log(M)*S.height;d.fillRect(F,S.height-I,b,2)}lastFrames.set(f,d.getImageData(0,0,S.width,S.height))}const index$9=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY,Warpmode,aliasBank,get analysers(){return analysers},get analysersData(){return analysersData},applyFM,applyGainCurve,applyParameterModulators,connectToDestination,createFilter,destroyAudioWorkletNode,distortionAlgorithms,dough,doughTrigger,doughsamples,drawFrequencyScope,drawTimeScope,drywet,dspWorklet,effectSend,errorLogger,gainNode,getADSRValues,getAnalyserById,getAnalyzerData,getAudioContext,getAudioContextCurrentTime,getAudioDevices,getCachedBuffer,getCompressor,getDefaultValue,getDistortion,getDistortionAlgorithm,getFrequencyFromValue,getLfo,getLoadedBuffer,getOscillator,getParamADSR,getPitchEnvelope,getSampleBuffer,getSampleBufferSource,getSampleInfo,getSound,getVibratoOscillator,getWorklet,getZZFX,initAudio,initAudioOnFirstClick,loadBuffer:loadBuffer$1,logger:logger$1,noises,onTriggerSample,onTriggerSynth,processSampleMap,registerSampleSource,registerSamplesPrefix,registerSound,registerSynthSounds,registerWaveTable,registerWorklet,registerZZFXSounds,resetDefaultValues,resetDefaults,resetGlobalEffects,resetLoadedSounds,reverseBuffer,samples,setDefault,setDefaultAudioContext,setDefaultValue,setDefaultValues,setGainCurve,setLogger,setMaxPolyphony,setMultiChannelOrbits,setVersionDefaults,soundAlias,soundMap:soundMap$1,superdough,superdoughTrigger,tables,waveformN,webAudioTimeout,webaudioOutput,webaudioRepl},Symbol.toStringTag,{value:"Module"}));let rangeFrom=[],rangeTo=[];(()=>{let l="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(a=>a?parseInt(a,36):1);for(let a=0,o=0;a<l.length;a++)(a%2?rangeTo:rangeFrom).push(o=o+l[a])})();function isExtendingChar(l){if(l<768)return!1;for(let a=0,o=rangeFrom.length;;){let u=a+o>>1;if(l<rangeFrom[u])o=u;else if(l>=rangeTo[u])a=u+1;else return!0;if(a==o)return!1}}function isRegionalIndicator(l){return l>=127462&&l<=127487}const ZWJ=8205;function findClusterBreak$1(l,a,o=!0,u=!0){return(o?nextClusterBreak:prevClusterBreak)(l,a,u)}function nextClusterBreak(l,a,o){if(a==l.length)return a;a&&surrogateLow$1(l.charCodeAt(a))&&surrogateHigh$1(l.charCodeAt(a-1))&&a--;let u=codePointAt$1(l,a);for(a+=codePointSize$1(u);a<l.length;){let p=codePointAt$1(l,a);if(u==ZWJ||p==ZWJ||o&&isExtendingChar(p))a+=codePointSize$1(p),u=p;else if(isRegionalIndicator(p)){let d=0,f=a-2;for(;f>=0&&isRegionalIndicator(codePointAt$1(l,f));)d++,f-=2;if(d%2==0)break;a+=2}else break}return a}function prevClusterBreak(l,a,o){for(;a>0;){let u=nextClusterBreak(l,a-2,o);if(u<a)return u;a--}return 0}function codePointAt$1(l,a){let o=l.charCodeAt(a);if(!surrogateHigh$1(o)||a+1==l.length)return o;let u=l.charCodeAt(a+1);return surrogateLow$1(u)?(o-55296<<10)+(u-56320)+65536:o}function surrogateLow$1(l){return l>=56320&&l<57344}function surrogateHigh$1(l){return l>=55296&&l<56320}function codePointSize$1(l){return l<65536?1:2}let Text$1=class $r{lineAt(a){if(a<0||a>this.length)throw new RangeError(`Invalid position ${a} in document of length ${this.length}`);return this.lineInner(a,!1,1,0)}line(a){if(a<1||a>this.lines)throw new RangeError(`Invalid line number ${a} in ${this.lines}-line document`);return this.lineInner(a,!0,1,0)}replace(a,o,u){[a,o]=clip(this,a,o);let p=[];return this.decompose(0,a,p,2),u.length&&u.decompose(0,u.length,p,3),this.decompose(o,this.length,p,1),TextNode.from(p,this.length-(o-a)+u.length)}append(a){return this.replace(this.length,this.length,a)}slice(a,o=this.length){[a,o]=clip(this,a,o);let u=[];return this.decompose(a,o,u,0),TextNode.from(u,o-a)}eq(a){if(a==this)return!0;if(a.length!=this.length||a.lines!=this.lines)return!1;let o=this.scanIdentical(a,1),u=this.length-this.scanIdentical(a,-1),p=new RawTextCursor(this),d=new RawTextCursor(a);for(let f=o,g=o;;){if(p.next(f),d.next(f),f=0,p.lineBreak!=d.lineBreak||p.done!=d.done||p.value!=d.value)return!1;if(g+=p.value.length,p.done||g>=u)return!0}}iter(a=1){return new RawTextCursor(this,a)}iterRange(a,o=this.length){return new PartialTextCursor(this,a,o)}iterLines(a,o){let u;if(a==null)u=this.iter();else{o==null&&(o=this.lines+1);let p=this.line(a).from;u=this.iterRange(p,Math.max(p,o==this.lines+1?this.length:o<=1?0:this.line(o-1).to))}return new LineCursor(u)}toString(){return this.sliceString(0)}toJSON(){let a=[];return this.flatten(a),a}constructor(){}static of(a){if(a.length==0)throw new RangeError("A document must have at least one line");return a.length==1&&!a[0]?$r.empty:a.length<=32?new TextLeaf(a):TextNode.from(TextLeaf.split(a,[]))}};class TextLeaf extends Text$1{constructor(a,o=textLength(a)){super(),this.text=a,this.length=o}get lines(){return this.text.length}get children(){return null}lineInner(a,o,u,p){for(let d=0;;d++){let f=this.text[d],g=p+f.length;if((o?u:g)>=a)return new Line(p,g,u,f);p=g+1,u++}}decompose(a,o,u,p){let d=a<=0&&o>=this.length?this:new TextLeaf(sliceText(this.text,a,o),Math.min(o,this.length)-Math.max(0,a));if(p&1){let f=u.pop(),g=appendText(d.text,f.text.slice(),0,d.length);if(g.length<=32)u.push(new TextLeaf(g,f.length+d.length));else{let b=g.length>>1;u.push(new TextLeaf(g.slice(0,b)),new TextLeaf(g.slice(b)))}}else u.push(d)}replace(a,o,u){if(!(u instanceof TextLeaf))return super.replace(a,o,u);[a,o]=clip(this,a,o);let p=appendText(this.text,appendText(u.text,sliceText(this.text,0,a)),o),d=this.length+u.length-(o-a);return p.length<=32?new TextLeaf(p,d):TextNode.from(TextLeaf.split(p,[]),d)}sliceString(a,o=this.length,u=`
`){[a,o]=clip(this,a,o);let p="";for(let d=0,f=0;d<=o&&f<this.text.length;f++){let g=this.text[f],b=d+g.length;d>a&&f&&(p+=u),a<b&&o>d&&(p+=g.slice(Math.max(0,a-d),o-d)),d=b+1}return p}flatten(a){for(let o of this.text)a.push(o)}scanIdentical(){return 0}static split(a,o){let u=[],p=-1;for(let d of a)u.push(d),p+=d.length+1,u.length==32&&(o.push(new TextLeaf(u,p)),u=[],p=-1);return p>-1&&o.push(new TextLeaf(u,p)),o}}class TextNode extends Text$1{constructor(a,o){super(),this.children=a,this.length=o,this.lines=0;for(let u of a)this.lines+=u.lines}lineInner(a,o,u,p){for(let d=0;;d++){let f=this.children[d],g=p+f.length,b=u+f.lines-1;if((o?b:g)>=a)return f.lineInner(a,o,u,p);p=g+1,u=b+1}}decompose(a,o,u,p){for(let d=0,f=0;f<=o&&d<this.children.length;d++){let g=this.children[d],b=f+g.length;if(a<=b&&o>=f){let O=p&((f<=a?1:0)|(b>=o?2:0));f>=a&&b<=o&&!O?u.push(g):g.decompose(a-f,o-f,u,O)}f=b+1}}replace(a,o,u){if([a,o]=clip(this,a,o),u.lines<this.lines)for(let p=0,d=0;p<this.children.length;p++){let f=this.children[p],g=d+f.length;if(a>=d&&o<=g){let b=f.replace(a-d,o-d,u),O=this.lines-f.lines+b.lines;if(b.lines<O>>4&&b.lines>O>>6){let S=this.children.slice();return S[p]=b,new TextNode(S,this.length-(o-a)+u.length)}return super.replace(d,g,b)}d=g+1}return super.replace(a,o,u)}sliceString(a,o=this.length,u=`
`){[a,o]=clip(this,a,o);let p="";for(let d=0,f=0;d<this.children.length&&f<=o;d++){let g=this.children[d],b=f+g.length;f>a&&d&&(p+=u),a<b&&o>f&&(p+=g.sliceString(a-f,o-f,u)),f=b+1}return p}flatten(a){for(let o of this.children)o.flatten(a)}scanIdentical(a,o){if(!(a instanceof TextNode))return 0;let u=0,[p,d,f,g]=o>0?[0,0,this.children.length,a.children.length]:[this.children.length-1,a.children.length-1,-1,-1];for(;;p+=o,d+=o){if(p==f||d==g)return u;let b=this.children[p],O=a.children[d];if(b!=O)return u+b.scanIdentical(O,o);u+=b.length+1}}static from(a,o=a.reduce((u,p)=>u+p.length+1,-1)){let u=0;for(let F of a)u+=F.lines;if(u<32){let F=[];for(let $ of a)$.flatten(F);return new TextLeaf(F,o)}let p=Math.max(32,u>>5),d=p<<1,f=p>>1,g=[],b=0,O=-1,S=[];function M(F){let $;if(F.lines>d&&F instanceof TextNode)for(let B of F.children)M(B);else F.lines>f&&(b>f||!b)?(A(),g.push(F)):F instanceof TextLeaf&&b&&($=S[S.length-1])instanceof TextLeaf&&F.lines+$.lines<=32?(b+=F.lines,O+=F.length+1,S[S.length-1]=new TextLeaf($.text.concat(F.text),$.length+1+F.length)):(b+F.lines>p&&A(),b+=F.lines,O+=F.length+1,S.push(F))}function A(){b!=0&&(g.push(S.length==1?S[0]:TextNode.from(S,O)),O=-1,b=S.length=0)}for(let F of a)M(F);return A(),g.length==1?g[0]:new TextNode(g,o)}}Text$1.empty=new TextLeaf([""],0);function textLength(l){let a=-1;for(let o of l)a+=o.length+1;return a}function appendText(l,a,o=0,u=1e9){for(let p=0,d=0,f=!0;d<l.length&&p<=u;d++){let g=l[d],b=p+g.length;b>=o&&(b>u&&(g=g.slice(0,u-p)),p<o&&(g=g.slice(o-p)),f?(a[a.length-1]+=g,f=!1):a.push(g)),p=b+1}return a}function sliceText(l,a,o){return appendText(l,[""],a,o)}class RawTextCursor{constructor(a,o=1){this.dir=o,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[a],this.offsets=[o>0?1:(a instanceof TextLeaf?a.text.length:a.children.length)<<1]}nextInner(a,o){for(this.done=this.lineBreak=!1;;){let u=this.nodes.length-1,p=this.nodes[u],d=this.offsets[u],f=d>>1,g=p instanceof TextLeaf?p.text.length:p.children.length;if(f==(o>0?g:0)){if(u==0)return this.done=!0,this.value="",this;o>0&&this.offsets[u-1]++,this.nodes.pop(),this.offsets.pop()}else if((d&1)==(o>0?0:1)){if(this.offsets[u]+=o,a==0)return this.lineBreak=!0,this.value=`
`,this;a--}else if(p instanceof TextLeaf){let b=p.text[f+(o<0?-1:0)];if(this.offsets[u]+=o,b.length>Math.max(0,a))return this.value=a==0?b:o>0?b.slice(a):b.slice(0,b.length-a),this;a-=b.length}else{let b=p.children[f+(o<0?-1:0)];a>b.length?(a-=b.length,this.offsets[u]+=o):(o<0&&this.offsets[u]--,this.nodes.push(b),this.offsets.push(o>0?1:(b instanceof TextLeaf?b.text.length:b.children.length)<<1))}}}next(a=0){return a<0&&(this.nextInner(-a,-this.dir),a=this.value.length),this.nextInner(a,this.dir)}}class PartialTextCursor{constructor(a,o,u){this.value="",this.done=!1,this.cursor=new RawTextCursor(a,o>u?-1:1),this.pos=o>u?a.length:0,this.from=Math.min(o,u),this.to=Math.max(o,u)}nextInner(a,o){if(o<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;a+=Math.max(0,o<0?this.pos-this.to:this.from-this.pos);let u=o<0?this.pos-this.from:this.to-this.pos;a>u&&(a=u),u-=a;let{value:p}=this.cursor.next(a);return this.pos+=(p.length+a)*o,this.value=p.length<=u?p:o<0?p.slice(p.length-u):p.slice(0,u),this.done=!this.value,this}next(a=0){return a<0?a=Math.max(a,this.from-this.pos):a>0&&(a=Math.min(a,this.to-this.pos)),this.nextInner(a,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(a){this.inner=a,this.afterBreak=!0,this.value="",this.done=!1}next(a=0){let{done:o,lineBreak:u,value:p}=this.inner.next(a);return o&&this.afterBreak?(this.value="",this.afterBreak=!1):o?(this.done=!0,this.value=""):u?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=p,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text$1.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});class Line{constructor(a,o,u,p){this.from=a,this.to=o,this.number=u,this.text=p}get length(){return this.to-this.from}}function clip(l,a,o){return a=Math.max(0,Math.min(l.length,a)),[a,Math.max(a,Math.min(l.length,o))]}function findClusterBreak(l,a,o=!0,u=!0){return findClusterBreak$1(l,a,o,u)}function surrogateLow(l){return l>=56320&&l<57344}function surrogateHigh(l){return l>=55296&&l<56320}function codePointAt(l,a){let o=l.charCodeAt(a);if(!surrogateHigh(o)||a+1==l.length)return o;let u=l.charCodeAt(a+1);return surrogateLow(u)?(o-55296<<10)+(u-56320)+65536:o}function fromCodePoint(l){return l<=65535?String.fromCharCode(l):(l-=65536,String.fromCharCode((l>>10)+55296,(l&1023)+56320))}function codePointSize(l){return l<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=function(l){return l[l.Simple=0]="Simple",l[l.TrackDel=1]="TrackDel",l[l.TrackBefore=2]="TrackBefore",l[l.TrackAfter=3]="TrackAfter",l}(MapMode||(MapMode={}));class ChangeDesc{constructor(a){this.sections=a}get length(){let a=0;for(let o=0;o<this.sections.length;o+=2)a+=this.sections[o];return a}get newLength(){let a=0;for(let o=0;o<this.sections.length;o+=2){let u=this.sections[o+1];a+=u<0?this.sections[o]:u}return a}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(a){for(let o=0,u=0,p=0;o<this.sections.length;){let d=this.sections[o++],f=this.sections[o++];f<0?(a(u,p,d),p+=d):p+=f,u+=d}}iterChangedRanges(a,o=!1){iterChanges(this,a,o)}get invertedDesc(){let a=[];for(let o=0;o<this.sections.length;){let u=this.sections[o++],p=this.sections[o++];p<0?a.push(u,p):a.push(p,u)}return new ChangeDesc(a)}composeDesc(a){return this.empty?a:a.empty?this:composeSets(this,a)}mapDesc(a,o=!1){return a.empty?this:mapSet(this,a,o)}mapPos(a,o=-1,u=MapMode.Simple){let p=0,d=0;for(let f=0;f<this.sections.length;){let g=this.sections[f++],b=this.sections[f++],O=p+g;if(b<0){if(O>a)return d+(a-p);d+=g}else{if(u!=MapMode.Simple&&O>=a&&(u==MapMode.TrackDel&&p<a&&O>a||u==MapMode.TrackBefore&&p<a||u==MapMode.TrackAfter&&O>a))return null;if(O>a||O==a&&o<0&&!g)return a==p||o<0?d:d+b;d+=b}p=O}if(a>p)throw new RangeError(`Position ${a} is out of range for changeset of length ${p}`);return d}touchesRange(a,o=a){for(let u=0,p=0;u<this.sections.length&&p<=o;){let d=this.sections[u++],f=this.sections[u++],g=p+d;if(f>=0&&p<=o&&g>=a)return p<a&&g>o?"cover":!0;p=g}return!1}toString(){let a="";for(let o=0;o<this.sections.length;){let u=this.sections[o++],p=this.sections[o++];a+=(a?" ":"")+u+(p>=0?":"+p:"")}return a}toJSON(){return this.sections}static fromJSON(a){if(!Array.isArray(a)||a.length%2||a.some(o=>typeof o!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(a)}static create(a){return new ChangeDesc(a)}}class ChangeSet extends ChangeDesc{constructor(a,o){super(a),this.inserted=o}apply(a){if(this.length!=a.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(o,u,p,d,f)=>a=a.replace(p,p+(u-o),f),!1),a}mapDesc(a,o=!1){return mapSet(this,a,o,!0)}invert(a){let o=this.sections.slice(),u=[];for(let p=0,d=0;p<o.length;p+=2){let f=o[p],g=o[p+1];if(g>=0){o[p]=g,o[p+1]=f;let b=p>>1;for(;u.length<b;)u.push(Text$1.empty);u.push(f?a.slice(d,d+f):Text$1.empty)}d+=f}return new ChangeSet(o,u)}compose(a){return this.empty?a:a.empty?this:composeSets(this,a,!0)}map(a,o=!1){return a.empty?this:mapSet(this,a,o,!0)}iterChanges(a,o=!1){iterChanges(this,a,o)}get desc(){return ChangeDesc.create(this.sections)}filter(a){let o=[],u=[],p=[],d=new SectionIter(this);e:for(let f=0,g=0;;){let b=f==a.length?1e9:a[f++];for(;g<b||g==b&&d.len==0;){if(d.done)break e;let S=Math.min(d.len,b-g);addSection(p,S,-1);let M=d.ins==-1?-1:d.off==0?d.ins:0;addSection(o,S,M),M>0&&addInsert(u,o,d.text),d.forward(S),g+=S}let O=a[f++];for(;g<O;){if(d.done)break e;let S=Math.min(d.len,O-g);addSection(o,S,-1),addSection(p,S,d.ins==-1?-1:d.off==0?d.ins:0),d.forward(S),g+=S}}return{changes:new ChangeSet(o,u),filtered:ChangeDesc.create(p)}}toJSON(){let a=[];for(let o=0;o<this.sections.length;o+=2){let u=this.sections[o],p=this.sections[o+1];p<0?a.push(u):p==0?a.push([u]):a.push([u].concat(this.inserted[o>>1].toJSON()))}return a}static of(a,o,u){let p=[],d=[],f=0,g=null;function b(S=!1){if(!S&&!p.length)return;f<o&&addSection(p,o-f,-1);let M=new ChangeSet(p,d);g=g?g.compose(M.map(g)):M,p=[],d=[],f=0}function O(S){if(Array.isArray(S))for(let M of S)O(M);else if(S instanceof ChangeSet){if(S.length!=o)throw new RangeError(`Mismatched change set length (got ${S.length}, expected ${o})`);b(),g=g?g.compose(S.map(g)):S}else{let{from:M,to:A=M,insert:F}=S;if(M>A||M<0||A>o)throw new RangeError(`Invalid change range ${M} to ${A} (in doc of length ${o})`);let $=F?typeof F=="string"?Text$1.of(F.split(u||DefaultSplit)):F:Text$1.empty,B=$.length;if(M==A&&B==0)return;M<f&&b(),M>f&&addSection(p,M-f,-1),addSection(p,A-M,B),addInsert(d,p,$),f=A}}return O(a),b(!g),g}static empty(a){return new ChangeSet(a?[a,-1]:[],[])}static fromJSON(a){if(!Array.isArray(a))throw new RangeError("Invalid JSON representation of ChangeSet");let o=[],u=[];for(let p=0;p<a.length;p++){let d=a[p];if(typeof d=="number")o.push(d,-1);else{if(!Array.isArray(d)||typeof d[0]!="number"||d.some((f,g)=>g&&typeof f!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(d.length==1)o.push(d[0],0);else{for(;u.length<p;)u.push(Text$1.empty);u[p]=Text$1.of(d.slice(1)),o.push(d[0],u[p].length)}}}return new ChangeSet(o,u)}static createSet(a,o){return new ChangeSet(a,o)}}function addSection(l,a,o,u=!1){if(a==0&&o<=0)return;let p=l.length-2;p>=0&&o<=0&&o==l[p+1]?l[p]+=a:p>=0&&a==0&&l[p]==0?l[p+1]+=o:u?(l[p]+=a,l[p+1]+=o):l.push(a,o)}function addInsert(l,a,o){if(o.length==0)return;let u=a.length-2>>1;if(u<l.length)l[l.length-1]=l[l.length-1].append(o);else{for(;l.length<u;)l.push(Text$1.empty);l.push(o)}}function iterChanges(l,a,o){let u=l.inserted;for(let p=0,d=0,f=0;f<l.sections.length;){let g=l.sections[f++],b=l.sections[f++];if(b<0)p+=g,d+=g;else{let O=p,S=d,M=Text$1.empty;for(;O+=g,S+=b,b&&u&&(M=M.append(u[f-2>>1])),!(o||f==l.sections.length||l.sections[f+1]<0);)g=l.sections[f++],b=l.sections[f++];a(p,O,d,S,M),p=O,d=S}}}function mapSet(l,a,o,u=!1){let p=[],d=u?[]:null,f=new SectionIter(l),g=new SectionIter(a);for(let b=-1;;){if(f.done&&g.len||g.done&&f.len)throw new Error("Mismatched change set lengths");if(f.ins==-1&&g.ins==-1){let O=Math.min(f.len,g.len);addSection(p,O,-1),f.forward(O),g.forward(O)}else if(g.ins>=0&&(f.ins<0||b==f.i||f.off==0&&(g.len<f.len||g.len==f.len&&!o))){let O=g.len;for(addSection(p,g.ins,-1);O;){let S=Math.min(f.len,O);f.ins>=0&&b<f.i&&f.len<=S&&(addSection(p,0,f.ins),d&&addInsert(d,p,f.text),b=f.i),f.forward(S),O-=S}g.next()}else if(f.ins>=0){let O=0,S=f.len;for(;S;)if(g.ins==-1){let M=Math.min(S,g.len);O+=M,S-=M,g.forward(M)}else if(g.ins==0&&g.len<S)S-=g.len,g.next();else break;addSection(p,O,b<f.i?f.ins:0),d&&b<f.i&&addInsert(d,p,f.text),b=f.i,f.forward(f.len-S)}else{if(f.done&&g.done)return d?ChangeSet.createSet(p,d):ChangeDesc.create(p);throw new Error("Mismatched change set lengths")}}}function composeSets(l,a,o=!1){let u=[],p=o?[]:null,d=new SectionIter(l),f=new SectionIter(a);for(let g=!1;;){if(d.done&&f.done)return p?ChangeSet.createSet(u,p):ChangeDesc.create(u);if(d.ins==0)addSection(u,d.len,0,g),d.next();else if(f.len==0&&!f.done)addSection(u,0,f.ins,g),p&&addInsert(p,u,f.text),f.next();else{if(d.done||f.done)throw new Error("Mismatched change set lengths");{let b=Math.min(d.len2,f.len),O=u.length;if(d.ins==-1){let S=f.ins==-1?-1:f.off?0:f.ins;addSection(u,b,S,g),p&&S&&addInsert(p,u,f.text)}else f.ins==-1?(addSection(u,d.off?0:d.len,b,g),p&&addInsert(p,u,d.textBit(b))):(addSection(u,d.off?0:d.len,f.off?0:f.ins,g),p&&!f.off&&addInsert(p,u,f.text));g=(d.ins>b||f.ins>=0&&f.len>b)&&(g||u.length>O),d.forward2(b),f.forward(b)}}}}class SectionIter{constructor(a){this.set=a,this.i=0,this.next()}next(){let{sections:a}=this.set;this.i<a.length?(this.len=a[this.i++],this.ins=a[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:a}=this.set,o=this.i-2>>1;return o>=a.length?Text$1.empty:a[o]}textBit(a){let{inserted:o}=this.set,u=this.i-2>>1;return u>=o.length&&!a?Text$1.empty:o[u].slice(this.off,a==null?void 0:this.off+a)}forward(a){a==this.len?this.next():(this.len-=a,this.off+=a)}forward2(a){this.ins==-1?this.forward(a):a==this.ins?this.next():(this.ins-=a,this.off+=a)}}class SelectionRange{constructor(a,o,u){this.from=a,this.to=o,this.flags=u}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let a=this.flags&7;return a==7?null:a}get goalColumn(){let a=this.flags>>6;return a==16777215?void 0:a}map(a,o=-1){let u,p;return this.empty?u=p=a.mapPos(this.from,o):(u=a.mapPos(this.from,1),p=a.mapPos(this.to,-1)),u==this.from&&p==this.to?this:new SelectionRange(u,p,this.flags)}extend(a,o=a){if(a<=this.anchor&&o>=this.anchor)return EditorSelection.range(a,o);let u=Math.abs(a-this.anchor)>Math.abs(o-this.anchor)?a:o;return EditorSelection.range(this.anchor,u)}eq(a,o=!1){return this.anchor==a.anchor&&this.head==a.head&&(!o||!this.empty||this.assoc==a.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(a){if(!a||typeof a.anchor!="number"||typeof a.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(a.anchor,a.head)}static create(a,o,u){return new SelectionRange(a,o,u)}}class EditorSelection{constructor(a,o){this.ranges=a,this.mainIndex=o}map(a,o=-1){return a.empty?this:EditorSelection.create(this.ranges.map(u=>u.map(a,o)),this.mainIndex)}eq(a,o=!1){if(this.ranges.length!=a.ranges.length||this.mainIndex!=a.mainIndex)return!1;for(let u=0;u<this.ranges.length;u++)if(!this.ranges[u].eq(a.ranges[u],o))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(a,o=!0){return EditorSelection.create([a].concat(this.ranges),o?0:this.mainIndex+1)}replaceRange(a,o=this.mainIndex){let u=this.ranges.slice();return u[o]=a,EditorSelection.create(u,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(a=>a.toJSON()),main:this.mainIndex}}static fromJSON(a){if(!a||!Array.isArray(a.ranges)||typeof a.main!="number"||a.main>=a.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(a.ranges.map(o=>SelectionRange.fromJSON(o)),a.main)}static single(a,o=a){return new EditorSelection([EditorSelection.range(a,o)],0)}static create(a,o=0){if(a.length==0)throw new RangeError("A selection needs at least one range");for(let u=0,p=0;p<a.length;p++){let d=a[p];if(d.empty?d.from<=u:d.from<u)return EditorSelection.normalized(a.slice(),o);u=d.to}return new EditorSelection(a,o)}static cursor(a,o=0,u,p){return SelectionRange.create(a,a,(o==0?0:o<0?8:16)|(u==null?7:Math.min(6,u))|(p??16777215)<<6)}static range(a,o,u,p){let d=(u??16777215)<<6|(p==null?7:Math.min(6,p));return o<a?SelectionRange.create(o,a,48|d):SelectionRange.create(a,o,(o>a?8:0)|d)}static normalized(a,o=0){let u=a[o];a.sort((p,d)=>p.from-d.from),o=a.indexOf(u);for(let p=1;p<a.length;p++){let d=a[p],f=a[p-1];if(d.empty?d.from<=f.to:d.from<f.to){let g=f.from,b=Math.max(d.to,f.to);p<=o&&o--,a.splice(--p,2,d.anchor>d.head?EditorSelection.range(b,g):EditorSelection.range(g,b))}}return new EditorSelection(a,o)}}function checkSelection(l,a){for(let o of l.ranges)if(o.to>a)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(a,o,u,p,d){this.combine=a,this.compareInput=o,this.compare=u,this.isStatic=p,this.id=nextID++,this.default=a([]),this.extensions=typeof d=="function"?d(this):d}get reader(){return this}static define(a={}){return new Facet(a.combine||(o=>o),a.compareInput||((o,u)=>o===u),a.compare||(a.combine?(o,u)=>o===u:sameArray$1),!!a.static,a.enables)}of(a){return new FacetProvider([],this,0,a)}compute(a,o){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(a,this,1,o)}computeN(a,o){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(a,this,2,o)}from(a,o){return o||(o=u=>u),this.compute([a],u=>o(u.field(a)))}}function sameArray$1(l,a){return l==a||l.length==a.length&&l.every((o,u)=>o===a[u])}class FacetProvider{constructor(a,o,u,p){this.dependencies=a,this.facet=o,this.type=u,this.value=p,this.id=nextID++}dynamicSlot(a){var o;let u=this.value,p=this.facet.compareInput,d=this.id,f=a[d]>>1,g=this.type==2,b=!1,O=!1,S=[];for(let M of this.dependencies)M=="doc"?b=!0:M=="selection"?O=!0:((o=a[M.id])!==null&&o!==void 0?o:1)&1||S.push(a[M.id]);return{create(M){return M.values[f]=u(M),1},update(M,A){if(b&&A.docChanged||O&&(A.docChanged||A.selection)||ensureAll(M,S)){let F=u(M);if(g?!compareArray(F,M.values[f],p):!p(F,M.values[f]))return M.values[f]=F,1}return 0},reconfigure:(M,A)=>{let F,$=A.config.address[d];if($!=null){let B=getAddr(A,$);if(this.dependencies.every(I=>I instanceof Facet?A.facet(I)===M.facet(I):I instanceof StateField?A.field(I,!1)==M.field(I,!1):!0)||(g?compareArray(F=u(M),B,p):p(F=u(M),B)))return M.values[f]=B,0}else F=u(M);return M.values[f]=F,1}}}}function compareArray(l,a,o){if(l.length!=a.length)return!1;for(let u=0;u<l.length;u++)if(!o(l[u],a[u]))return!1;return!0}function ensureAll(l,a){let o=!1;for(let u of a)ensureAddr(l,u)&1&&(o=!0);return o}function dynamicFacetSlot(l,a,o){let u=o.map(b=>l[b.id]),p=o.map(b=>b.type),d=u.filter(b=>!(b&1)),f=l[a.id]>>1;function g(b){let O=[];for(let S=0;S<u.length;S++){let M=getAddr(b,u[S]);if(p[S]==2)for(let A of M)O.push(A);else O.push(M)}return a.combine(O)}return{create(b){for(let O of u)ensureAddr(b,O);return b.values[f]=g(b),1},update(b,O){if(!ensureAll(b,d))return 0;let S=g(b);return a.compare(S,b.values[f])?0:(b.values[f]=S,1)},reconfigure(b,O){let S=ensureAll(b,u),M=O.config.facets[a.id],A=O.facet(a);if(M&&!S&&sameArray$1(o,M))return b.values[f]=A,0;let F=g(b);return a.compare(F,A)?(b.values[f]=A,0):(b.values[f]=F,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(a,o,u,p,d){this.id=a,this.createF=o,this.updateF=u,this.compareF=p,this.spec=d,this.provides=void 0}static define(a){let o=new StateField(nextID++,a.create,a.update,a.compare||((u,p)=>u===p),a);return a.provide&&(o.provides=a.provide(o)),o}create(a){let o=a.facet(initField).find(u=>u.field==this);return(o?.create||this.createF)(a)}slot(a){let o=a[this.id]>>1;return{create:u=>(u.values[o]=this.create(u),1),update:(u,p)=>{let d=u.values[o],f=this.updateF(d,p);return this.compareF(d,f)?0:(u.values[o]=f,1)},reconfigure:(u,p)=>p.config.address[this.id]!=null?(u.values[o]=p.field(this),0):(u.values[o]=this.create(u),1)}}init(a){return[this,initField.of({field:this,create:a})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(l){return a=>new PrecExtension(a,l)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(a,o){this.inner=a,this.prec=o}}class Compartment{of(a){return new CompartmentInstance(this,a)}reconfigure(a){return Compartment.reconfigure.of({compartment:this,extension:a})}get(a){return a.config.compartments.get(this)}}class CompartmentInstance{constructor(a,o){this.compartment=a,this.inner=o}}class Configuration{constructor(a,o,u,p,d,f){for(this.base=a,this.compartments=o,this.dynamicSlots=u,this.address=p,this.staticValues=d,this.facets=f,this.statusTemplate=[];this.statusTemplate.length<u.length;)this.statusTemplate.push(0)}staticFacet(a){let o=this.address[a.id];return o==null?a.default:this.staticValues[o>>1]}static resolve(a,o,u){let p=[],d=Object.create(null),f=new Map;for(let A of flatten(a,o,f))A instanceof StateField?p.push(A):(d[A.facet.id]||(d[A.facet.id]=[])).push(A);let g=Object.create(null),b=[],O=[];for(let A of p)g[A.id]=O.length<<1,O.push(F=>A.slot(F));let S=u?.config.facets;for(let A in d){let F=d[A],$=F[0].facet,B=S&&S[A]||[];if(F.every(I=>I.type==0))if(g[$.id]=b.length<<1|1,sameArray$1(B,F))b.push(u.facet($));else{let I=$.combine(F.map(U=>U.value));b.push(u&&$.compare(I,u.facet($))?u.facet($):I)}else{for(let I of F)I.type==0?(g[I.id]=b.length<<1|1,b.push(I.value)):(g[I.id]=O.length<<1,O.push(U=>I.dynamicSlot(U)));g[$.id]=O.length<<1,O.push(I=>dynamicFacetSlot(I,$,F))}}let M=O.map(A=>A(g));return new Configuration(a,f,M,g,b,d)}}function flatten(l,a,o){let u=[[],[],[],[],[]],p=new Map;function d(f,g){let b=p.get(f);if(b!=null){if(b<=g)return;let O=u[b].indexOf(f);O>-1&&u[b].splice(O,1),f instanceof CompartmentInstance&&o.delete(f.compartment)}if(p.set(f,g),Array.isArray(f))for(let O of f)d(O,g);else if(f instanceof CompartmentInstance){if(o.has(f.compartment))throw new RangeError("Duplicate use of compartment in extensions");let O=a.get(f.compartment)||f.inner;o.set(f.compartment,O),d(O,g)}else if(f instanceof PrecExtension)d(f.inner,f.prec);else if(f instanceof StateField)u[g].push(f),f.provides&&d(f.provides,g);else if(f instanceof FacetProvider)u[g].push(f),f.facet.extensions&&d(f.facet.extensions,Prec_.default);else{let O=f.extension;if(!O)throw new Error(`Unrecognized extension value in extension set (${f}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);d(O,g)}}return d(l,Prec_.default),u.reduce((f,g)=>f.concat(g))}function ensureAddr(l,a){if(a&1)return 2;let o=a>>1,u=l.status[o];if(u==4)throw new Error("Cyclic dependency between fields and/or facets");if(u&2)return u;l.status[o]=4;let p=l.computeSlot(l,l.config.dynamicSlots[o]);return l.status[o]=2|p}function getAddr(l,a){return a&1?l.config.staticValues[a>>1]:l.values[a>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:l=>l.some(a=>a),static:!0}),lineSeparator=Facet.define({combine:l=>l.length?l[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:l=>l.length?l[0]:!1});class Annotation{constructor(a,o){this.type=a,this.value=o}static define(){return new AnnotationType}}class AnnotationType{of(a){return new Annotation(this,a)}}class StateEffectType{constructor(a){this.map=a}of(a){return new StateEffect(this,a)}}class StateEffect{constructor(a,o){this.type=a,this.value=o}map(a){let o=this.type.map(this.value,a);return o===void 0?void 0:o==this.value?this:new StateEffect(this.type,o)}is(a){return this.type==a}static define(a={}){return new StateEffectType(a.map||(o=>o))}static mapEffects(a,o){if(!a.length)return a;let u=[];for(let p of a){let d=p.map(o);d&&u.push(d)}return u}}StateEffect.reconfigure=StateEffect.define(),StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(a,o,u,p,d,f){this.startState=a,this.changes=o,this.selection=u,this.effects=p,this.annotations=d,this.scrollIntoView=f,this._doc=null,this._state=null,u&&checkSelection(u,o.newLength),d.some(g=>g.type==Transaction.time)||(this.annotations=d.concat(Transaction.time.of(Date.now())))}static create(a,o,u,p,d,f){return new Transaction(a,o,u,p,d,f)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(a){for(let o of this.annotations)if(o.type==a)return o.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(a){let o=this.annotation(Transaction.userEvent);return!!(o&&(o==a||o.length>a.length&&o.slice(0,a.length)==a&&o[a.length]=="."))}}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();function joinRanges(l,a){let o=[];for(let u=0,p=0;;){let d,f;if(u<l.length&&(p==a.length||a[p]>=l[u]))d=l[u++],f=l[u++];else if(p<a.length)d=a[p++],f=a[p++];else return o;!o.length||o[o.length-1]<d?o.push(d,f):o[o.length-1]<f&&(o[o.length-1]=f)}}function mergeTransaction(l,a,o){var u;let p,d,f;return o?(p=a.changes,d=ChangeSet.empty(a.changes.length),f=l.changes.compose(a.changes)):(p=a.changes.map(l.changes),d=l.changes.mapDesc(a.changes,!0),f=l.changes.compose(p)),{changes:f,selection:a.selection?a.selection.map(d):(u=l.selection)===null||u===void 0?void 0:u.map(p),effects:StateEffect.mapEffects(l.effects,p).concat(StateEffect.mapEffects(a.effects,d)),annotations:l.annotations.length?l.annotations.concat(a.annotations):a.annotations,scrollIntoView:l.scrollIntoView||a.scrollIntoView}}function resolveTransactionInner(l,a,o){let u=a.selection,p=asArray$1(a.annotations);return a.userEvent&&(p=p.concat(Transaction.userEvent.of(a.userEvent))),{changes:a.changes instanceof ChangeSet?a.changes:ChangeSet.of(a.changes||[],o,l.facet(lineSeparator)),selection:u&&(u instanceof EditorSelection?u:EditorSelection.single(u.anchor,u.head)),effects:asArray$1(a.effects),annotations:p,scrollIntoView:!!a.scrollIntoView}}function resolveTransaction(l,a,o){let u=resolveTransactionInner(l,a.length?a[0]:{},l.doc.length);a.length&&a[0].filter===!1&&(o=!1);for(let d=1;d<a.length;d++){a[d].filter===!1&&(o=!1);let f=!!a[d].sequential;u=mergeTransaction(u,resolveTransactionInner(l,a[d],f?u.changes.newLength:l.doc.length),f)}let p=Transaction.create(l,u.changes,u.selection,u.effects,u.annotations,u.scrollIntoView);return extendTransaction(o?filterTransaction(p):p)}function filterTransaction(l){let a=l.startState,o=!0;for(let p of a.facet(changeFilter)){let d=p(l);if(d===!1){o=!1;break}Array.isArray(d)&&(o=o===!0?d:joinRanges(o,d))}if(o!==!0){let p,d;if(o===!1)d=l.changes.invertedDesc,p=ChangeSet.empty(a.doc.length);else{let f=l.changes.filter(o);p=f.changes,d=f.filtered.mapDesc(f.changes).invertedDesc}l=Transaction.create(a,p,l.selection&&l.selection.map(d),StateEffect.mapEffects(l.effects,d),l.annotations,l.scrollIntoView)}let u=a.facet(transactionFilter);for(let p=u.length-1;p>=0;p--){let d=u[p](l);d instanceof Transaction?l=d:Array.isArray(d)&&d.length==1&&d[0]instanceof Transaction?l=d[0]:l=resolveTransaction(a,asArray$1(d),!1)}return l}function extendTransaction(l){let a=l.startState,o=a.facet(transactionExtender),u=l;for(let p=o.length-1;p>=0;p--){let d=o[p](l);d&&Object.keys(d).length&&(u=mergeTransaction(u,resolveTransactionInner(a,d,l.changes.newLength),!0))}return u==l?l:Transaction.create(a,l.changes,l.selection,u.effects,u.annotations,u.scrollIntoView)}const none$2=[];function asArray$1(l){return l==null?none$2:Array.isArray(l)?l:[l]}var CharCategory=function(l){return l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other",l}(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar$1;try{wordChar$1=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(l){}function hasWordChar(l){if(wordChar$1)return wordChar$1.test(l);for(let a=0;a<l.length;a++){let o=l[a];if(/\w/.test(o)||o>""&&(o.toUpperCase()!=o.toLowerCase()||nonASCIISingleCaseWordChar.test(o)))return!0}return!1}function makeCategorizer(l){return a=>{if(!/\S/.test(a))return CharCategory.Space;if(hasWordChar(a))return CharCategory.Word;for(let o=0;o<l.length;o++)if(a.indexOf(l[o])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(a,o,u,p,d,f){this.config=a,this.doc=o,this.selection=u,this.values=p,this.status=a.statusTemplate.slice(),this.computeSlot=d,f&&(f._state=this);for(let g=0;g<this.config.dynamicSlots.length;g++)ensureAddr(this,g<<1);this.computeSlot=null}field(a,o=!0){let u=this.config.address[a.id];if(u==null){if(o)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,u),getAddr(this,u)}update(...a){return resolveTransaction(this,a,!0)}applyTransaction(a){let o=this.config,{base:u,compartments:p}=o;for(let g of a.effects)g.is(Compartment.reconfigure)?(o&&(p=new Map,o.compartments.forEach((b,O)=>p.set(O,b)),o=null),p.set(g.value.compartment,g.value.extension)):g.is(StateEffect.reconfigure)?(o=null,u=g.value):g.is(StateEffect.appendConfig)&&(o=null,u=asArray$1(u).concat(g.value));let d;o?d=a.startState.values.slice():(o=Configuration.resolve(u,p,this),d=new EditorState(o,this.doc,this.selection,o.dynamicSlots.map(()=>null),(b,O)=>O.reconfigure(b,this),null).values);let f=a.startState.facet(allowMultipleSelections)?a.newSelection:a.newSelection.asSingle();new EditorState(o,a.newDoc,f,d,(g,b)=>b.update(g,a),a)}replaceSelection(a){return typeof a=="string"&&(a=this.toText(a)),this.changeByRange(o=>({changes:{from:o.from,to:o.to,insert:a},range:EditorSelection.cursor(o.from+a.length)}))}changeByRange(a){let o=this.selection,u=a(o.ranges[0]),p=this.changes(u.changes),d=[u.range],f=asArray$1(u.effects);for(let g=1;g<o.ranges.length;g++){let b=a(o.ranges[g]),O=this.changes(b.changes),S=O.map(p);for(let A=0;A<g;A++)d[A]=d[A].map(S);let M=p.mapDesc(O,!0);d.push(b.range.map(M)),p=p.compose(S),f=StateEffect.mapEffects(f,S).concat(StateEffect.mapEffects(asArray$1(b.effects),M))}return{changes:p,selection:EditorSelection.create(d,o.mainIndex),effects:f}}changes(a=[]){return a instanceof ChangeSet?a:ChangeSet.of(a,this.doc.length,this.facet(EditorState.lineSeparator))}toText(a){return Text$1.of(a.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(a=0,o=this.doc.length){return this.doc.sliceString(a,o,this.lineBreak)}facet(a){let o=this.config.address[a.id];return o==null?a.default:(ensureAddr(this,o),getAddr(this,o))}toJSON(a){let o={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(a)for(let u in a){let p=a[u];p instanceof StateField&&this.config.address[p.id]!=null&&(o[u]=p.spec.toJSON(this.field(a[u]),this))}return o}static fromJSON(a,o={},u){if(!a||typeof a.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let p=[];if(u){for(let d in u)if(Object.prototype.hasOwnProperty.call(a,d)){let f=u[d],g=a[d];p.push(f.init(b=>f.spec.fromJSON(g,b)))}}return EditorState.create({doc:a.doc,selection:EditorSelection.fromJSON(a.selection),extensions:o.extensions?p.concat([o.extensions]):p})}static create(a={}){let o=Configuration.resolve(a.extensions||[],new Map),u=a.doc instanceof Text$1?a.doc:Text$1.of((a.doc||"").split(o.staticFacet(EditorState.lineSeparator)||DefaultSplit)),p=a.selection?a.selection instanceof EditorSelection?a.selection:EditorSelection.single(a.selection.anchor,a.selection.head):EditorSelection.single(0);return checkSelection(p,u.length),o.staticFacet(allowMultipleSelections)||(p=p.asSingle()),new EditorState(o,u,p,o.dynamicSlots.map(()=>null),(d,f)=>f.create(d),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(a,...o){for(let u of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(u,a)){a=u[a];break}return o.length&&(a=a.replace(/\$(\$|\d*)/g,(u,p)=>{if(p=="$")return"$";let d=+(p||1);return!d||d>o.length?u:o[d-1]})),a}languageDataAt(a,o,u=-1){let p=[];for(let d of this.facet(languageData))for(let f of d(this,o,u))Object.prototype.hasOwnProperty.call(f,a)&&p.push(f[a]);return p}charCategorizer(a){return makeCategorizer(this.languageDataAt("wordChars",a).join(""))}wordAt(a){let{text:o,from:u,length:p}=this.doc.lineAt(a),d=this.charCategorizer(a),f=a-u,g=a-u;for(;f>0;){let b=findClusterBreak(o,f,!1);if(d(o.slice(b,f))!=CharCategory.Word)break;f=b}for(;g<p;){let b=findClusterBreak(o,g);if(d(o.slice(g,b))!=CharCategory.Word)break;g=b}return f==g?null:EditorSelection.range(f+u,g+u)}}EditorState.allowMultipleSelections=allowMultipleSelections,EditorState.tabSize=Facet.define({combine:l=>l.length?l[0]:4}),EditorState.lineSeparator=lineSeparator,EditorState.readOnly=readOnly,EditorState.phrases=Facet.define({compare(l,a){let o=Object.keys(l),u=Object.keys(a);return o.length==u.length&&o.every(p=>l[p]==a[p])}}),EditorState.languageData=languageData,EditorState.changeFilter=changeFilter,EditorState.transactionFilter=transactionFilter,EditorState.transactionExtender=transactionExtender,Compartment.reconfigure=StateEffect.define();function combineConfig(l,a,o={}){let u={};for(let p of l)for(let d of Object.keys(p)){let f=p[d],g=u[d];if(g===void 0)u[d]=f;else if(!(g===f||f===void 0))if(Object.hasOwnProperty.call(o,d))u[d]=o[d](g,f);else throw new Error("Config merge conflict for field "+d)}for(let p in a)u[p]===void 0&&(u[p]=a[p]);return u}class RangeValue{eq(a){return this==a}range(a,o=a){return Range$1.create(a,o,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class Gr{constructor(a,o,u){this.from=a,this.to=o,this.value=u}static create(a,o,u){return new Gr(a,o,u)}};function cmpRange(l,a){return l.from-a.from||l.value.startSide-a.value.startSide}class Chunk{constructor(a,o,u,p){this.from=a,this.to=o,this.value=u,this.maxPoint=p}get length(){return this.to[this.to.length-1]}findIndex(a,o,u,p=0){let d=u?this.to:this.from;for(let f=p,g=d.length;;){if(f==g)return f;let b=f+g>>1,O=d[b]-a||(u?this.value[b].endSide:this.value[b].startSide)-o;if(b==f)return O>=0?f:g;O>=0?g=b:f=b+1}}between(a,o,u,p){for(let d=this.findIndex(o,-1e9,!0),f=this.findIndex(u,1e9,!1,d);d<f;d++)if(p(this.from[d]+a,this.to[d]+a,this.value[d])===!1)return!1}map(a,o){let u=[],p=[],d=[],f=-1,g=-1;for(let b=0;b<this.value.length;b++){let O=this.value[b],S=this.from[b]+a,M=this.to[b]+a,A,F;if(S==M){let $=o.mapPos(S,O.startSide,O.mapMode);if($==null||(A=F=$,O.startSide!=O.endSide&&(F=o.mapPos(S,O.endSide),F<A)))continue}else if(A=o.mapPos(S,O.startSide),F=o.mapPos(M,O.endSide),A>F||A==F&&O.startSide>0&&O.endSide<=0)continue;(F-A||O.endSide-O.startSide)<0||(f<0&&(f=A),O.point&&(g=Math.max(g,F-A)),u.push(O),p.push(A-f),d.push(F-f))}return{mapped:u.length?new Chunk(p,d,u,g):null,pos:f}}}class RangeSet{constructor(a,o,u,p){this.chunkPos=a,this.chunk=o,this.nextLayer=u,this.maxPoint=p}static create(a,o,u,p){return new RangeSet(a,o,u,p)}get length(){let a=this.chunk.length-1;return a<0?0:Math.max(this.chunkEnd(a),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let a=this.nextLayer.size;for(let o of this.chunk)a+=o.value.length;return a}chunkEnd(a){return this.chunkPos[a]+this.chunk[a].length}update(a){let{add:o=[],sort:u=!1,filterFrom:p=0,filterTo:d=this.length}=a,f=a.filter;if(o.length==0&&!f)return this;if(u&&(o=o.slice().sort(cmpRange)),this.isEmpty)return o.length?RangeSet.of(o):this;let g=new LayerCursor(this,null,-1).goto(0),b=0,O=[],S=new RangeSetBuilder;for(;g.value||b<o.length;)if(b<o.length&&(g.from-o[b].from||g.startSide-o[b].value.startSide)>=0){let M=o[b++];S.addInner(M.from,M.to,M.value)||O.push(M)}else g.rangeIndex==1&&g.chunkIndex<this.chunk.length&&(b==o.length||this.chunkEnd(g.chunkIndex)<o[b].from)&&(!f||p>this.chunkEnd(g.chunkIndex)||d<this.chunkPos[g.chunkIndex])&&S.addChunk(this.chunkPos[g.chunkIndex],this.chunk[g.chunkIndex])?g.nextChunk():((!f||p>g.to||d<g.from||f(g.from,g.to,g.value))&&(S.addInner(g.from,g.to,g.value)||O.push(Range$1.create(g.from,g.to,g.value))),g.next());return S.finishInner(this.nextLayer.isEmpty&&!O.length?RangeSet.empty:this.nextLayer.update({add:O,filter:f,filterFrom:p,filterTo:d}))}map(a){if(a.empty||this.isEmpty)return this;let o=[],u=[],p=-1;for(let f=0;f<this.chunk.length;f++){let g=this.chunkPos[f],b=this.chunk[f],O=a.touchesRange(g,g+b.length);if(O===!1)p=Math.max(p,b.maxPoint),o.push(b),u.push(a.mapPos(g));else if(O===!0){let{mapped:S,pos:M}=b.map(g,a);S&&(p=Math.max(p,S.maxPoint),o.push(S),u.push(M))}}let d=this.nextLayer.map(a);return o.length==0?d:new RangeSet(u,o,d||RangeSet.empty,p)}between(a,o,u){if(!this.isEmpty){for(let p=0;p<this.chunk.length;p++){let d=this.chunkPos[p],f=this.chunk[p];if(o>=d&&a<=d+f.length&&f.between(d,a-d,o-d,u)===!1)return}this.nextLayer.between(a,o,u)}}iter(a=0){return HeapCursor.from([this]).goto(a)}get isEmpty(){return this.nextLayer==this}static iter(a,o=0){return HeapCursor.from(a).goto(o)}static compare(a,o,u,p,d=-1){let f=a.filter(M=>M.maxPoint>0||!M.isEmpty&&M.maxPoint>=d),g=o.filter(M=>M.maxPoint>0||!M.isEmpty&&M.maxPoint>=d),b=findSharedChunks(f,g,u),O=new SpanCursor(f,b,d),S=new SpanCursor(g,b,d);u.iterGaps((M,A,F)=>compare(O,M,S,A,F,p)),u.empty&&u.length==0&&compare(O,0,S,0,0,p)}static eq(a,o,u=0,p){p==null&&(p=999999999);let d=a.filter(S=>!S.isEmpty&&o.indexOf(S)<0),f=o.filter(S=>!S.isEmpty&&a.indexOf(S)<0);if(d.length!=f.length)return!1;if(!d.length)return!0;let g=findSharedChunks(d,f),b=new SpanCursor(d,g,0).goto(u),O=new SpanCursor(f,g,0).goto(u);for(;;){if(b.to!=O.to||!sameValues(b.active,O.active)||b.point&&(!O.point||!b.point.eq(O.point)))return!1;if(b.to>p)return!0;b.next(),O.next()}}static spans(a,o,u,p,d=-1){let f=new SpanCursor(a,null,d).goto(o),g=o,b=f.openStart;for(;;){let O=Math.min(f.to,u);if(f.point){let S=f.activeForPoint(f.to),M=f.pointFrom<o?S.length+1:f.point.startSide<0?S.length:Math.min(S.length,b);p.point(g,O,f.point,S,M,f.pointRank),b=Math.min(f.openEnd(O),S.length)}else O>g&&(p.span(g,O,f.active,b),b=f.openEnd(O));if(f.to>u)return b+(f.point&&f.to>u?1:0);g=f.to,f.next()}}static of(a,o=!1){let u=new RangeSetBuilder;for(let p of a instanceof Range$1?[a]:o?lazySort(a):a)u.add(p.from,p.to,p.value);return u.finish()}static join(a){if(!a.length)return RangeSet.empty;let o=a[a.length-1];for(let u=a.length-2;u>=0;u--)for(let p=a[u];p!=RangeSet.empty;p=p.nextLayer)o=new RangeSet(p.chunkPos,p.chunk,o,Math.max(p.maxPoint,o.maxPoint));return o}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(l){if(l.length>1)for(let a=l[0],o=1;o<l.length;o++){let u=l[o];if(cmpRange(a,u)>0)return l.slice().sort(cmpRange);a=u}return l}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(a){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,a&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(a,o,u){this.addInner(a,o,u)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(a,o,u)}addInner(a,o,u){let p=a-this.lastTo||u.startSide-this.last.endSide;if(p<=0&&(a-this.lastFrom||u.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return p<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=a),this.from.push(a-this.chunkStart),this.to.push(o-this.chunkStart),this.last=u,this.lastFrom=a,this.lastTo=o,this.value.push(u),u.point&&(this.maxPoint=Math.max(this.maxPoint,o-a)),!0)}addChunk(a,o){if((a-this.lastTo||o.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,o.maxPoint),this.chunks.push(o),this.chunkPos.push(a);let u=o.value.length-1;return this.last=o.value[u],this.lastFrom=o.from[u]+a,this.lastTo=o.to[u]+a,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(a){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return a;let o=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(a):a,this.setMaxPoint);return this.from=null,o}}function findSharedChunks(l,a,o){let u=new Map;for(let d of l)for(let f=0;f<d.chunk.length;f++)d.chunk[f].maxPoint<=0&&u.set(d.chunk[f],d.chunkPos[f]);let p=new Set;for(let d of a)for(let f=0;f<d.chunk.length;f++){let g=u.get(d.chunk[f]);g!=null&&(o?o.mapPos(g):g)==d.chunkPos[f]&&!o?.touchesRange(g,g+d.chunk[f].length)&&p.add(d.chunk[f])}return p}class LayerCursor{constructor(a,o,u,p=0){this.layer=a,this.skip=o,this.minPoint=u,this.rank=p}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(a,o=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(a,o,!1),this}gotoInner(a,o,u){for(;this.chunkIndex<this.layer.chunk.length;){let p=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(p)||this.layer.chunkEnd(this.chunkIndex)<a||p.maxPoint<this.minPoint))break;this.chunkIndex++,u=!1}if(this.chunkIndex<this.layer.chunk.length){let p=this.layer.chunk[this.chunkIndex].findIndex(a-this.layer.chunkPos[this.chunkIndex],o,!0);(!u||this.rangeIndex<p)&&this.setRangeIndex(p)}this.next()}forward(a,o){(this.to-a||this.endSide-o)<0&&this.gotoInner(a,o,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let a=this.layer.chunkPos[this.chunkIndex],o=this.layer.chunk[this.chunkIndex],u=a+o.from[this.rangeIndex];if(this.from=u,this.to=a+o.to[this.rangeIndex],this.value=o.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(a){if(a==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=a}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(a){return this.from-a.from||this.startSide-a.startSide||this.rank-a.rank||this.to-a.to||this.endSide-a.endSide}}class HeapCursor{constructor(a){this.heap=a}static from(a,o=null,u=-1){let p=[];for(let d=0;d<a.length;d++)for(let f=a[d];!f.isEmpty;f=f.nextLayer)f.maxPoint>=u&&p.push(new LayerCursor(f,o,u,d));return p.length==1?p[0]:new HeapCursor(p)}get startSide(){return this.value?this.value.startSide:0}goto(a,o=-1e9){for(let u of this.heap)u.goto(a,o);for(let u=this.heap.length>>1;u>=0;u--)heapBubble(this.heap,u);return this.next(),this}forward(a,o){for(let u of this.heap)u.forward(a,o);for(let u=this.heap.length>>1;u>=0;u--)heapBubble(this.heap,u);(this.to-a||this.value.endSide-o)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let a=this.heap[0];this.from=a.from,this.to=a.to,this.value=a.value,this.rank=a.rank,a.value&&a.next(),heapBubble(this.heap,0)}}}function heapBubble(l,a){for(let o=l[a];;){let u=(a<<1)+1;if(u>=l.length)break;let p=l[u];if(u+1<l.length&&p.compare(l[u+1])>=0&&(p=l[u+1],u++),o.compare(p)<0)break;l[u]=o,l[a]=p,a=u}}class SpanCursor{constructor(a,o,u){this.minPoint=u,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(a,o,u)}goto(a,o=-1e9){return this.cursor.goto(a,o),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=a,this.endSide=o,this.openStart=-1,this.next(),this}forward(a,o){for(;this.minActive>-1&&(this.activeTo[this.minActive]-a||this.active[this.minActive].endSide-o)<0;)this.removeActive(this.minActive);this.cursor.forward(a,o)}removeActive(a){remove(this.active,a),remove(this.activeTo,a),remove(this.activeRank,a),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(a){let o=0,{value:u,to:p,rank:d}=this.cursor;for(;o<this.activeRank.length&&(d-this.activeRank[o]||p-this.activeTo[o])>0;)o++;insert(this.active,o,u),insert(this.activeTo,o,p),insert(this.activeRank,o,d),a&&insert(a,o,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let a=this.to,o=this.point;this.point=null;let u=this.openStart<0?[]:null;for(;;){let p=this.minActive;if(p>-1&&(this.activeTo[p]-this.cursor.from||this.active[p].endSide-this.cursor.startSide)<0){if(this.activeTo[p]>a){this.to=this.activeTo[p],this.endSide=this.active[p].endSide;break}this.removeActive(p),u&&remove(u,p)}else if(this.cursor.value)if(this.cursor.from>a){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let d=this.cursor.value;if(!d.point)this.addActive(u),this.cursor.next();else if(o&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=d,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=d.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(u){this.openStart=0;for(let p=u.length-1;p>=0&&u[p]<a;p--)this.openStart++}}activeForPoint(a){if(!this.active.length)return this.active;let o=[];for(let u=this.active.length-1;u>=0&&!(this.activeRank[u]<this.pointRank);u--)(this.activeTo[u]>a||this.activeTo[u]==a&&this.active[u].endSide>=this.point.endSide)&&o.push(this.active[u]);return o.reverse()}openEnd(a){let o=0;for(let u=this.activeTo.length-1;u>=0&&this.activeTo[u]>a;u--)o++;return o}}function compare(l,a,o,u,p,d){l.goto(a),o.goto(u);let f=u+p,g=u,b=u-a;for(;;){let O=l.to+b-o.to,S=O||l.endSide-o.endSide,M=S<0?l.to+b:o.to,A=Math.min(M,f);if(l.point||o.point?l.point&&o.point&&(l.point==o.point||l.point.eq(o.point))&&sameValues(l.activeForPoint(l.to),o.activeForPoint(o.to))||d.comparePoint(g,A,l.point,o.point):A>g&&!sameValues(l.active,o.active)&&d.compareRange(g,A,l.active,o.active),M>f)break;(O||l.openEnd!=o.openEnd)&&d.boundChange&&d.boundChange(M),g=M,S<=0&&l.next(),S>=0&&o.next()}}function sameValues(l,a){if(l.length!=a.length)return!1;for(let o=0;o<l.length;o++)if(l[o]!=a[o]&&!l[o].eq(a[o]))return!1;return!0}function remove(l,a){for(let o=a,u=l.length-1;o<u;o++)l[o]=l[o+1];l.pop()}function insert(l,a,o){for(let u=l.length-1;u>=a;u--)l[u+1]=l[u];l[a]=o}function findMinIndex(l,a){let o=-1,u=1e9;for(let p=0;p<a.length;p++)(a[p]-u||l[p].endSide-l[o].endSide)<0&&(o=p,u=a[p]);return o}function countColumn(l,a,o=l.length){let u=0;for(let p=0;p<o&&p<l.length;)l.charCodeAt(p)==9?(u+=a-u%a,p++):(u++,p=findClusterBreak(l,p));return u}function findColumn(l,a,o,u){for(let p=0,d=0;;){if(d>=a)return p;if(p==l.length)break;d+=l.charCodeAt(p)==9?o-d%o:1,p=findClusterBreak(l,p)}return u===!0?-1:l.length}const C$1="ͼ",COUNT=typeof Symbol>"u"?"__"+C$1:Symbol.for(C$1),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(a,o){this.rules=[];let{finish:u}=o||{};function p(f){return/^@/.test(f)?[f]:f.split(/,\s*/)}function d(f,g,b,O){let S=[],M=/^@(\w+)\b/.exec(f[0]),A=M&&M[1]=="keyframes";if(M&&g==null)return b.push(f[0]+";");for(let F in g){let $=g[F];if(/&/.test(F))d(F.split(/,\s*/).map(B=>f.map(I=>B.replace(/&/,I))).reduce((B,I)=>B.concat(I)),$,b);else if($&&typeof $=="object"){if(!M)throw new RangeError("The value of a property ("+F+") should be a primitive value.");d(p(F),$,S,A)}else $!=null&&S.push(F.replace(/_.*/,"").replace(/[A-Z]/g,B=>"-"+B.toLowerCase())+": "+$+";")}(S.length||A)&&b.push((u&&!M&&!O?f.map(u):f).join(", ")+" {"+S.join(" ")+"}")}for(let f in a)d(p(f),a[f],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let a=top[COUNT]||1;return top[COUNT]=a+1,C$1+a.toString(36)}static mount(a,o,u){let p=a[SET],d=u&&u.nonce;p?d&&p.setNonce(d):p=new StyleSet(a,d),p.mount(Array.isArray(o)?o:[o],a)}}let adoptedSet=new Map;class StyleSet{constructor(a,o){let u=a.ownerDocument||a,p=u.defaultView;if(!a.head&&a.adoptedStyleSheets&&p.CSSStyleSheet){let d=adoptedSet.get(u);if(d)return a[SET]=d;this.sheet=new p.CSSStyleSheet,adoptedSet.set(u,this)}else this.styleTag=u.createElement("style"),o&&this.styleTag.setAttribute("nonce",o);this.modules=[],a[SET]=this}mount(a,o){let u=this.sheet,p=0,d=0;for(let f=0;f<a.length;f++){let g=a[f],b=this.modules.indexOf(g);if(b<d&&b>-1&&(this.modules.splice(b,1),d--,b=-1),b==-1){if(this.modules.splice(d++,0,g),u)for(let O=0;O<g.rules.length;O++)u.insertRule(g.rules[O],p++)}else{for(;d<b;)p+=this.modules[d++].rules.length;p+=g.rules.length,d++}}if(u)o.adoptedStyleSheets.indexOf(this.sheet)<0&&(o.adoptedStyleSheets=[this.sheet,...o.adoptedStyleSheets]);else{let f="";for(let b=0;b<this.modules.length;b++)f+=this.modules[b].getRules()+`
`;this.styleTag.textContent=f;let g=o.head||o;this.styleTag.parentNode!=g&&g.insertBefore(this.styleTag,g.firstChild)}}setNonce(a){this.styleTag&&this.styleTag.getAttribute("nonce")!=a&&this.styleTag.setAttribute("nonce",a)}}for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(l){var a=mac&&l.metaKey&&l.shiftKey&&!l.ctrlKey&&!l.altKey||ie$1&&l.shiftKey&&l.key&&l.key.length==1||l.key=="Unidentified",o=!a&&l.key||(l.shiftKey?shift:base)[l.keyCode]||l.key||"Unidentified";return o=="Esc"&&(o="Escape"),o=="Del"&&(o="Delete"),o=="Left"&&(o="ArrowLeft"),o=="Up"&&(o="ArrowUp"),o=="Right"&&(o="ArrowRight"),o=="Down"&&(o="ArrowDown"),o}function getSelection(l){let a;return l.nodeType==11?a=l.getSelection?l:l.ownerDocument:a=l,a.getSelection()}function contains(l,a){return a?l==a||l.contains(a.nodeType!=1?a.parentNode:a):!1}function hasSelection(l,a){if(!a.anchorNode)return!1;try{return contains(l,a.anchorNode)}catch{return!1}}function clientRectsFor(l){return l.nodeType==3?textRange(l,0,l.nodeValue.length).getClientRects():l.nodeType==1?l.getClientRects():[]}function isEquivalentPosition(l,a,o,u){return o?scanFor(l,a,o,u,-1)||scanFor(l,a,o,u,1):!1}function domIndex(l){for(var a=0;;a++)if(l=l.previousSibling,!l)return a}function isBlockElement(l){return l.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(l.nodeName)}function scanFor(l,a,o,u,p){for(;;){if(l==o&&a==u)return!0;if(a==(p<0?0:maxOffset(l))){if(l.nodeName=="DIV")return!1;let d=l.parentNode;if(!d||d.nodeType!=1)return!1;a=domIndex(l)+(p<0?0:1),l=d}else if(l.nodeType==1){if(l=l.childNodes[a+(p<0?-1:0)],l.nodeType==1&&l.contentEditable=="false")return!1;a=p<0?maxOffset(l):0}else return!1}}function maxOffset(l){return l.nodeType==3?l.nodeValue.length:l.childNodes.length}function flattenRect(l,a){let o=a?l.left:l.right;return{left:o,right:o,top:l.top,bottom:l.bottom}}function windowRect(l){let a=l.visualViewport;return a?{left:0,right:a.width,top:0,bottom:a.height}:{left:0,right:l.innerWidth,top:0,bottom:l.innerHeight}}function getScale$1(l,a){let o=a.width/l.offsetWidth,u=a.height/l.offsetHeight;return(o>.995&&o<1.005||!isFinite(o)||Math.abs(a.width-l.offsetWidth)<1)&&(o=1),(u>.995&&u<1.005||!isFinite(u)||Math.abs(a.height-l.offsetHeight)<1)&&(u=1),{scaleX:o,scaleY:u}}function scrollRectIntoView(l,a,o,u,p,d,f,g){let b=l.ownerDocument,O=b.defaultView||window;for(let S=l,M=!1;S&&!M;)if(S.nodeType==1){let A,F=S==b.body,$=1,B=1;if(F)A=windowRect(O);else{if(/^(fixed|sticky)$/.test(getComputedStyle(S).position)&&(M=!0),S.scrollHeight<=S.clientHeight&&S.scrollWidth<=S.clientWidth){S=S.assignedSlot||S.parentNode;continue}let te=S.getBoundingClientRect();({scaleX:$,scaleY:B}=getScale$1(S,te)),A={left:te.left,right:te.left+S.clientWidth*$,top:te.top,bottom:te.top+S.clientHeight*B}}let I=0,U=0;if(p=="nearest")a.top<A.top?(U=-(A.top-a.top+f),o>0&&a.bottom>A.bottom+U&&(U=a.bottom-A.bottom+U+f)):a.bottom>A.bottom&&(U=a.bottom-A.bottom+f,o<0&&a.top-U<A.top&&(U=-(A.top+U-a.top+f)));else{let te=a.bottom-a.top,de=A.bottom-A.top;U=(p=="center"&&te<=de?a.top+te/2-de/2:p=="start"||p=="center"&&o<0?a.top-f:a.bottom-de+f)-A.top}if(u=="nearest"?a.left<A.left?(I=-(A.left-a.left+d),o>0&&a.right>A.right+I&&(I=a.right-A.right+I+d)):a.right>A.right&&(I=a.right-A.right+d,o<0&&a.left<A.left+I&&(I=-(A.left+I-a.left+d))):I=(u=="center"?a.left+(a.right-a.left)/2-(A.right-A.left)/2:u=="start"==g?a.left-d:a.right-(A.right-A.left)+d)-A.left,I||U)if(F)O.scrollBy(I,U);else{let te=0,de=0;if(U){let se=S.scrollTop;S.scrollTop+=U/B,de=(S.scrollTop-se)*B}if(I){let se=S.scrollLeft;S.scrollLeft+=I/$,te=(S.scrollLeft-se)*$}a={left:a.left-te,top:a.top-de,right:a.right-te,bottom:a.bottom-de},te&&Math.abs(te-I)<1&&(u="nearest"),de&&Math.abs(de-U)<1&&(p="nearest")}if(F)break;S=S.assignedSlot||S.parentNode}else if(S.nodeType==11)S=S.host;else break}function scrollableParents(l){let a=l.ownerDocument,o,u;for(let p=l.parentNode;p&&!(p==a.body||o&&u);)if(p.nodeType==1)!u&&p.scrollHeight>p.clientHeight&&(u=p),!o&&p.scrollWidth>p.clientWidth&&(o=p),p=p.assignedSlot||p.parentNode;else if(p.nodeType==11)p=p.host;else break;return{x:o,y:u}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(a){return this.anchorNode==a.anchorNode&&this.anchorOffset==a.anchorOffset&&this.focusNode==a.focusNode&&this.focusOffset==a.focusOffset}setRange(a){let{anchorNode:o,focusNode:u}=a;this.set(o,Math.min(a.anchorOffset,o?maxOffset(o):0),u,Math.min(a.focusOffset,u?maxOffset(u):0))}set(a,o,u,p){this.anchorNode=a,this.anchorOffset=o,this.focusNode=u,this.focusOffset=p}}let preventScrollSupported=null;function focusPreventScroll(l){if(l.setActive)return l.setActive();if(preventScrollSupported)return l.focus(preventScrollSupported);let a=[];for(let o=l;o&&(a.push(o,o.scrollTop,o.scrollLeft),o!=o.ownerDocument);o=o.parentNode);if(l.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let o=0;o<a.length;){let u=a[o++],p=a[o++],d=a[o++];u.scrollTop!=p&&(u.scrollTop=p),u.scrollLeft!=d&&(u.scrollLeft=d)}}}let scratchRange;function textRange(l,a,o=a){let u=scratchRange||(scratchRange=document.createRange());return u.setEnd(l,o),u.setStart(l,a),u}function dispatchKey(l,a,o,u){let p={key:a,code:a,keyCode:o,which:o,cancelable:!0};u&&({altKey:p.altKey,ctrlKey:p.ctrlKey,shiftKey:p.shiftKey,metaKey:p.metaKey}=u);let d=new KeyboardEvent("keydown",p);d.synthetic=!0,l.dispatchEvent(d);let f=new KeyboardEvent("keyup",p);return f.synthetic=!0,l.dispatchEvent(f),d.defaultPrevented||f.defaultPrevented}function getRoot(l){for(;l;){if(l&&(l.nodeType==9||l.nodeType==11&&l.host))return l;l=l.assignedSlot||l.parentNode}return null}function clearAttributes(l){for(;l.attributes.length;)l.removeAttributeNode(l.attributes[0])}function atElementStart(l,a){let o=a.focusNode,u=a.focusOffset;if(!o||a.anchorNode!=o||a.anchorOffset!=u)return!1;for(u=Math.min(u,maxOffset(o));;)if(u){if(o.nodeType!=1)return!1;let p=o.childNodes[u-1];p.contentEditable=="false"?u--:(o=p,u=maxOffset(o))}else{if(o==l)return!0;u=domIndex(o),o=o.parentNode}}function isScrolledToBottom(l){return l.scrollTop>Math.max(1,l.scrollHeight-l.clientHeight-4)}function textNodeBefore(l,a){for(let o=l,u=a;;){if(o.nodeType==3&&u>0)return{node:o,offset:u};if(o.nodeType==1&&u>0){if(o.contentEditable=="false")return null;o=o.childNodes[u-1],u=maxOffset(o)}else if(o.parentNode&&!isBlockElement(o))u=domIndex(o),o=o.parentNode;else return null}}function textNodeAfter(l,a){for(let o=l,u=a;;){if(o.nodeType==3&&u<o.nodeValue.length)return{node:o,offset:u};if(o.nodeType==1&&u<o.childNodes.length){if(o.contentEditable=="false")return null;o=o.childNodes[u],u=0}else if(o.parentNode&&!isBlockElement(o))u=domIndex(o)+1,o=o.parentNode;else return null}}class DOMPos{constructor(a,o,u=!0){this.node=a,this.offset=o,this.precise=u}static before(a,o){return new DOMPos(a.parentNode,domIndex(a),o)}static after(a,o){return new DOMPos(a.parentNode,domIndex(a)+1,o)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(a){let o=this.posAtStart;for(let u of this.children){if(u==a)return o;o+=u.length+u.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(a){return this.posBefore(a)+a.length}sync(a,o){if(this.flags&2){let u=this.dom,p=null,d;for(let f of this.children){if(f.flags&7){if(!f.dom&&(d=p?p.nextSibling:u.firstChild)){let g=ContentView.get(d);(!g||!g.parent&&g.canReuseDOM(f))&&f.reuseDOM(d)}f.sync(a,o),f.flags&=-8}if(d=p?p.nextSibling:u.firstChild,o&&!o.written&&o.node==u&&d!=f.dom&&(o.written=!0),f.dom.parentNode==u)for(;d&&d!=f.dom;)d=rm$1(d);else u.insertBefore(f.dom,d);p=f.dom}for(d=p?p.nextSibling:u.firstChild,d&&o&&o.node==u&&(o.written=!0);d;)d=rm$1(d)}else if(this.flags&1)for(let u of this.children)u.flags&7&&(u.sync(a,o),u.flags&=-8)}reuseDOM(a){}localPosFromDOM(a,o){let u;if(a==this.dom)u=this.dom.childNodes[o];else{let p=maxOffset(a)==0?0:o==0?-1:1;for(;;){let d=a.parentNode;if(d==this.dom)break;p==0&&d.firstChild!=d.lastChild&&(a==d.firstChild?p=-1:p=1),a=d}p<0?u=a:u=a.nextSibling}if(u==this.dom.firstChild)return 0;for(;u&&!ContentView.get(u);)u=u.nextSibling;if(!u)return this.length;for(let p=0,d=0;;p++){let f=this.children[p];if(f.dom==u)return d;d+=f.length+f.breakAfter}}domBoundsAround(a,o,u=0){let p=-1,d=-1,f=-1,g=-1;for(let b=0,O=u,S=u;b<this.children.length;b++){let M=this.children[b],A=O+M.length;if(O<a&&A>o)return M.domBoundsAround(a,o,O);if(A>=a&&p==-1&&(p=b,d=O),O>o&&M.dom.parentNode==this.dom){f=b,g=S;break}S=A,O=A+M.breakAfter}return{from:d,to:g<0?u+this.length:g,startDOM:(p?this.children[p-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:f<this.children.length&&f>=0?this.children[f].dom:null}}markDirty(a=!1){this.flags|=2,this.markParentsDirty(a)}markParentsDirty(a){for(let o=this.parent;o;o=o.parent){if(a&&(o.flags|=2),o.flags&1)return;o.flags|=1,a=!1}}setParent(a){this.parent!=a&&(this.parent=a,this.flags&7&&this.markParentsDirty(!0))}setDOM(a){this.dom!=a&&(this.dom&&(this.dom.cmView=null),this.dom=a,a.cmView=this)}get rootView(){for(let a=this;;){let o=a.parent;if(!o)return a;a=o}}replaceChildren(a,o,u=noChildren){this.markDirty();for(let p=a;p<o;p++){let d=this.children[p];d.parent==this&&u.indexOf(d)<0&&d.destroy()}u.length<250?this.children.splice(a,o-a,...u):this.children=[].concat(this.children.slice(0,a),u,this.children.slice(o));for(let p=0;p<u.length;p++)u[p].setParent(this)}ignoreMutation(a){return!1}ignoreEvent(a){return!1}childCursor(a=this.length){return new ChildCursor(this.children,a,this.children.length)}childPos(a,o=1){return this.childCursor().findPos(a,o)}toString(){let a=this.constructor.name.replace("View","");return a+(this.children.length?"("+this.children.join()+")":this.length?"["+(a=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(a){return a.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(a,o,u,p,d,f){return!1}become(a){return!1}canReuseDOM(a){return a.constructor==this.constructor&&!((this.flags|a.flags)&8)}getSide(){return 0}destroy(){for(let a of this.children)a.parent==this&&a.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(l){let a=l.nextSibling;return l.parentNode.removeChild(l),a}class ChildCursor{constructor(a,o,u){this.children=a,this.pos=o,this.i=u,this.off=0}findPos(a,o=1){for(;;){if(a>this.pos||a==this.pos&&(o>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=a-this.pos,this;let u=this.children[--this.i];this.pos-=u.length+u.breakAfter}}}function replaceRange(l,a,o,u,p,d,f,g,b){let{children:O}=l,S=O.length?O[a]:null,M=d.length?d[d.length-1]:null,A=M?M.breakAfter:f;if(!(a==u&&S&&!f&&!A&&d.length<2&&S.merge(o,p,d.length?M:null,o==0,g,b))){if(u<O.length){let F=O[u];F&&(p<F.length||F.breakAfter&&M?.breakAfter)?(a==u&&(F=F.split(p),p=0),!A&&M&&F.merge(0,p,M,!0,0,b)?d[d.length-1]=F:((p||F.children.length&&!F.children[0].length)&&F.merge(0,p,null,!1,0,b),d.push(F))):F?.breakAfter&&(M?M.breakAfter=1:f=1),u++}for(S&&(S.breakAfter=f,o>0&&(!f&&d.length&&S.merge(o,S.length,d[0],!1,g,0)?S.breakAfter=d.shift().breakAfter:(o<S.length||S.children.length&&S.children[S.children.length-1].length==0)&&S.merge(o,S.length,null,!1,g,0),a++));a<u&&d.length;)if(O[u-1].become(d[d.length-1]))u--,d.pop(),b=d.length?0:g;else if(O[a].become(d[0]))a++,d.shift(),g=d.length?0:b;else break;!d.length&&a&&u<O.length&&!O[a-1].breakAfter&&O[u].merge(0,0,O[a-1],!1,g,b)&&a--,(a<u||d.length)&&l.replaceChildren(a,u,d)}}function mergeChildrenInto(l,a,o,u,p,d){let f=l.childCursor(),{i:g,off:b}=f.findPos(o,1),{i:O,off:S}=f.findPos(a,-1),M=a-o;for(let A of u)M+=A.length;l.length+=M,replaceRange(l,O,S,g,b,u,0,p,d)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit,safari,webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const MaxJoinLen=256;class TextView extends ContentView{constructor(a){super(),this.text=a}get length(){return this.text.length}createDOM(a){this.setDOM(a||document.createTextNode(this.text))}sync(a,o){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(o&&o.node==this.dom&&(o.written=!0),this.dom.nodeValue=this.text)}reuseDOM(a){a.nodeType==3&&this.createDOM(a)}merge(a,o,u){return this.flags&8||u&&(!(u instanceof TextView)||this.length-(o-a)+u.length>MaxJoinLen||u.flags&8)?!1:(this.text=this.text.slice(0,a)+(u?u.text:"")+this.text.slice(o),this.markDirty(),!0)}split(a){let o=new TextView(this.text.slice(a));return this.text=this.text.slice(0,a),this.markDirty(),o.flags|=this.flags&8,o}localPosFromDOM(a,o){return a==this.dom?o:o?this.text.length:0}domAtPos(a){return new DOMPos(this.dom,a)}domBoundsAround(a,o,u){return{from:u,to:u+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(a,o){return textCoords(this.dom,a,o)}}class MarkView extends ContentView{constructor(a,o=[],u=0){super(),this.mark=a,this.children=o,this.length=u;for(let p of o)p.setParent(this)}setAttrs(a){if(clearAttributes(a),this.mark.class&&(a.className=this.mark.class),this.mark.attrs)for(let o in this.mark.attrs)a.setAttribute(o,this.mark.attrs[o]);return a}canReuseDOM(a){return super.canReuseDOM(a)&&!((this.flags|a.flags)&8)}reuseDOM(a){a.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(a),this.flags|=6)}sync(a,o){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(a,o)}merge(a,o,u,p,d,f){return u&&(!(u instanceof MarkView&&u.mark.eq(this.mark))||a&&d<=0||o<this.length&&f<=0)?!1:(mergeChildrenInto(this,a,o,u?u.children.slice():[],d-1,f-1),this.markDirty(),!0)}split(a){let o=[],u=0,p=-1,d=0;for(let g of this.children){let b=u+g.length;b>a&&o.push(u<a?g.split(a-u):g),p<0&&u>=a&&(p=d),u=b,d++}let f=this.length-a;return this.length=a,p>-1&&(this.children.length=p,this.markDirty()),new MarkView(this.mark,o,f)}domAtPos(a){return inlineDOMAtPos(this,a)}coordsAt(a,o){return coordsInChildren(this,a,o)}}function textCoords(l,a,o){let u=l.nodeValue.length;a>u&&(a=u);let p=a,d=a,f=0;a==0&&o<0||a==u&&o>=0?browser.chrome||browser.gecko||(a?(p--,f=1):d<u&&(d++,f=-1)):o<0?p--:d<u&&d++;let g=textRange(l,p,d).getClientRects();if(!g.length)return null;let b=g[(f?f<0:o>=0)?0:g.length-1];return browser.safari&&!f&&b.width==0&&(b=Array.prototype.find.call(g,O=>O.width)||b),f?flattenRect(b,f<0):b||null}class WidgetView extends ContentView{static create(a,o,u){return new WidgetView(a,o,u)}constructor(a,o,u){super(),this.widget=a,this.length=o,this.side=u,this.prevWidget=null}split(a){let o=WidgetView.create(this.widget,this.length-a,this.side);return this.length-=a,o}sync(a){(!this.dom||!this.widget.updateDOM(this.dom,a))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(a)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(a,o,u,p,d,f){return u&&(!(u instanceof WidgetView)||!this.widget.compare(u.widget)||a>0&&d<=0||o<this.length&&f<=0)?!1:(this.length=a+(u?u.length:0)+(this.length-o),!0)}become(a){return a instanceof WidgetView&&a.side==this.side&&this.widget.constructor==a.widget.constructor?(this.widget.compare(a.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=a.widget,this.length=a.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(a){return this.widget.ignoreEvent(a)}get overrideDOMText(){if(this.length==0)return Text$1.empty;let a=this;for(;a.parent;)a=a.parent;let{view:o}=a,u=o&&o.state.doc,p=this.posAtStart;return u?u.slice(p,p+this.length):Text$1.empty}domAtPos(a){return(this.length?a==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,a==this.length)}domBoundsAround(){return null}coordsAt(a,o){let u=this.widget.coordsAt(this.dom,a,o);if(u)return u;let p=this.dom.getClientRects(),d=null;if(!p.length)return null;let f=this.side?this.side<0:a>0;for(let g=f?p.length-1:0;d=p[g],!(a>0?g==0:g==p.length-1||d.top<d.bottom);g+=f?-1:1);return flattenRect(d,!f)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(a){super(),this.side=a}get length(){return 0}merge(){return!1}become(a){return a instanceof WidgetBufferView&&a.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let a=document.createElement("img");a.className="cm-widgetBuffer",a.setAttribute("aria-hidden","true"),this.setDOM(a)}}getSide(){return this.side}domAtPos(a){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(a){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text$1.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(l,a){let o=l.dom,{children:u}=l,p=0;for(let d=0;p<u.length;p++){let f=u[p],g=d+f.length;if(!(g==d&&f.getSide()<=0)){if(a>d&&a<g&&f.dom.parentNode==o)return f.domAtPos(a-d);if(a<=d)break;d=g}}for(let d=p;d>0;d--){let f=u[d-1];if(f.dom.parentNode==o)return f.domAtPos(f.length)}for(let d=p;d<u.length;d++){let f=u[d];if(f.dom.parentNode==o)return f.domAtPos(0)}return new DOMPos(o,0)}function joinInlineInto(l,a,o){let u,{children:p}=l;o>0&&a instanceof MarkView&&p.length&&(u=p[p.length-1])instanceof MarkView&&u.mark.eq(a.mark)?joinInlineInto(u,a.children[0],o-1):(p.push(a),a.setParent(l)),l.length+=a.length}function coordsInChildren(l,a,o){let u=null,p=-1,d=null,f=-1;function g(O,S){for(let M=0,A=0;M<O.children.length&&A<=S;M++){let F=O.children[M],$=A+F.length;$>=S&&(F.children.length?g(F,S-A):(!d||d.isHidden&&o>0)&&($>S||A==$&&F.getSide()>0)?(d=F,f=S-A):(A<S||A==$&&F.getSide()<0&&!F.isHidden)&&(u=F,p=S-A)),A=$}}g(l,a);let b=(o<0?u:d)||u||d;return b?b.coordsAt(Math.max(0,b==u?p:f),o):fallbackRect(l)}function fallbackRect(l){let a=l.dom.lastChild;if(!a)return l.dom.getBoundingClientRect();let o=clientRectsFor(a);return o[o.length-1]||null}function combineAttrs(l,a){for(let o in l)o=="class"&&a.class?a.class+=" "+l.class:o=="style"&&a.style?a.style+=";"+l.style:a[o]=l[o];return a}const noAttrs$1=Object.create(null);function attrsEq(l,a,o){if(l==a)return!0;l||(l=noAttrs$1),a||(a=noAttrs$1);let u=Object.keys(l),p=Object.keys(a);if(u.length-(o&&u.indexOf(o)>-1?1:0)!=p.length-(o&&p.indexOf(o)>-1?1:0))return!1;for(let d of u)if(d!=o&&(p.indexOf(d)==-1||l[d]!==a[d]))return!1;return!0}function updateAttrs(l,a,o){let u=!1;if(a)for(let p in a)o&&p in o||(u=!0,p=="style"?l.style.cssText="":l.removeAttribute(p));if(o)for(let p in o)a&&a[p]==o[p]||(u=!0,p=="style"?l.style.cssText=o[p]:l.setAttribute(p,o[p]));return u}function getAttrs(l){let a=Object.create(null);for(let o=0;o<l.attributes.length;o++){let u=l.attributes[o];a[u.name]=u.value}return a}class WidgetType{eq(a){return!1}updateDOM(a,o){return!1}compare(a){return this==a||this.constructor==a.constructor&&this.eq(a)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(a){return!0}coordsAt(a,o,u){return null}get isHidden(){return!1}get editable(){return!1}destroy(a){}}var BlockType=function(l){return l[l.Text=0]="Text",l[l.WidgetBefore=1]="WidgetBefore",l[l.WidgetAfter=2]="WidgetAfter",l[l.WidgetRange=3]="WidgetRange",l}(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(a,o,u,p){super(),this.startSide=a,this.endSide=o,this.widget=u,this.spec=p}get heightRelevant(){return!1}static mark(a){return new MarkDecoration(a)}static widget(a){let o=Math.max(-1e4,Math.min(1e4,a.side||0)),u=!!a.block;return o+=u&&!a.inlineOrder?o>0?3e8:-4e8:o>0?1e8:-1e8,new PointDecoration(a,o,o,u,a.widget||null,!1)}static replace(a){let o=!!a.block,u,p;if(a.isBlockGap)u=-5e8,p=4e8;else{let{start:d,end:f}=getInclusive(a,o);u=(d?o?-3e8:-1:5e8)-1,p=(f?o?2e8:1:-6e8)+1}return new PointDecoration(a,u,p,o,a.widget||null,!0)}static line(a){return new LineDecoration(a)}static set(a,o=!1){return RangeSet.of(a,o)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(a){let{start:o,end:u}=getInclusive(a);super(o?-1:5e8,u?1:-6e8,null,a),this.tagName=a.tagName||"span",this.class=a.class||"",this.attrs=a.attributes||null}eq(a){var o,u;return this==a||a instanceof MarkDecoration&&this.tagName==a.tagName&&(this.class||((o=this.attrs)===null||o===void 0?void 0:o.class))==(a.class||((u=a.attrs)===null||u===void 0?void 0:u.class))&&attrsEq(this.attrs,a.attrs,"class")}range(a,o=a){if(a>=o)throw new RangeError("Mark decorations may not be empty");return super.range(a,o)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(a){super(-2e8,-2e8,null,a)}eq(a){return a instanceof LineDecoration&&this.spec.class==a.spec.class&&attrsEq(this.spec.attributes,a.spec.attributes)}range(a,o=a){if(o!=a)throw new RangeError("Line decoration ranges must be zero-length");return super.range(a,o)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore,LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(a,o,u,p,d,f){super(o,u,d,a),this.block=p,this.isReplace=f,this.mapMode=p?o<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(a){return a instanceof PointDecoration&&widgetsEq(this.widget,a.widget)&&this.block==a.block&&this.startSide==a.startSide&&this.endSide==a.endSide}range(a,o=a){if(this.isReplace&&(a>o||a==o&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&o!=a)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(a,o)}}PointDecoration.prototype.point=!0;function getInclusive(l,a=!1){let{inclusiveStart:o,inclusiveEnd:u}=l;return o==null&&(o=l.inclusive),u==null&&(u=l.inclusive),{start:o??a,end:u??a}}function widgetsEq(l,a){return l==a||!!(l&&a&&l.compare(a))}function addRange(l,a,o,u=0){let p=o.length-1;p>=0&&o[p]+u>=l?o[p]=Math.max(o[p],a):o.push(l,a)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(a,o,u,p,d,f){if(u){if(!(u instanceof LineView))return!1;this.dom||u.transferDOM(this)}return p&&this.setDeco(u?u.attrs:null),mergeChildrenInto(this,a,o,u?u.children.slice():[],d,f),!0}split(a){let o=new LineView;if(o.breakAfter=this.breakAfter,this.length==0)return o;let{i:u,off:p}=this.childPos(a);p&&(o.append(this.children[u].split(p),0),this.children[u].merge(p,this.children[u].length,null,!1,0,0),u++);for(let d=u;d<this.children.length;d++)o.append(this.children[d],0);for(;u>0&&this.children[u-1].length==0;)this.children[--u].destroy();return this.children.length=u,this.markDirty(),this.length=a,o}transferDOM(a){this.dom&&(this.markDirty(),a.setDOM(this.dom),a.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(a){attrsEq(this.attrs,a)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=a)}append(a,o){joinInlineInto(this,a,o)}addLineDeco(a){let o=a.spec.attributes,u=a.spec.class;o&&(this.attrs=combineAttrs(o,this.attrs||{})),u&&(this.attrs=combineAttrs({class:u},this.attrs||{}))}domAtPos(a){return inlineDOMAtPos(this,a)}reuseDOM(a){a.nodeName=="DIV"&&(this.setDOM(a),this.flags|=6)}sync(a,o){var u;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(a,o);let p=this.dom.lastChild;for(;p&&ContentView.get(p)instanceof MarkView;)p=p.lastChild;if(!p||!this.length||p.nodeName!="BR"&&((u=ContentView.get(p))===null||u===void 0?void 0:u.isEditable)==!1&&(!browser.ios||!this.children.some(d=>d instanceof TextView))){let d=document.createElement("BR");d.cmIgnore=!0,this.dom.appendChild(d)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let a=0,o;for(let u of this.children){if(!(u instanceof TextView)||/[^ -~]/.test(u.text))return null;let p=clientRectsFor(u.dom);if(p.length!=1)return null;a+=p[0].width,o=p[0].height}return a?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:a/this.length,textHeight:o}:null}coordsAt(a,o){let u=coordsInChildren(this,a,o);if(!this.children.length&&u&&this.parent){let{heightOracle:p}=this.parent.view.viewState,d=u.bottom-u.top;if(Math.abs(d-p.lineHeight)<2&&p.textHeight<d){let f=(d-p.textHeight)/2;return{top:u.top+f,bottom:u.bottom-f,left:u.left,right:u.left}}}return u}become(a){return a instanceof LineView&&this.children.length==0&&a.children.length==0&&attrsEq(this.attrs,a.attrs)&&this.breakAfter==a.breakAfter}covers(){return!0}static find(a,o){for(let u=0,p=0;u<a.children.length;u++){let d=a.children[u],f=p+d.length;if(f>=o){if(d instanceof LineView)return d;if(f>o)break}p=f+d.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(a,o,u){super(),this.widget=a,this.length=o,this.deco=u,this.breakAfter=0,this.prevWidget=null}merge(a,o,u,p,d,f){return u&&(!(u instanceof BlockWidgetView)||!this.widget.compare(u.widget)||a>0&&d<=0||o<this.length&&f<=0)?!1:(this.length=a+(u?u.length:0)+(this.length-o),!0)}domAtPos(a){return a==0?DOMPos.before(this.dom):DOMPos.after(this.dom,a==this.length)}split(a){let o=this.length-a;this.length=a;let u=new BlockWidgetView(this.widget,o,this.deco);return u.breakAfter=this.breakAfter,u}get children(){return noChildren}sync(a){(!this.dom||!this.widget.updateDOM(this.dom,a))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(a)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text$1.empty}domBoundsAround(){return null}become(a){return a instanceof BlockWidgetView&&a.widget.constructor==this.widget.constructor?(a.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=a.widget,this.length=a.length,this.deco=a.deco,this.breakAfter=a.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(a){return this.widget.ignoreEvent(a)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(a,o){let u=this.widget.coordsAt(this.dom,a,o);return u||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?a==0:o<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(a){let{startSide:o,endSide:u}=this.deco;return o==u?!1:a<0?o<0:u>0}}class BlockGapWidget extends WidgetType{constructor(a){super(),this.height=a}toDOM(){let a=document.createElement("div");return a.className="cm-gap",this.updateDOM(a),a}eq(a){return a.height==this.height}updateDOM(a){return a.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(a,o,u,p){this.doc=a,this.pos=o,this.end=u,this.disallowBlockEffectsFor=p,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=a.iter(),this.skip=o}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let a=this.content[this.content.length-1];return!(a.breakAfter||a instanceof BlockWidgetView&&a.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(a=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),a),a.length),this.pendingBuffer=0)}addBlockWidget(a){this.flushBuffer(),this.curLine=null,this.content.push(a)}finish(a){this.pendingBuffer&&a<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(a&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(a,o,u){for(;a>0;){if(this.textOff==this.text.length){let{value:d,lineBreak:f,done:g}=this.cursor.next(this.skip);if(this.skip=0,g)throw new Error("Ran out of text content when drawing inline views");if(f){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,a--;continue}else this.text=d,this.textOff=0}let p=Math.min(this.text.length-this.textOff,a,512);this.flushBuffer(o.slice(o.length-u)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+p)),o),u),this.atCursorPos=!0,this.textOff+=p,a-=p,u=0}}span(a,o,u,p){this.buildText(o-a,u,p),this.pos=o,this.openStart<0&&(this.openStart=p)}point(a,o,u,p,d,f){if(this.disallowBlockEffectsFor[f]&&u instanceof PointDecoration){if(u.block)throw new RangeError("Block decorations may not be specified via plugins");if(o>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let g=o-a;if(u instanceof PointDecoration)if(u.block)u.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(u.widget||NullWidget.block,g,u));else{let b=WidgetView.create(u.widget||NullWidget.inline,g,g?0:u.startSide),O=this.atCursorPos&&!b.isEditable&&d<=p.length&&(a<o||u.startSide>0),S=!b.isEditable&&(a<o||d>p.length||u.startSide<=0),M=this.getLine();this.pendingBuffer==2&&!O&&!b.isEditable&&(this.pendingBuffer=0),this.flushBuffer(p),O&&(M.append(wrapMarks(new WidgetBufferView(1),p),d),d=p.length+Math.max(0,d-p.length)),M.append(wrapMarks(b,p),d),this.atCursorPos=S,this.pendingBuffer=S?a<o||d>p.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=p.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(u);g&&(this.textOff+g<=this.text.length?this.textOff+=g:(this.skip+=g-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=o),this.openStart<0&&(this.openStart=d)}static build(a,o,u,p,d){let f=new ContentBuilder(a,o,u,d);return f.openEnd=RangeSet.spans(p,o,u,f),f.openStart<0&&(f.openStart=f.openEnd),f.finish(f.openEnd),f}}function wrapMarks(l,a){for(let o of a)l=new MarkView(o,[l],l.length);return l}class NullWidget extends WidgetType{constructor(a){super(),this.tag=a}eq(a){return a.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(a){return a.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span"),NullWidget.block=new NullWidget("div");var Direction=function(l){return l[l.LTR=0]="LTR",l[l.RTL=1]="RTL",l}(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(l){let a=[];for(let o=0;o<l.length;o++)a.push(1<<+l[o]);return a}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let l of["()","[]","{}"]){let a=l.charCodeAt(0),o=l.charCodeAt(1);Brackets[a]=o,Brackets[o]=-a}function charType(l){return l<=247?LowTypes[l]:1424<=l&&l<=1524?2:1536<=l&&l<=1785?ArabicTypes[l-1536]:1774<=l&&l<=2220?4:8192<=l&&l<=8204?256:64336<=l&&l<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(a,o,u){this.from=a,this.to=o,this.level=u}side(a,o){return this.dir==o==a?this.to:this.from}forward(a,o){return a==(this.dir==o)}static find(a,o,u,p){let d=-1;for(let f=0;f<a.length;f++){let g=a[f];if(g.from<=o&&g.to>=o){if(g.level==u)return f;(d<0||(p!=0?p<0?g.from<o:g.to>o:a[d].level>g.level))&&(d=f)}}if(d<0)throw new RangeError("Index out of range");return d}}function isolatesEq(l,a){if(l.length!=a.length)return!1;for(let o=0;o<l.length;o++){let u=l[o],p=a[o];if(u.from!=p.from||u.to!=p.to||u.direction!=p.direction||!isolatesEq(u.inner,p.inner))return!1}return!0}const types=[];function computeCharTypes(l,a,o,u,p){for(let d=0;d<=u.length;d++){let f=d?u[d-1].to:a,g=d<u.length?u[d].from:o,b=d?256:p;for(let O=f,S=b,M=b;O<g;O++){let A=charType(l.charCodeAt(O));A==512?A=S:A==8&&M==4&&(A=16),types[O]=A==4?2:A,A&7&&(M=A),S=A}for(let O=f,S=b,M=b;O<g;O++){let A=types[O];if(A==128)O<g-1&&S==types[O+1]&&S&24?A=types[O]=S:types[O]=256;else if(A==64){let F=O+1;for(;F<g&&types[F]==64;)F++;let $=O&&S==8||F<o&&types[F]==8?M==1?1:8:256;for(let B=O;B<F;B++)types[B]=$;O=F-1}else A==8&&M==1&&(types[O]=1);S=A,A&7&&(M=A)}}}function processBracketPairs(l,a,o,u,p){let d=p==1?2:1;for(let f=0,g=0,b=0;f<=u.length;f++){let O=f?u[f-1].to:a,S=f<u.length?u[f].from:o;for(let M=O,A,F,$;M<S;M++)if(F=Brackets[A=l.charCodeAt(M)])if(F<0){for(let B=g-3;B>=0;B-=3)if(BracketStack[B+1]==-F){let I=BracketStack[B+2],U=I&2?p:I&4?I&1?d:p:0;U&&(types[M]=types[BracketStack[B]]=U),g=B;break}}else{if(BracketStack.length==189)break;BracketStack[g++]=M,BracketStack[g++]=A,BracketStack[g++]=b}else if(($=types[M])==2||$==1){let B=$==p;b=B?0:1;for(let I=g-3;I>=0;I-=3){let U=BracketStack[I+2];if(U&2)break;if(B)BracketStack[I+2]|=2;else{if(U&4)break;BracketStack[I+2]|=4}}}}}function processNeutrals(l,a,o,u){for(let p=0,d=u;p<=o.length;p++){let f=p?o[p-1].to:l,g=p<o.length?o[p].from:a;for(let b=f;b<g;){let O=types[b];if(O==256){let S=b+1;for(;;)if(S==g){if(p==o.length)break;S=o[p++].to,g=p<o.length?o[p].from:a}else if(types[S]==256)S++;else break;let M=d==1,A=(S<a?types[S]:u)==1,F=M==A?M?1:2:u;for(let $=S,B=p,I=B?o[B-1].to:l;$>b;)$==I&&($=o[--B].from,I=B?o[B-1].to:l),types[--$]=F;b=S}else d=O,b++}}}function emitSpans(l,a,o,u,p,d,f){let g=u%2?2:1;if(u%2==p%2)for(let b=a,O=0;b<o;){let S=!0,M=!1;if(O==d.length||b<d[O].from){let B=types[b];B!=g&&(S=!1,M=B==16)}let A=!S&&g==1?[]:null,F=S?u:u+1,$=b;e:for(;;)if(O<d.length&&$==d[O].from){if(M)break e;let B=d[O];if(!S)for(let I=B.to,U=O+1;;){if(I==o)break e;if(U<d.length&&d[U].from==I)I=d[U++].to;else{if(types[I]==g)break e;break}}if(O++,A)A.push(B);else{B.from>b&&f.push(new BidiSpan(b,B.from,F));let I=B.direction==LTR!=!(F%2);computeSectionOrder(l,I?u+1:u,p,B.inner,B.from,B.to,f),b=B.to}$=B.to}else{if($==o||(S?types[$]!=g:types[$]==g))break;$++}A?emitSpans(l,b,$,u+1,p,A,f):b<$&&f.push(new BidiSpan(b,$,F)),b=$}else for(let b=o,O=d.length;b>a;){let S=!0,M=!1;if(!O||b>d[O-1].to){let B=types[b-1];B!=g&&(S=!1,M=B==16)}let A=!S&&g==1?[]:null,F=S?u:u+1,$=b;e:for(;;)if(O&&$==d[O-1].to){if(M)break e;let B=d[--O];if(!S)for(let I=B.from,U=O;;){if(I==a)break e;if(U&&d[U-1].to==I)I=d[--U].from;else{if(types[I-1]==g)break e;break}}if(A)A.push(B);else{B.to<b&&f.push(new BidiSpan(B.to,b,F));let I=B.direction==LTR!=!(F%2);computeSectionOrder(l,I?u+1:u,p,B.inner,B.from,B.to,f),b=B.from}$=B.from}else{if($==a||(S?types[$-1]!=g:types[$-1]==g))break;$--}A?emitSpans(l,$,b,u+1,p,A,f):$<b&&f.push(new BidiSpan($,b,F)),b=$}}function computeSectionOrder(l,a,o,u,p,d,f){let g=a%2?2:1;computeCharTypes(l,p,d,u,g),processBracketPairs(l,p,d,u,g),processNeutrals(p,d,u,g),emitSpans(l,p,d,a,o,u,f)}function computeOrder(l,a,o){if(!l)return[new BidiSpan(0,0,a==RTL?1:0)];if(a==LTR&&!o.length&&!BidiRE.test(l))return trivialOrder(l.length);if(o.length)for(;l.length>types.length;)types[types.length]=256;let u=[],p=a==LTR?0:1;return computeSectionOrder(l,p,p,o,0,l.length,u),u}function trivialOrder(l){return[new BidiSpan(0,l,0)]}let movedOver="";function moveVisually(l,a,o,u,p){var d;let f=u.head-l.from,g=BidiSpan.find(a,f,(d=u.bidiLevel)!==null&&d!==void 0?d:-1,u.assoc),b=a[g],O=b.side(p,o);if(f==O){let A=g+=p?1:-1;if(A<0||A>=a.length)return null;b=a[g=A],f=b.side(!p,o),O=b.side(p,o)}let S=findClusterBreak(l.text,f,b.forward(p,o));(S<b.from||S>b.to)&&(S=O),movedOver=l.text.slice(Math.min(f,S),Math.max(f,S));let M=g==(p?a.length-1:0)?null:a[g+(p?1:-1)];return M&&S==O&&M.level+(p?0:1)<b.level?EditorSelection.cursor(M.side(!p,o)+l.from,M.forward(p,o)?1:-1,M.level):EditorSelection.cursor(S+l.from,b.forward(p,o)?-1:1,b.level)}function autoDirection(l,a,o){for(let u=a;u<o;u++){let p=charType(l.charCodeAt(u));if(p==1)return LTR;if(p==2||p==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:l=>l.some(a=>a)}),nativeSelectionHidden=Facet.define({combine:l=>l.some(a=>a)}),scrollHandler=Facet.define();class ScrollTarget{constructor(a,o="nearest",u="nearest",p=5,d=5,f=!1){this.range=a,this.y=o,this.x=u,this.yMargin=p,this.xMargin=d,this.isSnapshot=f}map(a){return a.empty?this:new ScrollTarget(this.range.map(a),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(a){return this.range.to<=a.doc.length?this:new ScrollTarget(EditorSelection.cursor(a.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(l,a)=>l.map(a)}),setEditContextFormatting=StateEffect.define();function logException(l,a,o){let u=l.facet(exceptionSink);u.length?u[0](a):window.onerror?window.onerror(String(a),o,void 0,void 0,a):o?console.error(o+":",a):console.error(a)}const editable=Facet.define({combine:l=>l.length?l[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define();class ViewPlugin{constructor(a,o,u,p,d){this.id=a,this.create=o,this.domEventHandlers=u,this.domEventObservers=p,this.extension=d(this)}static define(a,o){const{eventHandlers:u,eventObservers:p,provide:d,decorations:f}=o||{};return new ViewPlugin(nextPluginID++,a,u,p,g=>{let b=[viewPlugin.of(g)];return f&&b.push(decorations.of(O=>{let S=O.plugin(g);return S?f(S):Decoration.none})),d&&b.push(d(g)),b})}static fromClass(a,o){return ViewPlugin.define(u=>new a(u),o)}}class PluginInstance{constructor(a){this.spec=a,this.mustUpdate=null,this.value=null}update(a){if(this.value){if(this.mustUpdate){let o=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(o)}catch(u){if(logException(o.state,u,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(a)}catch(o){logException(a.state,o,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(a){var o;if(!((o=this.value)===null||o===void 0)&&o.destroy)try{this.value.destroy()}catch(u){logException(a.state,u,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(l,a){let o=l.state.facet(bidiIsolatedRanges);if(!o.length)return o;let u=o.map(d=>d instanceof Function?d(l):d),p=[];return RangeSet.spans(u,a.from,a.to,{point(){},span(d,f,g,b){let O=d-a.from,S=f-a.from,M=p;for(let A=g.length-1;A>=0;A--,b--){let F=g[A].spec.bidiIsolate,$;if(F==null&&(F=autoDirection(a.text,O,S)),b>0&&M.length&&($=M[M.length-1]).to==O&&$.direction==F)$.to=S,M=$.inner;else{let B={from:O,to:S,direction:F,inner:[]};M.push(B),M=B.inner}}}}),p}const scrollMargins=Facet.define();function getScrollMargins(l){let a=0,o=0,u=0,p=0;for(let d of l.state.facet(scrollMargins)){let f=d(l);f&&(f.left!=null&&(a=Math.max(a,f.left)),f.right!=null&&(o=Math.max(o,f.right)),f.top!=null&&(u=Math.max(u,f.top)),f.bottom!=null&&(p=Math.max(p,f.bottom)))}return{left:a,right:o,top:u,bottom:p}}const styleModule=Facet.define();class ChangedRange{constructor(a,o,u,p){this.fromA=a,this.toA=o,this.fromB=u,this.toB=p}join(a){return new ChangedRange(Math.min(this.fromA,a.fromA),Math.max(this.toA,a.toA),Math.min(this.fromB,a.fromB),Math.max(this.toB,a.toB))}addToSet(a){let o=a.length,u=this;for(;o>0;o--){let p=a[o-1];if(!(p.fromA>u.toA)){if(p.toA<u.fromA)break;u=u.join(p),a.splice(o-1,1)}}return a.splice(o,0,u),a}static extendWithRanges(a,o){if(o.length==0)return a;let u=[];for(let p=0,d=0,f=0,g=0;;p++){let b=p==a.length?null:a[p],O=f-g,S=b?b.fromB:1e9;for(;d<o.length&&o[d]<S;){let M=o[d],A=o[d+1],F=Math.max(g,M),$=Math.min(S,A);if(F<=$&&new ChangedRange(F+O,$+O,F,$).addToSet(u),A>S)break;d+=2}if(!b)return u;new ChangedRange(b.fromA,b.toA,b.fromB,b.toB).addToSet(u),f=b.toA,g=b.toB}}}class ViewUpdate{constructor(a,o,u){this.view=a,this.state=o,this.transactions=u,this.flags=0,this.startState=a.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let d of u)this.changes=this.changes.compose(d.changes);let p=[];this.changes.iterChangedRanges((d,f,g,b)=>p.push(new ChangedRange(d,f,g,b))),this.changedRanges=p}static create(a,o,u){return new ViewUpdate(a,o,u)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(a=>a.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(a){super(),this.view=a,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(a.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,a.state.doc.length)],0,null)}update(a){var o;let u=a.changedRanges;this.minWidth>0&&u.length&&(u.every(({fromA:O,toA:S})=>S<this.minWidthFrom||O>this.minWidthTo)?(this.minWidthFrom=a.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=a.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(a);let p=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((o=this.domChanged)===null||o===void 0)&&o.newSel?p=this.domChanged.newSel.head:!touchesComposition(a.changes,this.hasComposition)&&!a.selectionSet&&(p=a.state.selection.main.head));let d=p>-1?findCompositionRange(this.view,a.changes,p):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:O,to:S}=this.hasComposition;u=new ChangedRange(O,S,a.changes.mapPos(O,-1),a.changes.mapPos(S,1)).addToSet(u.slice())}this.hasComposition=d?{from:d.range.fromB,to:d.range.toB}:null,(browser.ie||browser.chrome)&&!d&&a&&a.state.doc.lines!=a.startState.doc.lines&&(this.forceSelection=!0);let f=this.decorations,g=this.updateDeco(),b=findChangedDeco(f,g,a.changes);return u=ChangedRange.extendWithRanges(u,b),!(this.flags&7)&&u.length==0?!1:(this.updateInner(u,a.startState.doc.length,d),a.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(a,o,u){this.view.viewState.mustMeasureContent=!0,this.updateChildren(a,o,u);let{observer:p}=this.view;p.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let f=browser.chrome||browser.ios?{node:p.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,f),this.flags&=-8,f&&(f.written||p.selectionRange.focusNode!=f.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(f=>f.flags&=-9);let d=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let f of this.children)f instanceof BlockWidgetView&&f.widget instanceof BlockGapWidget&&d.push(f.dom);p.updateGaps(d)}updateChildren(a,o,u){let p=u?u.range.addToSet(a.slice()):a,d=this.childCursor(o);for(let f=p.length-1;;f--){let g=f>=0?p[f]:null;if(!g)break;let{fromA:b,toA:O,fromB:S,toB:M}=g,A,F,$,B;if(u&&u.range.fromB<M&&u.range.toB>S){let se=ContentBuilder.build(this.view.state.doc,S,u.range.fromB,this.decorations,this.dynamicDecorationMap),q=ContentBuilder.build(this.view.state.doc,u.range.toB,M,this.decorations,this.dynamicDecorationMap);F=se.breakAtStart,$=se.openStart,B=q.openEnd;let le=this.compositionView(u);q.breakAtStart?le.breakAfter=1:q.content.length&&le.merge(le.length,le.length,q.content[0],!1,q.openStart,0)&&(le.breakAfter=q.content[0].breakAfter,q.content.shift()),se.content.length&&le.merge(0,0,se.content[se.content.length-1],!0,0,se.openEnd)&&se.content.pop(),A=se.content.concat(le).concat(q.content)}else({content:A,breakAtStart:F,openStart:$,openEnd:B}=ContentBuilder.build(this.view.state.doc,S,M,this.decorations,this.dynamicDecorationMap));let{i:I,off:U}=d.findPos(O,1),{i:te,off:de}=d.findPos(b,-1);replaceRange(this,te,de,I,U,A,F,$,B)}u&&this.fixCompositionDOM(u)}updateEditContextFormatting(a){this.editContextFormatting=this.editContextFormatting.map(a.changes);for(let o of a.transactions)for(let u of o.effects)u.is(setEditContextFormatting)&&(this.editContextFormatting=u.value)}compositionView(a){let o=new TextView(a.text.nodeValue);o.flags|=8;for(let{deco:p}of a.marks)o=new MarkView(p,[o],o.length);let u=new LineView;return u.append(o,0),u}fixCompositionDOM(a){let o=(d,f)=>{f.flags|=8|(f.children.some(b=>b.flags&7)?1:0),this.markedForComposition.add(f);let g=ContentView.get(d);g&&g!=f&&(g.dom=null),f.setDOM(d)},u=this.childPos(a.range.fromB,1),p=this.children[u.i];o(a.line,p);for(let d=a.marks.length-1;d>=-1;d--)u=p.childPos(u.off,1),p=p.children[u.i],o(d>=0?a.marks[d].node:a.text,p)}updateSelection(a=!1,o=!1){(a||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let u=this.view.root.activeElement,p=u==this.dom,d=!p&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(u&&this.dom.contains(u));if(!(p||o||d))return;let f=this.forceSelection;this.forceSelection=!1;let g=this.view.state.selection.main,b=this.moveToLine(this.domAtPos(g.anchor)),O=g.empty?b:this.moveToLine(this.domAtPos(g.head));if(browser.gecko&&g.empty&&!this.hasComposition&&betweenUneditable(b)){let M=document.createTextNode("");this.view.observer.ignore(()=>b.node.insertBefore(M,b.node.childNodes[b.offset]||null)),b=O=new DOMPos(M,0),f=!0}let S=this.view.observer.selectionRange;(f||!S.focusNode||(!isEquivalentPosition(b.node,b.offset,S.anchorNode,S.anchorOffset)||!isEquivalentPosition(O.node,O.offset,S.focusNode,S.focusOffset))&&!this.suppressWidgetCursorChange(S,g))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(S.focusNode)&&inUneditable(S.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let M=getSelection(this.view.root);if(M)if(g.empty){if(browser.gecko){let A=nextToUneditable(b.node,b.offset);if(A&&A!=3){let F=(A==1?textNodeBefore:textNodeAfter)(b.node,b.offset);F&&(b=new DOMPos(F.node,F.offset))}}M.collapse(b.node,b.offset),g.bidiLevel!=null&&M.caretBidiLevel!==void 0&&(M.caretBidiLevel=g.bidiLevel)}else if(M.extend){M.collapse(b.node,b.offset);try{M.extend(O.node,O.offset)}catch{}}else{let A=document.createRange();g.anchor>g.head&&([b,O]=[O,b]),A.setEnd(O.node,O.offset),A.setStart(b.node,b.offset),M.removeAllRanges(),M.addRange(A)}d&&this.view.root.activeElement==this.dom&&(this.dom.blur(),u&&u.focus())}),this.view.observer.setSelectionRange(b,O)),this.impreciseAnchor=b.precise?null:new DOMPos(S.anchorNode,S.anchorOffset),this.impreciseHead=O.precise?null:new DOMPos(S.focusNode,S.focusOffset)}suppressWidgetCursorChange(a,o){return this.hasComposition&&o.empty&&isEquivalentPosition(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset)&&this.posFromDOM(a.focusNode,a.focusOffset)==o.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:a}=this,o=a.state.selection.main,u=getSelection(a.root),{anchorNode:p,anchorOffset:d}=a.observer.selectionRange;if(!u||!o.empty||!o.assoc||!u.modify)return;let f=LineView.find(this,o.head);if(!f)return;let g=f.posAtStart;if(o.head==g||o.head==g+f.length)return;let b=this.coordsAt(o.head,-1),O=this.coordsAt(o.head,1);if(!b||!O||b.bottom>O.top)return;let S=this.domAtPos(o.head+o.assoc);u.collapse(S.node,S.offset),u.modify("move",o.assoc<0?"forward":"backward","lineboundary"),a.observer.readSelectionRange();let M=a.observer.selectionRange;a.docView.posFromDOM(M.anchorNode,M.anchorOffset)!=o.from&&u.collapse(p,d)}moveToLine(a){let o=this.dom,u;if(a.node!=o)return a;for(let p=a.offset;!u&&p<o.childNodes.length;p++){let d=ContentView.get(o.childNodes[p]);d instanceof LineView&&(u=d.domAtPos(0))}for(let p=a.offset-1;!u&&p>=0;p--){let d=ContentView.get(o.childNodes[p]);d instanceof LineView&&(u=d.domAtPos(d.length))}return u?new DOMPos(u.node,u.offset,!0):a}nearest(a){for(let o=a;o;){let u=ContentView.get(o);if(u&&u.rootView==this)return u;o=o.parentNode}return null}posFromDOM(a,o){let u=this.nearest(a);if(!u)throw new RangeError("Trying to find position for a DOM position outside of the document");return u.localPosFromDOM(a,o)+u.posAtStart}domAtPos(a){let{i:o,off:u}=this.childCursor().findPos(a,-1);for(;o<this.children.length-1;){let p=this.children[o];if(u<p.length||p instanceof LineView)break;o++,u=0}return this.children[o].domAtPos(u)}coordsAt(a,o){let u=null,p=0;for(let d=this.length,f=this.children.length-1;f>=0;f--){let g=this.children[f],b=d-g.breakAfter,O=b-g.length;if(b<a)break;if(O<=a&&(O<a||g.covers(-1))&&(b>a||g.covers(1))&&(!u||g instanceof LineView&&!(u instanceof LineView&&o>=0)))u=g,p=O;else if(u&&O==a&&b==a&&g instanceof BlockWidgetView&&Math.abs(o)<2){if(g.deco.startSide<0)break;f&&(u=null)}d=O}return u?u.coordsAt(a-p,o):null}coordsForChar(a){let{i:o,off:u}=this.childPos(a,1),p=this.children[o];if(!(p instanceof LineView))return null;for(;p.children.length;){let{i:g,off:b}=p.childPos(u,1);for(;;g++){if(g==p.children.length)return null;if((p=p.children[g]).length)break}u=b}if(!(p instanceof TextView))return null;let d=findClusterBreak(p.text,u);if(d==u)return null;let f=textRange(p.dom,u,d).getClientRects();for(let g=0;g<f.length;g++){let b=f[g];if(g==f.length-1||b.top<b.bottom&&b.left<b.right)return b}return null}measureVisibleLineHeights(a){let o=[],{from:u,to:p}=a,d=this.view.contentDOM.clientWidth,f=d>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,g=-1,b=this.view.textDirection==Direction.LTR;for(let O=0,S=0;S<this.children.length;S++){let M=this.children[S],A=O+M.length;if(A>p)break;if(O>=u){let F=M.dom.getBoundingClientRect();if(o.push(F.height),f){let $=M.dom.lastChild,B=$?clientRectsFor($):[];if(B.length){let I=B[B.length-1],U=b?I.right-F.left:F.right-I.left;U>g&&(g=U,this.minWidth=d,this.minWidthFrom=O,this.minWidthTo=A)}}}O=A+M.breakAfter}return o}textDirectionAt(a){let{i:o}=this.childPos(a,1);return getComputedStyle(this.children[o].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let d of this.children)if(d instanceof LineView){let f=d.measureTextSize();if(f)return f}let a=document.createElement("div"),o,u,p;return a.className="cm-line",a.style.width="99999px",a.style.position="absolute",a.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(a);let d=clientRectsFor(a.firstChild)[0];o=a.getBoundingClientRect().height,u=d?d.width/27:7,p=d?d.height:o,a.remove()}),{lineHeight:o,charWidth:u,textHeight:p}}childCursor(a=this.length){let o=this.children.length;return o&&(a-=this.children[--o].length),new ChildCursor(this.children,a,o)}computeBlockGapDeco(){let a=[],o=this.view.viewState;for(let u=0,p=0;;p++){let d=p==o.viewports.length?null:o.viewports[p],f=d?d.from-1:this.length;if(f>u){let g=(o.lineBlockAt(f).bottom-o.lineBlockAt(u).top)/this.view.scaleY;a.push(Decoration.replace({widget:new BlockGapWidget(g),block:!0,inclusive:!0,isBlockGap:!0}).range(u,f))}if(!d)break;u=d.to+1}return Decoration.set(a)}updateDeco(){let a=1,o=this.view.state.facet(decorations).map(d=>(this.dynamicDecorationMap[a++]=typeof d=="function")?d(this.view):d),u=!1,p=this.view.state.facet(outerDecorations).map((d,f)=>{let g=typeof d=="function";return g&&(u=!0),g?d(this.view):d});for(p.length&&(this.dynamicDecorationMap[a++]=u,o.push(RangeSet.join(p))),this.decorations=[this.editContextFormatting,...o,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];a<this.decorations.length;)this.dynamicDecorationMap[a++]=!1;return this.decorations}scrollIntoView(a){if(a.isSnapshot){let O=this.view.viewState.lineBlockAt(a.range.head);this.view.scrollDOM.scrollTop=O.top-a.yMargin,this.view.scrollDOM.scrollLeft=a.xMargin;return}for(let O of this.view.state.facet(scrollHandler))try{if(O(this.view,a.range,a))return!0}catch(S){logException(this.view.state,S,"scroll handler")}let{range:o}=a,u=this.coordsAt(o.head,o.empty?o.assoc:o.head>o.anchor?-1:1),p;if(!u)return;!o.empty&&(p=this.coordsAt(o.anchor,o.anchor>o.head?-1:1))&&(u={left:Math.min(u.left,p.left),top:Math.min(u.top,p.top),right:Math.max(u.right,p.right),bottom:Math.max(u.bottom,p.bottom)});let d=getScrollMargins(this.view),f={left:u.left-d.left,top:u.top-d.top,right:u.right+d.right,bottom:u.bottom+d.bottom},{offsetWidth:g,offsetHeight:b}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,f,o.head<o.anchor?-1:1,a.x,a.y,Math.max(Math.min(a.xMargin,g),-g),Math.max(Math.min(a.yMargin,b),-b),this.view.textDirection==Direction.LTR)}}function betweenUneditable(l){return l.node.nodeType==1&&l.node.firstChild&&(l.offset==0||l.node.childNodes[l.offset-1].contentEditable=="false")&&(l.offset==l.node.childNodes.length||l.node.childNodes[l.offset].contentEditable=="false")}function findCompositionNode(l,a){let o=l.observer.selectionRange;if(!o.focusNode)return null;let u=textNodeBefore(o.focusNode,o.focusOffset),p=textNodeAfter(o.focusNode,o.focusOffset),d=u||p;if(p&&u&&p.node!=u.node){let g=ContentView.get(p.node);if(!g||g instanceof TextView&&g.text!=p.node.nodeValue)d=p;else if(l.docView.lastCompositionAfterCursor){let b=ContentView.get(u.node);!b||b instanceof TextView&&b.text!=u.node.nodeValue||(d=p)}}if(l.docView.lastCompositionAfterCursor=d!=u,!d)return null;let f=a-d.offset;return{from:f,to:f+d.node.nodeValue.length,node:d.node}}function findCompositionRange(l,a,o){let u=findCompositionNode(l,o);if(!u)return null;let{node:p,from:d,to:f}=u,g=p.nodeValue;if(/[\n\r]/.test(g)||l.state.doc.sliceString(u.from,u.to)!=g)return null;let b=a.invertedDesc,O=new ChangedRange(b.mapPos(d),b.mapPos(f),d,f),S=[];for(let M=p.parentNode;;M=M.parentNode){let A=ContentView.get(M);if(A instanceof MarkView)S.push({node:M,deco:A.mark});else{if(A instanceof LineView||M.nodeName=="DIV"&&M.parentNode==l.contentDOM)return{range:O,text:p,marks:S,line:M};if(M!=l.contentDOM)S.push({node:M,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs(M),tagName:M.tagName.toLowerCase()})});else return null}}}function nextToUneditable(l,a){return l.nodeType!=1?0:(a&&l.childNodes[a-1].contentEditable=="false"?1:0)|(a<l.childNodes.length&&l.childNodes[a].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(a,o){addRange(a,o,this.changes)}comparePoint(a,o){addRange(a,o,this.changes)}boundChange(a){addRange(a,a,this.changes)}};function findChangedDeco(l,a,o){let u=new DecorationComparator$1;return RangeSet.compare(l,a,o,u),u.changes}function inUneditable(l,a){for(let o=l;o&&o!=a;o=o.assignedSlot||o.parentNode)if(o.nodeType==1&&o.contentEditable=="false")return!0;return!1}function touchesComposition(l,a){let o=!1;return a&&l.iterChangedRanges((u,p)=>{u<a.to&&p>a.from&&(o=!0)}),o}function groupAt(l,a,o=1){let u=l.charCategorizer(a),p=l.doc.lineAt(a),d=a-p.from;if(p.length==0)return EditorSelection.cursor(a);d==0?o=1:d==p.length&&(o=-1);let f=d,g=d;o<0?f=findClusterBreak(p.text,d,!1):g=findClusterBreak(p.text,d);let b=u(p.text.slice(f,g));for(;f>0;){let O=findClusterBreak(p.text,f,!1);if(u(p.text.slice(O,f))!=b)break;f=O}for(;g<p.length;){let O=findClusterBreak(p.text,g);if(u(p.text.slice(g,O))!=b)break;g=O}return EditorSelection.range(f+p.from,g+p.from)}function getdx(l,a){return a.left>l?a.left-l:Math.max(0,l-a.right)}function getdy(l,a){return a.top>l?a.top-l:Math.max(0,l-a.bottom)}function yOverlap(l,a){return l.top<a.bottom-1&&l.bottom>a.top+1}function upTop(l,a){return a<l.top?{top:a,left:l.left,right:l.right,bottom:l.bottom}:l}function upBot(l,a){return a>l.bottom?{top:l.top,left:l.left,right:l.right,bottom:a}:l}function domPosAtCoords(l,a,o){let u,p,d,f,g=!1,b,O,S,M;for(let $=l.firstChild;$;$=$.nextSibling){let B=clientRectsFor($);for(let I=0;I<B.length;I++){let U=B[I];p&&yOverlap(p,U)&&(U=upTop(upBot(U,p.bottom),p.top));let te=getdx(a,U),de=getdy(o,U);if(te==0&&de==0)return $.nodeType==3?domPosInText($,a,o):domPosAtCoords($,a,o);if(!u||f>de||f==de&&d>te){u=$,p=U,d=te,f=de;let se=de?o<U.top?-1:1:te?a<U.left?-1:1:0;g=!se||(se>0?I<B.length-1:I>0)}te==0?o>U.bottom&&(!S||S.bottom<U.bottom)?(b=$,S=U):o<U.top&&(!M||M.top>U.top)&&(O=$,M=U):S&&yOverlap(S,U)?S=upBot(S,U.bottom):M&&yOverlap(M,U)&&(M=upTop(M,U.top))}}if(S&&S.bottom>=o?(u=b,p=S):M&&M.top<=o&&(u=O,p=M),!u)return{node:l,offset:0};let A=Math.max(p.left,Math.min(p.right,a));if(u.nodeType==3)return domPosInText(u,A,o);if(g&&u.contentEditable!="false")return domPosAtCoords(u,A,o);let F=Array.prototype.indexOf.call(l.childNodes,u)+(a>=(p.left+p.right)/2?1:0);return{node:l,offset:F}}function domPosInText(l,a,o){let u=l.nodeValue.length,p=-1,d=1e9,f=0;for(let g=0;g<u;g++){let b=textRange(l,g,g+1).getClientRects();for(let O=0;O<b.length;O++){let S=b[O];if(S.top==S.bottom)continue;f||(f=a-S.left);let M=(S.top>o?S.top-o:o-S.bottom)-1;if(S.left-1<=a&&S.right+1>=a&&M<d){let A=a>=(S.left+S.right)/2,F=A;if((browser.chrome||browser.gecko)&&textRange(l,g).getBoundingClientRect().left==S.right&&(F=!A),M<=0)return{node:l,offset:g+(F?1:0)};p=g+(F?1:0),d=M}}}return{node:l,offset:p>-1?p:f>0?l.nodeValue.length:0}}function posAtCoords(l,a,o,u=-1){var p,d;let f=l.contentDOM.getBoundingClientRect(),g=f.top+l.viewState.paddingTop,b,{docHeight:O}=l.viewState,{x:S,y:M}=a,A=M-g;if(A<0)return 0;if(A>O)return l.state.doc.length;for(let se=l.viewState.heightOracle.textHeight/2,q=!1;b=l.elementAtHeight(A),b.type!=BlockType.Text;)for(;A=u>0?b.bottom+se:b.top-se,!(A>=0&&A<=O);){if(q)return o?null:0;q=!0,u=-u}M=g+A;let F=b.from;if(F<l.viewport.from)return l.viewport.from==0?0:o?null:posAtCoordsImprecise(l,f,b,S,M);if(F>l.viewport.to)return l.viewport.to==l.state.doc.length?l.state.doc.length:o?null:posAtCoordsImprecise(l,f,b,S,M);let $=l.dom.ownerDocument,B=l.root.elementFromPoint?l.root:$,I=B.elementFromPoint(S,M);I&&!l.contentDOM.contains(I)&&(I=null),I||(S=Math.max(f.left+1,Math.min(f.right-1,S)),I=B.elementFromPoint(S,M),I&&!l.contentDOM.contains(I)&&(I=null));let U,te=-1;if(I&&((p=l.docView.nearest(I))===null||p===void 0?void 0:p.isEditable)!=!1){if($.caretPositionFromPoint){let se=$.caretPositionFromPoint(S,M);se&&({offsetNode:U,offset:te}=se)}else if($.caretRangeFromPoint){let se=$.caretRangeFromPoint(S,M);se&&({startContainer:U,startOffset:te}=se,(!l.contentDOM.contains(U)||browser.safari&&isSuspiciousSafariCaretResult(U,te,S)||browser.chrome&&isSuspiciousChromeCaretResult(U,te,S))&&(U=void 0))}U&&(te=Math.min(maxOffset(U),te))}if(!U||!l.docView.dom.contains(U)){let se=LineView.find(l.docView,F);if(!se)return A>b.top+b.height/2?b.to:b.from;({node:U,offset:te}=domPosAtCoords(se.dom,S,M))}let de=l.docView.nearest(U);if(!de)return null;if(de.isWidget&&((d=de.dom)===null||d===void 0?void 0:d.nodeType)==1){let se=de.dom.getBoundingClientRect();return a.y<se.top||a.y<=se.bottom&&a.x<=(se.left+se.right)/2?de.posAtStart:de.posAtEnd}else return de.localPosFromDOM(U,te)+de.posAtStart}function posAtCoordsImprecise(l,a,o,u,p){let d=Math.round((u-a.left)*l.defaultCharacterWidth);if(l.lineWrapping&&o.height>l.defaultLineHeight*1.5){let g=l.viewState.heightOracle.textHeight,b=Math.floor((p-o.top-(l.defaultLineHeight-g)*.5)/g);d+=b*l.viewState.heightOracle.lineLength}let f=l.state.sliceDoc(o.from,o.to);return o.from+findColumn(f,d,l.state.tabSize)}function isSuspiciousSafariCaretResult(l,a,o){let u;if(l.nodeType!=3||a!=(u=l.nodeValue.length))return!1;for(let p=l.nextSibling;p;p=p.nextSibling)if(p.nodeType!=1||p.nodeName!="BR")return!1;return textRange(l,u-1,u).getBoundingClientRect().left>o}function isSuspiciousChromeCaretResult(l,a,o){if(a!=0)return!1;for(let p=l;;){let d=p.parentNode;if(!d||d.nodeType!=1||d.firstChild!=p)return!1;if(d.classList.contains("cm-line"))break;p=d}let u=l.nodeType==1?l.getBoundingClientRect():textRange(l,0,Math.max(l.nodeValue.length,1)).getBoundingClientRect();return o-u.left>5}function blockAt(l,a){let o=l.lineBlockAt(a);if(Array.isArray(o.type)){for(let u of o.type)if(u.to>a||u.to==a&&(u.to==o.to||u.type==BlockType.Text))return u}return o}function moveToLineBoundary(l,a,o,u){let p=blockAt(l,a.head),d=!u||p.type!=BlockType.Text||!(l.lineWrapping||p.widgetLineBreaks)?null:l.coordsAtPos(a.assoc<0&&a.head>p.from?a.head-1:a.head);if(d){let f=l.dom.getBoundingClientRect(),g=l.textDirectionAt(p.from),b=l.posAtCoords({x:o==(g==Direction.LTR)?f.right-1:f.left+1,y:(d.top+d.bottom)/2});if(b!=null)return EditorSelection.cursor(b,o?-1:1)}return EditorSelection.cursor(o?p.to:p.from,o?-1:1)}function moveByChar(l,a,o,u){let p=l.state.doc.lineAt(a.head),d=l.bidiSpans(p),f=l.textDirectionAt(p.from);for(let g=a,b=null;;){let O=moveVisually(p,d,f,g,o),S=movedOver;if(!O){if(p.number==(o?l.state.doc.lines:1))return g;S=`
`,p=l.state.doc.line(p.number+(o?1:-1)),d=l.bidiSpans(p),O=l.visualLineSide(p,!o)}if(b){if(!b(S))return g}else{if(!u)return O;b=u(S)}g=O}}function byGroup(l,a,o){let u=l.state.charCategorizer(a),p=u(o);return d=>{let f=u(d);return p==CharCategory.Space&&(p=f),p==f}}function moveVertically(l,a,o,u){let p=a.head,d=o?1:-1;if(p==(o?l.state.doc.length:0))return EditorSelection.cursor(p,a.assoc);let f=a.goalColumn,g,b=l.contentDOM.getBoundingClientRect(),O=l.coordsAtPos(p,a.assoc||-1),S=l.documentTop;if(O)f==null&&(f=O.left-b.left),g=d<0?O.top:O.bottom;else{let F=l.viewState.lineBlockAt(p);f==null&&(f=Math.min(b.right-b.left,l.defaultCharacterWidth*(p-F.from))),g=(d<0?F.top:F.bottom)+S}let M=b.left+f,A=u??l.viewState.heightOracle.textHeight>>1;for(let F=0;;F+=10){let $=g+(A+F)*d,B=posAtCoords(l,{x:M,y:$},!1,d);if($<b.top||$>b.bottom||(d<0?B<p:B>p)){let I=l.docView.coordsForChar(B),U=!I||$<I.top?-1:1;return EditorSelection.cursor(B,U,void 0,f)}}}function skipAtomicRanges(l,a,o){for(;;){let u=0;for(let p of l)p.between(a-1,a+1,(d,f,g)=>{if(a>d&&a<f){let b=u||o||(a-d<f-a?-1:1);a=b<0?d:f,u=b}});if(!u)return a}}function skipAtoms(l,a,o){let u=skipAtomicRanges(l.state.facet(atomicRanges).map(p=>p(l)),o.from,a.head>o.from?-1:1);return u==o.from?o:EditorSelection.cursor(u,u<o.from?1:-1)}const LineBreakPlaceholder="￿";class DOMReader{constructor(a,o){this.points=a,this.text="",this.lineSeparator=o.facet(EditorState.lineSeparator)}append(a){this.text+=a}lineBreak(){this.text+=LineBreakPlaceholder}readRange(a,o){if(!a)return this;let u=a.parentNode;for(let p=a;;){this.findPointBefore(u,p);let d=this.text.length;this.readNode(p);let f=p.nextSibling;if(f==o)break;let g=ContentView.get(p),b=ContentView.get(f);(g&&b?g.breakAfter:(g?g.breakAfter:isBlockElement(p))||isBlockElement(f)&&(p.nodeName!="BR"||p.cmIgnore)&&this.text.length>d)&&this.lineBreak(),p=f}return this.findPointBefore(u,o),this}readTextNode(a){let o=a.nodeValue;for(let u of this.points)u.node==a&&(u.pos=this.text.length+Math.min(u.offset,o.length));for(let u=0,p=this.lineSeparator?null:/\r\n?|\n/g;;){let d=-1,f=1,g;if(this.lineSeparator?(d=o.indexOf(this.lineSeparator,u),f=this.lineSeparator.length):(g=p.exec(o))&&(d=g.index,f=g[0].length),this.append(o.slice(u,d<0?o.length:d)),d<0)break;if(this.lineBreak(),f>1)for(let b of this.points)b.node==a&&b.pos>this.text.length&&(b.pos-=f-1);u=d+f}}readNode(a){if(a.cmIgnore)return;let o=ContentView.get(a),u=o&&o.overrideDOMText;if(u!=null){this.findPointInside(a,u.length);for(let p=u.iter();!p.next().done;)p.lineBreak?this.lineBreak():this.append(p.value)}else a.nodeType==3?this.readTextNode(a):a.nodeName=="BR"?a.nextSibling&&this.lineBreak():a.nodeType==1&&this.readRange(a.firstChild,null)}findPointBefore(a,o){for(let u of this.points)u.node==a&&a.childNodes[u.offset]==o&&(u.pos=this.text.length)}findPointInside(a,o){for(let u of this.points)(a.nodeType==3?u.node==a:a.contains(u.node))&&(u.pos=this.text.length+(isAtEnd(a,u.node,u.offset)?o:0))}}function isAtEnd(l,a,o){for(;;){if(!a||o<maxOffset(a))return!1;if(a==l)return!0;o=domIndex(a)+1,a=a.parentNode}}class DOMPoint{constructor(a,o){this.node=a,this.offset=o,this.pos=-1}}class DOMChange{constructor(a,o,u,p){this.typeOver=p,this.bounds=null,this.text="",this.domChanged=o>-1;let{impreciseHead:d,impreciseAnchor:f}=a.docView;if(a.state.readOnly&&o>-1)this.newSel=null;else if(o>-1&&(this.bounds=a.docView.domBoundsAround(o,u,0))){let g=d||f?[]:selectionPoints(a),b=new DOMReader(g,a.state);b.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=b.text,this.newSel=selectionFromPoints(g,this.bounds.from)}else{let g=a.observer.selectionRange,b=d&&d.node==g.focusNode&&d.offset==g.focusOffset||!contains(a.contentDOM,g.focusNode)?a.state.selection.main.head:a.docView.posFromDOM(g.focusNode,g.focusOffset),O=f&&f.node==g.anchorNode&&f.offset==g.anchorOffset||!contains(a.contentDOM,g.anchorNode)?a.state.selection.main.anchor:a.docView.posFromDOM(g.anchorNode,g.anchorOffset),S=a.viewport;if((browser.ios||browser.chrome)&&a.state.selection.main.empty&&b!=O&&(S.from>0||S.to<a.state.doc.length)){let M=Math.min(b,O),A=Math.max(b,O),F=S.from-M,$=S.to-A;(F==0||F==1||M==0)&&($==0||$==-1||A==a.state.doc.length)&&(b=0,O=a.state.doc.length)}this.newSel=EditorSelection.single(O,b)}}}function applyDOMChange(l,a){let o,{newSel:u}=a,p=l.state.selection.main,d=l.inputState.lastKeyTime>Date.now()-100?l.inputState.lastKeyCode:-1;if(a.bounds){let{from:f,to:g}=a.bounds,b=p.from,O=null;(d===8||browser.android&&a.text.length<g-f)&&(b=p.to,O="end");let S=findDiff(l.state.doc.sliceString(f,g,LineBreakPlaceholder),a.text,b-f,O);S&&(browser.chrome&&d==13&&S.toB==S.from+2&&a.text.slice(S.from,S.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&S.toB--,o={from:f+S.from,to:f+S.toA,insert:Text$1.of(a.text.slice(S.from,S.toB).split(LineBreakPlaceholder))})}else u&&(!l.hasFocus&&l.state.facet(editable)||u.main.eq(p))&&(u=null);if(!o&&!u)return!1;if(!o&&a.typeOver&&!p.empty&&u&&u.main.empty?o={from:p.from,to:p.to,insert:l.state.doc.slice(p.from,p.to)}:(browser.mac||browser.android)&&o&&o.from==o.to&&o.from==p.head-1&&/^\. ?$/.test(o.insert.toString())&&l.contentDOM.getAttribute("autocorrect")=="off"?(u&&o.insert.length==2&&(u=EditorSelection.single(u.main.anchor-1,u.main.head-1)),o={from:o.from,to:o.to,insert:Text$1.of([o.insert.toString().replace("."," ")])}):o&&o.from>=p.from&&o.to<=p.to&&(o.from!=p.from||o.to!=p.to)&&p.to-p.from-(o.to-o.from)<=4?o={from:p.from,to:p.to,insert:l.state.doc.slice(p.from,o.from).append(o.insert).append(l.state.doc.slice(o.to,p.to))}:browser.chrome&&o&&o.from==o.to&&o.from==p.head&&o.insert.toString()==`
 `&&l.lineWrapping&&(u&&(u=EditorSelection.single(u.main.anchor-1,u.main.head-1)),o={from:p.from,to:p.to,insert:Text$1.of([" "])}),o)return applyDOMChangeInner(l,o,u,d);if(u&&!u.main.eq(p)){let f=!1,g="select";return l.inputState.lastSelectionTime>Date.now()-50&&(l.inputState.lastSelectionOrigin=="select"&&(f=!0),g=l.inputState.lastSelectionOrigin),l.dispatch({selection:u,scrollIntoView:f,userEvent:g}),!0}else return!1}function applyDOMChangeInner(l,a,o,u=-1){if(browser.ios&&l.inputState.flushIOSKey(a))return!0;let p=l.state.selection.main;if(browser.android&&(a.to==p.to&&(a.from==p.from||a.from==p.from-1&&l.state.sliceDoc(a.from,p.from)==" ")&&a.insert.length==1&&a.insert.lines==2&&dispatchKey(l.contentDOM,"Enter",13)||(a.from==p.from-1&&a.to==p.to&&a.insert.length==0||u==8&&a.insert.length<a.to-a.from&&a.to>p.head)&&dispatchKey(l.contentDOM,"Backspace",8)||a.from==p.from&&a.to==p.to+1&&a.insert.length==0&&dispatchKey(l.contentDOM,"Delete",46)))return!0;let d=a.insert.toString();l.inputState.composing>=0&&l.inputState.composing++;let f,g=()=>f||(f=applyDefaultInsert(l,a,o));return l.state.facet(inputHandler$1).some(b=>b(l,a.from,a.to,d,g))||l.dispatch(g()),!0}function applyDefaultInsert(l,a,o){let u,p=l.state,d=p.selection.main;if(a.from>=d.from&&a.to<=d.to&&a.to-a.from>=(d.to-d.from)/3&&(!o||o.main.empty&&o.main.from==a.from+a.insert.length)&&l.inputState.composing<0){let g=d.from<a.from?p.sliceDoc(d.from,a.from):"",b=d.to>a.to?p.sliceDoc(a.to,d.to):"";u=p.replaceSelection(l.state.toText(g+a.insert.sliceString(0,void 0,l.state.lineBreak)+b))}else{let g=p.changes(a),b=o&&o.main.to<=g.newLength?o.main:void 0;if(p.selection.ranges.length>1&&l.inputState.composing>=0&&a.to<=d.to&&a.to>=d.to-10){let O=l.state.sliceDoc(a.from,a.to),S,M=o&&findCompositionNode(l,o.main.head);if(M){let $=a.insert.length-(a.to-a.from);S={from:M.from,to:M.to-$}}else S=l.state.doc.lineAt(d.head);let A=d.to-a.to,F=d.to-d.from;u=p.changeByRange($=>{if($.from==d.from&&$.to==d.to)return{changes:g,range:b||$.map(g)};let B=$.to-A,I=B-O.length;if($.to-$.from!=F||l.state.sliceDoc(I,B)!=O||$.to>=S.from&&$.from<=S.to)return{range:$};let U=p.changes({from:I,to:B,insert:a.insert}),te=$.to-d.to;return{changes:U,range:b?EditorSelection.range(Math.max(0,b.anchor+te),Math.max(0,b.head+te)):$.map(U)}})}else u={changes:g,selection:b&&p.selection.replaceRange(b)}}let f="input.type";return(l.composing||l.inputState.compositionPendingChange&&l.inputState.compositionEndedAt>Date.now()-50)&&(l.inputState.compositionPendingChange=!1,f+=".compose",l.inputState.compositionFirstChange&&(f+=".start",l.inputState.compositionFirstChange=!1)),p.update(u,{userEvent:f,scrollIntoView:!0})}function findDiff(l,a,o,u){let p=Math.min(l.length,a.length),d=0;for(;d<p&&l.charCodeAt(d)==a.charCodeAt(d);)d++;if(d==p&&l.length==a.length)return null;let f=l.length,g=a.length;for(;f>0&&g>0&&l.charCodeAt(f-1)==a.charCodeAt(g-1);)f--,g--;if(u=="end"){let b=Math.max(0,d-Math.min(f,g));o-=f+b-d}if(f<d&&l.length<a.length){let b=o<=d&&o>=f?d-o:0;d-=b,g=d+(g-f),f=d}else if(g<d){let b=o<=d&&o>=g?d-o:0;d-=b,f=d+(f-g),g=d}return{from:d,toA:f,toB:g}}function selectionPoints(l){let a=[];if(l.root.activeElement!=l.contentDOM)return a;let{anchorNode:o,anchorOffset:u,focusNode:p,focusOffset:d}=l.observer.selectionRange;return o&&(a.push(new DOMPoint(o,u)),(p!=o||d!=u)&&a.push(new DOMPoint(p,d))),a}function selectionFromPoints(l,a){if(l.length==0)return null;let o=l[0].pos,u=l.length==2?l[1].pos:o;return o>-1&&u>-1?EditorSelection.single(o+a,u+a):null}class InputState{setSelectionOrigin(a){this.lastSelectionOrigin=a,this.lastSelectionTime=Date.now()}constructor(a){this.view=a,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=a.hasFocus,browser.safari&&a.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(a.contentDOM.ownerDocument)}handleEvent(a){!eventBelongsToEditor(this.view,a)||this.ignoreDuringComposition(a)||a.type=="keydown"&&this.keydown(a)||this.runHandlers(a.type,a)}runHandlers(a,o){let u=this.handlers[a];if(u){for(let p of u.observers)p(this.view,o);for(let p of u.handlers){if(o.defaultPrevented)break;if(p(this.view,o)){o.preventDefault();break}}}}ensureHandlers(a){let o=computeHandlers(a),u=this.handlers,p=this.view.contentDOM;for(let d in o)if(d!="scroll"){let f=!o[d].handlers.length,g=u[d];g&&f!=!g.handlers.length&&(p.removeEventListener(d,this.handleEvent),g=null),g||p.addEventListener(d,this.handleEvent,{passive:f})}for(let d in u)d!="scroll"&&!o[d]&&p.removeEventListener(d,this.handleEvent);this.handlers=o}keydown(a){if(this.lastKeyCode=a.keyCode,this.lastKeyTime=Date.now(),a.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&a.keyCode!=27&&modifierCodes.indexOf(a.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!a.synthetic&&(a.keyCode==13||a.keyCode==8))return this.view.observer.delayAndroidKey(a.key,a.keyCode),!0;let o;return browser.ios&&!a.synthetic&&!a.altKey&&!a.metaKey&&((o=PendingKeys.find(u=>u.keyCode==a.keyCode))&&!a.ctrlKey||EmacsyPendingKeys.indexOf(a.key)>-1&&a.ctrlKey&&!a.shiftKey)?(this.pendingIOSKey=o||a,setTimeout(()=>this.flushIOSKey(),250),!0):(a.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(a){let o=this.pendingIOSKey;return!o||o.key=="Enter"&&a&&a.from<a.to&&/^\S+$/.test(a.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,o.key,o.keyCode,o instanceof KeyboardEvent?o:void 0))}ignoreDuringComposition(a){return/^key/.test(a.type)?this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(a){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=a}update(a){this.view.observer.update(a),this.mouseSelection&&this.mouseSelection.update(a),this.draggedContent&&a.docChanged&&(this.draggedContent=this.draggedContent.map(a.changes)),a.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(l,a){return(o,u)=>{try{return a.call(l,u,o)}catch(p){logException(o.state,p)}}}function computeHandlers(l){let a=Object.create(null);function o(u){return a[u]||(a[u]={observers:[],handlers:[]})}for(let u of l){let p=u.spec;if(p&&p.domEventHandlers)for(let d in p.domEventHandlers){let f=p.domEventHandlers[d];f&&o(d).handlers.push(bindHandler(u.value,f))}if(p&&p.domEventObservers)for(let d in p.domEventObservers){let f=p.domEventObservers[d];f&&o(d).observers.push(bindHandler(u.value,f))}}for(let u in handlers$1)o(u).handlers.push(handlers$1[u]);for(let u in observers)o(u).observers.push(observers[u]);return a}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(l){return Math.max(0,l)*.7+8}function dist$2(l,a){return Math.max(Math.abs(l.clientX-a.clientX),Math.abs(l.clientY-a.clientY))}class MouseSelection{constructor(a,o,u,p){this.view=a,this.startEvent=o,this.style=u,this.mustSelect=p,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=o,this.scrollParents=scrollableParents(a.contentDOM),this.atoms=a.state.facet(atomicRanges).map(f=>f(a));let d=a.contentDOM.ownerDocument;d.addEventListener("mousemove",this.move=this.move.bind(this)),d.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=o.shiftKey,this.multiple=a.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(a,o),this.dragging=isInPrimarySelection(a,o)&&getClickType(o)==1?null:!1}start(a){this.dragging===!1&&this.select(a)}move(a){if(a.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist$2(this.startEvent,a)<10)return;this.select(this.lastEvent=a);let o=0,u=0,p=0,d=0,f=this.view.win.innerWidth,g=this.view.win.innerHeight;this.scrollParents.x&&({left:p,right:f}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:d,bottom:g}=this.scrollParents.y.getBoundingClientRect());let b=getScrollMargins(this.view);a.clientX-b.left<=p+dragScrollMargin?o=-dragScrollSpeed(p-a.clientX):a.clientX+b.right>=f-dragScrollMargin&&(o=dragScrollSpeed(a.clientX-f)),a.clientY-b.top<=d+dragScrollMargin?u=-dragScrollSpeed(d-a.clientY):a.clientY+b.bottom>=g-dragScrollMargin&&(u=dragScrollSpeed(a.clientY-g)),this.setScrollSpeed(o,u)}up(a){this.dragging==null&&this.select(this.lastEvent),this.dragging||a.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let a=this.view.contentDOM.ownerDocument;a.removeEventListener("mousemove",this.move),a.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(a,o){this.scrollSpeed={x:a,y:o},a||o?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:a,y:o}=this.scrollSpeed;a&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=a,a=0),o&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=o,o=0),(a||o)&&this.view.win.scrollBy(a,o),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(a){let o=null;for(let u=0;u<a.ranges.length;u++){let p=a.ranges[u],d=null;if(p.empty){let f=skipAtomicRanges(this.atoms,p.from,0);f!=p.from&&(d=EditorSelection.cursor(f,-1))}else{let f=skipAtomicRanges(this.atoms,p.from,-1),g=skipAtomicRanges(this.atoms,p.to,1);(f!=p.from||g!=p.to)&&(d=EditorSelection.range(p.from==p.anchor?f:g,p.from==p.head?f:g))}d&&(o||(o=a.ranges.slice()),o[u]=d)}return o?EditorSelection.create(o,a.mainIndex):a}select(a){let{view:o}=this,u=this.skipAtoms(this.style.get(a,this.extend,this.multiple));(this.mustSelect||!u.eq(o.state.selection,this.dragging===!1))&&this.view.dispatch({selection:u,userEvent:"select.pointer"}),this.mustSelect=!1}update(a){a.transactions.some(o=>o.isUserEvent("input.type"))?this.destroy():this.style.update(a)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(l,a){let o=l.state.facet(clickAddsSelectionRange);return o.length?o[0](a):browser.mac?a.metaKey:a.ctrlKey}function dragMovesSelection(l,a){let o=l.state.facet(dragMovesSelection$1);return o.length?o[0](a):browser.mac?!a.altKey:!a.ctrlKey}function isInPrimarySelection(l,a){let{main:o}=l.state.selection;if(o.empty)return!1;let u=getSelection(l.root);if(!u||u.rangeCount==0)return!0;let p=u.getRangeAt(0).getClientRects();for(let d=0;d<p.length;d++){let f=p[d];if(f.left<=a.clientX&&f.right>=a.clientX&&f.top<=a.clientY&&f.bottom>=a.clientY)return!0}return!1}function eventBelongsToEditor(l,a){if(!a.bubbles)return!0;if(a.defaultPrevented)return!1;for(let o=a.target,u;o!=l.contentDOM;o=o.parentNode)if(!o||o.nodeType==11||(u=ContentView.get(o))&&u.ignoreEvent(a))return!1;return!0}const handlers$1=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(l){let a=l.dom.parentNode;if(!a)return;let o=a.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout(()=>{l.focus(),o.remove(),doPaste(l,o.value)},50)}function textFilter(l,a,o){for(let u of l.facet(a))o=u(o,l);return o}function doPaste(l,a){a=textFilter(l.state,clipboardInputFilter,a);let{state:o}=l,u,p=1,d=o.toText(a),f=d.lines==o.selection.ranges.length;if(lastLinewiseCopy!=null&&o.selection.ranges.every(b=>b.empty)&&lastLinewiseCopy==d.toString()){let b=-1;u=o.changeByRange(O=>{let S=o.doc.lineAt(O.from);if(S.from==b)return{range:O};b=S.from;let M=o.toText((f?d.line(p++).text:a)+o.lineBreak);return{changes:{from:S.from,insert:M},range:EditorSelection.cursor(O.from+M.length)}})}else f?u=o.changeByRange(b=>{let O=d.line(p++);return{changes:{from:b.from,to:b.to,insert:O.text},range:EditorSelection.cursor(b.from+O.length)}}):u=o.replaceSelection(d);l.dispatch(u,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=l=>{l.inputState.lastScrollTop=l.scrollDOM.scrollTop,l.inputState.lastScrollLeft=l.scrollDOM.scrollLeft},handlers$1.keydown=(l,a)=>(l.inputState.setSelectionOrigin("select"),a.keyCode==27&&l.inputState.tabFocusMode!=0&&(l.inputState.tabFocusMode=Date.now()+2e3),!1),observers.touchstart=(l,a)=>{l.inputState.lastTouchTime=Date.now(),l.inputState.setSelectionOrigin("select.pointer")},observers.touchmove=l=>{l.inputState.setSelectionOrigin("select.pointer")},handlers$1.mousedown=(l,a)=>{if(l.observer.flush(),l.inputState.lastTouchTime>Date.now()-2e3)return!1;let o=null;for(let u of l.state.facet(mouseSelectionStyle))if(o=u(l,a),o)break;if(!o&&a.button==0&&(o=basicMouseSelection(l,a)),o){let u=!l.hasFocus;l.inputState.startMouseSelection(new MouseSelection(l,a,o,u)),u&&l.observer.ignore(()=>{focusPreventScroll(l.contentDOM);let d=l.root.activeElement;d&&!d.contains(l.contentDOM)&&d.blur()});let p=l.inputState.mouseSelection;if(p)return p.start(a),p.dragging===!1}return!1};function rangeForClick(l,a,o,u){if(u==1)return EditorSelection.cursor(a,o);if(u==2)return groupAt(l.state,a,o);{let p=LineView.find(l.docView,a),d=l.state.doc.lineAt(p?p.posAtEnd:a),f=p?p.posAtStart:d.from,g=p?p.posAtEnd:d.to;return g<l.state.doc.length&&g==d.to&&g++,EditorSelection.range(f,g)}}let inside=(l,a,o)=>a>=o.top&&a<=o.bottom&&l>=o.left&&l<=o.right;function findPositionSide(l,a,o,u){let p=LineView.find(l.docView,a);if(!p)return 1;let d=a-p.posAtStart;if(d==0)return 1;if(d==p.length)return-1;let f=p.coordsAt(d,-1);if(f&&inside(o,u,f))return-1;let g=p.coordsAt(d,1);return g&&inside(o,u,g)?1:f&&f.bottom>=u?-1:1}function queryPos(l,a){let o=l.posAtCoords({x:a.clientX,y:a.clientY},!1);return{pos:o,bias:findPositionSide(l,o,a.clientX,a.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(l){if(!BadMouseDetail)return l.detail;let a=lastMouseDown,o=lastMouseDownTime;return lastMouseDown=l,lastMouseDownTime=Date.now(),lastMouseDownCount=!a||o>Date.now()-400&&Math.abs(a.clientX-l.clientX)<2&&Math.abs(a.clientY-l.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(l,a){let o=queryPos(l,a),u=getClickType(a),p=l.state.selection;return{update(d){d.docChanged&&(o.pos=d.changes.mapPos(o.pos),p=p.map(d.changes))},get(d,f,g){let b=queryPos(l,d),O,S=rangeForClick(l,b.pos,b.bias,u);if(o.pos!=b.pos&&!f){let M=rangeForClick(l,o.pos,o.bias,u),A=Math.min(M.from,S.from),F=Math.max(M.to,S.to);S=A<S.from?EditorSelection.range(A,F):EditorSelection.range(F,A)}return f?p.replaceRange(p.main.extend(S.from,S.to)):g&&u==1&&p.ranges.length>1&&(O=removeRangeAround(p,b.pos))?O:g?p.addRange(S):EditorSelection.create([S])}}}function removeRangeAround(l,a){for(let o=0;o<l.ranges.length;o++){let{from:u,to:p}=l.ranges[o];if(u<=a&&p>=a)return EditorSelection.create(l.ranges.slice(0,o).concat(l.ranges.slice(o+1)),l.mainIndex==o?0:l.mainIndex-(l.mainIndex>o?1:0))}return null}handlers$1.dragstart=(l,a)=>{let{selection:{main:o}}=l.state;if(a.target.draggable){let p=l.docView.nearest(a.target);if(p&&p.isWidget){let d=p.posAtStart,f=d+p.length;(d>=o.to||f<=o.from)&&(o=EditorSelection.range(d,f))}}let{inputState:u}=l;return u.mouseSelection&&(u.mouseSelection.dragging=!0),u.draggedContent=o,a.dataTransfer&&(a.dataTransfer.setData("Text",textFilter(l.state,clipboardOutputFilter,l.state.sliceDoc(o.from,o.to))),a.dataTransfer.effectAllowed="copyMove"),!1},handlers$1.dragend=l=>(l.inputState.draggedContent=null,!1);function dropText(l,a,o,u){if(o=textFilter(l.state,clipboardInputFilter,o),!o)return;let p=l.posAtCoords({x:a.clientX,y:a.clientY},!1),{draggedContent:d}=l.inputState,f=u&&d&&dragMovesSelection(l,a)?{from:d.from,to:d.to}:null,g={from:p,insert:o},b=l.state.changes(f?[f,g]:g);l.focus(),l.dispatch({changes:b,selection:{anchor:b.mapPos(p,-1),head:b.mapPos(p,1)},userEvent:f?"move.drop":"input.drop"}),l.inputState.draggedContent=null}handlers$1.drop=(l,a)=>{if(!a.dataTransfer)return!1;if(l.state.readOnly)return!0;let o=a.dataTransfer.files;if(o&&o.length){let u=Array(o.length),p=0,d=()=>{++p==o.length&&dropText(l,a,u.filter(f=>f!=null).join(l.state.lineBreak),!1)};for(let f=0;f<o.length;f++){let g=new FileReader;g.onerror=d,g.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(g.result)||(u[f]=g.result),d()},g.readAsText(o[f])}return!0}else{let u=a.dataTransfer.getData("Text");if(u)return dropText(l,a,u,!0),!0}return!1},handlers$1.paste=(l,a)=>{if(l.state.readOnly)return!0;l.observer.flush();let o=brokenClipboardAPI?null:a.clipboardData;return o?(doPaste(l,o.getData("text/plain")||o.getData("text/uri-list")),!0):(capturePaste(l),!1)};function captureCopy(l,a){let o=l.dom.parentNode;if(!o)return;let u=o.appendChild(document.createElement("textarea"));u.style.cssText="position: fixed; left: -10000px; top: 10px",u.value=a,u.focus(),u.selectionEnd=a.length,u.selectionStart=0,setTimeout(()=>{u.remove(),l.focus()},50)}function copiedRange(l){let a=[],o=[],u=!1;for(let p of l.selection.ranges)p.empty||(a.push(l.sliceDoc(p.from,p.to)),o.push(p));if(!a.length){let p=-1;for(let{from:d}of l.selection.ranges){let f=l.doc.lineAt(d);f.number>p&&(a.push(f.text),o.push({from:f.from,to:Math.min(l.doc.length,f.to+1)})),p=f.number}u=!0}return{text:textFilter(l,clipboardOutputFilter,a.join(l.lineBreak)),ranges:o,linewise:u}}let lastLinewiseCopy=null;handlers$1.copy=handlers$1.cut=(l,a)=>{let{text:o,ranges:u,linewise:p}=copiedRange(l.state);if(!o&&!p)return!1;lastLinewiseCopy=p?o:null,a.type=="cut"&&!l.state.readOnly&&l.dispatch({changes:u,scrollIntoView:!0,userEvent:"delete.cut"});let d=brokenClipboardAPI?null:a.clipboardData;return d?(d.clearData(),d.setData("text/plain",o),!0):(captureCopy(l,o),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(l,a){let o=[];for(let u of l.facet(focusChangeEffect)){let p=u(l,a);p&&o.push(p)}return o?l.update({effects:o,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(l){setTimeout(()=>{let a=l.hasFocus;if(a!=l.inputState.notifiedFocused){let o=focusChangeTransaction(l.state,a);o?l.dispatch(o):l.update([])}},10)}observers.focus=l=>{l.inputState.lastFocusTime=Date.now(),!l.scrollDOM.scrollTop&&(l.inputState.lastScrollTop||l.inputState.lastScrollLeft)&&(l.scrollDOM.scrollTop=l.inputState.lastScrollTop,l.scrollDOM.scrollLeft=l.inputState.lastScrollLeft),updateForFocusChange(l)},observers.blur=l=>{l.observer.clearSelectionRange(),updateForFocusChange(l)},observers.compositionstart=observers.compositionupdate=l=>{l.observer.editContext||(l.inputState.compositionFirstChange==null&&(l.inputState.compositionFirstChange=!0),l.inputState.composing<0&&(l.inputState.composing=0))},observers.compositionend=l=>{l.observer.editContext||(l.inputState.composing=-1,l.inputState.compositionEndedAt=Date.now(),l.inputState.compositionPendingKey=!0,l.inputState.compositionPendingChange=l.observer.pendingRecords().length>0,l.inputState.compositionFirstChange=null,browser.chrome&&browser.android?l.observer.flushSoon():l.inputState.compositionPendingChange?Promise.resolve().then(()=>l.observer.flush()):setTimeout(()=>{l.inputState.composing<0&&l.docView.hasComposition&&l.update([])},50))},observers.contextmenu=l=>{l.inputState.lastContextMenu=Date.now()},handlers$1.beforeinput=(l,a)=>{var o,u;if(a.inputType=="insertReplacementText"&&l.observer.editContext){let d=(o=a.dataTransfer)===null||o===void 0?void 0:o.getData("text/plain"),f=a.getTargetRanges();if(d&&f.length){let g=f[0],b=l.posAtDOM(g.startContainer,g.startOffset),O=l.posAtDOM(g.endContainer,g.endOffset);return applyDOMChangeInner(l,{from:b,to:O,insert:l.state.toText(d)},null),!0}}let p;if(browser.chrome&&browser.android&&(p=PendingKeys.find(d=>d.inputType==a.inputType))&&(l.observer.delayAndroidKey(p.key,p.keyCode),p.key=="Backspace"||p.key=="Delete")){let d=((u=window.visualViewport)===null||u===void 0?void 0:u.height)||0;setTimeout(()=>{var f;(((f=window.visualViewport)===null||f===void 0?void 0:f.height)||0)>d+10&&l.hasFocus&&(l.contentDOM.blur(),l.focus())},100)}return browser.ios&&a.inputType=="deleteContentForward"&&l.observer.flushSoon(),browser.safari&&a.inputType=="insertText"&&l.inputState.composing>=0&&setTimeout(()=>observers.compositionend(l,a),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(l){appliedFirefoxHack.has(l)||(appliedFirefoxHack.add(l),l.addEventListener("copy",()=>{}),l.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(a){this.lineWrapping=a,this.doc=Text$1.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(a,o){let u=this.doc.lineAt(o).number-this.doc.lineAt(a).number+1;return this.lineWrapping&&(u+=Math.max(0,Math.ceil((o-a-u*this.lineLength*.5)/this.lineLength))),this.lineHeight*u}heightForLine(a){return this.lineWrapping?(1+Math.max(0,Math.ceil((a-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(a){return this.doc=a,this}mustRefreshForWrapping(a){return wrappingWhiteSpace.indexOf(a)>-1!=this.lineWrapping}mustRefreshForHeights(a){let o=!1;for(let u=0;u<a.length;u++){let p=a[u];p<0?u++:this.heightSamples[Math.floor(p*10)]||(o=!0,this.heightSamples[Math.floor(p*10)]=!0)}return o}refresh(a,o,u,p,d,f){let g=wrappingWhiteSpace.indexOf(a)>-1,b=Math.round(o)!=Math.round(this.lineHeight)||this.lineWrapping!=g;if(this.lineWrapping=g,this.lineHeight=o,this.charWidth=u,this.textHeight=p,this.lineLength=d,b){this.heightSamples={};for(let O=0;O<f.length;O++){let S=f[O];S<0?O++:this.heightSamples[Math.floor(S*10)]=!0}}return b}}class MeasuredHeights{constructor(a,o){this.from=a,this.heights=o,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(a,o,u,p,d){this.from=a,this.length=o,this.top=u,this.height=p,this._content=d}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(a){let o=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(a._content)?a._content:[a]);return new BlockInfo(this.from,this.length+a.length,this.top,this.height+a.height,o)}}var QueryType$1=function(l){return l[l.ByPos=0]="ByPos",l[l.ByHeight=1]="ByHeight",l[l.ByPosNoHeight=2]="ByPosNoHeight",l}(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(a,o,u=2){this.length=a,this.height=o,this.flags=u}get outdated(){return(this.flags&2)>0}set outdated(a){this.flags=(a?2:0)|this.flags&-3}setHeight(a){this.height!=a&&(Math.abs(this.height-a)>Epsilon&&(heightChangeFlag=!0),this.height=a)}replace(a,o,u){return HeightMap.of(u)}decomposeLeft(a,o){o.push(this)}decomposeRight(a,o){o.push(this)}applyChanges(a,o,u,p){let d=this,f=u.doc;for(let g=p.length-1;g>=0;g--){let{fromA:b,toA:O,fromB:S,toB:M}=p[g],A=d.lineAt(b,QueryType$1.ByPosNoHeight,u.setDoc(o),0,0),F=A.to>=O?A:d.lineAt(O,QueryType$1.ByPosNoHeight,u,0,0);for(M+=F.to-O,O=F.to;g>0&&A.from<=p[g-1].toA;)b=p[g-1].fromA,S=p[g-1].fromB,g--,b<A.from&&(A=d.lineAt(b,QueryType$1.ByPosNoHeight,u,0,0));S+=A.from-b,b=A.from;let $=NodeBuilder.build(u.setDoc(f),a,S,M);d=replace(d,d.replace(b,O,$))}return d.updateHeight(u,0)}static empty(){return new HeightMapText(0,0)}static of(a){if(a.length==1)return a[0];let o=0,u=a.length,p=0,d=0;for(;;)if(o==u)if(p>d*2){let g=a[o-1];g.break?a.splice(--o,1,g.left,null,g.right):a.splice(--o,1,g.left,g.right),u+=1+g.break,p-=g.size}else if(d>p*2){let g=a[u];g.break?a.splice(u,1,g.left,null,g.right):a.splice(u,1,g.left,g.right),u+=2+g.break,d-=g.size}else break;else if(p<d){let g=a[o++];g&&(p+=g.size)}else{let g=a[--u];g&&(d+=g.size)}let f=0;return a[o-1]==null?(f=1,o--):a[o]==null&&(f=1,u++),new HeightMapBranch(HeightMap.of(a.slice(0,o)),f,HeightMap.of(a.slice(u)))}}function replace(l,a){return l==a?l:(l.constructor!=a.constructor&&(heightChangeFlag=!0),a)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(a,o,u){super(a,o),this.deco=u}blockAt(a,o,u,p){return new BlockInfo(p,this.length,u,this.height,this.deco||0)}lineAt(a,o,u,p,d){return this.blockAt(0,u,p,d)}forEachLine(a,o,u,p,d,f){a<=d+this.length&&o>=d&&f(this.blockAt(0,u,p,d))}updateHeight(a,o=0,u=!1,p){return p&&p.from<=o&&p.more&&this.setHeight(p.heights[p.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(a,o){super(a,o,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(a,o,u,p){return new BlockInfo(p,this.length,u,this.height,this.breaks)}replace(a,o,u){let p=u[0];return u.length==1&&(p instanceof HeightMapText||p instanceof HeightMapGap&&p.flags&4)&&Math.abs(this.length-p.length)<10?(p instanceof HeightMapGap?p=new HeightMapText(p.length,this.height):p.height=this.height,this.outdated||(p.outdated=!1),p):HeightMap.of(u)}updateHeight(a,o=0,u=!1,p){return p&&p.from<=o&&p.more?this.setHeight(p.heights[p.index++]):(u||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,a.heightForLine(this.length-this.collapsed))+this.breaks*a.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(a){super(a,0)}heightMetrics(a,o){let u=a.doc.lineAt(o).number,p=a.doc.lineAt(o+this.length).number,d=p-u+1,f,g=0;if(a.lineWrapping){let b=Math.min(this.height,a.lineHeight*d);f=b/d,this.length>d+1&&(g=(this.height-b)/(this.length-d-1))}else f=this.height/d;return{firstLine:u,lastLine:p,perLine:f,perChar:g}}blockAt(a,o,u,p){let{firstLine:d,lastLine:f,perLine:g,perChar:b}=this.heightMetrics(o,p);if(o.lineWrapping){let O=p+(a<o.lineHeight?0:Math.round(Math.max(0,Math.min(1,(a-u)/this.height))*this.length)),S=o.doc.lineAt(O),M=g+S.length*b,A=Math.max(u,a-M/2);return new BlockInfo(S.from,S.length,A,M,0)}else{let O=Math.max(0,Math.min(f-d,Math.floor((a-u)/g))),{from:S,length:M}=o.doc.line(d+O);return new BlockInfo(S,M,u+g*O,g,0)}}lineAt(a,o,u,p,d){if(o==QueryType$1.ByHeight)return this.blockAt(a,u,p,d);if(o==QueryType$1.ByPosNoHeight){let{from:F,to:$}=u.doc.lineAt(a);return new BlockInfo(F,$-F,0,0,0)}let{firstLine:f,perLine:g,perChar:b}=this.heightMetrics(u,d),O=u.doc.lineAt(a),S=g+O.length*b,M=O.number-f,A=p+g*M+b*(O.from-d-M);return new BlockInfo(O.from,O.length,Math.max(p,Math.min(A,p+this.height-S)),S,0)}forEachLine(a,o,u,p,d,f){a=Math.max(a,d),o=Math.min(o,d+this.length);let{firstLine:g,perLine:b,perChar:O}=this.heightMetrics(u,d);for(let S=a,M=p;S<=o;){let A=u.doc.lineAt(S);if(S==a){let $=A.number-g;M+=b*$+O*(a-d-$)}let F=b+O*A.length;f(new BlockInfo(A.from,A.length,M,F,0)),M+=F,S=A.to+1}}replace(a,o,u){let p=this.length-o;if(p>0){let d=u[u.length-1];d instanceof HeightMapGap?u[u.length-1]=new HeightMapGap(d.length+p):u.push(null,new HeightMapGap(p-1))}if(a>0){let d=u[0];d instanceof HeightMapGap?u[0]=new HeightMapGap(a+d.length):u.unshift(new HeightMapGap(a-1),null)}return HeightMap.of(u)}decomposeLeft(a,o){o.push(new HeightMapGap(a-1),null)}decomposeRight(a,o){o.push(null,new HeightMapGap(this.length-a-1))}updateHeight(a,o=0,u=!1,p){let d=o+this.length;if(p&&p.from<=o+this.length&&p.more){let f=[],g=Math.max(o,p.from),b=-1;for(p.from>o&&f.push(new HeightMapGap(p.from-o-1).updateHeight(a,o));g<=d&&p.more;){let S=a.doc.lineAt(g).length;f.length&&f.push(null);let M=p.heights[p.index++];b==-1?b=M:Math.abs(M-b)>=Epsilon&&(b=-2);let A=new HeightMapText(S,M);A.outdated=!1,f.push(A),g+=S+1}g<=d&&f.push(null,new HeightMapGap(d-g).updateHeight(a,g));let O=HeightMap.of(f);return(b<0||Math.abs(O.height-this.height)>=Epsilon||Math.abs(b-this.heightMetrics(a,o).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,O)}else(u||this.outdated)&&(this.setHeight(a.heightForGap(o,o+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(a,o,u){super(a.length+o+u.length,a.height+u.height,o|(a.outdated||u.outdated?2:0)),this.left=a,this.right=u,this.size=a.size+u.size}get break(){return this.flags&1}blockAt(a,o,u,p){let d=u+this.left.height;return a<d?this.left.blockAt(a,o,u,p):this.right.blockAt(a,o,d,p+this.left.length+this.break)}lineAt(a,o,u,p,d){let f=p+this.left.height,g=d+this.left.length+this.break,b=o==QueryType$1.ByHeight?a<f:a<g,O=b?this.left.lineAt(a,o,u,p,d):this.right.lineAt(a,o,u,f,g);if(this.break||(b?O.to<g:O.from>g))return O;let S=o==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return b?O.join(this.right.lineAt(g,S,u,f,g)):this.left.lineAt(g,S,u,p,d).join(O)}forEachLine(a,o,u,p,d,f){let g=p+this.left.height,b=d+this.left.length+this.break;if(this.break)a<b&&this.left.forEachLine(a,o,u,p,d,f),o>=b&&this.right.forEachLine(a,o,u,g,b,f);else{let O=this.lineAt(b,QueryType$1.ByPos,u,p,d);a<O.from&&this.left.forEachLine(a,O.from-1,u,p,d,f),O.to>=a&&O.from<=o&&f(O),o>O.to&&this.right.forEachLine(O.to+1,o,u,g,b,f)}}replace(a,o,u){let p=this.left.length+this.break;if(o<p)return this.balanced(this.left.replace(a,o,u),this.right);if(a>this.left.length)return this.balanced(this.left,this.right.replace(a-p,o-p,u));let d=[];a>0&&this.decomposeLeft(a,d);let f=d.length;for(let g of u)d.push(g);if(a>0&&mergeGaps(d,f-1),o<this.length){let g=d.length;this.decomposeRight(o,d),mergeGaps(d,g)}return HeightMap.of(d)}decomposeLeft(a,o){let u=this.left.length;if(a<=u)return this.left.decomposeLeft(a,o);o.push(this.left),this.break&&(u++,a>=u&&o.push(null)),a>u&&this.right.decomposeLeft(a-u,o)}decomposeRight(a,o){let u=this.left.length,p=u+this.break;if(a>=p)return this.right.decomposeRight(a-p,o);a<u&&this.left.decomposeRight(a,o),this.break&&a<p&&o.push(null),o.push(this.right)}balanced(a,o){return a.size>2*o.size||o.size>2*a.size?HeightMap.of(this.break?[a,null,o]:[a,o]):(this.left=replace(this.left,a),this.right=replace(this.right,o),this.setHeight(a.height+o.height),this.outdated=a.outdated||o.outdated,this.size=a.size+o.size,this.length=a.length+this.break+o.length,this)}updateHeight(a,o=0,u=!1,p){let{left:d,right:f}=this,g=o+d.length+this.break,b=null;return p&&p.from<=o+d.length&&p.more?b=d=d.updateHeight(a,o,u,p):d.updateHeight(a,o,u),p&&p.from<=g+f.length&&p.more?b=f=f.updateHeight(a,g,u,p):f.updateHeight(a,g,u),b?this.balanced(d,f):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(l,a){let o,u;l[a]==null&&(o=l[a-1])instanceof HeightMapGap&&(u=l[a+1])instanceof HeightMapGap&&l.splice(a-1,3,new HeightMapGap(o.length+1+u.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(a,o){this.pos=a,this.oracle=o,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=a}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(a,o){if(this.lineStart>-1){let u=Math.min(o,this.lineEnd),p=this.nodes[this.nodes.length-1];p instanceof HeightMapText?p.length+=u-this.pos:(u>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(u-this.pos,-1)),this.writtenTo=u,o>u&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=o}point(a,o,u){if(a<o||u.heightRelevant){let p=u.widget?u.widget.estimatedHeight:0,d=u.widget?u.widget.lineBreaks:0;p<0&&(p=this.oracle.lineHeight);let f=o-a;u.block?this.addBlock(new HeightMapBlock(f,p,u)):(f||d||p>=relevantWidgetHeight)&&this.addLineDeco(p,d,f)}else o>a&&this.span(a,o);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:a,to:o}=this.oracle.doc.lineAt(this.pos);this.lineStart=a,this.lineEnd=o,this.writtenTo<a&&((this.writtenTo<a-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,a-1)),this.nodes.push(null)),this.pos>a&&this.nodes.push(new HeightMapText(this.pos-a,-1)),this.writtenTo=this.pos}blankContent(a,o){let u=new HeightMapGap(o-a);return this.oracle.doc.lineAt(a).to==o&&(u.flags|=4),u}ensureLine(){this.enterLine();let a=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(a instanceof HeightMapText)return a;let o=new HeightMapText(0,-1);return this.nodes.push(o),o}addBlock(a){this.enterLine();let o=a.deco;o&&o.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(a),this.writtenTo=this.pos=this.pos+a.length,o&&o.endSide>0&&(this.covering=a)}addLineDeco(a,o,u){let p=this.ensureLine();p.length+=u,p.collapsed+=u,p.widgetHeight=Math.max(p.widgetHeight,a),p.breaks+=o,this.writtenTo=this.pos=this.pos+u}finish(a){let o=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(o instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||o==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let u=a;for(let p of this.nodes)p instanceof HeightMapText&&p.updateHeight(this.oracle,u),u+=p?p.length:1;return this.nodes}static build(a,o,u,p){let d=new NodeBuilder(u,a);return RangeSet.spans(o,u,p,d,0),d.finish(u)}}function heightRelevantDecoChanges(l,a,o){let u=new DecorationComparator;return RangeSet.compare(l,a,o,u,0),u.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(a,o,u,p){(a<o||u&&u.heightRelevant||p&&p.heightRelevant)&&addRange(a,o,this.changes,5)}}function visiblePixelRange(l,a){let o=l.getBoundingClientRect(),u=l.ownerDocument,p=u.defaultView||window,d=Math.max(0,o.left),f=Math.min(p.innerWidth,o.right),g=Math.max(0,o.top),b=Math.min(p.innerHeight,o.bottom);for(let O=l.parentNode;O&&O!=u.body;)if(O.nodeType==1){let S=O,M=window.getComputedStyle(S);if((S.scrollHeight>S.clientHeight||S.scrollWidth>S.clientWidth)&&M.overflow!="visible"){let A=S.getBoundingClientRect();d=Math.max(d,A.left),f=Math.min(f,A.right),g=Math.max(g,A.top),b=Math.min(O==l.parentNode?p.innerHeight:b,A.bottom)}O=M.position=="absolute"||M.position=="fixed"?S.offsetParent:S.parentNode}else if(O.nodeType==11)O=O.host;else break;return{left:d-o.left,right:Math.max(d,f)-o.left,top:g-(o.top+a),bottom:Math.max(g,b)-(o.top+a)}}function inWindow(l){let a=l.getBoundingClientRect(),o=l.ownerDocument.defaultView||window;return a.left<o.innerWidth&&a.right>0&&a.top<o.innerHeight&&a.bottom>0}function fullPixelRange(l,a){let o=l.getBoundingClientRect();return{left:0,right:o.right-o.left,top:a,bottom:o.bottom-(o.top+a)}}class LineGap{constructor(a,o,u,p){this.from=a,this.to=o,this.size=u,this.displaySize=p}static same(a,o){if(a.length!=o.length)return!1;for(let u=0;u<a.length;u++){let p=a[u],d=o[u];if(p.from!=d.from||p.to!=d.to||p.size!=d.size)return!1}return!0}draw(a,o){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(o?a.scaleY:a.scaleX),o)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(a,o){super(),this.size=a,this.vertical=o}eq(a){return a.size==this.size&&a.vertical==this.vertical}toDOM(){let a=document.createElement("div");return this.vertical?a.style.height=this.size+"px":(a.style.width=this.size+"px",a.style.height="2px",a.style.display="inline-block"),a}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(a){this.state=a,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let o=a.facet(contentAttributes).some(u=>typeof u!="function"&&u.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(o),this.stateDeco=a.facet(decorations).filter(u=>typeof u!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle.setDoc(a.doc),[new ChangedRange(0,0,0,a.doc.length)]);for(let u=0;u<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());u++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(u=>u.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let a=[this.viewport],{main:o}=this.state.selection;for(let u=0;u<=1;u++){let p=u?o.head:o.anchor;if(!a.some(({from:d,to:f})=>p>=d&&p<=f)){let{from:d,to:f}=this.lineBlockAt(p);a.push(new Viewport(d,f))}}return this.viewports=a.sort((u,p)=>u.from-p.from),this.updateScaler()}updateScaler(){let a=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),a.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,a=>{this.viewportLines.push(scaleBlock(a,this.scaler))})}update(a,o=null){this.state=a.state;let u=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(S=>typeof S!="function");let p=a.changedRanges,d=ChangedRange.extendWithRanges(p,heightRelevantDecoChanges(u,this.stateDeco,a?a.changes:ChangeSet.empty(this.state.doc.length))),f=this.heightMap.height,g=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,a.startState.doc,this.heightOracle.setDoc(this.state.doc),d),(this.heightMap.height!=f||heightChangeFlag)&&(a.flags|=2),g?(this.scrollAnchorPos=a.changes.mapPos(g.from,-1),this.scrollAnchorHeight=g.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let b=d.length?this.mapViewport(this.viewport,a.changes):this.viewport;(o&&(o.range.head<b.from||o.range.head>b.to)||!this.viewportIsAppropriate(b))&&(b=this.getViewport(0,o));let O=b.from!=this.viewport.from||b.to!=this.viewport.to;this.viewport=b,a.flags|=this.updateForViewport(),(O||!a.changes.empty||a.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,a.changes))),a.flags|=this.computeVisibleRanges(a.changes),o&&(this.scrollTarget=o),!this.mustEnforceCursorAssoc&&a.selectionSet&&a.view.lineWrapping&&a.state.selection.main.empty&&a.state.selection.main.assoc&&!a.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(a){let o=a.contentDOM,u=window.getComputedStyle(o),p=this.heightOracle,d=u.whiteSpace;this.defaultTextDirection=u.direction=="rtl"?Direction.RTL:Direction.LTR;let f=this.heightOracle.mustRefreshForWrapping(d),g=o.getBoundingClientRect(),b=f||this.mustMeasureContent||this.contentDOMHeight!=g.height;this.contentDOMHeight=g.height,this.mustMeasureContent=!1;let O=0,S=0;if(g.width&&g.height){let{scaleX:se,scaleY:q}=getScale$1(o,g);(se>.005&&Math.abs(this.scaleX-se)>.005||q>.005&&Math.abs(this.scaleY-q)>.005)&&(this.scaleX=se,this.scaleY=q,O|=16,f=b=!0)}let M=(parseInt(u.paddingTop)||0)*this.scaleY,A=(parseInt(u.paddingBottom)||0)*this.scaleY;(this.paddingTop!=M||this.paddingBottom!=A)&&(this.paddingTop=M,this.paddingBottom=A,O|=18),this.editorWidth!=a.scrollDOM.clientWidth&&(p.lineWrapping&&(b=!0),this.editorWidth=a.scrollDOM.clientWidth,O|=16);let F=a.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=F&&(this.scrollAnchorHeight=-1,this.scrollTop=F),this.scrolledToBottom=isScrolledToBottom(a.scrollDOM);let $=(this.printing?fullPixelRange:visiblePixelRange)(o,this.paddingTop),B=$.top-this.pixelViewport.top,I=$.bottom-this.pixelViewport.bottom;this.pixelViewport=$;let U=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(U!=this.inView&&(this.inView=U,U&&(b=!0)),!this.inView&&!this.scrollTarget&&!inWindow(a.dom))return 0;let te=g.width;if((this.contentDOMWidth!=te||this.editorHeight!=a.scrollDOM.clientHeight)&&(this.contentDOMWidth=g.width,this.editorHeight=a.scrollDOM.clientHeight,O|=16),b){let se=a.docView.measureVisibleLineHeights(this.viewport);if(p.mustRefreshForHeights(se)&&(f=!0),f||p.lineWrapping&&Math.abs(te-this.contentDOMWidth)>p.charWidth){let{lineHeight:q,charWidth:le,textHeight:fe}=a.docView.measureTextSize();f=q>0&&p.refresh(d,q,le,fe,te/le,se),f&&(a.docView.minWidth=0,O|=16)}B>0&&I>0?S=Math.max(B,I):B<0&&I<0&&(S=Math.min(B,I)),clearHeightChangeFlag();for(let q of this.viewports){let le=q.from==this.viewport.from?se:a.docView.measureVisibleLineHeights(q);this.heightMap=(f?HeightMap.empty().applyChanges(this.stateDeco,Text$1.empty,this.heightOracle,[new ChangedRange(0,0,0,a.state.doc.length)]):this.heightMap).updateHeight(p,0,f,new MeasuredHeights(q.from,le))}heightChangeFlag&&(O|=2)}let de=!this.viewportIsAppropriate(this.viewport,S)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return de&&(O&2&&(O|=this.updateScaler()),this.viewport=this.getViewport(S,this.scrollTarget),O|=this.updateForViewport()),(O&2||de)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(f?[]:this.lineGaps,a)),O|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,a.docView.enforceCursorAssoc()),O}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(a,o){let u=.5-Math.max(-.5,Math.min(.5,a/1e3/2)),p=this.heightMap,d=this.heightOracle,{visibleTop:f,visibleBottom:g}=this,b=new Viewport(p.lineAt(f-u*1e3,QueryType$1.ByHeight,d,0,0).from,p.lineAt(g+(1-u)*1e3,QueryType$1.ByHeight,d,0,0).to);if(o){let{head:O}=o.range;if(O<b.from||O>b.to){let S=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),M=p.lineAt(O,QueryType$1.ByPos,d,0,0),A;o.y=="center"?A=(M.top+M.bottom)/2-S/2:o.y=="start"||o.y=="nearest"&&O<b.from?A=M.top:A=M.bottom-S,b=new Viewport(p.lineAt(A-500,QueryType$1.ByHeight,d,0,0).from,p.lineAt(A+S+500,QueryType$1.ByHeight,d,0,0).to)}}return b}mapViewport(a,o){let u=o.mapPos(a.from,-1),p=o.mapPos(a.to,1);return new Viewport(this.heightMap.lineAt(u,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(p,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:a,to:o},u=0){if(!this.inView)return!0;let{top:p}=this.heightMap.lineAt(a,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:d}=this.heightMap.lineAt(o,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:f,visibleBottom:g}=this;return(a==0||p<=f-Math.max(10,Math.min(-u,250)))&&(o==this.state.doc.length||d>=g+Math.max(10,Math.min(u,250)))&&p>f-2e3&&d<g+2e3}mapLineGaps(a,o){if(!a.length||o.empty)return a;let u=[];for(let p of a)o.touchesRange(p.from,p.to)||u.push(new LineGap(o.mapPos(p.from),o.mapPos(p.to),p.size,p.displaySize));return u}ensureLineGaps(a,o){let u=this.heightOracle.lineWrapping,p=u?1e4:2e3,d=p>>1,f=p<<1;if(this.defaultTextDirection!=Direction.LTR&&!u)return[];let g=[],b=(S,M,A,F)=>{if(M-S<d)return;let $=this.state.selection.main,B=[$.from];$.empty||B.push($.to);for(let U of B)if(U>S&&U<M){b(S,U-10,A,F),b(U+10,M,A,F);return}let I=find(a,U=>U.from>=A.from&&U.to<=A.to&&Math.abs(U.from-S)<d&&Math.abs(U.to-M)<d&&!B.some(te=>U.from<te&&U.to>te));if(!I){if(M<A.to&&o&&u&&o.visibleRanges.some(de=>de.from<=M&&de.to>=M)){let de=o.moveToLineBoundary(EditorSelection.cursor(M),!1,!0).head;de>S&&(M=de)}let U=this.gapSize(A,S,M,F),te=u||U<2e6?U:2e6;I=new LineGap(S,M,U,te)}g.push(I)},O=S=>{if(S.length<f||S.type!=BlockType.Text)return;let M=lineStructure(S.from,S.to,this.stateDeco);if(M.total<f)return;let A=this.scrollTarget?this.scrollTarget.range.head:null,F,$;if(u){let B=p/this.heightOracle.lineLength*this.heightOracle.lineHeight,I,U;if(A!=null){let te=findFraction(M,A),de=((this.visibleBottom-this.visibleTop)/2+B)/S.height;I=te-de,U=te+de}else I=(this.visibleTop-S.top-B)/S.height,U=(this.visibleBottom-S.top+B)/S.height;F=findPosition(M,I),$=findPosition(M,U)}else{let B=M.total*this.heightOracle.charWidth,I=p*this.heightOracle.charWidth,U=0;if(B>2e6)for(let le of a)le.from>=S.from&&le.from<S.to&&le.size!=le.displaySize&&le.from*this.heightOracle.charWidth+U<this.pixelViewport.left&&(U=le.size-le.displaySize);let te=this.pixelViewport.left+U,de=this.pixelViewport.right+U,se,q;if(A!=null){let le=findFraction(M,A),fe=((de-te)/2+I)/B;se=le-fe,q=le+fe}else se=(te-I)/B,q=(de+I)/B;F=findPosition(M,se),$=findPosition(M,q)}F>S.from&&b(S.from,F,S,M),$<S.to&&b($,S.to,S,M)};for(let S of this.viewportLines)Array.isArray(S.type)?S.type.forEach(O):O(S);return g}gapSize(a,o,u,p){let d=findFraction(p,u)-findFraction(p,o);return this.heightOracle.lineWrapping?a.height*d:p.total*this.heightOracle.charWidth*d}updateLineGaps(a){LineGap.same(a,this.lineGaps)||(this.lineGaps=a,this.lineGapDeco=Decoration.set(a.map(o=>o.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(a){let o=this.stateDeco;this.lineGaps.length&&(o=o.concat(this.lineGapDeco));let u=[];RangeSet.spans(o,this.viewport.from,this.viewport.to,{span(d,f){u.push({from:d,to:f})},point(){}},20);let p=0;if(u.length!=this.visibleRanges.length)p=12;else for(let d=0;d<u.length&&!(p&8);d++){let f=this.visibleRanges[d],g=u[d];(f.from!=g.from||f.to!=g.to)&&(p|=4,a&&a.mapPos(f.from,-1)==g.from&&a.mapPos(f.to,1)==g.to||(p|=8))}return this.visibleRanges=u,p}lineBlockAt(a){return a>=this.viewport.from&&a<=this.viewport.to&&this.viewportLines.find(o=>o.from<=a&&o.to>=a)||scaleBlock(this.heightMap.lineAt(a,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(a){return a>=this.viewportLines[0].top&&a<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(o=>o.top<=a&&o.bottom>=a)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(a),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(a){let o=this.lineBlockAtHeight(a+8);return o.from>=this.viewport.from||this.viewportLines[0].top-a>200?o:this.viewportLines[0]}elementAtHeight(a){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(a),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(a,o){this.from=a,this.to=o}}function lineStructure(l,a,o){let u=[],p=l,d=0;return RangeSet.spans(o,l,a,{span(){},point(f,g){f>p&&(u.push({from:p,to:f}),d+=f-p),p=g}},20),p<a&&(u.push({from:p,to:a}),d+=a-p),{total:d,ranges:u}}function findPosition({total:l,ranges:a},o){if(o<=0)return a[0].from;if(o>=1)return a[a.length-1].to;let u=Math.floor(l*o);for(let p=0;;p++){let{from:d,to:f}=a[p],g=f-d;if(u<=g)return d+u;u-=g}}function findFraction(l,a){let o=0;for(let{from:u,to:p}of l.ranges){if(a<=p){o+=a-u;break}o+=p-u}return o/l.total}function find(l,a){for(let o of l)if(a(o))return o}const IdScaler={toDOM(l){return l},fromDOM(l){return l},scale:1,eq(l){return l==this}};class BigScaler{constructor(a,o,u){let p=0,d=0,f=0;this.viewports=u.map(({from:g,to:b})=>{let O=o.lineAt(g,QueryType$1.ByPos,a,0,0).top,S=o.lineAt(b,QueryType$1.ByPos,a,0,0).bottom;return p+=S-O,{from:g,to:b,top:O,bottom:S,domTop:0,domBottom:0}}),this.scale=(7e6-p)/(o.height-p);for(let g of this.viewports)g.domTop=f+(g.top-d)*this.scale,f=g.domBottom=g.domTop+(g.bottom-g.top),d=g.bottom}toDOM(a){for(let o=0,u=0,p=0;;o++){let d=o<this.viewports.length?this.viewports[o]:null;if(!d||a<d.top)return p+(a-u)*this.scale;if(a<=d.bottom)return d.domTop+(a-d.top);u=d.bottom,p=d.domBottom}}fromDOM(a){for(let o=0,u=0,p=0;;o++){let d=o<this.viewports.length?this.viewports[o]:null;if(!d||a<d.domTop)return u+(a-p)/this.scale;if(a<=d.domBottom)return d.top+(a-d.domTop);u=d.bottom,p=d.domBottom}}eq(a){return a instanceof BigScaler?this.scale==a.scale&&this.viewports.length==a.viewports.length&&this.viewports.every((o,u)=>o.from==a.viewports[u].from&&o.to==a.viewports[u].to):!1}}function scaleBlock(l,a){if(a.scale==1)return l;let o=a.toDOM(l.top),u=a.toDOM(l.bottom);return new BlockInfo(l.from,l.length,o,u-o,Array.isArray(l._content)?l._content.map(p=>scaleBlock(p,a)):l._content)}const theme$1=Facet.define({combine:l=>l.join(" ")}),darkTheme=Facet.define({combine:l=>l.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(l,a,o){return new StyleModule(a,{finish(u){return/&/.test(u)?u.replace(/&\w*/,p=>{if(p=="&")return l;if(!o||!o[p])throw new RangeError(`Unsupported selector: ${p}`);return o[p]}):l+" "+u}})}const baseTheme$1$2=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(a){this.view=a,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=a.contentDOM,this.observer=new MutationObserver(o=>{for(let u of o)this.queue.push(u);(browser.ie&&browser.ie_version<=11||browser.ios&&a.composing)&&o.some(u=>u.type=="childList"&&u.removedNodes.length||u.type=="characterData"&&u.oldValue.length>u.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&a.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(a),a.state.facet(editable)&&(a.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=o=>{this.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var o;((o=this.view.docView)===null||o===void 0?void 0:o.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(a.scrollDOM)),this.addWindowListeners(this.win=a.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(o=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),o.length>0&&o[o.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(o=>{o.length>0&&o[o.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(a){this.view.inputState.runHandlers("scroll",a),this.intersecting&&this.view.measure()}onScroll(a){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(a)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(a){(a.type=="change"||!a.type)&&!a.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(a){if(this.gapIntersection&&(a.length!=this.gaps.length||this.gaps.some((o,u)=>o!=a[u]))){this.gapIntersection.disconnect();for(let o of a)this.gapIntersection.observe(o);this.gaps=a}}onSelectionChange(a){let o=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:u}=this,p=this.selectionRange;if(u.state.facet(editable)?u.root.activeElement!=this.dom:!hasSelection(this.dom,p))return;let d=p.anchorNode&&u.docView.nearest(p.anchorNode);if(d&&d.ignoreEvent(a)){o||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!u.state.selection.main.empty&&p.focusNode&&isEquivalentPosition(p.focusNode,p.focusOffset,p.anchorNode,p.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:a}=this,o=getSelection(a.root);if(!o)return!1;let u=browser.safari&&a.root.nodeType==11&&a.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,o)||o;if(!u||this.selectionRange.eq(u))return!1;let p=hasSelection(this.dom,u);return p&&!this.selectionChanged&&a.inputState.lastFocusTime>Date.now()-200&&a.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,u)?(this.view.inputState.lastFocusTime=0,a.docView.updateSelection(),!1):(this.selectionRange.setRange(u),p&&(this.selectionChanged=!0),!0)}setSelectionRange(a,o){this.selectionRange.set(a.node,a.offset,o.node,o.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let a=0,o=null;for(let u=this.dom;u;)if(u.nodeType==1)!o&&a<this.scrollTargets.length&&this.scrollTargets[a]==u?a++:o||(o=this.scrollTargets.slice(0,a)),o&&o.push(u),u=u.assignedSlot||u.parentNode;else if(u.nodeType==11)u=u.host;else break;if(a<this.scrollTargets.length&&!o&&(o=this.scrollTargets.slice(0,a)),o){for(let u of this.scrollTargets)u.removeEventListener("scroll",this.onScroll);for(let u of this.scrollTargets=o)u.addEventListener("scroll",this.onScroll)}}ignore(a){if(!this.active)return a();try{return this.stop(),a()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(a,o){var u;if(!this.delayedAndroidKey){let p=()=>{let d=this.delayedAndroidKey;d&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=d.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&d.force&&dispatchKey(this.dom,d.key,d.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(p)}(!this.delayedAndroidKey||a=="Enter")&&(this.delayedAndroidKey={key:a,keyCode:o,force:this.lastChange<Date.now()-50||!!(!((u=this.delayedAndroidKey)===null||u===void 0)&&u.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let a of this.observer.takeRecords())this.queue.push(a);return this.queue}processRecords(){let a=this.pendingRecords();a.length&&(this.queue=[]);let o=-1,u=-1,p=!1;for(let d of a){let f=this.readMutation(d);f&&(f.typeOver&&(p=!0),o==-1?{from:o,to:u}=f:(o=Math.min(f.from,o),u=Math.max(f.to,u)))}return{from:o,to:u,typeOver:p}}readChange(){let{from:a,to:o,typeOver:u}=this.processRecords(),p=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(a<0&&!p)return null;a>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let d=new DOMChange(this.view,a,o,u);return this.view.docView.domChanged={newSel:d.newSel?d.newSel.main:null},d}flush(a=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;a&&this.readSelectionRange();let o=this.readChange();if(!o)return this.view.requestMeasure(),!1;let u=this.view.state,p=applyDOMChange(this.view,o);return this.view.state==u&&(o.domChanged||o.newSel&&!o.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),p}readMutation(a){let o=this.view.docView.nearest(a.target);if(!o||o.ignoreMutation(a))return null;if(o.markDirty(a.type=="attributes"),a.type=="attributes"&&(o.flags|=4),a.type=="childList"){let u=findChild(o,a.previousSibling||a.target.previousSibling,-1),p=findChild(o,a.nextSibling||a.target.nextSibling,1);return{from:u?o.posAfter(u):o.posAtStart,to:p?o.posBefore(p):o.posAtEnd,typeOver:!1}}else return a.type=="characterData"?{from:o.posAtStart,to:o.posAtEnd,typeOver:a.target.nodeValue==a.oldValue}:null}setWindow(a){a!=this.win&&(this.removeWindowListeners(this.win),this.win=a,this.addWindowListeners(this.win))}addWindowListeners(a){a.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):a.addEventListener("beforeprint",this.onPrint),a.addEventListener("scroll",this.onScroll),a.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(a){a.removeEventListener("scroll",this.onScroll),a.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):a.removeEventListener("beforeprint",this.onPrint),a.document.removeEventListener("selectionchange",this.onSelectionChange)}update(a){this.editContext&&(this.editContext.update(a),a.startState.facet(editable)!=a.state.facet(editable)&&(a.view.contentDOM.editContext=a.state.facet(editable)?this.editContext.editContext:null))}destroy(){var a,o,u;this.stop(),(a=this.intersection)===null||a===void 0||a.disconnect(),(o=this.gapIntersection)===null||o===void 0||o.disconnect(),(u=this.resizeScroll)===null||u===void 0||u.disconnect();for(let p of this.scrollTargets)p.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(l,a,o){for(;a;){let u=ContentView.get(a);if(u&&u.parent==l)return u;let p=a.parentNode;a=p!=l.dom?p:o>0?a.nextSibling:a.previousSibling}return null}function buildSelectionRangeFromRange(l,a){let o=a.startContainer,u=a.startOffset,p=a.endContainer,d=a.endOffset,f=l.docView.domAtPos(l.state.selection.main.anchor);return isEquivalentPosition(f.node,f.offset,p,d)&&([o,u,p,d]=[p,d,o,u]),{anchorNode:o,anchorOffset:u,focusNode:p,focusOffset:d}}function safariSelectionRangeHack(l,a){if(a.getComposedRanges){let p=a.getComposedRanges(l.root)[0];if(p)return buildSelectionRangeFromRange(l,p)}let o=null;function u(p){p.preventDefault(),p.stopImmediatePropagation(),o=p.getTargetRanges()[0]}return l.contentDOM.addEventListener("beforeinput",u,!0),l.dom.ownerDocument.execCommand("indent"),l.contentDOM.removeEventListener("beforeinput",u,!0),o?buildSelectionRangeFromRange(l,o):null}class EditContextManager{constructor(a){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(a.state);let o=this.editContext=new window.EditContext({text:a.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,a.state.selection.main.anchor))),selectionEnd:this.toContextPos(a.state.selection.main.head)});this.handlers.textupdate=u=>{let p=a.state.selection.main,{anchor:d,head:f}=p,g=this.toEditorPos(u.updateRangeStart),b=this.toEditorPos(u.updateRangeEnd);a.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:u.updateRangeStart,editorBase:g,drifted:!1});let O={from:g,to:b,insert:Text$1.of(u.text.split(`
`))};if(O.from==this.from&&d<this.from?O.from=d:O.to==this.to&&d>this.to&&(O.to=d),O.from==O.to&&!O.insert.length){let S=EditorSelection.single(this.toEditorPos(u.selectionStart),this.toEditorPos(u.selectionEnd));S.main.eq(p)||a.dispatch({selection:S,userEvent:"select"});return}if((browser.mac||browser.android)&&O.from==f-1&&/^\. ?$/.test(u.text)&&a.contentDOM.getAttribute("autocorrect")=="off"&&(O={from:g,to:b,insert:Text$1.of([u.text.replace("."," ")])}),this.pendingContextChange=O,!a.state.readOnly){let S=this.to-this.from+(O.to-O.from+O.insert.length);applyDOMChangeInner(a,O,EditorSelection.single(this.toEditorPos(u.selectionStart,S),this.toEditorPos(u.selectionEnd,S)))}this.pendingContextChange&&(this.revertPending(a.state),this.setSelection(a.state))},this.handlers.characterboundsupdate=u=>{let p=[],d=null;for(let f=this.toEditorPos(u.rangeStart),g=this.toEditorPos(u.rangeEnd);f<g;f++){let b=a.coordsForChar(f);d=b&&new DOMRect(b.left,b.top,b.right-b.left,b.bottom-b.top)||d||new DOMRect,p.push(d)}o.updateCharacterBounds(u.rangeStart,p)},this.handlers.textformatupdate=u=>{let p=[];for(let d of u.getTextFormats()){let f=d.underlineStyle,g=d.underlineThickness;if(f!="None"&&g!="None"){let b=this.toEditorPos(d.rangeStart),O=this.toEditorPos(d.rangeEnd);if(b<O){let S=`text-decoration: underline ${f=="Dashed"?"dashed ":f=="Squiggle"?"wavy ":""}${g=="Thin"?1:2}px`;p.push(Decoration.mark({attributes:{style:S}}).range(b,O))}}}a.dispatch({effects:setEditContextFormatting.of(Decoration.set(p))})},this.handlers.compositionstart=()=>{a.inputState.composing<0&&(a.inputState.composing=0,a.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(a.inputState.composing=-1,a.inputState.compositionFirstChange=null,this.composing){let{drifted:u}=this.composing;this.composing=null,u&&this.reset(a.state)}};for(let u in this.handlers)o.addEventListener(u,this.handlers[u]);this.measureReq={read:u=>{this.editContext.updateControlBounds(u.contentDOM.getBoundingClientRect());let p=getSelection(u.root);p&&p.rangeCount&&this.editContext.updateSelectionBounds(p.getRangeAt(0).getBoundingClientRect())}}}applyEdits(a){let o=0,u=!1,p=this.pendingContextChange;return a.changes.iterChanges((d,f,g,b,O)=>{if(u)return;let S=O.length-(f-d);if(p&&f>=p.to)if(p.from==d&&p.to==f&&p.insert.eq(O)){p=this.pendingContextChange=null,o+=S,this.to+=S;return}else p=null,this.revertPending(a.state);if(d+=o,f+=o,f<=this.from)this.from+=S,this.to+=S;else if(d<this.to){if(d<this.from||f>this.to||this.to-this.from+O.length>3e4){u=!0;return}this.editContext.updateText(this.toContextPos(d),this.toContextPos(f),O.toString()),this.to+=S}o+=S}),p&&!u&&this.revertPending(a.state),!u}update(a){let o=this.pendingContextChange;this.composing&&(this.composing.drifted||a.transactions.some(u=>!u.isUserEvent("input.type")&&u.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=a.changes.mapPos(this.composing.editorBase)):!this.applyEdits(a)||!this.rangeIsValid(a.state)?(this.pendingContextChange=null,this.reset(a.state)):(a.docChanged||a.selectionSet||o)&&this.setSelection(a.state),(a.geometryChanged||a.docChanged||a.selectionSet)&&a.view.requestMeasure(this.measureReq)}resetRange(a){let{head:o}=a.selection.main;this.from=Math.max(0,o-1e4),this.to=Math.min(a.doc.length,o+1e4)}reset(a){this.resetRange(a),this.editContext.updateText(0,this.editContext.text.length,a.doc.sliceString(this.from,this.to)),this.setSelection(a)}revertPending(a){let o=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(o.from),this.toContextPos(o.from+o.insert.length),a.doc.sliceString(o.from,o.to))}setSelection(a){let{main:o}=a.selection,u=this.toContextPos(Math.max(this.from,Math.min(this.to,o.anchor))),p=this.toContextPos(o.head);(this.editContext.selectionStart!=u||this.editContext.selectionEnd!=p)&&this.editContext.updateSelection(u,p)}rangeIsValid(a){let{head:o}=a.selection.main;return!(this.from>0&&o-this.from<500||this.to<a.doc.length&&this.to-o<500||this.to-this.from>3e4)}toEditorPos(a,o=this.to-this.from){a=Math.min(a,o);let u=this.composing;return u&&u.drifted?u.editorBase+(a-u.contextBase):a+this.from}toContextPos(a){let o=this.composing;return o&&o.drifted?o.contextBase+(a-o.editorBase):a-this.from}destroy(){for(let a in this.handlers)this.editContext.removeEventListener(a,this.handlers[a])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(a={}){var o;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),a.parent&&a.parent.appendChild(this.dom);let{dispatch:u}=a;this.dispatchTransactions=a.dispatchTransactions||u&&(p=>p.forEach(d=>u(d,this)))||(p=>this.update(p)),this.dispatch=this.dispatch.bind(this),this._root=a.root||getRoot(a.parent)||document,this.viewState=new ViewState(a.state||EditorState.create(a)),a.scrollTo&&a.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=a.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(p=>new PluginInstance(p));for(let p of this.plugins)p.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((o=document.fonts)===null||o===void 0)&&o.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...a){let o=a.length==1&&a[0]instanceof Transaction?a:a.length==1&&Array.isArray(a[0])?a[0]:[this.state.update(...a)];this.dispatchTransactions(o,this)}update(a){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let o=!1,u=!1,p,d=this.state;for(let A of a){if(A.startState!=d)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");d=A.state}if(this.destroyed){this.viewState.state=d;return}let f=this.hasFocus,g=0,b=null;a.some(A=>A.annotation(isFocusChange))?(this.inputState.notifiedFocused=f,g=1):f!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=f,b=focusChangeTransaction(d,f),b||(g=1));let O=this.observer.delayedAndroidKey,S=null;if(O?(this.observer.clearDelayedAndroidKey(),S=this.observer.readChange(),(S&&!this.state.doc.eq(d.doc)||!this.state.selection.eq(d.selection))&&(S=null)):this.observer.clear(),d.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(d);p=ViewUpdate.create(this,d,a),p.flags|=g;let M=this.viewState.scrollTarget;try{this.updateState=2;for(let A of a){if(M&&(M=M.map(A.changes)),A.scrollIntoView){let{main:F}=A.state.selection;M=new ScrollTarget(F.empty?F:EditorSelection.cursor(F.head,F.head>F.anchor?-1:1))}for(let F of A.effects)F.is(scrollIntoView$1)&&(M=F.value.clip(this.state))}this.viewState.update(p,M),this.bidiCache=CachedOrder.update(this.bidiCache,p.changes),p.empty||(this.updatePlugins(p),this.inputState.update(p)),o=this.docView.update(p),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),u=this.updateAttrs(),this.showAnnouncements(a),this.docView.updateSelection(o,a.some(A=>A.isUserEvent("select.pointer")))}finally{this.updateState=0}if(p.startState.facet(theme$1)!=p.state.facet(theme$1)&&(this.viewState.mustMeasureContent=!0),(o||u||M||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),o&&this.docViewUpdate(),!p.empty)for(let A of this.state.facet(updateListener))try{A(p)}catch(F){logException(this.state,F,"update listener")}(b||S)&&Promise.resolve().then(()=>{b&&this.state==b.startState&&this.dispatch(b),S&&!applyDOMChange(this,S)&&O.force&&dispatchKey(this.contentDOM,O.key,O.keyCode)})}setState(a){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=a;return}this.updateState=2;let o=this.hasFocus;try{for(let u of this.plugins)u.destroy(this);this.viewState=new ViewState(a),this.plugins=a.facet(viewPlugin).map(u=>new PluginInstance(u)),this.pluginMap.clear();for(let u of this.plugins)u.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}o&&this.focus(),this.requestMeasure()}updatePlugins(a){let o=a.startState.facet(viewPlugin),u=a.state.facet(viewPlugin);if(o!=u){let p=[];for(let d of u){let f=o.indexOf(d);if(f<0)p.push(new PluginInstance(d));else{let g=this.plugins[f];g.mustUpdate=a,p.push(g)}}for(let d of this.plugins)d.mustUpdate!=a&&d.destroy(this);this.plugins=p,this.pluginMap.clear()}else for(let p of this.plugins)p.mustUpdate=a;for(let p=0;p<this.plugins.length;p++)this.plugins[p].update(this);o!=u&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let a of this.plugins){let o=a.value;if(o&&o.docViewUpdate)try{o.docViewUpdate(this)}catch(u){logException(this.state,u,"doc view update listener")}}}measure(a=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,a&&this.observer.forceFlush();let o=null,u=this.scrollDOM,p=u.scrollTop*this.scaleY,{scrollAnchorPos:d,scrollAnchorHeight:f}=this.viewState;Math.abs(p-this.viewState.scrollTop)>1&&(f=-1),this.viewState.scrollAnchorHeight=-1;try{for(let g=0;;g++){if(f<0)if(isScrolledToBottom(u))d=-1,f=this.viewState.heightMap.height;else{let F=this.viewState.scrollAnchorAt(p);d=F.from,f=F.top}this.updateState=1;let b=this.viewState.measure(this);if(!b&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(g>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let O=[];b&4||([this.measureRequests,O]=[O,this.measureRequests]);let S=O.map(F=>{try{return F.read(this)}catch($){return logException(this.state,$),BadMeasure}}),M=ViewUpdate.create(this,this.state,[]),A=!1;M.flags|=b,o?o.flags|=b:o=M,this.updateState=2,M.empty||(this.updatePlugins(M),this.inputState.update(M),this.updateAttrs(),A=this.docView.update(M),A&&this.docViewUpdate());for(let F=0;F<O.length;F++)if(S[F]!=BadMeasure)try{let $=O[F];$.write&&$.write(S[F],this)}catch($){logException(this.state,$)}if(A&&this.docView.updateSelection(!0),!M.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,f=-1;continue}else{let $=(d<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(d).top)-f;if($>1||$<-1){p=p+$,u.scrollTop=p/this.scaleY,f=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(o&&!o.empty)for(let g of this.state.facet(updateListener))g(o)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme$1)}updateAttrs(){let a=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),o={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(o["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,o);let u=this.observer.ignore(()=>{let p=updateAttrs(this.contentDOM,this.contentAttrs,o),d=updateAttrs(this.dom,this.editorAttrs,a);return p||d});return this.editorAttrs=a,this.contentAttrs=o,u}showAnnouncements(a){let o=!0;for(let u of a)for(let p of u.effects)if(p.is(EditorView.announce)){o&&(this.announceDOM.textContent=""),o=!1;let d=this.announceDOM.appendChild(document.createElement("div"));d.textContent=p.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let a=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$2).reverse(),a?{nonce:a}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(a){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),a){if(this.measureRequests.indexOf(a)>-1)return;if(a.key!=null){for(let o=0;o<this.measureRequests.length;o++)if(this.measureRequests[o].key===a.key){this.measureRequests[o]=a;return}}this.measureRequests.push(a)}}plugin(a){let o=this.pluginMap.get(a);return(o===void 0||o&&o.spec!=a)&&this.pluginMap.set(a,o=this.plugins.find(u=>u.spec==a)||null),o&&o.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(a){return this.readMeasured(),this.viewState.elementAtHeight(a)}lineBlockAtHeight(a){return this.readMeasured(),this.viewState.lineBlockAtHeight(a)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(a){return this.viewState.lineBlockAt(a)}get contentHeight(){return this.viewState.contentHeight}moveByChar(a,o,u){return skipAtoms(this,a,moveByChar(this,a,o,u))}moveByGroup(a,o){return skipAtoms(this,a,moveByChar(this,a,o,u=>byGroup(this,a.head,u)))}visualLineSide(a,o){let u=this.bidiSpans(a),p=this.textDirectionAt(a.from),d=u[o?u.length-1:0];return EditorSelection.cursor(d.side(o,p)+a.from,d.forward(!o,p)?1:-1)}moveToLineBoundary(a,o,u=!0){return moveToLineBoundary(this,a,o,u)}moveVertically(a,o,u){return skipAtoms(this,a,moveVertically(this,a,o,u))}domAtPos(a){return this.docView.domAtPos(a)}posAtDOM(a,o=0){return this.docView.posFromDOM(a,o)}posAtCoords(a,o=!0){return this.readMeasured(),posAtCoords(this,a,o)}coordsAtPos(a,o=1){this.readMeasured();let u=this.docView.coordsAt(a,o);if(!u||u.left==u.right)return u;let p=this.state.doc.lineAt(a),d=this.bidiSpans(p),f=d[BidiSpan.find(d,a-p.from,-1,o)];return flattenRect(u,f.dir==Direction.LTR==o>0)}coordsForChar(a){return this.readMeasured(),this.docView.coordsForChar(a)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(a){return!this.state.facet(perLineTextDirection)||a<this.viewport.from||a>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(a))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(a){if(a.length>MaxBidiLine)return trivialOrder(a.length);let o=this.textDirectionAt(a.from),u;for(let d of this.bidiCache)if(d.from==a.from&&d.dir==o&&(d.fresh||isolatesEq(d.isolates,u=getIsolatedRanges(this,a))))return d.order;u||(u=getIsolatedRanges(this,a));let p=computeOrder(a.text,o,u);return this.bidiCache.push(new CachedOrder(a.from,a.to,o,u,!0,p)),p}get hasFocus(){var a;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((a=this.inputState)===null||a===void 0?void 0:a.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(a){this._root!=a&&(this._root=a,this.observer.setWindow((a.nodeType==9?a:a.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let a of this.plugins)a.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(a,o={}){return scrollIntoView$1.of(new ScrollTarget(typeof a=="number"?EditorSelection.cursor(a):a,o.y,o.x,o.yMargin,o.xMargin))}scrollSnapshot(){let{scrollTop:a,scrollLeft:o}=this.scrollDOM,u=this.viewState.scrollAnchorAt(a);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(u.from),"start","start",u.top-a,o,!0))}setTabFocusMode(a){a==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof a=="boolean"?this.inputState.tabFocusMode=a?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+a)}static domEventHandlers(a){return ViewPlugin.define(()=>({}),{eventHandlers:a})}static domEventObservers(a){return ViewPlugin.define(()=>({}),{eventObservers:a})}static theme(a,o){let u=StyleModule.newName(),p=[theme$1.of(u),styleModule.of(buildTheme(`.${u}`,a))];return o&&o.dark&&p.push(darkTheme.of(!0)),p}static baseTheme(a){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,a,lightDarkIDs)))}static findFromDOM(a){var o;let u=a.querySelector(".cm-content"),p=u&&ContentView.get(u)||ContentView.get(a);return((o=p?.rootView)===null||o===void 0?void 0:o.view)||null}}EditorView.styleModule=styleModule,EditorView.inputHandler=inputHandler$1,EditorView.clipboardInputFilter=clipboardInputFilter,EditorView.clipboardOutputFilter=clipboardOutputFilter,EditorView.scrollHandler=scrollHandler,EditorView.focusChangeEffect=focusChangeEffect,EditorView.perLineTextDirection=perLineTextDirection,EditorView.exceptionSink=exceptionSink,EditorView.updateListener=updateListener,EditorView.editable=editable,EditorView.mouseSelectionStyle=mouseSelectionStyle,EditorView.dragMovesSelection=dragMovesSelection$1,EditorView.clickAddsSelectionRange=clickAddsSelectionRange,EditorView.decorations=decorations,EditorView.outerDecorations=outerDecorations,EditorView.atomicRanges=atomicRanges,EditorView.bidiIsolatedRanges=bidiIsolatedRanges,EditorView.scrollMargins=scrollMargins,EditorView.darkTheme=darkTheme,EditorView.cspNonce=Facet.define({combine:l=>l.length?l[0]:""}),EditorView.contentAttributes=contentAttributes,EditorView.editorAttributes=editorAttributes,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(a,o,u,p,d,f){this.from=a,this.to=o,this.dir=u,this.isolates=p,this.fresh=d,this.order=f}static update(a,o){if(o.empty&&!a.some(d=>d.fresh))return a;let u=[],p=a.length?a[a.length-1].dir:Direction.LTR;for(let d=Math.max(0,a.length-10);d<a.length;d++){let f=a[d];f.dir==p&&!o.touchesRange(f.from,f.to)&&u.push(new CachedOrder(o.mapPos(f.from,1),o.mapPos(f.to,-1),f.dir,f.isolates,!1,f.order))}return u}}function attrsFromFacet(l,a,o){for(let u=l.state.facet(a),p=u.length-1;p>=0;p--){let d=u[p],f=typeof d=="function"?d(l):d;f&&combineAttrs(f,o)}return o}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(l,a){const o=l.split(/-(?!$)/);let u=o[o.length-1];u=="Space"&&(u=" ");let p,d,f,g;for(let b=0;b<o.length-1;++b){const O=o[b];if(/^(cmd|meta|m)$/i.test(O))g=!0;else if(/^a(lt)?$/i.test(O))p=!0;else if(/^(c|ctrl|control)$/i.test(O))d=!0;else if(/^s(hift)?$/i.test(O))f=!0;else if(/^mod$/i.test(O))a=="mac"?g=!0:d=!0;else throw new Error("Unrecognized modifier name: "+O)}return p&&(u="Alt-"+u),d&&(u="Ctrl-"+u),g&&(u="Meta-"+u),f&&(u="Shift-"+u),u}function modifiers(l,a,o){return a.altKey&&(l="Alt-"+l),a.ctrlKey&&(l="Ctrl-"+l),a.metaKey&&(l="Meta-"+l),o!==!1&&a.shiftKey&&(l="Shift-"+l),l}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(l,a){return runHandlers(getKeymap(a.state),l,a,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(l){let a=l.facet(keymap),o=Keymaps.get(a);return o||Keymaps.set(a,o=buildKeymap(a.reduce((u,p)=>u.concat(p),[]))),o}function runScopeHandlers(l,a,o){return runHandlers(getKeymap(l.state),a,l,o)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(l,a=currentPlatform){let o=Object.create(null),u=Object.create(null),p=(f,g)=>{let b=u[f];if(b==null)u[f]=g;else if(b!=g)throw new Error("Key binding "+f+" is used both as a regular binding and as a multi-stroke prefix")},d=(f,g,b,O,S)=>{var M,A;let F=o[f]||(o[f]=Object.create(null)),$=g.split(/ (?!$)/).map(U=>normalizeKeyName(U,a));for(let U=1;U<$.length;U++){let te=$.slice(0,U).join(" ");p(te,!0),F[te]||(F[te]={preventDefault:!0,stopPropagation:!1,run:[de=>{let se=storedPrefix={view:de,prefix:te,scope:f};return setTimeout(()=>{storedPrefix==se&&(storedPrefix=null)},PrefixTimeout),!0}]})}let B=$.join(" ");p(B,!1);let I=F[B]||(F[B]={preventDefault:!1,stopPropagation:!1,run:((A=(M=F._any)===null||M===void 0?void 0:M.run)===null||A===void 0?void 0:A.slice())||[]});b&&I.run.push(b),O&&(I.preventDefault=!0),S&&(I.stopPropagation=!0)};for(let f of l){let g=f.scope?f.scope.split(" "):["editor"];if(f.any)for(let O of g){let S=o[O]||(o[O]=Object.create(null));S._any||(S._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:M}=f;for(let A in S)S[A].run.push(F=>M(F,currentKeyEvent))}let b=f[a]||f.key;if(b)for(let O of g)d(O,b,f.run,f.preventDefault,f.stopPropagation),f.shift&&d(O,"Shift-"+b,f.shift,f.preventDefault,f.stopPropagation)}return o}let currentKeyEvent=null;function runHandlers(l,a,o,u){currentKeyEvent=a;let p=keyName(a),d=codePointAt(p,0),f=codePointSize(d)==p.length&&p!=" ",g="",b=!1,O=!1,S=!1;storedPrefix&&storedPrefix.view==o&&storedPrefix.scope==u&&(g=storedPrefix.prefix+" ",modifierCodes.indexOf(a.keyCode)<0&&(O=!0,storedPrefix=null));let M=new Set,A=I=>{if(I){for(let U of I.run)if(!M.has(U)&&(M.add(U),U(o)))return I.stopPropagation&&(S=!0),!0;I.preventDefault&&(I.stopPropagation&&(S=!0),O=!0)}return!1},F=l[u],$,B;return F&&(A(F[g+modifiers(p,a,!f)])?b=!0:f&&(a.altKey||a.metaKey||a.ctrlKey)&&!(browser.windows&&a.ctrlKey&&a.altKey)&&($=base[a.keyCode])&&$!=p?(A(F[g+modifiers($,a,!0)])||a.shiftKey&&(B=shift[a.keyCode])!=p&&B!=$&&A(F[g+modifiers(B,a,!1)]))&&(b=!0):f&&a.shiftKey&&A(F[g+modifiers(p,a,!0)])&&(b=!0),!b&&A(F._any)&&(b=!0)),O&&(b=!0),b&&S&&a.stopPropagation(),currentKeyEvent=null,b}class RectangleMarker{constructor(a,o,u,p,d){this.className=a,this.left=o,this.top=u,this.width=p,this.height=d}draw(){let a=document.createElement("div");return a.className=this.className,this.adjust(a),a}update(a,o){return o.className!=this.className?!1:(this.adjust(a),!0)}adjust(a){a.style.left=this.left+"px",a.style.top=this.top+"px",this.width!=null&&(a.style.width=this.width+"px"),a.style.height=this.height+"px"}eq(a){return this.left==a.left&&this.top==a.top&&this.width==a.width&&this.height==a.height&&this.className==a.className}static forRange(a,o,u){if(u.empty){let p=a.coordsAtPos(u.head,u.assoc||1);if(!p)return[];let d=getBase$2(a);return[new RectangleMarker(o,p.left-d.left,p.top-d.top,null,p.bottom-p.top)]}else return rectanglesForRange(a,o,u)}}function getBase$2(l){let a=l.scrollDOM.getBoundingClientRect();return{left:(l.textDirection==Direction.LTR?a.left:a.right-l.scrollDOM.clientWidth*l.scaleX)-l.scrollDOM.scrollLeft*l.scaleX,top:a.top-l.scrollDOM.scrollTop*l.scaleY}}function wrappedLine(l,a,o,u){let p=l.coordsAtPos(a,o*2);if(!p)return u;let d=l.dom.getBoundingClientRect(),f=(p.top+p.bottom)/2,g=l.posAtCoords({x:d.left+1,y:f}),b=l.posAtCoords({x:d.right-1,y:f});return g==null||b==null?u:{from:Math.max(u.from,Math.min(g,b)),to:Math.min(u.to,Math.max(g,b))}}function rectanglesForRange(l,a,o){if(o.to<=l.viewport.from||o.from>=l.viewport.to)return[];let u=Math.max(o.from,l.viewport.from),p=Math.min(o.to,l.viewport.to),d=l.textDirection==Direction.LTR,f=l.contentDOM,g=f.getBoundingClientRect(),b=getBase$2(l),O=f.querySelector(".cm-line"),S=O&&window.getComputedStyle(O),M=g.left+(S?parseInt(S.paddingLeft)+Math.min(0,parseInt(S.textIndent)):0),A=g.right-(S?parseInt(S.paddingRight):0),F=blockAt(l,u),$=blockAt(l,p),B=F.type==BlockType.Text?F:null,I=$.type==BlockType.Text?$:null;if(B&&(l.lineWrapping||F.widgetLineBreaks)&&(B=wrappedLine(l,u,1,B)),I&&(l.lineWrapping||$.widgetLineBreaks)&&(I=wrappedLine(l,p,-1,I)),B&&I&&B.from==I.from&&B.to==I.to)return te(de(o.from,o.to,B));{let q=B?de(o.from,null,B):se(F,!1),le=I?de(null,o.to,I):se($,!0),fe=[];return(B||F).to<(I||$).from-(B&&I?1:0)||F.widgetLineBreaks>1&&q.bottom+l.defaultLineHeight/2<le.top?fe.push(U(M,q.bottom,A,le.top)):q.bottom<le.top&&l.elementAtHeight((q.bottom+le.top)/2).type==BlockType.Text&&(q.bottom=le.top=(q.bottom+le.top)/2),te(q).concat(fe).concat(te(le))}function U(q,le,fe,_e){return new RectangleMarker(a,q-b.left,le-b.top,fe-q,_e-le)}function te({top:q,bottom:le,horizontal:fe}){let _e=[];for(let Pe=0;Pe<fe.length;Pe+=2)_e.push(U(fe[Pe],q,fe[Pe+1],le));return _e}function de(q,le,fe){let _e=1e9,Pe=-1e9,Oe=[];function Fe(Ge,Be,Ze,Ve,Ee){let He=l.coordsAtPos(Ge,Ge==fe.to?-2:2),nt=l.coordsAtPos(Ze,Ze==fe.from?2:-2);!He||!nt||(_e=Math.min(He.top,nt.top,_e),Pe=Math.max(He.bottom,nt.bottom,Pe),Ee==Direction.LTR?Oe.push(d&&Be?M:He.left,d&&Ve?A:nt.right):Oe.push(!d&&Ve?M:nt.left,!d&&Be?A:He.right))}let we=q??fe.from,ke=le??fe.to;for(let Ge of l.visibleRanges)if(Ge.to>we&&Ge.from<ke)for(let Be=Math.max(Ge.from,we),Ze=Math.min(Ge.to,ke);;){let Ve=l.state.doc.lineAt(Be);for(let Ee of l.bidiSpans(Ve)){let He=Ee.from+Ve.from,nt=Ee.to+Ve.from;if(He>=Ze)break;nt>Be&&Fe(Math.max(He,Be),q==null&&He<=we,Math.min(nt,Ze),le==null&&nt>=ke,Ee.dir)}if(Be=Ve.to+1,Be>=Ze)break}return Oe.length==0&&Fe(we,q==null,ke,le==null,l.textDirection),{top:_e,bottom:Pe,horizontal:Oe}}function se(q,le){let fe=g.top+(le?q.top:q.bottom);return{top:fe,bottom:fe,horizontal:[]}}}function sameMarker(l,a){return l.constructor==a.constructor&&l.eq(a)}class LayerView{constructor(a,o){this.view=a,this.layer=o,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=a.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),o.above&&this.dom.classList.add("cm-layer-above"),o.class&&this.dom.classList.add(o.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(a.state),a.requestMeasure(this.measureReq),o.mount&&o.mount(this.dom,a)}update(a){a.startState.facet(layerOrder)!=a.state.facet(layerOrder)&&this.setOrder(a.state),(this.layer.update(a,this.dom)||a.geometryChanged)&&(this.scale(),a.view.requestMeasure(this.measureReq))}docViewUpdate(a){this.layer.updateOnDocViewUpdate!==!1&&a.requestMeasure(this.measureReq)}setOrder(a){let o=0,u=a.facet(layerOrder);for(;o<u.length&&u[o]!=this.layer;)o++;this.dom.style.zIndex=String((this.layer.above?150:-1)-o)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:a,scaleY:o}=this.view;(a!=this.scaleX||o!=this.scaleY)&&(this.scaleX=a,this.scaleY=o,this.dom.style.transform=`scale(${1/a}, ${1/o})`)}draw(a){if(a.length!=this.drawn.length||a.some((o,u)=>!sameMarker(o,this.drawn[u]))){let o=this.dom.firstChild,u=0;for(let p of a)p.update&&o&&p.constructor&&this.drawn[u].constructor&&p.update(o,this.drawn[u])?(o=o.nextSibling,u++):this.dom.insertBefore(p.draw(),o);for(;o;){let p=o.nextSibling;o.remove(),o=p}this.drawn=a}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(l){return[ViewPlugin.define(a=>new LayerView(a,l)),layerOrder.of(l)]}const CanHidePrimary=!(browser.ios&&browser.webkit&&browser.webkit_version<534),selectionConfig=Facet.define({combine(l){return combineConfig(l,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(a,o)=>Math.min(a,o),drawRangeCursor:(a,o)=>a||o})}});function drawSelection(l={}){return[selectionConfig.of(l),cursorLayer,selectionLayer,hideNativeSelection$2,nativeSelectionHidden.of(!0)]}function getDrawSelectionConfig$2(l){return l.facet(selectionConfig)}function configChanged$2(l){return l.startState.facet(selectionConfig)!=l.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(l){let{state:a}=l,o=a.facet(selectionConfig),u=[];for(let p of a.selection.ranges){let d=p==a.selection.main;if(p.empty?!d||CanHidePrimary:o.drawRangeCursor){let f=d?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",g=p.empty?p:EditorSelection.cursor(p.head,p.head>p.anchor?-1:1);for(let b of RectangleMarker.forRange(l,f,g))u.push(b)}}return u},update(l,a){l.transactions.some(u=>u.selection)&&(a.style.animationName=a.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let o=configChanged$2(l);return o&&setBlinkRate(l.state,a),l.docChanged||l.selectionSet||o},mount(l,a){setBlinkRate(a.state,l)},class:"cm-cursorLayer"});function setBlinkRate(l,a){a.style.animationDuration=l.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(l){return l.state.selection.ranges.map(a=>a.empty?[]:RectangleMarker.forRange(l,"cm-selectionBackground",a)).reduce((a,o)=>a.concat(o))},update(l,a){return l.docChanged||l.selectionSet||l.viewportChanged||configChanged$2(l)},class:"cm-selectionLayer"}),themeSpec$2={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};CanHidePrimary&&(themeSpec$2[".cm-line"].caretColor=themeSpec$2[".cm-content"].caretColor="transparent !important");const hideNativeSelection$2=Prec.highest(EditorView.theme(themeSpec$2)),setDropCursorPos=StateEffect.define({map(l,a){return l==null?null:a.mapPos(l)}}),dropCursorPos=StateField.define({create(){return null},update(l,a){return l!=null&&(l=a.changes.mapPos(l)),a.effects.reduce((o,u)=>u.is(setDropCursorPos)?u.value:o,l)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(l){this.view=l,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(l){var a;let o=l.state.field(dropCursorPos);o==null?this.cursor!=null&&((a=this.cursor)===null||a===void 0||a.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(l.startState.field(dropCursorPos)!=o||l.docChanged||l.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:l}=this,a=l.state.field(dropCursorPos),o=a!=null&&l.coordsAtPos(a);if(!o)return null;let u=l.scrollDOM.getBoundingClientRect();return{left:o.left-u.left+l.scrollDOM.scrollLeft*l.scaleX,top:o.top-u.top+l.scrollDOM.scrollTop*l.scaleY,height:o.bottom-o.top}}drawCursor(l){if(this.cursor){let{scaleX:a,scaleY:o}=this.view;l?(this.cursor.style.left=l.left/a+"px",this.cursor.style.top=l.top/o+"px",this.cursor.style.height=l.height/o+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(l){this.view.state.field(dropCursorPos)!=l&&this.view.dispatch({effects:setDropCursorPos.of(l)})}},{eventObservers:{dragover(l){this.setDropPos(this.view.posAtCoords({x:l.clientX,y:l.clientY}))},dragleave(l){(l.target==this.view.contentDOM||!this.view.contentDOM.contains(l.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(l,a,o,u,p){a.lastIndex=0;for(let d=l.iterRange(o,u),f=o,g;!d.next().done;f+=d.value.length)if(!d.lineBreak)for(;g=a.exec(d.value);)p(f+g.index,g)}function matchRanges(l,a){let o=l.visibleRanges;if(o.length==1&&o[0].from==l.viewport.from&&o[0].to==l.viewport.to)return o;let u=[];for(let{from:p,to:d}of o)p=Math.max(l.state.doc.lineAt(p).from,p-a),d=Math.min(l.state.doc.lineAt(d).to,d+a),u.length&&u[u.length-1].to>=p?u[u.length-1].to=d:u.push({from:p,to:d});return u}class MatchDecorator{constructor(a){const{regexp:o,decoration:u,decorate:p,boundary:d,maxLength:f=1e3}=a;if(!o.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=o,p)this.addMatch=(g,b,O,S)=>p(S,O,O+g[0].length,g,b);else if(typeof u=="function")this.addMatch=(g,b,O,S)=>{let M=u(g,b,O);M&&S(O,O+g[0].length,M)};else if(u)this.addMatch=(g,b,O,S)=>S(O,O+g[0].length,u);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=d,this.maxLength=f}createDeco(a){let o=new RangeSetBuilder,u=o.add.bind(o);for(let{from:p,to:d}of matchRanges(a,this.maxLength))iterMatches(a.state.doc,this.regexp,p,d,(f,g)=>this.addMatch(g,a,f,u));return o.finish()}updateDeco(a,o){let u=1e9,p=-1;return a.docChanged&&a.changes.iterChanges((d,f,g,b)=>{b>=a.view.viewport.from&&g<=a.view.viewport.to&&(u=Math.min(g,u),p=Math.max(b,p))}),a.viewportMoved||p-u>1e3?this.createDeco(a.view):p>-1?this.updateRange(a.view,o.map(a.changes),u,p):o}updateRange(a,o,u,p){for(let d of a.visibleRanges){let f=Math.max(d.from,u),g=Math.min(d.to,p);if(g>f){let b=a.state.doc.lineAt(f),O=b.to<g?a.state.doc.lineAt(g):b,S=Math.max(d.from,b.from),M=Math.min(d.to,O.to);if(this.boundary){for(;f>b.from;f--)if(this.boundary.test(b.text[f-1-b.from])){S=f;break}for(;g<O.to;g++)if(this.boundary.test(O.text[g-O.from])){M=g;break}}let A=[],F,$=(B,I,U)=>A.push(U.range(B,I));if(b==O)for(this.regexp.lastIndex=S-b.from;(F=this.regexp.exec(b.text))&&F.index<M-b.from;)this.addMatch(F,a,F.index+b.from,$);else iterMatches(a.state.doc,this.regexp,S,M,(B,I)=>this.addMatch(I,a,B,$));o=o.update({filterFrom:S,filterTo:M,filter:(B,I)=>B<S||I>M,add:A})}}return o}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var l;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let a=document.body.style;_supportsTabSize=((l=a.tabSize)!==null&&l!==void 0?l:a.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(l){let a=combineConfig(l,{render:null,specialChars:Specials,addSpecialChars:null});return(a.replaceTabs=!supportsTabSize())&&(a.specialChars=new RegExp("	|"+a.specialChars.source,UnicodeRegexpSupport)),a.addSpecialChars&&(a.specialChars=new RegExp(a.specialChars.source+"|"+a.addSpecialChars.source,UnicodeRegexpSupport)),a}});function highlightSpecialChars(l={}){return[specialCharConfig.of(l),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(l){this.view=l,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(l.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(l)}makeDecorator(l){return new MatchDecorator({regexp:l.specialChars,decoration:(a,o,u)=>{let{doc:p}=o.state,d=codePointAt(a[0],0);if(d==9){let f=p.lineAt(u),g=o.state.tabSize,b=countColumn(f.text,g,u-f.from);return Decoration.replace({widget:new TabWidget((g-b%g)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[d]||(this.decorationCache[d]=Decoration.replace({widget:new SpecialCharWidget(l,d)}))},boundary:l.replaceTabs?void 0:/[^]/})}update(l){let a=l.state.facet(specialCharConfig);l.startState.facet(specialCharConfig)!=a?(this.decorator=this.makeDecorator(a),this.decorations=this.decorator.createDeco(l.view)):this.decorations=this.decorator.updateDeco(l,this.decorations)}},{decorations:l=>l.decorations}))}const DefaultPlaceholder="•";function placeholder$1(l){return l>=32?DefaultPlaceholder:l==10?"␤":String.fromCharCode(9216+l)}class SpecialCharWidget extends WidgetType{constructor(a,o){super(),this.options=a,this.code=o}eq(a){return a.code==this.code}toDOM(a){let o=placeholder$1(this.code),u=a.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),p=this.options.render&&this.options.render(this.code,u,o);if(p)return p;let d=document.createElement("span");return d.textContent=o,d.title=u,d.setAttribute("aria-label",u),d.className="cm-specialChar",d}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(a){super(),this.width=a}eq(a){return a.width==this.width}toDOM(){let a=document.createElement("span");return a.textContent="	",a.className="cm-tab",a.style.width=this.width+"px",a}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(l){this.decorations=this.getDeco(l)}update(l){(l.docChanged||l.selectionSet)&&(this.decorations=this.getDeco(l.view))}getDeco(l){let a=-1,o=[];for(let u of l.state.selection.ranges){let p=l.lineBlockAt(u.head);p.from>a&&(o.push(lineDeco.range(p.from)),a=p.from)}return Decoration.set(o)}},{decorations:l=>l.decorations}),MaxOff=2e3;function rectangleFor(l,a,o){let u=Math.min(a.line,o.line),p=Math.max(a.line,o.line),d=[];if(a.off>MaxOff||o.off>MaxOff||a.col<0||o.col<0){let f=Math.min(a.off,o.off),g=Math.max(a.off,o.off);for(let b=u;b<=p;b++){let O=l.doc.line(b);O.length<=g&&d.push(EditorSelection.range(O.from+f,O.to+g))}}else{let f=Math.min(a.col,o.col),g=Math.max(a.col,o.col);for(let b=u;b<=p;b++){let O=l.doc.line(b),S=findColumn(O.text,f,l.tabSize,!0);if(S<0)d.push(EditorSelection.cursor(O.to));else{let M=findColumn(O.text,g,l.tabSize);d.push(EditorSelection.range(O.from+S,O.from+M))}}}return d}function absoluteColumn(l,a){let o=l.coordsAtPos(l.viewport.from);return o?Math.round(Math.abs((o.left-a)/l.defaultCharacterWidth)):-1}function getPos(l,a){let o=l.posAtCoords({x:a.clientX,y:a.clientY},!1),u=l.state.doc.lineAt(o),p=o-u.from,d=p>MaxOff?-1:p==u.length?absoluteColumn(l,a.clientX):countColumn(u.text,l.state.tabSize,o-u.from);return{line:u.number,col:d,off:p}}function rectangleSelectionStyle(l,a){let o=getPos(l,a),u=l.state.selection;return o?{update(p){if(p.docChanged){let d=p.changes.mapPos(p.startState.doc.line(o.line).from),f=p.state.doc.lineAt(d);o={line:f.number,col:o.col,off:Math.min(o.off,f.length)},u=u.map(p.changes)}},get(p,d,f){let g=getPos(l,p);if(!g)return u;let b=rectangleFor(l.state,o,g);return b.length?f?EditorSelection.create(b.concat(u.ranges)):EditorSelection.create(b):u}}:null}function rectangularSelection(l){let a=o=>o.altKey&&o.button==0;return EditorView.mouseSelectionStyle.of((o,u)=>a(u)?rectangleSelectionStyle(o,u):null)}const keys$3={Alt:[18,l=>!!l.altKey],Control:[17,l=>!!l.ctrlKey],Shift:[16,l=>!!l.shiftKey],Meta:[91,l=>!!l.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(l={}){let[a,o]=keys$3[l.key||"Alt"],u=ViewPlugin.fromClass(class{constructor(p){this.view=p,this.isDown=!1}set(p){this.isDown!=p&&(this.isDown=p,this.view.update([]))}},{eventObservers:{keydown(p){this.set(p.keyCode==a||o(p))},keyup(p){(p.keyCode==a||!o(p))&&this.set(!1)},mousemove(p){this.set(o(p))}}});return[u,EditorView.contentAttributes.of(p=>{var d;return!((d=p.plugin(u))===null||d===void 0)&&d.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(a,o,u,p){this.facet=o,this.createTooltipView=u,this.removeTooltipView=p,this.input=a.state.facet(o),this.tooltips=this.input.filter(f=>f);let d=null;this.tooltipViews=this.tooltips.map(f=>d=u(f,d))}update(a,o){var u;let p=a.state.facet(this.facet),d=p.filter(b=>b);if(p===this.input){for(let b of this.tooltipViews)b.update&&b.update(a);return!1}let f=[],g=o?[]:null;for(let b=0;b<d.length;b++){let O=d[b],S=-1;if(O){for(let M=0;M<this.tooltips.length;M++){let A=this.tooltips[M];A&&A.create==O.create&&(S=M)}if(S<0)f[b]=this.createTooltipView(O,b?f[b-1]:null),g&&(g[b]=!!O.above);else{let M=f[b]=this.tooltipViews[S];g&&(g[b]=o[S]),M.update&&M.update(a)}}}for(let b of this.tooltipViews)f.indexOf(b)<0&&(this.removeTooltipView(b),(u=b.destroy)===null||u===void 0||u.call(b));return o&&(g.forEach((b,O)=>o[O]=b),o.length=g.length),this.input=p,this.tooltips=d,this.tooltipViews=f,!0}}function windowSpace(l){let{win:a}=l;return{top:0,left:0,bottom:a.innerHeight,right:a.innerWidth}}const tooltipConfig=Facet.define({combine:l=>{var a,o,u;return{position:browser.ios?"absolute":((a=l.find(p=>p.position))===null||a===void 0?void 0:a.position)||"fixed",parent:((o=l.find(p=>p.parent))===null||o===void 0?void 0:o.parent)||null,tooltipSpace:((u=l.find(p=>p.tooltipSpace))===null||u===void 0?void 0:u.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(l){this.view=l,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let a=l.state.facet(tooltipConfig);this.position=a.position,this.parent=a.parent,this.classes=l.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(l,showTooltip,(o,u)=>this.createTooltip(o,u),o=>{this.resizeObserver&&this.resizeObserver.unobserve(o.dom),o.dom.remove()}),this.above=this.manager.tooltips.map(o=>!!o.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(o=>{Date.now()>this.lastTransaction-50&&o.length>0&&o[o.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),l.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let l of this.manager.tooltipViews)this.intersectionObserver.observe(l.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(l){l.transactions.length&&(this.lastTransaction=Date.now());let a=this.manager.update(l,this.above);a&&this.observeIntersection();let o=a||l.geometryChanged,u=l.state.facet(tooltipConfig);if(u.position!=this.position&&!this.madeAbsolute){this.position=u.position;for(let p of this.manager.tooltipViews)p.dom.style.position=this.position;o=!0}if(u.parent!=this.parent){this.parent&&this.container.remove(),this.parent=u.parent,this.createContainer();for(let p of this.manager.tooltipViews)this.container.appendChild(p.dom);o=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);o&&this.maybeMeasure()}createTooltip(l,a){let o=l.create(this.view),u=a?a.dom:null;if(o.dom.classList.add("cm-tooltip"),l.arrow&&!o.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let p=document.createElement("div");p.className="cm-tooltip-arrow",o.dom.appendChild(p)}return o.dom.style.position=this.position,o.dom.style.top=Outside,o.dom.style.left="0px",this.container.insertBefore(o.dom,u),o.mount&&o.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(o.dom),o}destroy(){var l,a,o;this.view.win.removeEventListener("resize",this.measureSoon);for(let u of this.manager.tooltipViews)u.dom.remove(),(l=u.destroy)===null||l===void 0||l.call(u);this.parent&&this.container.remove(),(a=this.resizeObserver)===null||a===void 0||a.disconnect(),(o=this.intersectionObserver)===null||o===void 0||o.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let l=1,a=1,o=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:d}=this.manager.tooltipViews[0];if(browser.gecko)o=d.offsetParent!=this.container.ownerDocument.body;else if(d.style.top==Outside&&d.style.left=="0px"){let f=d.getBoundingClientRect();o=Math.abs(f.top+1e4)>1||Math.abs(f.left)>1}}if(o||this.position=="absolute")if(this.parent){let d=this.parent.getBoundingClientRect();d.width&&d.height&&(l=d.width/this.parent.offsetWidth,a=d.height/this.parent.offsetHeight)}else({scaleX:l,scaleY:a}=this.view.viewState);let u=this.view.scrollDOM.getBoundingClientRect(),p=getScrollMargins(this.view);return{visible:{left:u.left+p.left,top:u.top+p.top,right:u.right-p.right,bottom:u.bottom-p.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((d,f)=>{let g=this.manager.tooltipViews[f];return g.getCoords?g.getCoords(d.pos):this.view.coordsAtPos(d.pos)}),size:this.manager.tooltipViews.map(({dom:d})=>d.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:l,scaleY:a,makeAbsolute:o}}writeMeasure(l){var a;if(l.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let g of this.manager.tooltipViews)g.dom.style.position="absolute"}let{visible:o,space:u,scaleX:p,scaleY:d}=l,f=[];for(let g=0;g<this.manager.tooltips.length;g++){let b=this.manager.tooltips[g],O=this.manager.tooltipViews[g],{dom:S}=O,M=l.pos[g],A=l.size[g];if(!M||b.clip!==!1&&(M.bottom<=Math.max(o.top,u.top)||M.top>=Math.min(o.bottom,u.bottom)||M.right<Math.max(o.left,u.left)-.1||M.left>Math.min(o.right,u.right)+.1)){S.style.top=Outside;continue}let F=b.arrow?O.dom.querySelector(".cm-tooltip-arrow"):null,$=F?7:0,B=A.right-A.left,I=(a=knownHeight.get(O))!==null&&a!==void 0?a:A.bottom-A.top,U=O.offset||noOffset,te=this.view.textDirection==Direction.LTR,de=A.width>u.right-u.left?te?u.left:u.right-A.width:te?Math.max(u.left,Math.min(M.left-(F?14:0)+U.x,u.right-B)):Math.min(Math.max(u.left,M.left-B+(F?14:0)-U.x),u.right-B),se=this.above[g];!b.strictSide&&(se?M.top-I-$-U.y<u.top:M.bottom+I+$+U.y>u.bottom)&&se==u.bottom-M.bottom>M.top-u.top&&(se=this.above[g]=!se);let q=(se?M.top-u.top:u.bottom-M.bottom)-$;if(q<I&&O.resize!==!1){if(q<this.view.defaultLineHeight){S.style.top=Outside;continue}knownHeight.set(O,I),S.style.height=(I=q)/d+"px"}else S.style.height&&(S.style.height="");let le=se?M.top-I-$-U.y:M.bottom+$+U.y,fe=de+B;if(O.overlap!==!0)for(let _e of f)_e.left<fe&&_e.right>de&&_e.top<le+I&&_e.bottom>le&&(le=se?_e.top-I-2-$:_e.bottom+$+2);if(this.position=="absolute"?(S.style.top=(le-l.parent.top)/d+"px",setLeftStyle(S,(de-l.parent.left)/p)):(S.style.top=le/d+"px",setLeftStyle(S,de/p)),F){let _e=M.left+(te?U.x:-U.x)-(de+14-7);F.style.left=_e/p+"px"}O.overlap!==!0&&f.push({left:de,top:le,right:fe,bottom:le+I}),S.classList.toggle("cm-tooltip-above",se),S.classList.toggle("cm-tooltip-below",!se),O.positioned&&O.positioned(l.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let l of this.manager.tooltipViews)l.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(l,a){let o=parseInt(l.style.left,10);(isNaN(o)||Math.abs(a-o)>1)&&(l.style.left=a+"px")}const baseTheme$5=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$5]}),showHoverTooltip=Facet.define({combine:l=>l.reduce((a,o)=>a.concat(o),[])});class HoverTooltipHost{static create(a){return new HoverTooltipHost(a)}constructor(a){this.view=a,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(a,showHoverTooltip,(o,u)=>this.createHostedView(o,u),o=>o.dom.remove())}createHostedView(a,o){let u=a.create(this.view);return u.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(u.dom,o?o.dom.nextSibling:this.dom.firstChild),this.mounted&&u.mount&&u.mount(this.view),u}mount(a){for(let o of this.manager.tooltipViews)o.mount&&o.mount(a);this.mounted=!0}positioned(a){for(let o of this.manager.tooltipViews)o.positioned&&o.positioned(a)}update(a){this.manager.update(a)}destroy(){var a;for(let o of this.manager.tooltipViews)(a=o.destroy)===null||a===void 0||a.call(o)}passProp(a){let o;for(let u of this.manager.tooltipViews){let p=u[a];if(p!==void 0){if(o===void 0)o=p;else if(o!==p)return}}return o}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],l=>{let a=l.facet(showHoverTooltip);return a.length===0?null:{pos:Math.min(...a.map(o=>o.pos)),end:Math.max(...a.map(o=>{var u;return(u=o.end)!==null&&u!==void 0?u:o.pos})),create:HoverTooltipHost.create,above:a[0].above,arrow:a.some(o=>o.arrow)}});class HoverPlugin{constructor(a,o,u,p,d){this.view=a,this.source=o,this.field=u,this.setHover=p,this.hoverTime=d,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:a.dom,time:0},this.checkHover=this.checkHover.bind(this),a.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),a.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let a=Date.now()-this.lastMove.time;a<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-a):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:a,lastMove:o}=this,u=a.docView.nearest(o.target);if(!u)return;let p,d=1;if(u instanceof WidgetView)p=u.posAtStart;else{if(p=a.posAtCoords(o),p==null)return;let g=a.coordsAtPos(p);if(!g||o.y<g.top||o.y>g.bottom||o.x<g.left-a.defaultCharacterWidth||o.x>g.right+a.defaultCharacterWidth)return;let b=a.bidiSpans(a.state.doc.lineAt(p)).find(S=>S.from<=p&&S.to>=p),O=b&&b.dir==Direction.RTL?-1:1;d=o.x<g.left?-O:O}let f=this.source(a,p,d);if(f?.then){let g=this.pending={pos:p};f.then(b=>{this.pending==g&&(this.pending=null,b&&!(Array.isArray(b)&&!b.length)&&a.dispatch({effects:this.setHover.of(Array.isArray(b)?b:[b])}))},b=>logException(a.state,b,"hover tooltip"))}else f&&!(Array.isArray(f)&&!f.length)&&a.dispatch({effects:this.setHover.of(Array.isArray(f)?f:[f])})}get tooltip(){let a=this.view.plugin(tooltipPlugin),o=a?a.manager.tooltips.findIndex(u=>u.create==HoverTooltipHost.create):-1;return o>-1?a.manager.tooltipViews[o]:null}mousemove(a){var o,u;this.lastMove={x:a.clientX,y:a.clientY,target:a.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:p,tooltip:d}=this;if(p.length&&d&&!isInTooltip(d.dom,a)||this.pending){let{pos:f}=p[0]||this.pending,g=(u=(o=p[0])===null||o===void 0?void 0:o.end)!==null&&u!==void 0?u:f;(f==g?this.view.posAtCoords(this.lastMove)!=f:!isOverRange(this.view,f,g,a.clientX,a.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(a){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:o}=this;if(o.length){let{tooltip:u}=this;u&&u.dom.contains(a.relatedTarget)?this.watchTooltipLeave(u.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(a){let o=u=>{a.removeEventListener("mouseleave",o),this.active.length&&!this.view.dom.contains(u.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};a.addEventListener("mouseleave",o)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(l,a){let{left:o,right:u,top:p,bottom:d}=l.getBoundingClientRect(),f;if(f=l.querySelector(".cm-tooltip-arrow")){let g=f.getBoundingClientRect();p=Math.min(g.top,p),d=Math.max(g.bottom,d)}return a.clientX>=o-tooltipMargin&&a.clientX<=u+tooltipMargin&&a.clientY>=p-tooltipMargin&&a.clientY<=d+tooltipMargin}function isOverRange(l,a,o,u,p,d){let f=l.scrollDOM.getBoundingClientRect(),g=l.documentTop+l.documentPadding.top+l.contentHeight;if(f.left>u||f.right<u||f.top>p||Math.min(f.bottom,g)<p)return!1;let b=l.posAtCoords({x:u,y:p},!1);return b>=a&&b<=o}function hoverTooltip(l,a={}){let o=StateEffect.define(),u=StateField.define({create(){return[]},update(p,d){if(p.length&&(a.hideOnChange&&(d.docChanged||d.selection)?p=[]:a.hideOn&&(p=p.filter(f=>!a.hideOn(d,f))),d.docChanged)){let f=[];for(let g of p){let b=d.changes.mapPos(g.pos,-1,MapMode.TrackDel);if(b!=null){let O=Object.assign(Object.create(null),g);O.pos=b,O.end!=null&&(O.end=d.changes.mapPos(O.end)),f.push(O)}}p=f}for(let f of d.effects)f.is(o)&&(p=f.value),f.is(closeHoverTooltipEffect)&&(p=[]);return p},provide:p=>showHoverTooltip.from(p)});return{active:u,extension:[u,ViewPlugin.define(p=>new HoverPlugin(p,l,u,o,a.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(l,a){let o=l.plugin(tooltipPlugin);if(!o)return null;let u=o.manager.tooltips.indexOf(a);return u<0?null:o.manager.tooltipViews[u]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(l){let a,o;for(let u of l)a=a||u.topContainer,o=o||u.bottomContainer;return{topContainer:a,bottomContainer:o}}});function getPanel(l,a){let o=l.plugin(panelPlugin),u=o?o.specs.indexOf(a):-1;return u>-1?o.panels[u]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(l){this.input=l.state.facet(showPanel),this.specs=this.input.filter(o=>o),this.panels=this.specs.map(o=>o(l));let a=l.state.facet(panelConfig);this.top=new PanelGroup(l,!0,a.topContainer),this.bottom=new PanelGroup(l,!1,a.bottomContainer),this.top.sync(this.panels.filter(o=>o.top)),this.bottom.sync(this.panels.filter(o=>!o.top));for(let o of this.panels)o.dom.classList.add("cm-panel"),o.mount&&o.mount()}update(l){let a=l.state.facet(panelConfig);this.top.container!=a.topContainer&&(this.top.sync([]),this.top=new PanelGroup(l.view,!0,a.topContainer)),this.bottom.container!=a.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(l.view,!1,a.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let o=l.state.facet(showPanel);if(o!=this.input){let u=o.filter(b=>b),p=[],d=[],f=[],g=[];for(let b of u){let O=this.specs.indexOf(b),S;O<0?(S=b(l.view),g.push(S)):(S=this.panels[O],S.update&&S.update(l)),p.push(S),(S.top?d:f).push(S)}this.specs=u,this.panels=p,this.top.sync(d),this.bottom.sync(f);for(let b of g)b.dom.classList.add("cm-panel"),b.mount&&b.mount()}else for(let u of this.panels)u.update&&u.update(l)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:l=>EditorView.scrollMargins.of(a=>{let o=a.plugin(l);return o&&{top:o.top.scrollMargin(),bottom:o.bottom.scrollMargin()}})});class PanelGroup{constructor(a,o,u){this.view=a,this.top=o,this.container=u,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(a){for(let o of this.panels)o.destroy&&a.indexOf(o)<0&&o.destroy();this.panels=a,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let o=this.container||this.view.dom;o.insertBefore(this.dom,this.top?o.firstChild:null)}let a=this.dom.firstChild;for(let o of this.panels)if(o.dom.parentNode==this.dom){for(;a!=o.dom;)a=rm(a);a=a.nextSibling}else this.dom.insertBefore(o.dom,a);for(;a;)a=rm(a)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let a of this.classes.split(" "))a&&this.container.classList.remove(a);for(let a of(this.classes=this.view.themeClasses).split(" "))a&&this.container.classList.add(a)}}}function rm(l){let a=l.nextSibling;return l.remove(),a}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(a){return this==a||this.constructor==a.constructor&&this.eq(a)}eq(a){return!1}destroy(a){}}GutterMarker.prototype.elementClass="",GutterMarker.prototype.toDOM=void 0,GutterMarker.prototype.mapMode=MapMode.TrackBefore,GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1,GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),activeGutters=Facet.define(),unfixGutters=Facet.define({combine:l=>l.some(a=>a)});function gutters(l){return[gutterView]}const gutterView=ViewPlugin.fromClass(class{constructor(l){this.view=l,this.prevViewport=l.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=l.state.facet(activeGutters).map(a=>new SingleGutterView(l,a));for(let a of this.gutters)this.dom.appendChild(a.dom);this.fixed=!l.state.facet(unfixGutters),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),l.scrollDOM.insertBefore(this.dom,l.contentDOM)}update(l){if(this.updateGutters(l)){let a=this.prevViewport,o=l.view.viewport,u=Math.min(a.to,o.to)-Math.max(a.from,o.from);this.syncGutters(u<(o.to-o.from)*.8)}l.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=l.view.viewport}syncGutters(l){let a=this.dom.nextSibling;l&&this.dom.remove();let o=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),u=[],p=this.gutters.map(d=>new UpdateContext(d,this.view.viewport,-this.view.documentPadding.top));for(let d of this.view.viewportLineBlocks)if(u.length&&(u=[]),Array.isArray(d.type)){let f=!0;for(let g of d.type)if(g.type==BlockType.Text&&f){advanceCursor(o,u,g.from);for(let b of p)b.line(this.view,g,u);f=!1}else if(g.widget)for(let b of p)b.widget(this.view,g)}else if(d.type==BlockType.Text){advanceCursor(o,u,d.from);for(let f of p)f.line(this.view,d,u)}else if(d.widget)for(let f of p)f.widget(this.view,d);for(let d of p)d.finish();l&&this.view.scrollDOM.insertBefore(this.dom,a)}updateGutters(l){let a=l.startState.facet(activeGutters),o=l.state.facet(activeGutters),u=l.docChanged||l.heightChanged||l.viewportChanged||!RangeSet.eq(l.startState.facet(gutterLineClass),l.state.facet(gutterLineClass),l.view.viewport.from,l.view.viewport.to);if(a==o)for(let p of this.gutters)p.update(l)&&(u=!0);else{u=!0;let p=[];for(let d of o){let f=a.indexOf(d);f<0?p.push(new SingleGutterView(this.view,d)):(this.gutters[f].update(l),p.push(this.gutters[f]))}for(let d of this.gutters)d.dom.remove(),p.indexOf(d)<0&&d.destroy();for(let d of p)this.dom.appendChild(d.dom);this.gutters=p}return u}destroy(){for(let l of this.gutters)l.destroy();this.dom.remove()}},{provide:l=>EditorView.scrollMargins.of(a=>{let o=a.plugin(l);return!o||o.gutters.length==0||!o.fixed?null:a.textDirection==Direction.LTR?{left:o.dom.offsetWidth*a.scaleX}:{right:o.dom.offsetWidth*a.scaleX}})});function asArray(l){return Array.isArray(l)?l:[l]}function advanceCursor(l,a,o){for(;l.value&&l.from<=o;)l.from==o&&a.push(l.value),l.next()}class UpdateContext{constructor(a,o,u){this.gutter=a,this.height=u,this.i=0,this.cursor=RangeSet.iter(a.markers,o.from)}addElement(a,o,u){let{gutter:p}=this,d=(o.top-this.height)/a.scaleY,f=o.height/a.scaleY;if(this.i==p.elements.length){let g=new GutterElement(a,f,d,u);p.elements.push(g),p.dom.appendChild(g.dom)}else p.elements[this.i].update(a,f,d,u);this.height=o.bottom,this.i++}line(a,o,u){let p=[];advanceCursor(this.cursor,p,o.from),u.length&&(p=p.concat(u));let d=this.gutter.config.lineMarker(a,o,p);d&&p.unshift(d);let f=this.gutter;p.length==0&&!f.config.renderEmptyElements||this.addElement(a,o,p)}widget(a,o){let u=this.gutter.config.widgetMarker(a,o.widget,o),p=u?[u]:null;for(let d of a.state.facet(gutterWidgetClass)){let f=d(a,o.widget,o);f&&(p||(p=[])).push(f)}p&&this.addElement(a,o,p)}finish(){let a=this.gutter;for(;a.elements.length>this.i;){let o=a.elements.pop();a.dom.removeChild(o.dom),o.destroy()}}}class SingleGutterView{constructor(a,o){this.view=a,this.config=o,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let u in o.domEventHandlers)this.dom.addEventListener(u,p=>{let d=p.target,f;if(d!=this.dom&&this.dom.contains(d)){for(;d.parentNode!=this.dom;)d=d.parentNode;let b=d.getBoundingClientRect();f=(b.top+b.bottom)/2}else f=p.clientY;let g=a.lineBlockAtHeight(f-a.documentTop);o.domEventHandlers[u](a,g,p)&&p.preventDefault()});this.markers=asArray(o.markers(a)),o.initialSpacer&&(this.spacer=new GutterElement(a,0,0,[o.initialSpacer(a)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(a){let o=this.markers;if(this.markers=asArray(this.config.markers(a.view)),this.spacer&&this.config.updateSpacer){let p=this.config.updateSpacer(this.spacer.markers[0],a);p!=this.spacer.markers[0]&&this.spacer.update(a.view,0,0,[p])}let u=a.view.viewport;return!RangeSet.eq(this.markers,o,u.from,u.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(a):!1)}destroy(){for(let a of this.elements)a.destroy()}}class GutterElement{constructor(a,o,u,p){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(a,o,u,p)}update(a,o,u,p){this.height!=o&&(this.height=o,this.dom.style.height=o+"px"),this.above!=u&&(this.dom.style.marginTop=(this.above=u)?u+"px":""),sameMarkers(this.markers,p)||this.setMarkers(a,p)}setMarkers(a,o){let u="cm-gutterElement",p=this.dom.firstChild;for(let d=0,f=0;;){let g=f,b=d<o.length?o[d++]:null,O=!1;if(b){let S=b.elementClass;S&&(u+=" "+S);for(let M=f;M<this.markers.length;M++)if(this.markers[M].compare(b)){g=M,O=!0;break}}else g=this.markers.length;for(;f<g;){let S=this.markers[f++];if(S.toDOM){S.destroy(p);let M=p.nextSibling;p.remove(),p=M}}if(!b)break;b.toDOM&&(O?p=p.nextSibling:this.dom.insertBefore(b.toDOM(a),p)),O&&f++}this.dom.className=u,this.markers=o}destroy(){this.setMarkers(null,[])}}function sameMarkers(l,a){if(l.length!=a.length)return!1;for(let o=0;o<l.length;o++)if(!l[o].compare(a[o]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(l){return combineConfig(l,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(a,o){let u=Object.assign({},a);for(let p in o){let d=u[p],f=o[p];u[p]=d?(g,b,O)=>d(g,b,O)||f(g,b,O):f}return u}})}});class NumberMarker extends GutterMarker{constructor(a){super(),this.number=a}eq(a){return this.number==a.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(l,a){return l.state.facet(lineNumberConfig).formatNumber(a,l.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],l=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(a){return a.state.facet(lineNumberMarkers)},lineMarker(a,o,u){return u.some(p=>p.toDOM)?null:new NumberMarker(formatNumber(a,a.state.doc.lineAt(o.from).number))},widgetMarker:(a,o,u)=>{for(let p of a.state.facet(lineNumberWidgetMarker)){let d=p(a,o,u);if(d)return d}return null},lineMarkerChange:a=>a.startState.facet(lineNumberConfig)!=a.state.facet(lineNumberConfig),initialSpacer(a){return new NumberMarker(formatNumber(a,maxLineNumber(a.state.doc.lines)))},updateSpacer(a,o){let u=formatNumber(o.view,maxLineNumber(o.view.state.doc.lines));return u==a.number?a:new NumberMarker(u)},domEventHandlers:l.facet(lineNumberConfig).domEventHandlers}));function lineNumbers(l={}){return[lineNumberConfig.of(l),gutters(),lineNumberGutter]}function maxLineNumber(l){let a=9;for(;a<l;)a=a*10+9;return a}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],l=>{let a=[],o=-1;for(let u of l.selection.ranges){let p=l.doc.lineAt(u.head).from;p>o&&(o=p,a.push(activeLineGutterMarker.range(p)))}return RangeSet.of(a)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(a,o){this.from=a,this.to=o}}class NodeProp{constructor(a={}){this.id=nextPropID++,this.perNode=!!a.perNode,this.deserialize=a.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(a){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof a!="function"&&(a=NodeType.match(a)),o=>{let u=a(o);return u===void 0?null:[this,u]}}}NodeProp.closedBy=new NodeProp({deserialize:l=>l.split(" ")}),NodeProp.openedBy=new NodeProp({deserialize:l=>l.split(" ")}),NodeProp.group=new NodeProp({deserialize:l=>l.split(" ")}),NodeProp.isolate=new NodeProp({deserialize:l=>{if(l&&l!="rtl"&&l!="ltr"&&l!="auto")throw new RangeError("Invalid value for isolate: "+l);return l||"auto"}}),NodeProp.contextHash=new NodeProp({perNode:!0}),NodeProp.lookAhead=new NodeProp({perNode:!0}),NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(a,o,u){this.tree=a,this.overlay=o,this.parser=u}static get(a){return a&&a.props&&a.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(a,o,u,p=0){this.name=a,this.props=o,this.id=u,this.flags=p}static define(a){let o=a.props&&a.props.length?Object.create(null):noProps,u=(a.top?1:0)|(a.skipped?2:0)|(a.error?4:0)|(a.name==null?8:0),p=new NodeType(a.name||"",o,a.id,u);if(a.props){for(let d of a.props)if(Array.isArray(d)||(d=d(p)),d){if(d[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");o[d[0].id]=d[1]}}return p}prop(a){return this.props[a.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(a){if(typeof a=="string"){if(this.name==a)return!0;let o=this.prop(NodeProp.group);return o?o.indexOf(a)>-1:!1}return this.id==a}static match(a){let o=Object.create(null);for(let u in a)for(let p of u.split(" "))o[p]=a[u];return u=>{for(let p=u.prop(NodeProp.group),d=-1;d<(p?p.length:0);d++){let f=o[d<0?u.name:p[d]];if(f)return f}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(a){this.types=a;for(let o=0;o<a.length;o++)if(a[o].id!=o)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...a){let o=[];for(let u of this.types){let p=null;for(let d of a){let f=d(u);f&&(p||(p=Object.assign({},u.props)),p[f[0].id]=f[1])}o.push(p?new NodeType(u.name,p,u.id,u.flags):u)}return new NodeSet(o)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(l){l[l.ExcludeBuffers=1]="ExcludeBuffers",l[l.IncludeAnonymous=2]="IncludeAnonymous",l[l.IgnoreMounts=4]="IgnoreMounts",l[l.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(a,o,u,p,d){if(this.type=a,this.children=o,this.positions=u,this.length=p,this.props=null,d&&d.length){this.props=Object.create(null);for(let[f,g]of d)this.props[typeof f=="number"?f:f.id]=g}}toString(){let a=MountedTree.get(this);if(a&&!a.overlay)return a.tree.toString();let o="";for(let u of this.children){let p=u.toString();p&&(o&&(o+=","),o+=p)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(o.length?"("+o+")":""):o}cursor(a=0){return new TreeCursor(this.topNode,a)}cursorAt(a,o=0,u=0){let p=CachedNode.get(this)||this.topNode,d=new TreeCursor(p);return d.moveTo(a,o),CachedNode.set(this,d._tree),d}get topNode(){return new TreeNode(this,0,0,null)}resolve(a,o=0){let u=resolveNode(CachedNode.get(this)||this.topNode,a,o,!1);return CachedNode.set(this,u),u}resolveInner(a,o=0){let u=resolveNode(CachedInnerNode.get(this)||this.topNode,a,o,!0);return CachedInnerNode.set(this,u),u}resolveStack(a,o=0){return stackIterator(this,a,o)}iterate(a){let{enter:o,leave:u,from:p=0,to:d=this.length}=a,f=a.mode||0,g=(f&IterMode.IncludeAnonymous)>0;for(let b=this.cursor(f|IterMode.IncludeAnonymous);;){let O=!1;if(b.from<=d&&b.to>=p&&(!g&&b.type.isAnonymous||o(b)!==!1)){if(b.firstChild())continue;O=!0}for(;O&&u&&(g||!b.type.isAnonymous)&&u(b),!b.nextSibling();){if(!b.parent())return;O=!0}}}prop(a){return a.perNode?this.props?this.props[a.id]:void 0:this.type.prop(a)}get propValues(){let a=[];if(this.props)for(let o in this.props)a.push([+o,this.props[o]]);return a}balance(a={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(o,u,p)=>new Tree(this.type,o,u,p,this.propValues),a.makeTree||((o,u,p)=>new Tree(NodeType.none,o,u,p)))}static build(a){return buildTree(a)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(a,o){this.buffer=a,this.index=o}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(a,o,u){this.buffer=a,this.length=o,this.set=u}get type(){return NodeType.none}toString(){let a=[];for(let o=0;o<this.buffer.length;)a.push(this.childString(o)),o=this.buffer[o+3];return a.join(",")}childString(a){let o=this.buffer[a],u=this.buffer[a+3],p=this.set.types[o],d=p.name;if(/\W/.test(d)&&!p.isError&&(d=JSON.stringify(d)),a+=4,u==a)return d;let f=[];for(;a<u;)f.push(this.childString(a)),a=this.buffer[a+3];return d+"("+f.join(",")+")"}findChild(a,o,u,p,d){let{buffer:f}=this,g=-1;for(let b=a;b!=o&&!(checkSide(d,p,f[b+1],f[b+2])&&(g=b,u>0));b=f[b+3]);return g}slice(a,o,u){let p=this.buffer,d=new Uint16Array(o-a),f=0;for(let g=a,b=0;g<o;){d[b++]=p[g++],d[b++]=p[g++]-u;let O=d[b++]=p[g++]-u;d[b++]=p[g++]-a,f=Math.max(f,O)}return new TreeBuffer(d,f,this.set)}}function checkSide(l,a,o,u){switch(l){case-2:return o<a;case-1:return u>=a&&o<a;case 0:return o<a&&u>a;case 1:return o<=a&&u>a;case 2:return u>a;case 4:return!0}}function resolveNode(l,a,o,u){for(var p;l.from==l.to||(o<1?l.from>=a:l.from>a)||(o>-1?l.to<=a:l.to<a);){let f=!u&&l instanceof TreeNode&&l.index<0?null:l.parent;if(!f)return l;l=f}let d=u?0:IterMode.IgnoreOverlays;if(u)for(let f=l,g=f.parent;g;f=g,g=f.parent)f instanceof TreeNode&&f.index<0&&((p=g.enter(a,o,d))===null||p===void 0?void 0:p.from)!=f.from&&(l=g);for(;;){let f=l.enter(a,o,d);if(!f)return l;l=f}}class BaseNode{cursor(a=0){return new TreeCursor(this,a)}getChild(a,o=null,u=null){let p=getChildren(this,a,o,u);return p.length?p[0]:null}getChildren(a,o=null,u=null){return getChildren(this,a,o,u)}resolve(a,o=0){return resolveNode(this,a,o,!1)}resolveInner(a,o=0){return resolveNode(this,a,o,!0)}matchContext(a){return matchNodeContext(this.parent,a)}enterUnfinishedNodesBefore(a){let o=this.childBefore(a),u=this;for(;o;){let p=o.lastChild;if(!p||p.to!=o.to)break;p.type.isError&&p.from==p.to?(u=o,o=p.prevSibling):o=p}return u}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(a,o,u,p){super(),this._tree=a,this.from=o,this.index=u,this._parent=p}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(a,o,u,p,d=0){for(let f=this;;){for(let{children:g,positions:b}=f._tree,O=o>0?g.length:-1;a!=O;a+=o){let S=g[a],M=b[a]+f.from;if(checkSide(p,u,M,M+S.length)){if(S instanceof TreeBuffer){if(d&IterMode.ExcludeBuffers)continue;let A=S.findChild(0,S.buffer.length,o,u-M,p);if(A>-1)return new BufferNode(new BufferContext(f,S,a,M),null,A)}else if(d&IterMode.IncludeAnonymous||!S.type.isAnonymous||hasChild(S)){let A;if(!(d&IterMode.IgnoreMounts)&&(A=MountedTree.get(S))&&!A.overlay)return new TreeNode(A.tree,M,a,f);let F=new TreeNode(S,M,a,f);return d&IterMode.IncludeAnonymous||!F.type.isAnonymous?F:F.nextChild(o<0?S.children.length-1:0,o,u,p)}}}if(d&IterMode.IncludeAnonymous||!f.type.isAnonymous||(f.index>=0?a=f.index+o:a=o<0?-1:f._parent._tree.children.length,f=f._parent,!f))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(a){return this.nextChild(0,1,a,2)}childBefore(a){return this.nextChild(this._tree.children.length-1,-1,a,-2)}enter(a,o,u=0){let p;if(!(u&IterMode.IgnoreOverlays)&&(p=MountedTree.get(this._tree))&&p.overlay){let d=a-this.from;for(let{from:f,to:g}of p.overlay)if((o>0?f<=d:f<d)&&(o<0?g>=d:g>d))return new TreeNode(p.tree,p.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,a,o,u)}nextSignificantParent(){let a=this;for(;a.type.isAnonymous&&a._parent;)a=a._parent;return a}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(l,a,o,u){let p=l.cursor(),d=[];if(!p.firstChild())return d;if(o!=null){for(let f=!1;!f;)if(f=p.type.is(o),!p.nextSibling())return d}for(;;){if(u!=null&&p.type.is(u))return d;if(p.type.is(a)&&d.push(p.node),!p.nextSibling())return u==null?d:[]}}function matchNodeContext(l,a,o=a.length-1){for(let u=l;o>=0;u=u.parent){if(!u)return!1;if(!u.type.isAnonymous){if(a[o]&&a[o]!=u.name)return!1;o--}}return!0}class BufferContext{constructor(a,o,u,p){this.parent=a,this.buffer=o,this.index=u,this.start=p}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(a,o,u){super(),this.context=a,this._parent=o,this.index=u,this.type=a.buffer.set.types[a.buffer.buffer[u]]}child(a,o,u){let{buffer:p}=this.context,d=p.findChild(this.index+4,p.buffer[this.index+3],a,o-this.context.start,u);return d<0?null:new BufferNode(this.context,this,d)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(a){return this.child(1,a,2)}childBefore(a){return this.child(-1,a,-2)}enter(a,o,u=0){if(u&IterMode.ExcludeBuffers)return null;let{buffer:p}=this.context,d=p.findChild(this.index+4,p.buffer[this.index+3],o>0?1:-1,a-this.context.start,o);return d<0?null:new BufferNode(this.context,this,d)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(a){return this._parent?null:this.context.parent.nextChild(this.context.index+a,a,0,4)}get nextSibling(){let{buffer:a}=this.context,o=a.buffer[this.index+3];return o<(this._parent?a.buffer[this._parent.index+3]:a.buffer.length)?new BufferNode(this.context,this._parent,o):this.externalSibling(1)}get prevSibling(){let{buffer:a}=this.context,o=this._parent?this._parent.index+4:0;return this.index==o?this.externalSibling(-1):new BufferNode(this.context,this._parent,a.findChild(o,this.index,-1,0,4))}get tree(){return null}toTree(){let a=[],o=[],{buffer:u}=this.context,p=this.index+4,d=u.buffer[this.index+3];if(d>p){let f=u.buffer[this.index+1];a.push(u.slice(p,d,f)),o.push(0)}return new Tree(this.type,a,o,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(l){if(!l.length)return null;let a=0,o=l[0];for(let d=1;d<l.length;d++){let f=l[d];(f.from>o.from||f.to<o.to)&&(o=f,a=d)}let u=o instanceof TreeNode&&o.index<0?null:o.parent,p=l.slice();return u?p[a]=u:p.splice(a,1),new StackIterator(p,o)}class StackIterator{constructor(a,o){this.heads=a,this.node=o}get next(){return iterStack(this.heads)}}function stackIterator(l,a,o){let u=l.resolveInner(a,o),p=null;for(let d=u instanceof TreeNode?u:u.context.parent;d;d=d.parent)if(d.index<0){let f=d.parent;(p||(p=[u])).push(f.resolve(a,o)),d=f}else{let f=MountedTree.get(d.tree);if(f&&f.overlay&&f.overlay[0].from<=a&&f.overlay[f.overlay.length-1].to>=a){let g=new TreeNode(f.tree,f.overlay[0].from+d.from,-1,d);(p||(p=[u])).push(resolveNode(g,a,o,!1))}}return p?iterStack(p):u}class TreeCursor{get name(){return this.type.name}constructor(a,o=0){if(this.mode=o,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,a instanceof TreeNode)this.yieldNode(a);else{this._tree=a.context.parent,this.buffer=a.context;for(let u=a._parent;u;u=u._parent)this.stack.unshift(u.index);this.bufferNode=a,this.yieldBuf(a.index)}}yieldNode(a){return a?(this._tree=a,this.type=a.type,this.from=a.from,this.to=a.to,!0):!1}yieldBuf(a,o){this.index=a;let{start:u,buffer:p}=this.buffer;return this.type=o||p.set.types[p.buffer[a]],this.from=u+p.buffer[a+1],this.to=u+p.buffer[a+2],!0}yield(a){return a?a instanceof TreeNode?(this.buffer=null,this.yieldNode(a)):(this.buffer=a.context,this.yieldBuf(a.index,a.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(a,o,u){if(!this.buffer)return this.yield(this._tree.nextChild(a<0?this._tree._tree.children.length-1:0,a,o,u,this.mode));let{buffer:p}=this.buffer,d=p.findChild(this.index+4,p.buffer[this.index+3],a,o-this.buffer.start,u);return d<0?!1:(this.stack.push(this.index),this.yieldBuf(d))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(a){return this.enterChild(1,a,2)}childBefore(a){return this.enterChild(-1,a,-2)}enter(a,o,u=this.mode){return this.buffer?u&IterMode.ExcludeBuffers?!1:this.enterChild(1,a,o):this.yield(this._tree.enter(a,o,u))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let a=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(a)}sibling(a){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+a,a,0,4,this.mode)):!1;let{buffer:o}=this.buffer,u=this.stack.length-1;if(a<0){let p=u<0?0:this.stack[u]+4;if(this.index!=p)return this.yieldBuf(o.findChild(p,this.index,-1,0,4))}else{let p=o.buffer[this.index+3];if(p<(u<0?o.buffer.length:o.buffer[this.stack[u]+3]))return this.yieldBuf(p)}return u<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+a,a,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(a){let o,u,{buffer:p}=this;if(p){if(a>0){if(this.index<p.buffer.buffer.length)return!1}else for(let d=0;d<this.index;d++)if(p.buffer.buffer[d+3]<this.index)return!1;({index:o,parent:u}=p)}else({index:o,_parent:u}=this._tree);for(;u;{index:o,_parent:u}=u)if(o>-1)for(let d=o+a,f=a<0?-1:u._tree.children.length;d!=f;d+=a){let g=u._tree.children[d];if(this.mode&IterMode.IncludeAnonymous||g instanceof TreeBuffer||!g.type.isAnonymous||hasChild(g))return!1}return!0}move(a,o){if(o&&this.enterChild(a,0,4))return!0;for(;;){if(this.sibling(a))return!0;if(this.atLastNode(a)||!this.parent())return!1}}next(a=!0){return this.move(1,a)}prev(a=!0){return this.move(-1,a)}moveTo(a,o=0){for(;(this.from==this.to||(o<1?this.from>=a:this.from>a)||(o>-1?this.to<=a:this.to<a))&&this.parent(););for(;this.enterChild(1,a,o););return this}get node(){if(!this.buffer)return this._tree;let a=this.bufferNode,o=null,u=0;if(a&&a.context==this.buffer)e:for(let p=this.index,d=this.stack.length;d>=0;){for(let f=a;f;f=f._parent)if(f.index==p){if(p==this.index)return f;o=f,u=d+1;break e}p=this.stack[--d]}for(let p=u;p<this.stack.length;p++)o=new BufferNode(this.buffer,o,this.stack[p]);return this.bufferNode=new BufferNode(this.buffer,o,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(a,o){for(let u=0;;){let p=!1;if(this.type.isAnonymous||a(this)!==!1){if(this.firstChild()){u++;continue}this.type.isAnonymous||(p=!0)}for(;;){if(p&&o&&o(this),p=this.type.isAnonymous,!u)return;if(this.nextSibling())break;this.parent(),u--,p=!0}}}matchContext(a){if(!this.buffer)return matchNodeContext(this.node.parent,a);let{buffer:o}=this.buffer,{types:u}=o.set;for(let p=a.length-1,d=this.stack.length-1;p>=0;d--){if(d<0)return matchNodeContext(this._tree,a,p);let f=u[o.buffer[this.stack[d]]];if(!f.isAnonymous){if(a[p]&&a[p]!=f.name)return!1;p--}}return!0}}function hasChild(l){return l.children.some(a=>a instanceof TreeBuffer||!a.type.isAnonymous||hasChild(a))}function buildTree(l){var a;let{buffer:o,nodeSet:u,maxBufferLength:p=DefaultBufferLength,reused:d=[],minRepeatType:f=u.types.length}=l,g=Array.isArray(o)?new FlatBufferCursor(o,o.length):o,b=u.types,O=0,S=0;function M(q,le,fe,_e,Pe,Oe){let{id:Fe,start:we,end:ke,size:Ge}=g,Be=S,Ze=O;for(;Ge<0;)if(g.next(),Ge==-1){let ht=d[Fe];fe.push(ht),_e.push(we-q);return}else if(Ge==-3){O=Fe;return}else if(Ge==-4){S=Fe;return}else throw new RangeError(`Unrecognized record size: ${Ge}`);let Ve=b[Fe],Ee,He,nt=we-q;if(ke-we<=p&&(He=I(g.pos-le,Pe))){let ht=new Uint16Array(He.size-He.skip),Me=g.pos-He.size,Xe=ht.length;for(;g.pos>Me;)Xe=U(He.start,ht,Xe);Ee=new TreeBuffer(ht,ke-He.start,u),nt=He.start-q}else{let ht=g.pos-Ge;g.next();let Me=[],Xe=[],kt=Fe>=f?Fe:-1,je=0,rt=ke;for(;g.pos>ht;)kt>=0&&g.id==kt&&g.size>=0?(g.end<=rt-p&&($(Me,Xe,we,je,g.end,rt,kt,Be,Ze),je=Me.length,rt=g.end),g.next()):Oe>2500?A(we,ht,Me,Xe):M(we,ht,Me,Xe,kt,Oe+1);if(kt>=0&&je>0&&je<Me.length&&$(Me,Xe,we,je,we,rt,kt,Be,Ze),Me.reverse(),Xe.reverse(),kt>-1&&je>0){let ft=F(Ve,Ze);Ee=balanceRange(Ve,Me,Xe,0,Me.length,0,ke-we,ft,ft)}else Ee=B(Ve,Me,Xe,ke-we,Be-ke,Ze)}fe.push(Ee),_e.push(nt)}function A(q,le,fe,_e){let Pe=[],Oe=0,Fe=-1;for(;g.pos>le;){let{id:we,start:ke,end:Ge,size:Be}=g;if(Be>4)g.next();else{if(Fe>-1&&ke<Fe)break;Fe<0&&(Fe=Ge-p),Pe.push(we,ke,Ge),Oe++,g.next()}}if(Oe){let we=new Uint16Array(Oe*4),ke=Pe[Pe.length-2];for(let Ge=Pe.length-3,Be=0;Ge>=0;Ge-=3)we[Be++]=Pe[Ge],we[Be++]=Pe[Ge+1]-ke,we[Be++]=Pe[Ge+2]-ke,we[Be++]=Be;fe.push(new TreeBuffer(we,Pe[2]-ke,u)),_e.push(ke-q)}}function F(q,le){return(fe,_e,Pe)=>{let Oe=0,Fe=fe.length-1,we,ke;if(Fe>=0&&(we=fe[Fe])instanceof Tree){if(!Fe&&we.type==q&&we.length==Pe)return we;(ke=we.prop(NodeProp.lookAhead))&&(Oe=_e[Fe]+we.length+ke)}return B(q,fe,_e,Pe,Oe,le)}}function $(q,le,fe,_e,Pe,Oe,Fe,we,ke){let Ge=[],Be=[];for(;q.length>_e;)Ge.push(q.pop()),Be.push(le.pop()+fe-Pe);q.push(B(u.types[Fe],Ge,Be,Oe-Pe,we-Oe,ke)),le.push(Pe-fe)}function B(q,le,fe,_e,Pe,Oe,Fe){if(Oe){let we=[NodeProp.contextHash,Oe];Fe=Fe?[we].concat(Fe):[we]}if(Pe>25){let we=[NodeProp.lookAhead,Pe];Fe=Fe?[we].concat(Fe):[we]}return new Tree(q,le,fe,_e,Fe)}function I(q,le){let fe=g.fork(),_e=0,Pe=0,Oe=0,Fe=fe.end-p,we={size:0,start:0,skip:0};e:for(let ke=fe.pos-q;fe.pos>ke;){let Ge=fe.size;if(fe.id==le&&Ge>=0){we.size=_e,we.start=Pe,we.skip=Oe,Oe+=4,_e+=4,fe.next();continue}let Be=fe.pos-Ge;if(Ge<0||Be<ke||fe.start<Fe)break;let Ze=fe.id>=f?4:0,Ve=fe.start;for(fe.next();fe.pos>Be;){if(fe.size<0)if(fe.size==-3)Ze+=4;else break e;else fe.id>=f&&(Ze+=4);fe.next()}Pe=Ve,_e+=Ge,Oe+=Ze}return(le<0||_e==q)&&(we.size=_e,we.start=Pe,we.skip=Oe),we.size>4?we:void 0}function U(q,le,fe){let{id:_e,start:Pe,end:Oe,size:Fe}=g;if(g.next(),Fe>=0&&_e<f){let we=fe;if(Fe>4){let ke=g.pos-(Fe-4);for(;g.pos>ke;)fe=U(q,le,fe)}le[--fe]=we,le[--fe]=Oe-q,le[--fe]=Pe-q,le[--fe]=_e}else Fe==-3?O=_e:Fe==-4&&(S=_e);return fe}let te=[],de=[];for(;g.pos>0;)M(l.start||0,l.bufferStart||0,te,de,-1,0);let se=(a=l.length)!==null&&a!==void 0?a:te.length?de[0]+te[0].length:0;return new Tree(b[l.topID],te.reverse(),de.reverse(),se)}const nodeSizeCache=new WeakMap;function nodeSize(l,a){if(!l.isAnonymous||a instanceof TreeBuffer||a.type!=l)return 1;let o=nodeSizeCache.get(a);if(o==null){o=1;for(let u of a.children){if(u.type!=l||!(u instanceof Tree)){o=1;break}o+=nodeSize(l,u)}nodeSizeCache.set(a,o)}return o}function balanceRange(l,a,o,u,p,d,f,g,b){let O=0;for(let $=u;$<p;$++)O+=nodeSize(l,a[$]);let S=Math.ceil(O*1.5/8),M=[],A=[];function F($,B,I,U,te){for(let de=I;de<U;){let se=de,q=B[de],le=nodeSize(l,$[de]);for(de++;de<U;de++){let fe=nodeSize(l,$[de]);if(le+fe>=S)break;le+=fe}if(de==se+1){if(le>S){let fe=$[se];F(fe.children,fe.positions,0,fe.children.length,B[se]+te);continue}M.push($[se])}else{let fe=B[de-1]+$[de-1].length-q;M.push(balanceRange(l,$,B,se,de,q,fe,null,b))}A.push(q+te-d)}}return F(a,o,u,p,0),(g||b)(M,A,f)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(a,o,u){let p=this.map.get(a);p||this.map.set(a,p=new Map),p.set(o,u)}getBuffer(a,o){let u=this.map.get(a);return u&&u.get(o)}set(a,o){a instanceof BufferNode?this.setBuffer(a.context.buffer,a.index,o):a instanceof TreeNode&&this.map.set(a.tree,o)}get(a){return a instanceof BufferNode?this.getBuffer(a.context.buffer,a.index):a instanceof TreeNode?this.map.get(a.tree):void 0}cursorSet(a,o){a.buffer?this.setBuffer(a.buffer.buffer,a.index,o):this.map.set(a.tree,o)}cursorGet(a){return a.buffer?this.getBuffer(a.buffer.buffer,a.index):this.map.get(a.tree)}}class TreeFragment{constructor(a,o,u,p,d=!1,f=!1){this.from=a,this.to=o,this.tree=u,this.offset=p,this.open=(d?1:0)|(f?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(a,o=[],u=!1){let p=[new TreeFragment(0,a.length,a,0,!1,u)];for(let d of o)d.to>a.length&&p.push(d);return p}static applyChanges(a,o,u=128){if(!o.length)return a;let p=[],d=1,f=a.length?a[0]:null;for(let g=0,b=0,O=0;;g++){let S=g<o.length?o[g]:null,M=S?S.fromA:1e9;if(M-b>=u)for(;f&&f.from<M;){let A=f;if(b>=A.from||M<=A.to||O){let F=Math.max(A.from,b)-O,$=Math.min(A.to,M)-O;A=F>=$?null:new TreeFragment(F,$,A.tree,A.offset+O,g>0,!!S)}if(A&&p.push(A),f.to>M)break;f=d<a.length?a[d++]:null}if(!S)break;b=S.toA,O=S.toA-S.toB}return p}}class Parser{startParse(a,o,u){return typeof a=="string"&&(a=new StringInput(a)),u=u?u.length?u.map(p=>new Range(p.from,p.to)):[new Range(0,0)]:[new Range(0,a.length)],this.createParse(a,o||[],u)}parse(a,o,u){let p=this.startParse(a,o,u);for(;;){let d=p.advance();if(d)return d}}}class StringInput{constructor(a){this.string=a}get length(){return this.string.length}chunk(a){return this.string.slice(a)}get lineChunks(){return!1}read(a,o){return this.string.slice(a,o)}}new NodeProp({perNode:!0});let nextTagID=0;class Tag{constructor(a,o,u,p){this.name=a,this.set=o,this.base=u,this.modified=p,this.id=nextTagID++}toString(){let{name:a}=this;for(let o of this.modified)o.name&&(a=`${o.name}(${a})`);return a}static define(a,o){let u=typeof a=="string"?a:"?";if(a instanceof Tag&&(o=a),o?.base)throw new Error("Can not derive from a modified tag");let p=new Tag(u,[],null,[]);if(p.set.push(p),o)for(let d of o.set)p.set.push(d);return p}static defineModifier(a){let o=new Modifier(a);return u=>u.modified.indexOf(o)>-1?u:Modifier.get(u.base||u,u.modified.concat(o).sort((p,d)=>p.id-d.id))}}let nextModifierID=0;class Modifier{constructor(a){this.name=a,this.instances=[],this.id=nextModifierID++}static get(a,o){if(!o.length)return a;let u=o[0].instances.find(g=>g.base==a&&sameArray(o,g.modified));if(u)return u;let p=[],d=new Tag(a.name,p,a,o);for(let g of o)g.instances.push(d);let f=powerSet(o);for(let g of a.set)if(!g.modified.length)for(let b of f)p.push(Modifier.get(g,b));return d}}function sameArray(l,a){return l.length==a.length&&l.every((o,u)=>o==a[u])}function powerSet(l){let a=[[]];for(let o=0;o<l.length;o++)for(let u=0,p=a.length;u<p;u++)a.push(a[u].concat(l[o]));return a.sort((o,u)=>u.length-o.length)}function styleTags(l){let a=Object.create(null);for(let o in l){let u=l[o];Array.isArray(u)||(u=[u]);for(let p of o.split(" "))if(p){let d=[],f=2,g=p;for(let M=0;;){if(g=="..."&&M>0&&M+3==p.length){f=1;break}let A=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(g);if(!A)throw new RangeError("Invalid path: "+p);if(d.push(A[0]=="*"?"":A[0][0]=='"'?JSON.parse(A[0]):A[0]),M+=A[0].length,M==p.length)break;let F=p[M++];if(M==p.length&&F=="!"){f=0;break}if(F!="/")throw new RangeError("Invalid path: "+p);g=p.slice(M)}let b=d.length-1,O=d[b];if(!O)throw new RangeError("Invalid path: "+p);let S=new Rule(u,f,b>0?d.slice(0,b):null);a[O]=S.sort(a[O])}}return ruleNodeProp.add(a)}const ruleNodeProp=new NodeProp;class Rule{constructor(a,o,u,p){this.tags=a,this.mode=o,this.context=u,this.next=p}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(a){return!a||a.depth<this.depth?(this.next=a,this):(a.next=this.sort(a.next),a)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(l,a){let o=Object.create(null);for(let d of l)if(!Array.isArray(d.tag))o[d.tag.id]=d.class;else for(let f of d.tag)o[f.id]=d.class;let{scope:u,all:p=null}=a||{};return{style:d=>{let f=p;for(let g of d)for(let b of g.set){let O=o[b.id];if(O){f=f?f+" "+O:O;break}}return f},scope:u}}function highlightTags(l,a){let o=null;for(let u of l){let p=u.style(a);p&&(o=o?o+" "+p:p)}return o}function highlightTree(l,a,o,u=0,p=l.length){let d=new HighlightBuilder(u,Array.isArray(a)?a:[a],o);d.highlightRange(l.cursor(),u,p,"",d.highlighters),d.flush(p)}class HighlightBuilder{constructor(a,o,u){this.at=a,this.highlighters=o,this.span=u,this.class=""}startSpan(a,o){o!=this.class&&(this.flush(a),a>this.at&&(this.at=a),this.class=o)}flush(a){a>this.at&&this.class&&this.span(this.at,a,this.class)}highlightRange(a,o,u,p,d){let{type:f,from:g,to:b}=a;if(g>=u||b<=o)return;f.isTop&&(d=this.highlighters.filter(F=>!F.scope||F.scope(f)));let O=p,S=getStyleTags(a)||Rule.empty,M=highlightTags(d,S.tags);if(M&&(O&&(O+=" "),O+=M,S.mode==1&&(p+=(p?" ":"")+M)),this.startSpan(Math.max(o,g),O),S.opaque)return;let A=a.tree&&a.tree.prop(NodeProp.mounted);if(A&&A.overlay){let F=a.node.enter(A.overlay[0].from+g,1),$=this.highlighters.filter(I=>!I.scope||I.scope(A.tree.type)),B=a.firstChild();for(let I=0,U=g;;I++){let te=I<A.overlay.length?A.overlay[I]:null,de=te?te.from+g:b,se=Math.max(o,U),q=Math.min(u,de);if(se<q&&B)for(;a.from<q&&(this.highlightRange(a,se,q,p,d),this.startSpan(Math.min(q,a.to),O),!(a.to>=de||!a.nextSibling())););if(!te||de>u)break;U=te.to+g,U>o&&(this.highlightRange(F.cursor(),Math.max(o,te.from+g),Math.min(u,U),"",$),this.startSpan(Math.min(u,U),O))}B&&a.parent()}else if(a.firstChild()){A&&(p="");do if(!(a.to<=o)){if(a.from>=u)break;this.highlightRange(a,o,u,p,d),this.startSpan(Math.min(u,a.to),O)}while(a.nextSibling());a.parent()}}}function getStyleTags(l){let a=l.type.prop(ruleNodeProp);for(;a&&a.context&&!l.matchContext(a.context);)a=a.next;return a||null}const t=Tag.define,comment=t(),name$2=t(),typeName=t(name$2),propertyName=t(name$2),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation$1=t(),bracket=t(punctuation$1),meta=t(),tags={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name:name$2,variableName:t(name$2),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name$2),labelName:t(name$2),namespace:t(name$2),macroName:t(name$2),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation:punctuation$1,separator:t(punctuation$1),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let l in tags){let a=tags[l];a instanceof Tag&&(a.name=l)}tagHighlighter([{tag:tags.link,class:"tok-link"},{tag:tags.heading,class:"tok-heading"},{tag:tags.emphasis,class:"tok-emphasis"},{tag:tags.strong,class:"tok-strong"},{tag:tags.keyword,class:"tok-keyword"},{tag:tags.atom,class:"tok-atom"},{tag:tags.bool,class:"tok-bool"},{tag:tags.url,class:"tok-url"},{tag:tags.labelName,class:"tok-labelName"},{tag:tags.inserted,class:"tok-inserted"},{tag:tags.deleted,class:"tok-deleted"},{tag:tags.literal,class:"tok-literal"},{tag:tags.string,class:"tok-string"},{tag:tags.number,class:"tok-number"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],class:"tok-string2"},{tag:tags.variableName,class:"tok-variableName"},{tag:tags.local(tags.variableName),class:"tok-variableName tok-local"},{tag:tags.definition(tags.variableName),class:"tok-variableName tok-definition"},{tag:tags.special(tags.variableName),class:"tok-variableName2"},{tag:tags.definition(tags.propertyName),class:"tok-propertyName tok-definition"},{tag:tags.typeName,class:"tok-typeName"},{tag:tags.namespace,class:"tok-namespace"},{tag:tags.className,class:"tok-className"},{tag:tags.macroName,class:"tok-macroName"},{tag:tags.propertyName,class:"tok-propertyName"},{tag:tags.operator,class:"tok-operator"},{tag:tags.comment,class:"tok-comment"},{tag:tags.meta,class:"tok-meta"},{tag:tags.invalid,class:"tok-invalid"},{tag:tags.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(l){return Facet.define({combine:l?a=>a.concat(l):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(a,o,u=[],p=""){this.data=a,this.name=p,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=o,this.extension=[language.of(this),EditorState.languageData.of((d,f,g)=>{let b=topNodeAt(d,f,g),O=b.type.prop(languageDataProp);if(!O)return[];let S=d.facet(O),M=b.type.prop(sublanguageProp);if(M){let A=b.resolve(f-b.from,g);for(let F of M)if(F.test(A,d)){let $=d.facet(F.facet);return F.type=="replace"?$:$.concat(S)}}return S})].concat(u)}isActiveAt(a,o,u=-1){return topNodeAt(a,o,u).type.prop(languageDataProp)==this.data}findRegions(a){let o=a.facet(language);if(o?.data==this.data)return[{from:0,to:a.doc.length}];if(!o||!o.allowsNesting)return[];let u=[],p=(d,f)=>{if(d.prop(languageDataProp)==this.data){u.push({from:f,to:f+d.length});return}let g=d.prop(NodeProp.mounted);if(g){if(g.tree.prop(languageDataProp)==this.data){if(g.overlay)for(let b of g.overlay)u.push({from:b.from+f,to:b.to+f});else u.push({from:f,to:f+d.length});return}else if(g.overlay){let b=u.length;if(p(g.tree,g.overlay[0].from+f),u.length>b)return}}for(let b=0;b<d.children.length;b++){let O=d.children[b];O instanceof Tree&&p(O,d.positions[b]+f)}};return p(syntaxTree(a),0),u}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(l,a,o){let u=l.facet(language),p=syntaxTree(l).topNode;if(!u||u.allowsNesting)for(let d=p;d;d=d.enter(a,o,IterMode.ExcludeBuffers))d.type.isTop&&(p=d);return p}class LRLanguage extends Language{constructor(a,o,u){super(a,o,[],u),this.parser=o}static define(a){let o=defineLanguageFacet(a.languageData);return new LRLanguage(o,a.parser.configure({props:[languageDataProp.add(u=>u.isTop?o:void 0)]}),a.name)}configure(a,o){return new LRLanguage(this.data,this.parser.configure(a),o||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(l){let a=l.field(Language.state,!1);return a?a.tree:Tree.empty}function ensureSyntaxTree(l,a,o=50){var u;let p=(u=l.field(Language.state,!1))===null||u===void 0?void 0:u.context;if(!p)return null;let d=p.viewport;p.updateViewport({from:0,to:a});let f=p.isDone(a)||p.work(o,a)?p.tree:null;return p.updateViewport(d),f}class DocInput{constructor(a){this.doc=a,this.cursorPos=0,this.string="",this.cursor=a.iter()}get length(){return this.doc.length}syncTo(a){return this.string=this.cursor.next(a-this.cursorPos).value,this.cursorPos=a+this.string.length,this.cursorPos-this.string.length}chunk(a){return this.syncTo(a),this.string}get lineChunks(){return!0}read(a,o){let u=this.cursorPos-this.string.length;return a<u||o>=this.cursorPos?this.doc.sliceString(a,o):this.string.slice(a-u,o-u)}}let currentContext=null;class ParseContext{constructor(a,o,u=[],p,d,f,g,b){this.parser=a,this.state=o,this.fragments=u,this.tree=p,this.treeLen=d,this.viewport=f,this.skipped=g,this.scheduleOn=b,this.parse=null,this.tempSkipped=[]}static create(a,o,u){return new ParseContext(a,o,[],Tree.empty,0,u,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(a,o){return o!=null&&o>=this.state.doc.length&&(o=void 0),this.tree!=Tree.empty&&this.isDone(o??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var u;if(typeof a=="number"){let p=Date.now()+a;a=()=>Date.now()>p}for(this.parse||(this.parse=this.startParse()),o!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>o)&&o<this.state.doc.length&&this.parse.stopAt(o);;){let p=this.parse.advance();if(p)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(p,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(u=this.parse.stoppedAt)!==null&&u!==void 0?u:this.state.doc.length,this.tree=p,this.parse=null,this.treeLen<(o??this.state.doc.length))this.parse=this.startParse();else return!0;if(a())return!1}})}takeTree(){let a,o;this.parse&&(a=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>a)&&this.parse.stopAt(a),this.withContext(()=>{for(;!(o=this.parse.advance()););}),this.treeLen=a,this.tree=o,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(a){let o=currentContext;currentContext=this;try{return a()}finally{currentContext=o}}withoutTempSkipped(a){for(let o;o=this.tempSkipped.pop();)a=cutFragments(a,o.from,o.to);return a}changes(a,o){let{fragments:u,tree:p,treeLen:d,viewport:f,skipped:g}=this;if(this.takeTree(),!a.empty){let b=[];if(a.iterChangedRanges((O,S,M,A)=>b.push({fromA:O,toA:S,fromB:M,toB:A})),u=TreeFragment.applyChanges(u,b),p=Tree.empty,d=0,f={from:a.mapPos(f.from,-1),to:a.mapPos(f.to,1)},this.skipped.length){g=[];for(let O of this.skipped){let S=a.mapPos(O.from,1),M=a.mapPos(O.to,-1);S<M&&g.push({from:S,to:M})}}}return new ParseContext(this.parser,o,u,p,d,f,g,this.scheduleOn)}updateViewport(a){if(this.viewport.from==a.from&&this.viewport.to==a.to)return!1;this.viewport=a;let o=this.skipped.length;for(let u=0;u<this.skipped.length;u++){let{from:p,to:d}=this.skipped[u];p<a.to&&d>a.from&&(this.fragments=cutFragments(this.fragments,p,d),this.skipped.splice(u--,1))}return this.skipped.length>=o?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(a,o){this.skipped.push({from:a,to:o})}static getSkippingParser(a){return new class extends Parser{createParse(o,u,p){let d=p[0].from,f=p[p.length-1].to;return{parsedPos:d,advance(){let b=currentContext;if(b){for(let O of p)b.tempSkipped.push(O);a&&(b.scheduleOn=b.scheduleOn?Promise.all([b.scheduleOn,a]):a)}return this.parsedPos=f,new Tree(NodeType.none,[],[],f-d)},stoppedAt:null,stopAt(){}}}}}isDone(a){a=Math.min(a,this.state.doc.length);let o=this.fragments;return this.treeLen>=a&&o.length&&o[0].from==0&&o[0].to>=a}static get(){return currentContext}}function cutFragments(l,a,o){return TreeFragment.applyChanges(l,[{fromA:a,toA:o,fromB:a,toB:o}])}class LanguageState{constructor(a){this.context=a,this.tree=a.tree}apply(a){if(!a.docChanged&&this.tree==this.context.tree)return this;let o=this.context.changes(a.changes,a.state),u=this.context.treeLen==a.startState.doc.length?void 0:Math.max(a.changes.mapPos(this.context.treeLen),o.viewport.to);return o.work(20,u)||o.takeTree(),new LanguageState(o)}static init(a){let o=Math.min(3e3,a.doc.length),u=ParseContext.create(a.facet(language).parser,a,{from:0,to:o});return u.work(20,o)||u.takeTree(),new LanguageState(u)}}Language.state=StateField.define({create:LanguageState.init,update(l,a){for(let o of a.effects)if(o.is(Language.setState))return o.value;return a.startState.facet(language)!=a.state.facet(language)?LanguageState.init(a.state):l.apply(a)}});let requestIdle=l=>{let a=setTimeout(()=>l(),500);return()=>clearTimeout(a)};typeof requestIdleCallback<"u"&&(requestIdle=l=>{let a=-1,o=setTimeout(()=>{a=requestIdleCallback(l,{timeout:400})},100);return()=>a<0?clearTimeout(o):cancelIdleCallback(a)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(a){this.view=a,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(a){let o=this.view.state.field(Language.state).context;(o.updateViewport(a.view.viewport)||this.view.viewport.to>o.treeLen)&&this.scheduleWork(),(a.docChanged||a.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(o)}scheduleWork(){if(this.working)return;let{state:a}=this.view,o=a.field(Language.state);(o.tree!=o.context.tree||!o.context.isDone(a.doc.length))&&(this.working=requestIdle(this.work))}work(a){this.working=null;let o=Date.now();if(this.chunkEnd<o&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=o+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:u,viewport:{to:p}}=this.view,d=u.field(Language.state);if(d.tree==d.context.tree&&d.context.isDone(p+1e5))return;let f=Date.now()+Math.min(this.chunkBudget,100,a&&!isInputPending?Math.max(25,a.timeRemaining()-5):1e9),g=d.context.treeLen<p&&u.doc.length>p+1e3,b=d.context.work(()=>isInputPending&&isInputPending()||Date.now()>f,p+(g?0:1e5));this.chunkBudget-=Date.now()-o,(b||this.chunkBudget<=0)&&(d.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(d.context))})),this.chunkBudget>0&&!(b&&!g)&&this.scheduleWork(),this.checkAsyncSchedule(d.context)}checkAsyncSchedule(a){a.scheduleOn&&(this.workScheduled++,a.scheduleOn.then(()=>this.scheduleWork()).catch(o=>logException(this.view.state,o)).then(()=>this.workScheduled--),a.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(l){return l.length?l[0]:null},enables:l=>[Language.state,parseWorker,EditorView.contentAttributes.compute([l],a=>{let o=a.facet(l);return o&&o.name?{"data-language":o.name}:{}})]});class LanguageSupport{constructor(a,o=[]){this.language=a,this.support=o,this.extension=[a,o]}}const indentService=Facet.define(),indentUnit=Facet.define({combine:l=>{if(!l.length)return"  ";let a=l[0];if(!a||/\S/.test(a)||Array.from(a).some(o=>o!=a[0]))throw new Error("Invalid indent unit: "+JSON.stringify(l[0]));return a}});function getIndentUnit(l){let a=l.facet(indentUnit);return a.charCodeAt(0)==9?l.tabSize*a.length:a.length}function indentString(l,a){let o="",u=l.tabSize,p=l.facet(indentUnit)[0];if(p=="	"){for(;a>=u;)o+="	",a-=u;p=" "}for(let d=0;d<a;d++)o+=p;return o}function getIndentation(l,a){l instanceof EditorState&&(l=new IndentContext(l));for(let u of l.state.facet(indentService)){let p=u(l,a);if(p!==void 0)return p}let o=syntaxTree(l.state);return o.length>=a?syntaxIndentation(l,o,a):null}class IndentContext{constructor(a,o={}){this.state=a,this.options=o,this.unit=getIndentUnit(a)}lineAt(a,o=1){let u=this.state.doc.lineAt(a),{simulateBreak:p,simulateDoubleBreak:d}=this.options;return p!=null&&p>=u.from&&p<=u.to?d&&p==a?{text:"",from:a}:(o<0?p<a:p<=a)?{text:u.text.slice(p-u.from),from:p}:{text:u.text.slice(0,p-u.from),from:u.from}:u}textAfterPos(a,o=1){if(this.options.simulateDoubleBreak&&a==this.options.simulateBreak)return"";let{text:u,from:p}=this.lineAt(a,o);return u.slice(a-p,Math.min(u.length,a+100-p))}column(a,o=1){let{text:u,from:p}=this.lineAt(a,o),d=this.countColumn(u,a-p),f=this.options.overrideIndentation?this.options.overrideIndentation(p):-1;return f>-1&&(d+=f-this.countColumn(u,u.search(/\S|$/))),d}countColumn(a,o=a.length){return countColumn(a,this.state.tabSize,o)}lineIndent(a,o=1){let{text:u,from:p}=this.lineAt(a,o),d=this.options.overrideIndentation;if(d){let f=d(p);if(f>-1)return f}return this.countColumn(u,u.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(l,a,o){let u=a.resolveStack(o),p=a.resolveInner(o,-1).resolve(o,0).enterUnfinishedNodesBefore(o);if(p!=u.node){let d=[];for(let f=p;f&&!(f.from==u.node.from&&f.type==u.node.type);f=f.parent)d.push(f);for(let f=d.length-1;f>=0;f--)u={node:d[f],next:u}}return indentFor(u,l,o)}function indentFor(l,a,o){for(let u=l;u;u=u.next){let p=indentStrategy(u.node);if(p)return p(TreeIndentContext.create(a,o,u))}return 0}function ignoreClosed(l){return l.pos==l.options.simulateBreak&&l.options.simulateDoubleBreak}function indentStrategy(l){let a=l.type.prop(indentNodeProp);if(a)return a;let o=l.firstChild,u;if(o&&(u=o.type.prop(NodeProp.closedBy))){let p=l.lastChild,d=p&&u.indexOf(p.name)>-1;return f=>delimitedStrategy(f,!0,1,void 0,d&&!ignoreClosed(f)?p.from:void 0)}return l.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(a,o,u){super(a.state,a.options),this.base=a,this.pos=o,this.context=u}get node(){return this.context.node}static create(a,o,u){return new TreeIndentContext(a,o,u)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(a){let o=this.state.doc.lineAt(a.from);for(;;){let u=a.resolve(o.from);for(;u.parent&&u.parent.from==u.from;)u=u.parent;if(isParent(u,a))break;o=this.state.doc.lineAt(u.from)}return this.lineIndent(o.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(l,a){for(let o=a;o;o=o.parent)if(l==o)return!0;return!1}function bracketedAligned(l){let a=l.node,o=a.childAfter(a.from),u=a.lastChild;if(!o)return null;let p=l.options.simulateBreak,d=l.state.doc.lineAt(o.from),f=p==null||p<=d.from?d.to:Math.min(d.to,p);for(let g=o.to;;){let b=a.childAfter(g);if(!b||b==u)return null;if(!b.type.isSkipped){if(b.from>=f)return null;let O=/^ */.exec(d.text.slice(o.to-d.from))[0].length;return{from:o.from,to:o.to+O}}g=b.to}}function delimitedIndent({closing:l,align:a=!0,units:o=1}){return u=>delimitedStrategy(u,a,o,l)}function delimitedStrategy(l,a,o,u,p){let d=l.textAfter,f=d.match(/^\s*/)[0].length,g=u&&d.slice(f,f+u.length)==u||p==l.pos+f,b=a?bracketedAligned(l):null;return b?g?l.column(b.from):l.column(b.to):l.baseIndent+(g?0:l.unit*o)}const flatIndent=l=>l.baseIndent;function continuedIndent({except:l,units:a=1}={}){return o=>{let u=l&&l.test(o.textAfter);return o.baseIndent+(u?0:a*o.unit)}}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(l){let a=l.firstChild,o=l.lastChild;return a&&a.to<o.from?{from:a.to,to:o.type.isError?l.to:o.from}:null}function syntaxFolding(l,a,o){let u=syntaxTree(l);if(u.length<o)return null;let p=u.resolveStack(o,1),d=null;for(let f=p;f;f=f.next){let g=f.node;if(g.to<=o||g.from>o)continue;if(d&&g.from<a)break;let b=g.type.prop(foldNodeProp);if(b&&(g.to<u.length-50||u.length==l.doc.length||!isUnfinished(g))){let O=b(g,l);O&&O.from<=o&&O.from>=a&&O.to>o&&(d=O)}}return d}function isUnfinished(l){let a=l.lastChild;return a&&a.to==l.to&&a.type.isError}function foldable(l,a,o){for(let u of l.facet(foldService)){let p=u(l,a,o);if(p)return p}return syntaxFolding(l,a,o)}function mapRange(l,a){let o=a.mapPos(l.from,1),u=a.mapPos(l.to,-1);return o>=u?void 0:{from:o,to:u}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(l){let a=[];for(let{head:o}of l.state.selection.ranges)a.some(u=>u.from<=o&&u.to>=o)||a.push(l.lineBlockAt(o));return a}const foldState=StateField.define({create(){return Decoration.none},update(l,a){l=l.map(a.changes);for(let o of a.effects)if(o.is(foldEffect)&&!foldExists(l,o.value.from,o.value.to)){let{preparePlaceholder:u}=a.state.facet(foldConfig),p=u?Decoration.replace({widget:new PreparedFoldWidget(u(a.state,o.value))}):foldWidget;l=l.update({add:[p.range(o.value.from,o.value.to)]})}else o.is(unfoldEffect)&&(l=l.update({filter:(u,p)=>o.value.from!=u||o.value.to!=p,filterFrom:o.value.from,filterTo:o.value.to}));if(a.selection){let o=!1,{head:u}=a.selection.main;l.between(u,u,(p,d)=>{p<u&&d>u&&(o=!0)}),o&&(l=l.update({filterFrom:u,filterTo:u,filter:(p,d)=>d<=u||p>=u}))}return l},provide:l=>EditorView.decorations.from(l),toJSON(l,a){let o=[];return l.between(0,a.doc.length,(u,p)=>{o.push(u,p)}),o},fromJSON(l){if(!Array.isArray(l)||l.length%2)throw new RangeError("Invalid JSON for fold state");let a=[];for(let o=0;o<l.length;){let u=l[o++],p=l[o++];if(typeof u!="number"||typeof p!="number")throw new RangeError("Invalid JSON for fold state");a.push(foldWidget.range(u,p))}return Decoration.set(a,!0)}});function findFold(l,a,o){var u;let p=null;return(u=l.field(foldState,!1))===null||u===void 0||u.between(a,o,(d,f)=>{(!p||p.from>d)&&(p={from:d,to:f})}),p}function foldExists(l,a,o){let u=!1;return l.between(a,a,(p,d)=>{p==a&&d==o&&(u=!0)}),u}function maybeEnable(l,a){return l.field(foldState,!1)?a:a.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=l=>{for(let a of selectedLines(l)){let o=foldable(l.state,a.from,a.to);if(o)return l.dispatch({effects:maybeEnable(l.state,[foldEffect.of(o),announceFold(l,o)])}),!0}return!1},unfoldCode=l=>{if(!l.state.field(foldState,!1))return!1;let a=[];for(let o of selectedLines(l)){let u=findFold(l.state,o.from,o.to);u&&a.push(unfoldEffect.of(u),announceFold(l,u,!1))}return a.length&&l.dispatch({effects:a}),a.length>0};function announceFold(l,a,o=!0){let u=l.state.doc.lineAt(a.from).number,p=l.state.doc.lineAt(a.to).number;return EditorView.announce.of(`${l.state.phrase(o?"Folded lines":"Unfolded lines")} ${u} ${l.state.phrase("to")} ${p}.`)}const foldAll=l=>{let{state:a}=l,o=[];for(let u=0;u<a.doc.length;){let p=l.lineBlockAt(u),d=foldable(a,p.from,p.to);d&&o.push(foldEffect.of(d)),u=(d?l.lineBlockAt(d.to):p).to+1}return o.length&&l.dispatch({effects:maybeEnable(l.state,o)}),!!o.length},unfoldAll=l=>{let a=l.state.field(foldState,!1);if(!a||!a.size)return!1;let o=[];return a.between(0,l.state.doc.length,(u,p)=>{o.push(unfoldEffect.of({from:u,to:p}))}),l.dispatch({effects:o}),!0},defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},foldConfig=Facet.define({combine(l){return combineConfig(l,defaultConfig)}});function codeFolding(l){return[foldState,baseTheme$1$1]}function widgetToDOM(l,a){let{state:o}=l,u=o.facet(foldConfig),p=f=>{let g=l.lineBlockAt(l.posAtDOM(f.target)),b=findFold(l.state,g.from,g.to);b&&l.dispatch({effects:unfoldEffect.of(b)}),f.preventDefault()};if(u.placeholderDOM)return u.placeholderDOM(l,p,a);let d=document.createElement("span");return d.textContent=u.placeholderText,d.setAttribute("aria-label",o.phrase("folded code")),d.title=o.phrase("unfold"),d.className="cm-foldPlaceholder",d.onclick=p,d}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(l){return widgetToDOM(l,null)}}});class PreparedFoldWidget extends WidgetType{constructor(a){super(),this.value=a}eq(a){return this.value==a.value}toDOM(a){return widgetToDOM(a,this.value)}}const baseTheme$1$1=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(a,o){this.specs=a;let u;function p(g){let b=StyleModule.newName();return(u||(u=Object.create(null)))["."+b]=g,b}const d=typeof o.all=="string"?o.all:o.all?p(o.all):void 0,f=o.scope;this.scope=f instanceof Language?g=>g.prop(languageDataProp)==f.data:f?g=>g==f:void 0,this.style=tagHighlighter(a.map(g=>({tag:g.tag,class:g.class||p(Object.assign({},g,{tag:null}))})),{all:d}).style,this.module=u?new StyleModule(u):null,this.themeType=o.themeType}static define(a,o){return new HighlightStyle(a,o||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(l){return l.length?[l[0]]:null}});function getHighlighters(l){let a=l.facet(highlighterFacet);return a.length?a:l.facet(fallbackHighlighter)}function syntaxHighlighting(l,a){let o=[treeHighlighter],u;return l instanceof HighlightStyle&&(l.module&&o.push(EditorView.styleModule.of(l.module)),u=l.themeType),a?.fallback?o.push(fallbackHighlighter.of(l)):u?o.push(highlighterFacet.computeN([EditorView.darkTheme],p=>p.facet(EditorView.darkTheme)==(u=="dark")?[l]:[])):o.push(highlighterFacet.of(l)),o}class TreeHighlighter{constructor(a){this.markCache=Object.create(null),this.tree=syntaxTree(a.state),this.decorations=this.buildDeco(a,getHighlighters(a.state)),this.decoratedTo=a.viewport.to}update(a){let o=syntaxTree(a.state),u=getHighlighters(a.state),p=u!=getHighlighters(a.startState),{viewport:d}=a.view,f=a.changes.mapPos(this.decoratedTo,1);o.length<d.to&&!p&&o.type==this.tree.type&&f>=d.to?(this.decorations=this.decorations.map(a.changes),this.decoratedTo=f):(o!=this.tree||a.viewportChanged||p)&&(this.tree=o,this.decorations=this.buildDeco(a.view,u),this.decoratedTo=d.to)}buildDeco(a,o){if(!o||!this.tree.length)return Decoration.none;let u=new RangeSetBuilder;for(let{from:p,to:d}of a.visibleRanges)highlightTree(this.tree,o,(f,g,b)=>{u.add(f,g,this.markCache[b]||(this.markCache[b]=Decoration.mark({class:b})))},p,d);return u.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:l=>l.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags.meta,color:"#404740"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.keyword,color:"#708"},{tag:[tags.atom,tags.bool,tags.url,tags.contentSeparator,tags.labelName],color:"#219"},{tag:[tags.literal,tags.inserted],color:"#164"},{tag:[tags.string,tags.deleted],color:"#a11"},{tag:[tags.regexp,tags.escape,tags.special(tags.string)],color:"#e40"},{tag:tags.definition(tags.variableName),color:"#00f"},{tag:tags.local(tags.variableName),color:"#30a"},{tag:[tags.typeName,tags.namespace],color:"#085"},{tag:tags.className,color:"#167"},{tag:[tags.special(tags.variableName),tags.macroName],color:"#256"},{tag:tags.definition(tags.propertyName),color:"#00c"},{tag:tags.comment,color:"#940"},{tag:tags.invalid,color:"#f00"}]),baseTheme$4=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(l){return combineConfig(l,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(l){let a=[],o=l.matched?matchingMark:nonmatchingMark;return a.push(o.range(l.start.from,l.start.to)),l.end&&a.push(o.range(l.end.from,l.end.to)),a}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(l,a){if(!a.docChanged&&!a.selection)return l;let o=[],u=a.state.facet(bracketMatchingConfig);for(let p of a.state.selection.ranges){if(!p.empty)continue;let d=matchBrackets(a.state,p.head,-1,u)||p.head>0&&matchBrackets(a.state,p.head-1,1,u)||u.afterCursor&&(matchBrackets(a.state,p.head,1,u)||p.head<a.state.doc.length&&matchBrackets(a.state,p.head+1,-1,u));d&&(o=o.concat(u.renderMatch(d,a.state)))}return Decoration.set(o,!0)},provide:l=>EditorView.decorations.from(l)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$4];function bracketMatching(l={}){return[bracketMatchingConfig.of(l),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(l,a,o){let u=l.prop(a<0?NodeProp.openedBy:NodeProp.closedBy);if(u)return u;if(l.name.length==1){let p=o.indexOf(l.name);if(p>-1&&p%2==(a<0?1:0))return[o[p+a]]}return null}function findHandle(l){let a=l.type.prop(bracketMatchingHandle);return a?a(l.node):l}function matchBrackets(l,a,o,u={}){let p=u.maxScanDistance||DefaultScanDist,d=u.brackets||DefaultBrackets,f=syntaxTree(l),g=f.resolveInner(a,o);for(let b=g;b;b=b.parent){let O=matchingNodes(b.type,o,d);if(O&&b.from<b.to){let S=findHandle(b);if(S&&(o>0?a>=S.from&&a<S.to:a>S.from&&a<=S.to))return matchMarkedBrackets(l,a,o,b,S,O,d)}}return matchPlainBrackets(l,a,o,f,g.type,p,d)}function matchMarkedBrackets(l,a,o,u,p,d,f){let g=u.parent,b={from:p.from,to:p.to},O=0,S=g?.cursor();if(S&&(o<0?S.childBefore(u.from):S.childAfter(u.to)))do if(o<0?S.to<=u.from:S.from>=u.to){if(O==0&&d.indexOf(S.type.name)>-1&&S.from<S.to){let M=findHandle(S);return{start:b,end:M?{from:M.from,to:M.to}:void 0,matched:!0}}else if(matchingNodes(S.type,o,f))O++;else if(matchingNodes(S.type,-o,f)){if(O==0){let M=findHandle(S);return{start:b,end:M&&M.from<M.to?{from:M.from,to:M.to}:void 0,matched:!1}}O--}}while(o<0?S.prevSibling():S.nextSibling());return{start:b,matched:!1}}function matchPlainBrackets(l,a,o,u,p,d,f){let g=o<0?l.sliceDoc(a-1,a):l.sliceDoc(a,a+1),b=f.indexOf(g);if(b<0||b%2==0!=o>0)return null;let O={from:o<0?a-1:a,to:o>0?a+1:a},S=l.doc.iterRange(a,o>0?l.doc.length:0),M=0;for(let A=0;!S.next().done&&A<=d;){let F=S.value;o<0&&(A+=F.length);let $=a+A*o;for(let B=o>0?0:F.length-1,I=o>0?F.length:-1;B!=I;B+=o){let U=f.indexOf(F[B]);if(!(U<0||u.resolveInner($+B,1).type!=p))if(U%2==0==o>0)M++;else{if(M==1)return{start:O,end:{from:$+B,to:$+B+1},matched:U>>1==b>>1};M--}}o>0&&(A+=F.length)}return S.done?{start:O,matched:!1}:null}function countCol(l,a,o,u=0,p=0){a==null&&(a=l.search(/[^\s\u00a0]/),a==-1&&(a=l.length));let d=p;for(let f=u;f<a;f++)l.charCodeAt(f)==9?d+=o-d%o:d++;return d}class StringStream{constructor(a,o,u,p){this.string=a,this.tabSize=o,this.indentUnit=u,this.overrideIndent=p,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(a){let o=this.string.charAt(this.pos),u;if(typeof a=="string"?u=o==a:u=o&&(a instanceof RegExp?a.test(o):a(o)),u)return++this.pos,o}eatWhile(a){let o=this.pos;for(;this.eat(a););return this.pos>o}eatSpace(){let a=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a}skipToEnd(){this.pos=this.string.length}skipTo(a){let o=this.string.indexOf(a,this.pos);if(o>-1)return this.pos=o,!0}backUp(a){this.pos-=a}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countCol(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var a;return(a=this.overrideIndent)!==null&&a!==void 0?a:countCol(this.string,null,this.tabSize)}match(a,o,u){if(typeof a=="string"){let p=f=>u?f.toLowerCase():f,d=this.string.substr(this.pos,a.length);return p(d)==p(a)?(o!==!1&&(this.pos+=a.length),!0):null}else{let p=this.string.slice(this.pos).match(a);return p&&p.index>0?null:(p&&o!==!1&&(this.pos+=p[0].length),p)}}current(){return this.string.slice(this.start,this.pos)}}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[l,a]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[l]=createTokenType(noTokens,a);function warnForPart(l,a){warned.indexOf(l)>-1||(warned.push(l),console.warn(a))}function createTokenType(l,a){let o=[];for(let g of a.split(" ")){let b=[];for(let O of g.split(".")){let S=l[O]||tags[O];S?typeof S=="function"?b.length?b=b.map(S):warnForPart(O,`Modifier ${O} used at start of tag`):b.length?warnForPart(O,`Tag ${O} used as modifier`):b=Array.isArray(S)?S:[S]:warnForPart(O,`Unknown highlighting tag ${O}`)}for(let O of b)o.push(O)}if(!o.length)return 0;let u=a.replace(/ /g,"_"),p=u+" "+o.map(g=>g.id),d=byTag[p];if(d)return d.id;let f=byTag[p]=NodeType.define({id:typeArray.length,name:u,props:[styleTags({[u]:o})]});return typeArray.push(f),f.id}Direction.RTL,Direction.LTR;class CompletionContext{constructor(a,o,u,p){this.state=a,this.pos=o,this.explicit=u,this.view=p,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(a){let o=syntaxTree(this.state).resolveInner(this.pos,-1);for(;o&&a.indexOf(o.name)<0;)o=o.parent;return o?{from:o.from,to:this.pos,text:this.state.sliceDoc(o.from,this.pos),type:o.type}:null}matchBefore(a){let o=this.state.doc.lineAt(this.pos),u=Math.max(o.from,this.pos-250),p=o.text.slice(u-o.from,this.pos-o.from),d=p.search(ensureAnchor(a,!1));return d<0?null:{from:u+d,to:this.pos,text:p.slice(d)}}get aborted(){return this.abortListeners==null}addEventListener(a,o,u){a=="abort"&&this.abortListeners&&(this.abortListeners.push(o),u&&u.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(l){let a=Object.keys(l).join(""),o=/\w/.test(a);return o&&(a=a.replace(/\w/g,"")),`[${o?"\\w":""}${a.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(l){let a=Object.create(null),o=Object.create(null);for(let{label:p}of l){a[p[0]]=!0;for(let d=1;d<p.length;d++)o[p[d]]=!0}let u=toSet(a)+toSet(o)+"*$";return[new RegExp("^"+u),new RegExp(u)]}function completeFromList(l){let a=l.map(p=>typeof p=="string"?{label:p}:p),[o,u]=a.every(p=>/^\w+$/.test(p.label))?[/\w*$/,/\w+$/]:prefixMatch(a);return p=>{let d=p.matchBefore(u);return d||p.explicit?{from:d?d.from:p.pos,options:a,validFor:o}:null}}function ifNotIn(l,a){return o=>{for(let u=syntaxTree(o.state).resolveInner(o.pos,-1);u;u=u.parent){if(l.indexOf(u.name)>-1)return null;if(u.type.isTop)break}return a(o)}}class Option{constructor(a,o,u,p){this.completion=a,this.source=o,this.match=u,this.score=p}}function cur(l){return l.selection.main.from}function ensureAnchor(l,a){var o;let{source:u}=l,p=a&&u[0]!="^",d=u[u.length-1]!="$";return!p&&!d?l:new RegExp(`${p?"^":""}(?:${u})${d?"$":""}`,(o=l.flags)!==null&&o!==void 0?o:l.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(l,a,o,u){let{main:p}=l.selection,d=o-p.from,f=u-p.from;return Object.assign(Object.assign({},l.changeByRange(g=>{if(g!=p&&o!=u&&l.sliceDoc(g.from+d,g.from+f)!=l.sliceDoc(o,u))return{range:g};let b=l.toText(a);return{changes:{from:g.from+d,to:u==p.from?g.to:g.from+f,insert:b},range:EditorSelection.cursor(g.from+d+b.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const SourceCache=new WeakMap;function asSource(l){if(!Array.isArray(l))return l;let a=SourceCache.get(l);return a||SourceCache.set(l,a=completeFromList(l)),a}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(a){this.pattern=a,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let o=0;o<a.length;){let u=codePointAt(a,o),p=codePointSize(u);this.chars.push(u);let d=a.slice(o,o+p),f=d.toUpperCase();this.folded.push(codePointAt(f==d?d.toLowerCase():f,0)),o+=p}this.astral=a.length!=this.chars.length}ret(a,o){return this.score=a,this.matched=o,this}match(a){if(this.pattern.length==0)return this.ret(-100,[]);if(a.length<this.pattern.length)return null;let{chars:o,folded:u,any:p,precise:d,byWord:f}=this;if(o.length==1){let te=codePointAt(a,0),de=codePointSize(te),se=de==a.length?0:-100;if(te!=o[0])if(te==u[0])se+=-200;else return null;return this.ret(se,[0,de])}let g=a.indexOf(this.pattern);if(g==0)return this.ret(a.length==this.pattern.length?0:-100,[0,this.pattern.length]);let b=o.length,O=0;if(g<0){for(let te=0,de=Math.min(a.length,200);te<de&&O<b;){let se=codePointAt(a,te);(se==o[O]||se==u[O])&&(p[O++]=te),te+=codePointSize(se)}if(O<b)return null}let S=0,M=0,A=!1,F=0,$=-1,B=-1,I=/[a-z]/.test(a),U=!0;for(let te=0,de=Math.min(a.length,200),se=0;te<de&&M<b;){let q=codePointAt(a,te);g<0&&(S<b&&q==o[S]&&(d[S++]=te),F<b&&(q==o[F]||q==u[F]?(F==0&&($=te),B=te+1,F++):F=0));let le,fe=q<255?q>=48&&q<=57||q>=97&&q<=122?2:q>=65&&q<=90?1:0:(le=fromCodePoint(q))!=le.toLowerCase()?1:le!=le.toUpperCase()?2:0;(!te||fe==1&&I||se==0&&fe!=0)&&(o[M]==q||u[M]==q&&(A=!0)?f[M++]=te:f.length&&(U=!1)),se=fe,te+=codePointSize(q)}return M==b&&f[0]==0&&U?this.result(-100+(A?-200:0),f,a):F==b&&$==0?this.ret(-200-a.length+(B==a.length?0:-100),[0,B]):g>-1?this.ret(-700-a.length,[g,g+this.pattern.length]):F==b?this.ret(-900-a.length,[$,B]):M==b?this.result(-100+(A?-200:0)+-700+(U?0:-1100),f,a):o.length==2?null:this.result((p[0]?-700:0)+-200+-1100,p,a)}result(a,o,u){let p=[],d=0;for(let f of o){let g=f+(this.astral?codePointSize(codePointAt(u,f)):1);d&&p[d-1]==f?p[d-1]=g:(p[d++]=f,p[d++]=g)}return this.ret(a-u.length,p)}}class StrictMatcher{constructor(a){this.pattern=a,this.matched=[],this.score=0,this.folded=a.toLowerCase()}match(a){if(a.length<this.pattern.length)return null;let o=a.slice(0,this.pattern.length),u=o==this.pattern?0:o.toLowerCase()==this.folded?-200:null;return u==null?null:(this.matched=[0,o.length],this.score=u+(a.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(l){return combineConfig(l,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(a,o)=>a.label.localeCompare(o.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(a,o)=>a&&o,closeOnBlur:(a,o)=>a&&o,icons:(a,o)=>a&&o,tooltipClass:(a,o)=>u=>joinClass(a(u),o(u)),optionClass:(a,o)=>u=>joinClass(a(u),o(u)),addToOptions:(a,o)=>a.concat(o),filterStrict:(a,o)=>a||o})}});function joinClass(l,a){return l?a?l+" "+a:l:a}function defaultPositionInfo(l,a,o,u,p,d){let f=l.textDirection==Direction.RTL,g=f,b=!1,O="top",S,M,A=a.left-p.left,F=p.right-a.right,$=u.right-u.left,B=u.bottom-u.top;if(g&&A<Math.min($,F)?g=!1:!g&&F<Math.min($,A)&&(g=!0),$<=(g?A:F))S=Math.max(p.top,Math.min(o.top,p.bottom-B))-a.top,M=Math.min(400,g?A:F);else{b=!0,M=Math.min(400,(f?a.right:p.right-a.left)-30);let te=p.bottom-a.bottom;te>=B||te>a.top?S=o.bottom-a.top:(O="bottom",S=a.bottom-o.top)}let I=(a.bottom-a.top)/d.offsetHeight,U=(a.right-a.left)/d.offsetWidth;return{style:`${O}: ${S/I}px; max-width: ${M/U}px`,class:"cm-completionInfo-"+(b?f?"left-narrow":"right-narrow":g?"left":"right")}}function optionContent(l){let a=l.addToOptions.slice();return l.icons&&a.push({render(o){let u=document.createElement("div");return u.classList.add("cm-completionIcon"),o.type&&u.classList.add(...o.type.split(/\s+/g).map(p=>"cm-completionIcon-"+p)),u.setAttribute("aria-hidden","true"),u},position:20}),a.push({render(o,u,p,d){let f=document.createElement("span");f.className="cm-completionLabel";let g=o.displayLabel||o.label,b=0;for(let O=0;O<d.length;){let S=d[O++],M=d[O++];S>b&&f.appendChild(document.createTextNode(g.slice(b,S)));let A=f.appendChild(document.createElement("span"));A.appendChild(document.createTextNode(g.slice(S,M))),A.className="cm-completionMatchedText",b=M}return b<g.length&&f.appendChild(document.createTextNode(g.slice(b))),f},position:50},{render(o){if(!o.detail)return null;let u=document.createElement("span");return u.className="cm-completionDetail",u.textContent=o.detail,u},position:80}),a.sort((o,u)=>o.position-u.position).map(o=>o.render)}function rangeAroundSelected(l,a,o){if(l<=o)return{from:0,to:l};if(a<0&&(a=0),a<=l>>1){let p=Math.floor(a/o);return{from:p*o,to:(p+1)*o}}let u=Math.floor((l-a)/o);return{from:l-(u+1)*o,to:l-u*o}}class CompletionTooltip{constructor(a,o,u){this.view=a,this.stateField=o,this.applyCompletion=u,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:b=>this.placeInfo(b),key:this},this.space=null,this.currentClass="";let p=a.state.field(o),{options:d,selected:f}=p.open,g=a.state.facet(completionConfig);this.optionContent=optionContent(g),this.optionClass=g.optionClass,this.tooltipClass=g.tooltipClass,this.range=rangeAroundSelected(d.length,f,g.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(a.state),this.dom.addEventListener("mousedown",b=>{let{options:O}=a.state.field(o).open;for(let S=b.target,M;S&&S!=this.dom;S=S.parentNode)if(S.nodeName=="LI"&&(M=/-(\d+)$/.exec(S.id))&&+M[1]<O.length){this.applyCompletion(a,O[+M[1]]),b.preventDefault();return}}),this.dom.addEventListener("focusout",b=>{let O=a.state.field(this.stateField,!1);O&&O.tooltip&&a.state.facet(completionConfig).closeOnBlur&&b.relatedTarget!=a.contentDOM&&a.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(d,p.id)}mount(){this.updateSel()}showOptions(a,o){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(a,o,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(a){var o;let u=a.state.field(this.stateField),p=a.startState.field(this.stateField);if(this.updateTooltipClass(a.state),u!=p){let{options:d,selected:f,disabled:g}=u.open;(!p.open||p.open.options!=d)&&(this.range=rangeAroundSelected(d.length,f,a.state.facet(completionConfig).maxRenderedOptions),this.showOptions(d,u.id)),this.updateSel(),g!=((o=p.open)===null||o===void 0?void 0:o.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!g)}}updateTooltipClass(a){let o=this.tooltipClass(a);if(o!=this.currentClass){for(let u of this.currentClass.split(" "))u&&this.dom.classList.remove(u);for(let u of o.split(" "))u&&this.dom.classList.add(u);this.currentClass=o}}positioned(a){this.space=a,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let a=this.view.state.field(this.stateField),o=a.open;if((o.selected>-1&&o.selected<this.range.from||o.selected>=this.range.to)&&(this.range=rangeAroundSelected(o.options.length,o.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(o.options,a.id)),this.updateSelectedOption(o.selected)){this.destroyInfo();let{completion:u}=o.options[o.selected],{info:p}=u;if(!p)return;let d=typeof p=="string"?document.createTextNode(p):p(u);if(!d)return;"then"in d?d.then(f=>{f&&this.view.state.field(this.stateField,!1)==a&&this.addInfoPane(f,u)}).catch(f=>logException(this.view.state,f,"completion info")):this.addInfoPane(d,u)}}addInfoPane(a,o){this.destroyInfo();let u=this.info=document.createElement("div");if(u.className="cm-tooltip cm-completionInfo",a.nodeType!=null)u.appendChild(a),this.infoDestroy=null;else{let{dom:p,destroy:d}=a;u.appendChild(p),this.infoDestroy=d||null}this.dom.appendChild(u),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(a){let o=null;for(let u=this.list.firstChild,p=this.range.from;u;u=u.nextSibling,p++)u.nodeName!="LI"||!u.id?p--:p==a?u.hasAttribute("aria-selected")||(u.setAttribute("aria-selected","true"),o=u):u.hasAttribute("aria-selected")&&u.removeAttribute("aria-selected");return o&&scrollIntoView(this.list,o),o}measureInfo(){let a=this.dom.querySelector("[aria-selected]");if(!a||!this.info)return null;let o=this.dom.getBoundingClientRect(),u=this.info.getBoundingClientRect(),p=a.getBoundingClientRect(),d=this.space;if(!d){let f=this.dom.ownerDocument.defaultView||window;d={left:0,top:0,right:f.innerWidth,bottom:f.innerHeight}}return p.top>Math.min(d.bottom,o.bottom)-10||p.bottom<Math.max(d.top,o.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,o,p,u,d,this.dom)}placeInfo(a){this.info&&(a?(a.style&&(this.info.style.cssText=a.style),this.info.className="cm-tooltip cm-completionInfo "+(a.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(a,o,u){const p=document.createElement("ul");p.id=o,p.setAttribute("role","listbox"),p.setAttribute("aria-expanded","true"),p.setAttribute("aria-label",this.view.state.phrase("Completions"));let d=null;for(let f=u.from;f<u.to;f++){let{completion:g,match:b}=a[f],{section:O}=g;if(O){let A=typeof O=="string"?O:O.name;if(A!=d&&(f>u.from||u.from==0))if(d=A,typeof O!="string"&&O.header)p.appendChild(O.header(O));else{let F=p.appendChild(document.createElement("completion-section"));F.textContent=A}}const S=p.appendChild(document.createElement("li"));S.id=o+"-"+f,S.setAttribute("role","option");let M=this.optionClass(g);M&&(S.className=M);for(let A of this.optionContent){let F=A(g,this.view.state,this.view,b);F&&S.appendChild(F)}}return u.from&&p.classList.add("cm-completionListIncompleteTop"),u.to<a.length&&p.classList.add("cm-completionListIncompleteBottom"),p}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(l,a){return o=>new CompletionTooltip(o,l,a)}function scrollIntoView(l,a){let o=l.getBoundingClientRect(),u=a.getBoundingClientRect(),p=o.height/l.offsetHeight;u.top<o.top?l.scrollTop-=(o.top-u.top)/p:u.bottom>o.bottom&&(l.scrollTop+=(u.bottom-o.bottom)/p)}function score(l){return(l.boost||0)*100+(l.apply?10:0)+(l.info?5:0)+(l.type?1:0)}function sortOptions(l,a){let o=[],u=null,p=O=>{o.push(O);let{section:S}=O.completion;if(S){u||(u=[]);let M=typeof S=="string"?S:S.name;u.some(A=>A.name==M)||u.push(typeof S=="string"?{name:M}:S)}},d=a.facet(completionConfig);for(let O of l)if(O.hasResult()){let S=O.result.getMatch;if(O.result.filter===!1)for(let M of O.result.options)p(new Option(M,O.source,S?S(M):[],1e9-o.length));else{let M=a.sliceDoc(O.from,O.to),A,F=d.filterStrict?new StrictMatcher(M):new FuzzyMatcher(M);for(let $ of O.result.options)if(A=F.match($.label)){let B=$.displayLabel?S?S($,A.matched):[]:A.matched;p(new Option($,O.source,B,A.score+($.boost||0)))}}}if(u){let O=Object.create(null),S=0,M=(A,F)=>{var $,B;return(($=A.rank)!==null&&$!==void 0?$:1e9)-((B=F.rank)!==null&&B!==void 0?B:1e9)||(A.name<F.name?-1:1)};for(let A of u.sort(M))S-=1e5,O[A.name]=S;for(let A of o){let{section:F}=A.completion;F&&(A.score+=O[typeof F=="string"?F:F.name])}}let f=[],g=null,b=d.compareCompletions;for(let O of o.sort((S,M)=>M.score-S.score||b(S.completion,M.completion))){let S=O.completion;!g||g.label!=S.label||g.detail!=S.detail||g.type!=null&&S.type!=null&&g.type!=S.type||g.apply!=S.apply||g.boost!=S.boost?f.push(O):score(O.completion)>score(g)&&(f[f.length-1]=O),g=O.completion}return f}class CompletionDialog{constructor(a,o,u,p,d,f){this.options=a,this.attrs=o,this.tooltip=u,this.timestamp=p,this.selected=d,this.disabled=f}setSelected(a,o){return a==this.selected||a>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(o,a),this.tooltip,this.timestamp,a,this.disabled)}static build(a,o,u,p,d,f){if(p&&!f&&a.some(O=>O.isPending))return p.setDisabled();let g=sortOptions(a,o);if(!g.length)return p&&a.some(O=>O.isPending)?p.setDisabled():null;let b=o.facet(completionConfig).selectOnOpen?0:-1;if(p&&p.selected!=b&&p.selected!=-1){let O=p.options[p.selected].completion;for(let S=0;S<g.length;S++)if(g[S].completion==O){b=S;break}}return new CompletionDialog(g,makeAttrs(u,b),{pos:a.reduce((O,S)=>S.hasResult()?Math.min(O,S.from):O,1e8),create:createTooltip,above:d.aboveCursor},p?p.timestamp:Date.now(),b,!1)}map(a){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:a.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(a,o,u){this.active=a,this.id=o,this.open=u}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(a){let{state:o}=a,u=o.facet(completionConfig),d=(u.override||o.languageDataAt("autocomplete",cur(o)).map(asSource)).map(b=>(this.active.find(S=>S.source==b)||new ActiveSource(b,this.active.some(S=>S.state!=0)?1:0)).update(a,u));d.length==this.active.length&&d.every((b,O)=>b==this.active[O])&&(d=this.active);let f=this.open,g=a.effects.some(b=>b.is(setActiveEffect));f&&a.docChanged&&(f=f.map(a.changes)),a.selection||d.some(b=>b.hasResult()&&a.changes.touchesRange(b.from,b.to))||!sameResults(d,this.active)||g?f=CompletionDialog.build(d,o,this.id,f,u,g):f&&f.disabled&&!d.some(b=>b.isPending)&&(f=null),!f&&d.every(b=>!b.isPending)&&d.some(b=>b.hasResult())&&(d=d.map(b=>b.hasResult()?new ActiveSource(b.source,0):b));for(let b of a.effects)b.is(setSelectedEffect)&&(f=f&&f.setSelected(b.value,this.id));return d==this.active&&f==this.open?this:new CompletionState(d,this.id,f)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(l,a){if(l==a)return!0;for(let o=0,u=0;;){for(;o<l.length&&!l[o].hasResult();)o++;for(;u<a.length&&!a[u].hasResult();)u++;let p=o==l.length,d=u==a.length;if(p||d)return p==d;if(l[o++].result!=a[u++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(l,a){let o={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":l};return a>-1&&(o["aria-activedescendant"]=l+"-"+a),o}const none$1=[];function getUpdateType(l,a){if(l.isUserEvent("input.complete")){let u=l.annotation(pickedCompletion);if(u&&a.activateOnCompletion(u))return 12}let o=l.isUserEvent("input.type");return o&&a.activateOnTyping?5:o?1:l.isUserEvent("delete.backward")?2:l.selection?8:l.docChanged?16:0}class ActiveSource{constructor(a,o,u=!1){this.source=a,this.state=o,this.explicit=u}hasResult(){return!1}get isPending(){return this.state==1}update(a,o){let u=getUpdateType(a,o),p=this;(u&8||u&16&&this.touches(a))&&(p=new ActiveSource(p.source,0)),u&4&&p.state==0&&(p=new ActiveSource(this.source,1)),p=p.updateFor(a,u);for(let d of a.effects)if(d.is(startCompletionEffect))p=new ActiveSource(p.source,1,d.value);else if(d.is(closeCompletionEffect))p=new ActiveSource(p.source,0);else if(d.is(setActiveEffect))for(let f of d.value)f.source==p.source&&(p=f);return p}updateFor(a,o){return this.map(a.changes)}map(a){return this}touches(a){return a.changes.touchesRange(cur(a.state))}}class ActiveResult extends ActiveSource{constructor(a,o,u,p,d,f){super(a,3,o),this.limit=u,this.result=p,this.from=d,this.to=f}hasResult(){return!0}updateFor(a,o){var u;if(!(o&3))return this.map(a.changes);let p=this.result;p.map&&!a.changes.empty&&(p=p.map(p,a.changes));let d=a.changes.mapPos(this.from),f=a.changes.mapPos(this.to,1),g=cur(a.state);if(g>f||!p||o&2&&(cur(a.startState)==this.from||g<this.limit))return new ActiveSource(this.source,o&4?1:0);let b=a.changes.mapPos(this.limit);return checkValid(p.validFor,a.state,d,f)?new ActiveResult(this.source,this.explicit,b,p,d,f):p.update&&(p=p.update(p,d,f,new CompletionContext(a.state,g,!1)))?new ActiveResult(this.source,this.explicit,b,p,p.from,(u=p.to)!==null&&u!==void 0?u:cur(a.state)):new ActiveSource(this.source,1,this.explicit)}map(a){return a.empty?this:(this.result.map?this.result.map(this.result,a):this.result)?new ActiveResult(this.source,this.explicit,a.mapPos(this.limit),this.result,a.mapPos(this.from),a.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(a){return a.changes.touchesRange(this.from,this.to)}}function checkValid(l,a,o,u){if(!l)return!1;let p=a.sliceDoc(o,u);return typeof l=="function"?l(p,o,u,a):ensureAnchor(l,!0).test(p)}const setActiveEffect=StateEffect.define({map(l,a){return l.map(o=>o.map(a))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(l,a){return l.update(a)},provide:l=>[showTooltip.from(l,a=>a.tooltip),EditorView.contentAttributes.from(l,a=>a.attrs)]});function applyCompletion(l,a){const o=a.completion.apply||a.completion.label;let u=l.state.field(completionState).active.find(p=>p.source==a.source);return u instanceof ActiveResult?(typeof o=="string"?l.dispatch(Object.assign(Object.assign({},insertCompletionText(l.state,o,u.from,u.to)),{annotations:pickedCompletion.of(a.completion)})):o(l,a.completion,u.from,u.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(l,a="option"){return o=>{let u=o.state.field(completionState,!1);if(!u||!u.open||u.open.disabled||Date.now()-u.open.timestamp<o.state.facet(completionConfig).interactionDelay)return!1;let p=1,d;a=="page"&&(d=getTooltip(o,u.open.tooltip))&&(p=Math.max(2,Math.floor(d.dom.offsetHeight/d.dom.querySelector("li").offsetHeight)-1));let{length:f}=u.open.options,g=u.open.selected>-1?u.open.selected+p*(l?1:-1):l?0:f-1;return g<0?g=a=="page"?0:f-1:g>=f&&(g=a=="page"?f-1:0),o.dispatch({effects:setSelectedEffect.of(g)}),!0}}const acceptCompletion=l=>{let a=l.state.field(completionState,!1);return l.state.readOnly||!a||!a.open||a.open.selected<0||a.open.disabled||Date.now()-a.open.timestamp<l.state.facet(completionConfig).interactionDelay?!1:applyCompletion(l,a.open.options[a.open.selected])},startCompletion=l=>l.state.field(completionState,!1)?(l.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=l=>{let a=l.state.field(completionState,!1);return!a||!a.active.some(o=>o.state!=0)?!1:(l.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(a,o){this.active=a,this.context=o,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(l){this.view=l,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let a of l.state.field(completionState).active)a.isPending&&this.startQuery(a)}update(l){let a=l.state.field(completionState),o=l.state.facet(completionConfig);if(!l.selectionSet&&!l.docChanged&&l.startState.field(completionState)==a)return;let u=l.transactions.some(d=>{let f=getUpdateType(d,o);return f&8||(d.selection||d.docChanged)&&!(f&3)});for(let d=0;d<this.running.length;d++){let f=this.running[d];if(u||f.context.abortOnDocChange&&l.docChanged||f.updates.length+l.transactions.length>MaxUpdateCount&&Date.now()-f.time>MinAbortTime){for(let g of f.context.abortListeners)try{g()}catch(b){logException(this.view.state,b)}f.context.abortListeners=null,this.running.splice(d--,1)}else f.updates.push(...l.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),l.transactions.some(d=>d.effects.some(f=>f.is(startCompletionEffect)))&&(this.pendingStart=!0);let p=this.pendingStart?50:o.activateOnTypingDelay;if(this.debounceUpdate=a.active.some(d=>d.isPending&&!this.running.some(f=>f.active.source==d.source))?setTimeout(()=>this.startUpdate(),p):-1,this.composing!=0)for(let d of l.transactions)d.isUserEvent("input.type")?this.composing=2:this.composing==2&&d.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:l}=this.view,a=l.field(completionState);for(let o of a.active)o.isPending&&!this.running.some(u=>u.active.source==o.source)&&this.startQuery(o);this.running.length&&a.open&&a.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(l){let{state:a}=this.view,o=cur(a),u=new CompletionContext(a,o,l.explicit,this.view),p=new RunningQuery(l,u);this.running.push(p),Promise.resolve(l.source(u)).then(d=>{p.context.aborted||(p.done=d||null,this.scheduleAccept())},d=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,d)})}scheduleAccept(){this.running.every(l=>l.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var l;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let a=[],o=this.view.state.facet(completionConfig),u=this.view.state.field(completionState);for(let p=0;p<this.running.length;p++){let d=this.running[p];if(d.done===void 0)continue;if(this.running.splice(p--,1),d.done){let g=cur(d.updates.length?d.updates[0].startState:this.view.state),b=Math.min(g,d.done.from+(d.active.explicit?0:1)),O=new ActiveResult(d.active.source,d.active.explicit,b,d.done,d.done.from,(l=d.done.to)!==null&&l!==void 0?l:g);for(let S of d.updates)O=O.update(S,o);if(O.hasResult()){a.push(O);continue}}let f=u.active.find(g=>g.source==d.active.source);if(f&&f.isPending)if(d.done==null){let g=new ActiveSource(d.active.source,0);for(let b of d.updates)g=g.update(b,o);g.isPending||a.push(g)}else this.startQuery(f)}(a.length||u.open&&u.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(a)})}},{eventHandlers:{blur(l){let a=this.view.state.field(completionState,!1);if(a&&a.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let o=a.open&&getTooltip(this.view,a.open.tooltip);(!o||!o.dom.contains(l.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(l,a){let o=a.state.field(completionState,!1);if(!o||!o.open||o.open.disabled||o.open.selected<0||l.key.length>1||l.ctrlKey&&!(windows&&l.altKey)||l.metaKey)return!1;let u=o.open.options[o.open.selected],p=o.active.find(f=>f.source==u.source),d=u.completion.commitCharacters||p.result.commitCharacters;return d&&d.indexOf(l.key)>-1&&applyCompletion(a,u),!1}})),baseTheme$3=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(a,o,u,p){this.field=a,this.line=o,this.from=u,this.to=p}}class FieldRange{constructor(a,o,u){this.field=a,this.from=o,this.to=u}map(a){let o=a.mapPos(this.from,-1,MapMode.TrackDel),u=a.mapPos(this.to,1,MapMode.TrackDel);return o==null||u==null?null:new FieldRange(this.field,o,u)}}class Snippet{constructor(a,o){this.lines=a,this.fieldPositions=o}instantiate(a,o){let u=[],p=[o],d=a.doc.lineAt(o),f=/^\s*/.exec(d.text)[0];for(let b of this.lines){if(u.length){let O=f,S=/^\t*/.exec(b)[0].length;for(let M=0;M<S;M++)O+=a.facet(indentUnit);p.push(o+O.length-S),b=O+b.slice(S)}u.push(b),o+=b.length+1}let g=this.fieldPositions.map(b=>new FieldRange(b.field,p[b.line]+b.from,p[b.line]+b.to));return{text:u,ranges:g}}static parse(a){let o=[],u=[],p=[],d;for(let f of a.split(/\r\n?|\n/)){for(;d=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(f);){let g=d[1]?+d[1]:null,b=d[2]||d[3]||"",O=-1,S=b.replace(/\\[{}]/g,M=>M[1]);for(let M=0;M<o.length;M++)(g!=null?o[M].seq==g:S&&o[M].name==S)&&(O=M);if(O<0){let M=0;for(;M<o.length&&(g==null||o[M].seq!=null&&o[M].seq<g);)M++;o.splice(M,0,{seq:g,name:S}),O=M;for(let A of p)A.field>=O&&A.field++}p.push(new FieldPos(O,u.length,d.index,d.index+S.length)),f=f.slice(0,d.index)+b+f.slice(d.index+d[0].length)}f=f.replace(/\\([{}])/g,(g,b,O)=>{for(let S of p)S.line==u.length&&S.from>O&&(S.from--,S.to--);return b}),u.push(f)}return new Snippet(u,p)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let l=document.createElement("span");return l.className="cm-snippetFieldPosition",l}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(a,o){this.ranges=a,this.active=o,this.deco=Decoration.set(a.map(u=>(u.from==u.to?fieldMarker:fieldRange).range(u.from,u.to)))}map(a){let o=[];for(let u of this.ranges){let p=u.map(a);if(!p)return null;o.push(p)}return new ActiveSnippet(o,this.active)}selectionInsideField(a){return a.ranges.every(o=>this.ranges.some(u=>u.field==this.active&&u.from<=o.from&&u.to>=o.to))}}const setActive=StateEffect.define({map(l,a){return l&&l.map(a)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(l,a){for(let o of a.effects){if(o.is(setActive))return o.value;if(o.is(moveToField)&&l)return new ActiveSnippet(l.ranges,o.value)}return l&&a.docChanged&&(l=l.map(a.changes)),l&&a.selection&&!l.selectionInsideField(a.selection)&&(l=null),l},provide:l=>EditorView.decorations.from(l,a=>a?a.deco:Decoration.none)});function fieldSelection(l,a){return EditorSelection.create(l.filter(o=>o.field==a).map(o=>EditorSelection.range(o.from,o.to)))}function snippet(l){let a=Snippet.parse(l);return(o,u,p,d)=>{let{text:f,ranges:g}=a.instantiate(o.state,p),{main:b}=o.state.selection,O={changes:{from:p,to:d==b.from?b.to:d,insert:Text$1.of(f)},scrollIntoView:!0,annotations:u?[pickedCompletion.of(u),Transaction.userEvent.of("input.complete")]:void 0};if(g.length&&(O.selection=fieldSelection(g,0)),g.some(S=>S.field>0)){let S=new ActiveSnippet(g,0),M=O.effects=[setActive.of(S)];o.state.field(snippetState,!1)===void 0&&M.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$3]))}o.dispatch(o.state.update(O))}}function moveField(l){return({state:a,dispatch:o})=>{let u=a.field(snippetState,!1);if(!u||l<0&&u.active==0)return!1;let p=u.active+l,d=l>0&&!u.ranges.some(f=>f.field==p+l);return o(a.update({selection:fieldSelection(u.ranges,p),effects:setActive.of(d?null:new ActiveSnippet(u.ranges,p)),scrollIntoView:!0})),!0}}const clearSnippet=({state:l,dispatch:a})=>l.field(snippetState,!1)?(a(l.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(l){return l.length?l[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],l=>l.facet(snippetKeymap)));function snippetCompletion(l,a){return Object.assign(Object.assign({},a),{apply:snippet(l)})}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(l,a){let o=a.state.field(snippetState,!1),u;if(!o||(u=a.posAtCoords({x:l.clientX,y:l.clientY}))==null)return!1;let p=o.ranges.find(d=>d.from<=u&&d.to>=u);return!p||p.field==o.active?!1:(a.dispatch({selection:fieldSelection(o.ranges,p.field),effects:setActive.of(o.ranges.some(d=>d.field>p.field)?new ActiveSnippet(o.ranges,p.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(l,a){let o=a.mapPos(l,-1,MapMode.TrackAfter);return o??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1,closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(l,a){if(l=l.map(a.changes),a.selection){let o=a.state.doc.lineAt(a.selection.main.head);l=l.update({filter:u=>u>=o.from&&u<=o.to})}for(let o of a.effects)o.is(closeBracketEffect)&&(l=l.update({add:[closedBracket.range(o.value,o.value+1)]}));return l}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(l){for(let a=0;a<definedClosing.length;a+=2)if(definedClosing.charCodeAt(a)==l)return definedClosing.charAt(a+1);return fromCodePoint(l<128?l:l+1)}function config(l,a){return l.languageDataAt("closeBrackets",a)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((l,a,o,u)=>{if((android$1?l.composing:l.compositionStarted)||l.state.readOnly)return!1;let p=l.state.selection.main;if(u.length>2||u.length==2&&codePointSize(codePointAt(u,0))==1||a!=p.from||o!=p.to)return!1;let d=insertBracket(l.state,u);return d?(l.dispatch(d),!0):!1}),deleteBracketPair=({state:l,dispatch:a})=>{if(l.readOnly)return!1;let u=config(l,l.selection.main.head).brackets||defaults.brackets,p=null,d=l.changeByRange(f=>{if(f.empty){let g=prevChar(l.doc,f.head);for(let b of u)if(b==g&&nextChar(l.doc,f.head)==closing(codePointAt(b,0)))return{changes:{from:f.head-b.length,to:f.head+b.length},range:EditorSelection.cursor(f.head-b.length)}}return{range:p=f}});return p||a(l.update(d,{scrollIntoView:!0,userEvent:"delete.backward"})),!p},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(l,a){let o=config(l,l.selection.main.head),u=o.brackets||defaults.brackets;for(let p of u){let d=closing(codePointAt(p,0));if(a==p)return d==p?handleSame(l,p,u.indexOf(p+p+p)>-1,o):handleOpen(l,p,d,o.before||defaults.before);if(a==d&&closedBracketAt(l,l.selection.main.from))return handleClose(l,p,d)}return null}function closedBracketAt(l,a){let o=!1;return l.field(bracketState).between(0,l.doc.length,u=>{u==a&&(o=!0)}),o}function nextChar(l,a){let o=l.sliceString(a,a+2);return o.slice(0,codePointSize(codePointAt(o,0)))}function prevChar(l,a){let o=l.sliceString(a-2,a);return codePointSize(codePointAt(o,0))==o.length?o:o.slice(1)}function handleOpen(l,a,o,u){let p=null,d=l.changeByRange(f=>{if(!f.empty)return{changes:[{insert:a,from:f.from},{insert:o,from:f.to}],effects:closeBracketEffect.of(f.to+a.length),range:EditorSelection.range(f.anchor+a.length,f.head+a.length)};let g=nextChar(l.doc,f.head);return!g||/\s/.test(g)||u.indexOf(g)>-1?{changes:{insert:a+o,from:f.head},effects:closeBracketEffect.of(f.head+a.length),range:EditorSelection.cursor(f.head+a.length)}:{range:p=f}});return p?null:l.update(d,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(l,a,o){let u=null,p=l.changeByRange(d=>d.empty&&nextChar(l.doc,d.head)==o?{changes:{from:d.head,to:d.head+o.length,insert:o},range:EditorSelection.cursor(d.head+o.length)}:u={range:d});return u?null:l.update(p,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(l,a,o,u){let p=u.stringPrefixes||defaults.stringPrefixes,d=null,f=l.changeByRange(g=>{if(!g.empty)return{changes:[{insert:a,from:g.from},{insert:a,from:g.to}],effects:closeBracketEffect.of(g.to+a.length),range:EditorSelection.range(g.anchor+a.length,g.head+a.length)};let b=g.head,O=nextChar(l.doc,b),S;if(O==a){if(nodeStart(l,b))return{changes:{insert:a+a,from:b},effects:closeBracketEffect.of(b+a.length),range:EditorSelection.cursor(b+a.length)};if(closedBracketAt(l,b)){let A=o&&l.sliceDoc(b,b+a.length*3)==a+a+a?a+a+a:a;return{changes:{from:b,to:b+A.length,insert:A},range:EditorSelection.cursor(b+A.length)}}}else{if(o&&l.sliceDoc(b-2*a.length,b)==a+a&&(S=canStartStringAt(l,b-2*a.length,p))>-1&&nodeStart(l,S))return{changes:{insert:a+a+a+a,from:b},effects:closeBracketEffect.of(b+a.length),range:EditorSelection.cursor(b+a.length)};if(l.charCategorizer(b)(O)!=CharCategory.Word&&canStartStringAt(l,b,p)>-1&&!probablyInString(l,b,a,p))return{changes:{insert:a+a,from:b},effects:closeBracketEffect.of(b+a.length),range:EditorSelection.cursor(b+a.length)}}return{range:d=g}});return d?null:l.update(f,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(l,a){let o=syntaxTree(l).resolveInner(a+1);return o.parent&&o.from==a}function probablyInString(l,a,o,u){let p=syntaxTree(l).resolveInner(a,-1),d=u.reduce((f,g)=>Math.max(f,g.length),0);for(let f=0;f<5;f++){let g=l.sliceDoc(p.from,Math.min(p.to,p.from+o.length+d)),b=g.indexOf(o);if(!b||b>-1&&u.indexOf(g.slice(0,b))>-1){let S=p.firstChild;for(;S&&S.from==p.from&&S.to-S.from>o.length+b;){if(l.sliceDoc(S.to-o.length,S.to)==o)return!1;S=S.firstChild}return!0}let O=p.to==a&&p.parent;if(!O)break;p=O}return!1}function canStartStringAt(l,a,o){let u=l.charCategorizer(a);if(u(l.sliceDoc(a-1,a))!=CharCategory.Word)return a;for(let p of o){let d=a-p.length;if(l.sliceDoc(d,a)==p&&u(l.sliceDoc(d-1,d))!=CharCategory.Word)return d}return-1}function autocompletion(l={}){return[commitCharacters,completionState,completionConfig.of(l),completionPlugin,completionKeymapExt,baseTheme$3]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],l=>l.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));function completionStatus(l){let a=l.field(completionState,!1);return a&&a.active.some(o=>o.isPending)?"pending":a&&a.active.some(o=>o.state!=0)?"active":null}const toggleComment=l=>{let{state:a}=l,o=a.doc.lineAt(a.selection.main.from),u=getConfig(l.state,o.from);return u.line?toggleLineComment(l):u.block?toggleBlockCommentByLine(l):!1};function command(l,a){return({state:o,dispatch:u})=>{if(o.readOnly)return!1;let p=l(a,o);return p?(u(o.update(p)),!0):!1}}const toggleLineComment=command(changeLineComment,0),lineComment=command(changeLineComment,1),lineUncomment=command(changeLineComment,2),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((l,a)=>changeBlockComment(l,a,selectedLineRanges(a)),0);function getConfig(l,a){let o=l.languageDataAt("commentTokens",a);return o.length?o[0]:{}}const SearchMargin=50;function findBlockComment(l,{open:a,close:o},u,p){let d=l.sliceDoc(u-SearchMargin,u),f=l.sliceDoc(p,p+SearchMargin),g=/\s*$/.exec(d)[0].length,b=/^\s*/.exec(f)[0].length,O=d.length-g;if(d.slice(O-a.length,O)==a&&f.slice(b,b+o.length)==o)return{open:{pos:u-g,margin:g&&1},close:{pos:p+b,margin:b&&1}};let S,M;p-u<=2*SearchMargin?S=M=l.sliceDoc(u,p):(S=l.sliceDoc(u,u+SearchMargin),M=l.sliceDoc(p-SearchMargin,p));let A=/^\s*/.exec(S)[0].length,F=/\s*$/.exec(M)[0].length,$=M.length-F-o.length;return S.slice(A,A+a.length)==a&&M.slice($,$+o.length)==o?{open:{pos:u+A+a.length,margin:/\s/.test(S.charAt(A+a.length))?1:0},close:{pos:p-F-o.length,margin:/\s/.test(M.charAt($-1))?1:0}}:null}function selectedLineRanges(l){let a=[];for(let o of l.selection.ranges){let u=l.doc.lineAt(o.from),p=o.to<=u.to?u:l.doc.lineAt(o.to);p.from>u.from&&p.from==o.to&&(p=o.to==u.to+1?u:l.doc.lineAt(o.to-1));let d=a.length-1;d>=0&&a[d].to>u.from?a[d].to=p.to:a.push({from:u.from+/^\s*/.exec(u.text)[0].length,to:p.to})}return a}function changeBlockComment(l,a,o=a.selection.ranges){let u=o.map(d=>getConfig(a,d.from).block);if(!u.every(d=>d))return null;let p=o.map((d,f)=>findBlockComment(a,u[f],d.from,d.to));if(l!=2&&!p.every(d=>d))return{changes:a.changes(o.map((d,f)=>p[f]?[]:[{from:d.from,insert:u[f].open+" "},{from:d.to,insert:" "+u[f].close}]))};if(l!=1&&p.some(d=>d)){let d=[];for(let f=0,g;f<p.length;f++)if(g=p[f]){let b=u[f],{open:O,close:S}=g;d.push({from:O.pos-b.open.length,to:O.pos+O.margin},{from:S.pos-S.margin,to:S.pos+b.close.length})}return{changes:d}}return null}function changeLineComment(l,a,o=a.selection.ranges){let u=[],p=-1;for(let{from:d,to:f}of o){let g=u.length,b=1e9,O=getConfig(a,d).line;if(O){for(let S=d;S<=f;){let M=a.doc.lineAt(S);if(M.from>p&&(d==f||f>M.from)){p=M.from;let A=/^\s*/.exec(M.text)[0].length,F=A==M.length,$=M.text.slice(A,A+O.length)==O?A:-1;A<M.text.length&&A<b&&(b=A),u.push({line:M,comment:$,token:O,indent:A,empty:F,single:!1})}S=M.to+1}if(b<1e9)for(let S=g;S<u.length;S++)u[S].indent<u[S].line.text.length&&(u[S].indent=b);u.length==g+1&&(u[g].single=!0)}}if(l!=2&&u.some(d=>d.comment<0&&(!d.empty||d.single))){let d=[];for(let{line:g,token:b,indent:O,empty:S,single:M}of u)(M||!S)&&d.push({from:g.from+O,insert:b+" "});let f=a.changes(d);return{changes:f,selection:a.selection.map(f,1)}}else if(l!=1&&u.some(d=>d.comment>=0)){let d=[];for(let{line:f,comment:g,token:b}of u)if(g>=0){let O=f.from+g,S=O+b.length;f.text[S-f.from]==" "&&S++,d.push({from:O,to:S})}return{changes:d}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(l){return combineConfig(l,{minDepth:100,newGroupDelay:500,joinToEvent:(a,o)=>o},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(a,o)=>(u,p)=>a(u,p)||o(u,p)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(l,a){let o=a.state.facet(historyConfig),u=a.annotation(fromHistory);if(u){let b=HistEvent.fromTransaction(a,u.selection),O=u.side,S=O==0?l.undone:l.done;return b?S=updateBranch(S,S.length,o.minDepth,b):S=addSelection(S,a.startState.selection),new HistoryState(O==0?u.rest:S,O==0?S:u.rest)}let p=a.annotation(isolateHistory);if((p=="full"||p=="before")&&(l=l.isolate()),a.annotation(Transaction.addToHistory)===!1)return a.changes.empty?l:l.addMapping(a.changes.desc);let d=HistEvent.fromTransaction(a),f=a.annotation(Transaction.time),g=a.annotation(Transaction.userEvent);return d?l=l.addChanges(d,f,g,o,a):a.selection&&(l=l.addSelection(a.startState.selection,f,g,o.newGroupDelay)),(p=="full"||p=="after")&&(l=l.isolate()),l},toJSON(l){return{done:l.done.map(a=>a.toJSON()),undone:l.undone.map(a=>a.toJSON())}},fromJSON(l){return new HistoryState(l.done.map(HistEvent.fromJSON),l.undone.map(HistEvent.fromJSON))}});function history(l={}){return[historyField_,historyConfig.of(l),EditorView.domEventHandlers({beforeinput(a,o){let u=a.inputType=="historyUndo"?undo:a.inputType=="historyRedo"?redo:null;return u?(a.preventDefault(),u(o)):!1}})]}function cmd(l,a){return function({state:o,dispatch:u}){if(!a&&o.readOnly)return!1;let p=o.field(historyField_,!1);if(!p)return!1;let d=p.pop(l,o,a);return d?(u(d),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(a,o,u,p,d){this.changes=a,this.effects=o,this.mapped=u,this.startSelection=p,this.selectionsAfter=d}setSelAfter(a){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,a)}toJSON(){var a,o,u;return{changes:(a=this.changes)===null||a===void 0?void 0:a.toJSON(),mapped:(o=this.mapped)===null||o===void 0?void 0:o.toJSON(),startSelection:(u=this.startSelection)===null||u===void 0?void 0:u.toJSON(),selectionsAfter:this.selectionsAfter.map(p=>p.toJSON())}}static fromJSON(a){return new HistEvent(a.changes&&ChangeSet.fromJSON(a.changes),[],a.mapped&&ChangeDesc.fromJSON(a.mapped),a.startSelection&&EditorSelection.fromJSON(a.startSelection),a.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(a,o){let u=none;for(let p of a.startState.facet(invertedEffects)){let d=p(a);d.length&&(u=u.concat(d))}return!u.length&&a.changes.empty?null:new HistEvent(a.changes.invert(a.startState.doc),u,void 0,o||a.startState.selection,none)}static selection(a){return new HistEvent(void 0,none,void 0,void 0,a)}}function updateBranch(l,a,o,u){let p=a+1>o+20?a-o-1:0,d=l.slice(p,a);return d.push(u),d}function isAdjacent(l,a){let o=[],u=!1;return l.iterChangedRanges((p,d)=>o.push(p,d)),a.iterChangedRanges((p,d,f,g)=>{for(let b=0;b<o.length;){let O=o[b++],S=o[b++];g>=O&&f<=S&&(u=!0)}}),u}function eqSelectionShape(l,a){return l.ranges.length==a.ranges.length&&l.ranges.filter((o,u)=>o.empty!=a.ranges[u].empty).length===0}function conc(l,a){return l.length?a.length?l.concat(a):l:a}const none=[],MaxSelectionsPerEvent=200;function addSelection(l,a){if(l.length){let o=l[l.length-1],u=o.selectionsAfter.slice(Math.max(0,o.selectionsAfter.length-MaxSelectionsPerEvent));return u.length&&u[u.length-1].eq(a)?l:(u.push(a),updateBranch(l,l.length-1,1e9,o.setSelAfter(u)))}else return[HistEvent.selection([a])]}function popSelection(l){let a=l[l.length-1],o=l.slice();return o[l.length-1]=a.setSelAfter(a.selectionsAfter.slice(0,a.selectionsAfter.length-1)),o}function addMappingToBranch(l,a){if(!l.length)return l;let o=l.length,u=none;for(;o;){let p=mapEvent(l[o-1],a,u);if(p.changes&&!p.changes.empty||p.effects.length){let d=l.slice(0,o);return d[o-1]=p,d}else a=p.mapped,o--,u=p.selectionsAfter}return u.length?[HistEvent.selection(u)]:none}function mapEvent(l,a,o){let u=conc(l.selectionsAfter.length?l.selectionsAfter.map(g=>g.map(a)):none,o);if(!l.changes)return HistEvent.selection(u);let p=l.changes.map(a),d=a.mapDesc(l.changes,!0),f=l.mapped?l.mapped.composeDesc(d):d;return new HistEvent(p,StateEffect.mapEffects(l.effects,a),f,l.startSelection.map(d),u)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(a,o,u=0,p=void 0){this.done=a,this.undone=o,this.prevTime=u,this.prevUserEvent=p}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(a,o,u,p,d){let f=this.done,g=f[f.length-1];return g&&g.changes&&!g.changes.empty&&a.changes&&(!u||joinableUserEvent.test(u))&&(!g.selectionsAfter.length&&o-this.prevTime<p.newGroupDelay&&p.joinToEvent(d,isAdjacent(g.changes,a.changes))||u=="input.type.compose")?f=updateBranch(f,f.length-1,p.minDepth,new HistEvent(a.changes.compose(g.changes),conc(StateEffect.mapEffects(a.effects,g.changes),g.effects),g.mapped,g.startSelection,none)):f=updateBranch(f,f.length,p.minDepth,a),new HistoryState(f,none,o,u)}addSelection(a,o,u,p){let d=this.done.length?this.done[this.done.length-1].selectionsAfter:none;return d.length>0&&o-this.prevTime<p&&u==this.prevUserEvent&&u&&/^select($|\.)/.test(u)&&eqSelectionShape(d[d.length-1],a)?this:new HistoryState(addSelection(this.done,a),this.undone,o,u)}addMapping(a){return new HistoryState(addMappingToBranch(this.done,a),addMappingToBranch(this.undone,a),this.prevTime,this.prevUserEvent)}pop(a,o,u){let p=a==0?this.done:this.undone;if(p.length==0)return null;let d=p[p.length-1],f=d.selectionsAfter[0]||o.selection;if(u&&d.selectionsAfter.length)return o.update({selection:d.selectionsAfter[d.selectionsAfter.length-1],annotations:fromHistory.of({side:a,rest:popSelection(p),selection:f}),userEvent:a==0?"select.undo":"select.redo",scrollIntoView:!0});if(d.changes){let g=p.length==1?none:p.slice(0,p.length-1);return d.mapped&&(g=addMappingToBranch(g,d.mapped)),o.update({changes:d.changes,selection:d.startSelection,effects:d.effects,annotations:fromHistory.of({side:a,rest:g,selection:f}),filter:!1,userEvent:a==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none,none);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(l,a){return EditorSelection.create(l.ranges.map(a),l.mainIndex)}function setSel(l,a){return l.update({selection:a,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:l,dispatch:a},o){let u=updateSel(l.selection,o);return u.eq(l.selection,!0)?!1:(a(setSel(l,u)),!0)}function rangeEnd(l,a){return EditorSelection.cursor(a?l.to:l.from)}function cursorByChar(l,a){return moveSel(l,o=>o.empty?l.moveByChar(o,a):rangeEnd(o,a))}function ltrAtCursor(l){return l.textDirectionAt(l.state.selection.main.head)==Direction.LTR}const cursorCharLeft=l=>cursorByChar(l,!ltrAtCursor(l)),cursorCharRight=l=>cursorByChar(l,ltrAtCursor(l)),cursorCharBackward=l=>cursorByChar(l,!1);function cursorByGroup(l,a){return moveSel(l,o=>o.empty?l.moveByGroup(o,a):rangeEnd(o,a))}const cursorGroupLeft=l=>cursorByGroup(l,!ltrAtCursor(l)),cursorGroupRight=l=>cursorByGroup(l,ltrAtCursor(l));function interestingNode(l,a,o){if(a.type.prop(o))return!0;let u=a.to-a.from;return u&&(u>2||/[^\s,.;:]/.test(l.sliceDoc(a.from,a.to)))||a.firstChild}function moveBySyntax(l,a,o){let u=syntaxTree(l).resolveInner(a.head),p=o?NodeProp.closedBy:NodeProp.openedBy;for(let b=a.head;;){let O=o?u.childAfter(b):u.childBefore(b);if(!O)break;interestingNode(l,O,p)?u=O:b=o?O.to:O.from}let d=u.type.prop(p),f,g;return d&&(f=o?matchBrackets(l,u.from,1):matchBrackets(l,u.to,-1))&&f.matched?g=o?f.end.to:f.end.from:g=o?u.to:u.from,EditorSelection.cursor(g,o?-1:1)}const cursorSyntaxLeft=l=>moveSel(l,a=>moveBySyntax(l.state,a,!ltrAtCursor(l))),cursorSyntaxRight=l=>moveSel(l,a=>moveBySyntax(l.state,a,ltrAtCursor(l)));function cursorByLine(l,a){return moveSel(l,o=>{if(!o.empty)return rangeEnd(o,a);let u=l.moveVertically(o,a);return u.head!=o.head?u:l.moveToLineBoundary(o,a)})}const cursorLineUp=l=>cursorByLine(l,!1),cursorLineDown=l=>cursorByLine(l,!0);function pageInfo(l){let a=l.scrollDOM.clientHeight<l.scrollDOM.scrollHeight-2,o=0,u=0,p;if(a){for(let d of l.state.facet(EditorView.scrollMargins)){let f=d(l);f?.top&&(o=Math.max(f?.top,o)),f?.bottom&&(u=Math.max(f?.bottom,u))}p=l.scrollDOM.clientHeight-o-u}else p=(l.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:o,marginBottom:u,selfScroll:a,height:Math.max(l.defaultLineHeight,p-5)}}function cursorByPage(l,a){let o=pageInfo(l),{state:u}=l,p=updateSel(u.selection,f=>f.empty?l.moveVertically(f,a,o.height):rangeEnd(f,a));if(p.eq(u.selection))return!1;let d;if(o.selfScroll){let f=l.coordsAtPos(u.selection.main.head),g=l.scrollDOM.getBoundingClientRect(),b=g.top+o.marginTop,O=g.bottom-o.marginBottom;f&&f.top>b&&f.bottom<O&&(d=EditorView.scrollIntoView(p.main.head,{y:"start",yMargin:f.top-b}))}return l.dispatch(setSel(u,p),{effects:d}),!0}const cursorPageUp=l=>cursorByPage(l,!1),cursorPageDown=l=>cursorByPage(l,!0);function moveByLineBoundary(l,a,o){let u=l.lineBlockAt(a.head),p=l.moveToLineBoundary(a,o);if(p.head==a.head&&p.head!=(o?u.to:u.from)&&(p=l.moveToLineBoundary(a,o,!1)),!o&&p.head==u.from&&u.length){let d=/^\s*/.exec(l.state.sliceDoc(u.from,Math.min(u.from+100,u.to)))[0].length;d&&a.head!=u.from+d&&(p=EditorSelection.cursor(u.from+d))}return p}const cursorLineBoundaryForward=l=>moveSel(l,a=>moveByLineBoundary(l,a,!0)),cursorLineBoundaryBackward=l=>moveSel(l,a=>moveByLineBoundary(l,a,!1)),cursorLineBoundaryLeft=l=>moveSel(l,a=>moveByLineBoundary(l,a,!ltrAtCursor(l))),cursorLineBoundaryRight=l=>moveSel(l,a=>moveByLineBoundary(l,a,ltrAtCursor(l))),cursorLineStart=l=>moveSel(l,a=>EditorSelection.cursor(l.lineBlockAt(a.head).from,1)),cursorLineEnd=l=>moveSel(l,a=>EditorSelection.cursor(l.lineBlockAt(a.head).to,-1));function toMatchingBracket(l,a,o){let u=!1,p=updateSel(l.selection,d=>{let f=matchBrackets(l,d.head,-1)||matchBrackets(l,d.head,1)||d.head>0&&matchBrackets(l,d.head-1,1)||d.head<l.doc.length&&matchBrackets(l,d.head+1,-1);if(!f||!f.end)return d;u=!0;let g=f.start.from==d.head?f.end.to:f.end.from;return EditorSelection.cursor(g)});return u?(a(setSel(l,p)),!0):!1}const cursorMatchingBracket=({state:l,dispatch:a})=>toMatchingBracket(l,a);function extendSel(l,a){let o=updateSel(l.state.selection,u=>{let p=a(u);return EditorSelection.range(u.anchor,p.head,p.goalColumn,p.bidiLevel||void 0)});return o.eq(l.state.selection)?!1:(l.dispatch(setSel(l.state,o)),!0)}function selectByChar(l,a){return extendSel(l,o=>l.moveByChar(o,a))}const selectCharLeft=l=>selectByChar(l,!ltrAtCursor(l)),selectCharRight=l=>selectByChar(l,ltrAtCursor(l));function selectByGroup(l,a){return extendSel(l,o=>l.moveByGroup(o,a))}const selectGroupLeft=l=>selectByGroup(l,!ltrAtCursor(l)),selectGroupRight=l=>selectByGroup(l,ltrAtCursor(l)),selectSyntaxLeft=l=>extendSel(l,a=>moveBySyntax(l.state,a,!ltrAtCursor(l))),selectSyntaxRight=l=>extendSel(l,a=>moveBySyntax(l.state,a,ltrAtCursor(l)));function selectByLine(l,a){return extendSel(l,o=>l.moveVertically(o,a))}const selectLineUp=l=>selectByLine(l,!1),selectLineDown=l=>selectByLine(l,!0);function selectByPage(l,a){return extendSel(l,o=>l.moveVertically(o,a,pageInfo(l).height))}const selectPageUp=l=>selectByPage(l,!1),selectPageDown=l=>selectByPage(l,!0),selectLineBoundaryForward=l=>extendSel(l,a=>moveByLineBoundary(l,a,!0)),selectLineBoundaryBackward=l=>extendSel(l,a=>moveByLineBoundary(l,a,!1)),selectLineBoundaryLeft=l=>extendSel(l,a=>moveByLineBoundary(l,a,!ltrAtCursor(l))),selectLineBoundaryRight=l=>extendSel(l,a=>moveByLineBoundary(l,a,ltrAtCursor(l))),selectLineStart=l=>extendSel(l,a=>EditorSelection.cursor(l.lineBlockAt(a.head).from)),selectLineEnd=l=>extendSel(l,a=>EditorSelection.cursor(l.lineBlockAt(a.head).to)),cursorDocStart=({state:l,dispatch:a})=>(a(setSel(l,{anchor:0})),!0),cursorDocEnd=({state:l,dispatch:a})=>(a(setSel(l,{anchor:l.doc.length})),!0),selectDocStart=({state:l,dispatch:a})=>(a(setSel(l,{anchor:l.selection.main.anchor,head:0})),!0),selectDocEnd=({state:l,dispatch:a})=>(a(setSel(l,{anchor:l.selection.main.anchor,head:l.doc.length})),!0),selectAll=({state:l,dispatch:a})=>(a(l.update({selection:{anchor:0,head:l.doc.length},userEvent:"select"})),!0),selectLine=({state:l,dispatch:a})=>{let o=selectedLineBlocks(l).map(({from:u,to:p})=>EditorSelection.range(u,Math.min(p+1,l.doc.length)));return a(l.update({selection:EditorSelection.create(o),userEvent:"select"})),!0},selectParentSyntax=({state:l,dispatch:a})=>{let o=updateSel(l.selection,u=>{let p=syntaxTree(l),d=p.resolveStack(u.from,1);if(u.empty){let f=p.resolveStack(u.from,-1);f.node.from>=d.node.from&&f.node.to<=d.node.to&&(d=f)}for(let f=d;f;f=f.next){let{node:g}=f;if((g.from<u.from&&g.to>=u.to||g.to>u.to&&g.from<=u.from)&&f.next)return EditorSelection.range(g.to,g.from)}return u});return o.eq(l.selection)?!1:(a(setSel(l,o)),!0)},simplifySelection=({state:l,dispatch:a})=>{let o=l.selection,u=null;return o.ranges.length>1?u=EditorSelection.create([o.main]):o.main.empty||(u=EditorSelection.create([EditorSelection.cursor(o.main.head)])),u?(a(setSel(l,u)),!0):!1};function deleteBy(l,a){if(l.state.readOnly)return!1;let o="delete.selection",{state:u}=l,p=u.changeByRange(d=>{let{from:f,to:g}=d;if(f==g){let b=a(d);b<f?(o="delete.backward",b=skipAtomic(l,b,!1)):b>f&&(o="delete.forward",b=skipAtomic(l,b,!0)),f=Math.min(f,b),g=Math.max(g,b)}else f=skipAtomic(l,f,!1),g=skipAtomic(l,g,!0);return f==g?{range:d}:{changes:{from:f,to:g},range:EditorSelection.cursor(f,f<d.head?-1:1)}});return p.changes.empty?!1:(l.dispatch(u.update(p,{scrollIntoView:!0,userEvent:o,effects:o=="delete.selection"?EditorView.announce.of(u.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(l,a,o){if(l instanceof EditorView)for(let u of l.state.facet(EditorView.atomicRanges).map(p=>p(l)))u.between(a,a,(p,d)=>{p<a&&d>a&&(a=o?d:p)});return a}const deleteByChar=(l,a,o)=>deleteBy(l,u=>{let p=u.from,{state:d}=l,f=d.doc.lineAt(p),g,b;if(o&&!a&&p>f.from&&p<f.from+200&&!/[^ \t]/.test(g=f.text.slice(0,p-f.from))){if(g[g.length-1]=="	")return p-1;let O=countColumn(g,d.tabSize),S=O%getIndentUnit(d)||getIndentUnit(d);for(let M=0;M<S&&g[g.length-1-M]==" ";M++)p--;b=p}else b=findClusterBreak(f.text,p-f.from,a,a)+f.from,b==p&&f.number!=(a?d.doc.lines:1)?b+=a?1:-1:!a&&/[\ufe00-\ufe0f]/.test(f.text.slice(b-f.from,p-f.from))&&(b=findClusterBreak(f.text,b-f.from,!1,!1)+f.from);return b}),deleteCharBackward=l=>deleteByChar(l,!1,!0),deleteCharForward=l=>deleteByChar(l,!0,!1),deleteByGroup=(l,a)=>deleteBy(l,o=>{let u=o.head,{state:p}=l,d=p.doc.lineAt(u),f=p.charCategorizer(u);for(let g=null;;){if(u==(a?d.to:d.from)){u==o.head&&d.number!=(a?p.doc.lines:1)&&(u+=a?1:-1);break}let b=findClusterBreak(d.text,u-d.from,a)+d.from,O=d.text.slice(Math.min(u,b)-d.from,Math.max(u,b)-d.from),S=f(O);if(g!=null&&S!=g)break;(O!=" "||u!=o.head)&&(g=S),u=b}return u}),deleteGroupBackward=l=>deleteByGroup(l,!1),deleteGroupForward=l=>deleteByGroup(l,!0),deleteToLineEnd=l=>deleteBy(l,a=>{let o=l.lineBlockAt(a.head).to;return a.head<o?o:Math.min(l.state.doc.length,a.head+1)}),deleteToLineStart=l=>deleteBy(l,a=>{let o=l.lineBlockAt(a.head).from;return a.head>o?o:Math.max(0,a.head-1)}),deleteLineBoundaryBackward=l=>deleteBy(l,a=>{let o=l.moveToLineBoundary(a,!1).head;return a.head>o?o:Math.max(0,a.head-1)}),deleteLineBoundaryForward=l=>deleteBy(l,a=>{let o=l.moveToLineBoundary(a,!0).head;return a.head<o?o:Math.min(l.state.doc.length,a.head+1)}),splitLine=({state:l,dispatch:a})=>{if(l.readOnly)return!1;let o=l.changeByRange(u=>({changes:{from:u.from,to:u.to,insert:Text$1.of(["",""])},range:EditorSelection.cursor(u.from)}));return a(l.update(o,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:l,dispatch:a})=>{if(l.readOnly)return!1;let o=l.changeByRange(u=>{if(!u.empty||u.from==0||u.from==l.doc.length)return{range:u};let p=u.from,d=l.doc.lineAt(p),f=p==d.from?p-1:findClusterBreak(d.text,p-d.from,!1)+d.from,g=p==d.to?p+1:findClusterBreak(d.text,p-d.from,!0)+d.from;return{changes:{from:f,to:g,insert:l.doc.slice(p,g).append(l.doc.slice(f,p))},range:EditorSelection.cursor(g)}});return o.changes.empty?!1:(a(l.update(o,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(l){let a=[],o=-1;for(let u of l.selection.ranges){let p=l.doc.lineAt(u.from),d=l.doc.lineAt(u.to);if(!u.empty&&u.to==d.from&&(d=l.doc.lineAt(u.to-1)),o>=p.number){let f=a[a.length-1];f.to=d.to,f.ranges.push(u)}else a.push({from:p.from,to:d.to,ranges:[u]});o=d.number+1}return a}function moveLine(l,a,o){if(l.readOnly)return!1;let u=[],p=[];for(let d of selectedLineBlocks(l)){if(o?d.to==l.doc.length:d.from==0)continue;let f=l.doc.lineAt(o?d.to+1:d.from-1),g=f.length+1;if(o){u.push({from:d.to,to:f.to},{from:d.from,insert:f.text+l.lineBreak});for(let b of d.ranges)p.push(EditorSelection.range(Math.min(l.doc.length,b.anchor+g),Math.min(l.doc.length,b.head+g)))}else{u.push({from:f.from,to:d.from},{from:d.to,insert:l.lineBreak+f.text});for(let b of d.ranges)p.push(EditorSelection.range(b.anchor-g,b.head-g))}}return u.length?(a(l.update({changes:u,scrollIntoView:!0,selection:EditorSelection.create(p,l.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:l,dispatch:a})=>moveLine(l,a,!1),moveLineDown=({state:l,dispatch:a})=>moveLine(l,a,!0);function copyLine(l,a,o){if(l.readOnly)return!1;let u=[];for(let p of selectedLineBlocks(l))o?u.push({from:p.from,insert:l.doc.slice(p.from,p.to)+l.lineBreak}):u.push({from:p.to,insert:l.lineBreak+l.doc.slice(p.from,p.to)});return a(l.update({changes:u,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:l,dispatch:a})=>copyLine(l,a,!1),copyLineDown=({state:l,dispatch:a})=>copyLine(l,a,!0),deleteLine=l=>{if(l.state.readOnly)return!1;let{state:a}=l,o=a.changes(selectedLineBlocks(a).map(({from:p,to:d})=>(p>0?p--:d<a.doc.length&&d++,{from:p,to:d}))),u=updateSel(a.selection,p=>{let d;if(l.lineWrapping){let f=l.lineBlockAt(p.head),g=l.coordsAtPos(p.head,p.assoc||1);g&&(d=f.bottom+l.documentTop-g.bottom+l.defaultLineHeight/2)}return l.moveVertically(p,!0,d)}).map(o);return l.dispatch({changes:o,selection:u,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(l,a){if(/\(\)|\[\]|\{\}/.test(l.sliceDoc(a-1,a+1)))return{from:a,to:a};let o=syntaxTree(l).resolveInner(a),u=o.childBefore(a),p=o.childAfter(a),d;return u&&p&&u.to<=a&&p.from>=a&&(d=u.type.prop(NodeProp.closedBy))&&d.indexOf(p.name)>-1&&l.doc.lineAt(u.to).from==l.doc.lineAt(p.from).from&&!/\S/.test(l.sliceDoc(u.to,p.from))?{from:u.to,to:p.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(l){return({state:a,dispatch:o})=>{if(a.readOnly)return!1;let u=a.changeByRange(p=>{let{from:d,to:f}=p,g=a.doc.lineAt(d),b=!l&&d==f&&isBetweenBrackets(a,d);l&&(d=f=(f<=g.to?g:a.doc.lineAt(f)).to);let O=new IndentContext(a,{simulateBreak:d,simulateDoubleBreak:!!b}),S=getIndentation(O,d);for(S==null&&(S=countColumn(/^\s*/.exec(a.doc.lineAt(d).text)[0],a.tabSize));f<g.to&&/\s/.test(g.text[f-g.from]);)f++;b?{from:d,to:f}=b:d>g.from&&d<g.from+100&&!/\S/.test(g.text.slice(0,d))&&(d=g.from);let M=["",indentString(a,S)];return b&&M.push(indentString(a,O.lineIndent(g.from,-1))),{changes:{from:d,to:f,insert:Text$1.of(M)},range:EditorSelection.cursor(d+1+M[1].length)}});return o(a.update(u,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(l,a){let o=-1;return l.changeByRange(u=>{let p=[];for(let f=u.from;f<=u.to;){let g=l.doc.lineAt(f);g.number>o&&(u.empty||u.to>g.from)&&(a(g,p,u),o=g.number),f=g.to+1}let d=l.changes(p);return{changes:p,range:EditorSelection.range(d.mapPos(u.anchor,1),d.mapPos(u.head,1))}})}const indentSelection=({state:l,dispatch:a})=>{if(l.readOnly)return!1;let o=Object.create(null),u=new IndentContext(l,{overrideIndentation:d=>{let f=o[d];return f??-1}}),p=changeBySelectedLine(l,(d,f,g)=>{let b=getIndentation(u,d.from);if(b==null)return;/\S/.test(d.text)||(b=0);let O=/^\s*/.exec(d.text)[0],S=indentString(l,b);(O!=S||g.from<d.from+O.length)&&(o[d.from]=b,f.push({from:d.from,to:d.from+O.length,insert:S}))});return p.changes.empty||a(l.update(p,{userEvent:"indent"})),!0},indentMore=({state:l,dispatch:a})=>l.readOnly?!1:(a(l.update(changeBySelectedLine(l,(o,u)=>{u.push({from:o.from,insert:l.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:l,dispatch:a})=>l.readOnly?!1:(a(l.update(changeBySelectedLine(l,(o,u)=>{let p=/^\s*/.exec(o.text)[0];if(!p)return;let d=countColumn(p,l.tabSize),f=0,g=indentString(l,Math.max(0,d-getIndentUnit(l)));for(;f<p.length&&f<g.length&&p.charCodeAt(f)==g.charCodeAt(f);)f++;u.push({from:o.from+f,to:o.from+p.length,insert:g.slice(f)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=l=>(l.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward},{mac:"Mod-Delete",run:deleteLineBoundaryForward}].concat(emacsStyleKeymap.map(l=>({mac:l.key,run:l.run,shift:l.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),indentWithTab={key:"Tab",run:indentMore,shift:indentLess};class Stack{constructor(a,o,u,p,d,f,g,b,O,S=0,M){this.p=a,this.stack=o,this.state=u,this.reducePos=p,this.pos=d,this.score=f,this.buffer=g,this.bufferBase=b,this.curContext=O,this.lookAhead=S,this.parent=M}toString(){return`[${this.stack.filter((a,o)=>o%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(a,o,u=0){let p=a.parser.context;return new Stack(a,[],o,u,u,0,[],0,p?new StackContext(p,p.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(a,o){this.stack.push(this.state,o,this.bufferBase+this.buffer.length),this.state=a}reduce(a){var o;let u=a>>19,p=a&65535,{parser:d}=this.p,f=this.reducePos<this.pos-25;f&&this.setLookAhead(this.pos);let g=d.dynamicPrecedence(p);if(g&&(this.score+=g),u==0){this.pushState(d.getGoto(this.state,p,!0),this.reducePos),p<d.minRepeatTerm&&this.storeNode(p,this.reducePos,this.reducePos,f?8:4,!0),this.reduceContext(p,this.reducePos);return}let b=this.stack.length-(u-1)*3-(a&262144?6:0),O=b?this.stack[b-2]:this.p.ranges[0].from,S=this.reducePos-O;S>=2e3&&!(!((o=this.p.parser.nodeSet.types[p])===null||o===void 0)&&o.isAnonymous)&&(O==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=S):this.p.lastBigReductionSize<S&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=O,this.p.lastBigReductionSize=S));let M=b?this.stack[b-1]:0,A=this.bufferBase+this.buffer.length-M;if(p<d.minRepeatTerm||a&131072){let F=d.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(p,O,F,A+4,!0)}if(a&262144)this.state=this.stack[b];else{let F=this.stack[b-3];this.state=d.getGoto(F,p,!0)}for(;this.stack.length>b;)this.stack.pop();this.reduceContext(p,O)}storeNode(a,o,u,p=4,d=!1){if(a==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let f=this,g=this.buffer.length;if(g==0&&f.parent&&(g=f.bufferBase-f.parent.bufferBase,f=f.parent),g>0&&f.buffer[g-4]==0&&f.buffer[g-1]>-1){if(o==u)return;if(f.buffer[g-2]>=o){f.buffer[g-2]=u;return}}}if(!d||this.pos==u)this.buffer.push(a,o,u,p);else{let f=this.buffer.length;if(f>0&&this.buffer[f-4]!=0){let g=!1;for(let b=f;b>0&&this.buffer[b-2]>u;b-=4)if(this.buffer[b-1]>=0){g=!0;break}if(g)for(;f>0&&this.buffer[f-2]>u;)this.buffer[f]=this.buffer[f-4],this.buffer[f+1]=this.buffer[f-3],this.buffer[f+2]=this.buffer[f-2],this.buffer[f+3]=this.buffer[f-1],f-=4,p>4&&(p-=4)}this.buffer[f]=a,this.buffer[f+1]=o,this.buffer[f+2]=u,this.buffer[f+3]=p}}shift(a,o,u,p){if(a&131072)this.pushState(a&65535,this.pos);else if(a&262144)this.pos=p,this.shiftContext(o,u),o<=this.p.parser.maxNode&&this.buffer.push(o,u,p,4);else{let d=a,{parser:f}=this.p;(p>this.pos||o<=f.maxNode)&&(this.pos=p,f.stateFlag(d,1)||(this.reducePos=p)),this.pushState(d,u),this.shiftContext(o,u),o<=f.maxNode&&this.buffer.push(o,u,p,4)}}apply(a,o,u,p){a&65536?this.reduce(a):this.shift(a,o,u,p)}useNode(a,o){let u=this.p.reused.length-1;(u<0||this.p.reused[u]!=a)&&(this.p.reused.push(a),u++);let p=this.pos;this.reducePos=this.pos=p+a.length,this.pushState(o,p),this.buffer.push(u,p,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,a,this,this.p.stream.reset(this.pos-a.length)))}split(){let a=this,o=a.buffer.length;for(;o>0&&a.buffer[o-2]>a.reducePos;)o-=4;let u=a.buffer.slice(o),p=a.bufferBase+o;for(;a&&p==a.bufferBase;)a=a.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,u,p,this.curContext,this.lookAhead,a)}recoverByDelete(a,o){let u=a<=this.p.parser.maxNode;u&&this.storeNode(a,this.pos,o,4),this.storeNode(0,this.pos,o,u?8:4),this.pos=this.reducePos=o,this.score-=190}canShift(a){for(let o=new SimulatedStack(this);;){let u=this.p.parser.stateSlot(o.state,4)||this.p.parser.hasAction(o.state,a);if(u==0)return!1;if(!(u&65536))return!0;o.reduce(u)}}recoverByInsert(a){if(this.stack.length>=300)return[];let o=this.p.parser.nextStates(this.state);if(o.length>8||this.stack.length>=120){let p=[];for(let d=0,f;d<o.length;d+=2)(f=o[d+1])!=this.state&&this.p.parser.hasAction(f,a)&&p.push(o[d],f);if(this.stack.length<120)for(let d=0;p.length<8&&d<o.length;d+=2){let f=o[d+1];p.some((g,b)=>b&1&&g==f)||p.push(o[d],f)}o=p}let u=[];for(let p=0;p<o.length&&u.length<4;p+=2){let d=o[p+1];if(d==this.state)continue;let f=this.split();f.pushState(d,this.pos),f.storeNode(0,f.pos,f.pos,4,!0),f.shiftContext(o[p],this.pos),f.reducePos=this.pos,f.score-=200,u.push(f)}return u}forceReduce(){let{parser:a}=this.p,o=a.stateSlot(this.state,5);if(!(o&65536))return!1;if(!a.validAction(this.state,o)){let u=o>>19,p=o&65535,d=this.stack.length-u*3;if(d<0||a.getGoto(this.stack[d],p,!1)<0){let f=this.findForcedReduction();if(f==null)return!1;o=f}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(o),!0}findForcedReduction(){let{parser:a}=this.p,o=[],u=(p,d)=>{if(!o.includes(p))return o.push(p),a.allActions(p,f=>{if(!(f&393216))if(f&65536){let g=(f>>19)-d;if(g>1){let b=f&65535,O=this.stack.length-g*3;if(O>=0&&a.getGoto(this.stack[O],b,!1)>=0)return g<<19|65536|b}}else{let g=u(f,d+1);if(g!=null)return g}})};return u(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:a}=this.p;return a.data[a.stateSlot(this.state,1)]==65535&&!a.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(a){if(this.state!=a.state||this.stack.length!=a.stack.length)return!1;for(let o=0;o<this.stack.length;o+=3)if(this.stack[o]!=a.stack[o])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(a){return this.p.parser.dialect.flags[a]}shiftContext(a,o){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,a,this,this.p.stream.reset(o)))}reduceContext(a,o){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,a,this,this.p.stream.reset(o)))}emitContext(){let a=this.buffer.length-1;(a<0||this.buffer[a]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let a=this.buffer.length-1;(a<0||this.buffer[a]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(a){if(a!=this.curContext.context){let o=new StackContext(this.curContext.tracker,a);o.hash!=this.curContext.hash&&this.emitContext(),this.curContext=o}}setLookAhead(a){a>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=a)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(a,o){this.tracker=a,this.context=o,this.hash=a.strict?a.hash(o):0}}class SimulatedStack{constructor(a){this.start=a,this.state=a.state,this.stack=a.stack,this.base=this.stack.length}reduce(a){let o=a&65535,u=a>>19;u==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(u-1)*3;let p=this.start.p.parser.getGoto(this.stack[this.base-3],o,!0);this.state=p}}class StackBufferCursor{constructor(a,o,u){this.stack=a,this.pos=o,this.index=u,this.buffer=a.buffer,this.index==0&&this.maybeNext()}static create(a,o=a.bufferBase+a.buffer.length){return new StackBufferCursor(a,o,o-a.bufferBase)}maybeNext(){let a=this.stack.parent;a!=null&&(this.index=this.stack.bufferBase-a.bufferBase,this.stack=a,this.buffer=a.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(l,a=Uint16Array){if(typeof l!="string")return l;let o=null;for(let u=0,p=0;u<l.length;){let d=0;for(;;){let f=l.charCodeAt(u++),g=!1;if(f==126){d=65535;break}f>=92&&f--,f>=34&&f--;let b=f-32;if(b>=46&&(b-=46,g=!0),d+=b,g)break;d*=46}o?o[p++]=d:o=new a(d)}return o}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(a,o){this.input=a,this.ranges=o,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=o[0].from,this.range=o[0],this.end=o[o.length-1].to,this.readNext()}resolveOffset(a,o){let u=this.range,p=this.rangeIndex,d=this.pos+a;for(;d<u.from;){if(!p)return null;let f=this.ranges[--p];d-=u.from-f.to,u=f}for(;o<0?d>u.to:d>=u.to;){if(p==this.ranges.length-1)return null;let f=this.ranges[++p];d+=f.from-u.to,u=f}return d}clipPos(a){if(a>=this.range.from&&a<this.range.to)return a;for(let o of this.ranges)if(o.to>a)return Math.max(a,o.from);return this.end}peek(a){let o=this.chunkOff+a,u,p;if(o>=0&&o<this.chunk.length)u=this.pos+a,p=this.chunk.charCodeAt(o);else{let d=this.resolveOffset(a,1);if(d==null)return-1;if(u=d,u>=this.chunk2Pos&&u<this.chunk2Pos+this.chunk2.length)p=this.chunk2.charCodeAt(u-this.chunk2Pos);else{let f=this.rangeIndex,g=this.range;for(;g.to<=u;)g=this.ranges[++f];this.chunk2=this.input.chunk(this.chunk2Pos=u),u+this.chunk2.length>g.to&&(this.chunk2=this.chunk2.slice(0,g.to-u)),p=this.chunk2.charCodeAt(0)}}return u>=this.token.lookAhead&&(this.token.lookAhead=u+1),p}acceptToken(a,o=0){let u=o?this.resolveOffset(o,-1):this.pos;if(u==null||u<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=a,this.token.end=u}acceptTokenTo(a,o){this.token.value=a,this.token.end=o}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:a,chunkPos:o}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=a,this.chunk2Pos=o,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let a=this.input.chunk(this.pos),o=this.pos+a.length;this.chunk=o>this.range.to?a.slice(0,this.range.to-this.pos):a,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(a=1){for(this.chunkOff+=a;this.pos+a>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();a-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=a,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(a,o){if(o?(this.token=o,o.start=a,o.lookAhead=a+1,o.value=o.extended=-1):this.token=nullToken,this.pos!=a){if(this.pos=a,a==this.end)return this.setDone(),this;for(;a<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;a>=this.range.to;)this.range=this.ranges[++this.rangeIndex];a>=this.chunkPos&&a<this.chunkPos+this.chunk.length?this.chunkOff=a-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(a,o){if(a>=this.chunkPos&&o<=this.chunkPos+this.chunk.length)return this.chunk.slice(a-this.chunkPos,o-this.chunkPos);if(a>=this.chunk2Pos&&o<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(a-this.chunk2Pos,o-this.chunk2Pos);if(a>=this.range.from&&o<=this.range.to)return this.input.read(a,o);let u="";for(let p of this.ranges){if(p.from>=o)break;p.to>a&&(u+=this.input.read(Math.max(p.from,a),Math.min(p.to,o)))}return u}}class TokenGroup{constructor(a,o){this.data=a,this.id=o}token(a,o){let{parser:u}=o.p;readToken(this.data,a,o,this.id,u.data,u.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(a,o,u){this.precTable=o,this.elseToken=u,this.data=typeof a=="string"?decodeArray(a):a}token(a,o){let u=a.pos,p=0;for(;;){let d=a.next<0,f=a.resolveOffset(1,1);if(readToken(this.data,a,o,0,this.data,this.precTable),a.token.value>-1)break;if(this.elseToken==null)return;if(d||p++,f==null)break;a.reset(f,a.token)}p&&(a.reset(u,a.token),a.acceptToken(this.elseToken,p))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(a,o={}){this.token=a,this.contextual=!!o.contextual,this.fallback=!!o.fallback,this.extend=!!o.extend}}function readToken(l,a,o,u,p,d){let f=0,g=1<<u,{dialect:b}=o.p.parser;e:for(;g&l[f];){let O=l[f+1];for(let F=f+3;F<O;F+=2)if((l[F+1]&g)>0){let $=l[F];if(b.allows($)&&(a.token.value==-1||a.token.value==$||overrides($,a.token.value,p,d))){a.acceptToken($);break}}let S=a.next,M=0,A=l[f+2];if(a.next<0&&A>M&&l[O+A*3-3]==65535){f=l[O+A*3-1];continue e}for(;M<A;){let F=M+A>>1,$=O+F+(F<<1),B=l[$],I=l[$+1]||65536;if(S<B)A=F;else if(S>=I)M=F+1;else{f=l[$+2],a.advance();continue e}}break}}function findOffset(l,a,o){for(let u=a,p;(p=l[u])!=65535;u++)if(p==o)return u-a;return-1}function overrides(l,a,o,u){let p=findOffset(o,u,a);return p<0||findOffset(o,u,l)<p}const verbose=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let stackIDs=null;function cutAt(l,a,o){let u=l.cursor(IterMode.IncludeAnonymous);for(u.moveTo(a);;)if(!(o<0?u.childBefore(a):u.childAfter(a)))for(;;){if((o<0?u.to<a:u.from>a)&&!u.type.isError)return o<0?Math.max(0,Math.min(u.to-1,a-25)):Math.min(l.length,Math.max(u.from+1,a+25));if(o<0?u.prevSibling():u.nextSibling())break;if(!u.parent())return o<0?0:l.length}}class FragmentCursor{constructor(a,o){this.fragments=a,this.nodeSet=o,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let a=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(a){for(this.safeFrom=a.openStart?cutAt(a.tree,a.from+a.offset,1)-a.offset:a.from,this.safeTo=a.openEnd?cutAt(a.tree,a.to+a.offset,-1)-a.offset:a.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(a.tree),this.start.push(-a.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(a){if(a<this.nextStart)return null;for(;this.fragment&&this.safeTo<=a;)this.nextFragment();if(!this.fragment)return null;for(;;){let o=this.trees.length-1;if(o<0)return this.nextFragment(),null;let u=this.trees[o],p=this.index[o];if(p==u.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let d=u.children[p],f=this.start[o]+u.positions[p];if(f>a)return this.nextStart=f,null;if(d instanceof Tree){if(f==a){if(f<this.safeFrom)return null;let g=f+d.length;if(g<=this.safeTo){let b=d.prop(NodeProp.lookAhead);if(!b||g+b<this.fragment.to)return d}}this.index[o]++,f+d.length>=Math.max(this.safeFrom,a)&&(this.trees.push(d),this.start.push(f),this.index.push(0))}else this.index[o]++,this.nextStart=f+d.length}}}class TokenCache{constructor(a,o){this.stream=o,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=a.tokenizers.map(u=>new CachedToken)}getActions(a){let o=0,u=null,{parser:p}=a.p,{tokenizers:d}=p,f=p.stateSlot(a.state,3),g=a.curContext?a.curContext.hash:0,b=0;for(let O=0;O<d.length;O++){if(!(1<<O&f))continue;let S=d[O],M=this.tokens[O];if(!(u&&!S.fallback)&&((S.contextual||M.start!=a.pos||M.mask!=f||M.context!=g)&&(this.updateCachedToken(M,S,a),M.mask=f,M.context=g),M.lookAhead>M.end+25&&(b=Math.max(M.lookAhead,b)),M.value!=0)){let A=o;if(M.extended>-1&&(o=this.addActions(a,M.extended,M.end,o)),o=this.addActions(a,M.value,M.end,o),!S.extend&&(u=M,o>A))break}}for(;this.actions.length>o;)this.actions.pop();return b&&a.setLookAhead(b),!u&&a.pos==this.stream.end&&(u=new CachedToken,u.value=a.p.parser.eofTerm,u.start=u.end=a.pos,o=this.addActions(a,u.value,u.end,o)),this.mainToken=u,this.actions}getMainToken(a){if(this.mainToken)return this.mainToken;let o=new CachedToken,{pos:u,p}=a;return o.start=u,o.end=Math.min(u+1,p.stream.end),o.value=u==p.stream.end?p.parser.eofTerm:0,o}updateCachedToken(a,o,u){let p=this.stream.clipPos(u.pos);if(o.token(this.stream.reset(p,a),u),a.value>-1){let{parser:d}=u.p;for(let f=0;f<d.specialized.length;f++)if(d.specialized[f]==a.value){let g=d.specializers[f](this.stream.read(a.start,a.end),u);if(g>=0&&u.p.parser.dialect.allows(g>>1)){g&1?a.extended=g>>1:a.value=g>>1;break}}}else a.value=0,a.end=this.stream.clipPos(p+1)}putAction(a,o,u,p){for(let d=0;d<p;d+=3)if(this.actions[d]==a)return p;return this.actions[p++]=a,this.actions[p++]=o,this.actions[p++]=u,p}addActions(a,o,u,p){let{state:d}=a,{parser:f}=a.p,{data:g}=f;for(let b=0;b<2;b++)for(let O=f.stateSlot(d,b?2:1);;O+=3){if(g[O]==65535)if(g[O+1]==1)O=pair(g,O+2);else{p==0&&g[O+1]==2&&(p=this.putAction(pair(g,O+2),o,u,p));break}g[O]==o&&(p=this.putAction(pair(g,O+1),o,u,p))}return p}}class Parse{constructor(a,o,u,p){this.parser=a,this.input=o,this.ranges=p,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(o,p),this.tokens=new TokenCache(a,this.stream),this.topTerm=a.top[1];let{from:d}=p[0];this.stacks=[Stack.start(this,a.top[0],d)],this.fragments=u.length&&this.stream.end-d>a.bufferLength*4?new FragmentCursor(u,a.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let a=this.stacks,o=this.minStackPos,u=this.stacks=[],p,d;if(this.bigReductionCount>300&&a.length==1){let[f]=a;for(;f.forceReduce()&&f.stack.length&&f.stack[f.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let f=0;f<a.length;f++){let g=a[f];for(;;){if(this.tokens.mainToken=null,g.pos>o)u.push(g);else{if(this.advanceStack(g,u,a))continue;{p||(p=[],d=[]),p.push(g);let b=this.tokens.getMainToken(g);d.push(b.value,b.end)}}break}}if(!u.length){let f=p&&findFinished(p);if(f)return verbose&&console.log("Finish with "+this.stackID(f)),this.stackToTree(f);if(this.parser.strict)throw verbose&&p&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+o);this.recovering||(this.recovering=5)}if(this.recovering&&p){let f=this.stoppedAt!=null&&p[0].pos>this.stoppedAt?p[0]:this.runRecovery(p,d,u);if(f)return verbose&&console.log("Force-finish "+this.stackID(f)),this.stackToTree(f.forceAll())}if(this.recovering){let f=this.recovering==1?1:this.recovering*3;if(u.length>f)for(u.sort((g,b)=>b.score-g.score);u.length>f;)u.pop();u.some(g=>g.reducePos>o)&&this.recovering--}else if(u.length>1){e:for(let f=0;f<u.length-1;f++){let g=u[f];for(let b=f+1;b<u.length;b++){let O=u[b];if(g.sameState(O)||g.buffer.length>500&&O.buffer.length>500)if((g.score-O.score||g.buffer.length-O.buffer.length)>0)u.splice(b--,1);else{u.splice(f--,1);continue e}}}u.length>12&&u.splice(12,u.length-12)}this.minStackPos=u[0].pos;for(let f=1;f<u.length;f++)u[f].pos<this.minStackPos&&(this.minStackPos=u[f].pos);return null}stopAt(a){if(this.stoppedAt!=null&&this.stoppedAt<a)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=a}advanceStack(a,o,u){let p=a.pos,{parser:d}=this,f=verbose?this.stackID(a)+" -> ":"";if(this.stoppedAt!=null&&p>this.stoppedAt)return a.forceReduce()?a:null;if(this.fragments){let O=a.curContext&&a.curContext.tracker.strict,S=O?a.curContext.hash:0;for(let M=this.fragments.nodeAt(p);M;){let A=this.parser.nodeSet.types[M.type.id]==M.type?d.getGoto(a.state,M.type.id):-1;if(A>-1&&M.length&&(!O||(M.prop(NodeProp.contextHash)||0)==S))return a.useNode(M,A),verbose&&console.log(f+this.stackID(a)+` (via reuse of ${d.getName(M.type.id)})`),!0;if(!(M instanceof Tree)||M.children.length==0||M.positions[0]>0)break;let F=M.children[0];if(F instanceof Tree&&M.positions[0]==0)M=F;else break}}let g=d.stateSlot(a.state,4);if(g>0)return a.reduce(g),verbose&&console.log(f+this.stackID(a)+` (via always-reduce ${d.getName(g&65535)})`),!0;if(a.stack.length>=8400)for(;a.stack.length>6e3&&a.forceReduce(););let b=this.tokens.getActions(a);for(let O=0;O<b.length;){let S=b[O++],M=b[O++],A=b[O++],F=O==b.length||!u,$=F?a:a.split(),B=this.tokens.mainToken;if($.apply(S,M,B?B.start:$.pos,A),verbose&&console.log(f+this.stackID($)+` (via ${S&65536?`reduce of ${d.getName(S&65535)}`:"shift"} for ${d.getName(M)} @ ${p}${$==a?"":", split"})`),F)return!0;$.pos>p?o.push($):u.push($)}return!1}advanceFully(a,o){let u=a.pos;for(;;){if(!this.advanceStack(a,null,null))return!1;if(a.pos>u)return pushStackDedup(a,o),!0}}runRecovery(a,o,u){let p=null,d=!1;for(let f=0;f<a.length;f++){let g=a[f],b=o[f<<1],O=o[(f<<1)+1],S=verbose?this.stackID(g)+" -> ":"";if(g.deadEnd&&(d||(d=!0,g.restart(),verbose&&console.log(S+this.stackID(g)+" (restarted)"),this.advanceFully(g,u))))continue;let M=g.split(),A=S;for(let F=0;M.forceReduce()&&F<10&&(verbose&&console.log(A+this.stackID(M)+" (via force-reduce)"),!this.advanceFully(M,u));F++)verbose&&(A=this.stackID(M)+" -> ");for(let F of g.recoverByInsert(b))verbose&&console.log(S+this.stackID(F)+" (via recover-insert)"),this.advanceFully(F,u);this.stream.end>g.pos?(O==g.pos&&(O++,b=0),g.recoverByDelete(b,O),verbose&&console.log(S+this.stackID(g)+` (via recover-delete ${this.parser.getName(b)})`),pushStackDedup(g,u)):(!p||p.score<g.score)&&(p=g)}return p}stackToTree(a){return a.close(),Tree.build({buffer:StackBufferCursor.create(a),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:a.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(a){let o=(stackIDs||(stackIDs=new WeakMap)).get(a);return o||stackIDs.set(a,o=String.fromCodePoint(this.nextStackID++)),o+a}}function pushStackDedup(l,a){for(let o=0;o<a.length;o++){let u=a[o];if(u.pos==l.pos&&u.sameState(l)){a[o].score<l.score&&(a[o]=l);return}}a.push(l)}class Dialect{constructor(a,o,u){this.source=a,this.flags=o,this.disabled=u}allows(a){return!this.disabled||this.disabled[a]==0}}const id=l=>l;class ContextTracker{constructor(a){this.start=a.start,this.shift=a.shift||id,this.reduce=a.reduce||id,this.reuse=a.reuse||id,this.hash=a.hash||(()=>0),this.strict=a.strict!==!1}}class LRParser extends Parser{constructor(a){if(super(),this.wrappers=[],a.version!=14)throw new RangeError(`Parser version (${a.version}) doesn't match runtime version (14)`);let o=a.nodeNames.split(" ");this.minRepeatTerm=o.length;for(let g=0;g<a.repeatNodeCount;g++)o.push("");let u=Object.keys(a.topRules).map(g=>a.topRules[g][1]),p=[];for(let g=0;g<o.length;g++)p.push([]);function d(g,b,O){p[g].push([b,b.deserialize(String(O))])}if(a.nodeProps)for(let g of a.nodeProps){let b=g[0];typeof b=="string"&&(b=NodeProp[b]);for(let O=1;O<g.length;){let S=g[O++];if(S>=0)d(S,b,g[O++]);else{let M=g[O+-S];for(let A=-S;A>0;A--)d(g[O++],b,M);O++}}}this.nodeSet=new NodeSet(o.map((g,b)=>NodeType.define({name:b>=this.minRepeatTerm?void 0:g,id:b,props:p[b],top:u.indexOf(b)>-1,error:b==0,skipped:a.skippedNodes&&a.skippedNodes.indexOf(b)>-1}))),a.propSources&&(this.nodeSet=this.nodeSet.extend(...a.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let f=decodeArray(a.tokenData);this.context=a.context,this.specializerSpecs=a.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let g=0;g<this.specializerSpecs.length;g++)this.specialized[g]=this.specializerSpecs[g].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(a.states,Uint32Array),this.data=decodeArray(a.stateData),this.goto=decodeArray(a.goto),this.maxTerm=a.maxTerm,this.tokenizers=a.tokenizers.map(g=>typeof g=="number"?new TokenGroup(f,g):g),this.topRules=a.topRules,this.dialects=a.dialects||{},this.dynamicPrecedences=a.dynamicPrecedences||null,this.tokenPrecTable=a.tokenPrec,this.termNames=a.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(a,o,u){let p=new Parse(this,a,o,u);for(let d of this.wrappers)p=d(p,a,o,u);return p}getGoto(a,o,u=!1){let p=this.goto;if(o>=p[0])return-1;for(let d=p[o+1];;){let f=p[d++],g=f&1,b=p[d++];if(g&&u)return b;for(let O=d+(f>>1);d<O;d++)if(p[d]==a)return b;if(g)return-1}}hasAction(a,o){let u=this.data;for(let p=0;p<2;p++)for(let d=this.stateSlot(a,p?2:1),f;;d+=3){if((f=u[d])==65535)if(u[d+1]==1)f=u[d=pair(u,d+2)];else{if(u[d+1]==2)return pair(u,d+2);break}if(f==o||f==0)return pair(u,d+1)}return 0}stateSlot(a,o){return this.states[a*6+o]}stateFlag(a,o){return(this.stateSlot(a,0)&o)>0}validAction(a,o){return!!this.allActions(a,u=>u==o?!0:null)}allActions(a,o){let u=this.stateSlot(a,4),p=u?o(u):void 0;for(let d=this.stateSlot(a,1);p==null;d+=3){if(this.data[d]==65535)if(this.data[d+1]==1)d=pair(this.data,d+2);else break;p=o(pair(this.data,d+1))}return p}nextStates(a){let o=[];for(let u=this.stateSlot(a,1);;u+=3){if(this.data[u]==65535)if(this.data[u+1]==1)u=pair(this.data,u+2);else break;if(!(this.data[u+2]&1)){let p=this.data[u+1];o.some((d,f)=>f&1&&d==p)||o.push(this.data[u],p)}}return o}configure(a){let o=Object.assign(Object.create(LRParser.prototype),this);if(a.props&&(o.nodeSet=this.nodeSet.extend(...a.props)),a.top){let u=this.topRules[a.top];if(!u)throw new RangeError(`Invalid top rule name ${a.top}`);o.top=u}return a.tokenizers&&(o.tokenizers=this.tokenizers.map(u=>{let p=a.tokenizers.find(d=>d.from==u);return p?p.to:u})),a.specializers&&(o.specializers=this.specializers.slice(),o.specializerSpecs=this.specializerSpecs.map((u,p)=>{let d=a.specializers.find(g=>g.from==u.external);if(!d)return u;let f=Object.assign(Object.assign({},u),{external:d.to});return o.specializers[p]=getSpecializer(f),f})),a.contextTracker&&(o.context=a.contextTracker),a.dialect&&(o.dialect=this.parseDialect(a.dialect)),a.strict!=null&&(o.strict=a.strict),a.wrap&&(o.wrappers=o.wrappers.concat(a.wrap)),a.bufferLength!=null&&(o.bufferLength=a.bufferLength),o}hasWrappers(){return this.wrappers.length>0}getName(a){return this.termNames?this.termNames[a]:String(a<=this.maxNode&&this.nodeSet.types[a].name||a)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(a){let o=this.dynamicPrecedences;return o==null?0:o[a]||0}parseDialect(a){let o=Object.keys(this.dialects),u=o.map(()=>!1);if(a)for(let d of a.split(" ")){let f=o.indexOf(d);f>=0&&(u[f]=!0)}let p=null;for(let d=0;d<o.length;d++)if(!u[d])for(let f=this.dialects[o[d]],g;(g=this.data[f++])!=65535;)(p||(p=new Uint8Array(this.maxTerm+1)))[g]=1;return new Dialect(a,u,p)}static deserialize(a){return new LRParser(a)}}function pair(l,a){return l[a]|l[a+1]<<16}function findFinished(l){let a=null;for(let o of l){let u=o.p.stoppedAt;(o.pos==o.p.stream.end||u!=null&&o.pos>u)&&o.p.parser.stateFlag(o.state,2)&&(!a||a.score<o.score)&&(a=o)}return a}function getSpecializer(l){if(l.external){let a=l.extend?1:0;return(o,u)=>l.external(o,u)<<1|a}return l.get}const noSemi=314,noSemiType=315,incdec=1,incdecPrefix=2,questionDot=3,JSXStartTag=4,insertSemi=316,spaces=318,newline=319,LineComment=5,BlockComment=6,Dialect_jsx=0,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,lt=60,comma=44,question=63,dot=46,bracketL=91,trackNewline=new ContextTracker({start:!1,shift(l,a){return a==LineComment||a==BlockComment||a==spaces?l:a==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((l,a)=>{let{next:o}=l;(o==braceR||o==-1||a.context)&&l.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((l,a)=>{let{next:o}=l,u;space.indexOf(o)>-1||o==slash&&((u=l.peek(1))==slash||u==star)||o!=braceR&&o!=semicolon&&o!=-1&&!a.context&&l.acceptToken(noSemi)},{contextual:!0}),noSemicolonType=new ExternalTokenizer((l,a)=>{l.next==bracketL&&!a.context&&l.acceptToken(noSemiType)},{contextual:!0}),operatorToken=new ExternalTokenizer((l,a)=>{let{next:o}=l;if(o==plus||o==minus){if(l.advance(),o==l.next){l.advance();let u=!a.context&&a.canShift(incdec);l.acceptToken(u?incdec:incdecPrefix)}}else o==question&&l.peek(1)==dot&&(l.advance(),l.advance(),(l.next<48||l.next>57)&&l.acceptToken(questionDot))},{contextual:!0});function identifierChar(l,a){return l>=65&&l<=90||l>=97&&l<=122||l==95||l>=192||!a&&l>=48&&l<=57}const jsx=new ExternalTokenizer((l,a)=>{if(l.next!=lt||!a.dialectEnabled(Dialect_jsx)||(l.advance(),l.next==slash))return;let o=0;for(;space.indexOf(l.next)>-1;)l.advance(),o++;if(identifierChar(l.next,!0)){for(l.advance(),o++;identifierChar(l.next,!1);)l.advance(),o++;for(;space.indexOf(l.next)>-1;)l.advance(),o++;if(l.next==comma)return;for(let u=0;;u++){if(u==7){if(!identifierChar(l.next,!0))return;break}if(l.next!="extends".charCodeAt(u))break;l.advance(),o++}}l.acceptToken(JSXStartTag,-o)}),jsHighlight=styleTags({"get set async static":tags.modifier,"for while do if else switch try catch finally return throw break continue default case":tags.controlKeyword,"in of await yield void typeof delete instanceof":tags.operatorKeyword,"let var const using function class extends":tags.definitionKeyword,"import export from":tags.moduleKeyword,"with debugger as new":tags.keyword,TemplateString:tags.special(tags.string),super:tags.atom,BooleanLiteral:tags.bool,this:tags.self,null:tags.null,Star:tags.modifier,VariableName:tags.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags.function(tags.variableName),VariableDefinition:tags.definition(tags.variableName),Label:tags.labelName,PropertyName:tags.propertyName,PrivatePropertyName:tags.special(tags.propertyName),"CallExpression/MemberExpression/PropertyName":tags.function(tags.propertyName),"FunctionDeclaration/VariableDefinition":tags.function(tags.definition(tags.variableName)),"ClassDeclaration/VariableDefinition":tags.definition(tags.className),"NewExpression/VariableName":tags.className,PropertyDefinition:tags.definition(tags.propertyName),PrivatePropertyDefinition:tags.definition(tags.special(tags.propertyName)),UpdateOp:tags.updateOperator,"LineComment Hashbang":tags.lineComment,BlockComment:tags.blockComment,Number:tags.number,String:tags.string,Escape:tags.escape,ArithOp:tags.arithmeticOperator,LogicOp:tags.logicOperator,BitOp:tags.bitwiseOperator,CompareOp:tags.compareOperator,RegExp:tags.regexp,Equals:tags.definitionOperator,Arrow:tags.function(tags.punctuation),": Spread":tags.punctuation,"( )":tags.paren,"[ ]":tags.squareBracket,"{ }":tags.brace,"InterpolationStart InterpolationEnd":tags.special(tags.brace),".":tags.derefOperator,", ;":tags.separator,"@":tags.meta,TypeName:tags.typeName,TypeDefinition:tags.definition(tags.typeName),"type enum interface implements namespace module declare":tags.definitionKeyword,"abstract global Privacy readonly override":tags.modifier,"is keyof unique infer asserts":tags.operatorKeyword,JSXAttributeValue:tags.attributeValue,JSXText:tags.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags.angleBracket,"JSXIdentifier JSXNameSpacedName":tags.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags.attributeName,"JSXBuiltin/JSXIdentifier":tags.standard(tags.tagName)}),spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,const:52,extends:56,this:60,true:68,false:68,null:80,void:84,typeof:88,super:104,new:138,delete:150,yield:159,await:163,class:168,public:231,private:231,protected:231,readonly:233,instanceof:252,satisfies:255,in:256,import:290,keyof:347,unique:351,infer:357,asserts:393,is:395,abstract:415,implements:417,type:419,let:422,var:424,using:427,interface:433,enum:437,namespace:443,module:445,declare:449,global:453,for:472,of:481,while:484,with:488,do:492,if:496,else:498,switch:502,case:508,try:514,catch:518,finally:522,return:526,throw:530,break:534,continue:538,debugger:542},spec_word={__proto__:null,async:125,get:127,set:129,declare:191,public:193,private:193,protected:193,static:195,abstract:197,override:199,readonly:205,accessor:207,new:399},spec_LessThan={__proto__:null,"<":189},parser=LRParser.deserialize({version:14,states:"$EOQ%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#D_O.QQlO'#DeO.bQlO'#DpO%[QlO'#DxO0fQlO'#EQOOQ!0Lf'#EY'#EYO1PQ`O'#EVOOQO'#En'#EnOOQO'#Ij'#IjO1XQ`O'#GrO1dQ`O'#EmO1iQ`O'#EmO3hQ!0MxO'#JpO6[Q!0MxO'#JqO6uQ`O'#F[O6zQ,UO'#FsOOQ!0Lf'#Fe'#FeO7VO7dO'#FeO7eQMhO'#F{O9UQ`O'#FzOOQ!0Lf'#Jq'#JqOOQ!0Lb'#Jp'#JpO9ZQ`O'#GvOOQ['#K]'#K]O9fQ`O'#IWO9kQ!0LrO'#IXOOQ['#J^'#J^OOQ['#I]'#I]Q`QlOOQ`QlOOO9sQ!L^O'#DtO9zQlO'#D|O:RQlO'#EOO9aQ`O'#GrO:YQMhO'#CoO:hQ`O'#ElO:sQ`O'#EwO:xQMhO'#FdO;gQ`O'#GrOOQO'#K^'#K^O;lQ`O'#K^O;zQ`O'#GzO;zQ`O'#G{O;zQ`O'#G}O9aQ`O'#HQO<qQ`O'#HTO>YQ`O'#CeO>jQ`O'#HaO>rQ`O'#HgO>rQ`O'#HiO`QlO'#HkO>rQ`O'#HmO>rQ`O'#HpO>wQ`O'#HvO>|Q!0LsO'#H|O%[QlO'#IOO?XQ!0LsO'#IQO?dQ!0LsO'#ISO9kQ!0LrO'#IUO?oQ!0MxO'#CiO@qQpO'#DjQOQ`OOO%[QlO'#EOOAXQ`O'#ERO:YQMhO'#ElOAdQ`O'#ElOAoQ!bO'#FdOOQ['#Cg'#CgOOQ!0Lb'#Do'#DoOOQ!0Lb'#Jt'#JtO%[QlO'#JtOOQO'#Jw'#JwOOQO'#If'#IfOBoQpO'#EeOOQ!0Lb'#Ed'#EdOOQ!0Lb'#J{'#J{OCkQ!0MSO'#EeOCuQpO'#EUOOQO'#Jv'#JvODZQpO'#JwOEhQpO'#EUOCuQpO'#EePEuO&2DjO'#CbPOOO)CD{)CD{OOOO'#I^'#I^OFQO#tO,59UOOQ!0Lh,59U,59UOOOO'#I_'#I_OF`O&jO,59UOFnQ!L^O'#DaOOOO'#Ia'#IaOFuO#@ItO,59yOOQ!0Lf,59y,59yOGTQlO'#IbOGhQ`O'#JrOIgQ!fO'#JrO+}QlO'#JrOInQ`O,5:POJUQ`O'#EnOJcQ`O'#KROJnQ`O'#KQOJnQ`O'#KQOJvQ`O,5;[OJ{Q`O'#KPOOQ!0Ln,5:[,5:[OKSQlO,5:[OMQQ!0MxO,5:dOMqQ`O,5:lON[Q!0LrO'#KOONcQ`O'#J}O9ZQ`O'#J}ONwQ`O'#J}O! PQ`O,5;ZO! UQ`O'#J}O!#ZQ!fO'#JqOOQ!0Lh'#Ci'#CiO%[QlO'#EQO!#yQ!fO,5:qOOQS'#Jx'#JxOOQO-E<h-E<hO9aQ`O,5=^O!$aQ`O,5=^O!$fQlO,5;XO!&iQMhO'#EiO!(SQ`O,5;XO!(XQlO'#DwO!(cQpO,5;bO!(kQpO,5;bO%[QlO,5;bOOQ['#FS'#FSOOQ['#FU'#FUO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cO%[QlO,5;cOOQ['#FY'#FYO!(yQlO,5;sOOQ!0Lf,5;x,5;xOOQ!0Lf,5;y,5;yOOQ!0Lf,5;{,5;{O%[QlO'#InO!*|Q!0LrO,5<hO%[QlO,5;cO!&iQMhO,5;cO!+kQMhO,5;cO!-]QMhO'#E[O%[QlO,5;vOOQ!0Lf,5;z,5;zO!-dQ,UO'#FiO!.aQ,UO'#KVO!-{Q,UO'#KVO!.hQ,UO'#KVOOQO'#KV'#KVO!.|Q,UO,5<ROOOW,5<_,5<_O!/_QlO'#FuOOOW'#Im'#ImO7VO7dO,5<PO!/fQ,UO'#FwOOQ!0Lf,5<P,5<PO!0VQ$IUO'#CwOOQ!0Lh'#C{'#C{O!0jO#@ItO'#DPO!1WQMjO,5<dO!1_Q`O,5<gO!2zQ(CWO'#GWO!3XQ`O'#GXO!3^Q`O'#GXO!4|Q(CWO'#G]O!6RQpO'#GaOOQO'#Gm'#GmO!+rQMhO'#GlOOQO'#Go'#GoO!+rQMhO'#GnO!6tQ$IUO'#JjOOQ!0Lh'#Jj'#JjO!7OQ`O'#JiO!7^Q`O'#JhO!7fQ`O'#CuOOQ!0Lh'#Cy'#CyO!7qQ`O'#C{OOQ!0Lh'#DT'#DTOOQ!0Lh'#DV'#DVO1SQ`O'#DXO!+rQMhO'#GOO!+rQMhO'#GQO!7vQ`O'#GSO!7{Q`O'#GTO!3^Q`O'#GZO!+rQMhO'#G`O;zQ`O'#JiO!8QQ`O'#EoO!8oQ`O,5<fOOQ!0Lb'#Cr'#CrO!8wQ`O'#EpO!9qQpO'#EqOOQ!0Lb'#KP'#KPO!9xQ!0LrO'#K_O9kQ!0LrO,5=bO`QlO,5>rOOQ['#Jf'#JfOOQ[,5>s,5>sOOQ[-E<Z-E<ZO!;wQ!0MxO,5:`O!9lQpO,5:^O!>bQ!0MxO,5:hO%[QlO,5:hO!@xQ!0MxO,5:jOOQO,5@x,5@xO!AiQMhO,5=^O!AwQ!0LrO'#JgO9UQ`O'#JgO!BYQ!0LrO,59ZO!BeQpO,59ZO!BmQMhO,59ZO:YQMhO,59ZO!BxQ`O,5;XO!CQQ`O'#H`O!CfQ`O'#KbO%[QlO,5;|O!9lQpO,5<OO!CnQ`O,5=yO!CsQ`O,5=yO!CxQ`O,5=yO9kQ!0LrO,5=yO;zQ`O,5=iOOQO'#Cw'#CwO!DWQpO,5=fO!D`QMhO,5=gO!DkQ`O,5=iO!DpQ!bO,5=lO!DxQ`O'#K^O>wQ`O'#HVO9aQ`O'#HXO!D}Q`O'#HXO:YQMhO'#HZO!ESQ`O'#HZOOQ[,5=o,5=oO!EXQ`O'#H[O!EjQ`O'#CoO!EoQ`O,59PO!EyQ`O,59PO!HOQlO,59POOQ[,59P,59PO!H`Q!0LrO,59PO%[QlO,59PO!JkQlO'#HcOOQ['#Hd'#HdOOQ['#He'#HeO`QlO,5={O!KRQ`O,5={O`QlO,5>RO`QlO,5>TO!KWQ`O,5>VO`QlO,5>XO!K]Q`O,5>[O!KbQlO,5>bOOQ[,5>h,5>hO%[QlO,5>hO9kQ!0LrO,5>jOOQ[,5>l,5>lO# lQ`O,5>lOOQ[,5>n,5>nO# lQ`O,5>nOOQ[,5>p,5>pO#!YQpO'#D]O%[QlO'#JtO#!{QpO'#JtO##VQpO'#DkO##hQpO'#DkO#%yQlO'#DkO#&QQ`O'#JsO#&YQ`O,5:UO#&_Q`O'#ErO#&mQ`O'#KSO#&uQ`O,5;]O#&zQpO'#DkO#'XQpO'#ETOOQ!0Lf,5:m,5:mO%[QlO,5:mO#'`Q`O,5:mO>wQ`O,5;WO!BeQpO,5;WO!BmQMhO,5;WO:YQMhO,5;WO#'hQ`O,5@`O#'mQ07dO,5:qOOQO-E<d-E<dO#(sQ!0MSO,5;POCuQpO,5:pO#(}QpO,5:pOCuQpO,5;PO!BYQ!0LrO,5:pOOQ!0Lb'#Eh'#EhOOQO,5;P,5;PO%[QlO,5;PO#)[Q!0LrO,5;PO#)gQ!0LrO,5;PO!BeQpO,5:pOOQO,5;V,5;VO#)uQ!0LrO,5;PPOOO'#I['#I[P#*ZO&2DjO,58|POOO,58|,58|OOOO-E<[-E<[OOQ!0Lh1G.p1G.pOOOO-E<]-E<]OOOO,59{,59{O#*fQ!bO,59{OOOO-E<_-E<_OOQ!0Lf1G/e1G/eO#*kQ!fO,5>|O+}QlO,5>|OOQO,5?S,5?SO#*uQlO'#IbOOQO-E<`-E<`O#+SQ`O,5@^O#+[Q!fO,5@^O#+cQ`O,5@lOOQ!0Lf1G/k1G/kO%[QlO,5@mO#+kQ`O'#IhOOQO-E<f-E<fO#+cQ`O,5@lOOQ!0Lb1G0v1G0vOOQ!0Ln1G/v1G/vOOQ!0Ln1G0W1G0WO%[QlO,5@jO#,PQ!0LrO,5@jO#,bQ!0LrO,5@jO#,iQ`O,5@iO9ZQ`O,5@iO#,qQ`O,5@iO#-PQ`O'#IkO#,iQ`O,5@iOOQ!0Lb1G0u1G0uO!(cQpO,5:sO!(nQpO,5:sOOQS,5:u,5:uO#-qQdO,5:uO#-yQMhO1G2xO9aQ`O1G2xOOQ!0Lf1G0s1G0sO#.XQ!0MxO1G0sO#/^Q!0MvO,5;TOOQ!0Lh'#GV'#GVO#/zQ!0MzO'#JjO!$fQlO1G0sO#2VQ!fO'#JuO%[QlO'#JuO#2aQ`O,5:cOOQ!0Lh'#D]'#D]OOQ!0Lf1G0|1G0|O%[QlO1G0|OOQ!0Lf1G1e1G1eO#2fQ`O1G0|O#4zQ!0MxO1G0}O#5RQ!0MxO1G0}O#7iQ!0MxO1G0}O#7pQ!0MxO1G0}O#:WQ!0MxO1G0}O#<nQ!0MxO1G0}O#<uQ!0MxO1G0}O#<|Q!0MxO1G0}O#?dQ!0MxO1G0}O#?kQ!0MxO1G0}O#AxQ?MtO'#CiO#CsQ?MtO1G1_O#CzQ?MtO'#JqO#D_Q!0MxO,5?YOOQ!0Lb-E<l-E<lO#FlQ!0MxO1G0}O#GiQ!0MzO1G0}OOQ!0Lf1G0}1G0}O#HlQMjO'#JzO#HvQ`O,5:vO#H{Q!0MxO1G1bO#IoQ,UO,5<VO#IwQ,UO,5<WO#JPQ,UO'#FnO#JhQ`O'#FmOOQO'#KW'#KWOOQO'#Il'#IlO#JmQ,UO1G1mOOQ!0Lf1G1m1G1mOOOW1G1x1G1xO#KOQ?MtO'#JpO#KYQ`O,5<aO!(yQlO,5<aOOOW-E<k-E<kOOQ!0Lf1G1k1G1kO#K_QpO'#KVOOQ!0Lf,5<c,5<cO#KgQpO,5<cO#KlQMhO'#DROOOO'#I`'#I`O#KsO#@ItO,59kOOQ!0Lh,59k,59kO%[QlO1G2OO!7{Q`O'#IpO#LOQ`O,5<yOOQ!0Lh,5<v,5<vO!+rQMhO'#IsO#LlQMjO,5=WO!+rQMhO'#IuO#M_QMjO,5=YO!&iQMhO,5=[OOQO1G2R1G2RO#MiQ!dO'#CrO#M|Q(CWO'#EpO$ RQpO'#GaO$ iQ!dO,5<rO$ pQ`O'#KYO9ZQ`O'#KYO$!OQ`O,5<tO!+rQMhO,5<sO$!TQ`O'#GYO$!fQ`O,5<sO$!kQ!dO'#GVO$!xQ!dO'#KZO$#SQ`O'#KZO!&iQMhO'#KZO$#XQ`O,5<wO$#^QlO'#JtO$#hQpO'#GbO##hQpO'#GbO$#yQ`O'#GfO!3^Q`O'#GjO$$OQ!0LrO'#IrO$$ZQpO,5<{OOQ!0Lp,5<{,5<{O$$bQpO'#GbO$$oQpO'#GcO$%QQpO'#GcO$%VQMjO,5=WO$%gQMjO,5=YOOQ!0Lh,5=],5=]O!+rQMhO,5@TO!+rQMhO,5@TO$%wQ`O'#IwO$&VQ`O,5@SO$&_Q`O,59aOOQ!0Lh,59g,59gO$'UQ$IYO,59sOOQ!0Lh'#Jn'#JnO$'wQMjO,5<jO$(jQMjO,5<lO@iQ`O,5<nOOQ!0Lh,5<o,5<oO$(tQ`O,5<uO$(yQMjO,5<zO$)ZQ`O,5@TO$)iQ`O'#J}O!$fQlO1G2QO$)nQ`O1G2QO9ZQ`O'#KQO9ZQ`O'#ErO%[QlO'#ErO9ZQ`O'#IyO$)sQ!0LrO,5@yOOQ[1G2|1G2|OOQ[1G4^1G4^OOQ!0Lf1G/z1G/zOOQ!0Lf1G/x1G/xO$+uQ!0MxO1G0SOOQ[1G2x1G2xO!&iQMhO1G2xO%[QlO1G2xO#-|Q`O1G2xO$-yQMhO'#EiOOQ!0Lb,5@R,5@RO$.WQ!0LrO,5@ROOQ[1G.u1G.uO!BYQ!0LrO1G.uO!BeQpO1G.uO!BmQMhO1G.uO$.iQ`O1G0sO$.nQ`O'#CiO$.yQ`O'#KcO$/RQ`O,5=zO$/WQ`O'#KcO$/]Q`O'#KcO$/kQ`O'#JPO$/yQ`O,5@|O$0RQ!fO1G1hOOQ!0Lf1G1j1G1jO9aQ`O1G3eO@iQ`O1G3eO$0YQ`O1G3eO$0_Q`O1G3eOOQ[1G3e1G3eO!DkQ`O1G3TO!&iQMhO1G3QO$0dQ`O1G3QOOQ[1G3R1G3RO!&iQMhO1G3RO$0iQ`O1G3RO$0qQpO'#HPOOQ[1G3T1G3TO!5|QpO'#I{O!DpQ!bO1G3WOOQ[1G3W1G3WOOQ[,5=q,5=qO$0yQMhO,5=sO9aQ`O,5=sO$#yQ`O,5=uO9UQ`O,5=uO!BeQpO,5=uO!BmQMhO,5=uO:YQMhO,5=uO$1XQ`O'#KaO$1dQ`O,5=vOOQ[1G.k1G.kO$1iQ!0LrO1G.kO@iQ`O1G.kO$1tQ`O1G.kO9kQ!0LrO1G.kO$3|Q!fO,5AOO$4ZQ`O,5AOO9ZQ`O,5AOO$4fQlO,5=}O$4mQ`O,5=}OOQ[1G3g1G3gO`QlO1G3gOOQ[1G3m1G3mOOQ[1G3o1G3oO>rQ`O1G3qO$4rQlO1G3sO$8vQlO'#HrOOQ[1G3v1G3vO$9TQ`O'#HxO>wQ`O'#HzOOQ[1G3|1G3|O$9]QlO1G3|O9kQ!0LrO1G4SOOQ[1G4U1G4UOOQ!0Lb'#G^'#G^O9kQ!0LrO1G4WO9kQ!0LrO1G4YO$=dQ`O,5@`O!(yQlO,5;^O9ZQ`O,5;^O>wQ`O,5:VO!(yQlO,5:VO!BeQpO,5:VO$=iQ?MtO,5:VOOQO,5;^,5;^O$=sQpO'#IcO$>ZQ`O,5@_OOQ!0Lf1G/p1G/pO$>cQpO'#IiO$>mQ`O,5@nOOQ!0Lb1G0w1G0wO##hQpO,5:VOOQO'#Ie'#IeO$>uQpO,5:oOOQ!0Ln,5:o,5:oO#'cQ`O1G0XOOQ!0Lf1G0X1G0XO%[QlO1G0XOOQ!0Lf1G0r1G0rO>wQ`O1G0rO!BeQpO1G0rO!BmQMhO1G0rOOQ!0Lb1G5z1G5zO!BYQ!0LrO1G0[OOQO1G0k1G0kO%[QlO1G0kO$>|Q!0LrO1G0kO$?XQ!0LrO1G0kO!BeQpO1G0[OCuQpO1G0[O$?gQ!0LrO1G0kOOQO1G0[1G0[O$?{Q!0MxO1G0kPOOO-E<Y-E<YPOOO1G.h1G.hOOOO1G/g1G/gO$@VQ!bO,5<hO$@_Q!fO1G4hOOQO1G4n1G4nO%[QlO,5>|O$@iQ`O1G5xO$@qQ`O1G6WO$@yQ!fO1G6XO9ZQ`O,5?SO$ATQ!0MxO1G6UO%[QlO1G6UO$AeQ!0LrO1G6UO$AvQ`O1G6TO$AvQ`O1G6TO9ZQ`O1G6TO$BOQ`O,5?VO9ZQ`O,5?VOOQO,5?V,5?VO$BdQ`O,5?VO$)iQ`O,5?VOOQO-E<i-E<iOOQS1G0_1G0_OOQS1G0a1G0aO#-tQ`O1G0aOOQ[7+(d7+(dO!&iQMhO7+(dO%[QlO7+(dO$BrQ`O7+(dO$B}QMhO7+(dO$C]Q!0MzO,5=WO$EhQ!0MzO,5=YO$GsQ!0MzO,5=WO$JUQ!0MzO,5=YO$LgQ!0MzO,59sO$NlQ!0MzO,5<jO%!wQ!0MzO,5<lO%%SQ!0MzO,5<zOOQ!0Lf7+&_7+&_O%'eQ!0MxO7+&_O%(XQlO'#IdO%(fQ`O,5@aO%(nQ!fO,5@aOOQ!0Lf1G/}1G/}O%(xQ`O7+&hOOQ!0Lf7+&h7+&hO%(}Q?MtO,5:dO%[QlO7+&yO%)XQ?MtO,5:`O%)fQ?MtO,5:hO%)pQ?MtO,5:jO%)zQMhO'#IgO%*UQ`O,5@fOOQ!0Lh1G0b1G0bOOQO1G1q1G1qOOQO1G1r1G1rO%*^Q!jO,5<YO!(yQlO,5<XOOQO-E<j-E<jOOQ!0Lf7+'X7+'XOOOW7+'d7+'dOOOW1G1{1G1{O%*iQ`O1G1{OOQ!0Lf1G1}1G1}OOOO,59m,59mO%*nQ!dO,59mOOOO-E<^-E<^OOQ!0Lh1G/V1G/VO%*uQ!0MxO7+'jOOQ!0Lh,5?[,5?[O%+iQMhO1G2eP%+pQ`O'#IpPOQ!0Lh-E<n-E<nO%,^QMjO,5?_OOQ!0Lh-E<q-E<qO%-PQMjO,5?aOOQ!0Lh-E<s-E<sO%-ZQ!dO1G2vO%-bQ!dO'#CrO%-xQMhO'#KQO$#^QlO'#JtOOQ!0Lh1G2^1G2^O%.PQ`O'#IoO%.eQ`O,5@tO%.eQ`O,5@tO%.mQ`O,5@tO%.xQ`O,5@tOOQO1G2`1G2`O%/WQMjO1G2_O!+rQMhO1G2_O%/hQ(CWO'#IqO%/uQ`O,5@uO!&iQMhO,5@uO%/}Q!dO,5@uOOQ!0Lh1G2c1G2cO%2_Q!fO'#CiO%2iQ`O,5=OOOQ!0Lb,5<|,5<|O%2qQpO,5<|OOQ!0Lb,5<},5<}OCfQ`O,5<|O%2|QpO,5<|OOQ!0Lb,5=Q,5=QO$)iQ`O,5=UOOQO,5?^,5?^OOQO-E<p-E<pOOQ!0Lp1G2g1G2gO##hQpO,5<|O$#^QlO,5=OO%3[Q`O,5<}O%3gQpO,5<}O!+rQMhO'#IsO%4aQMjO1G2rO!+rQMhO'#IuO%5SQMjO1G2tO%5^QMjO1G5oO%5hQMjO1G5oOOQO,5?c,5?cOOQO-E<u-E<uOOQO1G.{1G.{O!9lQpO,59uO%[QlO,59uOOQ!0Lh,5<i,5<iO%5uQ`O1G2YO!+rQMhO1G2aO!+rQMhO1G5oO!+rQMhO1G5oO%5zQ!0MxO7+'lOOQ!0Lf7+'l7+'lO!$fQlO7+'lO%6nQ`O,5;^OOQ!0Lb,5?e,5?eOOQ!0Lb-E<w-E<wO%6sQ!dO'#K[O#'cQ`O7+(dO4UQ!fO7+(dO$BuQ`O7+(dO%6}Q!0MvO'#CiO%7nQ!0LrO,5=RO%8PQ!0MvO,5=RO%8dQ`O,5=ROOQ!0Lb1G5m1G5mOOQ[7+$a7+$aO!BYQ!0LrO7+$aO!BeQpO7+$aO!$fQlO7+&_O%8lQ`O'#JOO%9TQ`O,5@}OOQO1G3f1G3fO9aQ`O,5@}O%9TQ`O,5@}O%9]Q`O,5@}OOQO,5?k,5?kOOQO-E<}-E<}OOQ!0Lf7+'S7+'SO%9bQ`O7+)PO9kQ!0LrO7+)PO9aQ`O7+)PO@iQ`O7+)POOQ[7+(o7+(oO%9gQ!0MvO7+(lO!&iQMhO7+(lO!DfQ`O7+(mOOQ[7+(m7+(mO!&iQMhO7+(mO%9qQ`O'#K`O%9|Q`O,5=kOOQO,5?g,5?gOOQO-E<y-E<yOOQ[7+(r7+(rO%;`QpO'#HYOOQ[1G3_1G3_O!&iQMhO1G3_O%[QlO1G3_O%;gQ`O1G3_O%;rQMhO1G3_O9kQ!0LrO1G3aO$#yQ`O1G3aO9UQ`O1G3aO!BeQpO1G3aO!BmQMhO1G3aO%<QQ`O'#I}O%<fQ`O,5@{O%<nQpO,5@{OOQ!0Lb1G3b1G3bOOQ[7+$V7+$VO@iQ`O7+$VO9kQ!0LrO7+$VO%<yQ`O7+$VO%[QlO1G6jO%[QlO1G6kO%=OQ!0LrO1G6jO%=YQlO1G3iO%=aQ`O1G3iO%=fQlO1G3iOOQ[7+)R7+)RO9kQ!0LrO7+)]O`QlO7+)_OOQ['#Kf'#KfOOQ['#JQ'#JQO%=mQlO,5>^OOQ[,5>^,5>^O%[QlO'#HsO%=zQ`O'#HuOOQ[,5>d,5>dO9ZQ`O,5>dOOQ[,5>f,5>fOOQ[7+)h7+)hOOQ[7+)n7+)nOOQ[7+)r7+)rOOQ[7+)t7+)tO%>PQpO1G5zO%>kQ?MtO1G0xO%>uQ`O1G0xOOQO1G/q1G/qO%?QQ?MtO1G/qO>wQ`O1G/qO!(yQlO'#DkOOQO,5>},5>}OOQO-E<a-E<aOOQO,5?T,5?TOOQO-E<g-E<gO!BeQpO1G/qOOQO-E<c-E<cOOQ!0Ln1G0Z1G0ZOOQ!0Lf7+%s7+%sO#'cQ`O7+%sOOQ!0Lf7+&^7+&^O>wQ`O7+&^O!BeQpO7+&^OOQO7+%v7+%vO$?{Q!0MxO7+&VOOQO7+&V7+&VO%[QlO7+&VO%?[Q!0LrO7+&VO!BYQ!0LrO7+%vO!BeQpO7+%vO%?gQ!0LrO7+&VO%?uQ!0MxO7++pO%[QlO7++pO%@VQ`O7++oO%@VQ`O7++oOOQO1G4q1G4qO9ZQ`O1G4qO%@_Q`O1G4qOOQS7+%{7+%{O#'cQ`O<<LOO4UQ!fO<<LOO%@mQ`O<<LOOOQ[<<LO<<LOO!&iQMhO<<LOO%[QlO<<LOO%@uQ`O<<LOO%AQQ!0MzO,5?_O%C]Q!0MzO,5?aO%EhQ!0MzO1G2_O%GyQ!0MzO1G2rO%JUQ!0MzO1G2tO%LaQ!fO,5?OO%[QlO,5?OOOQO-E<b-E<bO%LkQ`O1G5{OOQ!0Lf<<JS<<JSO%LsQ?MtO1G0sO%NzQ?MtO1G0}O& RQ?MtO1G0}O&#SQ?MtO1G0}O&#ZQ?MtO1G0}O&%[Q?MtO1G0}O&']Q?MtO1G0}O&'dQ?MtO1G0}O&'kQ?MtO1G0}O&)lQ?MtO1G0}O&)sQ?MtO1G0}O&)zQ!0MxO<<JeO&+rQ?MtO1G0}O&,oQ?MvO1G0}O&-rQ?MvO'#JjO&/xQ?MtO1G1bO&0VQ?MtO1G0SO&0aQMjO,5?ROOQO-E<e-E<eO!(yQlO'#FpOOQO'#KX'#KXOOQO1G1t1G1tO&0kQ`O1G1sO&0pQ?MtO,5?YOOOW7+'g7+'gOOOO1G/X1G/XO&0zQ!dO1G4vOOQ!0Lh7+(P7+(PP!&iQMhO,5?[O!+rQMhO7+(bO&1RQ`O,5?ZO9ZQ`O,5?ZOOQO-E<m-E<mO&1aQ`O1G6`O&1aQ`O1G6`O&1iQ`O1G6`O&1tQMjO7+'yO&2UQ!dO,5?]O&2`Q`O,5?]O!&iQMhO,5?]OOQO-E<o-E<oO&2eQ!dO1G6aO&2oQ`O1G6aO&2wQ`O1G2jO!&iQMhO1G2jOOQ!0Lb1G2h1G2hOOQ!0Lb1G2i1G2iO%2qQpO1G2hO!BeQpO1G2hOCfQ`O1G2hOOQ!0Lb1G2p1G2pO&2|QpO1G2hO&3[Q`O1G2jO$)iQ`O1G2iOCfQ`O1G2iO$#^QlO1G2jO&3dQ`O1G2iO&4WQMjO,5?_OOQ!0Lh-E<r-E<rO&4yQMjO,5?aOOQ!0Lh-E<t-E<tO!+rQMhO7++ZOOQ!0Lh1G/a1G/aO&5TQ`O1G/aOOQ!0Lh7+'t7+'tO&5YQMjO7+'{O&5jQMjO7++ZO&5tQMjO7++ZO&6RQ!0MxO<<KWOOQ!0Lf<<KW<<KWO&6uQ`O1G0xO!&iQMhO'#IxO&6zQ`O,5@vO&8|Q!fO<<LOO!&iQMhO1G2mO&9TQ!0LrO1G2mOOQ[<<G{<<G{O!BYQ!0LrO<<G{O&9fQ!0MxO<<IyOOQ!0Lf<<Iy<<IyOOQO,5?j,5?jO&:YQ`O,5?jO&:_Q`O,5?jOOQO-E<|-E<|O&:mQ`O1G6iO&:mQ`O1G6iO9aQ`O1G6iO@iQ`O<<LkOOQ[<<Lk<<LkO&:uQ`O<<LkO9kQ!0LrO<<LkOOQ[<<LW<<LWO%9gQ!0MvO<<LWOOQ[<<LX<<LXO!DfQ`O<<LXO&:zQpO'#IzO&;VQ`O,5@zO!(yQlO,5@zOOQ[1G3V1G3VOOQO'#I|'#I|O9kQ!0LrO'#I|O&;_QpO,5=tOOQ[,5=t,5=tO&;fQpO'#EeO&;mQpO'#GdO&;rQ`O7+(yO&;wQ`O7+(yOOQ[7+(y7+(yO!&iQMhO7+(yO%[QlO7+(yO&<PQ`O7+(yOOQ[7+({7+({O9kQ!0LrO7+({O$#yQ`O7+({O9UQ`O7+({O!BeQpO7+({O&<[Q`O,5?iOOQO-E<{-E<{OOQO'#H]'#H]O&<gQ`O1G6gO9kQ!0LrO<<GqOOQ[<<Gq<<GqO@iQ`O<<GqO&<oQ`O7+,UO&<tQ`O7+,VO%[QlO7+,UO%[QlO7+,VOOQ[7+)T7+)TO&<yQ`O7+)TO&=OQlO7+)TO&=VQ`O7+)TOOQ[<<Lw<<LwOOQ[<<Ly<<LyOOQ[-E=O-E=OOOQ[1G3x1G3xO&=[Q`O,5>_OOQ[,5>a,5>aO&=aQ`O1G4OO9ZQ`O7+&dO!(yQlO7+&dOOQO7+%]7+%]O&=fQ?MtO1G6XO>wQ`O7+%]OOQ!0Lf<<I_<<I_OOQ!0Lf<<Ix<<IxO>wQ`O<<IxOOQO<<Iq<<IqO$?{Q!0MxO<<IqO%[QlO<<IqOOQO<<Ib<<IbO!BYQ!0LrO<<IbO&=pQ!0LrO<<IqO&={Q!0MxO<= [O&>]Q`O<= ZOOQO7+*]7+*]O9ZQ`O7+*]OOQ[ANAjANAjO&>eQ!fOANAjO!&iQMhOANAjO#'cQ`OANAjO4UQ!fOANAjO&>lQ`OANAjO%[QlOANAjO&>tQ!0MzO7+'yO&AVQ!0MzO,5?_O&CbQ!0MzO,5?aO&EmQ!0MzO7+'{O&HOQ!fO1G4jO&HYQ?MtO7+&_O&J^Q?MvO,5=WO&LeQ?MvO,5=YO&LuQ?MvO,5=WO&MVQ?MvO,5=YO&MgQ?MvO,59sO' mQ?MvO,5<jO'#pQ?MvO,5<lO'&UQ?MvO,5<zO''zQ?MtO7+'jO'(XQ?MtO7+'lO'(fQ`O,5<[OOQO7+'_7+'_OOQ!0Lh7+*b7+*bO'(kQMjO<<K|OOQO1G4u1G4uO'(rQ`O1G4uO'(}Q`O1G4uO')]Q`O7++zO')]Q`O7++zO!&iQMhO1G4wO')eQ!dO1G4wO')oQ`O7++{O')wQ`O7+(UO'*SQ!dO7+(UOOQ!0Lb7+(S7+(SOOQ!0Lb7+(T7+(TO!BeQpO7+(SOCfQ`O7+(SO'*^Q`O7+(UO!&iQMhO7+(UO$)iQ`O7+(TO'*cQ`O7+(UOCfQ`O7+(TO'*kQMjO<<NuOOQ!0Lh7+${7+${O!+rQMhO<<NuO'*uQ!dO,5?dOOQO-E<v-E<vO'+PQ!0MvO7+(XO!&iQMhO7+(XOOQ[AN=gAN=gO9aQ`O1G5UOOQO1G5U1G5UO'+aQ`O1G5UO'+fQ`O7+,TO'+fQ`O7+,TO9kQ!0LrOANBVO@iQ`OANBVOOQ[ANBVANBVOOQ[ANArANArOOQ[ANAsANAsO'+nQ`O,5?fOOQO-E<x-E<xO'+yQ?MtO1G6fOOQO,5?h,5?hOOQO-E<z-E<zOOQ[1G3`1G3`O',TQ`O,5=OOOQ[<<Le<<LeO!&iQMhO<<LeO&;rQ`O<<LeO',YQ`O<<LeO%[QlO<<LeOOQ[<<Lg<<LgO9kQ!0LrO<<LgO$#yQ`O<<LgO9UQ`O<<LgO',bQpO1G5TO',mQ`O7+,ROOQ[AN=]AN=]O9kQ!0LrOAN=]OOQ[<= p<= pOOQ[<= q<= qO',uQ`O<= pO',zQ`O<= qOOQ[<<Lo<<LoO'-PQ`O<<LoO'-UQlO<<LoOOQ[1G3y1G3yO>wQ`O7+)jO'-]Q`O<<JOO'-hQ?MtO<<JOOOQO<<Hw<<HwOOQ!0LfAN?dAN?dOOQOAN?]AN?]O$?{Q!0MxOAN?]OOQOAN>|AN>|O%[QlOAN?]OOQO<<Mw<<MwOOQ[G27UG27UO!&iQMhOG27UO#'cQ`OG27UO'-rQ!fOG27UO4UQ!fOG27UO'-yQ`OG27UO'.RQ?MtO<<JeO'.`Q?MvO1G2_O'0UQ?MvO,5?_O'2XQ?MvO,5?aO'4[Q?MvO1G2rO'6_Q?MvO1G2tO'8bQ?MtO<<KWO'8oQ?MtO<<IyOOQO1G1v1G1vO!+rQMhOANAhOOQO7+*a7+*aO'8|Q`O7+*aO'9XQ`O<= fO'9aQ!dO7+*cOOQ!0Lb<<Kp<<KpO$)iQ`O<<KpOCfQ`O<<KpO'9kQ`O<<KpO!&iQMhO<<KpOOQ!0Lb<<Kn<<KnO!BeQpO<<KnO'9vQ!dO<<KpOOQ!0Lb<<Ko<<KoO':QQ`O<<KpO!&iQMhO<<KpO$)iQ`O<<KoO':VQMjOANDaO':aQ!0MvO<<KsOOQO7+*p7+*pO9aQ`O7+*pO':qQ`O<= oOOQ[G27qG27qO9kQ!0LrOG27qO!(yQlO1G5QO':yQ`O7+,QO';RQ`O1G2jO&;rQ`OANBPOOQ[ANBPANBPO!&iQMhOANBPO';WQ`OANBPOOQ[ANBRANBRO9kQ!0LrOANBRO$#yQ`OANBROOQO'#H^'#H^OOQO7+*o7+*oOOQ[G22wG22wOOQ[ANE[ANE[OOQ[ANE]ANE]OOQ[ANBZANBZO';`Q`OANBZOOQ[<<MU<<MUO!(yQlOAN?jOOQOG24wG24wO$?{Q!0MxOG24wO#'cQ`OLD,pOOQ[LD,pLD,pO!&iQMhOLD,pO';eQ!fOLD,pO';lQ?MvO7+'yO'=bQ?MvO,5?_O'?eQ?MvO,5?aO'AhQ?MvO7+'{O'C^QMjOG27SOOQO<<M{<<M{OOQ!0LbANA[ANA[O$)iQ`OANA[OCfQ`OANA[O'CnQ!dOANA[OOQ!0LbANAYANAYO'CuQ`OANA[O!&iQMhOANA[O'DQQ!dOANA[OOQ!0LbANAZANAZOOQO<<N[<<N[OOQ[LD-]LD-]O'D[Q?MtO7+*lOOQO'#Ge'#GeOOQ[G27kG27kO&;rQ`OG27kO!&iQMhOG27kOOQ[G27mG27mO9kQ!0LrOG27mOOQ[G27uG27uO'DfQ?MtOG25UOOQOLD*cLD*cOOQ[!$(![!$(![O#'cQ`O!$(![O!&iQMhO!$(![O'DpQ!0MzOG27SOOQ!0LbG26vG26vO$)iQ`OG26vO'GRQ`OG26vOCfQ`OG26vO'G^Q!dOG26vO!&iQMhOG26vOOQ[LD-VLD-VO&;rQ`OLD-VOOQ[LD-XLD-XOOQ[!)9Ev!)9EvO#'cQ`O!)9EvOOQ!0LbLD,bLD,bO$)iQ`OLD,bOCfQ`OLD,bO'GeQ`OLD,bO'GpQ!dOLD,bOOQ[!$(!q!$(!qOOQ[!.K;b!.K;bO'GwQ?MvOG27SOOQ!0Lb!$( |!$( |O$)iQ`O!$( |OCfQ`O!$( |O'ImQ`O!$( |OOQ!0Lb!)9Eh!)9EhO$)iQ`O!)9EhOCfQ`O!)9EhOOQ!0Lb!.K;S!.K;SO$)iQ`O!.K;SOOQ!0Lb!4/0n!4/0nO!(yQlO'#DxO1PQ`O'#EVO'IxQ!fO'#JpO'JPQ!L^O'#DtO'JWQlO'#D|O'J_Q!fO'#CiO'LuQ!fO'#CiO!(yQlO'#EOO'MVQlO,5;XO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO,5;cO!(yQlO'#InO( YQ`O,5<hO!(yQlO,5;cO( bQMhO,5;cO(!{QMhO,5;cO!(yQlO,5;vO!&iQMhO'#GlO( bQMhO'#GlO!&iQMhO'#GnO( bQMhO'#GnO1SQ`O'#DXO1SQ`O'#DXO!&iQMhO'#GOO( bQMhO'#GOO!&iQMhO'#GQO( bQMhO'#GQO!&iQMhO'#G`O( bQMhO'#G`O!(yQlO,5:hO(#SQpO'#D]O(#^QpO'#JtO!(yQlO,5@mO'MVQlO1G0sO(#hQ?MtO'#CiO!(yQlO1G2OO!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO(#rQ!dO'#CrO!&iQMhO,5<sO( bQMhO,5<sO'MVQlO1G2QO!(yQlO7+&yO!&iQMhO1G2_O( bQMhO1G2_O!&iQMhO'#IsO( bQMhO'#IsO!&iQMhO'#IuO( bQMhO'#IuO!&iQMhO1G2aO( bQMhO1G2aO'MVQlO7+'lO'MVQlO7+&_O!&iQMhOANAhO( bQMhOANAhO($VQ`O'#EmO($[Q`O'#EmO($dQ`O'#F[O($iQ`O'#EwO($nQ`O'#KRO($yQ`O'#KPO(%UQ`O,5;XO(%ZQMjO,5<dO(%bQ`O'#GXO(%gQ`O'#GXO(%lQ`O,5<fO(%tQ`O,5;XO(%|Q?MtO1G1_O(&TQ`O,5<sO(&YQ`O,5<sO(&_Q`O,5<uO(&dQ`O,5<uO(&iQ`O1G2QO(&nQ`O1G0sO(&sQMjO<<K|O(&zQMjO<<K|O7eQMhO'#F{O9UQ`O'#FzOAdQ`O'#ElO!(yQlO,5;sO!3^Q`O'#GXO!3^Q`O'#GXO!3^Q`O'#GZO!3^Q`O'#GZO!+rQMhO7+(bO!+rQMhO7+(bO%-ZQ!dO1G2vO%-ZQ!dO1G2vO!&iQMhO,5=[O!&iQMhO,5=[",stateData:"((P~O'zOS'{OSTOS'|RQ~OPYOQYOSfOY!VOaqOdzOeyOj!POnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!swO!vxO!z]O$V|O$miO%g}O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO&U!WO&[!XO&^!YO&`!ZO&b![O&e!]O&k!^O&q!_O&s!`O&u!aO&w!bO&y!cO(RSO(TTO(WUO(_VO(m[O~OWtO~P`OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa!wOq!nO!Q!oO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!xO#U!pO#V!pO#Y!zO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O'|!{O~OP]XR]X[]Xa]Xp]X!O]X!Q]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X'x]X(_]X(p]X(w]X(x]X~O!e%QX~P(qO_!}O(T#PO(U!}O(V#PO~O_#QO(V#PO(W#PO(X#QO~Ov#SO!S#TO(`#TO(a#VO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R;{O(TTO(WUO(_VO(m[O~O!Y#ZO!Z#WO!W(fP!W(tP~P+}O![#cO~P`OPYOQYOSfOd!jOe!iOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(TTO(WUO(_VO(m[O~On#mO!Y#iO!z]O#g#lO#h#iO(R;|O!i(qP~P.iO!j#oO(R#nO~O!v#sO!z]O%g#tO~O#i#uO~O!e#vO#i#uO~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z$_O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa(dX'x(dX'u(dX!i(dX!W(dX!](dX%h(dX!e(dX~P1qO#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX!](eX%h(eX~Oa(eX'x(eX'u(eX!W(eX!i(eXt(eX!e(eX~P4UO#^$eO~O$[$hO$^$gO$e$mO~OSfO!]$nO$h$oO$j$qO~Oh%VOj%cOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R$sO(TTO(WUO(_$uO(w$}O(x%POg([P~O!j%dO~O!Q%gO!]%hO(R%fO~O!e%lO~Oa%mO'x%mO~O!O%qO~P%[O(S!lO~P%[O%m%uO~P%[Oh%VO!j%dO(R%fO(S!lO~Oe%|O!j%dO(R%fO~O#t$RO~O!O&RO!]&OO!j&QO%i&UO(R%fO(S!lO(TTO(WUO`)UP~O!v#sO~O%r&WO!Q)QX!])QX(R)QX~O(R&XO~Oj!PO!s&^O%i!QO%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO~Od&cOe&bO!v&`O%g&aO%z&_O~P<POd&fOeyOj!PO!]&eO!s&^O!vxO!z]O%g}O%k!OO%l!OO%m!OO%p!RO%r!SO%u!TO%v!TO%x!UO~Ob&iO#^&lO%i&gO(S!lO~P=UO!j&mO!s&qO~O!j#oO~O!]XO~Oa%mO'v&yO'x%mO~Oa%mO'v&|O'x%mO~Oa%mO'v'OO'x%mO~O'u]X!W]Xt]X!i]X&Y]X!]]X%h]X!e]X~P(qO!`']O!a'UO!b'UO(S!lO(TTO(WUO~Oq'SO!Q'RO!Y'VO(c'QO![(gP![(vP~P@]Ol'`O!]'^O(R%fO~Oe'eO!j%dO(R%fO~O!O&RO!j&QO~Oq!nO!Q!oO!z;wO#R!pO#S!pO#U!pO#V!pO(S!lO(TTO(WUO(c!mO(m!sO~O!`'kO!a'jO!b'jO#T!pO#Y'lO#Z'lO~PAwOa%mOh%VO!e#vO!j%dO'x%mO(p'nO~O!n'rO#^'pO~PCVOq!nO!Q!oO(TTO(WUO(c!mO(m!sO~O!]XOq(kX!Q(kX!`(kX!a(kX!b(kX!z(kX#R(kX#S(kX#T(kX#U(kX#V(kX#Y(kX#Z(kX(S(kX(T(kX(W(kX(c(kX(m(kX~O!a'jO!b'jO(S!lO~PCuO'}'vO(O'vO(P'xO~O_!}O(T'zO(U!}O(V'zO~O_#QO(V'zO(W'zO(X#QO~Ot'|O~P%[Ov#SO!S#TO(`#TO(a(PO~O!Y(RO!W'UX!W'[X!Z'UX!Z'[X~P+}O!Z(TO!W(fX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!Z(TO!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~O!W(fX~PGpO!W(YO~O!W(sX!Z(sX!e(sX!i(sX(p(sX~O#^(sX#i#bX![(sX~PIsO#^(ZO!W(uX!Z(uX~O!Z([O!W(tX~O!W(_O~O#^$eO~PIsO![(`O~P`OR#zO!O#yO!Q#{O!j#xO(_VOP!la[!lap!la!Z!la!n!la#P!la#l!la#m!la#n!la#o!la#p!la#q!la#r!la#s!la#t!la#u!la#w!la#y!la#z!la(p!la(w!la(x!la~Oa!la'x!la'u!la!W!la!i!lat!la!]!la%h!la!e!la~PKZO!i(aO~O!e#vO#^(bO(p'nO!Z(rXa(rX'x(rX~O!i(rX~PMvO!Q%gO!]%hO!z]O#g(gO#h(fO(R%fO~O!Z(hO!i(qX~O!i(jO~O!Q%gO!]%hO#h(fO(R%fO~OP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#t(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O!e#vO!i(eX~P! dOR(lO!O(kO!j#xO#Q$dO!z!ya!Q!ya~O!v!ya%g!ya!]!ya#g!ya#h!ya(R!ya~P!#eO!v(pO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]XO!guO!jZO!mYO!nYO!oYO!qvO!s!gO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~O#i(vO~O!Y(xO!i(iP~P%[O(c(zO(m[O~O!Q(|O!j#xO(c(zO(m[O~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z$_Oa$pa'x$pa'u$pa!i$pa!W$pa!]$pa%h$pa!e$pa~Oj)bO~P!&iOh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|%[O!Q${O!]$|O!g%aO!j$xO#h%bO$V%_O$s%]O$u%^O$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Og(nP~P!+rO!O)gO!e)fO!]$]X$Y$]X$[$]X$^$]X$e$]X~O!e)fO!](yX$Y(yX$[(yX$^(yX$e(yX~O!O)gO~P!-{O!O)gO!](yX$Y(yX$[(yX$^(yX$e(yX~O!])iO$Y)mO$[)hO$^)hO$e)nO~O!Y)qO~P!(yO$[$hO$^$gO$e)uO~Ol$yX!O$yX#Q$yX'w$yX(w$yX(x$yX~OgkXg$yXlkX!ZkX#^kX~P!/qOv)wO(`)xO(a)zO~Ol*TO!O)|O'w)}O(w$}O(x%PO~Og){O~P!0uOg*UO~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q*WO!]*XO!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~O!Y*[O(R*VO!i(|P~P!1dO#i*^O~O!j*_O~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(R*aO(TTO(WUO(_$uO(w$}O(x%PO~O!Y*dO!W(}P~P!3cOp*pOq!nO!Q*fO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO(c!mO~O![*mO~P!5WO#Q$dOl(^X!O(^X'w(^X(w(^X(x(^X!Z(^X#^(^X~Og(^X#}(^X~P!6YOl*uO#^*tOg(]X!Z(]X~O!Z*vOg([X~Oj%cO(R&XOg([P~Oq*yO~O!j+OO~O(R(tO~On+TO!Q%gO!Y#iO!]%hO!z]O#g#lO#h#iO(R%fO!i(qP~O!e#vO#i+UO~O!Q%gO!Y+WO!Z([O!]%hO(R%fO!W(tP~Oq'YO!Q+YO!Y+XO(TTO(WUO(c(zO~O![(vP~P!9]O!Z+ZOa)RX'x)RX~OP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO#y$WO#z$XO(_VO(p$YO(w#|O(x#}O~Oa!ha!Z!ha'x!ha'u!ha!W!ha!i!hat!ha!]!ha%h!ha!e!ha~P!:TOR#zO!O#yO!Q#{O!j#xO(_VOP!pa[!pap!pa!Z!pa!n!pa#P!pa#l!pa#m!pa#n!pa#o!pa#p!pa#q!pa#r!pa#s!pa#t!pa#u!pa#w!pa#y!pa#z!pa(p!pa(w!pa(x!pa~Oa!pa'x!pa'u!pa!W!pa!i!pat!pa!]!pa%h!pa!e!pa~P!<kOR#zO!O#yO!Q#{O!j#xO(_VOP!ra[!rap!ra!Z!ra!n!ra#P!ra#l!ra#m!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#w!ra#y!ra#z!ra(p!ra(w!ra(x!ra~Oa!ra'x!ra'u!ra!W!ra!i!rat!ra!]!ra%h!ra!e!ra~P!?ROh%VOl+dO!]'^O%h+cO~O!e+fOa(ZX!](ZX'x(ZX!Z(ZX~Oa%mO!]XO'x%mO~Oh%VO!j%dO~Oh%VO!j%dO(R%fO~O!e#vO#i(vO~Ob+qO%i+rO(R+nO(TTO(WUO![)VP~O!Z+sO`)UX~O[+wO~O`+xO~O!]&OO(R%fO(S!lO`)UP~Oh%VO#^+}O~Oh%VOl,QO!]$|O~O!],SO~O!O,UO!]XO~O%m%uO~O!v,ZO~Oe,`O~Ob,aO(R#nO(TTO(WUO![)TP~Oe%|O~O%i!QO(R&XO~P=UO[,fO`,eO~OPYOQYOSfOdzOeyOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!guO!jZO!mYO!nYO!oYO!qvO!vxO!z]O$miO%g}O(TTO(WUO(_VO(m[O~O!]!eO!s!gO$V!kO(R!dO~P!FRO`,eOa%mO'x%mO~OPYOQYOSfOd!jOe!iOnkOpYOqkOrkOxkOzYO|YO!QWO!UkO!VkO!]!eO!guO!jZO!mYO!nYO!oYO!qvO!v!hO$V!kO$miO(R!dO(TTO(WUO(_VO(m[O~Oa,kOj!OO!swO%k!OO%l!OO%m!OO~P!HkO!j&mO~O&[,qO~O!],sO~O&m,uO&o,vOP&jaQ&jaS&jaY&jaa&jad&jae&jaj&jan&jap&jaq&jar&jax&jaz&ja|&ja!Q&ja!U&ja!V&ja!]&ja!g&ja!j&ja!m&ja!n&ja!o&ja!q&ja!s&ja!v&ja!z&ja$V&ja$m&ja%g&ja%i&ja%k&ja%l&ja%m&ja%p&ja%r&ja%u&ja%v&ja%x&ja&U&ja&[&ja&^&ja&`&ja&b&ja&e&ja&k&ja&q&ja&s&ja&u&ja&w&ja&y&ja'u&ja(R&ja(T&ja(W&ja(_&ja(m&ja![&ja&c&jab&ja&h&ja~O(R,{O~Oh!cX!Z!PX![!PX!e!PX!e!cX!j!cX#^!PX~O!Z!cX![!cX~P# qO!e-QO#^-POh(hX!Z#fX![#fX!e(hX!j(hX~O!Z(hX![(hX~P#!dOh%VO!e-SO!j%dO!Z!_X![!_X~Oq!nO!Q!oO(TTO(WUO(c!mO~OP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]!eO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(TTO(WUO(_VO(m[O~O(R<rO~P##yO!Z-WO![(gX~O![-YO~O!e-QO#^-PO!Z#fX![#fX~O!Z-ZO![(vX~O![-]O~O!a-^O!b-^O(S!lO~P##hO![-aO~P'_Ol-dO!]'^O~O!W-iO~Oq!ya!`!ya!a!ya!b!ya#R!ya#S!ya#T!ya#U!ya#V!ya#Y!ya#Z!ya(S!ya(T!ya(W!ya(c!ya(m!ya~P!#eO!n-nO#^-lO~PCVO!a-pO!b-pO(S!lO~PCuOa%mO#^-lO'x%mO~Oa%mO!e#vO#^-lO'x%mO~Oa%mO!e#vO!n-nO#^-lO'x%mO(p'nO~O'}'vO(O'vO(P-uO~Ot-vO~O!W'Ua!Z'Ua~P!:TO!Y-zO!W'UX!Z'UX~P%[O!Z(TO!W(fa~O!W(fa~PGpO!Z([O!W(ta~O!Q%gO!Y.OO!]%hO(R%fO!W'[X!Z'[X~O#^.QO!Z(ra!i(raa(ra'x(ra~O!e#vO~P#,PO!Z(hO!i(qa~O!Q%gO!]%hO#h.UO(R%fO~On.ZO!Q%gO!Y.WO!]%hO!z]O#g.YO#h.WO(R%fO!Z'_X!i'_X~OR._O!j#xO~Oh%VOl.bO!]'^O%h.aO~Oa#ai!Z#ai'x#ai'u#ai!W#ai!i#ait#ai!]#ai%h#ai!e#ai~P!:TOl=|O!O)|O'w)}O(w$}O(x%PO~O#i#]aa#]a#^#]a'x#]a!Z#]a!i#]a!]#]a!W#]a~P#.{O#i(^XP(^XR(^X[(^Xa(^Xp(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X'x(^X(_(^X(p(^X!i(^X!W(^X'u(^Xt(^X!](^X%h(^X!e(^X~P!6YO!Z.oO!i(iX~P!:TO!i.rO~O!W.tO~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kia#kip#ki!Z#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#l#ki~P#2kO#l$OO~P#2kOP$[OR#zOp$aO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO[#kia#ki!Z#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#p#ki~P#5YO#p$QO~P#5YOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO(_VOa#ki!Z#ki#w#ki#y#ki#z#ki'x#ki(p#ki(w#ki(x#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#u#ki~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO(_VO(x#}Oa#ki!Z#ki#y#ki#z#ki'x#ki(p#ki(w#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#w$UO~P#:_O#w#ki~P#:_O#u$SO~P#7wOP$[OR#zO[$cOp$aO!O#yO!Q#{O!j#xO!n$[O#P$RO#l$OO#m$PO#n$PO#o$PO#p$QO#q$RO#r$RO#s$bO#t$RO#u$SO#w$UO(_VO(w#|O(x#}Oa#ki!Z#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~O#y#ki~P#=TO#y$WO~P#=TOP]XR]X[]Xp]X!O]X!Q]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X!Z]X![]X~O#}]X~P#?rOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO#y<XO#z<YO(_VO(p$YO(w#|O(x#}O~O#}.vO~P#BPO#Q$dO#^<`O$P<`O#}(eX![(eX~P! dOa'ba!Z'ba'x'ba'u'ba!i'ba!W'bat'ba!]'ba%h'ba!e'ba~P!:TO[#kia#kip#ki!Z#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki'x#ki(p#ki'u#ki!W#ki!i#kit#ki!]#ki%h#ki!e#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l$OO#m$PO#n$PO#o$PO(_VO(w#ki(x#ki~P#EROl=|O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P#ERO!Z.zOg(nX~P!0uOg.|O~Oa$Oi!Z$Oi'x$Oi'u$Oi!W$Oi!i$Oit$Oi!]$Oi%h$Oi!e$Oi~P!:TO$[.}O$^.}O~O$[/OO$^/OO~O!e)fO#^/PO!]$bX$Y$bX$[$bX$^$bX$e$bX~O!Y/QO~O!])iO$Y/SO$[)hO$^)hO$e/TO~O!Z<ZO![(dX~P#BPO![/UO~O!e)fO$e(yX~O$e/WO~Ot/XO~P!&iOv)wO(`)xO(a/[O~O!Q/_O~O(w$}Ol%`a!O%`a'w%`a(x%`a!Z%`a#^%`a~Og%`a#}%`a~P#LTO(x%POl%ba!O%ba'w%ba(w%ba!Z%ba#^%ba~Og%ba#}%ba~P#LvO!ZfX!efX!ifX!i$yX(pfX~P!/qO!Y/hO!Z([O(R/gO!W(tP!W(}P~P!1dOp*pO!`*nO!a*hO!b*hO!j*_O#Y*oO%_*jO(S!lO(TTO(WUO~Oq<oO!Q/iO!Y+XO![*mO(c<nO![(vP~P#NaO!i/jO~P#.{O!Z/kO!e#vO(p'nO!i(|X~O!i/pO~O!Q%gO!Y*[O!]%hO(R%fO!i(|P~O#i/rO~O!W$yX!Z$yX!e%QX~P!/qO!Z/sO!W(}X~P#.{O!e/uO~O!W/wO~OnkO(R/xO~P.iOh%VOp/}O!e#vO!j%dO(p'nO~O!e+fO~Oa%mO!Z0RO'x%mO~O![0TO~P!5WO!a0UO!b0UO(S!lO~P##hOq!nO!Q0VO(TTO(WUO(c!mO~O#Y0XO~Og%`a!Z%`a#^%`a#}%`a~P!0uOg%ba!Z%ba#^%ba#}%ba~P!0uOj%cO(R&XOg'kX!Z'kX~O!Z*vOg([a~Og0bO~OR0cO!O0cO!Q0dO#Q$dOl{a'w{a(w{a(x{a!Z{a#^{a~Og{a#}{a~P$&dO!O)|O'w)}Ol$ra(w$ra(x$ra!Z$ra#^$ra~Og$ra#}$ra~P$'`O!O)|O'w)}Ol$ta(w$ta(x$ta!Z$ta#^$ta~Og$ta#}$ta~P$(RO#i0gO~Og%Sa!Z%Sa#^%Sa#}%Sa~P!0uOl0iO#^0hOg(]a!Z(]a~O!e#vO~O#i0lO~O!Z+ZOa)Ra'x)Ra~OR#zO!O#yO!Q#{O!j#xO(_VOP!pi[!pip!pi!Z!pi!n!pi#P!pi#l!pi#m!pi#n!pi#o!pi#p!pi#q!pi#r!pi#s!pi#t!pi#u!pi#w!pi#y!pi#z!pi(p!pi(w!pi(x!pi~Oa!pi'x!pi'u!pi!W!pi!i!pit!pi!]!pi%h!pi!e!pi~P$*OOh%VOp%XOq$tOr$tOx%YOz%ZO|<eO!Q${O!]$|O!g=vO!j$xO#h<kO$V%_O$s<gO$u<iO$x%`O(TTO(WUO(_$uO(w$}O(x%PO~On0vO%[0wO(R0tO~P$,fO!e+fOa(Za!](Za'x(Za!Z(Za~O#i0|O~O[]X!ZfX![fX~O!Z0}O![)VX~O![1PO~O[1QO~Ob1SO(R+nO(TTO(WUO~O!]&OO(R%fO`'sX!Z'sX~O!Z+sO`)Ua~O!i1VO~P!:TO[1YO~O`1ZO~O#^1^O~Ol1aO!]$|O~O(c(zO![)SP~Oh%VOl1jO!]1gO%h1iO~O[1tO!Z1rO![)TX~O![1uO~O`1wOa%mO'x%mO~O(R#nO(TTO(WUO~O#Q$dO#^$eO$P$eOP(eXR(eX[(eXp(eX!O(eX!Q(eX!Z(eX!j(eX!n(eX#P(eX#l(eX#m(eX#n(eX#o(eX#p(eX#q(eX#r(eX#s(eX#u(eX#w(eX#y(eX#z(eX(_(eX(p(eX(w(eX(x(eX~O#t1zO&Y1{Oa(eX~P$2PO#^$eO#t1zO&Y1{O~Oa1}O~P%[Oa2PO~O&c2SOP&aiQ&aiS&aiY&aia&aid&aie&aij&ain&aip&aiq&air&aix&aiz&ai|&ai!Q&ai!U&ai!V&ai!]&ai!g&ai!j&ai!m&ai!n&ai!o&ai!q&ai!s&ai!v&ai!z&ai$V&ai$m&ai%g&ai%i&ai%k&ai%l&ai%m&ai%p&ai%r&ai%u&ai%v&ai%x&ai&U&ai&[&ai&^&ai&`&ai&b&ai&e&ai&k&ai&q&ai&s&ai&u&ai&w&ai&y&ai'u&ai(R&ai(T&ai(W&ai(_&ai(m&ai![&aib&ai&h&ai~Ob2YO![2WO&h2XO~P`O!]XO!j2[O~O&o,vOP&jiQ&jiS&jiY&jia&jid&jie&jij&jin&jip&jiq&jir&jix&jiz&ji|&ji!Q&ji!U&ji!V&ji!]&ji!g&ji!j&ji!m&ji!n&ji!o&ji!q&ji!s&ji!v&ji!z&ji$V&ji$m&ji%g&ji%i&ji%k&ji%l&ji%m&ji%p&ji%r&ji%u&ji%v&ji%x&ji&U&ji&[&ji&^&ji&`&ji&b&ji&e&ji&k&ji&q&ji&s&ji&u&ji&w&ji&y&ji'u&ji(R&ji(T&ji(W&ji(_&ji(m&ji![&ji&c&jib&ji&h&ji~O!W2bO~O!Z!_a![!_a~P#BPOq!nO!Q!oO!Y2hO(c!mO!Z'VX!['VX~P@]O!Z-WO![(ga~O!Z']X![']X~P!9]O!Z-ZO![(va~O![2oO~P'_Oa%mO#^2xO'x%mO~Oa%mO!e#vO#^2xO'x%mO~Oa%mO!e#vO!n2|O#^2xO'x%mO(p'nO~Oa%mO'x%mO~P!:TO!Z$_Ot$pa~O!W'Ui!Z'Ui~P!:TO!Z(TO!W(fi~O!Z([O!W(ti~O!W(ui!Z(ui~P!:TO!Z(ri!i(ria(ri'x(ri~P!:TO#^3OO!Z(ri!i(ria(ri'x(ri~O!Z(hO!i(qi~O!Q%gO!]%hO!z]O#g3TO#h3SO(R%fO~O!Q%gO!]%hO#h3SO(R%fO~Ol3[O!]'^O%h3ZO~Oh%VOl3[O!]'^O%h3ZO~O#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`at%`a!]%`a%h%`a!e%`a~P#LTO#i%baP%baR%ba[%baa%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%bat%ba!]%ba%h%ba!e%ba~P#LvO#i%`aP%`aR%`a[%`aa%`ap%`a!Q%`a!Z%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a'x%`a(_%`a(p%`a!i%`a!W%`a'u%`a#^%`at%`a!]%`a%h%`a!e%`a~P#.{O#i%baP%baR%ba[%baa%bap%ba!Q%ba!Z%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba'x%ba(_%ba(p%ba!i%ba!W%ba'u%ba#^%bat%ba!]%ba%h%ba!e%ba~P#.{O#i{aP{a[{aa{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a'x{a(_{a(p{a!i{a!W{a'u{at{a!]{a%h{a!e{a~P$&dO#i$raP$raR$ra[$raa$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra'x$ra(_$ra(p$ra!i$ra!W$ra'u$rat$ra!]$ra%h$ra!e$ra~P$'`O#i$taP$taR$ta[$taa$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta'x$ta(_$ta(p$ta!i$ta!W$ta'u$tat$ta!]$ta%h$ta!e$ta~P$(RO#i%SaP%SaR%Sa[%Saa%Sap%Sa!Q%Sa!Z%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa'x%Sa(_%Sa(p%Sa!i%Sa!W%Sa'u%Sa#^%Sat%Sa!]%Sa%h%Sa!e%Sa~P#.{Oa#aq!Z#aq'x#aq'u#aq!W#aq!i#aqt#aq!]#aq%h#aq!e#aq~P!:TO!Y3dO!Z'WX!i'WX~P%[O!Z.oO!i(ia~O!Z.oO!i(ia~P!:TO!W3gO~O#}!la![!la~PKZO#}!ha!Z!ha![!ha~P#BPO#}!pa![!pa~P!<kO#}!ra![!ra~P!?ROg'ZX!Z'ZX~P!+rO!Z.zOg(na~OSfO!]3{O$c3|O~O![4QO~Ot4RO~P#.{Oa$lq!Z$lq'x$lq'u$lq!W$lq!i$lqt$lq!]$lq%h$lq!e$lq~P!:TO!W4TO~P!&iO!Q4UO~O!O)|O'w)}O(x%POl'ga(w'ga!Z'ga#^'ga~Og'ga#}'ga~P%+uO!O)|O'w)}Ol'ia(w'ia(x'ia!Z'ia#^'ia~Og'ia#}'ia~P%,hO(p$YO~P#.{O!WfX!W$yX!ZfX!Z$yX!e%QX#^fX~P!/qO(R<xO~P!1dO!Q%gO!Y4XO!]%hO(R%fO!Z'cX!i'cX~O!Z/kO!i(|a~O!Z/kO!e#vO!i(|a~O!Z/kO!e#vO(p'nO!i(|a~Og${i!Z${i#^${i#}${i~P!0uO!Y4aO!W'eX!Z'eX~P!3cO!Z/sO!W(}a~O!Z/sO!W(}a~P#.{OP]XR]X[]Xp]X!O]X!Q]X!W]X!Z]X!j]X!n]X#P]X#Q]X#^]X#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!e%XX#t%XX~P%0XO!e#vO#t4fO~Oh%VO!e#vO!j%dO~Oh%VOp4kO!j%dO(p'nO~Op4pO!e#vO(p'nO~Oq!nO!Q4qO(TTO(WUO(c!mO~O(w$}Ol%`i!O%`i'w%`i(x%`i!Z%`i#^%`i~Og%`i#}%`i~P%3xO(x%POl%bi!O%bi'w%bi(w%bi!Z%bi#^%bi~Og%bi#}%bi~P%4kOg(]i!Z(]i~P!0uO#^4wOg(]i!Z(]i~P!0uO!i4zO~Oa$nq!Z$nq'x$nq'u$nq!W$nq!i$nqt$nq!]$nq%h$nq!e$nq~P!:TO!W5QO~O!Z5RO!])OX~P#.{Oa]Xa$yX!]]X!]$yX%]]X'x]X'x$yX!Z]X!Z$yX~P!/qO%]5UOa%Za!]%Za'x%Za!Z%Za~OlmX!OmX'wmX(wmX(xmX~P%7nOn5VO(R#nO~Ob5]O%i5^O(R+nO(TTO(WUO!Z'rX!['rX~O!Z0}O![)Va~O[5bO~O`5cO~Oa%mO'x%mO~P#.{O!Z5kO#^5mO![)SX~O![5nO~Op5tOq!nO!Q*fO!`!yO!a!vO!b!vO!z;wO#R!pO#S!pO#T!pO#U!pO#V!pO#Y5sO#Z!zO(S!lO(TTO(WUO(c!mO(m!sO~O![5rO~P%:ROl5yO!]1gO%h5xO~Oh%VOl5yO!]1gO%h5xO~Ob6QO(R#nO(TTO(WUO!Z'qX!['qX~O!Z1rO![)Ta~O(TTO(WUO(c6SO~O`6WO~O#t6ZO&Y6[O~PMvO!i6]O~P%[Oa6_O~Oa6_O~P%[Ob2YO![6dO&h2XO~P`O!e6fO~O!e6hOh(hi!Z(hi![(hi!e(hi!j(hip(hi(p(hi~O!Z#fi![#fi~P#BPO#^6iO!Z#fi![#fi~O!Z!_i![!_i~P#BPOa%mO#^6rO'x%mO~Oa%mO!e#vO#^6rO'x%mO~O!Z(rq!i(rqa(rq'x(rq~P!:TO!Z(hO!i(qq~O!Q%gO!]%hO#h6yO(R%fO~O!]'^O%h6|O~Ol7QO!]'^O%h6|O~O#i'gaP'gaR'ga['gaa'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga'x'ga(_'ga(p'ga!i'ga!W'ga'u'gat'ga!]'ga%h'ga!e'ga~P%+uO#i'iaP'iaR'ia['iaa'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia'x'ia(_'ia(p'ia!i'ia!W'ia'u'iat'ia!]'ia%h'ia!e'ia~P%,hO#i${iP${iR${i[${ia${ip${i!Q${i!Z${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i'x${i(_${i(p${i!i${i!W${i'u${i#^${it${i!]${i%h${i!e${i~P#.{O#i%`iP%`iR%`i[%`ia%`ip%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i'x%`i(_%`i(p%`i!i%`i!W%`i'u%`it%`i!]%`i%h%`i!e%`i~P%3xO#i%biP%biR%bi[%bia%bip%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi'x%bi(_%bi(p%bi!i%bi!W%bi'u%bit%bi!]%bi%h%bi!e%bi~P%4kO!Z'Wa!i'Wa~P!:TO!Z.oO!i(ii~O#}#ai!Z#ai![#ai~P#BPOP$[OR#zO!O#yO!Q#{O!j#xO!n$[O(_VO[#kip#ki#P#ki#m#ki#n#ki#o#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#l#ki~P%MQO#l<PO~P%MQOP$[OR#zOp<]O!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO[#ki#P#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#p#ki~P& YO#p<RO~P& YOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO(_VO#w#ki#y#ki#z#ki#}#ki(p#ki(w#ki(x#ki!Z#ki![#ki~O#u#ki~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO(_VO(x#}O#y#ki#z#ki#}#ki(p#ki(w#ki!Z#ki![#ki~O#w<VO~P&%cO#w#ki~P&%cO#u<TO~P&#bOP$[OR#zO[<_Op<]O!O#yO!Q#{O!j#xO!n$[O#P<SO#l<PO#m<QO#n<QO#o<QO#p<RO#q<SO#r<SO#s<^O#t<SO#u<TO#w<VO(_VO(w#|O(x#}O#z#ki#}#ki(p#ki!Z#ki![#ki~O#y#ki~P&'rO#y<XO~P&'rOa#{y!Z#{y'x#{y'u#{y!W#{y!i#{yt#{y!]#{y%h#{y!e#{y~P!:TO[#kip#ki#P#ki#p#ki#q#ki#r#ki#s#ki#t#ki#u#ki#w#ki#y#ki#z#ki#}#ki(p#ki!Z#ki![#ki~OP$[OR#zO!O#yO!Q#{O!j#xO!n$[O#l<PO#m<QO#n<QO#o<QO(_VO(w#ki(x#ki~P&*nOl=}O!O)|O'w)}O(w$}O(x%POP#kiR#ki!Q#ki!j#ki!n#ki#l#ki#m#ki#n#ki#o#ki(_#ki~P&*nO#Q$dOP(^XR(^X[(^Xl(^Xp(^X!O(^X!Q(^X!j(^X!n(^X#P(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#s(^X#t(^X#u(^X#w(^X#y(^X#z(^X#}(^X'w(^X(_(^X(p(^X(w(^X(x(^X!Z(^X![(^X~O#}$Oi!Z$Oi![$Oi~P#BPO#}!pi![!pi~P$*OOg'Za!Z'Za~P!0uO![7dO~O!Z'ba!['ba~P#BPO!W7eO~P#.{O!e#vO(p'nO!Z'ca!i'ca~O!Z/kO!i(|i~O!Z/kO!e#vO!i(|i~Og${q!Z${q#^${q#}${q~P!0uO!W'ea!Z'ea~P#.{O!e7lO~O!Z/sO!W(}i~P#.{O!Z/sO!W(}i~O!W7oO~Oh%VOp7tO!j%dO(p'nO~O!e#vO#t7vO~Op7yO!e#vO(p'nO~O!O)|O'w)}O(x%POl'ha(w'ha!Z'ha#^'ha~Og'ha#}'ha~P&3oO!O)|O'w)}Ol'ja(w'ja(x'ja!Z'ja#^'ja~Og'ja#}'ja~P&4bO!W7{O~Og$}q!Z$}q#^$}q#}$}q~P!0uOg(]q!Z(]q~P!0uO#^7|Og(]q!Z(]q~P!0uOa$ny!Z$ny'x$ny'u$ny!W$ny!i$nyt$ny!]$ny%h$ny!e$ny~P!:TO!e6hO~O!Z5RO!])Oa~O!]'^OP$SaR$Sa[$Sap$Sa!O$Sa!Q$Sa!Z$Sa!j$Sa!n$Sa#P$Sa#l$Sa#m$Sa#n$Sa#o$Sa#p$Sa#q$Sa#r$Sa#s$Sa#t$Sa#u$Sa#w$Sa#y$Sa#z$Sa(_$Sa(p$Sa(w$Sa(x$Sa~O%h6|O~P&7SO%]8QOa%Zi!]%Zi'x%Zi!Z%Zi~Oa#ay!Z#ay'x#ay'u#ay!W#ay!i#ayt#ay!]#ay%h#ay!e#ay~P!:TO[8SO~Ob8UO(R+nO(TTO(WUO~O!Z0}O![)Vi~O`8YO~O(c(zO!Z'nX!['nX~O!Z5kO![)Sa~O![8cO~P%:RO(m!sO~P$$oO#Y8dO~O!]1gO~O!]1gO%h8fO~Ol8iO!]1gO%h8fO~O[8nO!Z'qa!['qa~O!Z1rO![)Ti~O!i8rO~O!i8sO~O!i8vO~O!i8vO~P%[Oa8xO~O!e8yO~O!i8zO~O!Z(ui![(ui~P#BPOa%mO#^9SO'x%mO~O!Z(ry!i(rya(ry'x(ry~P!:TO!Z(hO!i(qy~O%h9VO~P&7SO!]'^O%h9VO~O#i${qP${qR${q[${qa${qp${q!Q${q!Z${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q'x${q(_${q(p${q!i${q!W${q'u${q#^${qt${q!]${q%h${q!e${q~P#.{O#i'haP'haR'ha['haa'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha'x'ha(_'ha(p'ha!i'ha!W'ha'u'hat'ha!]'ha%h'ha!e'ha~P&3oO#i'jaP'jaR'ja['jaa'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja'x'ja(_'ja(p'ja!i'ja!W'ja'u'jat'ja!]'ja%h'ja!e'ja~P&4bO#i$}qP$}qR$}q[$}qa$}qp$}q!Q$}q!Z$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q'x$}q(_$}q(p$}q!i$}q!W$}q'u$}q#^$}qt$}q!]$}q%h$}q!e$}q~P#.{O!Z'Wi!i'Wi~P!:TO#}#aq!Z#aq![#aq~P#BPO(w$}OP%`aR%`a[%`ap%`a!Q%`a!j%`a!n%`a#P%`a#l%`a#m%`a#n%`a#o%`a#p%`a#q%`a#r%`a#s%`a#t%`a#u%`a#w%`a#y%`a#z%`a#}%`a(_%`a(p%`a!Z%`a![%`a~Ol%`a!O%`a'w%`a(x%`a~P&HgO(x%POP%baR%ba[%bap%ba!Q%ba!j%ba!n%ba#P%ba#l%ba#m%ba#n%ba#o%ba#p%ba#q%ba#r%ba#s%ba#t%ba#u%ba#w%ba#y%ba#z%ba#}%ba(_%ba(p%ba!Z%ba![%ba~Ol%ba!O%ba'w%ba(w%ba~P&JnOl=}O!O)|O'w)}O(x%PO~P&HgOl=}O!O)|O'w)}O(w$}O~P&JnOR0cO!O0cO!Q0dO#Q$dOP{a[{al{ap{a!j{a!n{a#P{a#l{a#m{a#n{a#o{a#p{a#q{a#r{a#s{a#t{a#u{a#w{a#y{a#z{a#}{a'w{a(_{a(p{a(w{a(x{a!Z{a![{a~O!O)|O'w)}OP$raR$ra[$ral$rap$ra!Q$ra!j$ra!n$ra#P$ra#l$ra#m$ra#n$ra#o$ra#p$ra#q$ra#r$ra#s$ra#t$ra#u$ra#w$ra#y$ra#z$ra#}$ra(_$ra(p$ra(w$ra(x$ra!Z$ra![$ra~O!O)|O'w)}OP$taR$ta[$tal$tap$ta!Q$ta!j$ta!n$ta#P$ta#l$ta#m$ta#n$ta#o$ta#p$ta#q$ta#r$ta#s$ta#t$ta#u$ta#w$ta#y$ta#z$ta#}$ta(_$ta(p$ta(w$ta(x$ta!Z$ta![$ta~Ol=}O!O)|O'w)}O(w$}O(x%PO~OP%SaR%Sa[%Sap%Sa!Q%Sa!j%Sa!n%Sa#P%Sa#l%Sa#m%Sa#n%Sa#o%Sa#p%Sa#q%Sa#r%Sa#s%Sa#t%Sa#u%Sa#w%Sa#y%Sa#z%Sa#}%Sa(_%Sa(p%Sa!Z%Sa![%Sa~P'%sO#}$lq!Z$lq![$lq~P#BPO#}$nq!Z$nq![$nq~P#BPO![9dO~O#}9eO~P!0uO!e#vO!Z'ci!i'ci~O!e#vO(p'nO!Z'ci!i'ci~O!Z/kO!i(|q~O!W'ei!Z'ei~P#.{O!Z/sO!W(}q~Op9lO!e#vO(p'nO~O[9nO!W9mO~P#.{O!W9mO~O!e#vO#t9tO~Og(]y!Z(]y~P!0uO!Z'la!]'la~P#.{Oa%Zq!]%Zq'x%Zq!Z%Zq~P#.{O[9yO~O!Z0}O![)Vq~O#^9}O!Z'na!['na~O!Z5kO![)Si~P#BPO!Q:PO~O!]1gO%h:SO~O(TTO(WUO(c:XO~O!Z1rO![)Tq~O!i:[O~O!i:]O~O!i:^O~O!i:^O~P%[O#^:aO!Z#fy![#fy~O!Z#fy![#fy~P#BPO%h:fO~P&7SO!]'^O%h:fO~O#}#{y!Z#{y![#{y~P#BPOP${iR${i[${ip${i!Q${i!j${i!n${i#P${i#l${i#m${i#n${i#o${i#p${i#q${i#r${i#s${i#t${i#u${i#w${i#y${i#z${i#}${i(_${i(p${i!Z${i![${i~P'%sO!O)|O'w)}O(x%POP'gaR'ga['gal'gap'ga!Q'ga!j'ga!n'ga#P'ga#l'ga#m'ga#n'ga#o'ga#p'ga#q'ga#r'ga#s'ga#t'ga#u'ga#w'ga#y'ga#z'ga#}'ga(_'ga(p'ga(w'ga!Z'ga!['ga~O!O)|O'w)}OP'iaR'ia['ial'iap'ia!Q'ia!j'ia!n'ia#P'ia#l'ia#m'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#w'ia#y'ia#z'ia#}'ia(_'ia(p'ia(w'ia(x'ia!Z'ia!['ia~O(w$}OP%`iR%`i[%`il%`ip%`i!O%`i!Q%`i!j%`i!n%`i#P%`i#l%`i#m%`i#n%`i#o%`i#p%`i#q%`i#r%`i#s%`i#t%`i#u%`i#w%`i#y%`i#z%`i#}%`i'w%`i(_%`i(p%`i(x%`i!Z%`i![%`i~O(x%POP%biR%bi[%bil%bip%bi!O%bi!Q%bi!j%bi!n%bi#P%bi#l%bi#m%bi#n%bi#o%bi#p%bi#q%bi#r%bi#s%bi#t%bi#u%bi#w%bi#y%bi#z%bi#}%bi'w%bi(_%bi(p%bi(w%bi!Z%bi![%bi~O#}$ny!Z$ny![$ny~P#BPO#}#ay!Z#ay![#ay~P#BPO!e#vO!Z'cq!i'cq~O!Z/kO!i(|y~O!W'eq!Z'eq~P#.{Op:pO!e#vO(p'nO~O[:tO!W:sO~P#.{O!W:sO~Og(]!R!Z(]!R~P!0uOa%Zy!]%Zy'x%Zy!Z%Zy~P#.{O!Z0}O![)Vy~O!Z5kO![)Sq~O(R:zO~O!]1gO%h:}O~O!i;QO~O%h;VO~P&7SOP${qR${q[${qp${q!Q${q!j${q!n${q#P${q#l${q#m${q#n${q#o${q#p${q#q${q#r${q#s${q#t${q#u${q#w${q#y${q#z${q#}${q(_${q(p${q!Z${q![${q~P'%sO!O)|O'w)}O(x%POP'haR'ha['hal'hap'ha!Q'ha!j'ha!n'ha#P'ha#l'ha#m'ha#n'ha#o'ha#p'ha#q'ha#r'ha#s'ha#t'ha#u'ha#w'ha#y'ha#z'ha#}'ha(_'ha(p'ha(w'ha!Z'ha!['ha~O!O)|O'w)}OP'jaR'ja['jal'jap'ja!Q'ja!j'ja!n'ja#P'ja#l'ja#m'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#w'ja#y'ja#z'ja#}'ja(_'ja(p'ja(w'ja(x'ja!Z'ja!['ja~OP$}qR$}q[$}qp$}q!Q$}q!j$}q!n$}q#P$}q#l$}q#m$}q#n$}q#o$}q#p$}q#q$}q#r$}q#s$}q#t$}q#u$}q#w$}q#y$}q#z$}q#}$}q(_$}q(p$}q!Z$}q![$}q~P'%sOg%d!Z!Z%d!Z#^%d!Z#}%d!Z~P!0uO!W;ZO~P#.{Op;[O!e#vO(p'nO~O[;^O!W;ZO~P#.{O!Z'nq!['nq~P#BPO!Z#f!Z![#f!Z~P#BPO#i%d!ZP%d!ZR%d!Z[%d!Za%d!Zp%d!Z!Q%d!Z!Z%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z'x%d!Z(_%d!Z(p%d!Z!i%d!Z!W%d!Z'u%d!Z#^%d!Zt%d!Z!]%d!Z%h%d!Z!e%d!Z~P#.{Op;fO!e#vO(p'nO~O!W;gO~P#.{Op;nO!e#vO(p'nO~O!W;oO~P#.{OP%d!ZR%d!Z[%d!Zp%d!Z!Q%d!Z!j%d!Z!n%d!Z#P%d!Z#l%d!Z#m%d!Z#n%d!Z#o%d!Z#p%d!Z#q%d!Z#r%d!Z#s%d!Z#t%d!Z#u%d!Z#w%d!Z#y%d!Z#z%d!Z#}%d!Z(_%d!Z(p%d!Z!Z%d!Z![%d!Z~P'%sOp;rO!e#vO(p'nO~Ot(dX~P1qO!O%qO~P!(yO(S!lO~P!(yO!WfX!ZfX#^fX~P%0XOP]XR]X[]Xp]X!O]X!Q]X!Z]X!ZfX!j]X!n]X#P]X#Q]X#^]X#^fX#ifX#l]X#m]X#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#w]X#y]X#z]X$P]X(_]X(p]X(w]X(x]X~O!efX!i]X!ifX(pfX~P'JlOP;vOQ;vOSfOd=rOe!iOnkOp;vOqkOrkOxkOz;vO|;vO!QWO!UkO!VkO!]XO!g;yO!jZO!m;vO!n;vO!o;vO!q;zO!s;}O!v!hO$V!kO$m=pO(R)ZO(TTO(WUO(_VO(m[O~O!Z<ZO![$pa~Oh%VOn%WOp%XOq$tOr$tOx%YOz%ZO|<fO!Q${O!]$|O!g=wO!j$xO#h<lO$V%_O$s<hO$u<jO$x%`O(R(tO(TTO(WUO(_$uO(w$}O(x%PO~Oj)bO~P( bOp!cX(p!cX~P# qOp(hX(p(hX~P#!dO![]X![fX~P'JlO!WfX!W$yX!ZfX!Z$yX#^fX~P!/qO#i<OO~O!e#vO#i<OO~O#^<`O~O#t<SO~O#^<pO!Z(uX![(uX~O#^<`O!Z(sX![(sX~O#i<qO~Og<sO~P!0uO#i<yO~O#i<zO~O!e#vO#i<{O~O!e#vO#i<qO~O#}<|O~P#BPO#i<}O~O#i=OO~O#i=TO~O#i=UO~O#i=VO~O#i=WO~O#}=XO~P!0uO#}=YO~P!0uO#Q#R#S#U#V#Y#g#h#s$m$s$u$x%[%]%g%h%i%p%r%u%v%x%z~'|T#m!V'z(S#nq#l#op!O'{$['{(R$^(c~",goto:"$8f)ZPPPPPP)[PP)_P)pP+Q/VPPPP6aPP6wPP<oP@cP@yP@yPPP@yPCRP@yP@yP@yPCVPC[PCyPHsPPPHwPPPPHwKzPPPLQLrPHwPHwPP! QHwPPPHwPHwP!#XHwP!&o!'t!'}P!(q!(u!(q!,SPPPPPPP!,s!'tPP!-T!.uP!2RHwHw!2W!5d!:Q!:Q!>PPPP!>XHwPPPPPPPPPP!AhP!BuPPHw!DWPHwPHwHwHwHwHwPHw!EjP!HtP!KzP!LO!LY!L^!L^P!HqP!Lb!LbP# hP# lHwPHw# r#$wCV@yP@yP@y@yP#&U@y@y#(h@y#+`@y#-l@y@y#.[#0p#0p#0u#1O#0p#1ZPP#0pP@y#1s@y#5r@y@y6aPPP#9wPPP#:b#:bP#:bP#:x#:bPP#;OP#:uP#:u#;c#:u#;}#<T#<W)_#<Z)_P#<b#<b#<bP)_P)_P)_P)_PP)_P#<h#<kP#<k)_P#<oP#<rP)_P)_P)_P)_P)_P)_)_PP#<x#=O#=Z#=a#=g#=m#=s#>R#>X#>c#>i#>s#>y#?Z#?a#@R#@e#@k#@q#AP#Af#CZ#Ci#Cp#E[#Ej#G[#Gj#Gp#Gv#G|#HW#H^#Hd#Hn#IQ#IWPPPPPPPPPPP#I^PPPPPPP#JR#MY#Nr#Ny$ RPPP$&mP$&v$)o$0Y$0]$0`$1_$1b$1i$1qP$1w$1zP$2h$2l$3d$4r$4w$5_PP$5d$5j$5n$5q$5u$5y$6u$7^$7u$7y$7|$8P$8V$8Y$8^$8bR!|RoqOXst!Z#d%l&p&r&s&u,n,s2S2VY!vQ'^-`1g5qQ%svQ%{yQ&S|Q&h!VS'U!e-WQ'd!iS'j!r!yU*h$|*X*lQ+l%|Q+y&UQ,_&bQ-^']Q-h'eQ-p'kQ0U*nQ1q,`R<m;z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9SS#q];w!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU*{%[<e<fQ+q&OQ,a&eQ,h&mQ0r+dQ0u+fQ1S+rQ1y,fQ3W.bQ5V0wQ5]0}Q6Q1rQ7O3[Q8U5^R9Y7Q'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s!S!nQ!r!v!y!z$|'U']'^'j'k'l*h*l*n*o-W-^-`-p0U0X1g5q5s%[$ti#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q&V|Q'S!eS'Y%h-ZQ+q&OQ,a&eQ0f+OQ1S+rQ1X+xQ1x,eQ1y,fQ5]0}Q5f1ZQ6Q1rQ6T1tQ6U1wQ8U5^Q8X5cQ8q6WQ9|8YQ:Y8nR<o*XrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR,c&i&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=r=s[#]WZ#W#Z'V(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ%vxQ%zyS&P|&UQ&]!TQ'a!hQ'c!iQ(o#sS+k%{%|Q+o&OQ,Y&`Q,^&bS-g'd'eQ.d(pQ0{+lQ1R+rQ1T+sQ1W+wQ1l,ZS1p,_,`Q2t-hQ5[0}Q5`1QQ5e1YQ6P1qQ8T5^Q8W5bQ9x8SR:w9y!U$zi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y!^%xy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pQ+e%vQ,O&YQ,R&ZQ,]&bQ.c(oQ1k,YU1o,^,_,`Q3].dQ5z1lS6O1p1qQ8m6P#f=t#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o=u<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YW%Ti%V*v=pS&Y!Q&gQ&Z!RQ&[!SQ+S%cR+|&W%]%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}T)x$u)yV*{%[<e<fW'Y!e%h*X-ZS({#y#zQ+`%qQ+v&RS.](k(lQ1b,SQ4x0cR8^5k'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s$i$^c#Y#e%p%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.w.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ'W!eR2i-W!W!nQ!e!r!v!y!z$|'U']'^'j'k'l*X*h*l*n*o-W-^-`-p0U0X1g5q5sR1d,UnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&w!^Q't!xS(q#u<OQ+i%yQ,W&]Q,X&_Q-e'bQ-r'mS.m(v<qS0k+U<{Q0y+jQ1f,VQ2Z,uQ2],vQ2e-RQ2r-fQ2u-jS5P0l=VQ5W0zS5Z0|=WQ6j2gQ6n2sQ6s2zQ8R5XQ8}6lQ9O6oQ9R6tR:`8z$d$]c#Y#e%r%t(Q(W(r(w)P)Q)R)S)T)U)V)W)X)Y)[)^)`)e)o+a+u-U-s-x-}.P.n.q.u.x.y/]0j2c2f2v2}3c3h3i3j3k3l3m3n3o3p3q3r3s3t3w3x4P5O5Y6k6q6v7V7W7a7b8`8|9Q9[9b9c:c:y;R;x=gS(m#p'gQ(}#zS+_%p.wS.^(l(nR3U._'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS#q];wQ&r!XQ&s!YQ&u![Q&v!]R2R,qQ'_!hQ+b%vQ-c'aS.`(o+eQ2p-bW3Y.c.d0q0sQ6m2qW6z3V3X3]5TU9U6{6}7PU:e9W9X9ZS;T:d:gQ;b;UR;j;cU!wQ'^-`T5o1g5q!Q_OXZ`st!V!Z#d#h%d%l&g&i&p&r&s&u(h,n,s.V2S2V]!pQ!r'^-`1g5qT#q];w%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS({#y#zS.](k(l!s=^$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sU$fd)],hS(n#p'gU*s%R(u3vU0e*z.i7]Q5T0rQ6{3WQ9X7OR:g9Ym!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sQ'r!uS(d#g1|S-n'i'uQ/n*ZQ/{*gQ2|-qQ4]/oQ4i/}Q4j0OQ4o0WQ7h4WS7s4k4mS7w4p4rQ9g7iQ9k7oQ9p7tQ9u7yS:o9l9mS;Y:p:sS;e;Z;[S;m;f;gS;q;n;oR;t;rQ#wbQ'q!uS(c#g1|S(e#m+TQ+V%eQ+g%wQ+m%}U-m'i'r'uQ.R(dQ/m*ZQ/|*gQ0P*iQ0x+hQ1m,[S2y-n-qQ3R.ZS4[/n/oQ4e/yS4h/{0WQ4l0QQ5|1nQ6u2|Q7g4WQ7k4]U7r4i4o4rQ7u4nQ8k5}S9f7h7iQ9j7oQ9r7wQ9s7xQ:V8lQ:m9gS:n9k9mQ:v9uQ;P:WS;X:o:sS;d;Y;ZS;l;e;gS;p;m;oQ;s;qQ;u;tQ=a=[Q=l=eR=m=fV!wQ'^-`%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SS#wz!j!r=Z$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=a=r%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SQ%ej!^%wy!i!u%z%{%|'T'c'd'e'i's*g+k+l-T-g-h-o/{0O0{2m2t2{4i4j4m7s9pS%}z!jQ+h%xQ,[&bW1n,],^,_,`U5}1o1p1qS8l6O6PQ:W8m!r=[$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ=e=qR=f=r%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9SY#bWZ#W#Z(R!b%im#h#i#l$x%d%g([(f(g(h*W*[*_+W+X+Z,j-Q.O.U.V.W.Y/h/k2[3S3T4X6h6yQ,i&m!p=]$Z$n)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sR=`'VU'Z!e%h*XR2k-Z%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y,k,n,s-d-l-z.Q.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3d4q5y6Z6[6_6r8i8x9S!r)]$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sQ,h&mQ0r+dQ3W.bQ7O3[R9Y7Q!b$Tc#Y%p(Q(W(r(w)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!P<U)[)o-U.w2c2f3h3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!f$Vc#Y%p(Q(W(r(w)U)V)X)Y)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;x!T<W)[)o-U.w2c2f3h3n3o3q3r3w4P6k7W7a7b8`8|9[9b9c:y;R=g!^$Zc#Y%p(Q(W(r(w)^)e+u-s-x-}.P.n.q/]0j2v2}3c3s5O5Y6q6v7V9Q:c;xQ4V/fz=s)[)o-U.w2c2f3h3w4P6k7W7a7b8`8|9[9b9c:y;R=gQ=x=zR=y={'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sS$oh$pR3|/P'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$kf$qQ$ifS)h$l)lR)t$qT$jf$qT)j$l)l'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%l%s&Q&i&l&m&p&r&s&u&y'R'V'`'p(R(T(Z(b(v(x(|)q){*f+U+Y+d,k,n,s-P-S-d-l-z.Q.b.o.v/P/Q/i0V0d0l0|1j1z1{1}2P2S2V2X2h2x3O3[3d3{4q5m5y6Z6[6_6i6r7Q8i8x9S9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=sT$oh$pQ$rhR)s$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%l%s&Q&i&l&m&p&r&s&u&y'R'`'p(R(T(Z(b(v(x(|){*f+U+Y+d,k,n,s-d-l-z.Q.b.o.v/i0V0d0l0|1j1z1{1}2P2S2V2X2x3O3[3d4q5y6Z6[6_6r7Q8i8x9S!s=q$Z$n'V)q-P-S/Q2h3{5m6i9}:a;v;y;z;}<O<P<Q<R<S<T<U<V<W<X<Y<Z<]<`<m<p<q<s<{<|=V=W=s#glOPXZst!Z!`!o#S#d#o#{$n%l&i&l&m&p&r&s&u&y'R'`(|)q*f+Y+d,k,n,s-d.b/Q/i0V0d1j1z1{1}2P2S2V2X3[3{4q5y6Z6[6_7Q8i8x!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}Q+P%`Q/^)|o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!U$yi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yQ*`$zU*i$|*X*lQ+Q%aQ0Q*j#f=c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n=d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YQ=h=tQ=i=uQ=j=vR=k=w!U%Ri$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y#f(u#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}o3v<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=YnoOXst!Z#d%l&p&r&s&u,n,s2S2VS*c${*WQ,|&|Q,}'OR4`/s%[%Si#v$b$c$d$x${%O%Q%]%^%b)w*P*R*T*W*^*d*t*u+c+f+},Q.a.z/_/h/r/s/u0Y0[0g0h0i1^1a1i3Z4U4V4a4f4w5R5U5x6|7l7v7|8Q8f9V9e9n9t:S:f:t:};V;^<^<_<a<b<c<d<g<h<i<j<k<l<t<u<v<w<y<z<}=O=P=Q=R=S=T=U=X=Y=p=x=y=|=}Q,P&ZQ1`,RQ5i1_R8]5jV*k$|*X*lU*k$|*X*lT5p1g5qS/y*f/iQ4n0VT7x4q:PQ+g%wQ0P*iQ0x+hQ1m,[Q5|1nQ8k5}Q:V8lR;P:W!U%Oi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=yx*P$v)c*Q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=oS0Y*q0Z#f<a#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<b<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!d<t(s)a*Y*b.e.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={`<u3u7X7[7`9]:h:k;kS=P.g3aT=Q7Z9`!U%Qi$d%O%Q%]%^%b*P*R*^*t*u.z/r0Y0[0g0h0i4V4w7|9e=p=x=y|*R$v)c*S*q+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=oS0[*r0]#f<c#v$b$c$x${)w*T*W*d+c+f+},Q.a/_/h/s/u1^1a1i3Z4U4a4f5R5U5x6|7l7v8Q8f9V9n9t:S:f:t:};V;^<a<c<g<i<k<t<v<y<}=P=R=T=X=|=}n<d<^<_<b<d<h<j<l<u<w<z=O=Q=S=U=Y!h<v(s)a*Y*b.f.g.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={d<w3u7Y7Z7`9]9^:h:i:k;kS=R.h3bT=S7[9arnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ&d!UR,k&mrnOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VR&d!UQ,T&[R1[+|snOXst!V!Z#d%l&g&p&r&s&u,n,s2S2VQ1h,YS5w1k1lU8e5u5v5zS:R8g8hS:{:Q:TQ;_:|R;i;`Q&k!VR,d&gR6T1tR:Y8nS&P|&UR1T+sQ&p!WR,n&qR,t&vT2T,s2VR,x&wQ,w&wR2^,xQ'w!{R-t'wSsOtQ#dXT%os#dQ#OTR'y#OQ#RUR'{#RQ)y$uR/Z)yQ#UVR(O#UQ#XWU(U#X(V-{Q(V#YR-{(WQ-X'WR2j-XQ.p(wS3e.p3fR3f.qQ-`'^R2n-`Y!rQ'^-`1g5qR'h!rQ.{)cR3z.{U#_W%g*WU(]#_(^-|Q(^#`R-|(XQ-['ZR2l-[t`OXst!V!Z#d%l&g&i&p&r&s&u,n,s2S2VS#hZ%dU#r`#h.VR.V(hQ(i#jQ.S(eW.[(i.S3P6wQ3P.TR6w3QQ)l$lR/R)lQ$phR)r$pQ$`cU)_$`-w<[Q-w;xR<[)oQ/l*ZW4Y/l4Z7j9hU4Z/m/n/oS7j4[4]R9h7k$e*O$v(s)a)c*Y*b*q*r*|*}+R.g.h.j.k.l/Y/b/d/f/q/v0^0_0p1]3^3_3`3u3y4S4^4_4c4s4u4{4|4}5h7R7S7T7U7Z7[7^7_7`7f7m7p7z7}8P9]9^9_9i9q9v9w:h:i:j:k:l:q:u;W;];h;k=b=n=o=z={Q/t*bU4b/t4d7nQ4d/vR7n4cS*l$|*XR0S*lx*Q$v)c*q*r+R/q0^0_3y4^4{4|4}7f7z9v:l=b=n=o!d.e(s)a*Y*b.g.h.l/Y/f/v0p1]3`4S4_4c5h7R7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/c*Q.e7Xa7X3u7Z7[7`9]:h:k;kQ0Z*qQ3a.gU4t0Z3a9`R9`7Z|*S$v)c*q*r+R/b/q0^0_3y4^4s4{4|4}7f7z9v:l=b=n=o!h.f(s)a*Y*b.g.h.l/Y/f/v0p1]3^3`4S4_4c5h7R7S7U7m7p7}8P9i9q9w:q:u;W;];h=z={U/e*S.f7Ye7Y3u7Z7[7`9]9^:h:i:k;kQ0]*rQ3b.hU4v0]3b9aR9a7[Q*w%UR0a*wQ5S0pR8O5SQ+[%jR0o+[Q5l1bS8_5l:OR:O8`Q,V&]R1e,VQ5q1gR8b5qQ1s,aS6R1s8oR8o6TQ1O+oW5_1O5a8V9zQ5a1RQ8V5`R9z8WQ+t&PR1U+tQ2V,sR6c2VYrOXst#dQ&t!ZQ+^%lQ,m&pQ,o&rQ,p&sQ,r&uQ2Q,nS2T,s2VR6b2SQ%npQ&x!_Q&{!aQ&}!bQ'P!cQ'o!uQ+]%kQ+i%yQ+{&VQ,c&kQ,z&zW-k'i'q'r'uQ-r'mQ0R*kQ0y+jS1v,d,gQ2_,yQ2`,|Q2a,}Q2u-jW2w-m-n-q-sQ5W0zQ5d1XQ5g1]Q5{1mQ6V1xQ6a2RU6p2v2y2|Q6s2zQ8R5XQ8Z5fQ8[5hQ8a5pQ8j5|Q8p6US9P6q6uQ9R6tQ9{8XQ:U8kQ:Z8qQ:b9QQ:x9|Q;O:VQ;S:cR;a;PQ%yyQ'b!iQ'm!uU+j%z%{%|Q-R'TU-f'c'd'eS-j'i'sQ/z*gS0z+k+lQ2g-TS2s-g-hQ2z-oS4g/{0OQ5X0{Q6l2mQ6o2tQ6t2{U7q4i4j4mQ9o7sR:r9pS$wi=pR*x%VU%Ui%V=pR0`*vQ$viS(s#v+fS)a$b$cQ)c$dQ*Y$xS*b${*WQ*q%OQ*r%QQ*|%]Q*}%^Q+R%bQ.g<aQ.h<cQ.j<gQ.k<iQ.l<kQ/Y)wQ/b*PQ/d*RQ/f*TQ/q*^S/v*d/hQ0^*tQ0_*ul0p+c,Q.a1a1i3Z5x6|8f9V:S:f:};VQ1]+}Q3^<tQ3_<vQ3`<yS3u<^<_Q3y.zS4S/_4UQ4^/rQ4_/sQ4c/uQ4s0YQ4u0[Q4{0gQ4|0hQ4}0iQ5h1^Q7R<}Q7S=PQ7T=RQ7U=TQ7Z<bQ7[<dQ7^<hQ7_<jQ7`<lQ7f4VQ7m4aQ7p4fQ7z4wQ7}5RQ8P5UQ9]<zQ9^<uQ9_<wQ9i7lQ9q7vQ9v7|Q9w8QQ:h=OQ:i=QQ:j=SQ:k=UQ:l9eQ:q9nQ:u9tQ;W=XQ;]:tQ;h;^Q;k=YQ=b=pQ=n=xQ=o=yQ=z=|R={=}Q*z%[Q.i<eR7]<fnpOXst!Z#d%l&p&r&s&u,n,s2S2VQ!fPS#fZ#oQ&z!`W'f!o*f0V4qQ'}#SQ)O#{Q)p$nS,g&i&lQ,l&mQ,y&yS-O'R/iQ-b'`Q.s(|Q/V)qQ0m+YQ0s+dQ2O,kQ2q-dQ3X.bQ4O/QQ4y0dQ5v1jQ6X1zQ6Y1{Q6^1}Q6`2PQ6e2XQ7P3[Q7c3{Q8h5yQ8t6ZQ8u6[Q8w6_Q9Z7QQ:T8iR:_8x#[cOPXZst!Z!`!o#d#o#{%l&i&l&m&p&r&s&u&y'R'`(|*f+Y+d,k,n,s-d.b/i0V0d1j1z1{1}2P2S2V2X3[4q5y6Z6[6_7Q8i8xQ#YWQ#eYQ%puQ%rvS%tw!gS(Q#W(TQ(W#ZQ(r#uQ(w#xQ)P$OQ)Q$PQ)R$QQ)S$RQ)T$SQ)U$TQ)V$UQ)W$VQ)X$WQ)Y$XQ)[$ZQ)^$_Q)`$aQ)e$eW)o$n)q/Q3{Q+a%sQ+u&QS-U'V2hQ-s'pS-x(R-zQ-}(ZQ.P(bQ.n(vQ.q(xQ.u;vQ.w;yQ.x;zQ.y;}Q/]){Q0j+UQ2c-PQ2f-SQ2v-lQ2}.QQ3c.oQ3h<OQ3i<PQ3j<QQ3k<RQ3l<SQ3m<TQ3n<UQ3o<VQ3p<WQ3q<XQ3r<YQ3s.vQ3t<]Q3w<`Q3x<mQ4P<ZQ5O0lQ5Y0|Q6k<pQ6q2xQ6v3OQ7V3dQ7W<qQ7a<sQ7b<{Q8`5mQ8|6iQ9Q6rQ9[<|Q9b=VQ9c=WQ:c9SQ:y9}Q;R:aQ;x#SR=g=sR#[WR'X!el!tQ!r!v!y!z'^'j'k'l-`-p1g5q5sS'T!e-WU*g$|*X*lS-T'U']S0O*h*nQ0W*oQ2m-^Q4m0UR4r0XR(y#xQ!fQT-_'^-`]!qQ!r'^-`1g5qQ#p]R'g;wR)d$dY!uQ'^-`1g5qQ'i!rS's!v!yS'u!z5sS-o'j'kQ-q'lR2{-pT#kZ%dS#jZ%dS%jm,jU(e#h#i#lS.T(f(gQ.X(hQ0n+ZQ3Q.UU3R.V.W.YS6x3S3TR9T6yd#^W#W#Z%g(R([*W+W.O/hr#gZm#h#i#l%d(f(g(h+Z.U.V.W.Y3S3T6yS*Z$x*_Q/o*[Q1|,jQ2d-QQ4W/kQ6g2[Q7i4XQ8{6hT=_'V+XV#aW%g*WU#`W%g*WS(S#W([U(X#Z+W/hS-V'V+XT-y(R.OV'[!e%h*XQ$lfR)v$qT)k$l)lR3}/PT*]$x*_T*e${*WQ0q+cQ1_,QQ3V.aQ5j1aQ5u1iQ6}3ZQ8g5xQ9W6|Q:Q8fQ:d9VQ:|:SQ;U:fQ;`:}R;c;VnqOXst!Z#d%l&p&r&s&u,n,s2S2VQ&j!VR,c&gtmOXst!U!V!Z#d%l&g&p&r&s&u,n,s2S2VR,j&mT%km,jR1c,SR,b&eQ&T|R+z&UR+p&OT&n!W&qT&o!W&qT2U,s2V",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:378,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,35,37,49,51,53,""],["group",-26,9,17,19,66,206,210,214,215,217,220,223,233,235,241,243,245,247,250,256,262,264,266,268,270,272,273,"Statement",-34,13,14,30,33,34,40,49,52,53,55,60,68,70,74,78,80,82,83,108,109,118,119,135,138,140,141,142,143,144,146,147,166,168,170,"Expression",-23,29,31,35,39,41,43,172,174,176,177,179,180,181,183,184,185,187,188,189,200,202,204,205,"Type",-3,86,101,107,"ClassItem"],["openedBy",23,"<",36,"InterpolationStart",54,"[",58,"{",71,"(",159,"JSXStartCloseTag"],["closedBy",-2,24,167,">",38,"InterpolationEnd",48,"]",59,"}",72,")",164,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,276],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$h&j(Up(X!b'z0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(V#S$h&j'{0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$h&j(Up(X!b'{0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$h&j!n),Q(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#u(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(T':f$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$h&j(X!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$h&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$c`$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$c``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$c`$h&j(X!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(X!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$c`(X!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$h&j(Up(X!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$h&j(Up(X!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$h&j(X!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$h&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(X!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$h&j(UpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(UpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Up(X!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$h&j(m%1l(Up(X!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$h&j(Up(X!b$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$h&j(Up(X!b$[#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$h&j(Up(X!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$h&j$P(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(x+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$h&j#y(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(W';W$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$h&j(UpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$h&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$c`$h&j(UpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(UpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$c`(UpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!j/.^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!i!Lf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$h&j(Up(X!b(S%&f#o(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$h&j(Up(X!b#l(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$h&j(Up(X!bp+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!Z+Jf$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$h&j(Up(X!b!O.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_!Y!L^$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$h&j(Up(X!b#m(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$h&j(X!b!V7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$h&j!V7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$h&j!V7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!V7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!V7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$h&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$h&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$h&j(X!b!V7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(X!b!V7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(X!b!V7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(X!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$h&j(X!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$h&j(Up!V7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$h&j(Up!V7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Up!V7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Up!V7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(UpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$h&j(UpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$h&j(Up(X!b!V7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Up(X!b!V7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Up(X!b!V7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Up(X!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$h&j(Up(X!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$h&j(Up(X!b'|0/l!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$h&j(Up(X!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$h&j(X!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$h&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(X!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$h&j(UpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(UpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Up(X!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$h&j$P(Ch(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Y#t$h&j(Up(X!b!V7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$h&j(Up(X!bq'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!e$b$h&j#})Lv(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#P-<U(Up(X!b$m7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$j&j(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#p(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$P(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#q(Ch(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#^*!Y$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#i(Cl$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#q(Ch$e#|$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#q(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#p(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(p(Ct$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$h&j#z(Ch(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!z$Ip$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!Q0,v$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$h&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$h&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$h&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$h&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$h&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$h&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!W#)l$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#w(Ch$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$h&j(Up(X!b(_+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$h&j(Up(X!b(R,2j$^#t(c$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$h&j(Up(X!b$^#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!]#Hb(Up(X!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(w+JY$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_![(CdtBr$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!o7`$h&j(Up(X!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$h&j(Up(X!b'z0/l$[#t(R,2j(c$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$h&j(Up(X!b'{0/l$[#t(R,2j(c$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,noSemicolonType,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOv~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!S~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(a~~",141,338),new LocalTokenGroup("j~RQYZXz{^~^O(O~~aP!P!Qd~iO(P~~",25,321)],topRules:{Script:[0,7],SingleExpression:[1,274],SingleClassItem:[2,275]},dialects:{jsx:0,ts:15091},dynamicPrecedences:{78:1,80:1,92:1,168:1,198:1},specialized:[{term:325,get:l=>spec_identifier[l]||-1},{term:341,get:l=>spec_word[l]||-1},{term:93,get:l=>spec_LessThan[l]||-1}],tokenPrec:15116}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache$6=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(l){return(a,o)=>{let u=a.node.getChild("VariableDefinition");return u&&o(u,l),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(l,a){l.matchContext(functionContext)||a(l,"variable")},TypeDefinition(l,a){a(l,"type")},__proto__:null};function getScope(l,a){let o=cache$6.get(a);if(o)return o;let u=[],p=!0;function d(f,g){let b=l.sliceString(f.from,f.to);u.push({label:b,type:g})}return a.cursor(IterMode.IncludeAnonymous).iterate(f=>{if(p)p=!1;else if(f.name){let g=gatherCompletions[f.name];if(g&&g(f,d)||ScopeNodes.has(f.name))return!1}else if(f.to-f.from>8192){for(let g of getScope(l,f.node))u.push(g);return!1}}),cache$6.set(a,u),u}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(l){let a=syntaxTree(l.state).resolveInner(l.pos,-1);if(dontComplete.indexOf(a.name)>-1)return null;let o=a.name=="VariableName"||a.to-a.from<20&&Identifier.test(l.state.sliceDoc(a.from,a.to));if(!o&&!l.explicit)return null;let u=[];for(let p=a;p;p=p.parent)ScopeNodes.has(p.name)&&(u=u.concat(getScope(l.state.doc,p)));return{options:u,from:o?a.from:l.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:l=>{let a=l.textAfter,o=/^\s*\}/.test(a),u=/^\s*(case|default)\b/.test(a);return l.baseIndent+(o?0:u?1:2)*l.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:l=>l.baseIndent+l.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(l){let a=/^\s*<\//.test(l.textAfter);return l.lineIndent(l.node.from)+(a?0:l.unit)},JSXEscape(l){let a=/\s*\}/.test(l.textAfter);return l.lineIndent(l.node.from)+(a?0:l.unit)},"JSXOpenTag JSXSelfClosingTag"(l){return l.column(l.node.from)+l.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(l){return{from:l.from+2,to:l.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:l=>/^JSX/.test(l.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(l=>l.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(l=>l.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=l=>({label:l,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(l={}){let a=l.jsx?l.typescript?tsxLanguage:jsxLanguage:l.typescript?typescriptLanguage:javascriptLanguage,o=l.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(a,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(o))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),l.jsx?autoCloseTags:[]])}function findOpenTag(l){for(;;){if(l.name=="JSXOpenTag"||l.name=="JSXSelfClosingTag"||l.name=="JSXFragmentTag")return l;if(l.name=="JSXEscape"||!l.parent)return null;l=l.parent}}function elementName(l,a,o=l.length){for(let u=a?.firstChild;u;u=u.nextSibling)if(u.name=="JSXIdentifier"||u.name=="JSXBuiltin"||u.name=="JSXNamespacedName"||u.name=="JSXMemberExpression")return l.sliceString(u.from,Math.min(u.to,o));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags=EditorView.inputHandler.of((l,a,o,u,p)=>{if((android?l.composing:l.compositionStarted)||l.state.readOnly||a!=o||u!=">"&&u!="/"||!javascriptLanguage.isActiveAt(l.state,a,-1))return!1;let d=p(),{state:f}=d,g=f.changeByRange(b=>{var O;let{head:S}=b,M=syntaxTree(f).resolveInner(S-1,-1),A;if(M.name=="JSXStartTag"&&(M=M.parent),!(f.doc.sliceString(S-1,S)!=u||M.name=="JSXAttributeValue"&&M.to>S)){if(u==">"&&M.name=="JSXFragmentTag")return{range:b,changes:{from:S,insert:"</>"}};if(u=="/"&&M.name=="JSXStartCloseTag"){let F=M.parent,$=F.parent;if($&&F.from==S-2&&((A=elementName(f.doc,$.firstChild,S))||((O=$.firstChild)===null||O===void 0?void 0:O.name)=="JSXFragmentTag")){let B=`${A}>`;return{range:EditorSelection.cursor(S+B.length,-1),changes:{from:S,insert:B}}}}else if(u==">"){let F=findOpenTag(M);if(F&&F.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(f.doc.sliceString(S,S+2))&&(A=elementName(f.doc,F,S)))return{range:b,changes:{from:S,insert:`</${A}>`}}}}return{range:b}});return g.changes.empty?!1:(l.dispatch([d,f.update(g,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),docs=JSON.parse(`[{"comment":"/**\\n * Overrides the css of highlighted events. Make sure to use single quotes!\\n * @name markcss\\n * @example\\n * note(\\"c a f e\\")\\n * .markcss('text-decoration:underline')\\n */","meta":{"filename":"codemirror.mjs","lineno":379,"columnno":0,"path":"/home/alex/src/strudel/packages/codemirror","code":{}},"description":"<p>Overrides the css of highlighted events. Make sure to use single quotes!</p>","name":"markcss","examples":["note(\\"c a f e\\")\\n.markcss('text-decoration:underline')"],"longname":"markcss","kind":"member","scope":"global"},{"comment":"/**\\n * Displays a slider widget to allow the user manipulate a value\\n *\\n * @name slider\\n * @param {number} value Initial value\\n * @param {number} min Minimum value - optional, defaults to 0\\n * @param {number} max Maximum value - optional, defaults to 1\\n * @param {number} step Step size - optional\\n */","meta":{"filename":"slider.mjs","lineno":116,"columnno":0,"path":"/home/alex/src/strudel/packages/codemirror","code":{}},"description":"<p>Displays a slider widget to allow the user manipulate a value</p>","name":"slider","params":[{"type":{"names":["number"]},"description":"<p>Initial value</p>","name":"value"},{"type":{"names":["number"]},"description":"<p>Minimum value - optional, defaults to 0</p>","name":"min"},{"type":{"names":["number"]},"description":"<p>Maximum value - optional, defaults to 1</p>","name":"max"},{"type":{"names":["number"]},"description":"<p>Step size - optional</p>","name":"step"}],"longname":"slider","kind":"member","scope":"global"},{"comment":"/**\\n * Select a sound / sample by name. When using mininotation, you can also optionally supply 'n' and 'gain' parameters\\n * separated by ':'.\\n *\\n * @name s\\n * @param {string | Pattern} sound The sound / pattern of sounds to pick\\n * @synonyms sound\\n * @example\\n * s(\\"bd hh\\")\\n * @example\\n * s(\\"bd:0 bd:1 bd:0:0.3 bd:1:1.4\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":75,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Select a sound / sample by name. When using mininotation, you can also optionally supply 'n' and 'gain' parameters\\nseparated by ':'.</p>","name":"s","params":[{"type":{"names":["string","Pattern"]},"description":"<p>The sound / pattern of sounds to pick</p>","name":"sound"}],"synonyms_text":"sound","synonyms":["sound"],"examples":["s(\\"bd hh\\")","s(\\"bd:0 bd:1 bd:0:0.3 bd:1:1.4\\")"],"longname":"s","kind":"member","scope":"global"},{"comment":"/**\\n * Position in the wavetable of the wavetable oscillator\\n *\\n * @name wt\\n * @param {number | Pattern} position Position in the wavetable from 0 to 1\\n * @synonyms wavetablePosition\\n * @example\\n * s(\\"squelch\\").bank(\\"wt_digital\\").seg(8).note(\\"F1\\").wt(\\"0 0.25 0.5 0.75 1\\")\\n */","meta":{"filename":"controls.mjs","lineno":90,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Position in the wavetable of the wavetable oscillator</p>","name":"wt","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Position in the wavetable from 0 to 1</p>","name":"position"}],"synonyms_text":"wavetablePosition","synonyms":["wavetablePosition"],"examples":["s(\\"squelch\\").bank(\\"wt_digital\\").seg(8).note(\\"F1\\").wt(\\"0 0.25 0.5 0.75 1\\")"],"longname":"wt","kind":"member","scope":"global"},{"comment":"/**\\n * Amount of envelope applied wavetable oscillator's position envelope\\n *\\n * @name wtenv\\n * @param {number | Pattern} amount between 0 and 1\\n */","meta":{"filename":"controls.mjs","lineno":101,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amount of envelope applied wavetable oscillator's position envelope</p>","name":"wtenv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"amount"}],"longname":"wtenv","kind":"member","scope":"global"},{"comment":"/**\\n * Attack time of the wavetable oscillator's position envelope\\n *\\n * @name wtattack\\n * @synonyms wtatt\\n * @param {number | Pattern} time attack time in seconds\\n */","meta":{"filename":"controls.mjs","lineno":108,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Attack time of the wavetable oscillator's position envelope</p>","name":"wtattack","synonyms_text":"wtatt","synonyms":["wtatt"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>attack time in seconds</p>","name":"time"}],"longname":"wtattack","kind":"member","scope":"global"},{"comment":"/**\\n * Decay time of the wavetable oscillator's position envelope\\n *\\n * @name wtdecay\\n * @synonyms wtdec\\n * @param {number | Pattern} time decay time in seconds\\n */","meta":{"filename":"controls.mjs","lineno":117,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Decay time of the wavetable oscillator's position envelope</p>","name":"wtdecay","synonyms_text":"wtdec","synonyms":["wtdec"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>decay time in seconds</p>","name":"time"}],"longname":"wtdecay","kind":"member","scope":"global"},{"comment":"/**\\n * Sustain time of the wavetable oscillator's position envelope\\n *\\n * @name wtsustain\\n * @synonyms wtsus\\n * @param {number | Pattern} gain sustain level (0 to 1)\\n */","meta":{"filename":"controls.mjs","lineno":126,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sustain time of the wavetable oscillator's position envelope</p>","name":"wtsustain","synonyms_text":"wtsus","synonyms":["wtsus"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>sustain level (0 to 1)</p>","name":"gain"}],"longname":"wtsustain","kind":"member","scope":"global"},{"comment":"/**\\n * Release time of the wavetable oscillator's position envelope\\n *\\n * @name wtrelease\\n * @synonyms wtrel\\n * @param {number | Pattern} time release time in seconds\\n */","meta":{"filename":"controls.mjs","lineno":135,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Release time of the wavetable oscillator's position envelope</p>","name":"wtrelease","synonyms_text":"wtrel","synonyms":["wtrel"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>release time in seconds</p>","name":"time"}],"longname":"wtrelease","kind":"member","scope":"global"},{"comment":"/**\\n * Rate of the LFO for the wavetable oscillator's position\\n *\\n * @name wtrate\\n * @param {number | Pattern} rate rate in hertz\\n */","meta":{"filename":"controls.mjs","lineno":144,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Rate of the LFO for the wavetable oscillator's position</p>","name":"wtrate","params":[{"type":{"names":["number","Pattern"]},"description":"<p>rate in hertz</p>","name":"rate"}],"longname":"wtrate","kind":"member","scope":"global"},{"comment":"/**\\n * cycle synced rate of the LFO for the wavetable oscillator's position\\n *\\n * @name wtsync\\n * @param {number | Pattern} rate rate in cycles\\n */","meta":{"filename":"controls.mjs","lineno":151,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>cycle synced rate of the LFO for the wavetable oscillator's position</p>","name":"wtsync","params":[{"type":{"names":["number","Pattern"]},"description":"<p>rate in cycles</p>","name":"rate"}],"longname":"wtsync","kind":"member","scope":"global"},{"comment":"/**\\n * Depth of the LFO for the wavetable oscillator's position\\n *\\n * @name wtdepth\\n * @param {number | Pattern} depth depth of modulation\\n */","meta":{"filename":"controls.mjs","lineno":159,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Depth of the LFO for the wavetable oscillator's position</p>","name":"wtdepth","params":[{"type":{"names":["number","Pattern"]},"description":"<p>depth of modulation</p>","name":"depth"}],"longname":"wtdepth","kind":"member","scope":"global"},{"comment":"/**\\n * Shape of the LFO for the wavetable oscillator's position\\n *\\n * @name wtshape\\n * @param {number | Pattern} shape Shape of the lfo (0, 1, 2, ..)\\n */","meta":{"filename":"controls.mjs","lineno":167,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shape of the LFO for the wavetable oscillator's position</p>","name":"wtshape","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Shape of the lfo (0, 1, 2, ..)</p>","name":"shape"}],"longname":"wtshape","kind":"member","scope":"global"},{"comment":"/**\\n * DC offset of the LFO for the wavetable oscillator's position\\n *\\n * @name wtdc\\n * @param {number | Pattern} dcoffset dc offset. set to 0 for unipolar\\n */","meta":{"filename":"controls.mjs","lineno":175,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>DC offset of the LFO for the wavetable oscillator's position</p>","name":"wtdc","params":[{"type":{"names":["number","Pattern"]},"description":"<p>dc offset. set to 0 for unipolar</p>","name":"dcoffset"}],"longname":"wtdc","kind":"member","scope":"global"},{"comment":"/**\\n * Skew of the LFO for the wavetable oscillator's position\\n *\\n * @name wtskew\\n * @param {number | Pattern} skew How much to bend the LFO shape\\n */","meta":{"filename":"controls.mjs","lineno":183,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Skew of the LFO for the wavetable oscillator's position</p>","name":"wtskew","params":[{"type":{"names":["number","Pattern"]},"description":"<p>How much to bend the LFO shape</p>","name":"skew"}],"longname":"wtskew","kind":"member","scope":"global"},{"comment":"/**\\n * Amount of warp (alteration of the waveform) to apply to the wavetable oscillator\\n *\\n * @name warp\\n * @param {number | Pattern} amount Warp of the wavetable from 0 to 1\\n * @synonyms wavetableWarp\\n * @example\\n * s(\\"basique\\").bank(\\"wt_digital\\").seg(8).note(\\"F1\\").warp(\\"0 0.25 0.5 0.75 1\\")\\n *   .warpmode(\\"spin\\")\\n */","meta":{"filename":"controls.mjs","lineno":191,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amount of warp (alteration of the waveform) to apply to the wavetable oscillator</p>","name":"warp","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Warp of the wavetable from 0 to 1</p>","name":"amount"}],"synonyms_text":"wavetableWarp","synonyms":["wavetableWarp"],"examples":["s(\\"basique\\").bank(\\"wt_digital\\").seg(8).note(\\"F1\\").warp(\\"0 0.25 0.5 0.75 1\\")\\n  .warpmode(\\"spin\\")"],"longname":"warp","kind":"member","scope":"global"},{"comment":"/**\\n * Attack time of the wavetable oscillator's warp envelope\\n *\\n * @name warpattack\\n * @synonyms warpatt\\n * @param {number | Pattern} time attack time in seconds\\n */","meta":{"filename":"controls.mjs","lineno":203,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Attack time of the wavetable oscillator's warp envelope</p>","name":"warpattack","synonyms_text":"warpatt","synonyms":["warpatt"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>attack time in seconds</p>","name":"time"}],"longname":"warpattack","kind":"member","scope":"global"},{"comment":"/**\\n * Decay time of the wavetable oscillator's warp envelope\\n *\\n * @name warpdecay\\n * @synonyms warpdec\\n * @param {number | Pattern} time decay time in seconds\\n */","meta":{"filename":"controls.mjs","lineno":212,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Decay time of the wavetable oscillator's warp envelope</p>","name":"warpdecay","synonyms_text":"warpdec","synonyms":["warpdec"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>decay time in seconds</p>","name":"time"}],"longname":"warpdecay","kind":"member","scope":"global"},{"comment":"/**\\n * Sustain time of the wavetable oscillator's warp envelope\\n *\\n * @name warpsustain\\n * @synonyms warpsus\\n * @param {number | Pattern} gain sustain level (0 to 1)\\n */","meta":{"filename":"controls.mjs","lineno":221,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sustain time of the wavetable oscillator's warp envelope</p>","name":"warpsustain","synonyms_text":"warpsus","synonyms":["warpsus"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>sustain level (0 to 1)</p>","name":"gain"}],"longname":"warpsustain","kind":"member","scope":"global"},{"comment":"/**\\n * Release time of the wavetable oscillator's warp envelope\\n *\\n * @name warprelease\\n * @synonyms warprel\\n * @param {number | Pattern} time release time in seconds\\n */","meta":{"filename":"controls.mjs","lineno":230,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Release time of the wavetable oscillator's warp envelope</p>","name":"warprelease","synonyms_text":"warprel","synonyms":["warprel"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>release time in seconds</p>","name":"time"}],"longname":"warprelease","kind":"member","scope":"global"},{"comment":"/**\\n * Rate of the LFO for the wavetable oscillator's warp\\n *\\n * @name warprate\\n * @param {number | Pattern} rate rate in hertz\\n */","meta":{"filename":"controls.mjs","lineno":239,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Rate of the LFO for the wavetable oscillator's warp</p>","name":"warprate","params":[{"type":{"names":["number","Pattern"]},"description":"<p>rate in hertz</p>","name":"rate"}],"longname":"warprate","kind":"member","scope":"global"},{"comment":"/**\\n * Depth of the LFO for the wavetable oscillator's warp\\n *\\n * @name warpdepth\\n * @param {number | Pattern} depth depth of modulation\\n */","meta":{"filename":"controls.mjs","lineno":247,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Depth of the LFO for the wavetable oscillator's warp</p>","name":"warpdepth","params":[{"type":{"names":["number","Pattern"]},"description":"<p>depth of modulation</p>","name":"depth"}],"longname":"warpdepth","kind":"member","scope":"global"},{"comment":"/**\\n * Shape of the LFO for the wavetable oscillator's warp\\n *\\n * @name warpshape\\n * @param {number | Pattern} shape Shape of the lfo (0, 1, 2, ..)\\n */","meta":{"filename":"controls.mjs","lineno":255,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shape of the LFO for the wavetable oscillator's warp</p>","name":"warpshape","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Shape of the lfo (0, 1, 2, ..)</p>","name":"shape"}],"longname":"warpshape","kind":"member","scope":"global"},{"comment":"/**\\n * DC offset of the LFO for the wavetable oscillator's warp\\n *\\n * @name warpdc\\n * @param {number | Pattern} dcoffset dc offset. set to 0 for unipolar\\n */","meta":{"filename":"controls.mjs","lineno":263,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>DC offset of the LFO for the wavetable oscillator's warp</p>","name":"warpdc","params":[{"type":{"names":["number","Pattern"]},"description":"<p>dc offset. set to 0 for unipolar</p>","name":"dcoffset"}],"longname":"warpdc","kind":"member","scope":"global"},{"comment":"/**\\n * Skew of the LFO for the wavetable oscillator's warp\\n *\\n * @name warpskew\\n * @param {number | Pattern} skew How much to bend the LFO shape\\n */","meta":{"filename":"controls.mjs","lineno":271,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Skew of the LFO for the wavetable oscillator's warp</p>","name":"warpskew","params":[{"type":{"names":["number","Pattern"]},"description":"<p>How much to bend the LFO shape</p>","name":"skew"}],"longname":"warpskew","kind":"member","scope":"global"},{"comment":"/**\\n * Type of warp (alteration of the waveform) to apply to the wavetable oscillator.\\n *\\n * The current options are: none, asym, bendp, bendm, bendmp, sync, quant, fold, pwm, orbit,\\n * spin, chaos, primes, binary, brownian, reciprocal, wormhole, logistic, sigmoid, fractal, flip\\n *\\n * @name warpmode\\n * @param {number | string | Pattern} mode Warp mode\\n * @synonyms wavetableWarpMode\\n * @example\\n * s(\\"morgana\\").bank(\\"wt_digital\\").seg(8).note(\\"F1\\").warp(\\"0 0.25 0.5 0.75 1\\")\\n *   .warpmode(\\"<asym bendp spin logistic sync wormhole brownian>*2\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":279,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Type of warp (alteration of the waveform) to apply to the wavetable oscillator.</p>\\n<p>The current options are: none, asym, bendp, bendm, bendmp, sync, quant, fold, pwm, orbit,\\nspin, chaos, primes, binary, brownian, reciprocal, wormhole, logistic, sigmoid, fractal, flip</p>","name":"warpmode","params":[{"type":{"names":["number","string","Pattern"]},"description":"<p>Warp mode</p>","name":"mode"}],"synonyms_text":"wavetableWarpMode","synonyms":["wavetableWarpMode"],"examples":["s(\\"morgana\\").bank(\\"wt_digital\\").seg(8).note(\\"F1\\").warp(\\"0 0.25 0.5 0.75 1\\")\\n  .warpmode(\\"<asym bendp spin logistic sync wormhole brownian>*2\\")"],"longname":"warpmode","kind":"member","scope":"global"},{"comment":"/**\\n * Amount of randomness of the initial phase of the wavetable oscillator.\\n *\\n * @name wtphaserand\\n * @param {number | Pattern} amount Randomness of the initial phase. Between 0 (not random) and 1 (fully random)\\n * @synonyms wavetablePhaseRand\\n * @example\\n * s(\\"basique\\").bank(\\"wt_digital\\").seg(16).wtphaserand(\\"<0 1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":295,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amount of randomness of the initial phase of the wavetable oscillator.</p>","name":"wtphaserand","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Randomness of the initial phase. Between 0 (not random) and 1 (fully random)</p>","name":"amount"}],"synonyms_text":"wavetablePhaseRand","synonyms":["wavetablePhaseRand"],"examples":["s(\\"basique\\").bank(\\"wt_digital\\").seg(16).wtphaserand(\\"<0 1>\\")"],"longname":"wtphaserand","kind":"member","scope":"global"},{"comment":"/**\\n * Amount of envelope applied wavetable oscillator's position envelope\\n *\\n * @name warpenv\\n * @param {number | Pattern} amount between 0 and 1\\n */","meta":{"filename":"controls.mjs","lineno":307,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amount of envelope applied wavetable oscillator's position envelope</p>","name":"warpenv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"amount"}],"longname":"warpenv","kind":"member","scope":"global"},{"comment":"/**\\n * cycle synced rate of the LFO for the wavetable warp position\\n *\\n * @name warpsync\\n * @param {number | Pattern} rate rate in cycles\\n */","meta":{"filename":"controls.mjs","lineno":315,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>cycle synced rate of the LFO for the wavetable warp position</p>","name":"warpsync","params":[{"type":{"names":["number","Pattern"]},"description":"<p>rate in cycles</p>","name":"rate"}],"longname":"warpsync","kind":"member","scope":"global"},{"comment":"/**\\n * Define a custom webaudio node to use as a sound source.\\n *\\n * @name source\\n * @synonyms src\\n * @param {function} getSource\\n * @synonyms src\\n *\\n */","meta":{"filename":"controls.mjs","lineno":323,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Define a custom webaudio node to use as a sound source.</p>","name":"source","synonyms_text":"src","synonyms":["src"],"params":[{"type":{"names":["function"]},"name":"getSource"}],"longname":"source","kind":"member","scope":"global"},{"comment":"/**\\n * Selects the given index from the sample map.\\n * Numbers too high will wrap around.\\n * \`n\` can also be used to play midi numbers, but it is recommended to use \`note\` instead.\\n *\\n * @name n\\n * @param {number | Pattern} value sample index starting from 0\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*6\\").n(\\"<0 1>\\")\\n */","meta":{"filename":"controls.mjs","lineno":333,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Selects the given index from the sample map.\\nNumbers too high will wrap around.\\n<code>n</code> can also be used to play midi numbers, but it is recommended to use <code>note</code> instead.</p>","name":"n","params":[{"type":{"names":["number","Pattern"]},"description":"<p>sample index starting from 0</p>","name":"value"}],"examples":["s(\\"bd sd [~ bd] sd,hh*6\\").n(\\"<0 1>\\")"],"longname":"n","kind":"member","scope":"global"},{"comment":"/**\\n * Plays the given note name or midi number. A note name consists of\\n *\\n * - a letter (a-g or A-G)\\n * - optional accidentals (b or #)\\n * - optional (possibly negative) octave number (0-9). Defaults to 3\\n *\\n * Examples of valid note names: \`c\`, \`bb\`, \`Bb\`, \`f#\`, \`c3\`, \`A4\`, \`Eb2\`, \`c#5\`\\n *\\n * You can also use midi numbers instead of note names, where 69 is mapped to A4 440Hz in 12EDO.\\n *\\n * @name note\\n * @example\\n * note(\\"c a f e\\")\\n * @example\\n * note(\\"c4 a4 f4 e4\\")\\n * @example\\n * note(\\"60 69 65 64\\")\\n * @example\\n * note(\\"fbb1 a#0 cbbb-1 e##-2\\").sound(\\"saw\\")\\n */","meta":{"filename":"controls.mjs","lineno":345,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Plays the given note name or midi number. A note name consists of</p>\\n<ul>\\n<li>a letter (a-g or A-G)</li>\\n<li>optional accidentals (b or #)</li>\\n<li>optional (possibly negative) octave number (0-9). Defaults to 3</li>\\n</ul>\\n<p>Examples of valid note names: <code>c</code>, <code>bb</code>, <code>Bb</code>, <code>f#</code>, <code>c3</code>, <code>A4</code>, <code>Eb2</code>, <code>c#5</code></p>\\n<p>You can also use midi numbers instead of note names, where 69 is mapped to A4 440Hz in 12EDO.</p>","name":"note","examples":["note(\\"c a f e\\")","note(\\"c4 a4 f4 e4\\")","note(\\"60 69 65 64\\")","note(\\"fbb1 a#0 cbbb-1 e##-2\\").sound(\\"saw\\")"],"longname":"note","kind":"member","scope":"global"},{"comment":"/**\\n * A pattern of numbers that speed up (or slow down) samples while they play. Currently only supported by osc / superdirt.\\n *\\n * @name accelerate\\n * @param {number | Pattern} amount acceleration.\\n * @superdirtOnly\\n * @example\\n * s(\\"sax\\").accelerate(\\"<0 1 2 4 8 16>\\").slow(2).osc()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":368,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>A pattern of numbers that speed up (or slow down) samples while they play. Currently only supported by osc / superdirt.</p>","name":"accelerate","params":[{"type":{"names":["number","Pattern"]},"description":"<p>acceleration.</p>","name":"amount"}],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"examples":["s(\\"sax\\").accelerate(\\"<0 1 2 4 8 16>\\").slow(2).osc()"],"longname":"accelerate","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the velocity from 0 to 1. Is multiplied together with gain.\\n *\\n * @name velocity\\n * @example\\n * s(\\"hh*8\\")\\n * .gain(\\".4!2 1 .4!2 1 .4 1\\")\\n * .velocity(\\".4 1\\")\\n */","meta":{"filename":"controls.mjs","lineno":379,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the velocity from 0 to 1. Is multiplied together with gain.</p>","name":"velocity","examples":["s(\\"hh*8\\")\\n.gain(\\".4!2 1 .4!2 1 .4 1\\")\\n.velocity(\\".4 1\\")"],"longname":"velocity","kind":"member","scope":"global"},{"comment":"/**\\n * Controls the gain by an exponential amount.\\n *\\n * @name gain\\n * @param {number | Pattern} amount gain.\\n * @example\\n * s(\\"hh*8\\").gain(\\".4!2 1 .4!2 1 .4 1\\").fast(2)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":389,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Controls the gain by an exponential amount.</p>","name":"gain","params":[{"type":{"names":["number","Pattern"]},"description":"<p>gain.</p>","name":"amount"}],"examples":["s(\\"hh*8\\").gain(\\".4!2 1 .4!2 1 .4 1\\").fast(2)"],"longname":"gain","kind":"member","scope":"global"},{"comment":"/**\\n * Gain applied after all effects have been processed.\\n *\\n * @name postgain\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\")\\n * .compressor(\\"-20:20:10:.002:.02\\").postgain(1.5)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":399,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Gain applied after all effects have been processed.</p>","name":"postgain","examples":["s(\\"bd sd [~ bd] sd,hh*8\\")\\n.compressor(\\"-20:20:10:.002:.02\\").postgain(1.5)"],"longname":"postgain","kind":"member","scope":"global"},{"comment":"/**\\n * Like \`gain\`, but linear.\\n *\\n * @name amp\\n * @param {number | Pattern} amount gain.\\n * @superdirtOnly\\n * @example\\n * s(\\"bd*8\\").amp(\\".1*2 .5 .1*2 .5 .1 .5\\").osc()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":409,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like <code>gain</code>, but linear.</p>","name":"amp","params":[{"type":{"names":["number","Pattern"]},"description":"<p>gain.</p>","name":"amount"}],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"examples":["s(\\"bd*8\\").amp(\\".1*2 .5 .1*2 .5 .1 .5\\").osc()"],"longname":"amp","kind":"member","scope":"global"},{"comment":"/**\\n * Amplitude envelope attack time: Specifies how long it takes for the sound to reach its peak value, relative to the onset.\\n *\\n * @name attack\\n * @param {number | Pattern} attack time in seconds.\\n * @synonyms att\\n * @example\\n * note(\\"c3 e3 f3 g3\\").attack(\\"<0 .1 .5>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":420,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amplitude envelope attack time: Specifies how long it takes for the sound to reach its peak value, relative to the onset.</p>","name":"attack","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time in seconds.</p>","name":"attack"}],"synonyms_text":"att","synonyms":["att"],"examples":["note(\\"c3 e3 f3 g3\\").attack(\\"<0 .1 .5>\\")"],"longname":"attack","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the Frequency Modulation Harmonicity Ratio.\\n * Controls the timbre of the sound.\\n * Whole numbers and simple ratios sound more natural,\\n * while decimal numbers and complex ratios sound metallic.\\n *\\n * @name fmh\\n * @param {number | Pattern} harmonicity\\n * @example\\n * note(\\"c e g b g e\\")\\n * .fm(4)\\n * .fmh(\\"<1 2 1.5 1.61>\\")\\n * ._scope()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":432,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the Frequency Modulation Harmonicity Ratio.\\nControls the timbre of the sound.\\nWhole numbers and simple ratios sound more natural,\\nwhile decimal numbers and complex ratios sound metallic.</p>","name":"fmh","params":[{"type":{"names":["number","Pattern"]},"name":"harmonicity"}],"examples":["note(\\"c e g b g e\\")\\n.fm(4)\\n.fmh(\\"<1 2 1.5 1.61>\\")\\n._scope()"],"longname":"fmh","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the Frequency Modulation of the synth.\\n * Controls the modulation index, which defines the brightness of the sound.\\n *\\n * @name fm\\n * @param {number | Pattern} brightness modulation index\\n * @synonyms fmi\\n * @example\\n * note(\\"c e g b g e\\")\\n * .fm(\\"<0 1 2 8 32>\\")\\n * ._scope()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":448,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the Frequency Modulation of the synth.\\nControls the modulation index, which defines the brightness of the sound.</p>","name":"fm","params":[{"type":{"names":["number","Pattern"]},"description":"<p>modulation index</p>","name":"brightness"}],"synonyms_text":"fmi","synonyms":["fmi"],"examples":["note(\\"c e g b g e\\")\\n.fm(\\"<0 1 2 8 32>\\")\\n._scope()"],"longname":"fm","kind":"member","scope":"global"},{"comment":"/**\\n * Ramp type of fm envelope. Exp might be a bit broken..\\n *\\n * @name fmenv\\n * @param {number | Pattern} type lin | exp\\n * @example\\n * note(\\"c e g b g e\\")\\n * .fm(4)\\n * .fmdecay(.2)\\n * .fmsustain(0)\\n * .fmenv(\\"<exp lin>\\")\\n * ._scope()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":463,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Ramp type of fm envelope. Exp might be a bit broken..</p>","name":"fmenv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>lin | exp</p>","name":"type"}],"examples":["note(\\"c e g b g e\\")\\n.fm(4)\\n.fmdecay(.2)\\n.fmsustain(0)\\n.fmenv(\\"<exp lin>\\")\\n._scope()"],"longname":"fmenv","kind":"member","scope":"global"},{"comment":"/**\\n * Attack time for the FM envelope: time it takes to reach maximum modulation\\n *\\n * @name fmattack\\n * @param {number | Pattern} time attack time\\n * @example\\n * note(\\"c e g b g e\\")\\n * .fm(4)\\n * .fmattack(\\"<0 .05 .1 .2>\\")\\n * ._scope()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":478,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Attack time for the FM envelope: time it takes to reach maximum modulation</p>","name":"fmattack","params":[{"type":{"names":["number","Pattern"]},"description":"<p>attack time</p>","name":"time"}],"examples":["note(\\"c e g b g e\\")\\n.fm(4)\\n.fmattack(\\"<0 .05 .1 .2>\\")\\n._scope()"],"longname":"fmattack","kind":"member","scope":"global"},{"comment":"/**\\n * Waveform of the fm modulator\\n *\\n * @name fmwave\\n * @param {number | Pattern} wave waveform\\n * @example\\n * n(\\"0 1 2 3\\".fast(4)).scale(\\"d:minor\\").s(\\"sine\\").fmwave(\\"<sine square sawtooth crackle>\\").fm(4).fmh(2.01)\\n * @example\\n * n(\\"0 1 2 3\\".fast(4)).chord(\\"<Dm Am F G>\\").voicing().s(\\"sawtooth\\").fmwave(\\"brown\\").fm(.6)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":492,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Waveform of the fm modulator</p>","name":"fmwave","params":[{"type":{"names":["number","Pattern"]},"description":"<p>waveform</p>","name":"wave"}],"examples":["n(\\"0 1 2 3\\".fast(4)).scale(\\"d:minor\\").s(\\"sine\\").fmwave(\\"<sine square sawtooth crackle>\\").fm(4).fmh(2.01)","n(\\"0 1 2 3\\".fast(4)).chord(\\"<Dm Am F G>\\").voicing().s(\\"sawtooth\\").fmwave(\\"brown\\").fm(.6)"],"longname":"fmwave","kind":"member","scope":"global"},{"comment":"/**\\n * Decay time for the FM envelope: seconds until the sustain level is reached after the attack phase.\\n *\\n * @name fmdecay\\n * @param {number | Pattern} time decay time\\n * @example\\n * note(\\"c e g b g e\\")\\n * .fm(4)\\n * .fmdecay(\\"<.01 .05 .1 .2>\\")\\n * .fmsustain(.4)\\n * ._scope()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":505,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Decay time for the FM envelope: seconds until the sustain level is reached after the attack phase.</p>","name":"fmdecay","params":[{"type":{"names":["number","Pattern"]},"description":"<p>decay time</p>","name":"time"}],"examples":["note(\\"c e g b g e\\")\\n.fm(4)\\n.fmdecay(\\"<.01 .05 .1 .2>\\")\\n.fmsustain(.4)\\n._scope()"],"longname":"fmdecay","kind":"member","scope":"global"},{"comment":"/**\\n * Sustain level for the FM envelope: how much modulation is applied after the decay phase\\n *\\n * @name fmsustain\\n * @param {number | Pattern} level sustain level\\n * @example\\n * note(\\"c e g b g e\\")\\n * .fm(4)\\n * .fmdecay(.1)\\n * .fmsustain(\\"<1 .75 .5 0>\\")\\n * ._scope()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":519,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sustain level for the FM envelope: how much modulation is applied after the decay phase</p>","name":"fmsustain","params":[{"type":{"names":["number","Pattern"]},"description":"<p>sustain level</p>","name":"level"}],"examples":["note(\\"c e g b g e\\")\\n.fm(4)\\n.fmdecay(.1)\\n.fmsustain(\\"<1 .75 .5 0>\\")\\n._scope()"],"longname":"fmsustain","kind":"member","scope":"global"},{"comment":"/**\\n * Select the sound bank to use. To be used together with \`s\`. The bank name (+ \\"_\\") will be prepended to the value of \`s\`.\\n *\\n * @name bank\\n * @param {string | Pattern} bank the name of the bank\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").bank('RolandTR909') // = s(\\"RolandTR909_bd RolandTR909_sd\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":537,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Select the sound bank to use. To be used together with <code>s</code>. The bank name (+ &quot;_&quot;) will be prepended to the value of <code>s</code>.</p>","name":"bank","params":[{"type":{"names":["string","Pattern"]},"description":"<p>the name of the bank</p>","name":"bank"}],"examples":["s(\\"bd sd [~ bd] sd\\").bank('RolandTR909') // = s(\\"RolandTR909_bd RolandTR909_sd\\")"],"longname":"bank","kind":"member","scope":"global"},{"comment":"/**\\n * mix control for the chorus effect\\n *\\n * @name chorus\\n * @param {string | Pattern} chorus mix amount between 0 and 1\\n * @example\\n * note(\\"d d a# a\\").s(\\"sawtooth\\").chorus(.5)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":548,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>mix control for the chorus effect</p>","name":"chorus","params":[{"type":{"names":["string","Pattern"]},"description":"<p>mix amount between 0 and 1</p>","name":"chorus"}],"examples":["note(\\"d d a# a\\").s(\\"sawtooth\\").chorus(.5)"],"longname":"chorus","kind":"member","scope":"global"},{"comment":"/**\\n * Amplitude envelope decay time: the time it takes after the attack time to reach the sustain level.\\n * Note that the decay is only audible if the sustain value is lower than 1.\\n *\\n * @name decay\\n * @param {number | Pattern} time decay time in seconds\\n * @synonyms dec\\n * @example\\n * note(\\"c3 e3 f3 g3\\").decay(\\"<.1 .2 .3 .4>\\").sustain(0)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":564,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amplitude envelope decay time: the time it takes after the attack time to reach the sustain level.\\nNote that the decay is only audible if the sustain value is lower than 1.</p>","name":"decay","params":[{"type":{"names":["number","Pattern"]},"description":"<p>decay time in seconds</p>","name":"time"}],"synonyms_text":"dec","synonyms":["dec"],"examples":["note(\\"c3 e3 f3 g3\\").decay(\\"<.1 .2 .3 .4>\\").sustain(0)"],"longname":"decay","kind":"member","scope":"global"},{"comment":"/**\\n * Amplitude envelope sustain level: The level which is reached after attack / decay, being sustained until the offset.\\n *\\n * @name sustain\\n * @param {number | Pattern} gain sustain level between 0 and 1\\n * @synonyms sus\\n * @example\\n * note(\\"c3 e3 f3 g3\\").decay(.2).sustain(\\"<0 .1 .4 .6 1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":576,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amplitude envelope sustain level: The level which is reached after attack / decay, being sustained until the offset.</p>","name":"sustain","params":[{"type":{"names":["number","Pattern"]},"description":"<p>sustain level between 0 and 1</p>","name":"gain"}],"synonyms_text":"sus","synonyms":["sus"],"examples":["note(\\"c3 e3 f3 g3\\").decay(.2).sustain(\\"<0 .1 .4 .6 1>\\")"],"longname":"sustain","kind":"member","scope":"global"},{"comment":"/**\\n * Amplitude envelope release time: The time it takes after the offset to go from sustain level to zero.\\n *\\n * @name release\\n * @param {number | Pattern} time release time in seconds\\n * @synonyms rel\\n * @example\\n * note(\\"c3 e3 g3 c4\\").release(\\"<0 .1 .4 .6 1>/2\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":587,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amplitude envelope release time: The time it takes after the offset to go from sustain level to zero.</p>","name":"release","params":[{"type":{"names":["number","Pattern"]},"description":"<p>release time in seconds</p>","name":"time"}],"synonyms_text":"rel","synonyms":["rel"],"examples":["note(\\"c3 e3 g3 c4\\").release(\\"<0 .1 .4 .6 1>/2\\")"],"longname":"release","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the center frequency of the **b**and-**p**ass **f**ilter. When using mininotation, you\\n * can also optionally supply the 'bpq' parameter separated by ':'.\\n *\\n * @name bpf\\n * @param {number | Pattern} frequency center frequency\\n * @synonyms bandf, bp\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*6\\").bpf(\\"<1000 2000 4000 8000>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":600,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the center frequency of the <strong>b</strong>and-<strong>p</strong>ass <strong>f</strong>ilter. When using mininotation, you\\ncan also optionally supply the 'bpq' parameter separated by ':'.</p>","name":"bpf","params":[{"type":{"names":["number","Pattern"]},"description":"<p>center frequency</p>","name":"frequency"}],"synonyms_text":"bandf, bp","synonyms":["bandf","bp"],"examples":["s(\\"bd sd [~ bd] sd,hh*6\\").bpf(\\"<1000 2000 4000 8000>\\")"],"longname":"bpf","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the **b**and-**p**ass **q**-factor (resonance).\\n *\\n * @name bpq\\n * @param {number | Pattern} q q factor\\n * @synonyms bandq\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").bpf(500).bpq(\\"<0 1 2 3>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":613,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the <strong>b</strong>and-<strong>p</strong>ass <strong>q</strong>-factor (resonance).</p>","name":"bpq","params":[{"type":{"names":["number","Pattern"]},"description":"<p>q factor</p>","name":"q"}],"synonyms_text":"bandq","synonyms":["bandq"],"examples":["s(\\"bd sd [~ bd] sd\\").bpf(500).bpq(\\"<0 1 2 3>\\")"],"longname":"bpq","kind":"member","scope":"global"},{"comment":"/**\\n * A pattern of numbers from 0 to 1. Skips the beginning of each sample, e.g. \`0.25\` to cut off the first quarter from each sample.\\n *\\n * @memberof Pattern\\n * @name begin\\n * @param {number | Pattern} amount between 0 and 1, where 1 is the length of the sample\\n * @example\\n * samples({ rave: 'rave/AREUREADY.wav' }, 'github:tidalcycles/dirt-samples')\\n * s(\\"rave\\").begin(\\"<0 .25 .5 .75>\\").fast(2)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":626,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>A pattern of numbers from 0 to 1. Skips the beginning of each sample, e.g. <code>0.25</code> to cut off the first quarter from each sample.</p>","memberof":"Pattern","name":"begin","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1, where 1 is the length of the sample</p>","name":"amount"}],"examples":["samples({ rave: 'rave/AREUREADY.wav' }, 'github:tidalcycles/dirt-samples')\\ns(\\"rave\\").begin(\\"<0 .25 .5 .75>\\").fast(2)"],"scope":"static","longname":"Pattern.begin","kind":"member"},{"comment":"/**\\n * The same as .begin, but cuts off the end off each sample.\\n *\\n * @memberof Pattern\\n * @name end\\n * @param {number | Pattern} length 1 = whole sample, .5 = half sample, .25 = quarter sample etc..\\n * @example\\n * s(\\"bd*2,oh*4\\").end(\\"<.1 .2 .5 1>\\").fast(2)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":638,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The same as .begin, but cuts off the end off each sample.</p>","memberof":"Pattern","name":"end","params":[{"type":{"names":["number","Pattern"]},"description":"<p>1 = whole sample, .5 = half sample, .25 = quarter sample etc..</p>","name":"length"}],"examples":["s(\\"bd*2,oh*4\\").end(\\"<.1 .2 .5 1>\\").fast(2)"],"scope":"static","longname":"Pattern.end","kind":"member"},{"comment":"/**\\n * Loops the sample.\\n * Note that the tempo of the loop is not synced with the cycle tempo.\\n * To change the loop region, use loopBegin / loopEnd.\\n *\\n * @name loop\\n * @param {number | Pattern} on If 1, the sample is looped\\n * @example\\n * s(\\"casio\\").loop(1)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":649,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Loops the sample.\\nNote that the tempo of the loop is not synced with the cycle tempo.\\nTo change the loop region, use loopBegin / loopEnd.</p>","name":"loop","params":[{"type":{"names":["number","Pattern"]},"description":"<p>If 1, the sample is looped</p>","name":"on"}],"examples":["s(\\"casio\\").loop(1)"],"longname":"loop","kind":"member","scope":"global"},{"comment":"/**\\n * Begin to loop at a specific point in the sample (inbetween \`begin\` and \`end\`).\\n * Note that the loop point must be inbetween \`begin\` and \`end\`, and before \`loopEnd\`!\\n * Note: Samples starting with wt_ will automatically loop! (wt = wavetable)\\n *\\n * @name loopBegin\\n * @param {number | Pattern} time between 0 and 1, where 1 is the length of the sample\\n * @synonyms loopb\\n * @example\\n * s(\\"space\\").loop(1)\\n * .loopBegin(\\"<0 .125 .25>\\")._scope()\\n */","meta":{"filename":"controls.mjs","lineno":661,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Begin to loop at a specific point in the sample (inbetween <code>begin</code> and <code>end</code>).\\nNote that the loop point must be inbetween <code>begin</code> and <code>end</code>, and before <code>loopEnd</code>!\\nNote: Samples starting with wt_ will automatically loop! (wt = wavetable)</p>","name":"loopBegin","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1, where 1 is the length of the sample</p>","name":"time"}],"synonyms_text":"loopb","synonyms":["loopb"],"examples":["s(\\"space\\").loop(1)\\n.loopBegin(\\"<0 .125 .25>\\")._scope()"],"longname":"loopBegin","kind":"member","scope":"global"},{"comment":"/**\\n *\\n * End the looping section at a specific point in the sample (inbetween \`begin\` and \`end\`).\\n * Note that the loop point must be inbetween \`begin\` and \`end\`, and after \`loopBegin\`!\\n *\\n * @name loopEnd\\n * @param {number | Pattern} time between 0 and 1, where 1 is the length of the sample\\n * @synonyms loope\\n * @example\\n * s(\\"space\\").loop(1)\\n * .loopEnd(\\"<1 .75 .5 .25>\\")._scope()\\n */","meta":{"filename":"controls.mjs","lineno":674,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>End the looping section at a specific point in the sample (inbetween <code>begin</code> and <code>end</code>).\\nNote that the loop point must be inbetween <code>begin</code> and <code>end</code>, and after <code>loopBegin</code>!</p>","name":"loopEnd","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1, where 1 is the length of the sample</p>","name":"time"}],"synonyms_text":"loope","synonyms":["loope"],"examples":["s(\\"space\\").loop(1)\\n.loopEnd(\\"<1 .75 .5 .25>\\")._scope()"],"longname":"loopEnd","kind":"member","scope":"global"},{"comment":"/**\\n * Bit crusher effect.\\n *\\n * @name crush\\n * @param {number | Pattern} depth between 1 (for drastic reduction in bit-depth) to 16 (for barely no reduction).\\n * @example\\n * s(\\"<bd sd>,hh*3\\").fast(2).crush(\\"<16 8 7 6 5 4 3 2>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":687,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Bit crusher effect.</p>","name":"crush","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 1 (for drastic reduction in bit-depth) to 16 (for barely no reduction).</p>","name":"depth"}],"examples":["s(\\"<bd sd>,hh*3\\").fast(2).crush(\\"<16 8 7 6 5 4 3 2>\\")"],"longname":"crush","kind":"member","scope":"global"},{"comment":"/**\\n * Fake-resampling for lowering the sample rate. Caution: This effect seems to only work in chromium based browsers\\n *\\n * @name coarse\\n * @param {number | Pattern} factor 1 for original 2 for half, 3 for a third and so on.\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\").coarse(\\"<1 4 8 16 32>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":698,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Fake-resampling for lowering the sample rate. Caution: This effect seems to only work in chromium based browsers</p>","name":"coarse","params":[{"type":{"names":["number","Pattern"]},"description":"<p>1 for original 2 for half, 3 for a third and so on.</p>","name":"factor"}],"examples":["s(\\"bd sd [~ bd] sd,hh*8\\").coarse(\\"<1 4 8 16 32>\\")"],"longname":"coarse","kind":"member","scope":"global"},{"comment":"/**\\n * Modulate the amplitude of a sound with a continuous waveform\\n *\\n * @name tremolo\\n * @synonyms trem\\n * @param {number | Pattern} speed modulation speed in HZ\\n * @example\\n * note(\\"d d d# d\\".fast(4)).s(\\"supersaw\\").tremolo(\\"<3 2 100> \\").tremoloskew(\\"<.5>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":709,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Modulate the amplitude of a sound with a continuous waveform</p>","name":"tremolo","synonyms_text":"trem","synonyms":["trem"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>modulation speed in HZ</p>","name":"speed"}],"examples":["note(\\"d d d# d\\".fast(4)).s(\\"supersaw\\").tremolo(\\"<3 2 100> \\").tremoloskew(\\"<.5>\\")"],"longname":"tremolo","kind":"member","scope":"global"},{"comment":"/**\\n * Modulate the amplitude of a sound with a continuous waveform\\n *\\n * @name tremolosync\\n * @synonyms tremsync\\n * @param {number | Pattern} cycles modulation speed in cycles\\n * @example\\n * note(\\"d d d# d\\".fast(4)).s(\\"supersaw\\").tremolosync(\\"4\\").tremoloskew(\\"<1 .5 0>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":721,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Modulate the amplitude of a sound with a continuous waveform</p>","name":"tremolosync","synonyms_text":"tremsync","synonyms":["tremsync"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>modulation speed in cycles</p>","name":"cycles"}],"examples":["note(\\"d d d# d\\".fast(4)).s(\\"supersaw\\").tremolosync(\\"4\\").tremoloskew(\\"<1 .5 0>\\")"],"longname":"tremolosync","kind":"member","scope":"global"},{"comment":"/**\\n * Depth of amplitude modulation\\n *\\n * @name tremolodepth\\n * @synonyms tremdepth\\n * @param {number | Pattern} depth\\n * @example\\n * note(\\"a1 a1 a#1 a1\\".fast(4)).s(\\"pulse\\").tremsync(4).tremolodepth(\\"<1 2 .7>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":736,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Depth of amplitude modulation</p>","name":"tremolodepth","synonyms_text":"tremdepth","synonyms":["tremdepth"],"params":[{"type":{"names":["number","Pattern"]},"name":"depth"}],"examples":["note(\\"a1 a1 a#1 a1\\".fast(4)).s(\\"pulse\\").tremsync(4).tremolodepth(\\"<1 2 .7>\\")"],"longname":"tremolodepth","kind":"member","scope":"global"},{"comment":"/**\\n * Alter the shape of the modulation waveform\\n *\\n * @name tremoloskew\\n * @synonyms tremskew\\n * @param {number | Pattern} amount between 0 & 1, the shape of the waveform\\n * @example\\n * note(\\"{f a c e}%16\\").s(\\"sawtooth\\").tremsync(4).tremoloskew(\\"<.5 0 1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":747,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Alter the shape of the modulation waveform</p>","name":"tremoloskew","synonyms_text":"tremskew","synonyms":["tremskew"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 &amp; 1, the shape of the waveform</p>","name":"amount"}],"examples":["note(\\"{f a c e}%16\\").s(\\"sawtooth\\").tremsync(4).tremoloskew(\\"<.5 0 1>\\")"],"longname":"tremoloskew","kind":"member","scope":"global"},{"comment":"/**\\n * Alter the phase of the modulation waveform\\n *\\n * @name tremolophase\\n * @synonyms tremphase\\n * @param {number | Pattern} offset the offset in cycles of the modulation\\n * @example\\n * note(\\"{f a c e}%16\\").s(\\"sawtooth\\").tremsync(4).tremolophase(\\"<0 .25 .66>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":759,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Alter the phase of the modulation waveform</p>","name":"tremolophase","synonyms_text":"tremphase","synonyms":["tremphase"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>the offset in cycles of the modulation</p>","name":"offset"}],"examples":["note(\\"{f a c e}%16\\").s(\\"sawtooth\\").tremsync(4).tremolophase(\\"<0 .25 .66>\\")"],"longname":"tremolophase","kind":"member","scope":"global"},{"comment":"/**\\n * Shape of amplitude modulation\\n *\\n * @name tremoloshape\\n * @synonyms tremshape\\n * @param {number | Pattern} shape tri | square | sine | saw | ramp\\n * @example\\n * note(\\"{f g c d}%16\\").tremsync(4).tremoloshape(\\"<sine tri square>\\").s(\\"sawtooth\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":771,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shape of amplitude modulation</p>","name":"tremoloshape","synonyms_text":"tremshape","synonyms":["tremshape"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>tri | square | sine | saw | ramp</p>","name":"shape"}],"examples":["note(\\"{f g c d}%16\\").tremsync(4).tremoloshape(\\"<sine tri square>\\").s(\\"sawtooth\\")"],"longname":"tremoloshape","kind":"member","scope":"global"},{"comment":"/**\\n * Filter overdrive for supported filter types\\n *\\n * @name drive\\n * @param {number | Pattern} amount\\n * @example\\n * note(\\"{f g g c d a a#}%16\\".sub(17)).s(\\"supersaw\\").lpenv(8).lpf(150).lpq(.8).ftype('ladder').drive(\\"<.5 4>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":782,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Filter overdrive for supported filter types</p>","name":"drive","params":[{"type":{"names":["number","Pattern"]},"name":"amount"}],"examples":["note(\\"{f g g c d a a#}%16\\".sub(17)).s(\\"supersaw\\").lpenv(8).lpf(150).lpq(.8).ftype('ladder').drive(\\"<.5 4>\\")"],"longname":"drive","kind":"member","scope":"global"},{"comment":"/**\\n * Modulate the amplitude of an orbit to create a \\"sidechain\\" like effect.\\n *\\n * Can be applied to multiple orbits with the ':' mininotation, e.g. \`duckorbit(\\"2:3\\")\`\\n *\\n * @name duckorbit\\n * @synonyms duck\\n * @param {number | Pattern} orbit target orbit\\n * @example\\n * $: n(run(16)).scale(\\"c:minor:pentatonic\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\n * $: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(2).duckattack(0.2).duckdepth(1)\\n * @example\\n * $: n(run(16)).scale(\\"c:minor:pentatonic\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\n * $: s(\\"hh*16\\").orbit(3)\\n * $: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(\\"2:3\\").duckattack(0.2).duckdepth(1)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":793,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Modulate the amplitude of an orbit to create a &quot;sidechain&quot; like effect.</p>\\n<p>Can be applied to multiple orbits with the ':' mininotation, e.g. <code>duckorbit(&quot;2:3&quot;)</code></p>","name":"duckorbit","synonyms_text":"duck","synonyms":["duck"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>target orbit</p>","name":"orbit"}],"examples":["$: n(run(16)).scale(\\"c:minor:pentatonic\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\n$: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(2).duckattack(0.2).duckdepth(1)","$: n(run(16)).scale(\\"c:minor:pentatonic\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\n$: s(\\"hh*16\\").orbit(3)\\n$: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(\\"2:3\\").duckattack(0.2).duckdepth(1)"],"longname":"duckorbit","kind":"member","scope":"global"},{"comment":"/**\\n * The amount of ducking applied to target orbit\\n *\\n * Can vary across orbits with the ':' mininotation, e.g. \`duckdepth(\\"0.3:0.1\\")\`.\\n * Note: this requires first applying the effect to multiple orbits with e.g. \`duckorbit(\\"2:3\\")\`.\\n *\\n * @name duckdepth\\n * @param {number | Pattern} depth depth of modulation from 0 to 1\\n * @example\\n * stack( n(run(8)).scale(\\"c:minor\\").s(\\"sawtooth\\").delay(.7).orbit(2), s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(2).duckattack(0.2).duckdepth(\\"<1 .9 .6 0>\\"))\\n * @example\\n * $: n(run(16)).scale(\\"c:minor:pentatonic\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\n * $: s(\\"hh*16\\").orbit(3)\\n * $: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(\\"2:3\\").duckattack(0.2).duckdepth(\\"1:0.5\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":812,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The amount of ducking applied to target orbit</p>\\n<p>Can vary across orbits with the ':' mininotation, e.g. <code>duckdepth(&quot;0.3:0.1&quot;)</code>.\\nNote: this requires first applying the effect to multiple orbits with e.g. <code>duckorbit(&quot;2:3&quot;)</code>.</p>","name":"duckdepth","params":[{"type":{"names":["number","Pattern"]},"description":"<p>depth of modulation from 0 to 1</p>","name":"depth"}],"examples":["stack( n(run(8)).scale(\\"c:minor\\").s(\\"sawtooth\\").delay(.7).orbit(2), s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(2).duckattack(0.2).duckdepth(\\"<1 .9 .6 0>\\"))","$: n(run(16)).scale(\\"c:minor:pentatonic\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\n$: s(\\"hh*16\\").orbit(3)\\n$: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(\\"2:3\\").duckattack(0.2).duckdepth(\\"1:0.5\\")"],"longname":"duckdepth","kind":"member","scope":"global"},{"comment":"/**\\n * The time required for the ducked signal(s) to reach their lowest volume.\\n * Can be used to prevent clicking or for creative rhythmic effects.\\n *\\n * Can vary across orbits with the ':' mininotation, e.g. \`duckonset(\\"0:0.003\\")\`.\\n * Note: this requires first applying the effect to multiple orbits with e.g. \`duckorbit(\\"2:3\\")\`.\\n *\\n * @name duckonset\\n * @synonyms duckons\\n *\\n * @param {number | Pattern} time The onset time in seconds\\n * @example\\n * // Clicks\\n * sound: freq(\\"63.2388\\").s(\\"sine\\").orbit(2).gain(4)\\n * duckerWithClick: s(\\"bd*4\\").duckorbit(2).duckattack(0.3).duckonset(0).postgain(0)\\n * @example\\n * // No clicks\\n * sound: freq(\\"63.2388\\").s(\\"sine\\").orbit(2).gain(4)\\n * duckerWithoutClick: s(\\"bd*4\\").duckorbit(2).duckattack(0.3).duckonset(0.01).postgain(0)\\n * @example\\n * // Rhythmic\\n * noise: s(\\"pink\\").distort(\\"2:1\\").orbit(4) // used rhythmically with 0.3 onset below\\n * hhat: s(\\"hh*16\\").orbit(7)\\n * ducker: s(\\"bd*4\\").bank(\\"tr909\\").duckorbit(\\"4:7\\").duckonset(\\"0.3:0.003\\").duckattack(0.25)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":830,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The time required for the ducked signal(s) to reach their lowest volume.\\nCan be used to prevent clicking or for creative rhythmic effects.</p>\\n<p>Can vary across orbits with the ':' mininotation, e.g. <code>duckonset(&quot;0:0.003&quot;)</code>.\\nNote: this requires first applying the effect to multiple orbits with e.g. <code>duckorbit(&quot;2:3&quot;)</code>.</p>","name":"duckonset","synonyms_text":"duckons","synonyms":["duckons"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>The onset time in seconds</p>","name":"time"}],"examples":["// Clicks\\nsound: freq(\\"63.2388\\").s(\\"sine\\").orbit(2).gain(4)\\nduckerWithClick: s(\\"bd*4\\").duckorbit(2).duckattack(0.3).duckonset(0).postgain(0)","// No clicks\\nsound: freq(\\"63.2388\\").s(\\"sine\\").orbit(2).gain(4)\\nduckerWithoutClick: s(\\"bd*4\\").duckorbit(2).duckattack(0.3).duckonset(0.01).postgain(0)","// Rhythmic\\nnoise: s(\\"pink\\").distort(\\"2:1\\").orbit(4) // used rhythmically with 0.3 onset below\\nhhat: s(\\"hh*16\\").orbit(7)\\nducker: s(\\"bd*4\\").bank(\\"tr909\\").duckorbit(\\"4:7\\").duckonset(\\"0.3:0.003\\").duckattack(0.25)"],"longname":"duckonset","kind":"member","scope":"global"},{"comment":"/**\\n * The time required for the ducked signal(s) to return to their normal volume.\\n *\\n * Can vary across orbits with the ':' mininotation, e.g. \`duckonset(\\"0:0.003\\")\`.\\n * Note: this requires first applying the effect to multiple orbits with e.g. \`duckorbit(\\"2:3\\")\`.\\n *\\n * @name duckattack\\n * @synonyms duckatt\\n *\\n * @param {number | Pattern} time The attack time in seconds\\n * @example\\n * sound: n(run(8)).scale(\\"c:minor\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\n * ducker: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(2).duckattack(\\"<0.2 0 0.4>\\").duckdepth(1)\\n * @example\\n * moreduck: n(run(8)).scale(\\"c:minor\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\n * lessduck: s(\\"hh*16\\").orbit(5)\\n * ducker: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(\\"2:5\\").duckattack(\\"0.4:0.1\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":858,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The time required for the ducked signal(s) to return to their normal volume.</p>\\n<p>Can vary across orbits with the ':' mininotation, e.g. <code>duckonset(&quot;0:0.003&quot;)</code>.\\nNote: this requires first applying the effect to multiple orbits with e.g. <code>duckorbit(&quot;2:3&quot;)</code>.</p>","name":"duckattack","synonyms_text":"duckatt","synonyms":["duckatt"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>The attack time in seconds</p>","name":"time"}],"examples":["sound: n(run(8)).scale(\\"c:minor\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\nducker: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(2).duckattack(\\"<0.2 0 0.4>\\").duckdepth(1)","moreduck: n(run(8)).scale(\\"c:minor\\").s(\\"sawtooth\\").delay(.7).orbit(2)\\nlessduck: s(\\"hh*16\\").orbit(5)\\nducker: s(\\"bd:4!4\\").beat(\\"0,4,8,11,14\\",16).duckorbit(\\"2:5\\").duckattack(\\"0.4:0.1\\")"],"longname":"duckattack","kind":"member","scope":"global"},{"comment":"/**\\n * Create byte beats with custom expressions\\n *\\n * @name byteBeatExpression\\n * @synonyms bbexpr\\n *\\n * @param {number | Pattern} byteBeatExpression bitwise expression for creating bytebeat\\n * @example\\n * s(\\"bytebeat\\").bbexpr('t*(t>>15^t>>66)')\\n *\\n */","meta":{"filename":"controls.mjs","lineno":879,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Create byte beats with custom expressions</p>","name":"byteBeatExpression","synonyms_text":"bbexpr","synonyms":["bbexpr"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>bitwise expression for creating bytebeat</p>","name":"byteBeatExpression"}],"examples":["s(\\"bytebeat\\").bbexpr('t*(t>>15^t>>66)')"],"longname":"byteBeatExpression","kind":"member","scope":"global"},{"comment":"/**\\n * Create byte beats with custom expressions\\n *\\n * @name byteBeatStartTime\\n * @synonyms bbst\\n *\\n * @param {number | Pattern} byteBeatStartTime in samples (t)\\n * @example\\n * note(\\"c3!8\\".add(\\"{0 0 12 0 7 5 3}%8\\")).s(\\"bytebeat:5\\").bbst(\\"<3 1>\\".mul(10000))._scope()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":892,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Create byte beats with custom expressions</p>","name":"byteBeatStartTime","synonyms_text":"bbst","synonyms":["bbst"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>in samples (t)</p>","name":"byteBeatStartTime"}],"examples":["note(\\"c3!8\\".add(\\"{0 0 12 0 7 5 3}%8\\")).s(\\"bytebeat:5\\").bbst(\\"<3 1>\\".mul(10000))._scope()"],"longname":"byteBeatStartTime","kind":"member","scope":"global"},{"comment":"/**\\n * Allows you to set the output channels on the interface\\n *\\n * @name channels\\n * @synonyms ch\\n *\\n * @param {number | Pattern} channels pattern the output channels\\n * @example\\n * note(\\"e a d b g\\").channels(\\"3:4\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":905,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Allows you to set the output channels on the interface</p>","name":"channels","synonyms_text":"ch","synonyms":["ch"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>pattern the output channels</p>","name":"channels"}],"examples":["note(\\"e a d b g\\").channels(\\"3:4\\")"],"longname":"channels","kind":"member","scope":"global"},{"comment":"/**\\n * Controls the pulsewidth of the pulse oscillator\\n *\\n * @name pw\\n * @param {number | Pattern} pulsewidth\\n * @example\\n * note(\\"{f a c e}%16\\").s(\\"pulse\\").pw(\\".8:1:.2\\")\\n * @example\\n * n(run(8)).scale(\\"D:pentatonic\\").s(\\"pulse\\").pw(\\"0 .75 .5 1\\")\\n */","meta":{"filename":"controls.mjs","lineno":918,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Controls the pulsewidth of the pulse oscillator</p>","name":"pw","params":[{"type":{"names":["number","Pattern"]},"name":"pulsewidth"}],"examples":["note(\\"{f a c e}%16\\").s(\\"pulse\\").pw(\\".8:1:.2\\")","n(run(8)).scale(\\"D:pentatonic\\").s(\\"pulse\\").pw(\\"0 .75 .5 1\\")"],"longname":"pw","kind":"member","scope":"global"},{"comment":"/**\\n * Controls the lfo rate for the pulsewidth of the pulse oscillator\\n *\\n * @name pwrate\\n * @param {number | Pattern} rate\\n * @example\\n * n(run(8)).scale(\\"D:pentatonic\\").s(\\"pulse\\").pw(\\"0.5\\").pwrate(\\"<5 .1 25>\\").pwsweep(\\"<0.3 .8>\\")\\n\\n *\\n */","meta":{"filename":"controls.mjs","lineno":930,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Controls the lfo rate for the pulsewidth of the pulse oscillator</p>","name":"pwrate","params":[{"type":{"names":["number","Pattern"]},"name":"rate"}],"examples":["n(run(8)).scale(\\"D:pentatonic\\").s(\\"pulse\\").pw(\\"0.5\\").pwrate(\\"<5 .1 25>\\").pwsweep(\\"<0.3 .8>\\")"],"longname":"pwrate","kind":"member","scope":"global"},{"comment":"/**\\n * Controls the lfo sweep for the pulsewidth of the pulse oscillator\\n *\\n * @name pwsweep\\n * @param {number | Pattern} sweep\\n * @example\\n * n(run(8)).scale(\\"D:pentatonic\\").s(\\"pulse\\").pw(\\"0.5\\").pwrate(\\"<5 .1 25>\\").pwsweep(\\"<0.3 .8>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":942,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Controls the lfo sweep for the pulsewidth of the pulse oscillator</p>","name":"pwsweep","params":[{"type":{"names":["number","Pattern"]},"name":"sweep"}],"examples":["n(run(8)).scale(\\"D:pentatonic\\").s(\\"pulse\\").pw(\\"0.5\\").pwrate(\\"<5 .1 25>\\").pwsweep(\\"<0.3 .8>\\")"],"longname":"pwsweep","kind":"member","scope":"global"},{"comment":"/**\\n * Phaser audio effect that approximates popular guitar pedals.\\n *\\n * @name phaser\\n * @synonyms ph\\n * @param {number | Pattern} speed speed of modulation\\n * @example\\n * n(run(8)).scale(\\"D:pentatonic\\").s(\\"sawtooth\\").release(0.5)\\n * .phaser(\\"<1 2 4 8>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":953,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Phaser audio effect that approximates popular guitar pedals.</p>","name":"phaser","synonyms_text":"ph","synonyms":["ph"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>speed of modulation</p>","name":"speed"}],"examples":["n(run(8)).scale(\\"D:pentatonic\\").s(\\"sawtooth\\").release(0.5)\\n.phaser(\\"<1 2 4 8>\\")"],"longname":"phaser","kind":"member","scope":"global"},{"comment":"/**\\n * The frequency sweep range of the lfo for the phaser effect. Defaults to 2000\\n *\\n * @name phasersweep\\n * @synonyms phs\\n * @param {number | Pattern} phasersweep most useful values are between 0 and 4000\\n * @example\\n * n(run(8)).scale(\\"D:pentatonic\\").s(\\"sawtooth\\").release(0.5)\\n * .phaser(2).phasersweep(\\"<800 2000 4000>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":970,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The frequency sweep range of the lfo for the phaser effect. Defaults to 2000</p>","name":"phasersweep","synonyms_text":"phs","synonyms":["phs"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>most useful values are between 0 and 4000</p>","name":"phasersweep"}],"examples":["n(run(8)).scale(\\"D:pentatonic\\").s(\\"sawtooth\\").release(0.5)\\n.phaser(2).phasersweep(\\"<800 2000 4000>\\")"],"longname":"phasersweep","kind":"member","scope":"global"},{"comment":"/**\\n * The center frequency of the phaser in HZ. Defaults to 1000\\n *\\n * @name phasercenter\\n * @synonyms phc\\n * @param {number | Pattern} centerfrequency in HZ\\n * @example\\n * n(run(8)).scale(\\"D:pentatonic\\").s(\\"sawtooth\\").release(0.5)\\n * .phaser(2).phasercenter(\\"<800 2000 4000>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":983,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The center frequency of the phaser in HZ. Defaults to 1000</p>","name":"phasercenter","synonyms_text":"phc","synonyms":["phc"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>in HZ</p>","name":"centerfrequency"}],"examples":["n(run(8)).scale(\\"D:pentatonic\\").s(\\"sawtooth\\").release(0.5)\\n.phaser(2).phasercenter(\\"<800 2000 4000>\\")"],"longname":"phasercenter","kind":"member","scope":"global"},{"comment":"/**\\n * The amount the signal is affected by the phaser effect. Defaults to 0.75\\n *\\n * @name phaserdepth\\n * @synonyms phd, phasdp\\n * @param {number | Pattern} depth number between 0 and 1\\n * @example\\n * n(run(8)).scale(\\"D:pentatonic\\").s(\\"sawtooth\\").release(0.5)\\n * .phaser(2).phaserdepth(\\"<0 .5 .75 1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":997,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The amount the signal is affected by the phaser effect. Defaults to 0.75</p>","name":"phaserdepth","synonyms_text":"phd, phasdp","synonyms":["phd","phasdp"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>number between 0 and 1</p>","name":"depth"}],"examples":["n(run(8)).scale(\\"D:pentatonic\\").s(\\"sawtooth\\").release(0.5)\\n.phaser(2).phaserdepth(\\"<0 .5 .75 1>\\")"],"longname":"phaserdepth","kind":"member","scope":"global"},{"comment":"/**\\n * Choose the channel the pattern is sent to in superdirt\\n *\\n * @name channel\\n * @param {number | Pattern} channel channel number\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1011,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Choose the channel the pattern is sent to in superdirt</p>","name":"channel","params":[{"type":{"names":["number","Pattern"]},"description":"<p>channel number</p>","name":"channel"}],"longname":"channel","kind":"member","scope":"global"},{"comment":"/**\\n * In the style of classic drum-machines, \`cut\` will stop a playing sample as soon as another samples with in same cutgroup is to be played. An example would be an open hi-hat followed by a closed one, essentially muting the open.\\n *\\n * @name cut\\n * @param {number | Pattern} group cut group number\\n * @example\\n * s(\\"[oh hh]*4\\").cut(1)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1019,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>In the style of classic drum-machines, <code>cut</code> will stop a playing sample as soon as another samples with in same cutgroup is to be played. An example would be an open hi-hat followed by a closed one, essentially muting the open.</p>","name":"cut","params":[{"type":{"names":["number","Pattern"]},"description":"<p>cut group number</p>","name":"group"}],"examples":["s(\\"[oh hh]*4\\").cut(1)"],"longname":"cut","kind":"member","scope":"global"},{"comment":"/**\\n * Applies the cutoff frequency of the **l**ow-**p**ass **f**ilter.\\n *\\n * When using mininotation, you can also optionally add the 'lpq' parameter, separated by ':'.\\n *\\n * @name lpf\\n * @param {number | Pattern} frequency audible between 0 and 20000\\n * @synonyms cutoff, ctf, lp\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*6\\").lpf(\\"<4000 2000 1000 500 200 100>\\")\\n * @example\\n * s(\\"bd*16\\").lpf(\\"1000:0 1000:10 1000:20 1000:30\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1029,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Applies the cutoff frequency of the <strong>l</strong>ow-<strong>p</strong>ass <strong>f</strong>ilter.</p>\\n<p>When using mininotation, you can also optionally add the 'lpq' parameter, separated by ':'.</p>","name":"lpf","params":[{"type":{"names":["number","Pattern"]},"description":"<p>audible between 0 and 20000</p>","name":"frequency"}],"synonyms_text":"cutoff, ctf, lp","synonyms":["cutoff","ctf","lp"],"examples":["s(\\"bd sd [~ bd] sd,hh*6\\").lpf(\\"<4000 2000 1000 500 200 100>\\")","s(\\"bd*16\\").lpf(\\"1000:0 1000:10 1000:20 1000:30\\")"],"longname":"lpf","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the lowpass filter envelope modulation depth.\\n * @name lpenv\\n * @param {number | Pattern} modulation depth of the lowpass filter envelope between 0 and _n_\\n * @synonyms lpe\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .lpf(300)\\n * .lpa(.5)\\n * .lpenv(\\"<4 2 1 0 -1 -2 -4>/4\\")\\n */","meta":{"filename":"controls.mjs","lineno":1045,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the lowpass filter envelope modulation depth.</p>","name":"lpenv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>depth of the lowpass filter envelope between 0 and <em>n</em></p>","name":"modulation"}],"synonyms_text":"lpe","synonyms":["lpe"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.lpf(300)\\n.lpa(.5)\\n.lpenv(\\"<4 2 1 0 -1 -2 -4>/4\\")"],"longname":"lpenv","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the highpass filter envelope modulation depth.\\n * @name hpenv\\n * @param {number | Pattern} modulation depth of the highpass filter envelope between 0 and _n_\\n * @synonyms hpe\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .hpf(500)\\n * .hpa(.5)\\n * .hpenv(\\"<4 2 1 0 -1 -2 -4>/4\\")\\n */","meta":{"filename":"controls.mjs","lineno":1058,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the highpass filter envelope modulation depth.</p>","name":"hpenv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>depth of the highpass filter envelope between 0 and <em>n</em></p>","name":"modulation"}],"synonyms_text":"hpe","synonyms":["hpe"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.hpf(500)\\n.hpa(.5)\\n.hpenv(\\"<4 2 1 0 -1 -2 -4>/4\\")"],"longname":"hpenv","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the bandpass filter envelope modulation depth.\\n * @name bpenv\\n * @param {number | Pattern} modulation depth of the bandpass filter envelope between 0 and _n_\\n * @synonyms bpe\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .bpf(500)\\n * .bpa(.5)\\n * .bpenv(\\"<4 2 1 0 -1 -2 -4>/4\\")\\n */","meta":{"filename":"controls.mjs","lineno":1071,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the bandpass filter envelope modulation depth.</p>","name":"bpenv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>depth of the bandpass filter envelope between 0 and <em>n</em></p>","name":"modulation"}],"synonyms_text":"bpe","synonyms":["bpe"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.bpf(500)\\n.bpa(.5)\\n.bpenv(\\"<4 2 1 0 -1 -2 -4>/4\\")"],"longname":"bpenv","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the attack duration for the lowpass filter envelope.\\n * @name lpattack\\n * @param {number | Pattern} attack time of the filter envelope\\n * @synonyms lpa\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .lpf(300)\\n * .lpa(\\"<.5 .25 .1 .01>/4\\")\\n * .lpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1084,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the attack duration for the lowpass filter envelope.</p>","name":"lpattack","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the filter envelope</p>","name":"attack"}],"synonyms_text":"lpa","synonyms":["lpa"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.lpf(300)\\n.lpa(\\"<.5 .25 .1 .01>/4\\")\\n.lpenv(4)"],"longname":"lpattack","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the attack duration for the highpass filter envelope.\\n * @name hpattack\\n * @param {number | Pattern} attack time of the highpass filter envelope\\n * @synonyms hpa\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .hpf(500)\\n * .hpa(\\"<.5 .25 .1 .01>/4\\")\\n * .hpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1097,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the attack duration for the highpass filter envelope.</p>","name":"hpattack","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the highpass filter envelope</p>","name":"attack"}],"synonyms_text":"hpa","synonyms":["hpa"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.hpf(500)\\n.hpa(\\"<.5 .25 .1 .01>/4\\")\\n.hpenv(4)"],"longname":"hpattack","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the attack duration for the bandpass filter envelope.\\n * @name bpattack\\n * @param {number | Pattern} attack time of the bandpass filter envelope\\n * @synonyms bpa\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .bpf(500)\\n * .bpa(\\"<.5 .25 .1 .01>/4\\")\\n * .bpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1110,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the attack duration for the bandpass filter envelope.</p>","name":"bpattack","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the bandpass filter envelope</p>","name":"attack"}],"synonyms_text":"bpa","synonyms":["bpa"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.bpf(500)\\n.bpa(\\"<.5 .25 .1 .01>/4\\")\\n.bpenv(4)"],"longname":"bpattack","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the decay duration for the lowpass filter envelope.\\n * @name lpdecay\\n * @param {number | Pattern} decay time of the filter envelope\\n * @synonyms lpd\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .lpf(300)\\n * .lpd(\\"<.5 .25 .1 0>/4\\")\\n * .lpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1123,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the decay duration for the lowpass filter envelope.</p>","name":"lpdecay","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the filter envelope</p>","name":"decay"}],"synonyms_text":"lpd","synonyms":["lpd"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.lpf(300)\\n.lpd(\\"<.5 .25 .1 0>/4\\")\\n.lpenv(4)"],"longname":"lpdecay","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the decay duration for the highpass filter envelope.\\n * @name hpdecay\\n * @param {number | Pattern} decay time of the highpass filter envelope\\n * @synonyms hpd\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .hpf(500)\\n * .hpd(\\"<.5 .25 .1 0>/4\\")\\n * .hps(0.2)\\n * .hpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1136,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the decay duration for the highpass filter envelope.</p>","name":"hpdecay","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the highpass filter envelope</p>","name":"decay"}],"synonyms_text":"hpd","synonyms":["hpd"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.hpf(500)\\n.hpd(\\"<.5 .25 .1 0>/4\\")\\n.hps(0.2)\\n.hpenv(4)"],"longname":"hpdecay","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the decay duration for the bandpass filter envelope.\\n * @name bpdecay\\n * @param {number | Pattern} decay time of the bandpass filter envelope\\n * @synonyms bpd\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .bpf(500)\\n * .bpd(\\"<.5 .25 .1 0>/4\\")\\n * .bps(0.2)\\n * .bpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1150,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the decay duration for the bandpass filter envelope.</p>","name":"bpdecay","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the bandpass filter envelope</p>","name":"decay"}],"synonyms_text":"bpd","synonyms":["bpd"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.bpf(500)\\n.bpd(\\"<.5 .25 .1 0>/4\\")\\n.bps(0.2)\\n.bpenv(4)"],"longname":"bpdecay","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the sustain amplitude for the lowpass filter envelope.\\n * @name lpsustain\\n * @param {number | Pattern} sustain amplitude of the lowpass filter envelope\\n * @synonyms lps\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .lpf(300)\\n * .lpd(.5)\\n * .lps(\\"<0 .25 .5 1>/4\\")\\n * .lpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1164,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the sustain amplitude for the lowpass filter envelope.</p>","name":"lpsustain","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amplitude of the lowpass filter envelope</p>","name":"sustain"}],"synonyms_text":"lps","synonyms":["lps"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.lpf(300)\\n.lpd(.5)\\n.lps(\\"<0 .25 .5 1>/4\\")\\n.lpenv(4)"],"longname":"lpsustain","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the sustain amplitude for the highpass filter envelope.\\n * @name hpsustain\\n * @param {number | Pattern} sustain amplitude of the highpass filter envelope\\n * @synonyms hps\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .hpf(500)\\n * .hpd(.5)\\n * .hps(\\"<0 .25 .5 1>/4\\")\\n * .hpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1178,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the sustain amplitude for the highpass filter envelope.</p>","name":"hpsustain","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amplitude of the highpass filter envelope</p>","name":"sustain"}],"synonyms_text":"hps","synonyms":["hps"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.hpf(500)\\n.hpd(.5)\\n.hps(\\"<0 .25 .5 1>/4\\")\\n.hpenv(4)"],"longname":"hpsustain","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the sustain amplitude for the bandpass filter envelope.\\n * @name bpsustain\\n * @param {number | Pattern} sustain amplitude of the bandpass filter envelope\\n * @synonyms bps\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .bpf(500)\\n * .bpd(.5)\\n * .bps(\\"<0 .25 .5 1>/4\\")\\n * .bpenv(4)\\n */","meta":{"filename":"controls.mjs","lineno":1192,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the sustain amplitude for the bandpass filter envelope.</p>","name":"bpsustain","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amplitude of the bandpass filter envelope</p>","name":"sustain"}],"synonyms_text":"bps","synonyms":["bps"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.bpf(500)\\n.bpd(.5)\\n.bps(\\"<0 .25 .5 1>/4\\")\\n.bpenv(4)"],"longname":"bpsustain","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the release time for the lowpass filter envelope.\\n * @name lprelease\\n * @param {number | Pattern} release time of the filter envelope\\n * @synonyms lpr\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .clip(.5)\\n * .lpf(300)\\n * .lpenv(4)\\n * .lpr(\\"<.5 .25 .1 0>/4\\")\\n * .release(.5)\\n */","meta":{"filename":"controls.mjs","lineno":1206,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the release time for the lowpass filter envelope.</p>","name":"lprelease","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the filter envelope</p>","name":"release"}],"synonyms_text":"lpr","synonyms":["lpr"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.clip(.5)\\n.lpf(300)\\n.lpenv(4)\\n.lpr(\\"<.5 .25 .1 0>/4\\")\\n.release(.5)"],"longname":"lprelease","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the release time for the highpass filter envelope.\\n * @name hprelease\\n * @param {number | Pattern} release time of the highpass filter envelope\\n * @synonyms hpr\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .clip(.5)\\n * .hpf(500)\\n * .hpenv(4)\\n * .hpr(\\"<.5 .25 .1 0>/4\\")\\n * .release(.5)\\n */","meta":{"filename":"controls.mjs","lineno":1221,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the release time for the highpass filter envelope.</p>","name":"hprelease","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the highpass filter envelope</p>","name":"release"}],"synonyms_text":"hpr","synonyms":["hpr"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.clip(.5)\\n.hpf(500)\\n.hpenv(4)\\n.hpr(\\"<.5 .25 .1 0>/4\\")\\n.release(.5)"],"longname":"hprelease","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the release time for the bandpass filter envelope.\\n * @name bprelease\\n * @param {number | Pattern} release time of the bandpass filter envelope\\n * @synonyms bpr\\n * @example\\n * note(\\"c2 e2 f2 g2\\")\\n * .sound('sawtooth')\\n * .clip(.5)\\n * .bpf(500)\\n * .bpenv(4)\\n * .bpr(\\"<.5 .25 .1 0>/4\\")\\n * .release(.5)\\n */","meta":{"filename":"controls.mjs","lineno":1236,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the release time for the bandpass filter envelope.</p>","name":"bprelease","params":[{"type":{"names":["number","Pattern"]},"description":"<p>time of the bandpass filter envelope</p>","name":"release"}],"synonyms_text":"bpr","synonyms":["bpr"],"examples":["note(\\"c2 e2 f2 g2\\")\\n.sound('sawtooth')\\n.clip(.5)\\n.bpf(500)\\n.bpenv(4)\\n.bpr(\\"<.5 .25 .1 0>/4\\")\\n.release(.5)"],"longname":"bprelease","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the filter type. The ladder filter is more aggressive. More types might be added in the future.\\n * @name ftype\\n * @param {number | Pattern} type 12db (0), ladder (1), or 24db (2)\\n * @example\\n * note(\\"{f g g c d a a#}%8\\").s(\\"sawtooth\\").lpenv(4).lpf(500).ftype(\\"<0 1 2>\\").lpq(1)\\n * @example\\n * note(\\"c f g g a c d4\\").fast(2)\\n * .sound('sawtooth')\\n * .lpf(200).fanchor(0)\\n * .lpenv(3).lpq(1)\\n * .ftype(\\"<ladder 12db 24db>\\")\\n */","meta":{"filename":"controls.mjs","lineno":1251,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the filter type. The ladder filter is more aggressive. More types might be added in the future.</p>","name":"ftype","params":[{"type":{"names":["number","Pattern"]},"description":"<p>12db (0), ladder (1), or 24db (2)</p>","name":"type"}],"examples":["note(\\"{f g g c d a a#}%8\\").s(\\"sawtooth\\").lpenv(4).lpf(500).ftype(\\"<0 1 2>\\").lpq(1)","note(\\"c f g g a c d4\\").fast(2)\\n.sound('sawtooth')\\n.lpf(200).fanchor(0)\\n.lpenv(3).lpq(1)\\n.ftype(\\"<ladder 12db 24db>\\")"],"longname":"ftype","kind":"member","scope":"global"},{"comment":"/**\\n * controls the center of the filter envelope. 0 is unipolar positive, .5 is bipolar, 1 is unipolar negative\\n * @name fanchor\\n * @param {number | Pattern} center 0 to 1\\n * @example\\n * note(\\"{f g g c d a a#}%8\\").s(\\"sawtooth\\").lpf(\\"{1000}%2\\")\\n * .lpenv(8).fanchor(\\"<0 .5 1>\\")\\n */","meta":{"filename":"controls.mjs","lineno":1266,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>controls the center of the filter envelope. 0 is unipolar positive, .5 is bipolar, 1 is unipolar negative</p>","name":"fanchor","params":[{"type":{"names":["number","Pattern"]},"description":"<p>0 to 1</p>","name":"center"}],"examples":["note(\\"{f g g c d a a#}%8\\").s(\\"sawtooth\\").lpf(\\"{1000}%2\\")\\n.lpenv(8).fanchor(\\"<0 .5 1>\\")"],"longname":"fanchor","kind":"member","scope":"global"},{"comment":"/**\\n * Applies the cutoff frequency of the **h**igh-**p**ass **f**ilter.\\n *\\n * When using mininotation, you can also optionally add the 'hpq' parameter, separated by ':'.\\n *\\n * @name hpf\\n * @param {number | Pattern} frequency audible between 0 and 20000\\n * @synonyms hp, hcutoff\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\").hpf(\\"<4000 2000 1000 500 200 100>\\")\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\").hpf(\\"<2000 2000:25>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1275,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Applies the cutoff frequency of the <strong>h</strong>igh-<strong>p</strong>ass <strong>f</strong>ilter.</p>\\n<p>When using mininotation, you can also optionally add the 'hpq' parameter, separated by ':'.</p>","name":"hpf","params":[{"type":{"names":["number","Pattern"]},"description":"<p>audible between 0 and 20000</p>","name":"frequency"}],"synonyms_text":"hp, hcutoff","synonyms":["hp","hcutoff"],"examples":["s(\\"bd sd [~ bd] sd,hh*8\\").hpf(\\"<4000 2000 1000 500 200 100>\\")","s(\\"bd sd [~ bd] sd,hh*8\\").hpf(\\"<2000 2000:25>\\")"],"longname":"hpf","kind":"member","scope":"global"},{"comment":"/**\\n * Applies a vibrato to the frequency of the oscillator.\\n *\\n * @name vib\\n * @synonyms vibrato, v\\n * @param {number | Pattern} frequency of the vibrato in hertz\\n * @example\\n * note(\\"a e\\")\\n * .vib(\\"<.5 1 2 4 8 16>\\")\\n * ._scope()\\n * @example\\n * // change the modulation depth with \\":\\"\\n * note(\\"a e\\")\\n * .vib(\\"<.5 1 2 4 8 16>:12\\")\\n * ._scope()\\n */","meta":{"filename":"controls.mjs","lineno":1291,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Applies a vibrato to the frequency of the oscillator.</p>","name":"vib","synonyms_text":"vibrato, v","synonyms":["vibrato","v"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>of the vibrato in hertz</p>","name":"frequency"}],"examples":["note(\\"a e\\")\\n.vib(\\"<.5 1 2 4 8 16>\\")\\n._scope()","// change the modulation depth with \\":\\"\\nnote(\\"a e\\")\\n.vib(\\"<.5 1 2 4 8 16>:12\\")\\n._scope()"],"longname":"vib","kind":"member","scope":"global"},{"comment":"/**\\n * Adds pink noise to the mix\\n *\\n * @name noise\\n * @param {number | Pattern} wet wet amount\\n * @example\\n * sound(\\"<white pink brown>/2\\")\\n */","meta":{"filename":"controls.mjs","lineno":1308,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Adds pink noise to the mix</p>","name":"noise","params":[{"type":{"names":["number","Pattern"]},"description":"<p>wet amount</p>","name":"wet"}],"examples":["sound(\\"<white pink brown>/2\\")"],"longname":"noise","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the vibrato depth in semitones. Only has an effect if \`vibrato\` | \`vib\` | \`v\` is is also set\\n *\\n * @name vibmod\\n * @synonyms vmod\\n * @param {number | Pattern} depth of vibrato (in semitones)\\n * @example\\n * note(\\"a e\\").vib(4)\\n * .vibmod(\\"<.25 .5 1 2 12>\\")\\n * ._scope()\\n * @example\\n * // change the vibrato frequency with \\":\\"\\n * note(\\"a e\\")\\n * .vibmod(\\"<.25 .5 1 2 12>:8\\")\\n * ._scope()\\n */","meta":{"filename":"controls.mjs","lineno":1317,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the vibrato depth in semitones. Only has an effect if <code>vibrato</code> | <code>vib</code> | <code>v</code> is is also set</p>","name":"vibmod","synonyms_text":"vmod","synonyms":["vmod"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>of vibrato (in semitones)</p>","name":"depth"}],"examples":["note(\\"a e\\").vib(4)\\n.vibmod(\\"<.25 .5 1 2 12>\\")\\n._scope()","// change the vibrato frequency with \\":\\"\\nnote(\\"a e\\")\\n.vibmod(\\"<.25 .5 1 2 12>:8\\")\\n._scope()"],"longname":"vibmod","kind":"member","scope":"global"},{"comment":"/**\\n * Controls the **h**igh-**p**ass **q**-value.\\n *\\n * @name hpq\\n * @param {number | Pattern} q resonance factor between 0 and 50\\n * @synonyms hresonance\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\").hpf(2000).hpq(\\"<0 10 20 30>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1335,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Controls the <strong>h</strong>igh-<strong>p</strong>ass <strong>q</strong>-value.</p>","name":"hpq","params":[{"type":{"names":["number","Pattern"]},"description":"<p>resonance factor between 0 and 50</p>","name":"q"}],"synonyms_text":"hresonance","synonyms":["hresonance"],"examples":["s(\\"bd sd [~ bd] sd,hh*8\\").hpf(2000).hpq(\\"<0 10 20 30>\\")"],"longname":"hpq","kind":"member","scope":"global"},{"comment":"/**\\n * Controls the **l**ow-**p**ass **q**-value.\\n *\\n * @name lpq\\n * @param {number | Pattern} q resonance factor between 0 and 50\\n * @synonyms resonance\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\").lpf(2000).lpq(\\"<0 10 20 30>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1346,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Controls the <strong>l</strong>ow-<strong>p</strong>ass <strong>q</strong>-value.</p>","name":"lpq","params":[{"type":{"names":["number","Pattern"]},"description":"<p>resonance factor between 0 and 50</p>","name":"q"}],"synonyms_text":"resonance","synonyms":["resonance"],"examples":["s(\\"bd sd [~ bd] sd,hh*8\\").lpf(2000).lpq(\\"<0 10 20 30>\\")"],"longname":"lpq","kind":"member","scope":"global"},{"comment":"/**\\n * DJ filter, below 0.5 is low pass filter, above is high pass filter.\\n *\\n * @name djf\\n * @param {number | Pattern} cutoff below 0.5 is low pass filter, above is high pass filter\\n * @example\\n * n(irand(16).seg(8)).scale(\\"d:phrygian\\").s(\\"supersaw\\").djf(\\"<.5 .3 .2 .75>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1358,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>DJ filter, below 0.5 is low pass filter, above is high pass filter.</p>","name":"djf","params":[{"type":{"names":["number","Pattern"]},"description":"<p>below 0.5 is low pass filter, above is high pass filter</p>","name":"cutoff"}],"examples":["n(irand(16).seg(8)).scale(\\"d:phrygian\\").s(\\"supersaw\\").djf(\\"<.5 .3 .2 .75>\\")"],"longname":"djf","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the level of the delay signal.\\n *\\n * When using mininotation, you can also optionally add the 'delaytime' and 'delayfeedback' parameter,\\n * separated by ':'.\\n *\\n *\\n * @name delay\\n * @param {number | Pattern} level between 0 and 1\\n * @example\\n * s(\\"bd bd\\").delay(\\"<0 .25 .5 1>\\")\\n * @example\\n * s(\\"bd bd\\").delay(\\"0.65:0.25:0.9 0.65:0.125:0.7\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1370,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the level of the delay signal.</p>\\n<p>When using mininotation, you can also optionally add the 'delaytime' and 'delayfeedback' parameter,\\nseparated by ':'.</p>","name":"delay","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"level"}],"examples":["s(\\"bd bd\\").delay(\\"<0 .25 .5 1>\\")","s(\\"bd bd\\").delay(\\"0.65:0.25:0.9 0.65:0.125:0.7\\")"],"longname":"delay","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the level of the signal that is fed back into the delay.\\n * Caution: Values >= 1 will result in a signal that gets louder and louder! Don't do it\\n *\\n * @name delayfeedback\\n * @param {number | Pattern} feedback between 0 and 1\\n * @synonyms delayfb, dfb\\n * @example\\n * s(\\"bd\\").delay(.25).delayfeedback(\\"<.25 .5 .75 1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1386,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the level of the signal that is fed back into the delay.\\nCaution: Values &gt;= 1 will result in a signal that gets louder and louder! Don't do it</p>","name":"delayfeedback","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"feedback"}],"synonyms_text":"delayfb, dfb","synonyms":["delayfb","dfb"],"examples":["s(\\"bd\\").delay(.25).delayfeedback(\\"<.25 .5 .75 1>\\")"],"longname":"delayfeedback","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the level of the signal that is fed back into the delay.\\n * Caution: Values >= 1 will result in a signal that gets louder and louder! Don't do it\\n *\\n * @name delayfeedback\\n * @param {number | Pattern} feedback between 0 and 1\\n * @synonyms delayfb, dfb\\n * @example\\n * s(\\"bd\\").delay(.25).delayfeedback(\\"<.25 .5 .75 1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1399,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the level of the signal that is fed back into the delay.\\nCaution: Values &gt;= 1 will result in a signal that gets louder and louder! Don't do it</p>","name":"delayfeedback","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"feedback"}],"synonyms_text":"delayfb, dfb","synonyms":["delayfb","dfb"],"examples":["s(\\"bd\\").delay(.25).delayfeedback(\\"<.25 .5 .75 1>\\")"],"longname":"delayfeedback","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the time of the delay effect.\\n *\\n * @name delayspeed\\n * @param {number | Pattern} delayspeed controls the pitch of the delay feedback\\n * @synonyms delayt, dt\\n * @example\\n * note(\\"d d a# a\\".fast(2)).s(\\"sawtooth\\").delay(.8).delaytime(1/2).delayspeed(\\"<2 .5 -1 -2>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1411,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the time of the delay effect.</p>","name":"delayspeed","params":[{"type":{"names":["number","Pattern"]},"description":"<p>controls the pitch of the delay feedback</p>","name":"delayspeed"}],"synonyms_text":"delayt, dt","synonyms":["delayt","dt"],"examples":["note(\\"d d a# a\\".fast(2)).s(\\"sawtooth\\").delay(.8).delaytime(1/2).delayspeed(\\"<2 .5 -1 -2>\\")"],"longname":"delayspeed","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the time of the delay effect in cycles.\\n *\\n * @name delaysync\\n * @param {number | Pattern} cycles delay length in cycles\\n * @synonyms delayt, dt\\n * @example\\n * s(\\"bd bd\\").delay(.25).delaysync(\\"<1 2 3 5>\\".div(8))\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1423,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the time of the delay effect in cycles.</p>","name":"delaysync","params":[{"type":{"names":["number","Pattern"]},"description":"<p>delay length in cycles</p>","name":"cycles"}],"synonyms_text":"delayt, dt","synonyms":["delayt","dt"],"examples":["s(\\"bd bd\\").delay(.25).delaysync(\\"<1 2 3 5>\\".div(8))"],"longname":"delaysync","kind":"member","scope":"global"},{"comment":"/**\\n * Specifies whether delaytime is calculated relative to cps.\\n *\\n * @name lock\\n * @param {number | Pattern} enable When set to 1, delaytime is a direct multiple of a cycle.\\n * @superdirtOnly\\n * @example\\n * s(\\"sd\\").delay().lock(1).osc()\\n *\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1435,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Specifies whether delaytime is calculated relative to cps.</p>","name":"lock","params":[{"type":{"names":["number","Pattern"]},"description":"<p>When set to 1, delaytime is a direct multiple of a cycle.</p>","name":"enable"}],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"examples":["s(\\"sd\\").delay().lock(1).osc()"],"longname":"lock","kind":"member","scope":"global"},{"comment":"/**\\n * Set detune for stacked voices of supported oscillators\\n *\\n * @name detune\\n * @param {number | Pattern} amount\\n * @synonyms det\\n * @example\\n * note(\\"d f a a# a d3\\").fast(2).s(\\"supersaw\\").detune(\\"<.1 .2 .5 24.1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1448,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Set detune for stacked voices of supported oscillators</p>","name":"detune","params":[{"type":{"names":["number","Pattern"]},"name":"amount"}],"synonyms_text":"det","synonyms":["det"],"examples":["note(\\"d f a a# a d3\\").fast(2).s(\\"supersaw\\").detune(\\"<.1 .2 .5 24.1>\\")"],"longname":"detune","kind":"member","scope":"global"},{"comment":"/**\\n * Set number of stacked voices for supported oscillators\\n *\\n * @name unison\\n * @param {number | Pattern} numvoices\\n * @example\\n * note(\\"d f a a# a d3\\").fast(2).s(\\"supersaw\\").unison(\\"<1 2 7>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1459,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Set number of stacked voices for supported oscillators</p>","name":"unison","params":[{"type":{"names":["number","Pattern"]},"name":"numvoices"}],"examples":["note(\\"d f a a# a d3\\").fast(2).s(\\"supersaw\\").unison(\\"<1 2 7>\\")"],"longname":"unison","kind":"member","scope":"global"},{"comment":"/**\\n * Set the stereo pan spread for supported oscillators\\n *\\n * @name spread\\n * @param {number | Pattern} spread between 0 and 1\\n * @example\\n * note(\\"d f a a# a d3\\").fast(2).s(\\"supersaw\\").spread(\\"<0 .3 1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1470,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Set the stereo pan spread for supported oscillators</p>","name":"spread","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"spread"}],"examples":["note(\\"d f a a# a d3\\").fast(2).s(\\"supersaw\\").spread(\\"<0 .3 1>\\")"],"longname":"spread","kind":"member","scope":"global"},{"comment":"/**\\n * Set dryness of reverb. See \`room\` and \`size\` for more information about reverb.\\n *\\n * @name dry\\n * @param {number | Pattern} dry 0 = wet, 1 = dry\\n * @example\\n * n(\\"[0,3,7](3,8)\\").s(\\"superpiano\\").room(.7).dry(\\"<0 .5 .75 1>\\").osc()\\n * @superdirtOnly\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1480,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Set dryness of reverb. See <code>room</code> and <code>size</code> for more information about reverb.</p>","name":"dry","params":[{"type":{"names":["number","Pattern"]},"description":"<p>0 = wet, 1 = dry</p>","name":"dry"}],"examples":["n(\\"[0,3,7](3,8)\\").s(\\"superpiano\\").room(.7).dry(\\"<0 .5 .75 1>\\").osc()"],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"longname":"dry","kind":"member","scope":"global"},{"comment":"/**\\n * Set frequency of sound.\\n *\\n * @name freq\\n * @param {number | Pattern} frequency in Hz. the audible range is between 20 and 20000 Hz\\n * @example\\n * freq(\\"220 110 440 110\\").s(\\"superzow\\").osc()\\n * @example\\n * freq(\\"110\\".mul.out(\\".5 1.5 .6 [2 3]\\")).s(\\"superzow\\").osc()\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1505,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Set frequency of sound.</p>","name":"freq","params":[{"type":{"names":["number","Pattern"]},"description":"<p>in Hz. the audible range is between 20 and 20000 Hz</p>","name":"frequency"}],"examples":["freq(\\"220 110 440 110\\").s(\\"superzow\\").osc()","freq(\\"110\\".mul.out(\\".5 1.5 .6 [2 3]\\")).s(\\"superzow\\").osc()"],"longname":"freq","kind":"member","scope":"global"},{"comment":"/**\\n * Attack time of pitch envelope.\\n *\\n * @name pattack\\n * @synonyms patt\\n * @param {number | Pattern} time time in seconds\\n * @example\\n * note(\\"c eb g bb\\").pattack(\\"0 .1 .25 .5\\").slow(2)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1518,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Attack time of pitch envelope.</p>","name":"pattack","synonyms_text":"patt","synonyms":["patt"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>time in seconds</p>","name":"time"}],"examples":["note(\\"c eb g bb\\").pattack(\\"0 .1 .25 .5\\").slow(2)"],"longname":"pattack","kind":"member","scope":"global"},{"comment":"/**\\n * Decay time of pitch envelope.\\n *\\n * @name pdecay\\n * @synonyms pdec\\n * @param {number | Pattern} time time in seconds\\n * @example\\n * note(\\"<c eb g bb>\\").pdecay(\\"<0 .1 .25 .5>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1529,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Decay time of pitch envelope.</p>","name":"pdecay","synonyms_text":"pdec","synonyms":["pdec"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>time in seconds</p>","name":"time"}],"examples":["note(\\"<c eb g bb>\\").pdecay(\\"<0 .1 .25 .5>\\")"],"longname":"pdecay","kind":"member","scope":"global"},{"comment":"/**\\n * Release time of pitch envelope\\n *\\n * @name prelease\\n * @synonyms prel\\n * @param {number | Pattern} time time in seconds\\n * @example\\n * note(\\"<c eb g bb> ~\\")\\n * .release(.5) // to hear the pitch release\\n * .prelease(\\"<0 .1 .25 .5>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1542,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Release time of pitch envelope</p>","name":"prelease","synonyms_text":"prel","synonyms":["prel"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>time in seconds</p>","name":"time"}],"examples":["note(\\"<c eb g bb> ~\\")\\n.release(.5) // to hear the pitch release\\n.prelease(\\"<0 .1 .25 .5>\\")"],"longname":"prelease","kind":"member","scope":"global"},{"comment":"/**\\n * Amount of pitch envelope. Negative values will flip the envelope.\\n * If you don't set other pitch envelope controls, \`pattack:.2\` will be the default.\\n *\\n * @name penv\\n * @param {number | Pattern} semitones change in semitones\\n * @example\\n * note(\\"c\\")\\n * .penv(\\"<12 7 1 .5 0 -1 -7 -12>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1555,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Amount of pitch envelope. Negative values will flip the envelope.\\nIf you don't set other pitch envelope controls, <code>pattack:.2</code> will be the default.</p>","name":"penv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>change in semitones</p>","name":"semitones"}],"examples":["note(\\"c\\")\\n.penv(\\"<12 7 1 .5 0 -1 -7 -12>\\")"],"longname":"penv","kind":"member","scope":"global"},{"comment":"/**\\n * Curve of envelope. Defaults to linear. exponential is good for kicks\\n *\\n * @name pcurve\\n * @param {number | Pattern} type 0 = linear, 1 = exponential\\n * @example\\n * note(\\"g1*4\\")\\n * .s(\\"sine\\").pdec(.5)\\n * .penv(32)\\n * .pcurve(\\"<0 1>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1567,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Curve of envelope. Defaults to linear. exponential is good for kicks</p>","name":"pcurve","params":[{"type":{"names":["number","Pattern"]},"description":"<p>0 = linear, 1 = exponential</p>","name":"type"}],"examples":["note(\\"g1*4\\")\\n.s(\\"sine\\").pdec(.5)\\n.penv(32)\\n.pcurve(\\"<0 1>\\")"],"longname":"pcurve","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the range anchor of the envelope:\\n * - anchor 0: range = [note, note + penv]\\n * - anchor 1: range = [note - penv, note]\\n * If you don't set an anchor, the value will default to the psustain value.\\n *\\n * @name panchor\\n * @param {number | Pattern} anchor anchor offset\\n * @example\\n * note(\\"c c4\\").penv(12).panchor(\\"<0 .5 1 .5>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1580,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the range anchor of the envelope:</p>\\n<ul>\\n<li>anchor 0: range = [note, note + penv]</li>\\n<li>anchor 1: range = [note - penv, note]\\nIf you don't set an anchor, the value will default to the psustain value.</li>\\n</ul>","name":"panchor","params":[{"type":{"names":["number","Pattern"]},"description":"<p>anchor offset</p>","name":"anchor"}],"examples":["note(\\"c c4\\").penv(12).panchor(\\"<0 .5 1 .5>\\")"],"longname":"panchor","kind":"member","scope":"global"},{"comment":"/**\\n * Emulation of a Leslie speaker: speakers rotating in a wooden amplified cabinet.\\n *\\n * @name leslie\\n * @param {number | Pattern} wet between 0 and 1\\n * @example\\n * n(\\"0,4,7\\").s(\\"supersquare\\").leslie(\\"<0 .4 .6 1>\\").osc()\\n * @superdirtOnly\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1604,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Emulation of a Leslie speaker: speakers rotating in a wooden amplified cabinet.</p>","name":"leslie","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"wet"}],"examples":["n(\\"0,4,7\\").s(\\"supersquare\\").leslie(\\"<0 .4 .6 1>\\").osc()"],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"longname":"leslie","kind":"member","scope":"global"},{"comment":"/**\\n * Rate of modulation / rotation for leslie effect\\n *\\n * @name lrate\\n * @param {number | Pattern} rate 6.7 for fast, 0.7 for slow\\n * @example\\n * n(\\"0,4,7\\").s(\\"supersquare\\").leslie(1).lrate(\\"<1 2 4 8>\\").osc()\\n * @superdirtOnly\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1615,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Rate of modulation / rotation for leslie effect</p>","name":"lrate","params":[{"type":{"names":["number","Pattern"]},"description":"<p>6.7 for fast, 0.7 for slow</p>","name":"rate"}],"examples":["n(\\"0,4,7\\").s(\\"supersquare\\").leslie(1).lrate(\\"<1 2 4 8>\\").osc()"],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"longname":"lrate","kind":"member","scope":"global"},{"comment":"/**\\n * Physical size of the cabinet in meters. Be careful, it might be slightly larger than your computer. Affects the Doppler amount (pitch warble)\\n *\\n * @name lsize\\n * @param {number | Pattern} meters somewhere between 0 and 1\\n * @example\\n * n(\\"0,4,7\\").s(\\"supersquare\\").leslie(1).lrate(2).lsize(\\"<.1 .5 1>\\").osc()\\n * @superdirtOnly\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1627,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Physical size of the cabinet in meters. Be careful, it might be slightly larger than your computer. Affects the Doppler amount (pitch warble)</p>","name":"lsize","params":[{"type":{"names":["number","Pattern"]},"description":"<p>somewhere between 0 and 1</p>","name":"meters"}],"examples":["n(\\"0,4,7\\").s(\\"supersquare\\").leslie(1).lrate(2).lsize(\\"<.1 .5 1>\\").osc()"],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"longname":"lsize","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the displayed text for an event on the pianoroll\\n *\\n * @name label\\n * @param {string} label text to display\\n */","meta":{"filename":"controls.mjs","lineno":1638,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the displayed text for an event on the pianoroll</p>","name":"label","params":[{"type":{"names":["string"]},"description":"<p>text to display</p>","name":"label"}],"longname":"label","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the default octave of a synth.\\n *\\n * @name octave\\n * @param {number | Pattern} octave octave number\\n * @example\\n * n(\\"0,4,7\\").s('supersquare').octave(\\"<3 4 5 6>\\").osc()\\n * @superDirtOnly\\n */","meta":{"filename":"controls.mjs","lineno":1674,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the default octave of a synth.</p>","name":"octave","params":[{"type":{"names":["number","Pattern"]},"description":"<p>octave number</p>","name":"octave"}],"examples":["n(\\"0,4,7\\").s('supersquare').octave(\\"<3 4 5 6>\\").osc()"],"tags":[{"originalTitle":"superDirtOnly","title":"superdirtonly","text":""}],"longname":"octave","kind":"member","scope":"global"},{"comment":"/**\\n * An \`orbit\` is a global parameter context for patterns. Patterns with the same orbit will share the same global effects.\\n *\\n * @name orbit\\n * @param {number | Pattern} number\\n * @example\\n * stack(\\n *   s(\\"hh*6\\").delay(.5).delaytime(.25).orbit(1),\\n *   s(\\"~ sd ~ sd\\").delay(.5).delaytime(.125).orbit(2)\\n * )\\n */","meta":{"filename":"controls.mjs","lineno":1687,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>An <code>orbit</code> is a global parameter context for patterns. Patterns with the same orbit will share the same global effects.</p>","name":"orbit","params":[{"type":{"names":["number","Pattern"]},"name":"number"}],"examples":["stack(\\n  s(\\"hh*6\\").delay(.5).delaytime(.25).orbit(1),\\n  s(\\"~ sd ~ sd\\").delay(.5).delaytime(.125).orbit(2)\\n)"],"longname":"orbit","kind":"member","scope":"global"},{"comment":"/**\\n * Sets position in stereo.\\n *\\n * @name pan\\n * @param {number | Pattern} pan between 0 and 1, from left to right (assuming stereo), once round a circle (assuming multichannel)\\n * @example\\n * s(\\"[bd hh]*2\\").pan(\\"<.5 1 .5 0>\\")\\n * @example\\n * s(\\"bd rim sd rim bd ~ cp rim\\").pan(sine.slow(2))\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1703,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets position in stereo.</p>","name":"pan","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1, from left to right (assuming stereo), once round a circle (assuming multichannel)</p>","name":"pan"}],"examples":["s(\\"[bd hh]*2\\").pan(\\"<.5 1 .5 0>\\")","s(\\"bd rim sd rim bd ~ cp rim\\").pan(sine.slow(2))"],"longname":"pan","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the level of reverb.\\n *\\n * When using mininotation, you can also optionally add the 'size' parameter, separated by ':'.\\n *\\n * @name room\\n * @param {number | Pattern} level between 0 and 1\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(\\"<0 .2 .4 .6 .8 1>\\")\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(\\"<0.9:1 0.9:4>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1766,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the level of reverb.</p>\\n<p>When using mininotation, you can also optionally add the 'size' parameter, separated by ':'.</p>","name":"room","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"level"}],"examples":["s(\\"bd sd [~ bd] sd\\").room(\\"<0 .2 .4 .6 .8 1>\\")","s(\\"bd sd [~ bd] sd\\").room(\\"<0.9:1 0.9:4>\\")"],"longname":"room","kind":"member","scope":"global"},{"comment":"/**\\n * Reverb lowpass starting frequency (in hertz).\\n * When this property is changed, the reverb will be recaculated, so only change this sparsely..\\n *\\n * @name roomlp\\n * @synonyms rlp\\n * @param {number} frequency between 0 and 20000hz\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(10000)\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(5000)\\n */","meta":{"filename":"controls.mjs","lineno":1780,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Reverb lowpass starting frequency (in hertz).\\nWhen this property is changed, the reverb will be recaculated, so only change this sparsely..</p>","name":"roomlp","synonyms_text":"rlp","synonyms":["rlp"],"params":[{"type":{"names":["number"]},"description":"<p>between 0 and 20000hz</p>","name":"frequency"}],"examples":["s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(10000)","s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(5000)"],"longname":"roomlp","kind":"member","scope":"global"},{"comment":"/**\\n * Reverb lowpass frequency at -60dB (in hertz).\\n * When this property is changed, the reverb will be recaculated, so only change this sparsely..\\n *\\n * @name roomdim\\n * @synonyms rdim\\n * @param {number} frequency between 0 and 20000hz\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(10000).rdim(8000)\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(5000).rdim(400)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1793,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Reverb lowpass frequency at -60dB (in hertz).\\nWhen this property is changed, the reverb will be recaculated, so only change this sparsely..</p>","name":"roomdim","synonyms_text":"rdim","synonyms":["rdim"],"params":[{"type":{"names":["number"]},"description":"<p>between 0 and 20000hz</p>","name":"frequency"}],"examples":["s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(10000).rdim(8000)","s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(5000).rdim(400)"],"longname":"roomdim","kind":"member","scope":"global"},{"comment":"/**\\n * Reverb fade time (in seconds).\\n * When this property is changed, the reverb will be recaculated, so only change this sparsely..\\n *\\n * @name roomfade\\n * @synonyms rfade\\n * @param {number} seconds for the reverb to fade\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(10000).rfade(0.5)\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(5000).rfade(4)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1807,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Reverb fade time (in seconds).\\nWhen this property is changed, the reverb will be recaculated, so only change this sparsely..</p>","name":"roomfade","synonyms_text":"rfade","synonyms":["rfade"],"params":[{"type":{"names":["number"]},"description":"<p>for the reverb to fade</p>","name":"seconds"}],"examples":["s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(10000).rfade(0.5)","s(\\"bd sd [~ bd] sd\\").room(0.5).rlp(5000).rfade(4)"],"longname":"roomfade","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the sample to use as an impulse response for the reverb.\\n * @name iresponse\\n * @param {string | Pattern} sample to use as an impulse response\\n * @synonyms ir\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(.8).ir(\\"<shaker_large:0 shaker_large:2>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1821,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the sample to use as an impulse response for the reverb.</p>","name":"iresponse","params":[{"type":{"names":["string","Pattern"]},"description":"<p>to use as an impulse response</p>","name":"sample"}],"synonyms_text":"ir","synonyms":["ir"],"examples":["s(\\"bd sd [~ bd] sd\\").room(.8).ir(\\"<shaker_large:0 shaker_large:2>\\")"],"longname":"iresponse","kind":"member","scope":"global"},{"comment":"/**\\n * Sets speed of the sample for the impulse response.\\n * @name irspeed\\n * @param {string | Pattern} speed\\n * @example\\n * samples('github:switchangel/pad')\\n * $: s(\\"brk/2\\").fit().scrub(irand(16).div(16).seg(8)).ir(\\"swpad:4\\").room(.2).irspeed(\\"<2 1 .5>/2\\").irbegin(.5).roomsize(.5)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1832,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets speed of the sample for the impulse response.</p>","name":"irspeed","params":[{"type":{"names":["string","Pattern"]},"name":"speed"}],"examples":["samples('github:switchangel/pad')\\n$: s(\\"brk/2\\").fit().scrub(irand(16).div(16).seg(8)).ir(\\"swpad:4\\").room(.2).irspeed(\\"<2 1 .5>/2\\").irbegin(.5).roomsize(.5)"],"longname":"irspeed","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the beginning of the IR response sample\\n * @name irbegin\\n * @param {string | Pattern} begin between 0 and 1\\n * @synonyms ir\\n * @example\\n * samples('github:switchangel/pad')\\n * $: s(\\"brk/2\\").fit().scrub(irand(16).div(16).seg(8)).ir(\\"swpad:4\\").room(.65).irspeed(\\"-2\\").irbegin(\\"<0 .5 .75>/2\\").roomsize(.6)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1843,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the beginning of the IR response sample</p>","name":"irbegin","params":[{"type":{"names":["string","Pattern"]},"description":"<p>between 0 and 1</p>","name":"begin"}],"synonyms_text":"ir","synonyms":["ir"],"examples":["samples('github:switchangel/pad')\\n$: s(\\"brk/2\\").fit().scrub(irand(16).div(16).seg(8)).ir(\\"swpad:4\\").room(.65).irspeed(\\"-2\\").irbegin(\\"<0 .5 .75>/2\\").roomsize(.6)"],"longname":"irbegin","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the room size of the reverb, see \`room\`.\\n * When this property is changed, the reverb will be recaculated, so only change this sparsely..\\n *\\n * @name roomsize\\n * @param {number | Pattern} size between 0 and 10\\n * @synonyms rsize, sz, size\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(.8).rsize(1)\\n * @example\\n * s(\\"bd sd [~ bd] sd\\").room(.8).rsize(4)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1854,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the room size of the reverb, see <code>room</code>.\\nWhen this property is changed, the reverb will be recaculated, so only change this sparsely..</p>","name":"roomsize","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 10</p>","name":"size"}],"synonyms_text":"rsize, sz, size","synonyms":["rsize","sz","size"],"examples":["s(\\"bd sd [~ bd] sd\\").room(.8).rsize(1)","s(\\"bd sd [~ bd] sd\\").room(.8).rsize(4)"],"longname":"roomsize","kind":"member","scope":"global"},{"comment":"/**\\n * (Deprecated) Wave shaping distortion. WARNING: can suddenly get unpredictably loud.\\n * Please use distort instead, which has a more predictable response curve\\n * second option in optional array syntax (ex: \\".9:.5\\") applies a postgain to the output\\n *\\n *\\n * @name shape\\n * @param {number | Pattern} distortion between 0 and 1\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\").shape(\\"<0 .2 .4 .6 .8>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1875,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>(Deprecated) Wave shaping distortion. WARNING: can suddenly get unpredictably loud.\\nPlease use distort instead, which has a more predictable response curve\\nsecond option in optional array syntax (ex: &quot;.9:.5&quot;) applies a postgain to the output</p>","name":"shape","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and 1</p>","name":"distortion"}],"examples":["s(\\"bd sd [~ bd] sd,hh*8\\").shape(\\"<0 .2 .4 .6 .8>\\")"],"longname":"shape","kind":"member","scope":"global"},{"comment":"/**\\n * Wave shaping distortion. CAUTION: it can get loud.\\n * Second option in optional array syntax (ex: \\".9:.5\\") applies a postgain to the output. Third option sets the waveshaping type.\\n * Most useful values are usually between 0 and 10 (depending on source gain). If you are feeling adventurous, you can turn it up to 11 and beyond ;)\\n *\\n * @name distort\\n * @synonyms dist\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n * @param {number | string | Pattern} type type of distortion to apply\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\").distort(\\"<0 2 3 10:.5>\\")\\n * @example\\n * note(\\"d1!8\\").s(\\"sine\\").penv(36).pdecay(.12).decay(.23).distort(\\"8:.4\\")\\n * @example\\n * s(\\"bd:4*4\\").bank(\\"tr808\\").distort(\\"3:0.5:diode\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1888,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Wave shaping distortion. CAUTION: it can get loud.\\nSecond option in optional array syntax (ex: &quot;.9:.5&quot;) applies a postgain to the output. Third option sets the waveshaping type.\\nMost useful values are usually between 0 and 10 (depending on source gain). If you are feeling adventurous, you can turn it up to 11 and beyond ;)</p>","name":"distort","synonyms_text":"dist","synonyms":["dist"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"},{"type":{"names":["number","string","Pattern"]},"description":"<p>type of distortion to apply</p>","name":"type"}],"examples":["s(\\"bd sd [~ bd] sd,hh*8\\").distort(\\"<0 2 3 10:.5>\\")","note(\\"d1!8\\").s(\\"sine\\").penv(36).pdecay(.12).decay(.23).distort(\\"8:.4\\")","s(\\"bd:4*4\\").bank(\\"tr808\\").distort(\\"3:0.5:diode\\")"],"longname":"distort","kind":"member","scope":"global"},{"comment":"/**\\n * Postgain for waveshaping distortion.\\n *\\n * @name distortvol\\n * @synonyms distvol\\n * @param {number | Pattern} volume linear postgain of the distortion\\n * @example\\n * s(\\"bd*4\\").bank(\\"tr909\\").distort(2).distortvol(0.8)\\n */","meta":{"filename":"controls.mjs","lineno":1908,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Postgain for waveshaping distortion.</p>","name":"distortvol","synonyms_text":"distvol","synonyms":["distvol"],"params":[{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"examples":["s(\\"bd*4\\").bank(\\"tr909\\").distort(2).distortvol(0.8)"],"longname":"distortvol","kind":"member","scope":"global"},{"comment":"/**\\n * Type of waveshaping distortion to apply.\\n *\\n * @name distorttype\\n * @synonyms disttype\\n * @param {number | string | Pattern} type type of distortion to apply\\n * @example\\n * s(\\"bd*4\\").bank(\\"tr909\\").distort(2).distorttype(\\"<0 1 2>\\")\\n *\\n * @example\\n * s(\\"sine\\").note(\\"F1*2\\").release(1)\\n *   .penv(24).pdecay(0.05)\\n *   .distort(rand.range(1, 8))\\n *   .distorttype(\\"<fold chebyshev scurve diode asym sinefold>\\")\\n */","meta":{"filename":"controls.mjs","lineno":1919,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Type of waveshaping distortion to apply.</p>","name":"distorttype","synonyms_text":"disttype","synonyms":["disttype"],"params":[{"type":{"names":["number","string","Pattern"]},"description":"<p>type of distortion to apply</p>","name":"type"}],"examples":["s(\\"bd*4\\").bank(\\"tr909\\").distort(2).distorttype(\\"<0 1 2>\\")","s(\\"sine\\").note(\\"F1*2\\").release(1)\\n  .penv(24).pdecay(0.05)\\n  .distort(rand.range(1, 8))\\n  .distorttype(\\"<fold chebyshev scurve diode asym sinefold>\\")"],"longname":"distorttype","kind":"member","scope":"global"},{"comment":"/**\\n * Dynamics Compressor. The params are \`compressor(\\"threshold:ratio:knee:attack:release\\")\`\\n * More info [here](https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode?retiredLocale=de#instance_properties)\\n *\\n * @name compressor\\n * @example\\n * s(\\"bd sd [~ bd] sd,hh*8\\")\\n * .compressor(\\"-20:20:10:.002:.02\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1936,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Dynamics Compressor. The params are <code>compressor(&quot;threshold:ratio:knee:attack:release&quot;)</code>\\nMore info <a href=\\"https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode?retiredLocale=de#instance_properties\\">here</a></p>","name":"compressor","examples":["s(\\"bd sd [~ bd] sd,hh*8\\")\\n.compressor(\\"-20:20:10:.002:.02\\")"],"longname":"compressor","kind":"member","scope":"global"},{"comment":"/**\\n * Changes the speed of sample playback, i.e. a cheap way of changing pitch.\\n *\\n * @name speed\\n * @param {number | Pattern} speed -inf to inf, negative numbers play the sample backwards.\\n * @example\\n * s(\\"bd*6\\").speed(\\"1 2 4 1 -2 -4\\")\\n * @example\\n * speed(\\"1 1.5*2 [2 1.1]\\").s(\\"piano\\").clip(1)\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1957,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Changes the speed of sample playback, i.e. a cheap way of changing pitch.</p>","name":"speed","params":[{"type":{"names":["number","Pattern"]},"description":"<p>inf to inf, negative numbers play the sample backwards.</p>","name":"speed"}],"examples":["s(\\"bd*6\\").speed(\\"1 2 4 1 -2 -4\\")","speed(\\"1 1.5*2 [2 1.1]\\").s(\\"piano\\").clip(1)"],"longname":"speed","kind":"member","scope":"global"},{"comment":"/**\\n * Changes the speed of sample playback, i.e. a cheap way of changing pitch.\\n *\\n * @name stretch\\n * @param {number | Pattern} factor -inf to inf, negative numbers play the sample backwards.\\n * @example\\n * s(\\"gm_flute\\").stretch(\\"1 2 .5\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1970,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Changes the speed of sample playback, i.e. a cheap way of changing pitch.</p>","name":"stretch","params":[{"type":{"names":["number","Pattern"]},"description":"<p>inf to inf, negative numbers play the sample backwards.</p>","name":"factor"}],"examples":["s(\\"gm_flute\\").stretch(\\"1 2 .5\\")"],"longname":"stretch","kind":"member","scope":"global"},{"comment":"/**\\n * Used in conjunction with \`speed\`, accepts values of \\"r\\" (rate, default behavior), \\"c\\" (cycles), or \\"s\\" (seconds). Using \`unit \\"c\\"\` means \`speed\` will be interpreted in units of cycles, e.g. \`speed \\"1\\"\` means samples will be stretched to fill a cycle. Using \`unit \\"s\\"\` means the playback speed will be adjusted so that the duration is the number of seconds specified by \`speed\`.\\n *\\n * @name unit\\n * @param {number | string | Pattern} unit see description above\\n * @example\\n * speed(\\"1 2 .5 3\\").s(\\"bd\\").unit(\\"c\\").osc()\\n * @superdirtOnly\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1980,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Used in conjunction with <code>speed</code>, accepts values of &quot;r&quot; (rate, default behavior), &quot;c&quot; (cycles), or &quot;s&quot; (seconds). Using <code>unit &quot;c&quot;</code> means <code>speed</code> will be interpreted in units of cycles, e.g. <code>speed &quot;1&quot;</code> means samples will be stretched to fill a cycle. Using <code>unit &quot;s&quot;</code> means the playback speed will be adjusted so that the duration is the number of seconds specified by <code>speed</code>.</p>","name":"unit","params":[{"type":{"names":["number","string","Pattern"]},"description":"<p>see description above</p>","name":"unit"}],"examples":["speed(\\"1 2 .5 3\\").s(\\"bd\\").unit(\\"c\\").osc()"],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"longname":"unit","kind":"member","scope":"global"},{"comment":"/**\\n * Made by Calum Gunn. Reminiscent of some weird mixture of filter, ring-modulator and pitch-shifter. The SuperCollider manual defines Squiz as:\\n *\\n * \\"A simplistic pitch-raising algorithm. It's not meant to sound natural; its sound is reminiscent of some weird mixture of filter, ring-modulator and pitch-shifter, depending on the input. The algorithm works by cutting the signal into fragments (delimited by upwards-going zero-crossings) and squeezing those fragments in the time domain (i.e. simply playing them back faster than they came in), leaving silences inbetween. All the parameters apart from memlen can be modulated.\\"\\n *\\n * @name squiz\\n * @param {number | Pattern} squiz Try passing multiples of 2 to it - 2, 4, 8 etc.\\n * @example\\n * squiz(\\"2 4/2 6 [8 16]\\").s(\\"bd\\").osc()\\n * @superdirtOnly\\n *\\n */","meta":{"filename":"controls.mjs","lineno":1992,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Made by Calum Gunn. Reminiscent of some weird mixture of filter, ring-modulator and pitch-shifter. The SuperCollider manual defines Squiz as:</p>\\n<p>&quot;A simplistic pitch-raising algorithm. It's not meant to sound natural; its sound is reminiscent of some weird mixture of filter, ring-modulator and pitch-shifter, depending on the input. The algorithm works by cutting the signal into fragments (delimited by upwards-going zero-crossings) and squeezing those fragments in the time domain (i.e. simply playing them back faster than they came in), leaving silences inbetween. All the parameters apart from memlen can be modulated.&quot;</p>","name":"squiz","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Try passing multiples of 2 to it - 2, 4, 8 etc.</p>","name":"squiz"}],"examples":["squiz(\\"2 4/2 6 [8 16]\\").s(\\"bd\\").osc()"],"tags":[{"originalTitle":"superdirtOnly","title":"superdirtonly","text":""}],"longname":"squiz","kind":"member","scope":"global"},{"comment":"/**\\n *\\n * Formant filter to make things sound like vowels.\\n *\\n * @name vowel\\n * @param {string | Pattern} vowel You can use a e i o u ae aa oe ue y uh un en an on, corresponding to [a] [e] [i] [o] [u] [æ] [ɑ] [ø] [y] [ɯ] [ʌ] [œ̃] [ɛ̃] [ɑ̃] [ɔ̃]. Aliases: aa = å = ɑ, oe = ø = ö, y = ı, ae = æ.\\n * @example\\n * note(\\"[c2 <eb2 <g2 g1>>]*2\\").s('sawtooth')\\n * .vowel(\\"<a e i <o u>>\\")\\n * @example\\n * s(\\"bd sd mt ht bd [~ cp] ht lt\\").vowel(\\"[a|e|i|o|u]\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":2017,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Formant filter to make things sound like vowels.</p>","name":"vowel","params":[{"type":{"names":["string","Pattern"]},"description":"<p>You can use a e i o u ae aa oe ue y uh un en an on, corresponding to [a] [e] [i] [o] [u] [æ] [ɑ] [ø] [y] [ɯ] [ʌ] [œ̃] [ɛ̃] [ɑ̃] [ɔ̃]. Aliases: aa = å = ɑ, oe = ø = ö, y = ı, ae = æ.</p>","name":"vowel"}],"examples":["note(\\"[c2 <eb2 <g2 g1>>]*2\\").s('sawtooth')\\n.vowel(\\"<a e i <o u>>\\")","s(\\"bd sd mt ht bd [~ cp] ht lt\\").vowel(\\"[a|e|i|o|u]\\")"],"longname":"vowel","kind":"member","scope":"global"},{"comment":"/**\\n * Noise crackle density\\n *\\n * @name density\\n * @param {number | Pattern} density between 0 and x\\n * @example\\n * s(\\"crackle*4\\").density(\\"<0.01 0.04 0.2 0.5>\\".slow(4))\\n *\\n */","meta":{"filename":"controls.mjs","lineno":2042,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Noise crackle density</p>","name":"density","params":[{"type":{"names":["number","Pattern"]},"description":"<p>between 0 and x</p>","name":"density"}],"examples":["s(\\"crackle*4\\").density(\\"<0.01 0.04 0.2 0.5>\\".slow(4))"],"longname":"density","kind":"member","scope":"global"},{"comment":"/**\\n * Multiplies the duration with the given number. Also cuts samples off at the end if they exceed the duration.\\n *\\n * @name clip\\n * @synonyms legato\\n * @param {number | Pattern} factor >= 0\\n * @example\\n * note(\\"c a f e\\").s(\\"piano\\").clip(\\"<.5 1 2>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":2092,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Multiplies the duration with the given number. Also cuts samples off at the end if they exceed the duration.</p>","name":"clip","synonyms_text":"legato","synonyms":["legato"],"params":[{"type":{"names":["number","Pattern"]},"description":"<blockquote>\\n<p>= 0</p>\\n</blockquote>","name":"factor"}],"examples":["note(\\"c a f e\\").s(\\"piano\\").clip(\\"<.5 1 2>\\")"],"longname":"clip","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the duration of the event in cycles. Similar to clip / legato, it also cuts samples off at the end if they exceed the duration.\\n *\\n * @name duration\\n * @synonyms dur\\n * @param {number | Pattern} seconds >= 0\\n * @example\\n * note(\\"c a f e\\").s(\\"piano\\").dur(\\"<.5 1 2>\\")\\n *\\n */","meta":{"filename":"controls.mjs","lineno":2104,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the duration of the event in cycles. Similar to clip / legato, it also cuts samples off at the end if they exceed the duration.</p>","name":"duration","synonyms_text":"dur","synonyms":["dur"],"params":[{"type":{"names":["number","Pattern"]},"description":"<blockquote>\\n<p>= 0</p>\\n</blockquote>","name":"seconds"}],"examples":["note(\\"c a f e\\").s(\\"piano\\").dur(\\"<.5 1 2>\\")"],"longname":"duration","kind":"member","scope":"global"},{"comment":"/**\\n * Sets the color of the hap in visualizations like pianoroll or highlighting.\\n * @name color\\n * @synonyms colour\\n * @param {string} color Hexadecimal or CSS color name\\n */","meta":{"filename":"controls.mjs","lineno":2133,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets the color of the hap in visualizations like pianoroll or highlighting.</p>","name":"color","synonyms_text":"colour","synonyms":["colour"],"params":[{"type":{"names":["string"]},"description":"<p>Hexadecimal or CSS color name</p>","name":"color"}],"longname":"color","kind":"member","scope":"global"},{"comment":"/**\\n * ADSR envelope: Combination of Attack, Decay, Sustain, and Release.\\n *\\n * @name adsr\\n * @param {number | Pattern} time attack time in seconds\\n * @param {number | Pattern} time decay time in seconds\\n * @param {number | Pattern} gain sustain level (0 to 1)\\n * @param {number | Pattern} time release time in seconds\\n * @example\\n * note(\\"[c3 bb2 f3 eb3]*2\\").sound(\\"sawtooth\\").lpf(600).adsr(\\".1:.1:.5:.2\\")\\n */","meta":{"filename":"controls.mjs","lineno":2146,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>ADSR envelope: Combination of Attack, Decay, Sustain, and Release.</p>","name":"adsr","params":[{"type":{"names":["number","Pattern"]},"description":"<p>attack time in seconds</p>","name":"time"},{"type":{"names":["number","Pattern"]},"description":"<p>decay time in seconds</p>","name":"time"},{"type":{"names":["number","Pattern"]},"description":"<p>sustain level (0 to 1)</p>","name":"gain"},{"type":{"names":["number","Pattern"]},"description":"<p>release time in seconds</p>","name":"time"}],"examples":["note(\\"[c3 bb2 f3 eb3]*2\\").sound(\\"sawtooth\\").lpf(600).adsr(\\".1:.1:.5:.2\\")"],"longname":"adsr","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI channel: Sets the MIDI channel for the event.\\n *\\n * @name midichan\\n * @param {number | Pattern} channel MIDI channel number (0-15)\\n * @example\\n * note(\\"c4\\").midichan(1).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2180,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI channel: Sets the MIDI channel for the event.</p>","name":"midichan","params":[{"type":{"names":["number","Pattern"]},"description":"<p>MIDI channel number (0-15)</p>","name":"channel"}],"examples":["note(\\"c4\\").midichan(1).midi()"],"longname":"midichan","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI port: Sets the MIDI port for the event.\\n *\\n * @name midiport\\n * @param {number | Pattern} port MIDI port\\n * @example\\n * note(\\"c a f e\\").midiport(\\"<0 1 2 3>\\").midi()\\n */","meta":{"filename":"controls.mjs","lineno":2192,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI port: Sets the MIDI port for the event.</p>","name":"midiport","params":[{"type":{"names":["number","Pattern"]},"description":"<p>MIDI port</p>","name":"port"}],"examples":["note(\\"c a f e\\").midiport(\\"<0 1 2 3>\\").midi()"],"longname":"midiport","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI command: Sends a MIDI command message.\\n *\\n * @name midicmd\\n * @param {number | Pattern} command MIDI command\\n * @example\\n * midicmd(\\"clock*48,<start stop>/2\\").midi()\\n */","meta":{"filename":"controls.mjs","lineno":2202,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI command: Sends a MIDI command message.</p>","name":"midicmd","params":[{"type":{"names":["number","Pattern"]},"description":"<p>MIDI command</p>","name":"command"}],"examples":["midicmd(\\"clock*48,<start stop>/2\\").midi()"],"longname":"midicmd","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI control: Sends a MIDI control change message.\\n *\\n * @name control\\n * @param {number | Pattern}  MIDI control number (0-127)\\n * @param {number | Pattern}  MIDI controller value (0-127)\\n */","meta":{"filename":"controls.mjs","lineno":2212,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI control: Sends a MIDI control change message.</p>","name":"control","params":[{"type":{"names":["number","Pattern"]},"description":"<p>control number (0-127)</p>","name":"MIDI"},{"type":{"names":["number","Pattern"]},"description":"<p>controller value (0-127)</p>","name":"MIDI"}],"longname":"control","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI control number: Sends a MIDI control change message.\\n *\\n * @name ccn\\n * @param {number | Pattern}  MIDI control number (0-127)\\n */","meta":{"filename":"controls.mjs","lineno":2227,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI control number: Sends a MIDI control change message.</p>","name":"ccn","params":[{"type":{"names":["number","Pattern"]},"description":"<p>control number (0-127)</p>","name":"MIDI"}],"longname":"ccn","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI control value: Sends a MIDI control change message.\\n *\\n * @name ccv\\n * @param {number | Pattern}  MIDI control value (0-127)\\n */","meta":{"filename":"controls.mjs","lineno":2234,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI control value: Sends a MIDI control change message.</p>","name":"ccv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>control value (0-127)</p>","name":"MIDI"}],"longname":"ccv","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI NRPN non-registered parameter number: Sends a MIDI NRPN non-registered parameter number message.\\n * @name nrpnn\\n * @param {number | Pattern} nrpnn MIDI NRPN non-registered parameter number (0-127)\\n * @example\\n * note(\\"c4\\").nrpnn(\\"1:8\\").nrpv(\\"123\\").midichan(1).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2244,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI NRPN non-registered parameter number: Sends a MIDI NRPN non-registered parameter number message.</p>","name":"nrpnn","params":[{"type":{"names":["number","Pattern"]},"description":"<p>MIDI NRPN non-registered parameter number (0-127)</p>","name":"nrpnn"}],"examples":["note(\\"c4\\").nrpnn(\\"1:8\\").nrpv(\\"123\\").midichan(1).midi()"],"longname":"nrpnn","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI NRPN non-registered parameter value: Sends a MIDI NRPN non-registered parameter value message.\\n * @name nrpv\\n * @param {number | Pattern} nrpv MIDI NRPN non-registered parameter value (0-127)\\n * @example\\n * note(\\"c4\\").nrpnn(\\"1:8\\").nrpv(\\"123\\").midichan(1).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2252,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI NRPN non-registered parameter value: Sends a MIDI NRPN non-registered parameter value message.</p>","name":"nrpv","params":[{"type":{"names":["number","Pattern"]},"description":"<p>MIDI NRPN non-registered parameter value (0-127)</p>","name":"nrpv"}],"examples":["note(\\"c4\\").nrpnn(\\"1:8\\").nrpv(\\"123\\").midichan(1).midi()"],"longname":"nrpv","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI program number: Sends a MIDI program change message.\\n *\\n * @name progNum\\n * @param {number | Pattern} program MIDI program number (0-127)\\n * @example\\n * note(\\"c4\\").progNum(10).midichan(1).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2261,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI program number: Sends a MIDI program change message.</p>","name":"progNum","params":[{"type":{"names":["number","Pattern"]},"description":"<p>MIDI program number (0-127)</p>","name":"program"}],"examples":["note(\\"c4\\").progNum(10).midichan(1).midi()"],"longname":"progNum","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI sysex: Sends a MIDI sysex message.\\n * @name sysex\\n * @param {number | Pattern} id Sysex ID\\n * @param {number | Pattern} data Sysex data\\n * @example\\n * note(\\"c4\\").sysex([\\"0x77\\", \\"0x01:0x02:0x03:0x04\\"]).midichan(1).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2271,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI sysex: Sends a MIDI sysex message.</p>","name":"sysex","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Sysex ID</p>","name":"id"},{"type":{"names":["number","Pattern"]},"description":"<p>Sysex data</p>","name":"data"}],"examples":["note(\\"c4\\").sysex([\\"0x77\\", \\"0x01:0x02:0x03:0x04\\"]).midichan(1).midi()"],"longname":"sysex","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI sysex ID: Sends a MIDI sysex identifier message.\\n * @name sysexid\\n * @param {number | Pattern} id Sysex ID\\n * @example\\n * note(\\"c4\\").sysexid(\\"0x77\\").sysexdata(\\"0x01:0x02:0x03:0x04\\").midichan(1).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2286,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI sysex ID: Sends a MIDI sysex identifier message.</p>","name":"sysexid","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Sysex ID</p>","name":"id"}],"examples":["note(\\"c4\\").sysexid(\\"0x77\\").sysexdata(\\"0x01:0x02:0x03:0x04\\").midichan(1).midi()"],"longname":"sysexid","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI sysex data: Sends a MIDI sysex message.\\n * @name sysexdata\\n * @param {number | Pattern} data Sysex data\\n * @example\\n * note(\\"c4\\").sysexid(\\"0x77\\").sysexdata(\\"0x01:0x02:0x03:0x04\\").midichan(1).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2294,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI sysex data: Sends a MIDI sysex message.</p>","name":"sysexdata","params":[{"type":{"names":["number","Pattern"]},"description":"<p>Sysex data</p>","name":"data"}],"examples":["note(\\"c4\\").sysexid(\\"0x77\\").sysexdata(\\"0x01:0x02:0x03:0x04\\").midichan(1).midi()"],"longname":"sysexdata","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI pitch bend: Sends a MIDI pitch bend message.\\n * @name midibend\\n * @param {number | Pattern} midibend MIDI pitch bend (-1 - 1)\\n * @example\\n * note(\\"c4\\").midibend(sine.slow(4).range(-0.4,0.4)).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2303,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI pitch bend: Sends a MIDI pitch bend message.</p>","name":"midibend","params":[{"type":{"names":["number","Pattern"]},"description":"<p>MIDI pitch bend (-1 - 1)</p>","name":"midibend"}],"examples":["note(\\"c4\\").midibend(sine.slow(4).range(-0.4,0.4)).midi()"],"longname":"midibend","kind":"member","scope":"global"},{"comment":"/**\\n * MIDI key after touch: Sends a MIDI key after touch message.\\n * @name miditouch\\n * @param {number | Pattern} miditouch MIDI key after touch (0-1)\\n * @example\\n * note(\\"c4\\").miditouch(sine.slow(4).range(0,1)).midi()\\n */","meta":{"filename":"controls.mjs","lineno":2311,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>MIDI key after touch: Sends a MIDI key after touch message.</p>","name":"miditouch","params":[{"type":{"names":["number","Pattern"]},"description":"<p>MIDI key after touch (0-1)</p>","name":"miditouch"}],"examples":["note(\\"c4\\").miditouch(sine.slow(4).range(0,1)).midi()"],"longname":"miditouch","kind":"member","scope":"global"},{"comment":"/**\\n * The host to send open sound control messages to. Requires running the OSC bridge.\\n * @name oschost\\n * @param {string | Pattern} oschost e.g. 'localhost'\\n * @example\\n * note(\\"c4\\").oschost('127.0.0.1').oscport(57120).osc();\\n */","meta":{"filename":"controls.mjs","lineno":2323,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The host to send open sound control messages to. Requires running the OSC bridge.</p>","name":"oschost","params":[{"type":{"names":["string","Pattern"]},"description":"<p>e.g. 'localhost'</p>","name":"oschost"}],"examples":["note(\\"c4\\").oschost('127.0.0.1').oscport(57120).osc();"],"longname":"oschost","kind":"member","scope":"global"},{"comment":"/**\\n * The port to send open sound control messages to. Requires running the OSC bridge.\\n * @name oscport\\n * @param {number | Pattern} oscport e.g. 57120\\n * @example\\n * note(\\"c4\\").oschost('127.0.0.1').oscport(57120).osc();\\n */","meta":{"filename":"controls.mjs","lineno":2332,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The port to send open sound control messages to. Requires running the OSC bridge.</p>","name":"oscport","params":[{"type":{"names":["number","Pattern"]},"description":"<p>e.g. 57120</p>","name":"oscport"}],"examples":["note(\\"c4\\").oschost('127.0.0.1').oscport(57120).osc();"],"longname":"oscport","kind":"member","scope":"global"},{"comment":"/**\\n * Sets properties in a batch.\\n *\\n * @name as\\n * @param {String | Array} mapping the control names that are set\\n * @example\\n * \\"c:.5 a:1 f:.25 e:.8\\".as(\\"note:clip\\")\\n * @example\\n * \\"{0@2 0.25 0 0.5 .3 .5}%8\\".as(\\"begin\\").s(\\"sax_vib\\").clip(1)\\n */","meta":{"filename":"controls.mjs","lineno":2348,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Sets properties in a batch.</p>","name":"as","params":[{"type":{"names":["String","Array"]},"description":"<p>the control names that are set</p>","name":"mapping"}],"examples":["\\"c:.5 a:1 f:.25 e:.8\\".as(\\"note:clip\\")","\\"{0@2 0.25 0 0.5 .3 .5}%8\\".as(\\"begin\\").s(\\"sax_vib\\").clip(1)"],"longname":"as","kind":"member","scope":"global"},{"comment":"/**\\n * Allows you to scrub an audio file like a tape loop by passing values that represents the position in the audio file\\n * in the optional array syntax ex: \\"0.5:2\\", the second value controls the speed of playback\\n * @name scrub\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * samples('github:switchangel/pad')\\n * s(\\"swpad:0\\").scrub(\\"{0.1!2 .25@3 0.7!2 <0.8:1.5>}%8\\")\\n * @example\\n * samples('github:yaxu/clean-breaks/main');\\n * s(\\"amen/4\\").fit().scrub(\\"{0@3 0@2 4@3}%8\\".div(16))\\n */","meta":{"filename":"controls.mjs","lineno":2367,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Allows you to scrub an audio file like a tape loop by passing values that represents the position in the audio file\\nin the optional array syntax ex: &quot;0.5:2&quot;, the second value controls the speed of playback</p>","name":"scrub","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["samples('github:switchangel/pad')\\ns(\\"swpad:0\\").scrub(\\"{0.1!2 .25@3 0.7!2 <0.8:1.5>}%8\\")","samples('github:yaxu/clean-breaks/main');\\ns(\\"amen/4\\").fit().scrub(\\"{0@3 0@2 4@3}%8\\".div(16))"],"scope":"static","longname":"Pattern.scrub","kind":"member"},{"comment":"/**\\n * Intended for a debugging, drawLine renders the pattern as a string, where each character represents the same time span.\\n * Should only be used with single characters as values, otherwise the character slots will be messed up.\\n * Character legend:\\n *\\n * - \\"|\\" cycle separator\\n * - \\"-\\" hold previous value\\n * - \\".\\" silence\\n *\\n * @param {Pattern} pattern the pattern to use\\n * @param {number} chars max number of characters (approximately)\\n * @returns string\\n * @example\\n * const line = drawLine(\\"0 [1 2 3]\\", 10); // |0--123|0--123\\n * console.log(line);\\n * silence;\\n */","meta":{"range":[1426,2796],"filename":"drawLine.mjs","lineno":26,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100021770","name":"drawLine","type":"FunctionDeclaration","paramnames":["pat","chars"]},"vars":{"cycle":"drawLine~cycle","pos":"drawLine~pos","lines":"drawLine~lines","emptyLine":"drawLine~emptyLine","haps":"drawLine~haps","durations":"drawLine~durations","":null,"charFraction":"drawLine~charFraction","totalSlots":"drawLine~totalSlots","i":"drawLine~i","undefined":null,"matches":"drawLine~matches","missingLines":"drawLine~missingLines"}},"description":"<p>Intended for a debugging, drawLine renders the pattern as a string, where each character represents the same time span.\\nShould only be used with single characters as values, otherwise the character slots will be messed up.\\nCharacter legend:</p>\\n<ul>\\n<li>&quot;|&quot; cycle separator</li>\\n<li>&quot;-&quot; hold previous value</li>\\n<li>&quot;.&quot; silence</li>\\n</ul>","params":[{"type":{"names":["Pattern"]},"description":"<p>the pattern to use</p>","name":"pattern"},{"type":{"names":["number"]},"description":"<p>max number of characters (approximately)</p>","name":"chars"}],"returns":[{"description":"<p>string</p>"}],"examples":["const line = drawLine(\\"0 [1 2 3]\\", 10); // |0--123|0--123\\nconsole.log(line);\\nsilence;"],"name":"drawLine","longname":"drawLine","kind":"function","scope":"global"},{"comment":"/**\\n * Changes the structure of the pattern to form an Euclidean rhythm.\\n * Euclidean rhythms are rhythms obtained using the greatest common\\n * divisor of two numbers.  They were described in 2004 by Godfried\\n * Toussaint, a Canadian computer scientist.  Euclidean rhythms are\\n * really useful for computer/algorithmic music because they can\\n * describe a large number of rhythms with a couple of numbers.\\n *\\n * @memberof Pattern\\n * @name euclid\\n * @param {number} pulses the number of onsets/beats\\n * @param {number} steps the number of steps to fill\\n * @returns Pattern\\n * @example\\n * // The Cuban tresillo pattern.\\n * note(\\"c3\\").euclid(3,8)\\n */","meta":{"filename":"euclid.mjs","lineno":54,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Changes the structure of the pattern to form an Euclidean rhythm.\\nEuclidean rhythms are rhythms obtained using the greatest common\\ndivisor of two numbers.  They were described in 2004 by Godfried\\nToussaint, a Canadian computer scientist.  Euclidean rhythms are\\nreally useful for computer/algorithmic music because they can\\ndescribe a large number of rhythms with a couple of numbers.</p>","memberof":"Pattern","name":"euclid","params":[{"type":{"names":["number"]},"description":"<p>the number of onsets/beats</p>","name":"pulses"},{"type":{"names":["number"]},"description":"<p>the number of steps to fill</p>","name":"steps"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["// The Cuban tresillo pattern.\\nnote(\\"c3\\").euclid(3,8)"],"scope":"static","longname":"Pattern.euclid","kind":"member"},{"comment":"/**\\n * Like \`euclid\`, but has an additional parameter for 'rotating' the resulting sequence.\\n * @memberof Pattern\\n * @name euclidRot\\n * @param {number} pulses the number of onsets/beats\\n * @param {number} steps the number of steps to fill\\n * @param {number} rotation offset in steps\\n * @returns Pattern\\n * @example\\n * // A Samba rhythm necklace from Brazil\\n * note(\\"c3\\").euclidRot(3,16,14)\\n */","meta":{"filename":"euclid.mjs","lineno":72,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like <code>euclid</code>, but has an additional parameter for 'rotating' the resulting sequence.</p>","memberof":"Pattern","name":"euclidRot","params":[{"type":{"names":["number"]},"description":"<p>the number of onsets/beats</p>","name":"pulses"},{"type":{"names":["number"]},"description":"<p>the number of steps to fill</p>","name":"steps"},{"type":{"names":["number"]},"description":"<p>offset in steps</p>","name":"rotation"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["// A Samba rhythm necklace from Brazil\\nnote(\\"c3\\").euclidRot(3,16,14)"],"scope":"static","longname":"Pattern.euclidRot","kind":"member"},{"comment":"/**\\n * @example // A thirteenth-century Persian rhythm called Khafif-e-ramal.\\n * note(\\"c3\\").euclid(2,5)\\n * @example // The archetypal pattern of the Cumbia from Colombia, as well as a Calypso rhythm from Trinidad.\\n * note(\\"c3\\").euclid(3,4)\\n * @example // Another thirteenth century Persian rhythm by the name of Khafif-e-ramal, as well as a Rumanian folk-dance rhythm.\\n * note(\\"c3\\").euclidRot(3,5,2)\\n * @example // A Ruchenitza rhythm used in a Bulgarian folk dance.\\n * note(\\"c3\\").euclid(3,7)\\n * @example // The Cuban tresillo pattern.\\n * note(\\"c3\\").euclid(3,8)\\n * @example // Another Ruchenitza Bulgarian folk-dance rhythm.\\n * note(\\"c3\\").euclid(4,7)\\n * @example // The Aksak rhythm of Turkey.\\n * note(\\"c3\\").euclid(4,9)\\n * @example // The metric pattern used by Frank Zappa in his piece titled Outside Now.\\n * note(\\"c3\\").euclid(4,11)\\n * @example // Yields the York-Samai pattern, a popular Arab rhythm.\\n * note(\\"c3\\").euclid(5,6)\\n * @example // The Nawakhat pattern, another popular Arab rhythm.\\n * note(\\"c3\\").euclid(5,7)\\n * @example // The Cuban cinquillo pattern.\\n * note(\\"c3\\").euclid(5,8)\\n * @example // A popular Arab rhythm called Agsag-Samai.\\n * note(\\"c3\\").euclid(5,9)\\n * @example // The metric pattern used by Moussorgsky in Pictures at an Exhibition.\\n * note(\\"c3\\").euclid(5,11)\\n * @example // The Venda clapping pattern of a South African children’s song.\\n * note(\\"c3\\").euclid(5,12)\\n * @example // The Bossa-Nova rhythm necklace of Brazil.\\n * note(\\"c3\\").euclid(5,16)\\n * @example // A typical rhythm played on the Bendir (frame drum).\\n * note(\\"c3\\").euclid(7,8)\\n * @example // A common West African bell pattern.\\n * note(\\"c3\\").euclid(7,12)\\n * @example // A Samba rhythm necklace from Brazil.\\n * note(\\"c3\\").euclidRot(7,16,14)\\n * @example // A rhythm necklace used in the Central African Republic.\\n * note(\\"c3\\").euclid(9,16)\\n * @example // A rhythm necklace of the Aka Pygmies of Central Africa.\\n * note(\\"c3\\").euclidRot(11,24,14)\\n * @example // Another rhythm necklace of the Aka Pygmies of the upper Sangha.\\n * note(\\"c3\\").euclidRot(13,24,5)\\n */","meta":{"range":[5307,5459],"filename":"euclid.mjs","lineno":130,"columnno":6,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100022275","name":"_euclidRot","type":"FunctionExpression"},"vars":{"b":"_euclidRot~b"}},"examples":["// A thirteenth-century Persian rhythm called Khafif-e-ramal.\\nnote(\\"c3\\").euclid(2,5)","// The archetypal pattern of the Cumbia from Colombia, as well as a Calypso rhythm from Trinidad.\\nnote(\\"c3\\").euclid(3,4)","// Another thirteenth century Persian rhythm by the name of Khafif-e-ramal, as well as a Rumanian folk-dance rhythm.\\nnote(\\"c3\\").euclidRot(3,5,2)","// A Ruchenitza rhythm used in a Bulgarian folk dance.\\nnote(\\"c3\\").euclid(3,7)","// The Cuban tresillo pattern.\\nnote(\\"c3\\").euclid(3,8)","// Another Ruchenitza Bulgarian folk-dance rhythm.\\nnote(\\"c3\\").euclid(4,7)","// The Aksak rhythm of Turkey.\\nnote(\\"c3\\").euclid(4,9)","// The metric pattern used by Frank Zappa in his piece titled Outside Now.\\nnote(\\"c3\\").euclid(4,11)","// Yields the York-Samai pattern, a popular Arab rhythm.\\nnote(\\"c3\\").euclid(5,6)","// The Nawakhat pattern, another popular Arab rhythm.\\nnote(\\"c3\\").euclid(5,7)","// The Cuban cinquillo pattern.\\nnote(\\"c3\\").euclid(5,8)","// A popular Arab rhythm called Agsag-Samai.\\nnote(\\"c3\\").euclid(5,9)","// The metric pattern used by Moussorgsky in Pictures at an Exhibition.\\nnote(\\"c3\\").euclid(5,11)","// The Venda clapping pattern of a South African children’s song.\\nnote(\\"c3\\").euclid(5,12)","// The Bossa-Nova rhythm necklace of Brazil.\\nnote(\\"c3\\").euclid(5,16)","// A typical rhythm played on the Bendir (frame drum).\\nnote(\\"c3\\").euclid(7,8)","// A common West African bell pattern.\\nnote(\\"c3\\").euclid(7,12)","// A Samba rhythm necklace from Brazil.\\nnote(\\"c3\\").euclidRot(7,16,14)","// A rhythm necklace used in the Central African Republic.\\nnote(\\"c3\\").euclid(9,16)","// A rhythm necklace of the Aka Pygmies of Central Africa.\\nnote(\\"c3\\").euclidRot(11,24,14)","// Another rhythm necklace of the Aka Pygmies of the upper Sangha.\\nnote(\\"c3\\").euclidRot(13,24,5)"],"name":"_euclidRot","longname":"_euclidRot","kind":"function","scope":"global","params":[]},{"comment":"/**\\n * Similar to \`euclid\`, but each pulse is held until the next pulse,\\n * so there will be no gaps.\\n * @name euclidLegato\\n * @memberof Pattern\\n * @param {number} pulses the number of onsets/beats\\n * @param {number} steps the number of steps to fill\\n * @param rotation offset in steps\\n * @param pat\\n * @example\\n * note(\\"c3\\").euclidLegato(3,8)\\n */","meta":{"filename":"euclid.mjs","lineno":154,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Similar to <code>euclid</code>, but each pulse is held until the next pulse,\\nso there will be no gaps.</p>","name":"euclidLegato","memberof":"Pattern","params":[{"type":{"names":["number"]},"description":"<p>the number of onsets/beats</p>","name":"pulses"},{"type":{"names":["number"]},"description":"<p>the number of steps to fill</p>","name":"steps"},{"description":"<p>offset in steps</p>","name":"rotation"},{"name":"pat"}],"examples":["note(\\"c3\\").euclidLegato(3,8)"],"scope":"static","longname":"Pattern.euclidLegato","kind":"member"},{"comment":"/**\\n * Similar to \`euclid\`, but each pulse is held until the next pulse,\\n * so there will be no gaps, and has an additional parameter for 'rotating'\\n * the resulting sequence\\n * @name euclidLegatoRot\\n * @memberof Pattern\\n * @param {number} pulses the number of onsets/beats\\n * @param {number} steps the number of steps to fill\\n * @param {number} rotation offset in steps\\n * @example\\n * note(\\"c3\\").euclidLegatoRot(3,5,2)\\n */","meta":{"filename":"euclid.mjs","lineno":184,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Similar to <code>euclid</code>, but each pulse is held until the next pulse,\\nso there will be no gaps, and has an additional parameter for 'rotating'\\nthe resulting sequence</p>","name":"euclidLegatoRot","memberof":"Pattern","params":[{"type":{"names":["number"]},"description":"<p>the number of onsets/beats</p>","name":"pulses"},{"type":{"names":["number"]},"description":"<p>the number of steps to fill</p>","name":"steps"},{"type":{"names":["number"]},"description":"<p>offset in steps</p>","name":"rotation"}],"examples":["note(\\"c3\\").euclidLegatoRot(3,5,2)"],"scope":"static","longname":"Pattern.euclidLegatoRot","kind":"member"},{"comment":"/**\\n * A 'euclid' variant with an additional parameter that morphs the resulting\\n * rhythm from 0 (no morphing) to 1 (completely 'even'). For example\\n * \`sound(\\"bd\\").euclidish(3,8,0)\` would be the same as\\n * \`sound(\\"bd\\").euclid(3,8)\`, and \`sound(\\"bd\\").euclidish(3,8,1)\` would be the\\n * same as \`sound(\\"bd bd bd\\")\`. \`sound(\\"bd\\").euclidish(3,8,0.5)\` would have a\\n * groove somewhere between.\\n * Inspired by the work of Malcom Braff.\\n * @name euclidish\\n * @synonyms eish\\n * @memberof Pattern\\n * @param {number} pulses the number of onsets\\n * @param {number} steps the number of steps to fill\\n * @param {number} groove exists between the extremes of 0 (straight euclidian) and 1 (straight pulse)\\n * @example\\n * sound(\\"hh\\").euclidish(7,12,sine.slow(8))\\n * .pan(sine.slow(8))\\n */","meta":{"filename":"euclid.mjs","lineno":200,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>A 'euclid' variant with an additional parameter that morphs the resulting\\nrhythm from 0 (no morphing) to 1 (completely 'even'). For example\\n<code>sound(&quot;bd&quot;).euclidish(3,8,0)</code> would be the same as\\n<code>sound(&quot;bd&quot;).euclid(3,8)</code>, and <code>sound(&quot;bd&quot;).euclidish(3,8,1)</code> would be the\\nsame as <code>sound(&quot;bd bd bd&quot;)</code>. <code>sound(&quot;bd&quot;).euclidish(3,8,0.5)</code> would have a\\ngroove somewhere between.\\nInspired by the work of Malcom Braff.</p>","name":"euclidish","synonyms_text":"eish","synonyms":["eish"],"memberof":"Pattern","params":[{"type":{"names":["number"]},"description":"<p>the number of onsets</p>","name":"pulses"},{"type":{"names":["number"]},"description":"<p>the number of steps to fill</p>","name":"steps"},{"type":{"names":["number"]},"description":"<p>exists between the extremes of 0 (straight euclidian) and 1 (straight pulse)</p>","name":"groove"}],"examples":["sound(\\"hh\\").euclidish(7,12,sine.slow(8))\\n.pan(sine.slow(8))"],"scope":"static","longname":"Pattern.euclidish","kind":"member"},{"comment":"/** @class Class representing a pattern. */","meta":{"range":[1713,27921],"filename":"pattern.mjs","lineno":44,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100024880","name":"exports.Pattern","type":"ClassDeclaration"}},"name":"Pattern","longname":"Pattern","kind":"class","classdesc":"<p>Class representing a pattern.</p>","scope":"global","description":"<p>Create a pattern. As an end user, you will most likely not create a Pattern directly.</p>","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"memberof":"Pattern","params":[{"type":{"names":["function"]},"description":"<p>The function that maps a <code>State</code> to an array of <code>Hap</code>.</p>","name":"query"}]},{"comment":"/**\\n   * Returns a new pattern, with the function applied to the value of\\n   * each hap. It has the alias \`fmap\`.\\n   * @synonyms fmap\\n   * @param {Function} func to to apply to the value\\n   * @returns Pattern\\n   * @example\\n   * \\"0 1 2\\".withValue(v => v + 10).log()\\n   */","meta":{"range":[3020,3189],"filename":"pattern.mjs","lineno":93,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100024988","name":"Pattern#withValue","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>Returns a new pattern, with the function applied to the value of\\neach hap. It has the alias <code>fmap</code>.</p>","synonyms_text":"fmap","synonyms":["fmap"],"params":[{"type":{"names":["function"]},"description":"<p>to to apply to the value</p>","name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"0 1 2\\".withValue(v => v + 10).log()"],"name":"withValue","longname":"Pattern#withValue","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * see \`withValue\`\\n   * @noAutocomplete\\n   */","meta":{"range":[3362,3411],"filename":"pattern.mjs","lineno":108,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100025042","name":"Pattern#fmap","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>see <code>withValue</code></p>","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"fmap","longname":"Pattern#fmap","kind":"function","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Assumes 'this' is a pattern of functions, and given a function to\\n   * resolve wholes, applies a given pattern of values to that\\n   * pattern of functions.\\n   * @param {Function} whole_func\\n   * @param {Function} func\\n   * @noAutocomplete\\n   * @returns Pattern\\n   */","meta":{"range":[3693,4435],"filename":"pattern.mjs","lineno":121,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100025053","name":"Pattern#appWhole","type":"MethodDefinition","paramnames":["whole_func","pat_val"]},"vars":{"":null}},"description":"<p>Assumes 'this' is a pattern of functions, and given a function to\\nresolve wholes, applies a given pattern of values to that\\npattern of functions.</p>","params":[{"type":{"names":["function"]},"name":"whole_func"},{"type":{"names":["function"]},"name":"func"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"returns":[{"description":"<p>Pattern</p>"}],"name":"appWhole","longname":"Pattern#appWhole","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * When this method is called on a pattern of functions, it matches its haps\\n   * with those in the given pattern of values.  A new pattern is returned, with\\n   * each matching value applied to the corresponding function.\\n   *\\n   * In this \`_appBoth\` variant, where timespans of the function and value haps\\n   * are not the same but do intersect, the resulting hap has a timespan of the\\n   * intersection. This applies to both the part and the whole timespan.\\n   * @param {Pattern} pat_val\\n   * @noAutocomplete\\n   * @returns Pattern\\n   */","meta":{"range":[4986,5410],"filename":"pattern.mjs","lineno":157,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100025160","name":"Pattern#appBoth","type":"MethodDefinition","paramnames":["pat_val"]},"vars":{"":null}},"description":"<p>When this method is called on a pattern of functions, it matches its haps\\nwith those in the given pattern of values.  A new pattern is returned, with\\neach matching value applied to the corresponding function.</p>\\n<p>In this <code>_appBoth</code> variant, where timespans of the function and value haps\\nare not the same but do intersect, the resulting hap has a timespan of the\\nintersection. This applies to both the part and the whole timespan.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat_val"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"returns":[{"description":"<p>Pattern</p>"}],"name":"appBoth","longname":"Pattern#appBoth","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * As with \`appBoth\`, but the \`whole\` timespan is not the intersection,\\n   * but the timespan from the function of patterns that this method is called\\n   * on. In practice, this means that the pattern structure, including onsets,\\n   * are preserved from the pattern of functions (often referred to as the left\\n   * hand or inner pattern).\\n   * @param {Pattern} pat_val\\n   * @noAutocomplete\\n   * @returns Pattern\\n   */","meta":{"range":[5840,6644],"filename":"pattern.mjs","lineno":184,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100025220","name":"Pattern#appLeft","type":"MethodDefinition","paramnames":["pat_val"]},"vars":{"":null}},"description":"<p>As with <code>appBoth</code>, but the <code>whole</code> timespan is not the intersection,\\nbut the timespan from the function of patterns that this method is called\\non. In practice, this means that the pattern structure, including onsets,\\nare preserved from the pattern of functions (often referred to as the left\\nhand or inner pattern).</p>","params":[{"type":{"names":["Pattern"]},"name":"pat_val"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"returns":[{"description":"<p>Pattern</p>"}],"name":"appLeft","longname":"Pattern#appLeft","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * As with \`appLeft\`, but \`whole\` timespans are instead taken from the\\n   * pattern of values, i.e. structure is preserved from the right hand/outer\\n   * pattern.\\n   * @param {Pattern} pat_val\\n   * @noAutocomplete\\n   * @returns Pattern\\n   */","meta":{"range":[6898,7706],"filename":"pattern.mjs","lineno":217,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100025342","name":"Pattern#appRight","type":"MethodDefinition","paramnames":["pat_val"]},"vars":{"":null}},"description":"<p>As with <code>appLeft</code>, but <code>whole</code> timespans are instead taken from the\\npattern of values, i.e. structure is preserved from the right hand/outer\\npattern.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat_val"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"returns":[{"description":"<p>Pattern</p>"}],"name":"appRight","longname":"Pattern#appRight","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Query haps inside the given time span.\\n   *\\n   * @param {Fraction | number} begin from time\\n   * @param {Fraction | number} end to time\\n   * @returns Hap[]\\n   * @example\\n   * const pattern = sequence('a', ['b', 'c'])\\n   * const haps = pattern.queryArc(0, 1)\\n   * console.log(haps)\\n   * silence\\n   * @noAutocomplete\\n   */","meta":{"range":[13342,13558],"filename":"pattern.mjs","lineno":413,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026022","name":"Pattern#queryArc","type":"MethodDefinition","paramnames":["begin","end","controls"]},"vars":{"":null}},"description":"<p>Query haps inside the given time span.</p>","params":[{"type":{"names":["Fraction","number"]},"description":"<p>from time</p>","name":"begin"},{"type":{"names":["Fraction","number"]},"description":"<p>to time</p>","name":"end"}],"returns":[{"description":"<p>Hap[]</p>"}],"examples":["const pattern = sequence('a', ['b', 'c'])\\nconst haps = pattern.queryArc(0, 1)\\nconsole.log(haps)\\nsilence"],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"queryArc","longname":"Pattern#queryArc","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Returns a new pattern, with queries split at cycle boundaries. This makes\\n   * some calculations easier to express, as all haps are then constrained to\\n   * happen within a cycle.\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[13802,14002],"filename":"pattern.mjs","lineno":429,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026058","name":"Pattern#splitQueries","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Returns a new pattern, with queries split at cycle boundaries. This makes\\nsome calculations easier to express, as all haps are then constrained to\\nhappen within a cycle.</p>","returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"splitQueries","longname":"Pattern#splitQueries","kind":"function","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Returns a new pattern, where the given function is applied to the query\\n   * timespan before passing it to the original pattern.\\n   * @param {Function} func the function to apply\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[14245,14339],"filename":"pattern.mjs","lineno":444,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026098","name":"Pattern#withQuerySpan","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>Returns a new pattern, where the given function is applied to the query\\ntimespan before passing it to the original pattern.</p>","params":[{"type":{"names":["function"]},"description":"<p>the function to apply</p>","name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"withQuerySpan","longname":"Pattern#withQuerySpan","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * As with \`withQuerySpan\`, but the function is applied to both the\\n   * begin and end time of the query timespan.\\n   * @param {Function} func the function to apply\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[14799,14918],"filename":"pattern.mjs","lineno":466,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026154","name":"Pattern#withQueryTime","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>As with <code>withQuerySpan</code>, but the function is applied to both the\\nbegin and end time of the query timespan.</p>","params":[{"type":{"names":["function"]},"description":"<p>the function to apply</p>","name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"withQueryTime","longname":"Pattern#withQueryTime","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Similar to \`withQuerySpan\`, but the function is applied to the timespans\\n   * of all haps returned by pattern queries (both \`part\` timespans, and where\\n   * present, \`whole\` timespans).\\n   * @param {Function} func\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[15196,15306],"filename":"pattern.mjs","lineno":478,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026179","name":"Pattern#withHapSpan","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>Similar to <code>withQuerySpan</code>, but the function is applied to the timespans\\nof all haps returned by pattern queries (both <code>part</code> timespans, and where\\npresent, <code>whole</code> timespans).</p>","params":[{"type":{"names":["function"]},"name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"withHapSpan","longname":"Pattern#withHapSpan","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * As with \`withHapSpan\`, but the function is applied to both the\\n   * begin and end time of the hap timespans.\\n   * @param {Function} func the function to apply\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[15529,15612],"filename":"pattern.mjs","lineno":489,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026204","name":"Pattern#withHapTime","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>As with <code>withHapSpan</code>, but the function is applied to both the\\nbegin and end time of the hap timespans.</p>","params":[{"type":{"names":["function"]},"description":"<p>the function to apply</p>","name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"withHapTime","longname":"Pattern#withHapTime","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Returns a new pattern with the given function applied to the list of haps returned by every query.\\n   * @param {Function} func\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[15803,15950],"filename":"pattern.mjs","lineno":499,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026221","name":"Pattern#withHaps","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>Returns a new pattern with the given function applied to the list of haps returned by every query.</p>","params":[{"type":{"names":["function"]},"name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"withHaps","longname":"Pattern#withHaps","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * As with \`withHaps\`, but applies the function to every hap, rather than every list of haps.\\n   * @param {Function} func\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[16133,16204],"filename":"pattern.mjs","lineno":511,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026251","name":"Pattern#withHap","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>As with <code>withHaps</code>, but applies the function to every hap, rather than every list of haps.</p>","params":[{"type":{"names":["function"]},"name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"withHap","longname":"Pattern#withHap","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Returns a new pattern with the context field set to every hap set to the given value.\\n   * @param {*} context\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[16378,16462],"filename":"pattern.mjs","lineno":521,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026268","name":"Pattern#setContext","type":"MethodDefinition","paramnames":["context"]},"vars":{"":null}},"description":"<p>Returns a new pattern with the context field set to every hap set to the given value.</p>","params":[{"type":{"names":["*"]},"name":"context"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"setContext","longname":"Pattern#setContext","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Returns a new pattern with the given function applied to the context field of every hap.\\n   * @param {Function} func\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[16643,16883],"filename":"pattern.mjs","lineno":531,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026285","name":"Pattern#withContext","type":"MethodDefinition","paramnames":["func"]},"vars":{"":null}},"description":"<p>Returns a new pattern with the given function applied to the context field of every hap.</p>","params":[{"type":{"names":["function"]},"name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"withContext","longname":"Pattern#withContext","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Returns a new pattern with the context field of every hap set to an empty object.\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[17029,17103],"filename":"pattern.mjs","lineno":545,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026333","name":"Pattern#stripContext","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Returns a new pattern with the context field of every hap set to an empty object.</p>","returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"stripContext","longname":"Pattern#stripContext","kind":"function","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Returns a new pattern with the given location information added to the\\n   * context of every hap.\\n   * @param {Number} start start offset\\n   * @param {Number} end end offset\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[17341,17708],"filename":"pattern.mjs","lineno":557,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026349","name":"Pattern#withLoc","type":"MethodDefinition","paramnames":["start","end"]},"vars":{"":null}},"description":"<p>Returns a new pattern with the given location information added to the\\ncontext of every hap.</p>","params":[{"type":{"names":["Number"]},"description":"<p>start offset</p>","name":"start"},{"type":{"names":["Number"]},"description":"<p>end offset</p>","name":"end"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"withLoc","longname":"Pattern#withLoc","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Returns a new Pattern, which only returns haps that meet the given test.\\n   * @param {Function} hap_test - a function which returns false for haps to be removed from the pattern\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[17950,18047],"filename":"pattern.mjs","lineno":579,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026413","name":"Pattern#filterHaps","type":"MethodDefinition","paramnames":["hap_test"]},"vars":{"":null}},"description":"<p>Returns a new Pattern, which only returns haps that meet the given test.</p>","params":[{"type":{"names":["function"]},"description":"<p>a function which returns false for haps to be removed from the pattern</p>","name":"hap_test"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"filterHaps","longname":"Pattern#filterHaps","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * As with \`filterHaps\`, but the function is applied to values\\n   * inside haps.\\n   * @param {Function} value_test\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[18223,18368],"filename":"pattern.mjs","lineno":590,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026432","name":"Pattern#filterValues","type":"MethodDefinition","paramnames":["value_test"]},"vars":{"":null}},"description":"<p>As with <code>filterHaps</code>, but the function is applied to values\\ninside haps.</p>","params":[{"type":{"names":["function"]},"name":"value_test"}],"returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"filterValues","longname":"Pattern#filterValues","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Returns a new pattern, with haps containing undefined values removed from\\n   * query results.\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[18526,18607],"filename":"pattern.mjs","lineno":600,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026463","name":"Pattern#removeUndefineds","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Returns a new pattern, with haps containing undefined values removed from\\nquery results.</p>","returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"removeUndefineds","longname":"Pattern#removeUndefineds","kind":"function","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Returns a new pattern, with all haps without onsets filtered out. A hap\\n   * with an onset is one with a \`whole\` timespan that begins at the same time\\n   * as its \`part\` timespan.\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[18851,19116],"filename":"pattern.mjs","lineno":611,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026477","name":"Pattern#onsetsOnly","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Returns a new pattern, with all haps without onsets filtered out. A hap\\nwith an onset is one with a <code>whole</code> timespan that begins at the same time\\nas its <code>part</code> timespan.</p>","returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"onsetsOnly","longname":"Pattern#onsetsOnly","kind":"function","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Returns a new pattern, with 'continuous' haps (those without 'whole'\\n   * timespans) removed from query results.\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[19293,19427],"filename":"pattern.mjs","lineno":624,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026492","name":"Pattern#discreteOnly","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Returns a new pattern, with 'continuous' haps (those without 'whole'\\ntimespans) removed from query results.</p>","returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"discreteOnly","longname":"Pattern#discreteOnly","kind":"function","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Combines adjacent haps with the same value and whole.  Only\\n   * intended for use in tests.\\n   * @noAutocomplete\\n   */","meta":{"range":[19561,21006],"filename":"pattern.mjs","lineno":634,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026506","name":"Pattern#defragmentHaps","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Combines adjacent haps with the same value and whole.  Only\\nintended for use in tests.</p>","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"defragmentHaps","longname":"Pattern#defragmentHaps","kind":"function","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Queries the pattern for the first cycle, returning Haps. Mainly of use when\\n   * debugging a pattern.\\n   * @param {Boolean} with_context - set to true, otherwise the context field\\n   * will be stripped from the resulting haps.\\n   * @returns [Hap]\\n   * @noAutocomplete\\n   */","meta":{"range":[21295,21493],"filename":"pattern.mjs","lineno":689,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026737","name":"Pattern#firstCycle","type":"MethodDefinition","paramnames":["with_context"]},"vars":{"":null}},"description":"<p>Queries the pattern for the first cycle, returning Haps. Mainly of use when\\ndebugging a pattern.</p>","params":[{"type":{"names":["Boolean"]},"description":"<p>set to true, otherwise the context field\\nwill be stripped from the resulting haps.</p>","name":"with_context","defaultvalue":false}],"returns":[{"description":"<p>[Hap]</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"firstCycle","longname":"Pattern#firstCycle","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Accessor for a list of values returned by querying the first cycle.\\n   * @noAutocomplete\\n   */","meta":{"range":[21603,21685],"filename":"pattern.mjs","lineno":701,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026774","name":"Pattern#firstCycleValues","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Accessor for a list of values returned by querying the first cycle.</p>","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"firstCycleValues","longname":"Pattern#firstCycleValues","kind":"member","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * More human-readable version of the \`firstCycleValues\` accessor.\\n   * @noAutocomplete\\n   */","meta":{"range":[21791,21954],"filename":"pattern.mjs","lineno":709,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026791","name":"Pattern#showFirstCycle","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>More human-readable version of the <code>firstCycleValues</code> accessor.</p>","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"showFirstCycle","longname":"Pattern#showFirstCycle","kind":"member","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Returns a new pattern, which returns haps sorted in temporal order. Mainly\\n   * of use when comparing two patterns for equality, in tests.\\n   * @returns Pattern\\n   * @noAutocomplete\\n   */","meta":{"range":[22157,22430],"filename":"pattern.mjs","lineno":721,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100026829","name":"Pattern#sortHapsByPart","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Returns a new pattern, which returns haps sorted in temporal order. Mainly\\nof use when comparing two patterns for equality, in tests.</p>","returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"sortHapsByPart","longname":"Pattern#sortHapsByPart","kind":"function","memberof":"Pattern","scope":"instance","params":[]},{"comment":"/**\\n   * Layers the result of the given function(s). Like \`superimpose\`, but without the original pattern:\\n   * @name layer\\n   * @memberof Pattern\\n   * @synonyms apply\\n   * @returns Pattern\\n   * @example\\n   * \\"<0 2 4 6 ~ 4 ~ 2 0!3 ~!5>*8\\"\\n   *   .layer(x=>x.add(\\"0,2\\"))\\n   *   .scale('C minor').note()\\n   */","meta":{"filename":"pattern.mjs","lineno":779,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Layers the result of the given function(s). Like <code>superimpose</code>, but without the original pattern:</p>","name":"layer","memberof":"Pattern","synonyms_text":"apply","synonyms":["apply"],"returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"<0 2 4 6 ~ 4 ~ 2 0!3 ~!5>*8\\"\\n  .layer(x=>x.add(\\"0,2\\"))\\n  .scale('C minor').note()"],"scope":"static","longname":"Pattern.layer","kind":"member"},{"comment":"/**\\n   * Superimposes the result of the given function(s) on top of the original pattern:\\n   * @name superimpose\\n   * @memberof Pattern\\n   * @returns Pattern\\n   * @example\\n   * \\"<0 2 4 6 ~ 4 ~ 2 0!3 ~!5>*8\\"\\n   *   .superimpose(x=>x.add(2))\\n   *   .scale('C minor').note()\\n   */","meta":{"filename":"pattern.mjs","lineno":794,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Superimposes the result of the given function(s) on top of the original pattern:</p>","name":"superimpose","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"<0 2 4 6 ~ 4 ~ 2 0!3 ~!5>*8\\"\\n  .superimpose(x=>x.add(2))\\n  .scale('C minor').note()"],"scope":"static","longname":"Pattern.superimpose","kind":"member"},{"comment":"/**\\n   * Writes the content of the current event to the console (visible in the side menu).\\n   * @name log\\n   * @memberof Pattern\\n   * @example\\n   * s(\\"bd sd\\").log()\\n   */","meta":{"filename":"pattern.mjs","lineno":854,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Writes the content of the current event to the console (visible in the side menu).</p>","name":"log","memberof":"Pattern","examples":["s(\\"bd sd\\").log()"],"scope":"static","longname":"Pattern.log","kind":"member"},{"comment":"/**\\n   * A simplified version of \`log\` which writes all \\"values\\" (various configurable parameters)\\n   * within the event to the console (visible in the side menu).\\n   * @name logValues\\n   * @memberof Pattern\\n   * @example\\n   * s(\\"bd sd\\").gain(\\"0.25 0.5 1\\").n(\\"2 1 0\\").logValues()\\n   */","meta":{"filename":"pattern.mjs","lineno":867,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>A simplified version of <code>log</code> which writes all &quot;values&quot; (various configurable parameters)\\nwithin the event to the console (visible in the side menu).</p>","name":"logValues","memberof":"Pattern","examples":["s(\\"bd sd\\").gain(\\"0.25 0.5 1\\").n(\\"2 1 0\\").logValues()"],"scope":"static","longname":"Pattern.logValues","kind":"member"},{"comment":"/**\\n   * Breaks a pattern into pieces according to the structure of a given pattern.\\n   * True values in the given pattern cause the corresponding subcycle of the\\n   * source pattern to be looped, and for an (optional) given function to be\\n   * applied. False values result in the corresponding part of the source pattern\\n   * to be played unchanged.\\n   * @name into\\n   * @memberof Pattern\\n   * @example\\n   * sound(\\"bd sd ht lt\\").into(\\"1 0\\", hurry(2))\\n   */","meta":{"filename":"pattern.mjs","lineno":897,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Breaks a pattern into pieces according to the structure of a given pattern.\\nTrue values in the given pattern cause the corresponding subcycle of the\\nsource pattern to be looped, and for an (optional) given function to be\\napplied. False values result in the corresponding part of the source pattern\\nto be played unchanged.</p>","name":"into","memberof":"Pattern","examples":["sound(\\"bd sd ht lt\\").into(\\"1 0\\", hurry(2))"],"scope":"static","longname":"Pattern.into","kind":"member"},{"comment":"/**\\n * Selects indices in in stacked notes.\\n * @example\\n * note(\\"<[c,eb,g]!2 [c,f,ab] [d,f,ab]>\\")\\n * .arpWith(haps => haps[2])\\n * */","meta":{"range":[28891,29121],"filename":"pattern.mjs","lineno":946,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100027543","name":"exports.arpWith","type":"VariableDeclaration"}},"description":"<p>Selects indices in in stacked notes.</p>","examples":["note(\\"<[c,eb,g]!2 [c,f,ab] [d,f,ab]>\\")\\n.arpWith(haps => haps[2])"],"name":"arpWith","longname":"arpWith","kind":"constant","scope":"global"},{"comment":"/**\\n * Selects indices in in stacked notes.\\n * @example\\n * note(\\"<[c,eb,g]!2 [c,f,ab] [d,f,ab]>\\")\\n * .arp(\\"0 [0,2] 1 [0,2]\\")\\n * */","meta":{"range":[29254,29397],"filename":"pattern.mjs","lineno":960,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100027597","name":"exports.arp","type":"VariableDeclaration"}},"description":"<p>Selects indices in in stacked notes.</p>","examples":["note(\\"<[c,eb,g]!2 [c,f,ab] [d,f,ab]>\\")\\n.arp(\\"0 [0,2] 1 [0,2]\\")"],"name":"arp","longname":"arp","kind":"constant","scope":"global"},{"comment":"/**\\n     *\\n     * Assumes a pattern of numbers. Adds the given number to each item in the pattern.\\n     * @name add\\n     * @memberof Pattern\\n     * @example\\n     * // Here, the triad 0, 2, 4 is shifted by different amounts\\n     * n(\\"0 2 4\\".add(\\"<0 3 4 0>\\")).scale(\\"C:major\\")\\n     * // Without add, the equivalent would be:\\n     * // n(\\"<[0 2 4] [3 5 7] [4 6 8] [0 2 4]>\\").scale(\\"C:major\\")\\n     * @example\\n     * // You can also use add with notes:\\n     * note(\\"c3 e3 g3\\".add(\\"<0 5 7 0>\\"))\\n     * // Behind the scenes, the notes are converted to midi numbers:\\n     * // note(\\"48 52 55\\".add(\\"<0 5 7 0>\\"))\\n     */","meta":{"filename":"pattern.mjs","lineno":1023,"columnno":4,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Assumes a pattern of numbers. Adds the given number to each item in the pattern.</p>","name":"add","memberof":"Pattern","examples":["// Here, the triad 0, 2, 4 is shifted by different amounts\\nn(\\"0 2 4\\".add(\\"<0 3 4 0>\\")).scale(\\"C:major\\")\\n// Without add, the equivalent would be:\\n// n(\\"<[0 2 4] [3 5 7] [4 6 8] [0 2 4]>\\").scale(\\"C:major\\")","// You can also use add with notes:\\nnote(\\"c3 e3 g3\\".add(\\"<0 5 7 0>\\"))\\n// Behind the scenes, the notes are converted to midi numbers:\\n// note(\\"48 52 55\\".add(\\"<0 5 7 0>\\"))"],"scope":"static","longname":"Pattern.add","kind":"member"},{"comment":"/**\\n     *\\n     * Like add, but the given numbers are subtracted.\\n     * @name sub\\n     * @memberof Pattern\\n     * @example\\n     * n(\\"0 2 4\\".sub(\\"<0 1 2 3>\\")).scale(\\"C4:minor\\")\\n     * // See add for more information.\\n     */","meta":{"filename":"pattern.mjs","lineno":1040,"columnno":4,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like add, but the given numbers are subtracted.</p>","name":"sub","memberof":"Pattern","examples":["n(\\"0 2 4\\".sub(\\"<0 1 2 3>\\")).scale(\\"C4:minor\\")\\n// See add for more information."],"scope":"static","longname":"Pattern.sub","kind":"member"},{"comment":"/**\\n     *\\n     * Multiplies each number by the given factor.\\n     * @name mul\\n     * @memberof Pattern\\n     * @example\\n     * \\"<1 1.5 [1.66, <2 2.33>]>*4\\".mul(150).freq()\\n     */","meta":{"filename":"pattern.mjs","lineno":1050,"columnno":4,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Multiplies each number by the given factor.</p>","name":"mul","memberof":"Pattern","examples":["\\"<1 1.5 [1.66, <2 2.33>]>*4\\".mul(150).freq()"],"scope":"static","longname":"Pattern.mul","kind":"member"},{"comment":"/**\\n     *\\n     * Divides each number by the given factor.\\n     * @name div\\n     * @memberof Pattern\\n     */","meta":{"filename":"pattern.mjs","lineno":1059,"columnno":4,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Divides each number by the given factor.</p>","name":"div","memberof":"Pattern","scope":"static","longname":"Pattern.div","kind":"member"},{"comment":"/**\\n   * Applies the given structure to the pattern:\\n   *\\n   * @example\\n   * note(\\"c,eb,g\\")\\n   *   .struct(\\"x ~ x ~ ~ x ~ x ~ ~ ~ x ~ x ~ ~\\")\\n   *   .slow(2)\\n   */","meta":{"range":[35283,35371],"filename":"pattern.mjs","lineno":1155,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028142","name":"Pattern.prototype.struct","type":"FunctionExpression","paramnames":["args"]}},"description":"<p>Applies the given structure to the pattern:</p>","examples":["note(\\"c,eb,g\\")\\n  .struct(\\"x ~ x ~ ~ x ~ x ~ ~ ~ x ~ x ~ ~\\")\\n  .slow(2)"],"name":"struct","longname":"Pattern#struct","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Returns silence when mask is 0 or \\"~\\"\\n   *\\n   * @example\\n   * note(\\"c [eb,g] d [eb,g]\\").mask(\\"<1 [0 1]>\\")\\n   */","meta":{"range":[35591,35676],"filename":"pattern.mjs","lineno":1167,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028182","name":"Pattern.prototype.mask","type":"FunctionExpression","paramnames":["args"]}},"description":"<p>Returns silence when mask is 0 or &quot;~&quot;</p>","examples":["note(\\"c [eb,g] d [eb,g]\\").mask(\\"<1 [0 1]>\\")"],"name":"mask","longname":"Pattern#mask","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Resets the pattern to the start of the cycle for each onset of the reset pattern.\\n   *\\n   * @example\\n   * s(\\"[<bd lt> sd]*2, hh*8\\").reset(\\"<x@3 x(5,8)>\\")\\n   */","meta":{"range":[35941,36030],"filename":"pattern.mjs","lineno":1179,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028222","name":"Pattern.prototype.reset","type":"FunctionExpression","paramnames":["args"]}},"description":"<p>Resets the pattern to the start of the cycle for each onset of the reset pattern.</p>","examples":["s(\\"[<bd lt> sd]*2, hh*8\\").reset(\\"<x@3 x(5,8)>\\")"],"name":"reset","longname":"Pattern#reset","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n   * Restarts the pattern for each onset of the restart pattern.\\n   * While reset will only reset the current cycle, restart will start from cycle 0.\\n   *\\n   * @example\\n   * s(\\"[<bd lt> sd]*2, hh*8\\").restart(\\"<x@3 x(5,8)>\\")\\n   */","meta":{"range":[36364,36457],"filename":"pattern.mjs","lineno":1192,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028262","name":"Pattern.prototype.restart","type":"FunctionExpression","paramnames":["args"]}},"description":"<p>Restarts the pattern for each onset of the restart pattern.\\nWhile reset will only reset the current cycle, restart will start from cycle 0.</p>","examples":["s(\\"[<bd lt> sd]*2, hh*8\\").restart(\\"<x@3 x(5,8)>\\")"],"name":"restart","longname":"Pattern#restart","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n * Does absolutely nothing, but with a given metrical 'steps'\\n * @name gap\\n * @param  {number} steps\\n * @example\\n * gap(3) // \\"~@3\\"\\n */","meta":{"filename":"pattern.mjs","lineno":1226,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Does absolutely nothing, but with a given metrical 'steps'</p>","name":"gap","params":[{"type":{"names":["number"]},"name":"steps"}],"examples":["gap(3) // \\"~@3\\""],"longname":"gap","kind":"member","scope":"global"},{"comment":"/**\\n * Does absolutely nothing..\\n * @name silence\\n * @example\\n * silence // \\"~\\"\\n */","meta":{"filename":"pattern.mjs","lineno":1235,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Does absolutely nothing..</p>","name":"silence","examples":["silence // \\"~\\""],"longname":"silence","kind":"member","scope":"global"},{"comment":"/**\\n * A discrete value that repeats once per cycle.\\n *\\n * @returns {Pattern}\\n * @example\\n * pure('e4') // \\"e4\\"\\n * @noAutocomplete\\n */","meta":{"range":[37708,37965],"filename":"pattern.mjs","lineno":1254,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028341","name":"exports.pure","type":"FunctionDeclaration","paramnames":["value"]}},"description":"<p>A discrete value that repeats once per cycle.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["pure('e4') // \\"e4\\""],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"pure","longname":"pure","kind":"function","scope":"global"},{"comment":"/** Takes a list of patterns, and returns a pattern of lists.\\n */","meta":{"range":[38970,39150],"filename":"pattern.mjs","lineno":1292,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028431","name":"exports.sequenceP","type":"FunctionDeclaration","paramnames":["pats"]}},"description":"<p>Takes a list of patterns, and returns a pattern of lists.</p>","name":"sequenceP","longname":"sequenceP","kind":"function","scope":"global"},{"comment":"/**\\n * The given items are played at the same time at the same length.\\n *\\n * @return {Pattern}\\n * @synonyms polyrhythm, pr\\n * @example\\n * stack(\\"g3\\", \\"b3\\", [\\"e4\\", \\"d4\\"]).note()\\n * // \\"g3,b3,[e4 d4]\\".note()\\n *\\n * @example\\n * // As a chained function:\\n * s(\\"hh*4\\").stack(\\n *   note(\\"c4(5,8)\\")\\n * )\\n */","meta":{"range":[39452,39830],"filename":"pattern.mjs","lineno":1315,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028471","name":"exports.stack","type":"FunctionDeclaration","paramnames":["pats"]}},"description":"<p>The given items are played at the same time at the same length.</p>","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"polyrhythm, pr","synonyms":["polyrhythm","pr"],"examples":["stack(\\"g3\\", \\"b3\\", [\\"e4\\", \\"d4\\"]).note()\\n// \\"g3,b3,[e4 d4]\\".note()","// As a chained function:\\ns(\\"hh*4\\").stack(\\n  note(\\"c4(5,8)\\")\\n)"],"name":"stack","longname":"stack","kind":"function","scope":"global"},{"comment":"/**\\n * Concatenation: combines a list of patterns, switching between them successively, one per cycle.\\n *\\n * @return {Pattern}\\n * @synonyms cat\\n * @example\\n * slowcat(\\"e5\\", \\"b4\\", [\\"d5\\", \\"c5\\"])\\n *\\n */","meta":{"range":[41498,42548],"filename":"pattern.mjs","lineno":1393,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028835","name":"exports.slowcat","type":"FunctionDeclaration","paramnames":["pats"]}},"description":"<p>Concatenation: combines a list of patterns, switching between them successively, one per cycle.</p>","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"cat","synonyms":["cat"],"examples":["slowcat(\\"e5\\", \\"b4\\", [\\"d5\\", \\"c5\\"])"],"name":"slowcat","longname":"slowcat","kind":"function","scope":"global"},{"comment":"/** Concatenation: combines a list of patterns, switching between them successively, one per cycle. Unlike slowcat, this version will skip cycles.\\n * @param {...any} items - The items to concatenate\\n * @return {Pattern}\\n */","meta":{"range":[42774,43147],"filename":"pattern.mjs","lineno":1423,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100028995","name":"exports.slowcatPrime","type":"FunctionDeclaration","paramnames":["pats"]}},"description":"<p>Concatenation: combines a list of patterns, switching between them successively, one per cycle. Unlike slowcat, this version will skip cycles.</p>","params":[{"type":{"names":["any"]},"variable":true,"description":"<p>The items to concatenate</p>","name":"items"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"slowcatPrime","longname":"slowcatPrime","kind":"function","scope":"global"},{"comment":"/** The given items are con**cat**enated, where each one takes one cycle.\\n *\\n * @param {...any} items - The items to concatenate\\n * @synonyms slowcat\\n * @return {Pattern}\\n * @example\\n * cat(\\"e5\\", \\"b4\\", [\\"d5\\", \\"c5\\"]).note()\\n * // \\"<e5 b4 [d5 c5]>\\".note()\\n *\\n * @example\\n * // As a chained function:\\n * s(\\"hh*4\\").cat(\\n *    note(\\"c4(5,8)\\")\\n * )\\n */","meta":{"range":[43496,43555],"filename":"pattern.mjs","lineno":1448,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100029048","name":"exports.cat","type":"FunctionDeclaration","paramnames":["pats"]}},"description":"<p>The given items are con<strong>cat</strong>enated, where each one takes one cycle.</p>","params":[{"type":{"names":["any"]},"variable":true,"description":"<p>The items to concatenate</p>","name":"items"}],"synonyms_text":"slowcat","synonyms":["slowcat"],"returns":[{"type":{"names":["Pattern"]}}],"examples":["cat(\\"e5\\", \\"b4\\", [\\"d5\\", \\"c5\\"]).note()\\n// \\"<e5 b4 [d5 c5]>\\".note()","// As a chained function:\\ns(\\"hh*4\\").cat(\\n   note(\\"c4(5,8)\\")\\n)"],"name":"cat","longname":"cat","kind":"function","scope":"global"},{"comment":"/**\\n * Allows to arrange multiple patterns together over multiple cycles.\\n * Takes a variable number of arrays with two elements specifying the number of cycles and the pattern to use.\\n *\\n * @return {Pattern}\\n * @example\\n * arrange(\\n *   [4, \\"<c a f e>(3,8)\\"],\\n *   [2, \\"<g a>(5,8)\\"]\\n * ).note()\\n */","meta":{"range":[43857,44091],"filename":"pattern.mjs","lineno":1463,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100029059","name":"exports.arrange","type":"FunctionDeclaration","paramnames":["sections"]}},"description":"<p>Allows to arrange multiple patterns together over multiple cycles.\\nTakes a variable number of arrays with two elements specifying the number of cycles and the pattern to use.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["arrange(\\n  [4, \\"<c a f e>(3,8)\\"],\\n  [2, \\"<g a>(5,8)\\"]\\n).note()"],"name":"arrange","longname":"arrange","kind":"function","scope":"global"},{"comment":"/**\\n * Similarly to \`arrange\`, allows you to arrange multiple patterns together over multiple cycles.\\n * Unlike \`arrange\`, you specify a start and stop time for each pattern rather than duration, which\\n * means that patterns can overlap.\\n * @return {Pattern}\\n * @example\\nseqPLoop([0, 2, \\"bd(3,8)\\"],\\n         [1, 3, \\"cp(3,8)\\"]\\n        )\\n  .sound()\\n */","meta":{"range":[44444,44868],"filename":"pattern.mjs","lineno":1480,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100029104","name":"exports.seqPLoop","type":"FunctionDeclaration","paramnames":["parts"]}},"description":"<p>Similarly to <code>arrange</code>, allows you to arrange multiple patterns together over multiple cycles.\\nUnlike <code>arrange</code>, you specify a start and stop time for each pattern rather than duration, which\\nmeans that patterns can overlap.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["seqPLoop([0, 2, \\"bd(3,8)\\"],\\n         [1, 3, \\"cp(3,8)\\"]\\n        )\\n  .sound()"],"name":"seqPLoop","longname":"seqPLoop","kind":"function","scope":"global"},{"comment":"/** See \`fastcat\` */","meta":{"range":[45171,45235],"filename":"pattern.mjs","lineno":1512,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100029247","name":"exports.sequence","type":"FunctionDeclaration","paramnames":["pats"]}},"description":"<p>See <code>fastcat</code></p>","name":"sequence","longname":"sequence","kind":"function","scope":"global"},{"comment":"/** Like **cat**, but the items are crammed into one cycle.\\n * @synonyms sequence, fastcat\\n * @example\\n * seq(\\"e5\\", \\"b4\\", [\\"d5\\", \\"c5\\"]).note()\\n * // \\"e5 b4 [d5 c5]\\".note()\\n *\\n * @example\\n * // As a chained function:\\n * s(\\"hh*4\\").seq(\\n *   note(\\"c4(5,8)\\")\\n * )\\n */","meta":{"range":[45502,45561],"filename":"pattern.mjs","lineno":1529,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100029258","name":"exports.seq","type":"FunctionDeclaration","paramnames":["pats"]}},"description":"<p>Like <strong>cat</strong>, but the items are crammed into one cycle.</p>","synonyms_text":"sequence, fastcat","synonyms":["sequence","fastcat"],"examples":["seq(\\"e5\\", \\"b4\\", [\\"d5\\", \\"c5\\"]).note()\\n// \\"e5 b4 [d5 c5]\\".note()","// As a chained function:\\ns(\\"hh*4\\").seq(\\n  note(\\"c4(5,8)\\")\\n)"],"name":"seq","longname":"seq","kind":"function","scope":"global"},{"comment":"/**\\n * Registers a new pattern method. The method is added to the Pattern class + the standalone function is returned from register.\\n *\\n * @param {string | string[]} name name of the function, or an array of names to be used as synonyms\\n * @param {function} func function with 1 or more params, where last is the current pattern\\n * @noAutocomplete\\n *\\n */","meta":{"range":[48191,50867],"filename":"pattern.mjs","lineno":1593,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100029890","name":"exports.register","type":"FunctionDeclaration","paramnames":["name","func","patternify","preserveSteps","join"]}},"description":"<p>Registers a new pattern method. The method is added to the Pattern class + the standalone function is returned from register.</p>","params":[{"type":{"names":["string","Array.<string>"]},"description":"<p>name of the function, or an array of names to be used as synonyms</p>","name":"name"},{"type":{"names":["function"]},"description":"<p>function with 1 or more params, where last is the current pattern</p>","name":"func"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"register","longname":"register","kind":"function","scope":"global"},{"comment":"/**\\n * Assumes a numerical pattern. Returns a new pattern with all values rounded\\n * to the nearest integer.\\n * @name round\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * n(\\"0.5 1.5 2.5\\".round()).scale(\\"C:major\\")\\n */","meta":{"filename":"pattern.mjs","lineno":1686,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Assumes a numerical pattern. Returns a new pattern with all values rounded\\nto the nearest integer.</p>","name":"round","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["n(\\"0.5 1.5 2.5\\".round()).scale(\\"C:major\\")"],"scope":"static","longname":"Pattern.round","kind":"member"},{"comment":"/**\\n * Assumes a numerical pattern. Returns a new pattern with all values set to\\n * their mathematical floor. E.g. \`3.7\` replaced with to \`3\`, and \`-4.2\`\\n * replaced with \`-5\`.\\n * @name floor\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * note(\\"42 42.1 42.5 43\\".floor())\\n */","meta":{"filename":"pattern.mjs","lineno":1699,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Assumes a numerical pattern. Returns a new pattern with all values set to\\ntheir mathematical floor. E.g. <code>3.7</code> replaced with to <code>3</code>, and <code>-4.2</code>\\nreplaced with <code>-5</code>.</p>","name":"floor","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["note(\\"42 42.1 42.5 43\\".floor())"],"scope":"static","longname":"Pattern.floor","kind":"member"},{"comment":"/**\\n * Assumes a numerical pattern. Returns a new pattern with all values set to\\n * their mathematical ceiling. E.g. \`3.2\` replaced with \`4\`, and \`-4.2\`\\n * replaced with \`-4\`.\\n * @name ceil\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * note(\\"42 42.1 42.5 43\\".ceil())\\n */","meta":{"filename":"pattern.mjs","lineno":1713,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Assumes a numerical pattern. Returns a new pattern with all values set to\\ntheir mathematical ceiling. E.g. <code>3.2</code> replaced with <code>4</code>, and <code>-4.2</code>\\nreplaced with <code>-4</code>.</p>","name":"ceil","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["note(\\"42 42.1 42.5 43\\".ceil())"],"scope":"static","longname":"Pattern.ceil","kind":"member"},{"comment":"/**\\n * Assumes a numerical pattern, containing unipolar values in the range 0 ..\\n * 1. Returns a new pattern with values scaled to the bipolar range -1 .. 1\\n * @returns Pattern\\n * @noAutocomplete\\n */","meta":{"range":[52512,52616],"filename":"pattern.mjs","lineno":1732,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100030406","name":"exports.toBipolar","type":"VariableDeclaration"}},"description":"<p>Assumes a numerical pattern, containing unipolar values in the range 0 ..</p>\\n<ol>\\n<li>Returns a new pattern with values scaled to the bipolar range -1 .. 1</li>\\n</ol>","returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"toBipolar","longname":"toBipolar","kind":"constant","scope":"global"},{"comment":"/**\\n * Assumes a numerical pattern, containing bipolar values in the range -1 .. 1\\n * Returns a new pattern with values scaled to the unipolar range 0 .. 1\\n * @returns Pattern\\n * @noAutocomplete\\n */","meta":{"range":[52817,52927],"filename":"pattern.mjs","lineno":1742,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100030428","name":"exports.fromBipolar","type":"VariableDeclaration"}},"description":"<p>Assumes a numerical pattern, containing bipolar values in the range -1 .. 1\\nReturns a new pattern with values scaled to the unipolar range 0 .. 1</p>","returns":[{"description":"<p>Pattern</p>"}],"tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"fromBipolar","longname":"fromBipolar","kind":"constant","scope":"global"},{"comment":"/**\\n * Assumes a numerical pattern, containing unipolar values in the range 0 .. 1.\\n * Returns a new pattern with values scaled to the given min/max range.\\n * Most useful in combination with continuous patterns.\\n * @name range\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"[bd sd]*2,hh*8\\")\\n * .cutoff(sine.range(500,4000))\\n */","meta":{"filename":"pattern.mjs","lineno":1746,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Assumes a numerical pattern, containing unipolar values in the range 0 .. 1.\\nReturns a new pattern with values scaled to the given min/max range.\\nMost useful in combination with continuous patterns.</p>","name":"range","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"[bd sd]*2,hh*8\\")\\n.cutoff(sine.range(500,4000))"],"scope":"static","longname":"Pattern.range","kind":"member"},{"comment":"/**\\n * Assumes a numerical pattern, containing unipolar values in the range 0 .. 1\\n * Returns a new pattern with values scaled to the given min/max range,\\n * following an exponential curve.\\n * @name rangex\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"[bd sd]*2,hh*8\\")\\n * .cutoff(sine.rangex(500,4000))\\n */","meta":{"filename":"pattern.mjs","lineno":1761,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Assumes a numerical pattern, containing unipolar values in the range 0 .. 1\\nReturns a new pattern with values scaled to the given min/max range,\\nfollowing an exponential curve.</p>","name":"rangex","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"[bd sd]*2,hh*8\\")\\n.cutoff(sine.rangex(500,4000))"],"scope":"static","longname":"Pattern.rangex","kind":"member"},{"comment":"/**\\n * Assumes a numerical pattern, containing bipolar values in the range -1 .. 1\\n * Returns a new pattern with values scaled to the given min/max range.\\n * @name range2\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"[bd sd]*2,hh*8\\")\\n * .cutoff(sine2.range2(500,4000))\\n */","meta":{"filename":"pattern.mjs","lineno":1776,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Assumes a numerical pattern, containing bipolar values in the range -1 .. 1\\nReturns a new pattern with values scaled to the given min/max range.</p>","name":"range2","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"[bd sd]*2,hh*8\\")\\n.cutoff(sine2.range2(500,4000))"],"scope":"static","longname":"Pattern.range2","kind":"member"},{"comment":"/**\\n * Allows dividing numbers via list notation using \\":\\".\\n * Returns a new pattern with just numbers.\\n * @name ratio\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * ratio(\\"1, 5:4, 3:2\\").mul(110)\\n * .freq().s(\\"piano\\")\\n */","meta":{"filename":"pattern.mjs","lineno":1790,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Allows dividing numbers via list notation using &quot;:&quot;.\\nReturns a new pattern with just numbers.</p>","name":"ratio","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["ratio(\\"1, 5:4, 3:2\\").mul(110)\\n.freq().s(\\"piano\\")"],"scope":"static","longname":"Pattern.ratio","kind":"member"},{"comment":"/** Compress each cycle into the given timespan, leaving a gap\\n * @example\\n * cat(\\n *   s(\\"bd sd\\").compress(.25,.75),\\n *   s(\\"~ bd sd ~\\")\\n * )\\n */","meta":{"range":[54920,55173],"filename":"pattern.mjs","lineno":1819,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100030573","name":"exports.compress","type":"VariableDeclaration"}},"description":"<p>Compress each cycle into the given timespan, leaving a gap</p>","examples":["cat(\\n  s(\\"bd sd\\").compress(.25,.75),\\n  s(\\"~ bd sd ~\\")\\n)"],"name":"compress","longname":"compress","kind":"constant","scope":"global"},{"comment":"/**\\n * speeds up a pattern like fast, but rather than it playing multiple times as fast would it instead leaves a gap in the remaining space of the cycle. For example, the following will play the sound pattern \\"bd sn\\" only once but compressed into the first half of the cycle, i.e. twice as fast.\\n * @name fastGap\\n * @synonyms fastgap\\n * @example\\n * s(\\"bd sd\\").fastGap(2)\\n */","meta":{"filename":"pattern.mjs","lineno":1832,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>speeds up a pattern like fast, but rather than it playing multiple times as fast would it instead leaves a gap in the remaining space of the cycle. For example, the following will play the sound pattern &quot;bd sn&quot; only once but compressed into the first half of the cycle, i.e. twice as fast.</p>","name":"fastGap","synonyms_text":"fastgap","synonyms":["fastgap"],"examples":["s(\\"bd sd\\").fastGap(2)"],"longname":"fastGap","kind":"member","scope":"global"},{"comment":"/**\\n * Similar to \`compress\`, but doesn't leave gaps, and the 'focus' can be bigger than a cycle\\n * @example\\n * s(\\"bd hh sd hh\\").focus(1/4, 3/4)\\n */","meta":{"range":[57064,57254],"filename":"pattern.mjs","lineno":1874,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100030915","name":"exports.focus","type":"VariableDeclaration"}},"description":"<p>Similar to <code>compress</code>, but doesn't leave gaps, and the 'focus' can be bigger than a cycle</p>","examples":["s(\\"bd hh sd hh\\").focus(1/4, 3/4)"],"name":"focus","longname":"focus","kind":"constant","scope":"global"},{"comment":"/** The ply function repeats each event the given number of times.\\n * @example\\n * s(\\"bd ~ sd cp\\").ply(\\"<1 2 3>\\")\\n */","meta":{"range":[57521,57752],"filename":"pattern.mjs","lineno":1891,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100030994","name":"exports.ply","type":"VariableDeclaration"}},"description":"<p>The ply function repeats each event the given number of times.</p>","examples":["s(\\"bd ~ sd cp\\").ply(\\"<1 2 3>\\")"],"name":"ply","longname":"ply","kind":"constant","scope":"global"},{"comment":"/**\\n * Speed up a pattern by the given factor. Used by \\"*\\" in mini notation.\\n *\\n * @name fast\\n * @synonyms density\\n * @memberof Pattern\\n * @param {number | Pattern} factor speed up factor\\n * @returns Pattern\\n * @example\\n * s(\\"bd hh sd hh\\").fast(2) // s(\\"[bd hh sd hh]*2\\")\\n */","meta":{"filename":"pattern.mjs","lineno":1899,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Speed up a pattern by the given factor. Used by &quot;*&quot; in mini notation.</p>","name":"fast","synonyms_text":"density","synonyms":["density"],"memberof":"Pattern","params":[{"type":{"names":["number","Pattern"]},"description":"<p>speed up factor</p>","name":"factor"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"bd hh sd hh\\").fast(2) // s(\\"[bd hh sd hh]*2\\")"],"scope":"static","longname":"Pattern.fast","kind":"member"},{"comment":"/**\\n * Both speeds up the pattern (like 'fast') and the sample playback (like 'speed').\\n * @example\\n * s(\\"bd sd:2\\").hurry(\\"<1 2 4 3>\\").slow(1.5)\\n */","meta":{"range":[58520,58629],"filename":"pattern.mjs","lineno":1929,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031107","name":"exports.hurry","type":"VariableDeclaration"}},"description":"<p>Both speeds up the pattern (like 'fast') and the sample playback (like 'speed').</p>","examples":["s(\\"bd sd:2\\").hurry(\\"<1 2 4 3>\\").slow(1.5)"],"name":"hurry","longname":"hurry","kind":"constant","scope":"global"},{"comment":"/**\\n * Slow down a pattern over the given number of cycles. Like the \\"/\\" operator in mini notation.\\n *\\n * @name slow\\n * @synonyms sparsity\\n * @memberof Pattern\\n * @param {number | Pattern} factor slow down factor\\n * @returns Pattern\\n * @example\\n * s(\\"bd hh sd hh\\").slow(2) // s(\\"[bd hh sd hh]/2\\")\\n */","meta":{"filename":"pattern.mjs","lineno":1933,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Slow down a pattern over the given number of cycles. Like the &quot;/&quot; operator in mini notation.</p>","name":"slow","synonyms_text":"sparsity","synonyms":["sparsity"],"memberof":"Pattern","params":[{"type":{"names":["number","Pattern"]},"description":"<p>slow down factor</p>","name":"factor"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"bd hh sd hh\\").slow(2) // s(\\"[bd hh sd hh]/2\\")"],"scope":"static","longname":"Pattern.slow","kind":"member"},{"comment":"/**\\n * Carries out an operation 'inside' a cycle.\\n * @example\\n * \\"0 1 2 3 4 3 2 1\\".inside(4, rev).scale('C major').note()\\n * // \\"0 1 2 3 4 3 2 1\\".slow(4).rev().fast(4).scale('C major').note()\\n */","meta":{"range":[59314,59431],"filename":"pattern.mjs","lineno":1957,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031168","name":"exports.inside","type":"VariableDeclaration"}},"description":"<p>Carries out an operation 'inside' a cycle.</p>","examples":["\\"0 1 2 3 4 3 2 1\\".inside(4, rev).scale('C major').note()\\n// \\"0 1 2 3 4 3 2 1\\".slow(4).rev().fast(4).scale('C major').note()"],"name":"inside","longname":"inside","kind":"constant","scope":"global"},{"comment":"/**\\n * Carries out an operation 'outside' a cycle.\\n * @example\\n * \\"<[0 1] 2 [3 4] 5>\\".outside(4, rev).scale('C major').note()\\n * // \\"<[0 1] 2 [3 4] 5>\\".fast(4).rev().slow(4).scale('C major').note()\\n */","meta":{"range":[59635,59754],"filename":"pattern.mjs","lineno":1967,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031192","name":"exports.outside","type":"VariableDeclaration"}},"description":"<p>Carries out an operation 'outside' a cycle.</p>","examples":["\\"<[0 1] 2 [3 4] 5>\\".outside(4, rev).scale('C major').note()\\n// \\"<[0 1] 2 [3 4] 5>\\".fast(4).rev().slow(4).scale('C major').note()"],"name":"outside","longname":"outside","kind":"constant","scope":"global"},{"comment":"/**\\n * Applies the given function every n cycles, starting from the last cycle.\\n * @name lastOf\\n * @memberof Pattern\\n * @param {number} n how many cycles\\n * @param {function} func function to apply\\n * @returns Pattern\\n * @example\\n * note(\\"c3 d3 e3 g3\\").lastOf(4, x=>x.rev())\\n */","meta":{"filename":"pattern.mjs","lineno":1971,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Applies the given function every n cycles, starting from the last cycle.</p>","name":"lastOf","memberof":"Pattern","params":[{"type":{"names":["number"]},"description":"<p>how many cycles</p>","name":"n"},{"type":{"names":["function"]},"description":"<p>function to apply</p>","name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["note(\\"c3 d3 e3 g3\\").lastOf(4, x=>x.rev())"],"scope":"static","longname":"Pattern.lastOf","kind":"member"},{"comment":"/**\\n * Applies the given function every n cycles, starting from the first cycle.\\n * @name firstOf\\n * @memberof Pattern\\n * @param {number} n how many cycles\\n * @param {function} func function to apply\\n * @returns Pattern\\n * @example\\n * note(\\"c3 d3 e3 g3\\").firstOf(4, x=>x.rev())\\n */","meta":{"filename":"pattern.mjs","lineno":1987,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Applies the given function every n cycles, starting from the first cycle.</p>","name":"firstOf","memberof":"Pattern","params":[{"type":{"names":["number"]},"description":"<p>how many cycles</p>","name":"n"},{"type":{"names":["function"]},"description":"<p>function to apply</p>","name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["note(\\"c3 d3 e3 g3\\").firstOf(4, x=>x.rev())"],"scope":"static","longname":"Pattern.firstOf","kind":"member"},{"comment":"/**\\n * An alias for \`firstOf\`\\n * @name every\\n * @memberof Pattern\\n * @param {number} n how many cycles\\n * @param {function} func function to apply\\n * @returns Pattern\\n * @example\\n * note(\\"c3 d3 e3 g3\\").every(4, x=>x.rev())\\n */","meta":{"filename":"pattern.mjs","lineno":1998,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>An alias for <code>firstOf</code></p>","name":"every","memberof":"Pattern","params":[{"type":{"names":["number"]},"description":"<p>how many cycles</p>","name":"n"},{"type":{"names":["function"]},"description":"<p>function to apply</p>","name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["note(\\"c3 d3 e3 g3\\").every(4, x=>x.rev())"],"scope":"static","longname":"Pattern.every","kind":"member"},{"comment":"/**\\n * Like layer, but with a single function:\\n * @name apply\\n * @memberof Pattern\\n * @example\\n * \\"<c3 eb3 g3>\\".scale('C minor').apply(scaleTranspose(\\"0,2,4\\")).note()\\n */","meta":{"filename":"pattern.mjs","lineno":2014,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like layer, but with a single function:</p>","name":"apply","memberof":"Pattern","examples":["\\"<c3 eb3 g3>\\".scale('C minor').apply(scaleTranspose(\\"0,2,4\\")).note()"],"scope":"static","longname":"Pattern.apply","kind":"member"},{"comment":"/**\\n * Plays the pattern at the given cycles per minute.\\n * @deprecated\\n * @example\\n * s(\\"<bd sd>,hh*2\\").cpm(90) // = 90 bpm\\n */","meta":{"range":[61398,61492],"filename":"pattern.mjs","lineno":2033,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031311","name":"exports.cpm","type":"VariableDeclaration"}},"description":"<p>Plays the pattern at the given cycles per minute.</p>","deprecated":true,"examples":["s(\\"<bd sd>,hh*2\\").cpm(90) // = 90 bpm"],"name":"cpm","longname":"cpm","kind":"constant","scope":"global"},{"comment":"/**\\n * Nudge a pattern to start earlier in time. Equivalent of Tidal's <~ operator\\n *\\n * @name early\\n * @memberof Pattern\\n * @param {number | Pattern} cycles number of cycles to nudge left\\n * @returns Pattern\\n * @example\\n * \\"bd ~\\".stack(\\"hh ~\\".early(.1)).s()\\n */","meta":{"filename":"pattern.mjs","lineno":2037,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Nudge a pattern to start earlier in time. Equivalent of Tidal's &lt;~ operator</p>","name":"early","memberof":"Pattern","params":[{"type":{"names":["number","Pattern"]},"description":"<p>number of cycles to nudge left</p>","name":"cycles"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"bd ~\\".stack(\\"hh ~\\".early(.1)).s()"],"scope":"static","longname":"Pattern.early","kind":"member"},{"comment":"/**\\n * Nudge a pattern to start later in time. Equivalent of Tidal's ~> operator\\n *\\n * @name late\\n * @memberof Pattern\\n * @param {number | Pattern} cycles number of cycles to nudge right\\n * @returns Pattern\\n * @example\\n * \\"bd ~\\".stack(\\"hh ~\\".late(.1)).s()\\n */","meta":{"filename":"pattern.mjs","lineno":2057,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Nudge a pattern to start later in time. Equivalent of Tidal's ~&gt; operator</p>","name":"late","memberof":"Pattern","params":[{"type":{"names":["number","Pattern"]},"description":"<p>number of cycles to nudge right</p>","name":"cycles"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"bd ~\\".stack(\\"hh ~\\".late(.1)).s()"],"scope":"static","longname":"Pattern.late","kind":"member"},{"comment":"/**\\n * Plays a portion of a pattern, specified by the beginning and end of a time span. The new resulting pattern is played over the time period of the original pattern:\\n *\\n * @example\\n * s(\\"bd*2 hh*3 [sd bd]*2 perc\\").zoom(0.25, 0.75)\\n * // s(\\"hh*3 [sd bd]*2\\") // equivalent\\n */","meta":{"range":[62678,63097],"filename":"pattern.mjs","lineno":2084,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031404","name":"exports.zoom","type":"VariableDeclaration"}},"description":"<p>Plays a portion of a pattern, specified by the beginning and end of a time span. The new resulting pattern is played over the time period of the original pattern:</p>","examples":["s(\\"bd*2 hh*3 [sd bd]*2 perc\\").zoom(0.25, 0.75)\\n// s(\\"hh*3 [sd bd]*2\\") // equivalent"],"name":"zoom","longname":"zoom","kind":"constant","scope":"global"},{"comment":"/**\\n * Splits a pattern into the given number of slices, and plays them according to a pattern of slice numbers.\\n * Similar to \`slice\`, but slices up patterns rather than sound samples.\\n * @param {number} number of slices\\n * @param {number} slices to play\\n * @example\\n * note(\\"0 1 2 3 4 5 6 7\\".scale('c:mixolydian'))\\n *.bite(4, \\"3 2 1 0\\")\\n * @example\\n * sound(\\"bd - bd bd*2, - sd:6 - sd:5 sd:1 - [- sd:2] -, hh [- cp:7]\\")\\n  .bank(\\"RolandTR909\\").speed(1.2)\\n  .bite(4, \\"0 0 [1 2] <3 2> 0 0 [2 1] 3\\")\\n */","meta":{"range":[63730,64028],"filename":"pattern.mjs","lineno":2116,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031529","name":"exports.bite","type":"VariableDeclaration"}},"description":"<p>Splits a pattern into the given number of slices, and plays them according to a pattern of slice numbers.\\nSimilar to <code>slice</code>, but slices up patterns rather than sound samples.</p>","params":[{"type":{"names":["number"]},"description":"<p>of slices</p>","name":"number"},{"type":{"names":["number"]},"description":"<p>to play</p>","name":"slices"}],"examples":["note(\\"0 1 2 3 4 5 6 7\\".scale('c:mixolydian'))\\n.bite(4, \\"3 2 1 0\\")","sound(\\"bd - bd bd*2, - sd:6 - sd:5 sd:1 - [- sd:2] -, hh [- cp:7]\\")\\n  .bank(\\"RolandTR909\\").speed(1.2)\\n  .bite(4, \\"0 0 [1 2] <3 2> 0 0 [2 1] 3\\")"],"name":"bite","longname":"bite","kind":"constant","scope":"global"},{"comment":"/**\\n * Selects the given fraction of the pattern and repeats that part to fill the remainder of the cycle.\\n * @param {number} fraction fraction to select\\n * @example\\n * s(\\"lt ht mt cp, [hh oh]*2\\").linger(\\"<1 .5 .25 .125>\\")\\n */","meta":{"range":[64257,64499],"filename":"pattern.mjs","lineno":2137,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031594","name":"exports.linger","type":"VariableDeclaration"}},"description":"<p>Selects the given fraction of the pattern and repeats that part to fill the remainder of the cycle.</p>","params":[{"type":{"names":["number"]},"description":"<p>fraction to select</p>","name":"fraction"}],"examples":["s(\\"lt ht mt cp, [hh oh]*2\\").linger(\\"<1 .5 .25 .125>\\")"],"name":"linger","longname":"linger","kind":"constant","scope":"global"},{"comment":"/**\\n * Samples the pattern at a rate of n events per cycle. Useful for turning a continuous pattern into a discrete one.\\n * @name segment\\n * @synonyms seg\\n * @param {number} segments number of segments per cycle\\n * @example\\n * note(saw.range(40,52).segment(24))\\n */","meta":{"filename":"pattern.mjs","lineno":2151,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Samples the pattern at a rate of n events per cycle. Useful for turning a continuous pattern into a discrete one.</p>","name":"segment","synonyms_text":"seg","synonyms":["seg"],"params":[{"type":{"names":["number"]},"description":"<p>number of segments per cycle</p>","name":"segments"}],"examples":["note(saw.range(40,52).segment(24))"],"longname":"segment","kind":"member","scope":"global"},{"comment":"/**\\n * The function \`swingBy x n\` breaks each cycle into \`n\` slices, and then delays events in the second half of each slice by the amount \`x\`, which is relative to the size of the (half) slice. So if \`x\` is 0 it does nothing, \`0.5\` delays for half the note duration, and 1 will wrap around to doing nothing again. The end result is a shuffle or swing-like rhythm\\n * @param {number} subdivision\\n * @param {number} offset\\n * @example\\n * s(\\"hh*8\\").swingBy(1/3, 4)\\n */","meta":{"range":[65382,65484],"filename":"pattern.mjs","lineno":2170,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031678","name":"exports.swingBy","type":"VariableDeclaration"}},"description":"<p>The function <code>swingBy x n</code> breaks each cycle into <code>n</code> slices, and then delays events in the second half of each slice by the amount <code>x</code>, which is relative to the size of the (half) slice. So if <code>x</code> is 0 it does nothing, <code>0.5</code> delays for half the note duration, and 1 will wrap around to doing nothing again. The end result is a shuffle or swing-like rhythm</p>","params":[{"type":{"names":["number"]},"name":"subdivision"},{"type":{"names":["number"]},"name":"offset"}],"examples":["s(\\"hh*8\\").swingBy(1/3, 4)"],"name":"swingBy","longname":"swingBy","kind":"constant","scope":"global"},{"comment":"/**\\n * Shorthand for swingBy with 1/3:\\n * @param {number} subdivision\\n * @example\\n * s(\\"hh*8\\").swing(4)\\n * // s(\\"hh*8\\").swingBy(1/3, 4)\\n */","meta":{"range":[65626,65700],"filename":"pattern.mjs","lineno":2179,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031702","name":"exports.swing","type":"VariableDeclaration"}},"description":"<p>Shorthand for swingBy with 1/3:</p>","params":[{"type":{"names":["number"]},"name":"subdivision"}],"examples":["s(\\"hh*8\\").swing(4)\\n// s(\\"hh*8\\").swingBy(1/3, 4)"],"name":"swing","longname":"swing","kind":"constant","scope":"global"},{"comment":"/**\\n * Swaps 1s and 0s in a binary pattern.\\n * @name invert\\n * @synonyms inv\\n * @example\\n * s(\\"bd\\").struct(\\"1 0 0 1 0 0 1 0\\".lastOf(4, invert))\\n */","meta":{"filename":"pattern.mjs","lineno":2181,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Swaps 1s and 0s in a binary pattern.</p>","name":"invert","synonyms_text":"inv","synonyms":["inv"],"examples":["s(\\"bd\\").struct(\\"1 0 0 1 0 0 1 0\\".lastOf(4, invert))"],"longname":"invert","kind":"member","scope":"global"},{"comment":"/**\\n * Applies the given function whenever the given pattern is in a true state.\\n * @name when\\n * @memberof Pattern\\n * @param {Pattern} binary_pat\\n * @param {function} func\\n * @returns Pattern\\n * @example\\n * \\"c3 eb3 g3\\".when(\\"<0 1>/2\\", x=>x.sub(\\"5\\")).note()\\n */","meta":{"filename":"pattern.mjs","lineno":2198,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Applies the given function whenever the given pattern is in a true state.</p>","name":"when","memberof":"Pattern","params":[{"type":{"names":["Pattern"]},"name":"binary_pat"},{"type":{"names":["function"]},"name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"c3 eb3 g3\\".when(\\"<0 1>/2\\", x=>x.sub(\\"5\\")).note()"],"scope":"static","longname":"Pattern.when","kind":"member"},{"comment":"/**\\n * Superimposes the function result on top of the original pattern, delayed by the given time.\\n * @name off\\n * @memberof Pattern\\n * @param {Pattern | number} time offset time\\n * @param {function} func function to apply\\n * @returns Pattern\\n * @example\\n * \\"c3 eb3 g3\\".off(1/8, x=>x.add(7)).note()\\n */","meta":{"filename":"pattern.mjs","lineno":2212,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Superimposes the function result on top of the original pattern, delayed by the given time.</p>","name":"off","memberof":"Pattern","params":[{"type":{"names":["Pattern","number"]},"description":"<p>offset time</p>","name":"time"},{"type":{"names":["function"]},"description":"<p>function to apply</p>","name":"func"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"c3 eb3 g3\\".off(1/8, x=>x.add(7)).note()"],"scope":"static","longname":"Pattern.off","kind":"member"},{"comment":"/**\\n * Returns a new pattern where every other cycle is played once, twice as\\n * fast, and offset in time by one quarter of a cycle. Creates a kind of\\n * breakbeat feel.\\n * @returns Pattern\\n */","meta":{"range":[67010,67148],"filename":"pattern.mjs","lineno":2232,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031789","name":"exports.brak","type":"VariableDeclaration"}},"description":"<p>Returns a new pattern where every other cycle is played once, twice as\\nfast, and offset in time by one quarter of a cycle. Creates a kind of\\nbreakbeat feel.</p>","returns":[{"description":"<p>Pattern</p>"}],"name":"brak","longname":"brak","kind":"constant","scope":"global"},{"comment":"/**\\n * Reverse all haps in a pattern\\n *\\n * @name rev\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * note(\\"c d e g\\").rev()\\n */","meta":{"filename":"pattern.mjs","lineno":2236,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Reverse all haps in a pattern</p>","name":"rev","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["note(\\"c d e g\\").rev()"],"scope":"static","longname":"Pattern.rev","kind":"member"},{"comment":"/** Like press, but allows you to specify the amount by which each\\n * event is shifted. pressBy(0.5) is the same as press, while\\n * pressBy(1/3) shifts each event by a third of its timespan.\\n * @example\\n * stack(s(\\"hh*4\\"),\\n *       s(\\"bd mt sd ht\\").pressBy(\\"<0 0.5 0.25>\\")\\n *      ).slow(2)\\n */","meta":{"range":[68356,68486],"filename":"pattern.mjs","lineno":2277,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031939","name":"exports.pressBy","type":"VariableDeclaration"}},"description":"<p>Like press, but allows you to specify the amount by which each\\nevent is shifted. pressBy(0.5) is the same as press, while\\npressBy(1/3) shifts each event by a third of its timespan.</p>","examples":["stack(s(\\"hh*4\\"),\\n      s(\\"bd mt sd ht\\").pressBy(\\"<0 0.5 0.25>\\")\\n     ).slow(2)"],"name":"pressBy","longname":"pressBy","kind":"constant","scope":"global"},{"comment":"/**\\n * Syncopates a rhythm, by shifting each event halfway into its timespan.\\n * @example\\n * stack(s(\\"hh*4\\"),\\n *       s(\\"bd mt sd ht\\").every(4, press)\\n *      ).slow(2)\\n */","meta":{"range":[68662,68749],"filename":"pattern.mjs","lineno":2288,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031968","name":"exports.press","type":"VariableDeclaration"}},"description":"<p>Syncopates a rhythm, by shifting each event halfway into its timespan.</p>","examples":["stack(s(\\"hh*4\\"),\\n      s(\\"bd mt sd ht\\").every(4, press)\\n     ).slow(2)"],"name":"press","longname":"press","kind":"constant","scope":"global"},{"comment":"/**\\n * Silences a pattern.\\n * @example\\n * stack(\\n *   s(\\"bd\\").hush(),\\n *   s(\\"hh*3\\")\\n * )\\n */","meta":{"range":[68845,68903],"filename":"pattern.mjs","lineno":2300,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031985","name":"Pattern.prototype.hush","type":"FunctionExpression","paramnames":[]}},"description":"<p>Silences a pattern.</p>","examples":["stack(\\n  s(\\"bd\\").hush(),\\n  s(\\"hh*3\\")\\n)"],"name":"hush","longname":"Pattern#hush","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n * Applies \`rev\` to a pattern every other cycle, so that the pattern alternates between forwards and backwards.\\n * @example\\n * note(\\"c d e g\\").palindrome()\\n */","meta":{"range":[69070,69195],"filename":"pattern.mjs","lineno":2309,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100031995","name":"exports.palindrome","type":"VariableDeclaration"}},"description":"<p>Applies <code>rev</code> to a pattern every other cycle, so that the pattern alternates between forwards and backwards.</p>","examples":["note(\\"c d e g\\").palindrome()"],"name":"palindrome","longname":"palindrome","kind":"constant","scope":"global"},{"comment":"/**\\n * Jux with adjustable stereo width. 0 = mono, 1 = full stereo.\\n * @name juxBy\\n * @synonyms juxby\\n * @example\\n * s(\\"bd lt [~ ht] mt cp ~ bd hh\\").juxBy(\\"<0 .5 1>/2\\", rev)\\n */","meta":{"filename":"pattern.mjs","lineno":2318,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Jux with adjustable stereo width. 0 = mono, 1 = full stereo.</p>","name":"juxBy","synonyms_text":"juxby","synonyms":["juxby"],"examples":["s(\\"bd lt [~ ht] mt cp ~ bd hh\\").juxBy(\\"<0 .5 1>/2\\", rev)"],"longname":"juxBy","kind":"member","scope":"global"},{"comment":"/**\\n * The jux function creates strange stereo effects, by applying a function to a pattern, but only in the right-hand channel.\\n * @example\\n * s(\\"bd lt [~ ht] mt cp ~ bd hh\\").jux(rev)\\n * @example\\n * s(\\"bd lt [~ ht] mt cp ~ bd hh\\").jux(press)\\n * @example\\n * s(\\"bd lt [~ ht] mt cp ~ bd hh\\").jux(iter(4))\\n */","meta":{"range":[70214,70310],"filename":"pattern.mjs","lineno":2348,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100032124","name":"exports.jux","type":"VariableDeclaration"}},"description":"<p>The jux function creates strange stereo effects, by applying a function to a pattern, but only in the right-hand channel.</p>","examples":["s(\\"bd lt [~ ht] mt cp ~ bd hh\\").jux(rev)","s(\\"bd lt [~ ht] mt cp ~ bd hh\\").jux(press)","s(\\"bd lt [~ ht] mt cp ~ bd hh\\").jux(iter(4))"],"name":"jux","longname":"jux","kind":"constant","scope":"global"},{"comment":"/**\\n * Superimpose and offset multiple times, applying the given function each time.\\n * @name echoWith\\n * @synonyms echowith, stutWith, stutwith\\n * @param {number} times how many times to repeat\\n * @param {number} time cycle offset between iterations\\n * @param {function} func function to apply, given the pattern and the iteration index\\n * @example\\n * \\"<0 [2 4]>\\"\\n * .echoWith(4, 1/8, (p,n) => p.add(n*2))\\n * .scale(\\"C:minor\\").note()\\n */","meta":{"filename":"pattern.mjs","lineno":2352,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Superimpose and offset multiple times, applying the given function each time.</p>","name":"echoWith","synonyms_text":"echowith, stutWith, stutwith","synonyms":["echowith","stutWith","stutwith"],"params":[{"type":{"names":["number"]},"description":"<p>how many times to repeat</p>","name":"times"},{"type":{"names":["number"]},"description":"<p>cycle offset between iterations</p>","name":"time"},{"type":{"names":["function"]},"description":"<p>function to apply, given the pattern and the iteration index</p>","name":"func"}],"examples":["\\"<0 [2 4]>\\"\\n.echoWith(4, 1/8, (p,n) => p.add(n*2))\\n.scale(\\"C:minor\\").note()"],"longname":"echoWith","kind":"member","scope":"global"},{"comment":"/**\\n * Superimpose and offset multiple times, gradually decreasing the velocity\\n * @name echo\\n * @memberof Pattern\\n * @returns Pattern\\n * @param {number} times how many times to repeat\\n * @param {number} time cycle offset between iterations\\n * @param {number} feedback velocity multiplicator for each iteration\\n * @example\\n * s(\\"bd sd\\").echo(3, 1/6, .8)\\n */","meta":{"filename":"pattern.mjs","lineno":2371,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Superimpose and offset multiple times, gradually decreasing the velocity</p>","name":"echo","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"params":[{"type":{"names":["number"]},"description":"<p>how many times to repeat</p>","name":"times"},{"type":{"names":["number"]},"description":"<p>cycle offset between iterations</p>","name":"time"},{"type":{"names":["number"]},"description":"<p>velocity multiplicator for each iteration</p>","name":"feedback"}],"examples":["s(\\"bd sd\\").echo(3, 1/6, .8)"],"scope":"static","longname":"Pattern.echo","kind":"member"},{"comment":"/**\\n * Deprecated. Like echo, but the last 2 parameters are flipped.\\n * @name stut\\n * @param {number} times how many times to repeat\\n * @param {number} feedback velocity multiplicator for each iteration\\n * @param {number} time cycle offset between iterations\\n * @example\\n * s(\\"bd sd\\").stut(3, .8, 1/6)\\n */","meta":{"filename":"pattern.mjs","lineno":2386,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Deprecated. Like echo, but the last 2 parameters are flipped.</p>","name":"stut","params":[{"type":{"names":["number"]},"description":"<p>how many times to repeat</p>","name":"times"},{"type":{"names":["number"]},"description":"<p>velocity multiplicator for each iteration</p>","name":"feedback"},{"type":{"names":["number"]},"description":"<p>cycle offset between iterations</p>","name":"time"}],"examples":["s(\\"bd sd\\").stut(3, .8, 1/6)"],"longname":"stut","kind":"member","scope":"global"},{"comment":"/**\\n * The plyWith function repeats each event the given number of times, applying the given function to each event.\\\\n\\n * @name plyWith\\n * @synonyms plywith\\n * @param {number} factor how many times to repeat\\n * @param {function} func function to apply, given the pattern\\n * @example\\n * \\"<0 [2 4]>\\"\\n * .plyWith(4, (p) => p.add(2))\\n * .scale(\\"C:minor\\").note()\\n */","meta":{"filename":"pattern.mjs","lineno":2407,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The plyWith function repeats each event the given number of times, applying the given function to each event.\\\\n</p>","name":"plyWith","synonyms_text":"plywith","synonyms":["plywith"],"params":[{"type":{"names":["number"]},"description":"<p>how many times to repeat</p>","name":"factor"},{"type":{"names":["function"]},"description":"<p>function to apply, given the pattern</p>","name":"func"}],"examples":["\\"<0 [2 4]>\\"\\n.plyWith(4, (p) => p.add(2))\\n.scale(\\"C:minor\\").note()"],"longname":"plyWith","kind":"member","scope":"global"},{"comment":"/**\\n * The plyForEach function repeats each event the given number of times, applying the given function to each event.\\n * This version of ply uses the iteration index as an argument to the function, similar to echoWith.\\n * @name plyForEach\\n * @synonyms plyforeach\\n * @param {number} factor how many times to repeat\\n * @param {function} func function to apply, given the pattern and the iteration index\\n * @example\\n * \\"<0 [2 4]>\\"\\n * .plyForEach(4, (p,n) => p.add(n*2))\\n * .scale(\\"C:minor\\").note()\\n */","meta":{"filename":"pattern.mjs","lineno":2428,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The plyForEach function repeats each event the given number of times, applying the given function to each event.\\nThis version of ply uses the iteration index as an argument to the function, similar to echoWith.</p>","name":"plyForEach","synonyms_text":"plyforeach","synonyms":["plyforeach"],"params":[{"type":{"names":["number"]},"description":"<p>how many times to repeat</p>","name":"factor"},{"type":{"names":["function"]},"description":"<p>function to apply, given the pattern and the iteration index</p>","name":"func"}],"examples":["\\"<0 [2 4]>\\"\\n.plyForEach(4, (p,n) => p.add(n*2))\\n.scale(\\"C:minor\\").note()"],"longname":"plyForEach","kind":"member","scope":"global"},{"comment":"/**\\n * Divides a pattern into a given number of subdivisions, plays the subdivisions in order, but increments the starting subdivision each cycle. The pattern wraps to the first subdivision after the last subdivision is played.\\n * @name iter\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * note(\\"0 1 2 3\\".scale('A minor')).iter(4)\\n */","meta":{"filename":"pattern.mjs","lineno":2450,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Divides a pattern into a given number of subdivisions, plays the subdivisions in order, but increments the starting subdivision each cycle. The pattern wraps to the first subdivision after the last subdivision is played.</p>","name":"iter","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["note(\\"0 1 2 3\\".scale('A minor')).iter(4)"],"scope":"static","longname":"Pattern.iter","kind":"member"},{"comment":"/**\\n * Like \`iter\`, but plays the subdivisions in reverse order. Known as iter' in tidalcycles\\n * @name iterBack\\n * @synonyms iterback\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * note(\\"0 1 2 3\\".scale('A minor')).iterBack(4)\\n */","meta":{"filename":"pattern.mjs","lineno":2477,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like <code>iter</code>, but plays the subdivisions in reverse order. Known as iter' in tidalcycles</p>","name":"iterBack","synonyms_text":"iterback","synonyms":["iterback"],"memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["note(\\"0 1 2 3\\".scale('A minor')).iterBack(4)"],"scope":"static","longname":"Pattern.iterBack","kind":"member"},{"comment":"/**\\n * Repeats each cycle the given number of times.\\n * @name repeatCycles\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * note(irand(12).add(34)).segment(4).repeatCycles(2).s(\\"gm_acoustic_guitar_nylon\\")\\n */","meta":{"filename":"pattern.mjs","lineno":2495,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Repeats each cycle the given number of times.</p>","name":"repeatCycles","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["note(irand(12).add(34)).segment(4).repeatCycles(2).s(\\"gm_acoustic_guitar_nylon\\")"],"scope":"static","longname":"Pattern.repeatCycles","kind":"member"},{"comment":"/**\\n * Divides a pattern into a given number of parts, then cycles through those parts in turn, applying the given function to each part in turn (one part per cycle).\\n * @name chunk\\n * @synonyms slowChunk, slowchunk\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * \\"0 1 2 3\\".chunk(4, x=>x.add(7))\\n * .scale(\\"A:minor\\").note()\\n */","meta":{"filename":"pattern.mjs","lineno":2518,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Divides a pattern into a given number of parts, then cycles through those parts in turn, applying the given function to each part in turn (one part per cycle).</p>","name":"chunk","synonyms_text":"slowChunk, slowchunk","synonyms":["slowChunk","slowchunk"],"memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"0 1 2 3\\".chunk(4, x=>x.add(7))\\n.scale(\\"A:minor\\").note()"],"scope":"static","longname":"Pattern.chunk","kind":"member"},{"comment":"/**\\n * Like \`chunk\`, but cycles through the parts in reverse order. Known as chunk' in tidalcycles\\n * @name chunkBack\\n * @synonyms chunkback\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * \\"0 1 2 3\\".chunkBack(4, x=>x.add(7))\\n * .scale(\\"A:minor\\").note()\\n */","meta":{"filename":"pattern.mjs","lineno":2549,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like <code>chunk</code>, but cycles through the parts in reverse order. Known as chunk' in tidalcycles</p>","name":"chunkBack","synonyms_text":"chunkback","synonyms":["chunkback"],"memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"0 1 2 3\\".chunkBack(4, x=>x.add(7))\\n.scale(\\"A:minor\\").note()"],"scope":"static","longname":"Pattern.chunkBack","kind":"member"},{"comment":"/**\\n * Like \`chunk\`, but the cycles of the source pattern aren't repeated\\n * for each set of chunks.\\n * @name fastChunk\\n * @synonyms fastchunk\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * \\"<0 8> 1 2 3 4 5 6 7\\"\\n * .fastChunk(4, x => x.color('red')).slow(2)\\n * .scale(\\"C2:major\\").note()\\n */","meta":{"filename":"pattern.mjs","lineno":2568,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like <code>chunk</code>, but the cycles of the source pattern aren't repeated\\nfor each set of chunks.</p>","name":"fastChunk","synonyms_text":"fastchunk","synonyms":["fastchunk"],"memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"<0 8> 1 2 3 4 5 6 7\\"\\n.fastChunk(4, x => x.color('red')).slow(2)\\n.scale(\\"C2:major\\").note()"],"scope":"static","longname":"Pattern.fastChunk","kind":"member"},{"comment":"/**\\n * Like \`chunk\`, but the function is applied to a looped subcycle of the source pattern.\\n * @name chunkInto\\n * @synonyms chunkinto\\n * @memberof Pattern\\n * @example\\n * sound(\\"bd sd ht lt bd - cp lt\\").chunkInto(4, hurry(2))\\n *   .bank(\\"tr909\\")\\n */","meta":{"filename":"pattern.mjs","lineno":2589,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like <code>chunk</code>, but the function is applied to a looped subcycle of the source pattern.</p>","name":"chunkInto","synonyms_text":"chunkinto","synonyms":["chunkinto"],"memberof":"Pattern","examples":["sound(\\"bd sd ht lt bd - cp lt\\").chunkInto(4, hurry(2))\\n  .bank(\\"tr909\\")"],"scope":"static","longname":"Pattern.chunkInto","kind":"member"},{"comment":"/**\\n * Like \`chunkInto\`, but moves backwards through the chunks.\\n * @name chunkBackInto\\n * @synonyms chunkbackinto\\n * @memberof Pattern\\n * @example\\n * sound(\\"bd sd ht lt bd - cp lt\\").chunkInto(4, hurry(2))\\n *   .bank(\\"tr909\\")\\n */","meta":{"filename":"pattern.mjs","lineno":2602,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Like <code>chunkInto</code>, but moves backwards through the chunks.</p>","name":"chunkBackInto","synonyms_text":"chunkbackinto","synonyms":["chunkbackinto"],"memberof":"Pattern","examples":["sound(\\"bd sd ht lt bd - cp lt\\").chunkInto(4, hurry(2))\\n  .bank(\\"tr909\\")"],"scope":"static","longname":"Pattern.chunkBackInto","kind":"member"},{"comment":"/**\\n * Loops the pattern inside an \`offset\` for \`cycles\`.\\n * If you think of the entire span of time in cycles as a ribbon, you can cut a single piece and loop it.\\n * @name ribbon\\n * @synonyms rib\\n * @param {number} offset start point of loop in cycles\\n * @param {number} cycles loop length in cycles\\n * @example\\n * note(\\"<c d e f>\\").ribbon(1, 2)\\n * @example\\n * // Looping a portion of randomness\\n * n(irand(8).segment(4)).scale(\\"c:pentatonic\\").ribbon(1337, 2)\\n * @example\\n * // rhythm generator\\n * s(\\"bd!16?\\").ribbon(29,.5)\\n */","meta":{"filename":"pattern.mjs","lineno":2631,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Loops the pattern inside an <code>offset</code> for <code>cycles</code>.\\nIf you think of the entire span of time in cycles as a ribbon, you can cut a single piece and loop it.</p>","name":"ribbon","synonyms_text":"rib","synonyms":["rib"],"params":[{"type":{"names":["number"]},"description":"<p>start point of loop in cycles</p>","name":"offset"},{"type":{"names":["number"]},"description":"<p>loop length in cycles</p>","name":"cycles"}],"examples":["note(\\"<c d e f>\\").ribbon(1, 2)","// Looping a portion of randomness\\nn(irand(8).segment(4)).scale(\\"c:pentatonic\\").ribbon(1337, 2)","// rhythm generator\\ns(\\"bd!16?\\").ribbon(29,.5)"],"longname":"ribbon","kind":"member","scope":"global"},{"comment":"/**\\n * Tags each Hap with an identifier. Good for filtering. The function populates Hap.context.tags (Array).\\n * @name tag\\n * @noAutocomplete\\n * @param {string} tag anything unique\\n */","meta":{"filename":"pattern.mjs","lineno":2659,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Tags each Hap with an identifier. Good for filtering. The function populates Hap.context.tags (Array).</p>","name":"tag","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"params":[{"type":{"names":["string"]},"description":"<p>anything unique</p>","name":"tag"}],"longname":"tag","kind":"member","scope":"global"},{"comment":"/**\\n * Filters haps using the given function\\n * @name filter\\n * @param {Function} test function to test Hap\\n * @example\\n * s(\\"hh!7 oh\\").filter(hap => hap.value.s==='hh')\\n */","meta":{"filename":"pattern.mjs","lineno":2669,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Filters haps using the given function</p>","name":"filter","params":[{"type":{"names":["function"]},"description":"<p>function to test Hap</p>","name":"test"}],"examples":["s(\\"hh!7 oh\\").filter(hap => hap.value.s==='hh')"],"longname":"filter","kind":"member","scope":"global"},{"comment":"/**\\n * Filters haps by their begin time\\n * @name filterWhen\\n * @noAutocomplete\\n * @param {Function} test function to test Hap.whole.begin\\n */","meta":{"filename":"pattern.mjs","lineno":2678,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Filters haps by their begin time</p>","name":"filterWhen","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"params":[{"type":{"names":["function"]},"description":"<p>function to test Hap.whole.begin</p>","name":"test"}],"longname":"filterWhen","kind":"member","scope":"global"},{"comment":"/**\\n * Use within to apply a function to only a part of a pattern.\\n * @name within\\n * @param {number} start start within cycle (0 - 1)\\n * @param {number} end end within cycle (0 - 1). Must be > start\\n * @param {Function} func function to be applied to the sub-pattern\\n */","meta":{"filename":"pattern.mjs","lineno":2686,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Use within to apply a function to only a part of a pattern.</p>","name":"within","params":[{"type":{"names":["number"]},"description":"<p>start within cycle (0 - 1)</p>","name":"start"},{"type":{"names":["number"]},"description":"<p>end within cycle (0 - 1). Must be &gt; start</p>","name":"end"},{"type":{"names":["function"]},"description":"<p>function to be applied to the sub-pattern</p>","name":"func"}],"longname":"within","kind":"member","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Speeds a pattern up or down, to fit to the given number of steps per cycle.\\n * @example\\n * sound(\\"bd sd cp\\").pace(4)\\n * // The same as sound(\\"{bd sd cp}%4\\") or sound(\\"<bd sd cp>*4\\")\\n */","meta":{"range":[83036,83331],"filename":"pattern.mjs","lineno":2767,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100033504","name":"exports.pace","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>Speeds a pattern up or down, to fit to the given number of steps per cycle.</p>","examples":["sound(\\"bd sd cp\\").pace(4)\\n// The same as sound(\\"{bd sd cp}%4\\") or sound(\\"<bd sd cp>*4\\")"],"name":"pace","longname":"pace","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Aligns the steps of the patterns, creating polymeters. The patterns are repeated until they all fit the cycle. For example, in the below the first pattern is repeated twice, and the second is repeated three times, to fit the lowest common multiple of six steps.\\n * @synonyms pm\\n * @example\\n * // The same as note(\\"{c eb g, c2 g2}%6\\")\\n * polymeter(\\"c eb g\\", \\"c2 g2\\").note()\\n *\\n */","meta":{"range":[84209,84717],"filename":"pattern.mjs","lineno":2810,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100033657","name":"exports.polymeter","type":"FunctionDeclaration","paramnames":["args"]}},"description":"<p><em>Experimental</em></p>\\n<p>Aligns the steps of the patterns, creating polymeters. The patterns are repeated until they all fit the cycle. For example, in the below the first pattern is repeated twice, and the second is repeated three times, to fit the lowest common multiple of six steps.</p>","synonyms_text":"pm","synonyms":["pm"],"examples":["// The same as note(\\"{c eb g, c2 g2}%6\\")\\npolymeter(\\"c eb g\\", \\"c2 g2\\").note()"],"name":"polymeter","longname":"polymeter","kind":"function","scope":"global"},{"comment":"/** 'Concatenates' patterns like \`fastcat\`, but proportional to a number of steps per cycle.\\n * The steps can either be inferred from the pattern, or provided as a [length, pattern] pair.\\n * Has the alias \`timecat\`.\\n * @name stepcat\\n * @synonyms timeCat, timecat\\n * @return {Pattern}\\n * @example\\n * stepcat([3,\\"e3\\"],[1, \\"g3\\"]).note()\\n * // the same as \\"e3@3 g3\\".note()\\n * @example\\n * stepcat(\\"bd sd cp\\",\\"hh hh\\").sound()\\n * // the same as \\"bd sd cp hh hh\\".sound()\\n */","meta":{"filename":"pattern.mjs","lineno":2832,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>'Concatenates' patterns like <code>fastcat</code>, but proportional to a number of steps per cycle.\\nThe steps can either be inferred from the pattern, or provided as a [length, pattern] pair.\\nHas the alias <code>timecat</code>.</p>","name":"stepcat","synonyms_text":"timeCat, timecat","synonyms":["timeCat","timecat"],"returns":[{"type":{"names":["Pattern"]}}],"examples":["stepcat([3,\\"e3\\"],[1, \\"g3\\"]).note()\\n// the same as \\"e3@3 g3\\".note()","stepcat(\\"bd sd cp\\",\\"hh hh\\").sound()\\n// the same as \\"bd sd cp hh hh\\".sound()"],"longname":"stepcat","kind":"member","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Concatenates patterns stepwise, according to an inferred 'steps per cycle'.\\n * Similar to \`stepcat\`, but if an argument is a list, the whole pattern will alternate between the elements in the list.\\n *\\n * @return {Pattern}\\n * @example\\n * stepalt([\\"bd cp\\", \\"mt\\"], \\"bd\\").sound()\\n * // The same as \\"bd cp bd mt bd\\".sound()\\n */","meta":{"range":[86781,87328],"filename":"pattern.mjs","lineno":2898,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034028","name":"exports.stepalt","type":"FunctionDeclaration","paramnames":["groups"]}},"description":"<p><em>Experimental</em></p>\\n<p>Concatenates patterns stepwise, according to an inferred 'steps per cycle'.\\nSimilar to <code>stepcat</code>, but if an argument is a list, the whole pattern will alternate between the elements in the list.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["stepalt([\\"bd cp\\", \\"mt\\"], \\"bd\\").sound()\\n// The same as \\"bd cp bd mt bd\\".sound()"],"name":"stepalt","longname":"stepalt","kind":"function","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Takes the given number of steps from a pattern (dropping the rest).\\n * A positive number will take steps from the start of a pattern, and a negative number from the end.\\n * @return {Pattern}\\n * @example\\n * \\"bd cp ht mt\\".take(\\"2\\").sound()\\n * // The same as \\"bd cp\\".sound()\\n * @example\\n * \\"bd cp ht mt\\".take(\\"1 2 3\\").sound()\\n * // The same as \\"bd bd cp bd cp ht\\".sound()\\n * @example\\n * \\"bd cp ht mt\\".take(\\"-1 -2 -3\\").sound()\\n * // The same as \\"mt ht mt cp ht mt\\".sound()\\n */","meta":{"range":[87831,88323],"filename":"pattern.mjs","lineno":2930,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034169","name":"exports.take","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>Takes the given number of steps from a pattern (dropping the rest).\\nA positive number will take steps from the start of a pattern, and a negative number from the end.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["\\"bd cp ht mt\\".take(\\"2\\").sound()\\n// The same as \\"bd cp\\".sound()","\\"bd cp ht mt\\".take(\\"1 2 3\\").sound()\\n// The same as \\"bd bd cp bd cp ht\\".sound()","\\"bd cp ht mt\\".take(\\"-1 -2 -3\\").sound()\\n// The same as \\"mt ht mt cp ht mt\\".sound()"],"name":"take","longname":"take","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Drops the given number of steps from a pattern.\\n * A positive number will drop steps from the start of a pattern, and a negative number from the end.\\n * @return {Pattern}\\n * @example\\n * \\"tha dhi thom nam\\".drop(\\"1\\").sound().bank(\\"mridangam\\")\\n * @example\\n * \\"tha dhi thom nam\\".drop(\\"-1\\").sound().bank(\\"mridangam\\")\\n * @example\\n * \\"tha dhi thom nam\\".drop(\\"0 1 2 3\\").sound().bank(\\"mridangam\\")\\n * @example\\n * \\"tha dhi thom nam\\".drop(\\"0 -1 -2 -3\\").sound().bank(\\"mridangam\\")\\n */","meta":{"range":[88824,89071],"filename":"pattern.mjs","lineno":2973,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034281","name":"exports.drop","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>Drops the given number of steps from a pattern.\\nA positive number will drop steps from the start of a pattern, and a negative number from the end.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["\\"tha dhi thom nam\\".drop(\\"1\\").sound().bank(\\"mridangam\\")","\\"tha dhi thom nam\\".drop(\\"-1\\").sound().bank(\\"mridangam\\")","\\"tha dhi thom nam\\".drop(\\"0 1 2 3\\").sound().bank(\\"mridangam\\")","\\"tha dhi thom nam\\".drop(\\"0 -1 -2 -3\\").sound().bank(\\"mridangam\\")"],"name":"drop","longname":"drop","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * \`extend\` is similar to \`fast\` in that it increases its density, but it also increases the step count\\n * accordingly. So \`stepcat(\\"a b\\".extend(2), \\"c d\\")\` would be the same as \`\\"a b a b c d\\"\`, whereas\\n * \`stepcat(\\"a b\\".fast(2), \\"c d\\")\` would be the same as \`\\"[a b] [a b] c d\\"\`.\\n * @example\\n * stepcat(\\n *   sound(\\"bd bd - cp\\").extend(2),\\n *   sound(\\"bd - sd -\\")\\n * ).pace(8)\\n */","meta":{"range":[89479,89594],"filename":"pattern.mjs","lineno":2997,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034343","name":"exports.extend","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p><code>extend</code> is similar to <code>fast</code> in that it increases its density, but it also increases the step count\\naccordingly. So <code>stepcat(&quot;a b&quot;.extend(2), &quot;c d&quot;)</code> would be the same as <code>&quot;a b a b c d&quot;</code>, whereas\\n<code>stepcat(&quot;a b&quot;.fast(2), &quot;c d&quot;)</code> would be the same as <code>&quot;[a b] [a b] c d&quot;</code>.</p>","examples":["stepcat(\\n  sound(\\"bd bd - cp\\").extend(2),\\n  sound(\\"bd - sd -\\")\\n).pace(8)"],"name":"extend","longname":"extend","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * \`replicate\` is similar to \`fast\` in that it increases its density, but it also increases the step count\\n * accordingly. So \`stepcat(\\"a b\\".replicate(2), \\"c d\\")\` would be the same as \`\\"a b a b c d\\"\`, whereas\\n * \`stepcat(\\"a b\\".fast(2), \\"c d\\")\` would be the same as \`\\"[a b] [a b] c d\\"\`.\\n *\\n * TODO: find out how this function differs from extend\\n * @example\\n * stepcat(\\n *   sound(\\"bd bd - cp\\").replicate(2),\\n *   sound(\\"bd - sd -\\")\\n * ).pace(8)\\n */","meta":{"range":[90070,90212],"filename":"pattern.mjs","lineno":3015,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034364","name":"exports.replicate","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p><code>replicate</code> is similar to <code>fast</code> in that it increases its density, but it also increases the step count\\naccordingly. So <code>stepcat(&quot;a b&quot;.replicate(2), &quot;c d&quot;)</code> would be the same as <code>&quot;a b a b c d&quot;</code>, whereas\\n<code>stepcat(&quot;a b&quot;.fast(2), &quot;c d&quot;)</code> would be the same as <code>&quot;[a b] [a b] c d&quot;</code>.</p>\\n<p>TODO: find out how this function differs from extend</p>","examples":["stepcat(\\n  sound(\\"bd bd - cp\\").replicate(2),\\n  sound(\\"bd - sd -\\")\\n).pace(8)"],"name":"replicate","longname":"replicate","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Expands the step size of the pattern by the given factor.\\n * @example\\n * sound(\\"tha dhi thom nam\\").bank(\\"mridangam\\").expand(\\"3 2 1 1 2 3\\").pace(8)\\n */","meta":{"range":[90393,90522],"filename":"pattern.mjs","lineno":3026,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034389","name":"exports.expand","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>Expands the step size of the pattern by the given factor.</p>","examples":["sound(\\"tha dhi thom nam\\").bank(\\"mridangam\\").expand(\\"3 2 1 1 2 3\\").pace(8)"],"name":"expand","longname":"expand","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Contracts the step size of the pattern by the given factor. See also \`expand\`.\\n * @example\\n * sound(\\"tha dhi thom nam\\").bank(\\"mridangam\\").contract(\\"3 2 1 1 2 3\\").pace(8)\\n */","meta":{"range":[90726,90859],"filename":"pattern.mjs","lineno":3037,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034414","name":"exports.contract","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>Contracts the step size of the pattern by the given factor. See also <code>expand</code>.</p>","examples":["sound(\\"tha dhi thom nam\\").bank(\\"mridangam\\").contract(\\"3 2 1 1 2 3\\").pace(8)"],"name":"contract","longname":"contract","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Progressively shrinks the pattern by 'n' steps until there's nothing left, or if a second value is given (using mininotation list syntax with \`:\`),\\n * that number of times.\\n * A positive number will progressively drop steps from the start of a pattern, and a negative number from the end.\\n * @return {Pattern}\\n * @example\\n * \\"tha dhi thom nam\\".shrink(\\"1\\").sound()\\n * .bank(\\"mridangam\\")\\n * @example\\n * \\"tha dhi thom nam\\".shrink(\\"-1\\").sound()\\n * .bank(\\"mridangam\\")\\n * @example\\n * \\"tha dhi thom nam\\".shrink(\\"1 -1\\").sound().bank(\\"mridangam\\").pace(4)\\n * @example\\n * note(\\"0 1 2 3 4 5 6 7\\".scale(\\"C:ritusen\\")).sound(\\"folkharp\\")\\n   .shrink(\\"1 -1\\").pace(8)\\n\\n */","meta":{"range":[92508,92890],"filename":"pattern.mjs","lineno":3103,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034654","name":"exports.shrink","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>Progressively shrinks the pattern by 'n' steps until there's nothing left, or if a second value is given (using mininotation list syntax with <code>:</code>),\\nthat number of times.\\nA positive number will progressively drop steps from the start of a pattern, and a negative number from the end.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["\\"tha dhi thom nam\\".shrink(\\"1\\").sound()\\n.bank(\\"mridangam\\")","\\"tha dhi thom nam\\".shrink(\\"-1\\").sound()\\n.bank(\\"mridangam\\")","\\"tha dhi thom nam\\".shrink(\\"1 -1\\").sound().bank(\\"mridangam\\").pace(4)","note(\\"0 1 2 3 4 5 6 7\\".scale(\\"C:ritusen\\")).sound(\\"folkharp\\")\\n   .shrink(\\"1 -1\\").pace(8)"],"name":"shrink","longname":"shrink","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n *\\n * Progressively grows the pattern by 'n' steps until the full pattern is played, or if a second value is given (using mininotation list syntax with \`:\`),\\n * that number of times.\\n * A positive number will progressively grow steps from the start of a pattern, and a negative number from the end.\\n * @return {Pattern}\\n * @example\\n * \\"tha dhi thom nam\\".grow(\\"1\\").sound()\\n * .bank(\\"mridangam\\")\\n * @example\\n * \\"tha dhi thom nam\\".grow(\\"-1\\").sound()\\n * .bank(\\"mridangam\\")\\n * @example\\n * \\"tha dhi thom nam\\".grow(\\"1 -1\\").sound().bank(\\"mridangam\\").pace(4)\\n * @example\\n * note(\\"0 1 2 3 4 5 6 7\\".scale(\\"C:ritusen\\")).sound(\\"folkharp\\")\\n   .grow(\\"1 -1\\").pace(8)\\n */","meta":{"range":[93570,93985],"filename":"pattern.mjs","lineno":3141,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034720","name":"exports.grow","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>Progressively grows the pattern by 'n' steps until the full pattern is played, or if a second value is given (using mininotation list syntax with <code>:</code>),\\nthat number of times.\\nA positive number will progressively grow steps from the start of a pattern, and a negative number from the end.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["\\"tha dhi thom nam\\".grow(\\"1\\").sound()\\n.bank(\\"mridangam\\")","\\"tha dhi thom nam\\".grow(\\"-1\\").sound()\\n.bank(\\"mridangam\\")","\\"tha dhi thom nam\\".grow(\\"1 -1\\").sound().bank(\\"mridangam\\").pace(4)","note(\\"0 1 2 3 4 5 6 7\\".scale(\\"C:ritusen\\")).sound(\\"folkharp\\")\\n   .grow(\\"1 -1\\").pace(8)"],"name":"grow","longname":"grow","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n * \\n * Inserts a pattern into a list of patterns. On the first repetition it will be inserted at the end of the list, then moved backwards through the list \\n * on successive repetitions. The patterns are added together stepwise, with all repetitions taking place over a single cycle. Using \`pace\` to set the \\n * number of steps per cycle is therefore usually recommended.\\n * \\n * @return {Pattern}\\n * @example\\n * \\"[c g]\\".tour(\\"e f\\", \\"e f g\\", \\"g f e c\\").note()\\n   .sound(\\"folkharp\\")\\n   .pace(8)\\n */","meta":{"range":[94506,94582],"filename":"pattern.mjs","lineno":3173,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034797","name":"exports.tour","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>Inserts a pattern into a list of patterns. On the first repetition it will be inserted at the end of the list, then moved backwards through the list\\non successive repetitions. The patterns are added together stepwise, with all repetitions taking place over a single cycle. Using <code>pace</code> to set the\\nnumber of steps per cycle is therefore usually recommended.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["\\"[c g]\\".tour(\\"e f\\", \\"e f g\\", \\"g f e c\\").note()\\n   .sound(\\"folkharp\\")\\n   .pace(8)"],"name":"tour","longname":"tour","kind":"constant","scope":"global"},{"comment":"/**\\n * *Experimental*\\n * \\n * 'zips' together the steps of the provided patterns. This can create a long repetition, taking place over a single, dense cycle. \\n * Using \`pace\` to set the number of steps per cycle is therefore usually recommended.\\n * \\n * @returns {Pattern}\\n * @example\\n * zip(\\"e f\\", \\"e f g\\", \\"g [f e] a f4 c\\").note()\\n   .sound(\\"folkharp\\")\\n   .pace(8)\\n */","meta":{"range":[95182,95437],"filename":"pattern.mjs","lineno":3199,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034866","name":"exports.zip","type":"VariableDeclaration"}},"description":"<p><em>Experimental</em></p>\\n<p>'zips' together the steps of the provided patterns. This can create a long repetition, taking place over a single, dense cycle.\\nUsing <code>pace</code> to set the number of steps per cycle is therefore usually recommended.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["zip(\\"e f\\", \\"e f g\\", \\"g [f e] a f4 c\\").note()\\n   .sound(\\"folkharp\\")\\n   .pace(8)"],"name":"zip","longname":"zip","kind":"constant","scope":"global"},{"comment":"/** Aliases for \`stepcat\` */","meta":{"range":[95468,95499],"filename":"pattern.mjs","lineno":3207,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100034930","name":"exports.timecat","type":"VariableDeclaration"}},"description":"<p>Aliases for <code>stepcat</code></p>","name":"timecat","longname":"timecat","kind":"constant","scope":"global"},{"comment":"/**\\n * Cuts each sample into the given number of parts, allowing you to explore a technique known as 'granular synthesis'.\\n * It turns a pattern of samples into a pattern of parts of samples.\\n * @name chop\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })\\n * s(\\"rhodes\\")\\n *  .chop(4)\\n *  .rev() // reverse order of chops\\n *  .loopAt(2) // fit sample into 2 cycles\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3240,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Cuts each sample into the given number of parts, allowing you to explore a technique known as 'granular synthesis'.\\nIt turns a pattern of samples into a pattern of parts of samples.</p>","name":"chop","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })\\ns(\\"rhodes\\")\\n .chop(4)\\n .rev() // reverse order of chops\\n .loopAt(2) // fit sample into 2 cycles"],"scope":"static","longname":"Pattern.chop","kind":"member"},{"comment":"/**\\n * Cuts each sample into the given number of parts, triggering progressive portions of each sample at each loop.\\n * @name striate\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"numbers:0 numbers:1 numbers:2\\").striate(6).slow(3)\\n */","meta":{"filename":"pattern.mjs","lineno":3271,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Cuts each sample into the given number of parts, triggering progressive portions of each sample at each loop.</p>","name":"striate","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"numbers:0 numbers:1 numbers:2\\").striate(6).slow(3)"],"scope":"static","longname":"Pattern.striate","kind":"member"},{"comment":"/**\\n * Makes the sample fit the given number of cycles by changing the speed.\\n * @name loopAt\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })\\n * s(\\"rhodes\\").loopAt(2)\\n */","meta":{"filename":"pattern.mjs","lineno":3289,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Makes the sample fit the given number of cycles by changing the speed.</p>","name":"loopAt","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })\\ns(\\"rhodes\\").loopAt(2)"],"scope":"static","longname":"Pattern.loopAt","kind":"member"},{"comment":"/**\\n * Chops samples into the given number of slices, triggering those slices with a given pattern of slice numbers.\\n * Instead of a number, it also accepts a list of numbers from 0 to 1 to slice at specific points.\\n * @name slice\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * samples('github:tidalcycles/dirt-samples')\\n * s(\\"breaks165\\").slice(8, \\"0 1 <2 2*2> 3 [4 0] 5 6 7\\".every(3, rev)).slow(0.75)\\n * @example\\n * samples('github:tidalcycles/dirt-samples')\\n * s(\\"breaks125\\").fit().slice([0,.25,.5,.75], \\"0 1 1 <2 3>\\")\\n */","meta":{"filename":"pattern.mjs","lineno":3306,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Chops samples into the given number of slices, triggering those slices with a given pattern of slice numbers.\\nInstead of a number, it also accepts a list of numbers from 0 to 1 to slice at specific points.</p>","name":"slice","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["samples('github:tidalcycles/dirt-samples')\\ns(\\"breaks165\\").slice(8, \\"0 1 <2 2*2> 3 [4 0] 5 6 7\\".every(3, rev)).slow(0.75)","samples('github:tidalcycles/dirt-samples')\\ns(\\"breaks125\\").fit().slice([0,.25,.5,.75], \\"0 1 1 <2 3>\\")"],"scope":"static","longname":"Pattern.slice","kind":"member"},{"comment":"/**\\n *\\n * make something happen on event time\\n * uses browser timeout which is innacurate for audio tasks\\n * @name onTriggerTime\\n * @memberof Pattern\\n *  @returns Pattern\\n * @example\\n * s(\\"bd!8\\").onTriggerTime((hap) => {console.log(hap)})\\n */","meta":{"filename":"pattern.mjs","lineno":3340,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>make something happen on event time\\nuses browser timeout which is innacurate for audio tasks</p>","name":"onTriggerTime","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"bd!8\\").onTriggerTime((hap) => {console.log(hap)})"],"scope":"static","longname":"Pattern.onTriggerTime","kind":"member"},{"comment":"/**\\n * Works the same as slice, but changes the playback speed of each slice to match the duration of its step.\\n * @name splice\\n * @example\\n * samples('github:tidalcycles/dirt-samples')\\n * s(\\"breaks165\\")\\n * .splice(8,  \\"0 1 [2 3 0]@2 3 0@2 7\\")\\n */","meta":{"filename":"pattern.mjs","lineno":3359,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Works the same as slice, but changes the playback speed of each slice to match the duration of its step.</p>","name":"splice","examples":["samples('github:tidalcycles/dirt-samples')\\ns(\\"breaks165\\")\\n.splice(8,  \\"0 1 [2 3 0]@2 3 0@2 7\\")"],"longname":"splice","kind":"member","scope":"global"},{"comment":"/**\\n * Makes the sample fit its event duration. Good for rhythmical loops like drum breaks.\\n * Similar to \`loopAt\`.\\n * @name fit\\n * @example\\n * samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })\\n * s(\\"rhodes/2\\").fit()\\n */","meta":{"filename":"pattern.mjs","lineno":3395,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Makes the sample fit its event duration. Good for rhythmical loops like drum breaks.\\nSimilar to <code>loopAt</code>.</p>","name":"fit","examples":["samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })\\ns(\\"rhodes/2\\").fit()"],"longname":"fit","kind":"member","scope":"global"},{"comment":"/**\\n * Makes the sample fit the given number of cycles and cps value, by\\n * changing the speed. Please note that at some point cps will be\\n * given by a global clock and this function will be\\n * deprecated/removed.\\n * @name loopAtCps\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })\\n * s(\\"rhodes\\").loopAtCps(4,1.5).cps(1.5)\\n */","meta":{"filename":"pattern.mjs","lineno":3418,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Makes the sample fit the given number of cycles and cps value, by\\nchanging the speed. Please note that at some point cps will be\\ngiven by a global clock and this function will be\\ndeprecated/removed.</p>","name":"loopAtCps","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["samples({ rhodes: 'https://cdn.freesound.org/previews/132/132051_316502-lq.mp3' })\\ns(\\"rhodes\\").loopAtCps(4,1.5).cps(1.5)"],"scope":"static","longname":"Pattern.loopAtCps","kind":"member"},{"comment":"/** exposes a custom value at query time. basically allows mutating state without evaluation */","meta":{"range":[102969,103069],"filename":"pattern.mjs","lineno":3436,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100035770","name":"exports.ref","type":"VariableDeclaration"}},"description":"<p>exposes a custom value at query time. basically allows mutating state without evaluation</p>","name":"ref","longname":"ref","kind":"constant","scope":"global"},{"comment":"/**\\n * Cross-fades between left and right from 0 to 1:\\n * - 0 = (full left, no right)\\n * - .5 = (both equal)\\n * - 1 = (no left, full right)\\n *\\n * @name xfade\\n * @example\\n * xfade(s(\\"bd*2\\"), \\"<0 .25 .5 .75 1>\\", s(\\"hh*8\\"))\\n */","meta":{"filename":"pattern.mjs","lineno":3443,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Cross-fades between left and right from 0 to 1:</p>\\n<ul>\\n<li>0 = (full left, no right)</li>\\n<li>.5 = (both equal)</li>\\n<li>1 = (no left, full right)</li>\\n</ul>","name":"xfade","examples":["xfade(s(\\"bd*2\\"), \\"<0 .25 .5 .75 1>\\", s(\\"hh*8\\"))"],"longname":"xfade","kind":"member","scope":"global"},{"comment":"/**\\n * creates a structure pattern from divisions of a cycle\\n * especially useful for creating rhythms\\n * @name beat\\n * @example\\n * s(\\"bd\\").beat(\\"0,7,10\\", 16)\\n * @example\\n * s(\\"sd\\").beat(\\"4,12\\", 16)\\n */","meta":{"filename":"pattern.mjs","lineno":3467,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>creates a structure pattern from divisions of a cycle\\nespecially useful for creating rhythms</p>","name":"beat","examples":["s(\\"bd\\").beat(\\"0,7,10\\", 16)","s(\\"sd\\").beat(\\"4,12\\", 16)"],"longname":"beat","kind":"member","scope":"global"},{"comment":"/**\\n * Takes two binary rhythms represented as lists of 1s and 0s, and a number\\n * between 0 and 1 that morphs between them. The two lists should contain the same\\n * number of true values.\\n * @example\\n * sound(\\"hh\\").struct(morph([1,0,1,0,1,0,1,0], // straight rhythm\\n *                          [1,1,0,1,0,1,0], // wonky rhythm\\n *                          0.25 // creates a slightly wonky rhythm\\n *                         )\\n *                   )\\n * @example\\n * sound(\\"hh\\").struct(morph(\\"1:0:1:0:1:0:1:0\\", // straight rhythm\\n *                          \\"1:1:0:1:0:1:0\\", // wonky rhythm\\n *                          sine.slow(8) // slowly morph between the rhythms\\n *                         )\\n *                   )\\n */","meta":{"range":[106043,106281],"filename":"pattern.mjs","lineno":3548,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036170","name":"exports.morph","type":"VariableDeclaration"}},"description":"<p>Takes two binary rhythms represented as lists of 1s and 0s, and a number\\nbetween 0 and 1 that morphs between them. The two lists should contain the same\\nnumber of true values.</p>","examples":["sound(\\"hh\\").struct(morph([1,0,1,0,1,0,1,0], // straight rhythm\\n                         [1,1,0,1,0,1,0], // wonky rhythm\\n                         0.25 // creates a slightly wonky rhythm\\n                        )\\n                  )","sound(\\"hh\\").struct(morph(\\"1:0:1:0:1:0:1:0\\", // straight rhythm\\n                         \\"1:1:0:1:0:1:0\\", // wonky rhythm\\n                         sine.slow(8) // slowly morph between the rhythms\\n                        )\\n                  )"],"name":"morph","longname":"morph","kind":"constant","scope":"global"},{"comment":"/**\\n * Soft-clipping distortion\\n *\\n * @name soft\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3555,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Soft-clipping distortion</p>","name":"soft","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"longname":"soft","kind":"member","scope":"global"},{"comment":"/**\\n * Hard-clipping distortion\\n *\\n * @name hard\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3563,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Hard-clipping distortion</p>","name":"hard","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"longname":"hard","kind":"member","scope":"global"},{"comment":"/**\\n * Cubic polynomial distortion\\n *\\n * @name cubic\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3571,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Cubic polynomial distortion</p>","name":"cubic","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"longname":"cubic","kind":"member","scope":"global"},{"comment":"/**\\n * Diode-emulating distortion\\n *\\n * @name diode\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3579,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Diode-emulating distortion</p>","name":"diode","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"longname":"diode","kind":"member","scope":"global"},{"comment":"/**\\n * Asymmetrical diode distortion\\n *\\n * @name asym\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3587,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Asymmetrical diode distortion</p>","name":"asym","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"longname":"asym","kind":"member","scope":"global"},{"comment":"/**\\n * Wavefolding distortion\\n *\\n * @name fold\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3595,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Wavefolding distortion</p>","name":"fold","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"longname":"fold","kind":"member","scope":"global"},{"comment":"/**\\n * Wavefolding distortion composed with sinusoid\\n *\\n * @name sinefold\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3603,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Wavefolding distortion composed with sinusoid</p>","name":"sinefold","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"longname":"sinefold","kind":"member","scope":"global"},{"comment":"/**\\n * Distortion via Chebyshev polynomials\\n *\\n * @name chebyshev\\n * @param {number | Pattern} distortion amount of distortion to apply\\n * @param {number | Pattern} volume linear postgain of the distortion\\n *\\n */","meta":{"filename":"pattern.mjs","lineno":3611,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Distortion via Chebyshev polynomials</p>","name":"chebyshev","params":[{"type":{"names":["number","Pattern"]},"description":"<p>amount of distortion to apply</p>","name":"distortion"},{"type":{"names":["number","Pattern"]},"description":"<p>linear postgain of the distortion</p>","name":"volume"}],"longname":"chebyshev","kind":"member","scope":"global"},{"comment":"/** * Picks patterns (or plain values) either from a list (by index) or a lookup table (by name).\\n * Similar to \`inhabit\`, but maintains the structure of the original patterns.\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n * @example\\n * note(\\"<0 1 2!2 3>\\".pick([\\"g a\\", \\"e f\\", \\"f g f g\\" , \\"g c d\\"]))\\n * @example\\n * sound(\\"<0 1 [2,0]>\\".pick([\\"bd sd\\", \\"cp cp\\", \\"hh hh\\"]))\\n * @example\\n * sound(\\"<0!2 [0,1] 1>\\".pick([\\"bd(3,8)\\", \\"sd sd\\"]))\\n * @example\\n * s(\\"<a!2 [a,b] b>\\".pick({a: \\"bd(3,8)\\", b: \\"sd sd\\"}))\\n */","meta":{"range":[1892,2094],"filename":"pick.mjs","lineno":44,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036387","name":"exports.pick","type":"VariableDeclaration"}},"description":"<p>Picks patterns (or plain values) either from a list (by index) or a lookup table (by name).\\nSimilar to <code>inhabit</code>, but maintains the structure of the original patterns.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"examples":["note(\\"<0 1 2!2 3>\\".pick([\\"g a\\", \\"e f\\", \\"f g f g\\" , \\"g c d\\"]))","sound(\\"<0 1 [2,0]>\\".pick([\\"bd sd\\", \\"cp cp\\", \\"hh hh\\"]))","sound(\\"<0!2 [0,1] 1>\\".pick([\\"bd(3,8)\\", \\"sd sd\\"]))","s(\\"<a!2 [a,b] b>\\".pick({a: \\"bd(3,8)\\", b: \\"sd sd\\"}))"],"name":"pick","longname":"pick","kind":"constant","scope":"global"},{"comment":"/** * The same as \`pick\`, but if you pick a number greater than the size of the list,\\n * it wraps around, rather than sticking at the maximum value.\\n * For example, if you pick the fifth pattern of a list of three, you'll get the\\n * second one.\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n */","meta":{"range":[2519,2637],"filename":"pick.mjs","lineno":65,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036432","name":"exports.pickmod","type":"VariableDeclaration"}},"description":"<p>The same as <code>pick</code>, but if you pick a number greater than the size of the list,\\nit wraps around, rather than sticking at the maximum value.\\nFor example, if you pick the fifth pattern of a list of three, you'll get the\\nsecond one.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"pickmod","longname":"pickmod","kind":"constant","scope":"global"},{"comment":"/** * pickF lets you use a pattern of numbers to pick which function to apply to another pattern.\\n * @param {Pattern} pat\\n * @param {Pattern} lookup a pattern of indices\\n * @param {function[]} funcs the array of functions from which to pull\\n * @returns {Pattern}\\n * @example\\n * s(\\"bd [rim hh]\\").pickF(\\"<0 1 2>\\", [rev,jux(rev),fast(2)])\\n * @example\\n * note(\\"<c2 d2>(3,8)\\").s(\\"square\\")\\n *     .pickF(\\"<0 2> 1\\", [jux(rev),fast(2),x=>x.lpf(800)])\\n */","meta":{"range":[3086,3201],"filename":"pick.mjs","lineno":80,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036452","name":"exports.pickF","type":"VariableDeclaration"}},"description":"<p>pickF lets you use a pattern of numbers to pick which function to apply to another pattern.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["Pattern"]},"description":"<p>a pattern of indices</p>","name":"lookup"},{"type":{"names":["Array.<function()>"]},"description":"<p>the array of functions from which to pull</p>","name":"funcs"}],"returns":[{"type":{"names":["Pattern"]}}],"examples":["s(\\"bd [rim hh]\\").pickF(\\"<0 1 2>\\", [rev,jux(rev),fast(2)])","note(\\"<c2 d2>(3,8)\\").s(\\"square\\")\\n    .pickF(\\"<0 2> 1\\", [jux(rev),fast(2),x=>x.lpf(800)])"],"name":"pickF","longname":"pickF","kind":"constant","scope":"global"},{"comment":"/** * The same as \`pickF\`, but if you pick a number greater than the size of the functions list,\\n * it wraps around, rather than sticking at the maximum value.\\n * @param {Pattern} pat\\n * @param {Pattern} lookup a pattern of indices\\n * @param {function[]} funcs the array of functions from which to pull\\n * @returns {Pattern}\\n */","meta":{"range":[3532,3656],"filename":"pick.mjs","lineno":91,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036473","name":"exports.pickmodF","type":"VariableDeclaration"}},"description":"<p>The same as <code>pickF</code>, but if you pick a number greater than the size of the functions list,\\nit wraps around, rather than sticking at the maximum value.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["Pattern"]},"description":"<p>a pattern of indices</p>","name":"lookup"},{"type":{"names":["Array.<function()>"]},"description":"<p>the array of functions from which to pull</p>","name":"funcs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"pickmodF","longname":"pickmodF","kind":"constant","scope":"global"},{"comment":"/** * Similar to \`pick\`, but it applies an outerJoin instead of an innerJoin.\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n */","meta":{"range":[3803,3922],"filename":"pick.mjs","lineno":100,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036494","name":"exports.pickOut","type":"VariableDeclaration"}},"description":"<p>Similar to <code>pick</code>, but it applies an outerJoin instead of an innerJoin.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"pickOut","longname":"pickOut","kind":"constant","scope":"global"},{"comment":"/** * The same as \`pickOut\`, but if you pick a number greater than the size of the list,\\n * it wraps around, rather than sticking at the maximum value.\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n */","meta":{"range":[4143,4267],"filename":"pick.mjs","lineno":110,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036514","name":"exports.pickmodOut","type":"VariableDeclaration"}},"description":"<p>The same as <code>pickOut</code>, but if you pick a number greater than the size of the list,\\nit wraps around, rather than sticking at the maximum value.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"pickmodOut","longname":"pickmodOut","kind":"constant","scope":"global"},{"comment":"/** * Similar to \`pick\`, but the choosen pattern is restarted when its index is triggered.\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n */","meta":{"range":[4427,4556],"filename":"pick.mjs","lineno":119,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036534","name":"exports.pickRestart","type":"VariableDeclaration"}},"description":"<p>Similar to <code>pick</code>, but the choosen pattern is restarted when its index is triggered.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"pickRestart","longname":"pickRestart","kind":"constant","scope":"global"},{"comment":"/** * The same as \`pickRestart\`, but if you pick a number greater than the size of the list,\\n   * it wraps around, rather than sticking at the maximum value.\\n   * @param {Pattern} pat\\n   * @param {*} xs\\n   * @returns {Pattern}\\n   * @example\\n   * \\"<a@2 b@2 c@2 d@2>\\".pickRestart({\\n        a: n(\\"0 1 2 0\\"),\\n        b: n(\\"2 3 4 ~\\"),\\n        c: n(\\"[4 5] [4 3] 2 0\\"),\\n        d: n(\\"0 -3 0 ~\\")\\n      }).scale(\\"C:major\\").s(\\"piano\\")\\n   */","meta":{"range":[4989,5123],"filename":"pick.mjs","lineno":136,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036554","name":"exports.pickmodRestart","type":"VariableDeclaration"}},"description":"<p>The same as <code>pickRestart</code>, but if you pick a number greater than the size of the list,\\nit wraps around, rather than sticking at the maximum value.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"examples":["\\"<a@2 b@2 c@2 d@2>\\".pickRestart({\\n        a: n(\\"0 1 2 0\\"),\\n        b: n(\\"2 3 4 ~\\"),\\n        c: n(\\"[4 5] [4 3] 2 0\\"),\\n        d: n(\\"0 -3 0 ~\\")\\n      }).scale(\\"C:major\\").s(\\"piano\\")"],"name":"pickmodRestart","longname":"pickmodRestart","kind":"constant","scope":"global"},{"comment":"/** * Similar to \`pick\`, but the choosen pattern is reset when its index is triggered.\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n */","meta":{"range":[5279,5402],"filename":"pick.mjs","lineno":145,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036574","name":"exports.pickReset","type":"VariableDeclaration"}},"description":"<p>Similar to <code>pick</code>, but the choosen pattern is reset when its index is triggered.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"pickReset","longname":"pickReset","kind":"constant","scope":"global"},{"comment":"/** * The same as \`pickReset\`, but if you pick a number greater than the size of the list,\\n * it wraps around, rather than sticking at the maximum value.\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n */","meta":{"range":[5625,5753],"filename":"pick.mjs","lineno":155,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036594","name":"exports.pickmodReset","type":"VariableDeclaration"}},"description":"<p>The same as <code>pickReset</code>, but if you pick a number greater than the size of the list,\\nit wraps around, rather than sticking at the maximum value.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"pickmodReset","longname":"pickmodReset","kind":"constant","scope":"global"},{"comment":"/** Picks patterns (or plain values) either from a list (by index) or a lookup table (by name).\\n   * Similar to \`pick\`, but cycles are squeezed into the target ('inhabited') pattern.\\n   * @name inhabit\\n   * @synonyms pickSqueeze\\n   * @param {Pattern} pat\\n   * @param {*} xs\\n   * @returns {Pattern}\\n   * @example\\n   * \\"<a b [a,b]>\\".inhabit({a: s(\\"bd(3,8)\\"),\\n                            b: s(\\"cp sd\\")\\n                           })\\n   * @example\\n   * s(\\"a@2 [a b] a\\".inhabit({a: \\"bd(3,8)\\", b: \\"sd sd\\"})).slow(4)\\n   */","meta":{"filename":"pick.mjs","lineno":159,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Picks patterns (or plain values) either from a list (by index) or a lookup table (by name).\\nSimilar to <code>pick</code>, but cycles are squeezed into the target ('inhabited') pattern.</p>","name":"inhabit","synonyms_text":"pickSqueeze","synonyms":["pickSqueeze"],"params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"examples":["\\"<a b [a,b]>\\".inhabit({a: s(\\"bd(3,8)\\"),\\n                            b: s(\\"cp sd\\")\\n                           })","s(\\"a@2 [a b] a\\".inhabit({a: \\"bd(3,8)\\", b: \\"sd sd\\"})).slow(4)"],"longname":"inhabit","kind":"member","scope":"global"},{"comment":"/** * The same as \`inhabit\`, but if you pick a number greater than the size of the list,\\n * it wraps around, rather than sticking at the maximum value.\\n * For example, if you pick the fifth pattern of a list of three, you'll get the\\n * second one.\\n * @name inhabitmod\\n * @synonyms pickmodSqueeze\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n */","meta":{"filename":"pick.mjs","lineno":177,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The same as <code>inhabit</code>, but if you pick a number greater than the size of the list,\\nit wraps around, rather than sticking at the maximum value.\\nFor example, if you pick the fifth pattern of a list of three, you'll get the\\nsecond one.</p>","name":"inhabitmod","synonyms_text":"pickmodSqueeze","synonyms":["pickmodSqueeze"],"params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"longname":"inhabitmod","kind":"member","scope":"global"},{"comment":"/**\\n * Pick from the list of values (or patterns of values) via the index using the given\\n * pattern of integers. The selected pattern will be compressed to fit the duration of the selecting event\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n * @example\\n * note(squeeze(\\"<0@2 [1!2] 2>\\", [\\"g a\\", \\"f g f g\\" , \\"g a c d\\"]))\\n */","meta":{"range":[7302,7543],"filename":"pick.mjs","lineno":202,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100036666","name":"exports.squeeze","type":"VariableDeclaration"}},"description":"<p>Pick from the list of values (or patterns of values) via the index using the given\\npattern of integers. The selected pattern will be compressed to fit the duration of the selecting event</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"examples":["note(squeeze(\\"<0@2 [1!2] 2>\\", [\\"g a\\", \\"f g f g\\" , \\"g a c d\\"]))"],"name":"squeeze","longname":"squeeze","kind":"constant","scope":"global"},{"comment":"/**\\n   * Changes the global tempo to the given cycles per minute\\n   *\\n   * @name setcpm\\n   * @alias setCpm\\n   * @param {number} cpm cycles per minute\\n   * @example\\n   * setcpm(140/4) // =140 bpm in 4/4\\n   * $: s(\\"bd*4,[- sd]*2\\").bank('tr707')\\n   */","meta":{"filename":"repl.mjs","lineno":101,"columnno":2,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Changes the global tempo to the given cycles per minute</p>","name":"setcpm","alias":"setCpm","params":[{"type":{"names":["number"]},"description":"<p>cycles per minute</p>","name":"cpm"}],"examples":["setcpm(140/4) // =140 bpm in 4/4\\n$: s(\\"bd*4,[- sd]*2\\").bank('tr707')"],"longname":"setcpm","kind":"member","scope":"global"},{"comment":"/** Applies a function to all the running patterns. Note that the patterns are groups together into a single \`stack\` before the function is applied. This is probably what you want, but see \`each\` for\\n   * a version that applies the function to each pattern separately.\\n   * \`\`\`\\n   * $: sound(\\"bd - cp sd\\")\\n   * $: sound(\\"hh*8\\")\\n   * all(fast(\\"<2 3>\\"))\\n   * \`\`\`\\n   * \`\`\`\\n   * $: sound(\\"bd - cp sd\\")\\n   * $: sound(\\"hh*8\\")\\n   * all(x => x.pianoroll())\\n   * \`\`\`\\n   */","meta":{"range":[3428,3446],"filename":"repl.mjs","lineno":131,"columnno":6,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037065","name":"allTransforms","type":"ArrayExpression","value":"[]"}},"description":"<p>Applies a function to all the running patterns. Note that the patterns are groups together into a single <code>stack</code> before the function is applied. This is probably what you want, but see <code>each</code> for\\na version that applies the function to each pattern separately.</p>\\n<pre class=\\"prettyprint source\\"><code>$: sound(&quot;bd - cp sd&quot;)\\n$: sound(&quot;hh*8&quot;)\\nall(fast(&quot;&lt;2 3>&quot;))\\n</code></pre>\\n<pre class=\\"prettyprint source\\"><code>$: sound(&quot;bd - cp sd&quot;)\\n$: sound(&quot;hh*8&quot;)\\nall(x => x.pianoroll())\\n</code></pre>","name":"allTransforms","longname":"repl~allTransforms","kind":"member","memberof":"repl","scope":"inner","params":[]},{"comment":"/** Applies a function to each of the running patterns separately. This is intended for future use with upcoming 'stepwise' features. See \`all\` for a version that applies the function to all the patterns stacked together into a single pattern.\\n   * \`\`\`\\n   * $: sound(\\"bd - cp sd\\")\\n   * $: sound(\\"hh*8\\")\\n   * each(fast(\\"<2 3>\\"))\\n   * \`\`\`\\n   */","meta":{"range":[3898,3982],"filename":"repl.mjs","lineno":143,"columnno":8,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037083","name":"each","type":"FunctionExpression"},"vars":{"eachTransform":"repl~each~eachTransform"}},"description":"<p>Applies a function to each of the running patterns separately. This is intended for future use with upcoming 'stepwise' features. See <code>all</code> for a version that applies the function to all the patterns stacked together into a single pattern.</p>\\n<pre class=\\"prettyprint source\\"><code>$: sound(&quot;bd - cp sd&quot;)\\n$: sound(&quot;hh*8&quot;)\\neach(fast(&quot;&lt;2 3>&quot;))\\n</code></pre>","name":"each","longname":"repl~each","kind":"function","memberof":"repl","scope":"inner","params":[]},{"comment":"/**\\n *  A sawtooth signal between 0 and 1.\\n *\\n * @return {Pattern}\\n * @example\\n * note(\\"<c3 [eb3,g3] g2 [g3,bb3]>*8\\")\\n * .clip(saw.slow(2))\\n * @example\\n * n(saw.range(0,8).segment(8))\\n * .scale('C major')\\n *\\n */","meta":{"range":[1533,1573],"filename":"signal.mjs","lineno":35,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037731","name":"exports.saw","type":"VariableDeclaration"}},"description":"<p>A sawtooth signal between 0 and 1.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["note(\\"<c3 [eb3,g3] g2 [g3,bb3]>*8\\")\\n.clip(saw.slow(2))","n(saw.range(0,8).segment(8))\\n.scale('C major')"],"name":"saw","longname":"saw","kind":"constant","scope":"global"},{"comment":"/**\\n *  A sawtooth signal between -1 and 1 (like \`saw\`, but bipolar).\\n *\\n * @return {Pattern}\\n */","meta":{"range":[1673,1709],"filename":"signal.mjs","lineno":42,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037742","name":"exports.saw2","type":"VariableDeclaration"}},"description":"<p>A sawtooth signal between -1 and 1 (like <code>saw</code>, but bipolar).</p>","returns":[{"type":{"names":["Pattern"]}}],"name":"saw2","longname":"saw2","kind":"constant","scope":"global"},{"comment":"/**\\n *  A sawtooth signal between 1 and 0 (like \`saw\`, but flipped).\\n *\\n * @return {Pattern}\\n * @example\\n * note(\\"<c3 [eb3,g3] g2 [g3,bb3]>*8\\")\\n * .clip(isaw.slow(2))\\n * @example\\n * n(isaw.range(0,8).segment(8))\\n * .scale('C major')\\n *\\n */","meta":{"range":[1951,1998],"filename":"signal.mjs","lineno":56,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037750","name":"exports.isaw","type":"VariableDeclaration"}},"description":"<p>A sawtooth signal between 1 and 0 (like <code>saw</code>, but flipped).</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["note(\\"<c3 [eb3,g3] g2 [g3,bb3]>*8\\")\\n.clip(isaw.slow(2))","n(isaw.range(0,8).segment(8))\\n.scale('C major')"],"name":"isaw","longname":"isaw","kind":"constant","scope":"global"},{"comment":"/**\\n *  A sawtooth signal between 1 and -1 (like \`saw2\`, but flipped).\\n *\\n * @return {Pattern}\\n */","meta":{"range":[2099,2137],"filename":"signal.mjs","lineno":63,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037763","name":"exports.isaw2","type":"VariableDeclaration"}},"description":"<p>A sawtooth signal between 1 and -1 (like <code>saw2</code>, but flipped).</p>","returns":[{"type":{"names":["Pattern"]}}],"name":"isaw2","longname":"isaw2","kind":"constant","scope":"global"},{"comment":"/**\\n *  A sine signal between -1 and 1 (like \`sine\`, but bipolar).\\n *\\n * @return {Pattern}\\n */","meta":{"range":[2234,2296],"filename":"signal.mjs","lineno":70,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037771","name":"exports.sine2","type":"VariableDeclaration"}},"description":"<p>A sine signal between -1 and 1 (like <code>sine</code>, but bipolar).</p>","returns":[{"type":{"names":["Pattern"]}}],"name":"sine2","longname":"sine2","kind":"constant","scope":"global"},{"comment":"/**\\n *  A sine signal between 0 and 1.\\n * @return {Pattern}\\n * @example\\n * n(sine.segment(16).range(0,15))\\n * .scale(\\"C:minor\\")\\n *\\n */","meta":{"range":[2433,2473],"filename":"signal.mjs","lineno":80,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037790","name":"exports.sine","type":"VariableDeclaration"}},"description":"<p>A sine signal between 0 and 1.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["n(sine.segment(16).range(0,15))\\n.scale(\\"C:minor\\")"],"name":"sine","longname":"sine","kind":"constant","scope":"global"},{"comment":"/**\\n *  A cosine signal between 0 and 1.\\n *\\n * @return {Pattern}\\n * @example\\n * n(stack(sine,cosine).segment(16).range(0,15))\\n * .scale(\\"C:minor\\")\\n *\\n */","meta":{"range":[2629,2683],"filename":"signal.mjs","lineno":91,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037798","name":"exports.cosine","type":"VariableDeclaration"}},"description":"<p>A cosine signal between 0 and 1.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["n(stack(sine,cosine).segment(16).range(0,15))\\n.scale(\\"C:minor\\")"],"name":"cosine","longname":"cosine","kind":"constant","scope":"global"},{"comment":"/**\\n *  A cosine signal between -1 and 1 (like \`cosine\`, but bipolar).\\n *\\n * @return {Pattern}\\n */","meta":{"range":[2784,2840],"filename":"signal.mjs","lineno":98,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037813","name":"exports.cosine2","type":"VariableDeclaration"}},"description":"<p>A cosine signal between -1 and 1 (like <code>cosine</code>, but bipolar).</p>","returns":[{"type":{"names":["Pattern"]}}],"name":"cosine2","longname":"cosine2","kind":"constant","scope":"global"},{"comment":"/**\\n *  A square signal between 0 and 1.\\n * @return {Pattern}\\n * @example\\n * n(square.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"range":[2975,3036],"filename":"signal.mjs","lineno":107,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037828","name":"exports.square","type":"VariableDeclaration"}},"description":"<p>A square signal between 0 and 1.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["n(square.segment(4).range(0,7)).scale(\\"C:minor\\")"],"name":"square","longname":"square","kind":"constant","scope":"global"},{"comment":"/**\\n *  A square signal between -1 and 1 (like \`square\`, but bipolar).\\n *\\n * @return {Pattern}\\n */","meta":{"range":[3137,3179],"filename":"signal.mjs","lineno":114,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037845","name":"exports.square2","type":"VariableDeclaration"}},"description":"<p>A square signal between -1 and 1 (like <code>square</code>, but bipolar).</p>","returns":[{"type":{"names":["Pattern"]}}],"name":"square2","longname":"square2","kind":"constant","scope":"global"},{"comment":"/**\\n *  A triangle signal between 0 and 1.\\n *\\n * @return {Pattern}\\n * @example\\n * n(tri.segment(8).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"range":[3316,3354],"filename":"signal.mjs","lineno":124,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037853","name":"exports.tri","type":"VariableDeclaration"}},"description":"<p>A triangle signal between 0 and 1.</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["n(tri.segment(8).range(0,7)).scale(\\"C:minor\\")"],"name":"tri","longname":"tri","kind":"constant","scope":"global"},{"comment":"/**\\n *  A triangle signal between -1 and 1 (like \`tri\`, but bipolar).\\n *\\n * @return {Pattern}\\n */","meta":{"range":[3454,3495],"filename":"signal.mjs","lineno":131,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037861","name":"exports.tri2","type":"VariableDeclaration"}},"description":"<p>A triangle signal between -1 and 1 (like <code>tri</code>, but bipolar).</p>","returns":[{"type":{"names":["Pattern"]}}],"name":"tri2","longname":"tri2","kind":"constant","scope":"global"},{"comment":"/**\\n *  An inverted triangle signal between 1 and 0 (like \`tri\`, but flipped).\\n *\\n * @return {Pattern}\\n * @example\\n * n(itri.segment(8).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"range":[3669,3708],"filename":"signal.mjs","lineno":141,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037869","name":"exports.itri","type":"VariableDeclaration"}},"description":"<p>An inverted triangle signal between 1 and 0 (like <code>tri</code>, but flipped).</p>","returns":[{"type":{"names":["Pattern"]}}],"examples":["n(itri.segment(8).range(0,7)).scale(\\"C:minor\\")"],"name":"itri","longname":"itri","kind":"constant","scope":"global"},{"comment":"/**\\n *  An inverted triangle signal between -1 and 1 (like \`itri\`, but bipolar).\\n *\\n * @return {Pattern}\\n */","meta":{"range":[3819,3861],"filename":"signal.mjs","lineno":148,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037877","name":"exports.itri2","type":"VariableDeclaration"}},"description":"<p>An inverted triangle signal between -1 and 1 (like <code>itri</code>, but bipolar).</p>","returns":[{"type":{"names":["Pattern"]}}],"name":"itri2","longname":"itri2","kind":"constant","scope":"global"},{"comment":"/**\\n *  A signal representing the cycle time.\\n *\\n * @return {Pattern}\\n */","meta":{"range":[3937,3968],"filename":"signal.mjs","lineno":155,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100037885","name":"exports.time","type":"VariableDeclaration"}},"description":"<p>A signal representing the cycle time.</p>","returns":[{"type":{"names":["Pattern"]}}],"name":"time","longname":"time","kind":"constant","scope":"global"},{"comment":"/**\\n *  The mouse's x position value ranges from 0 to 1.\\n * @name mousex\\n * @return {Pattern}\\n * @example\\n * n(mousex.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"signal.mjs","lineno":157,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The mouse's x position value ranges from 0 to 1.</p>","name":"mousex","returns":[{"type":{"names":["Pattern"]}}],"examples":["n(mousex.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"mousex","kind":"member","scope":"global"},{"comment":"/**\\n *  The mouse's y position value ranges from 0 to 1.\\n * @name mousey\\n * @return {Pattern}\\n * @example\\n * n(mousey.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"signal.mjs","lineno":166,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>The mouse's y position value ranges from 0 to 1.</p>","name":"mousey","returns":[{"type":{"names":["Pattern"]}}],"examples":["n(mousey.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"mousey","kind":"member","scope":"global"},{"comment":"/**\\n * A discrete pattern of numbers from 0 to n-1\\n * @example\\n * n(run(4)).scale(\\"C4:pentatonic\\")\\n * // n(\\"0 1 2 3\\").scale(\\"C4:pentatonic\\")\\n */","meta":{"range":[5663,5724],"filename":"signal.mjs","lineno":228,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038102","name":"exports.run","type":"VariableDeclaration"}},"description":"<p>A discrete pattern of numbers from 0 to n-1</p>","examples":["n(run(4)).scale(\\"C4:pentatonic\\")\\n// n(\\"0 1 2 3\\").scale(\\"C4:pentatonic\\")"],"name":"run","longname":"run","kind":"constant","scope":"global"},{"comment":"/**\\n * Creates a pattern from a binary number.\\n *\\n * @name binary\\n * @param {number} n - input number to convert to binary\\n * @example\\n * \\"hh\\".s().struct(binary(5))\\n * // \\"hh\\".s().struct(\\"1 0 1\\")\\n */","meta":{"filename":"signal.mjs","lineno":230,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Creates a pattern from a binary number.</p>","name":"binary","params":[{"type":{"names":["number"]},"description":"<p>input number to convert to binary</p>","name":"n"}],"examples":["\\"hh\\".s().struct(binary(5))\\n// \\"hh\\".s().struct(\\"1 0 1\\")"],"longname":"binary","kind":"member","scope":"global"},{"comment":"/**\\n * Creates a pattern from a binary number, padded to n bits long.\\n *\\n * @name binaryN\\n * @param {number} n - input number to convert to binary\\n * @param {number} nBits - pattern length, defaults to 16\\n * @example\\n * \\"hh\\".s().struct(binaryN(55532, 16))\\n * // \\"hh\\".s().struct(\\"1 1 0 1 1 0 0 0 1 1 1 0 1 1 0 0\\")\\n */","meta":{"filename":"signal.mjs","lineno":244,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Creates a pattern from a binary number, padded to n bits long.</p>","name":"binaryN","params":[{"type":{"names":["number"]},"description":"<p>input number to convert to binary</p>","name":"n"},{"type":{"names":["number"]},"description":"<p>pattern length, defaults to 16</p>","name":"nBits"}],"examples":["\\"hh\\".s().struct(binaryN(55532, 16))\\n// \\"hh\\".s().struct(\\"1 1 0 1 1 0 0 0 1 1 1 0 1 1 0 0\\")"],"longname":"binaryN","kind":"member","scope":"global"},{"comment":"/**\\n * Slices a pattern into the given number of parts, then plays those parts in random order.\\n * Each part will be played exactly once per cycle.\\n * @name shuffle\\n * @example\\n * note(\\"c d e f\\").sound(\\"piano\\").shuffle(4)\\n * @example\\n * seq(\\"c d e f\\".shuffle(4), \\"g\\").note().sound(\\"piano\\")\\n */","meta":{"filename":"signal.mjs","lineno":279,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Slices a pattern into the given number of parts, then plays those parts in random order.\\nEach part will be played exactly once per cycle.</p>","name":"shuffle","examples":["note(\\"c d e f\\").sound(\\"piano\\").shuffle(4)","seq(\\"c d e f\\".shuffle(4), \\"g\\").note().sound(\\"piano\\")"],"longname":"shuffle","kind":"member","scope":"global"},{"comment":"/**\\n * Slices a pattern into the given number of parts, then plays those parts at random. Similar to \`shuffle\`,\\n * but parts might be played more than once, or not at all, per cycle.\\n * @name scramble\\n * @example\\n * note(\\"c d e f\\").sound(\\"piano\\").scramble(4)\\n * @example\\n * seq(\\"c d e f\\".scramble(4), \\"g\\").note().sound(\\"piano\\")\\n */","meta":{"filename":"signal.mjs","lineno":292,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Slices a pattern into the given number of parts, then plays those parts at random. Similar to <code>shuffle</code>,\\nbut parts might be played more than once, or not at all, per cycle.</p>","name":"scramble","examples":["note(\\"c d e f\\").sound(\\"piano\\").scramble(4)","seq(\\"c d e f\\".scramble(4), \\"g\\").note().sound(\\"piano\\")"],"longname":"scramble","kind":"member","scope":"global"},{"comment":"/**\\n * A continuous pattern of random numbers, between 0 and 1.\\n *\\n * @name rand\\n * @example\\n * // randomly change the cutoff\\n * s(\\"bd*4,hh*8\\").cutoff(rand.range(500,8000))\\n *\\n */","meta":{"filename":"signal.mjs","lineno":305,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>A continuous pattern of random numbers, between 0 and 1.</p>","name":"rand","examples":["// randomly change the cutoff\\ns(\\"bd*4,hh*8\\").cutoff(rand.range(500,8000))"],"longname":"rand","kind":"member","scope":"global"},{"comment":"/**\\n * A continuous pattern of random numbers, between -1 and 1\\n */","meta":{"range":[8355,8393],"filename":"signal.mjs","lineno":318,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038410","name":"exports.rand2","type":"VariableDeclaration"}},"description":"<p>A continuous pattern of random numbers, between -1 and 1</p>","name":"rand2","longname":"rand2","kind":"constant","scope":"global"},{"comment":"/**\\n * A continuous pattern of 0 or 1 (binary random), with a probability for the value being 1\\n *\\n * @name brandBy\\n * @param {number} probability - a number between 0 and 1\\n * @example\\n * s(\\"hh*10\\").pan(brandBy(0.2))\\n */","meta":{"filename":"signal.mjs","lineno":322,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>A continuous pattern of 0 or 1 (binary random), with a probability for the value being 1</p>","name":"brandBy","params":[{"type":{"names":["number"]},"description":"<p>a number between 0 and 1</p>","name":"probability"}],"examples":["s(\\"hh*10\\").pan(brandBy(0.2))"],"longname":"brandBy","kind":"member","scope":"global"},{"comment":"/**\\n * A continuous pattern of 0 or 1 (binary random)\\n *\\n * @name brand\\n * @example\\n * s(\\"hh*10\\").pan(brand)\\n */","meta":{"filename":"signal.mjs","lineno":332,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>A continuous pattern of 0 or 1 (binary random)</p>","name":"brand","examples":["s(\\"hh*10\\").pan(brand)"],"longname":"brand","kind":"member","scope":"global"},{"comment":"/**\\n * A continuous pattern of random integers, between 0 and n-1.\\n *\\n * @name irand\\n * @param {number} n max value (exclusive)\\n * @example\\n * // randomly select scale notes from 0 - 7 (= C to C)\\n * n(irand(8)).struct(\\"x x*2 x x*3\\").scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"signal.mjs","lineno":343,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>A continuous pattern of random integers, between 0 and n-1.</p>","name":"irand","params":[{"type":{"names":["number"]},"description":"<p>max value (exclusive)</p>","name":"n"}],"examples":["// randomly select scale notes from 0 - 7 (= C to C)\\nn(irand(8)).struct(\\"x x*2 x x*3\\").scale(\\"C:minor\\")"],"longname":"irand","kind":"member","scope":"global"},{"comment":"/**\\n * Choose from the list of values (or patterns of values) using the given\\n * pattern of numbers, which should be in the range of 0..1\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n * @example\\n * note(\\"c2 g2!2 d2 f1\\").s(chooseWith(sine.fast(2), [\\"sawtooth\\", \\"triangle\\", \\"bd:6\\"]))\\n */","meta":{"range":[9855,9942],"filename":"signal.mjs","lineno":375,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038557","name":"exports.chooseWith","type":"VariableDeclaration"}},"description":"<p>Choose from the list of values (or patterns of values) using the given\\npattern of numbers, which should be in the range of 0..1</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"examples":["note(\\"c2 g2!2 d2 f1\\").s(chooseWith(sine.fast(2), [\\"sawtooth\\", \\"triangle\\", \\"bd:6\\"]))"],"name":"chooseWith","longname":"chooseWith","kind":"constant","scope":"global"},{"comment":"/**\\n * As with {chooseWith}, but the structure comes from the chosen values, rather\\n * than the pattern you're using to choose with.\\n * @param {Pattern} pat\\n * @param {*} xs\\n * @returns {Pattern}\\n */","meta":{"range":[10144,10233],"filename":"signal.mjs","lineno":386,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038573","name":"exports.chooseInWith","type":"VariableDeclaration"}},"description":"<p>As with {chooseWith}, but the structure comes from the chosen values, rather\\nthan the pattern you're using to choose with.</p>","params":[{"type":{"names":["Pattern"]},"name":"pat"},{"type":{"names":["*"]},"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"chooseInWith","longname":"chooseInWith","kind":"constant","scope":"global"},{"comment":"/**\\n * Chooses randomly from the given list of elements.\\n * @param  {...any} xs values / patterns to choose from.\\n * @returns {Pattern} - a continuous pattern.\\n * @example\\n * note(\\"c2 g2!2 d2 f1\\").s(choose(\\"sine\\", \\"triangle\\", \\"bd:6\\"))\\n */","meta":{"range":[10474,10528],"filename":"signal.mjs","lineno":397,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038589","name":"exports.choose","type":"VariableDeclaration"}},"description":"<p>Chooses randomly from the given list of elements.</p>","params":[{"type":{"names":["any"]},"variable":true,"description":"<p>values / patterns to choose from.</p>","name":"xs"}],"returns":[{"type":{"names":["Pattern"]},"description":"<ul>\\n<li>a continuous pattern.</li>\\n</ul>"}],"examples":["note(\\"c2 g2!2 d2 f1\\").s(choose(\\"sine\\", \\"triangle\\", \\"bd:6\\"))"],"name":"choose","longname":"choose","kind":"constant","scope":"global"},{"comment":"/**\\n * Chooses from the given list of values (or patterns of values), according\\n * to the pattern that the method is called on. The pattern should be in\\n * the range 0 .. 1.\\n * @param  {...any} xs\\n * @returns {Pattern}\\n */","meta":{"range":[10859,10937],"filename":"signal.mjs","lineno":410,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038617","name":"Pattern.prototype.choose","type":"FunctionExpression","paramnames":["xs"]}},"description":"<p>Chooses from the given list of values (or patterns of values), according\\nto the pattern that the method is called on. The pattern should be in\\nthe range 0 .. 1.</p>","params":[{"type":{"names":["any"]},"variable":true,"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"choose","longname":"Pattern#choose","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n * As with choose, but the pattern that this method is called on should be\\n * in the range -1 .. 1\\n * @param  {...any} xs\\n * @returns {Pattern}\\n */","meta":{"range":[11092,11185],"filename":"signal.mjs","lineno":420,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038633","name":"Pattern.prototype.choose2","type":"FunctionExpression","paramnames":["xs"]}},"description":"<p>As with choose, but the pattern that this method is called on should be\\nin the range -1 .. 1</p>","params":[{"type":{"names":["any"]},"variable":true,"name":"xs"}],"returns":[{"type":{"names":["Pattern"]}}],"name":"choose2","longname":"Pattern#choose2","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n * Picks one of the elements at random each cycle.\\n * @synonyms randcat\\n * @returns {Pattern}\\n * @example\\n * chooseCycles(\\"bd\\", \\"hh\\", \\"sd\\").s().fast(8)\\n * @example\\n * s(\\"bd | hh | sd\\").fast(8)\\n */","meta":{"range":[11389,11462],"filename":"signal.mjs","lineno":433,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038651","name":"exports.chooseCycles","type":"VariableDeclaration"}},"description":"<p>Picks one of the elements at random each cycle.</p>","synonyms_text":"randcat","synonyms":["randcat"],"returns":[{"type":{"names":["Pattern"]}}],"examples":["chooseCycles(\\"bd\\", \\"hh\\", \\"sd\\").s().fast(8)","s(\\"bd | hh | sd\\").fast(8)"],"name":"chooseCycles","longname":"chooseCycles","kind":"constant","scope":"global"},{"comment":"/**\\n * Chooses randomly from the given list of elements by giving a probability to each element\\n * @param {...any} pairs arrays of value and weight\\n * @returns {Pattern} - a continuous pattern.\\n * @example\\n * note(\\"c2 g2!2 d2 f1\\").s(wchoose([\\"sine\\",10], [\\"triangle\\",1], [\\"bd:6\\",1]))\\n */","meta":{"range":[12754,12819],"filename":"signal.mjs","lineno":473,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038789","name":"exports.wchoose","type":"VariableDeclaration"}},"description":"<p>Chooses randomly from the given list of elements by giving a probability to each element</p>","params":[{"type":{"names":["any"]},"variable":true,"description":"<p>arrays of value and weight</p>","name":"pairs"}],"returns":[{"type":{"names":["Pattern"]},"description":"<ul>\\n<li>a continuous pattern.</li>\\n</ul>"}],"examples":["note(\\"c2 g2!2 d2 f1\\").s(wchoose([\\"sine\\",10], [\\"triangle\\",1], [\\"bd:6\\",1]))"],"name":"wchoose","longname":"wchoose","kind":"constant","scope":"global"},{"comment":"/**\\n * Picks one of the elements at random each cycle by giving a probability to each element\\n * @synonyms wrandcat\\n * @returns {Pattern}\\n * @example\\n * wchooseCycles([\\"bd\\",10], [\\"hh\\",1], [\\"sd\\",1]).s().fast(8)\\n * @example\\n * wchooseCycles([\\"bd bd bd\\",5], [\\"hh hh hh\\",3], [\\"sd sd sd\\",1]).fast(4).s()\\n * @example\\n * // The probability can itself be a pattern\\n * wchooseCycles([\\"bd(3,8)\\",\\"<5 0>\\"], [\\"hh hh hh\\",3]).fast(4).s()\\n */","meta":{"range":[13248,13343],"filename":"signal.mjs","lineno":487,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100038801","name":"exports.wchooseCycles","type":"VariableDeclaration"}},"description":"<p>Picks one of the elements at random each cycle by giving a probability to each element</p>","synonyms_text":"wrandcat","synonyms":["wrandcat"],"returns":[{"type":{"names":["Pattern"]}}],"examples":["wchooseCycles([\\"bd\\",10], [\\"hh\\",1], [\\"sd\\",1]).s().fast(8)","wchooseCycles([\\"bd bd bd\\",5], [\\"hh hh hh\\",3], [\\"sd sd sd\\",1]).fast(4).s()","// The probability can itself be a pattern\\nwchooseCycles([\\"bd(3,8)\\",\\"<5 0>\\"], [\\"hh hh hh\\",3]).fast(4).s()"],"name":"wchooseCycles","longname":"wchooseCycles","kind":"constant","scope":"global"},{"comment":"/**\\n * Generates a continuous pattern of [perlin noise](https://en.wikipedia.org/wiki/Perlin_noise), in the range 0..1.\\n *\\n * @name perlin\\n * @example\\n * // randomly change the cutoff\\n * s(\\"bd*4,hh*8\\").cutoff(perlin.range(500,8000))\\n *\\n */","meta":{"filename":"signal.mjs","lineno":521,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Generates a continuous pattern of <a href=\\"https://en.wikipedia.org/wiki/Perlin_noise\\">perlin noise</a>, in the range 0..1.</p>","name":"perlin","examples":["// randomly change the cutoff\\ns(\\"bd*4,hh*8\\").cutoff(perlin.range(500,8000))"],"longname":"perlin","kind":"member","scope":"global"},{"comment":"/**\\n * Generates a continuous pattern of [berlin noise](conceived by Jame Coyne and Jade Rowland as a joke but turned out to be surprisingly cool and useful,\\n * like perlin noise but with sawtooth waves), in the range 0..1.\\n *\\n * @name berlin\\n * @example\\n * // ascending arpeggios\\n * n(\\"0!16\\".add(berlin.fast(4).mul(14))).scale(\\"d:minor\\")\\n *\\n */","meta":{"filename":"signal.mjs","lineno":532,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Generates a continuous pattern of [berlin noise](conceived by Jame Coyne and Jade Rowland as a joke but turned out to be surprisingly cool and useful,\\nlike perlin noise but with sawtooth waves), in the range 0..1.</p>","name":"berlin","examples":["// ascending arpeggios\\nn(\\"0!16\\".add(berlin.fast(4).mul(14))).scale(\\"d:minor\\")"],"longname":"berlin","kind":"member","scope":"global"},{"comment":"/**\\n * Randomly removes events from the pattern by a given amount.\\n * 0 = 0% chance of removal\\n * 1 = 100% chance of removal\\n *\\n * @name degradeBy\\n * @memberof Pattern\\n * @param {number} amount - a number between 0 and 1\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").degradeBy(0.2)\\n * @example\\n * s(\\"[hh?0.2]*8\\")\\n * @example\\n * //beat generator\\n * s(\\"bd\\").segment(16).degradeBy(.5).ribbon(16,1)\\n */","meta":{"filename":"signal.mjs","lineno":551,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Randomly removes events from the pattern by a given amount.\\n0 = 0% chance of removal\\n1 = 100% chance of removal</p>","name":"degradeBy","memberof":"Pattern","params":[{"type":{"names":["number"]},"description":"<p>a number between 0 and 1</p>","name":"amount"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").degradeBy(0.2)","s(\\"[hh?0.2]*8\\")","//beat generator\\ns(\\"bd\\").segment(16).degradeBy(.5).ribbon(16,1)"],"scope":"static","longname":"Pattern.degradeBy","kind":"member"},{"comment":"/**\\n *\\n * Randomly removes 50% of events from the pattern. Shorthand for \`.degradeBy(0.5)\`\\n *\\n * @name degrade\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").degrade()\\n * @example\\n * s(\\"[hh?]*8\\")\\n */","meta":{"filename":"signal.mjs","lineno":577,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Randomly removes 50% of events from the pattern. Shorthand for <code>.degradeBy(0.5)</code></p>","name":"degrade","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").degrade()","s(\\"[hh?]*8\\")"],"scope":"static","longname":"Pattern.degrade","kind":"member"},{"comment":"/**\\n * Inverse of \`degradeBy\`: Randomly removes events from the pattern by a given amount.\\n * 0 = 100% chance of removal\\n * 1 = 0% chance of removal\\n * Events that would be removed by degradeBy are let through by undegradeBy and vice versa (see second example).\\n *\\n * @name undegradeBy\\n * @memberof Pattern\\n * @param {number} amount - a number between 0 and 1\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").undegradeBy(0.2)\\n * @example\\n * s(\\"hh*10\\").layer(\\n *   x => x.degradeBy(0.2).pan(0),\\n *   x => x.undegradeBy(0.8).pan(1)\\n * )\\n */","meta":{"filename":"signal.mjs","lineno":591,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Inverse of <code>degradeBy</code>: Randomly removes events from the pattern by a given amount.\\n0 = 100% chance of removal\\n1 = 0% chance of removal\\nEvents that would be removed by degradeBy are let through by undegradeBy and vice versa (see second example).</p>","name":"undegradeBy","memberof":"Pattern","params":[{"type":{"names":["number"]},"description":"<p>a number between 0 and 1</p>","name":"amount"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").undegradeBy(0.2)","s(\\"hh*10\\").layer(\\n  x => x.degradeBy(0.2).pan(0),\\n  x => x.undegradeBy(0.8).pan(1)\\n)"],"scope":"static","longname":"Pattern.undegradeBy","kind":"member"},{"comment":"/**\\n * Inverse of \`degrade\`: Randomly removes 50% of events from the pattern. Shorthand for \`.undegradeBy(0.5)\`\\n * Events that would be removed by degrade are let through by undegrade and vice versa (see second example).\\n *\\n * @name undegrade\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").undegrade()\\n * @example\\n * s(\\"hh*10\\").layer(\\n *   x => x.degrade().pan(0),\\n *   x => x.undegrade().pan(1)\\n * )\\n */","meta":{"filename":"signal.mjs","lineno":621,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Inverse of <code>degrade</code>: Randomly removes 50% of events from the pattern. Shorthand for <code>.undegradeBy(0.5)</code>\\nEvents that would be removed by degrade are let through by undegrade and vice versa (see second example).</p>","name":"undegrade","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").undegrade()","s(\\"hh*10\\").layer(\\n  x => x.degrade().pan(0),\\n  x => x.undegrade().pan(1)\\n)"],"scope":"static","longname":"Pattern.undegrade","kind":"member"},{"comment":"/**\\n *\\n * Randomly applies the given function by the given probability.\\n * Similar to \`someCyclesBy\`\\n *\\n * @name sometimesBy\\n * @memberof Pattern\\n * @param {number | Pattern} probability - a number between 0 and 1\\n * @param {function} function - the transformation to apply\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").sometimesBy(.4, x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":638,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Randomly applies the given function by the given probability.\\nSimilar to <code>someCyclesBy</code></p>","name":"sometimesBy","memberof":"Pattern","params":[{"type":{"names":["number","Pattern"]},"description":"<p>a number between 0 and 1</p>","name":"probability"},{"type":{"names":["function"]},"description":"<p>the transformation to apply</p>","name":"function"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").sometimesBy(.4, x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.sometimesBy","kind":"member"},{"comment":"/**\\n *\\n * Applies the given function with a 50% chance\\n *\\n * @name sometimes\\n * @memberof Pattern\\n * @param {function} function - the transformation to apply\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").sometimes(x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":658,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Applies the given function with a 50% chance</p>","name":"sometimes","memberof":"Pattern","params":[{"type":{"names":["function"]},"description":"<p>the transformation to apply</p>","name":"function"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").sometimes(x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.sometimes","kind":"member"},{"comment":"/**\\n *\\n * Randomly applies the given function by the given probability on a cycle by cycle basis.\\n * Similar to \`sometimesBy\`\\n *\\n * @name someCyclesBy\\n * @memberof Pattern\\n * @param {number | Pattern} probability - a number between 0 and 1\\n * @param {function} function - the transformation to apply\\n * @returns Pattern\\n * @example\\n * s(\\"bd,hh*8\\").someCyclesBy(.3, x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":673,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Randomly applies the given function by the given probability on a cycle by cycle basis.\\nSimilar to <code>sometimesBy</code></p>","name":"someCyclesBy","memberof":"Pattern","params":[{"type":{"names":["number","Pattern"]},"description":"<p>a number between 0 and 1</p>","name":"probability"},{"type":{"names":["function"]},"description":"<p>the transformation to apply</p>","name":"function"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"bd,hh*8\\").someCyclesBy(.3, x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.someCyclesBy","kind":"member"},{"comment":"/**\\n *\\n * Shorthand for \`.someCyclesBy(0.5, fn)\`\\n *\\n * @name someCycles\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"bd,hh*8\\").someCycles(x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":698,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shorthand for <code>.someCyclesBy(0.5, fn)</code></p>","name":"someCycles","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"bd,hh*8\\").someCycles(x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.someCycles","kind":"member"},{"comment":"/**\\n *\\n * Shorthand for \`.sometimesBy(0.75, fn)\`\\n *\\n * @name often\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").often(x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":712,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shorthand for <code>.sometimesBy(0.75, fn)</code></p>","name":"often","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").often(x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.often","kind":"member"},{"comment":"/**\\n *\\n * Shorthand for \`.sometimesBy(0.25, fn)\`\\n *\\n * @name rarely\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").rarely(x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":726,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shorthand for <code>.sometimesBy(0.25, fn)</code></p>","name":"rarely","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").rarely(x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.rarely","kind":"member"},{"comment":"/**\\n *\\n * Shorthand for \`.sometimesBy(0.1, fn)\`\\n *\\n * @name almostNever\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").almostNever(x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":740,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shorthand for <code>.sometimesBy(0.1, fn)</code></p>","name":"almostNever","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").almostNever(x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.almostNever","kind":"member"},{"comment":"/**\\n *\\n * Shorthand for \`.sometimesBy(0.9, fn)\`\\n *\\n * @name almostAlways\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").almostAlways(x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":754,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shorthand for <code>.sometimesBy(0.9, fn)</code></p>","name":"almostAlways","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").almostAlways(x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.almostAlways","kind":"member"},{"comment":"/**\\n *\\n * Shorthand for \`.sometimesBy(0, fn)\` (never calls fn)\\n *\\n * @name never\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").never(x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":768,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shorthand for <code>.sometimesBy(0, fn)</code> (never calls fn)</p>","name":"never","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").never(x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.never","kind":"member"},{"comment":"/**\\n *\\n * Shorthand for \`.sometimesBy(1, fn)\` (always calls fn)\\n *\\n * @name always\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"hh*8\\").always(x=>x.speed(\\"0.5\\"))\\n */","meta":{"filename":"signal.mjs","lineno":782,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Shorthand for <code>.sometimesBy(1, fn)</code> (always calls fn)</p>","name":"always","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"hh*8\\").always(x=>x.speed(\\"0.5\\"))"],"scope":"static","longname":"Pattern.always","kind":"member"},{"comment":"/**\\n *\\n * Do something on a keypress, or array of keypresses\\n * [Key name reference](https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values)\\n *\\n * @name whenKey\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * s(\\"bd(5,8)\\").whenKey(\\"Control:j\\", x => x.segment(16).color(\\"red\\")).whenKey(\\"Control:i\\", x => x.fast(2).color(\\"blue\\"))\\n */","meta":{"filename":"signal.mjs","lineno":809,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>Do something on a keypress, or array of keypresses\\n<a href=\\"https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values\\">Key name reference</a></p>","name":"whenKey","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["s(\\"bd(5,8)\\").whenKey(\\"Control:j\\", x => x.segment(16).color(\\"red\\")).whenKey(\\"Control:i\\", x => x.fast(2).color(\\"blue\\"))"],"scope":"static","longname":"Pattern.whenKey","kind":"member"},{"comment":"/**\\n *\\n * returns true when a key or array of keys is held\\n * [Key name reference](https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values)\\n *\\n * @name keyDown\\n * @memberof Pattern\\n * @returns Pattern\\n * @example\\n * keyDown(\\"Control:j\\").pick([s(\\"bd(5,8)\\"), s(\\"cp(3,8)\\")])\\n */","meta":{"filename":"signal.mjs","lineno":825,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{}},"description":"<p>returns true when a key or array of keys is held\\n<a href=\\"https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values\\">Key name reference</a></p>","name":"keyDown","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"examples":["keyDown(\\"Control:j\\").pick([s(\\"bd(5,8)\\"), s(\\"cp(3,8)\\")])"],"scope":"static","longname":"Pattern.keyDown","kind":"member"},{"comment":"/**\\n * @deprecated does not appear to be referenced or invoked anywhere in the codebase\\n * @noAutocomplete\\n */","meta":{"range":[2816,2983],"filename":"util.mjs","lineno":73,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100052618","name":"exports.getFreq","type":"VariableDeclaration"}},"deprecated":"does not appear to be referenced or invoked anywhere in the codebase","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"getFreq","longname":"getFreq","kind":"constant","scope":"global"},{"comment":"/**\\n * @deprecated only used in workshop (first-notes)\\n * @noAutocomplete\\n */","meta":{"range":[3142,3261],"filename":"util.mjs","lineno":85,"columnno":0,"path":"/home/alex/src/strudel/packages/core","code":{"id":"astnode100052657","name":"exports.midi2note","type":"VariableDeclaration"}},"deprecated":"only used in workshop (first-notes)","tags":[{"originalTitle":"noAutocomplete","title":"noautocomplete","text":""}],"name":"midi2note","longname":"midi2note","kind":"constant","scope":"global"},{"comment":"/**\\n * Sends notes to Csound for rendering with MIDI semantics. The hap value is\\n * translated to these Csound pfields:\\n *\\n *  p1 -- Csound instrument either as a number (1-based, can be a fraction),\\n *        or as a string name.\\n *  p2 -- time in beats (usually seconds) from start of performance.\\n *  p3 -- duration in beats (usually seconds).\\n *  p4 -- MIDI key number (as a real number, not an integer but in [0, 127].\\n *  p5 -- MIDI velocity (as a real number, not an integer but in [0, 127].\\n *  p6 -- Strudel controls, as a string.\\n */","meta":{"range":[4679,6063],"filename":"index.mjs","lineno":139,"columnno":0,"path":"/home/alex/src/strudel/packages/csound","code":{"id":"astnode100055261","name":"exports.csoundm","type":"VariableDeclaration"}},"description":"<p>Sends notes to Csound for rendering with MIDI semantics. The hap value is\\ntranslated to these Csound pfields:</p>\\n<p>p1 -- Csound instrument either as a number (1-based, can be a fraction),\\nor as a string name.\\np2 -- time in beats (usually seconds) from start of performance.\\np3 -- duration in beats (usually seconds).\\np4 -- MIDI key number (as a real number, not an integer but in [0, 127].\\np5 -- MIDI velocity (as a real number, not an integer but in [0, 127].\\np6 -- Strudel controls, as a string.</p>","name":"csoundm","longname":"csoundm","kind":"constant","scope":"global"},{"comment":"/**\\n * Visualises a pattern as a scrolling 'pianoroll', displayed in the background of the editor. To show a pianoroll for all running patterns, use \`all(pianoroll)\`. To have a pianoroll appear below\\n * a pattern instead, prefix with \`_\`, e.g.: \`sound(\\"bd sd\\")._pianoroll()\`.\\n *\\n * @name pianoroll\\n * @synonyms punchcard\\n * @param {Object} options Object containing all the optional following parameters as key value pairs:\\n * @param {integer} cycles number of cycles to be displayed at the same time - defaults to 4\\n * @param {number} playhead location of the active notes on the time axis - 0 to 1, defaults to 0.5\\n * @param {boolean} vertical displays the roll vertically - 0 by default\\n * @param {boolean} labels displays labels on individual notes (see the label function) - 0 by default\\n * @param {boolean} flipTime reverse the direction of the roll - 0 by default\\n * @param {boolean} flipValues reverse the relative location of notes on the value axis - 0 by default\\n * @param {number} overscan lookup X cycles outside of the cycles window to display notes in advance - 1 by default\\n * @param {boolean} hideNegative hide notes with negative time (before starting playing the pattern) - 0 by default\\n * @param {boolean} smear notes leave a solid trace - 0 by default\\n * @param {boolean} fold notes takes the full value axis width - 0 by default\\n * @param {string} active hexadecimal or CSS color of the active notes - defaults to #FFCA28\\n * @param {string} inactive hexadecimal or CSS color of the inactive notes - defaults to #7491D2\\n * @param {string} background hexadecimal or CSS color of the background - defaults to transparent\\n * @param {string} playheadColor hexadecimal or CSS color of the line representing the play head - defaults to white\\n * @param {boolean} fill notes are filled with color (otherwise only the label is displayed) - 0 by default\\n * @param {boolean} fillActive active notes are filled with color - 0 by default\\n * @param {boolean} stroke notes are shown with colored borders - 0 by default\\n * @param {boolean} strokeActive active notes are shown with colored borders - 0 by default\\n * @param {boolean} hideInactive only active notes are shown - 0 by default\\n * @param {boolean} colorizeInactive use note color for inactive notes - 1 by default\\n * @param {string} fontFamily define the font used by notes labels - defaults to 'monospace'\\n * @param {integer} minMidi minimum note value to display on the value axis - defaults to 10\\n * @param {integer} maxMidi maximum note value to display on the value axis - defaults to 90\\n * @param {boolean} autorange automatically calculate the minMidi and maxMidi parameters - 0 by default\\n * @see _pianoroll\\n * @example\\n * note(\\"c2 a2 eb2\\")\\n * .euclid(5,8)\\n * .s('sawtooth')\\n * .lpenv(4).lpf(300)\\n * .pianoroll({ labels: 1 })\\n */","meta":{"filename":"pianoroll.mjs","lineno":39,"columnno":0,"path":"/home/alex/src/strudel/packages/draw","code":{}},"description":"<p>Visualises a pattern as a scrolling 'pianoroll', displayed in the background of the editor. To show a pianoroll for all running patterns, use <code>all(pianoroll)</code>. To have a pianoroll appear below\\na pattern instead, prefix with <code>_</code>, e.g.: <code>sound(&quot;bd sd&quot;)._pianoroll()</code>.</p>","name":"pianoroll","synonyms_text":"punchcard","synonyms":["punchcard"],"params":[{"type":{"names":["Object"]},"description":"<p>Object containing all the optional following parameters as key value pairs:</p>","name":"options"},{"type":{"names":["integer"]},"description":"<p>number of cycles to be displayed at the same time - defaults to 4</p>","name":"cycles"},{"type":{"names":["number"]},"description":"<p>location of the active notes on the time axis - 0 to 1, defaults to 0.5</p>","name":"playhead"},{"type":{"names":["boolean"]},"description":"<p>displays the roll vertically - 0 by default</p>","name":"vertical"},{"type":{"names":["boolean"]},"description":"<p>displays labels on individual notes (see the label function) - 0 by default</p>","name":"labels"},{"type":{"names":["boolean"]},"description":"<p>reverse the direction of the roll - 0 by default</p>","name":"flipTime"},{"type":{"names":["boolean"]},"description":"<p>reverse the relative location of notes on the value axis - 0 by default</p>","name":"flipValues"},{"type":{"names":["number"]},"description":"<p>lookup X cycles outside of the cycles window to display notes in advance - 1 by default</p>","name":"overscan"},{"type":{"names":["boolean"]},"description":"<p>hide notes with negative time (before starting playing the pattern) - 0 by default</p>","name":"hideNegative"},{"type":{"names":["boolean"]},"description":"<p>notes leave a solid trace - 0 by default</p>","name":"smear"},{"type":{"names":["boolean"]},"description":"<p>notes takes the full value axis width - 0 by default</p>","name":"fold"},{"type":{"names":["string"]},"description":"<p>hexadecimal or CSS color of the active notes - defaults to #FFCA28</p>","name":"active"},{"type":{"names":["string"]},"description":"<p>hexadecimal or CSS color of the inactive notes - defaults to #7491D2</p>","name":"inactive"},{"type":{"names":["string"]},"description":"<p>hexadecimal or CSS color of the background - defaults to transparent</p>","name":"background"},{"type":{"names":["string"]},"description":"<p>hexadecimal or CSS color of the line representing the play head - defaults to white</p>","name":"playheadColor"},{"type":{"names":["boolean"]},"description":"<p>notes are filled with color (otherwise only the label is displayed) - 0 by default</p>","name":"fill"},{"type":{"names":["boolean"]},"description":"<p>active notes are filled with color - 0 by default</p>","name":"fillActive"},{"type":{"names":["boolean"]},"description":"<p>notes are shown with colored borders - 0 by default</p>","name":"stroke"},{"type":{"names":["boolean"]},"description":"<p>active notes are shown with colored borders - 0 by default</p>","name":"strokeActive"},{"type":{"names":["boolean"]},"description":"<p>only active notes are shown - 0 by default</p>","name":"hideInactive"},{"type":{"names":["boolean"]},"description":"<p>use note color for inactive notes - 1 by default</p>","name":"colorizeInactive"},{"type":{"names":["string"]},"description":"<p>define the font used by notes labels - defaults to 'monospace'</p>","name":"fontFamily"},{"type":{"names":["integer"]},"description":"<p>minimum note value to display on the value axis - defaults to 10</p>","name":"minMidi"},{"type":{"names":["integer"]},"description":"<p>maximum note value to display on the value axis - defaults to 90</p>","name":"maxMidi"},{"type":{"names":["boolean"]},"description":"<p>automatically calculate the minMidi and maxMidi parameters - 0 by default</p>","name":"autorange"}],"see":["_pianoroll"],"examples":["note(\\"c2 a2 eb2\\")\\n.euclid(5,8)\\n.s('sawtooth')\\n.lpenv(4).lpf(300)\\n.pianoroll({ labels: 1 })"],"longname":"pianoroll","kind":"member","scope":"global"},{"comment":"/**\\n * Displays a vertical pianoroll with event labels.\\n * Supports all the same options as pianoroll.\\n *\\n * @name wordfall\\n */","meta":{"filename":"pianoroll.mjs","lineno":297,"columnno":0,"path":"/home/alex/src/strudel/packages/draw","code":{}},"description":"<p>Displays a vertical pianoroll with event labels.\\nSupports all the same options as pianoroll.</p>","name":"wordfall","longname":"wordfall","kind":"member","scope":"global"},{"comment":"/**\\n * Renders a pitch circle to visualize frequencies within one octave\\n * @name pitchwheel\\n * @param {number} hapcircles\\n * @param {number} circle\\n * @param {number} edo\\n * @param {string} root\\n * @param {number} thickness\\n * @param {number} hapRadius\\n * @param {string} mode\\n * @param {number} margin\\n * @example\\n * n(\\"0 .. 12\\").scale(\\"C:chromatic\\")\\n * .s(\\"sawtooth\\")\\n * .lpf(500)\\n * ._pitchwheel()\\n */","meta":{"filename":"pitchwheel.mjs","lineno":116,"columnno":0,"path":"/home/alex/src/strudel/packages/draw","code":{}},"description":"<p>Renders a pitch circle to visualize frequencies within one octave</p>","name":"pitchwheel","params":[{"type":{"names":["number"]},"name":"hapcircles"},{"type":{"names":["number"]},"name":"circle"},{"type":{"names":["number"]},"name":"edo"},{"type":{"names":["string"]},"name":"root"},{"type":{"names":["number"]},"name":"thickness"},{"type":{"names":["number"]},"name":"hapRadius"},{"type":{"names":["string"]},"name":"mode"},{"type":{"names":["number"]},"name":"margin"}],"examples":["n(\\"0 .. 12\\").scale(\\"C:chromatic\\")\\n.s(\\"sawtooth\\")\\n.lpf(500)\\n._pitchwheel()"],"longname":"pitchwheel","kind":"member","scope":"global"},{"comment":"/**\\n * Displays a spiral visual.\\n *\\n * @name spiral\\n * @param {Object} options Object containing all the optional following parameters as key value pairs:\\n * @param {number} stretch controls the rotations per cycle ratio, where 1 = 1 cycle / 360 degrees\\n * @param {number} size the diameter of the spiral\\n * @param {number} thickness line thickness\\n * @param {string} cap style of line ends: butt (default), round, square\\n * @param {string} inset number of rotations before spiral starts (default 3)\\n * @param {string} playheadColor color of playhead, defaults to white\\n * @param {number} playheadLength length of playhead in rotations, defaults to 0.02\\n * @param {number} playheadThickness thickness of playheadrotations, defaults to thickness\\n * @param {number} padding space around spiral\\n * @param {number} steady steadyness of spiral vs playhead. 1 = spiral doesn't move, playhead does.\\n * @param {number} activeColor color of active segment. defaults to foreground of theme\\n * @param {number} inactiveColor color of inactive segments. defaults to gutterForeground of theme\\n * @param {boolean} colorizeInactive wether or not to colorize inactive segments, defaults to 0\\n * @param {boolean} fade wether or not past and future should fade out. defaults to 1\\n * @param {boolean} logSpiral wether or not the spiral should be logarithmic. defaults to 0\\n * @example\\n * note(\\"c2 a2 eb2\\")\\n * .euclid(5,8)\\n * .s('sawtooth')\\n * .lpenv(4).lpf(300)\\n * ._spiral({ steady: .96 })\\n */","meta":{"filename":"spiral.mjs","lineno":128,"columnno":0,"path":"/home/alex/src/strudel/packages/draw","code":{}},"description":"<p>Displays a spiral visual.</p>","name":"spiral","params":[{"type":{"names":["Object"]},"description":"<p>Object containing all the optional following parameters as key value pairs:</p>","name":"options"},{"type":{"names":["number"]},"description":"<p>controls the rotations per cycle ratio, where 1 = 1 cycle / 360 degrees</p>","name":"stretch"},{"type":{"names":["number"]},"description":"<p>the diameter of the spiral</p>","name":"size"},{"type":{"names":["number"]},"description":"<p>line thickness</p>","name":"thickness"},{"type":{"names":["string"]},"description":"<p>style of line ends: butt (default), round, square</p>","name":"cap"},{"type":{"names":["string"]},"description":"<p>number of rotations before spiral starts (default 3)</p>","name":"inset"},{"type":{"names":["string"]},"description":"<p>color of playhead, defaults to white</p>","name":"playheadColor"},{"type":{"names":["number"]},"description":"<p>length of playhead in rotations, defaults to 0.02</p>","name":"playheadLength"},{"type":{"names":["number"]},"description":"<p>thickness of playheadrotations, defaults to thickness</p>","name":"playheadThickness"},{"type":{"names":["number"]},"description":"<p>space around spiral</p>","name":"padding"},{"type":{"names":["number"]},"description":"<p>steadyness of spiral vs playhead. 1 = spiral doesn't move, playhead does.</p>","name":"steady"},{"type":{"names":["number"]},"description":"<p>color of active segment. defaults to foreground of theme</p>","name":"activeColor"},{"type":{"names":["number"]},"description":"<p>color of inactive segments. defaults to gutterForeground of theme</p>","name":"inactiveColor"},{"type":{"names":["boolean"]},"description":"<p>wether or not to colorize inactive segments, defaults to 0</p>","name":"colorizeInactive"},{"type":{"names":["boolean"]},"description":"<p>wether or not past and future should fade out. defaults to 1</p>","name":"fade"},{"type":{"names":["boolean"]},"description":"<p>wether or not the spiral should be logarithmic. defaults to 0</p>","name":"logSpiral"}],"examples":["note(\\"c2 a2 eb2\\")\\n.euclid(5,8)\\n.s('sawtooth')\\n.lpenv(4).lpf(300)\\n._spiral({ steady: .96 })"],"longname":"spiral","kind":"member","scope":"global"},{"comment":"/**\\n * configures the default midimap, which is used when no \\"midimap\\" port is set\\n * @example\\n * defaultmidimap({ lpf: 74 })\\n * $: note(\\"c a f e\\").midi();\\n * $: lpf(sine.slow(4).segment(16)).midi();\\n */","meta":{"range":[4416,4515],"filename":"midi.mjs","lineno":131,"columnno":0,"path":"/home/alex/src/strudel/packages/midi","code":{"id":"astnode100063183","name":"exports.defaultmidimap","type":"FunctionDeclaration","paramnames":["mapping"]}},"description":"<p>configures the default midimap, which is used when no &quot;midimap&quot; port is set</p>","examples":["defaultmidimap({ lpf: 74 })\\n$: note(\\"c a f e\\").midi();\\n$: lpf(sine.slow(4).segment(16)).midi();"],"name":"defaultmidimap","longname":"defaultmidimap","kind":"function","scope":"global"},{"comment":"/**\\n * Adds midimaps to the registry. Inside each midimap, control names (e.g. lpf) are mapped to cc numbers.\\n * @example\\n * midimaps({ mymap: { lpf: 74 } })\\n * $: note(\\"c a f e\\")\\n * .lpf(sine.slow(4))\\n * .midimap('mymap')\\n * .midi()\\n * @example\\n * midimaps({ mymap: {\\n *   lpf: { ccn: 74, min: 0, max: 20000, exp: 0.5 }\\n * }})\\n * $: note(\\"c a f e\\")\\n * .lpf(sine.slow(2).range(400,2000))\\n * .midimap('mymap')\\n * .midi()\\n */","meta":{"range":[4962,5392],"filename":"midi.mjs","lineno":154,"columnno":0,"path":"/home/alex/src/strudel/packages/midi","code":{"id":"astnode100063201","name":"exports.midimaps","type":"FunctionDeclaration","paramnames":["map"]}},"description":"<p>Adds midimaps to the registry. Inside each midimap, control names (e.g. lpf) are mapped to cc numbers.</p>","examples":["midimaps({ mymap: { lpf: 74 } })\\n$: note(\\"c a f e\\")\\n.lpf(sine.slow(4))\\n.midimap('mymap')\\n.midi()","midimaps({ mymap: {\\n  lpf: { ccn: 74, min: 0, max: 20000, exp: 0.5 }\\n}})\\n$: note(\\"c a f e\\")\\n.lpf(sine.slow(2).range(400,2000))\\n.midimap('mymap')\\n.midi()"],"name":"midimaps","longname":"midimaps","kind":"function","scope":"global"},{"comment":"/**\\n * MIDI output: Opens a MIDI output port.\\n * @param {string | number} midiport MIDI device name or index defaulting to 0\\n * @param {object} options Additional MIDI configuration options\\n * @example\\n * note(\\"c4\\").midichan(1).midi('IAC Driver Bus 1')\\n * @example\\n * note(\\"c4\\").midichan(1).midi('IAC Driver Bus 1', { controller: true, latency: 50 })\\n */","meta":{"range":[10343,16473],"filename":"midi.mjs","lineno":289,"columnno":0,"path":"/home/alex/src/strudel/packages/midi","code":{"id":"astnode100063852","name":"Pattern.prototype.midi","type":"FunctionExpression","paramnames":["midiport","options"]},"vars":{"undefined":null,"options":"Pattern#midi~options","midiport":"Pattern#midi~midiport","midiConfig":"Pattern#midi~midiConfig","":null}},"description":"<p>MIDI output: Opens a MIDI output port.</p>","params":[{"type":{"names":["string","number"]},"description":"<p>MIDI device name or index defaulting to 0</p>","name":"midiport"},{"type":{"names":["object"]},"description":"<p>Additional MIDI configuration options</p>","name":"options"}],"examples":["note(\\"c4\\").midichan(1).midi('IAC Driver Bus 1')","note(\\"c4\\").midichan(1).midi('IAC Driver Bus 1', { controller: true, latency: 50 })"],"name":"midi","longname":"Pattern#midi","kind":"function","memberof":"Pattern","scope":"instance"},{"comment":"/**\\n * MIDI input: Opens a MIDI input port to receive MIDI control change messages.\\n * @param {string | number} input MIDI device name or index defaulting to 0\\n * @returns {Function}\\n * @example\\n * let cc = await midin('IAC Driver Bus 1')\\n * note(\\"c a f e\\").lpf(cc(0).range(0, 1000)).lpq(cc(1).range(0, 10)).sound(\\"sawtooth\\")\\n */","meta":{"range":[16844,18118],"filename":"midi.mjs","lineno":474,"columnno":0,"path":"/home/alex/src/strudel/packages/midi","code":{"id":"astnode100064501","name":"exports.midin","type":"FunctionDeclaration","paramnames":["input"]}},"description":"<p>MIDI input: Opens a MIDI input port to receive MIDI control change messages.</p>","params":[{"type":{"names":["string","number"]},"description":"<p>MIDI device name or index defaulting to 0</p>","name":"input"}],"returns":[{"type":{"names":["function"]}}],"examples":["let cc = await midin('IAC Driver Bus 1')\\nnote(\\"c a f e\\").lpf(cc(0).range(0, 1000)).lpq(cc(1).range(0, 10)).sound(\\"sawtooth\\")"],"name":"midin","longname":"midin","kind":"function","scope":"global"},{"comment":"/**\\n *  The accelerometer's x-axis value ranges from 0 to 1.\\n * @name accelerationX\\n * @return {Pattern}\\n * @synonyms accX\\n * @example\\n * n(accelerationX.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":5,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The accelerometer's x-axis value ranges from 0 to 1.</p>","name":"accelerationX","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"accX","synonyms":["accX"],"examples":["n(accelerationX.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"accelerationX","kind":"member","scope":"global"},{"comment":"/**\\n *  The accelerometer's y-axis value ranges from 0 to 1.\\n * @name accelerationY\\n * @return {Pattern}\\n * @synonyms accY\\n * @example\\n * n(accelerationY.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":15,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The accelerometer's y-axis value ranges from 0 to 1.</p>","name":"accelerationY","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"accY","synonyms":["accY"],"examples":["n(accelerationY.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"accelerationY","kind":"member","scope":"global"},{"comment":"/**\\n *  The accelerometer's z-axis value ranges from 0 to 1.\\n * @name accelerationZ\\n * @return {Pattern}\\n * @synonyms accZ\\n * @example\\n * n(accelerationZ.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":25,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The accelerometer's z-axis value ranges from 0 to 1.</p>","name":"accelerationZ","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"accZ","synonyms":["accZ"],"examples":["n(accelerationZ.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"accelerationZ","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's gravity x-axis value ranges from 0 to 1.\\n * @name gravityX\\n * @return {Pattern}\\n * @synonyms gravX\\n * @example\\n * n(gravityX.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":35,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's gravity x-axis value ranges from 0 to 1.</p>","name":"gravityX","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"gravX","synonyms":["gravX"],"examples":["n(gravityX.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"gravityX","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's gravity y-axis value ranges from 0 to 1.\\n * @name gravityY\\n * @return {Pattern}\\n * @synonyms gravY\\n * @example\\n * n(gravityY.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":45,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's gravity y-axis value ranges from 0 to 1.</p>","name":"gravityY","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"gravY","synonyms":["gravY"],"examples":["n(gravityY.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"gravityY","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's gravity z-axis value ranges from 0 to 1.\\n * @name gravityZ\\n * @return {Pattern}\\n * @synonyms gravZ\\n * @example\\n * n(gravityZ.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":55,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's gravity z-axis value ranges from 0 to 1.</p>","name":"gravityZ","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"gravZ","synonyms":["gravZ"],"examples":["n(gravityZ.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"gravityZ","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's rotation around the alpha-axis value ranges from 0 to 1.\\n * @name rotationAlpha\\n * @return {Pattern}\\n * @synonyms rotA, rotZ, rotationZ\\n * @example\\n * n(rotationAlpha.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":65,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's rotation around the alpha-axis value ranges from 0 to 1.</p>","name":"rotationAlpha","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"rotA, rotZ, rotationZ","synonyms":["rotA","rotZ","rotationZ"],"examples":["n(rotationAlpha.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"rotationAlpha","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's rotation around the beta-axis value ranges from 0 to 1.\\n * @name rotationBeta\\n * @return {Pattern}\\n * @synonyms rotB, rotX, rotationX\\n * @example\\n * n(rotationBeta.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":75,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's rotation around the beta-axis value ranges from 0 to 1.</p>","name":"rotationBeta","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"rotB, rotX, rotationX","synonyms":["rotB","rotX","rotationX"],"examples":["n(rotationBeta.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"rotationBeta","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's rotation around the gamma-axis value ranges from 0 to 1.\\n * @name rotationGamma\\n * @return {Pattern}\\n * @synonyms rotG, rotY, rotationY\\n * @example\\n * n(rotationGamma.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":85,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's rotation around the gamma-axis value ranges from 0 to 1.</p>","name":"rotationGamma","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"rotG, rotY, rotationY","synonyms":["rotG","rotY","rotationY"],"examples":["n(rotationGamma.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"rotationGamma","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's orientation alpha value ranges from 0 to 1.\\n * @name orientationAlpha\\n * @return {Pattern}\\n * @synonyms oriA, oriZ, orientationZ\\n * @example\\n * n(orientationAlpha.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":95,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's orientation alpha value ranges from 0 to 1.</p>","name":"orientationAlpha","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"oriA, oriZ, orientationZ","synonyms":["oriA","oriZ","orientationZ"],"examples":["n(orientationAlpha.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"orientationAlpha","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's orientation beta value ranges from 0 to 1.\\n * @name orientationBeta\\n * @return {Pattern}\\n * @synonyms oriB, oriX, orientationX\\n * @example\\n * n(orientationBeta.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":105,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's orientation beta value ranges from 0 to 1.</p>","name":"orientationBeta","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"oriB, oriX, orientationX","synonyms":["oriB","oriX","orientationX"],"examples":["n(orientationBeta.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"orientationBeta","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's orientation gamma value ranges from 0 to 1.\\n * @name orientationGamma\\n * @return {Pattern}\\n * @synonyms oriG, oriY, orientationY\\n * @example\\n * n(orientationGamma.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":115,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's orientation gamma value ranges from 0 to 1.</p>","name":"orientationGamma","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"oriG, oriY, orientationY","synonyms":["oriG","oriY","orientationY"],"examples":["n(orientationGamma.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"orientationGamma","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's absolute orientation alpha value ranges from 0 to 1.\\n * @name absoluteOrientationAlpha\\n * @return {Pattern}\\n * @synonyms absOriA, absOriZ, absoluteOrientationZ\\n * @example\\n * n(absoluteOrientationAlpha.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":125,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's absolute orientation alpha value ranges from 0 to 1.</p>","name":"absoluteOrientationAlpha","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"absOriA, absOriZ, absoluteOrientationZ","synonyms":["absOriA","absOriZ","absoluteOrientationZ"],"examples":["n(absoluteOrientationAlpha.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"absoluteOrientationAlpha","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's absolute orientation beta value ranges from 0 to 1.\\n * @name absoluteOrientationBeta\\n * @return {Pattern}\\n * @synonyms absOriB, absOriX, absoluteOrientationX\\n * @example\\n * n(absoluteOrientationBeta.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":135,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's absolute orientation beta value ranges from 0 to 1.</p>","name":"absoluteOrientationBeta","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"absOriB, absOriX, absoluteOrientationX","synonyms":["absOriB","absOriX","absoluteOrientationX"],"examples":["n(absoluteOrientationBeta.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"absoluteOrientationBeta","kind":"member","scope":"global"},{"comment":"/**\\n *  The device's absolute orientation gamma value ranges from 0 to 1.\\n * @name absoluteOrientationGamma\\n * @return {Pattern}\\n * @synonyms absOriG, absOriY, absoluteOrientationY\\n * @example\\n * n(absoluteOrientationGamma.segment(4).range(0,7)).scale(\\"C:minor\\")\\n *\\n */","meta":{"filename":"motion.mjs","lineno":145,"columnno":0,"path":"/home/alex/src/strudel/packages/motion","code":{}},"description":"<p>The device's absolute orientation gamma value ranges from 0 to 1.</p>","name":"absoluteOrientationGamma","returns":[{"type":{"names":["Pattern"]}}],"synonyms_text":"absOriG, absOriY, absoluteOrientationY","synonyms":["absOriG","absOriY","absoluteOrientationY"],"examples":["n(absoluteOrientationGamma.segment(4).range(0,7)).scale(\\"C:minor\\")"],"longname":"absoluteOrientationGamma","kind":"member","scope":"global"},{"comment":"/**\\n *\\n * Sends each hap as an OSC message, which can be picked up by SuperCollider or any other OSC-enabled software.\\n * For more info, read [MIDI & OSC in the docs](https://strudel.cc/learn/input-output/)\\n *\\n * @name osc\\n * @memberof Pattern\\n * @returns Pattern\\n */","meta":{"filename":"osc.mjs","lineno":76,"columnno":0,"path":"/home/alex/src/strudel/packages/osc","code":{}},"description":"<p>Sends each hap as an OSC message, which can be picked up by SuperCollider or any other OSC-enabled software.\\nFor more info, read <a href=\\"https://strudel.cc/learn/input-output/\\">MIDI &amp; OSC in the docs</a></p>","name":"osc","memberof":"Pattern","returns":[{"description":"<p>Pattern</p>"}],"scope":"static","longname":"Pattern.osc","kind":"member"},{"comment":"/** Overlap-Add Node */","meta":{"range":[150,6513],"filename":"ola-processor.js","lineno":7,"columnno":0,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100101520","name":"OLAProcessor","type":"ClassDeclaration","paramnames":["options"]}},"name":"OLAProcessor","longname":"OLAProcessor","kind":"class","classdesc":"<p>Overlap-Add Node</p>","scope":"global"},{"comment":"/** Handles dynamic reallocation of input/output channels buffer\\n     (channel numbers may lety during lifecycle) **/","meta":{"range":[1429,1897],"filename":"ola-processor.js","lineno":39,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100101673","name":"OLAProcessor#reallocateChannelsIfNeeded","type":"MethodDefinition","paramnames":["inputs","outputs"]},"vars":{"":null}},"description":"<p>Handles dynamic reallocation of input/output channels buffer\\n(channel numbers may lety during lifecycle)</p>","name":"reallocateChannelsIfNeeded","longname":"OLAProcessor#reallocateChannelsIfNeeded","kind":"function","memberof":"OLAProcessor","scope":"instance","params":[]},{"comment":"/** Read next web audio block to input buffers **/","meta":{"range":[3534,4122],"filename":"ola-processor.js","lineno":92,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100101980","name":"OLAProcessor#readInputs","type":"MethodDefinition","paramnames":["inputs"]},"vars":{"":null}},"description":"<p>Read next web audio block to input buffers</p>","name":"readInputs","longname":"OLAProcessor#readInputs","kind":"function","memberof":"OLAProcessor","scope":"instance","params":[]},{"comment":"/** Write next web audio block from output buffers **/","meta":{"range":[4183,4461],"filename":"ola-processor.js","lineno":112,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100102101","name":"OLAProcessor#writeOutputs","type":"MethodDefinition","paramnames":["outputs"]},"vars":{"":null}},"description":"<p>Write next web audio block from output buffers</p>","name":"writeOutputs","longname":"OLAProcessor#writeOutputs","kind":"function","memberof":"OLAProcessor","scope":"instance","params":[]},{"comment":"/** Shift left content of input buffers to receive new web audio block **/","meta":{"range":[4542,4757],"filename":"ola-processor.js","lineno":122,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100102161","name":"OLAProcessor#shiftInputBuffers","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Shift left content of input buffers to receive new web audio block</p>","name":"shiftInputBuffers","longname":"OLAProcessor#shiftInputBuffers","kind":"function","memberof":"OLAProcessor","scope":"instance","params":[]},{"comment":"/** Shift left content of output buffers to receive new web audio block **/","meta":{"range":[4839,5147],"filename":"ola-processor.js","lineno":131,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100102208","name":"OLAProcessor#shiftOutputBuffers","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Shift left content of output buffers to receive new web audio block</p>","name":"shiftOutputBuffers","longname":"OLAProcessor#shiftOutputBuffers","kind":"function","memberof":"OLAProcessor","scope":"instance","params":[]},{"comment":"/** Copy contents of input buffers to buffer actually sent to process **/","meta":{"range":[5227,5454],"filename":"ola-processor.js","lineno":141,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100102275","name":"OLAProcessor#prepareInputBuffersToSend","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Copy contents of input buffers to buffer actually sent to process</p>","name":"prepareInputBuffersToSend","longname":"OLAProcessor#prepareInputBuffersToSend","kind":"function","memberof":"OLAProcessor","scope":"instance","params":[]},{"comment":"/** Add contents of output buffers just processed to output buffers **/","meta":{"range":[5532,5852],"filename":"ola-processor.js","lineno":150,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100102327","name":"OLAProcessor#handleOutputBuffersToRetrieve","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Add contents of output buffers just processed to output buffers</p>","name":"handleOutputBuffersToRetrieve","longname":"OLAProcessor#handleOutputBuffersToRetrieve","kind":"function","memberof":"OLAProcessor","scope":"instance","params":[]},{"comment":"/** Generates a reverb impulse response.\\n\\n @param {!Object} params TODO: Document the properties.\\n @param {!function(!AudioBuffer)} callback Function to call when\\n  the impulse response has been generated. The impulse response\\n  is passed to this function as its parameter. May be called\\n  immediately within the current execution context, or later. */","meta":{"range":[969,2138],"filename":"reverbGen.mjs","lineno":24,"columnno":0,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100102812","name":"reverbGen.generateReverb","type":"FunctionExpression","paramnames":["params","callback"]},"vars":{"audioContext":"reverbGen.generateReverb~audioContext","sampleRate":"reverbGen.generateReverb~sampleRate","numChannels":"reverbGen.generateReverb~numChannels","totalTime":"reverbGen.generateReverb~totalTime","decaySampleFrames":"reverbGen.generateReverb~decaySampleFrames","numSampleFrames":"reverbGen.generateReverb~numSampleFrames","fadeInSampleFrames":"reverbGen.generateReverb~fadeInSampleFrames","decayBase":"reverbGen.generateReverb~decayBase","reverbIR":"reverbGen.generateReverb~reverbIR","i":"reverbGen.generateReverb~i","chan":"reverbGen.generateReverb~chan","j":"reverbGen.generateReverb~j","chan[undefined]":"reverbGen.generateReverb~chan.undefined]"}},"description":"<p>Generates a reverb impulse response.</p>","params":[{"type":{"names":["Object"]},"nullable":false,"description":"<p>TODO: Document the properties.</p>","name":"params"},{"type":{"names":["function"]},"nullable":false,"description":"<p>Function to call when\\nthe impulse response has been generated. The impulse response\\nis passed to this function as its parameter. May be called\\nimmediately within the current execution context, or later.</p>","name":"callback"}],"name":"generateReverb","longname":"reverbGen.generateReverb","kind":"function","memberof":"reverbGen","scope":"static"},{"comment":"/** Creates a canvas element showing a graph of the given data.\\n\\n\\n @param {!Float32Array} data An array of numbers, or a Float32Array.\\n @param {number} width Width in pixels of the canvas.\\n @param {number} height Height in pixels of the canvas.\\n @param {number} min Minimum value of data for the graph (lower edge).\\n @param {number} max Maximum value of data in the graph (upper edge).\\n @return {!CanvasElement} The generated canvas element. */","meta":{"range":[2586,3097],"filename":"reverbGen.mjs","lineno":58,"columnno":0,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100102992","name":"reverbGen.generateGraph","type":"FunctionExpression","paramnames":["data","width","height","min","max"]},"vars":{"canvas":"reverbGen.generateGraph~canvas","canvas.width":"reverbGen.generateGraph~canvas.width","canvas.height":"reverbGen.generateGraph~canvas.height","gc":"reverbGen.generateGraph~gc","gc.fillStyle":"reverbGen.generateGraph~gc.fillStyle","xscale":"reverbGen.generateGraph~xscale","yscale":"reverbGen.generateGraph~yscale","i":"reverbGen.generateGraph~i"}},"description":"<p>Creates a canvas element showing a graph of the given data.</p>","params":[{"type":{"names":["Float32Array"]},"nullable":false,"description":"<p>An array of numbers, or a Float32Array.</p>","name":"data"},{"type":{"names":["number"]},"description":"<p>Width in pixels of the canvas.</p>","name":"width"},{"type":{"names":["number"]},"description":"<p>Height in pixels of the canvas.</p>","name":"height"},{"type":{"names":["number"]},"description":"<p>Minimum value of data for the graph (lower edge).</p>","name":"min"},{"type":{"names":["number"]},"description":"<p>Maximum value of data in the graph (upper edge).</p>","name":"max"}],"returns":[{"type":{"names":["CanvasElement"]},"nullable":false,"description":"<p>The generated canvas element.</p>"}],"name":"generateGraph","longname":"reverbGen.generateGraph","kind":"function","memberof":"reverbGen","scope":"static"},{"comment":"/** Applies a constantly changing lowpass filter to the given sound.\\n\\n @private\\n @param {!AudioBuffer} input\\n @param {number} lpFreqStart\\n @param {number} lpFreqEnd\\n @param {number} lpFreqEndAt\\n @param {!function(!AudioBuffer)} callback May be called\\n  immediately within the current execution context, or later.*/","meta":{"range":[3419,4357],"filename":"reverbGen.mjs","lineno":83,"columnno":4,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100103107","name":"applyGradualLowpass","type":"FunctionExpression"},"vars":{"channelData":"applyGradualLowpass~channelData","context":"applyGradualLowpass~context","player":"applyGradualLowpass~player","player.buffer":"applyGradualLowpass~player.buffer","filter":"applyGradualLowpass~filter","lpFreqStart":"applyGradualLowpass~lpFreqStart","lpFreqEnd":"applyGradualLowpass~lpFreqEnd","filter.type":"applyGradualLowpass~filter.type","filter.Q.value":"applyGradualLowpass~filter.Q.value","context.oncomplete":"applyGradualLowpass~context.oncomplete","":null,"window.filterNode":"window.filterNode"}},"description":"<p>Applies a constantly changing lowpass filter to the given sound.</p>","access":"private","params":[{"type":{"names":["AudioBuffer"]},"nullable":false,"name":"input"},{"type":{"names":["number"]},"name":"lpFreqStart"},{"type":{"names":["number"]},"name":"lpFreqEnd"},{"type":{"names":["number"]},"name":"lpFreqEndAt"},{"type":{"names":["function"]},"nullable":false,"description":"<p>May be called\\nimmediately within the current execution context, or later.</p>","name":"callback"}],"name":"applyGradualLowpass","longname":"applyGradualLowpass","kind":"function","scope":"global"},{"comment":"/** @private\\n @param {!AudioBuffer} buffer\\n @return {!Array.<!Float32Array>} An array containing the Float32Array of each channel's samples. */","meta":{"range":[4508,4691],"filename":"reverbGen.mjs","lineno":116,"columnno":4,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100103271","name":"getAllChannelData","type":"FunctionExpression"},"vars":{"channels":"getAllChannelData~channels","i":"getAllChannelData~i","channels[undefined]":"getAllChannelData~channels.undefined]"}},"access":"private","params":[{"type":{"names":["AudioBuffer"]},"nullable":false,"name":"buffer"}],"returns":[{"type":{"names":["Array.<!Float32Array>"]},"nullable":false,"description":"<p>An array containing the Float32Array of each channel's samples.</p>"}],"name":"getAllChannelData","longname":"getAllChannelData","kind":"function","scope":"global"},{"comment":"/** @private\\n @return {number} A random number from -1 to 1. */","meta":{"range":[4762,4824],"filename":"reverbGen.mjs","lineno":126,"columnno":4,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100103306","name":"randomSample","type":"FunctionExpression"}},"access":"private","returns":[{"type":{"names":["number"]},"description":"<p>A random number from -1 to 1.</p>"}],"name":"randomSample","longname":"randomSample","kind":"function","scope":"global","params":[]},{"comment":"/**\\n * Loads a collection of samples to use with \`s\`\\n * @example\\n * samples('github:tidalcycles/dirt-samples');\\n * s(\\"[bd ~]*2, [~ hh]*2, ~ sd\\")\\n * @example\\n * samples({\\n *  bd: '808bd/BD0000.WAV',\\n *  sd: '808sd/SD0010.WAV'\\n *  }, 'https://raw.githubusercontent.com/tidalcycles/Dirt-Samples/master/');\\n * s(\\"[bd ~]*2, [~ hh]*2, ~ sd\\")\\n * @example\\n * samples('shabda:noise,chimp:2')\\n * s(\\"noise <chimp:0*2 chimp:1>\\")\\n * @example\\n * samples('shabda/speech/fr-FR/f:chocolat')\\n * s(\\"chocolat*4\\")\\n */","meta":{"range":[8306,8738],"filename":"sampler.mjs","lineno":247,"columnno":0,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100104489","name":"exports.samples","type":"VariableDeclaration"}},"description":"<p>Loads a collection of samples to use with <code>s</code></p>","examples":["samples('github:tidalcycles/dirt-samples');\\ns(\\"[bd ~]*2, [~ hh]*2, ~ sd\\")","samples({\\n bd: '808bd/BD0000.WAV',\\n sd: '808sd/SD0010.WAV'\\n }, 'https://raw.githubusercontent.com/tidalcycles/Dirt-Samples/master/');\\ns(\\"[bd ~]*2, [~ hh]*2, ~ sd\\")","samples('shabda:noise,chimp:2')\\ns(\\"noise <chimp:0*2 chimp:1>\\")","samples('shabda/speech/fr-FR/f:chocolat')\\ns(\\"chocolat*4\\")"],"name":"samples","longname":"samples","kind":"constant","scope":"global"},{"comment":"/**\\n * Register an alias for a bank of sounds.\\n * Optionally accepts a single argument map of bank aliases.\\n * Optionally accepts a single argument string of a path to a JSON file containing bank aliases.\\n * @param {string} bank - The bank to alias\\n * @param {string} alias - The alias to use for the bank\\n */","meta":{"range":[3606,3993],"filename":"superdough.mjs","lineno":96,"columnno":0,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100105237","name":"exports.aliasBank","type":"FunctionDeclaration","paramnames":["args"]}},"description":"<p>Register an alias for a bank of sounds.\\nOptionally accepts a single argument map of bank aliases.\\nOptionally accepts a single argument string of a path to a JSON file containing bank aliases.</p>","params":[{"type":{"names":["string"]},"description":"<p>The bank to alias</p>","name":"bank"},{"type":{"names":["string"]},"description":"<p>The alias to use for the bank</p>","name":"alias"}],"name":"aliasBank","longname":"aliasBank","kind":"function","scope":"global"},{"comment":"/**\\n * Register an alias for a sound.\\n * @param {string} original - The original sound name\\n * @param {string} alias - The alias to use for the sound\\n */","meta":{"range":[4149,4346],"filename":"superdough.mjs","lineno":116,"columnno":0,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100105289","name":"exports.soundAlias","type":"FunctionDeclaration","paramnames":["original","alias"]}},"description":"<p>Register an alias for a sound.</p>","params":[{"type":{"names":["string"]},"description":"<p>The original sound name</p>","name":"original"},{"type":{"names":["string"]},"description":"<p>The alias to use for the sound</p>","name":"alias"}],"name":"soundAlias","longname":"soundAlias","kind":"function","scope":"global"},{"comment":"/**\\n * Loads a collection of wavetables to use with \`s\`\\n *\\n * @name tables\\n */","meta":{"filename":"wavetable.mjs","lineno":180,"columnno":0,"path":"/home/alex/src/strudel/packages/superdough","code":{}},"description":"<p>Loads a collection of wavetables to use with <code>s</code></p>","name":"tables","longname":"tables","kind":"member","scope":"global"},{"comment":"/** Apply Hann window in-place */","meta":{"range":[17486,17622],"filename":"worklets.mjs","lineno":640,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100116136","name":"PhaseVocoderProcessor#applyHannWindow","type":"MethodDefinition","paramnames":["input"]},"vars":{"":null}},"description":"<p>Apply Hann window in-place</p>","name":"applyHannWindow","longname":"PhaseVocoderProcessor#applyHannWindow","kind":"function","memberof":"PhaseVocoderProcessor","scope":"instance","params":[]},{"comment":"/** Compute squared magnitudes for peak finding **/","meta":{"range":[17680,17992],"filename":"worklets.mjs","lineno":647,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100116170","name":"PhaseVocoderProcessor#computeMagnitudes","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Compute squared magnitudes for peak finding</p>","name":"computeMagnitudes","longname":"PhaseVocoderProcessor#computeMagnitudes","kind":"function","memberof":"PhaseVocoderProcessor","scope":"instance","params":[]},{"comment":"/** Find peaks in spectrum magnitudes **/","meta":{"range":[18040,18511],"filename":"worklets.mjs","lineno":661,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100116230","name":"PhaseVocoderProcessor#findPeaks","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Find peaks in spectrum magnitudes</p>","name":"findPeaks","longname":"PhaseVocoderProcessor#findPeaks","kind":"function","memberof":"PhaseVocoderProcessor","scope":"instance","params":[]},{"comment":"/** Shift peaks and regions of influence by pitchFactor into new specturm */","meta":{"range":[18594,20657],"filename":"worklets.mjs","lineno":685,"columnno":2,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100116336","name":"PhaseVocoderProcessor#shiftPeaks","type":"MethodDefinition","paramnames":["pitchFactor"]},"vars":{"":null}},"description":"<p>Shift peaks and regions of influence by pitchFactor into new specturm</p>","name":"shiftPeaks","longname":"PhaseVocoderProcessor#shiftPeaks","kind":"function","memberof":"PhaseVocoderProcessor","scope":"instance","params":[]},{"comment":"/**  BYTE BEATS */","meta":{"range":[23715,24646],"filename":"worklets.mjs","lineno":848,"columnno":6,"path":"/home/alex/src/strudel/packages/superdough","code":{"id":"astnode100117050","name":"chyx","type":"ObjectExpression","value":"{\\"bitC\\":\\"\\",\\"br\\":\\"\\",\\"sinf\\":\\"\\",\\"cosf\\":\\"\\",\\"tanf\\":\\"\\",\\"regG\\":\\"\\"}"}},"description":"<p>BYTE BEATS</p>","name":"chyx","longname":"chyx","kind":"constant","scope":"global","params":[]},{"comment":"/**\\n * Equal Power Crossfade function.\\n * Smoothly transitions between signals A and B, maintaining consistent perceived loudness.\\n *\\n * @param {number} a - Signal A (can be a single value or an array value in buffer processing).\\n * @param {number} b - Signal B (can be a single value or an array value in buffer processing).\\n * @param {number} m - Crossfade parameter (0.0 = all A, 1.0 = all B, 0.5 = equal mix).\\n * @returns {number} Crossfaded output value.\\n */","meta":{"range":[850,1009],"filename":"dough.mjs","lineno":23,"columnno":0,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100121405","name":"crossfade","type":"FunctionDeclaration","paramnames":["a","b","m"]},"vars":{"aGain":"crossfade~aGain","bGain":"crossfade~bGain"}},"description":"<p>Equal Power Crossfade function.\\nSmoothly transitions between signals A and B, maintaining consistent perceived loudness.</p>","params":[{"type":{"names":["number"]},"description":"<p>Signal A (can be a single value or an array value in buffer processing).</p>","name":"a"},{"type":{"names":["number"]},"description":"<p>Signal B (can be a single value or an array value in buffer processing).</p>","name":"b"},{"type":{"names":["number"]},"description":"<p>Crossfade parameter (0.0 = all A, 1.0 = all B, 0.5 = equal mix).</p>","name":"m"}],"returns":[{"type":{"names":["number"]},"description":"<p>Crossfaded output value.</p>"}],"name":"crossfade","longname":"crossfade","kind":"function","scope":"global"},{"comment":"/** @type {number} */","meta":{"range":[16818,16825],"filename":"dough.mjs","lineno":660,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124364","name":"id","type":"ClassProperty"}},"type":{"names":["number"]},"name":"id","longname":"DoughVoice#id","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number[]} */","meta":{"range":[16854,16867],"filename":"dough.mjs","lineno":662,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124366","name":"out","type":"ClassProperty"}},"type":{"names":["Array.<number>"]},"name":"out","longname":"DoughVoice#out","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[16907,16914],"filename":"dough.mjs","lineno":665,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124370","name":"attack","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"attack","longname":"DoughVoice#attack","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[16953,16959],"filename":"dough.mjs","lineno":667,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124371","name":"decay","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"decay","longname":"DoughVoice#decay","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[16998,17006],"filename":"dough.mjs","lineno":669,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124372","name":"sustain","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"sustain","longname":"DoughVoice#sustain","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number} */","meta":{"range":[17033,17041],"filename":"dough.mjs","lineno":671,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124373","name":"release","type":"ClassProperty"}},"type":{"names":["number"]},"name":"release","longname":"DoughVoice#release","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number} */","meta":{"range":[17068,17075],"filename":"dough.mjs","lineno":673,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124374","name":"_begin","type":"ClassProperty"}},"type":{"names":["number"]},"name":"_begin","longname":"DoughVoice#_begin","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number} */","meta":{"range":[17102,17112],"filename":"dough.mjs","lineno":675,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124375","name":"_duration","type":"ClassProperty"}},"type":{"names":["number"]},"name":"_duration","longname":"DoughVoice#_duration","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {any} */","meta":{"range":[17137,17144],"filename":"dough.mjs","lineno":678,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124376","name":"_sound","type":"ClassProperty"}},"type":{"names":["any"]},"name":"_sound","longname":"DoughVoice#_sound","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number} */","meta":{"range":[17171,17185],"filename":"dough.mjs","lineno":680,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124377","name":"_channels","type":"ClassProperty"}},"type":{"names":["number"]},"name":"_channels","longname":"DoughVoice#_channels","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {BufferPlayer[] | undefined} */","meta":{"range":[17232,17241],"filename":"dough.mjs","lineno":682,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124379","name":"_buffers","type":"ClassProperty"}},"type":{"names":["Array.<BufferPlayer>","undefined"]},"name":"_buffers","longname":"DoughVoice#_buffers","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {string | undefined} */","meta":{"range":[17280,17285],"filename":"dough.mjs","lineno":684,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124380","name":"unit","type":"ClassProperty"}},"type":{"names":["string","undefined"]},"name":"unit","longname":"DoughVoice#unit","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {ADSR | undefined} */","meta":{"range":[17323,17329],"filename":"dough.mjs","lineno":687,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124381","name":"_penv","type":"ClassProperty"}},"type":{"names":["ADSR","undefined"]},"name":"_penv","longname":"DoughVoice#_penv","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17368,17373],"filename":"dough.mjs","lineno":689,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124382","name":"penv","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"penv","longname":"DoughVoice#penv","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17412,17420],"filename":"dough.mjs","lineno":691,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124383","name":"pattack","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"pattack","longname":"DoughVoice#pattack","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17459,17466],"filename":"dough.mjs","lineno":693,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124384","name":"pdecay","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"pdecay","longname":"DoughVoice#pdecay","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17505,17514],"filename":"dough.mjs","lineno":695,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124385","name":"psustain","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"psustain","longname":"DoughVoice#psustain","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17553,17562],"filename":"dough.mjs","lineno":697,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124386","name":"prelease","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"prelease","longname":"DoughVoice#prelease","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17602,17606],"filename":"dough.mjs","lineno":700,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124387","name":"vib","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"vib","longname":"DoughVoice#vib","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17654,17661],"filename":"dough.mjs","lineno":704,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124389","name":"vibmod","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"vibmod","longname":"DoughVoice#vibmod","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {SineOsc | undefined} */","meta":{"range":[17702,17706],"filename":"dough.mjs","lineno":707,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124390","name":"_fm","type":"ClassProperty"}},"type":{"names":["SineOsc","undefined"]},"name":"_fm","longname":"DoughVoice#_fm","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17745,17749],"filename":"dough.mjs","lineno":709,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124391","name":"fmh","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"fmh","longname":"DoughVoice#fmh","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17788,17792],"filename":"dough.mjs","lineno":711,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124392","name":"fmi","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"fmi","longname":"DoughVoice#fmi","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {ADSR | undefined} */","meta":{"range":[17830,17837],"filename":"dough.mjs","lineno":714,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124393","name":"_fmenv","type":"ClassProperty"}},"type":{"names":["ADSR","undefined"]},"name":"_fmenv","longname":"DoughVoice#_fmenv","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17876,17885],"filename":"dough.mjs","lineno":716,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124394","name":"fmattack","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"fmattack","longname":"DoughVoice#fmattack","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17924,17932],"filename":"dough.mjs","lineno":718,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124395","name":"fmdecay","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"fmdecay","longname":"DoughVoice#fmdecay","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[17971,17981],"filename":"dough.mjs","lineno":720,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124396","name":"fmsustain","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"fmsustain","longname":"DoughVoice#fmsustain","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18020,18030],"filename":"dough.mjs","lineno":722,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124397","name":"fmrelease","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"fmrelease","longname":"DoughVoice#fmrelease","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {ADSR | undefined} */","meta":{"range":[18068,18075],"filename":"dough.mjs","lineno":725,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124398","name":"_lpenv","type":"ClassProperty"}},"type":{"names":["ADSR","undefined"]},"name":"_lpenv","longname":"DoughVoice#_lpenv","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18123,18132],"filename":"dough.mjs","lineno":728,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124400","name":"lpattack","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"lpattack","longname":"DoughVoice#lpattack","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18171,18179],"filename":"dough.mjs","lineno":730,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124401","name":"lpdecay","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"lpdecay","longname":"DoughVoice#lpdecay","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18218,18228],"filename":"dough.mjs","lineno":732,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124402","name":"lpsustain","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"lpsustain","longname":"DoughVoice#lpsustain","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18267,18277],"filename":"dough.mjs","lineno":734,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124403","name":"lprelease","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"lprelease","longname":"DoughVoice#lprelease","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {ADSR | undefined} */","meta":{"range":[18315,18322],"filename":"dough.mjs","lineno":737,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124404","name":"_hpenv","type":"ClassProperty"}},"type":{"names":["ADSR","undefined"]},"name":"_hpenv","longname":"DoughVoice#_hpenv","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18361,18367],"filename":"dough.mjs","lineno":739,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124405","name":"hpenv","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"hpenv","longname":"DoughVoice#hpenv","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18406,18415],"filename":"dough.mjs","lineno":741,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124406","name":"hpattack","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"hpattack","longname":"DoughVoice#hpattack","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18454,18462],"filename":"dough.mjs","lineno":743,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124407","name":"hpdecay","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"hpdecay","longname":"DoughVoice#hpdecay","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18501,18511],"filename":"dough.mjs","lineno":745,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124408","name":"hpsustain","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"hpsustain","longname":"DoughVoice#hpsustain","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18550,18560],"filename":"dough.mjs","lineno":747,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124409","name":"hprelease","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"hprelease","longname":"DoughVoice#hprelease","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {ADSR | undefined} */","meta":{"range":[18598,18605],"filename":"dough.mjs","lineno":750,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124410","name":"_bpenv","type":"ClassProperty"}},"type":{"names":["ADSR","undefined"]},"name":"_bpenv","longname":"DoughVoice#_bpenv","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18644,18650],"filename":"dough.mjs","lineno":752,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124411","name":"bpenv","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"bpenv","longname":"DoughVoice#bpenv","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18689,18698],"filename":"dough.mjs","lineno":754,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124412","name":"bpattack","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"bpattack","longname":"DoughVoice#bpattack","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18737,18745],"filename":"dough.mjs","lineno":756,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124413","name":"bpdecay","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"bpdecay","longname":"DoughVoice#bpdecay","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18784,18794],"filename":"dough.mjs","lineno":758,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124414","name":"bpsustain","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"bpsustain","longname":"DoughVoice#bpsustain","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18833,18843],"filename":"dough.mjs","lineno":760,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124415","name":"bprelease","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"bprelease","longname":"DoughVoice#bprelease","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18883,18890],"filename":"dough.mjs","lineno":763,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124416","name":"cutoff","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"cutoff","longname":"DoughVoice#cutoff","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18929,18937],"filename":"dough.mjs","lineno":765,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124417","name":"hcutoff","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"hcutoff","longname":"DoughVoice#hcutoff","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[18976,18982],"filename":"dough.mjs","lineno":767,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124418","name":"bandf","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"bandf","longname":"DoughVoice#bandf","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[19021,19028],"filename":"dough.mjs","lineno":769,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124419","name":"coarse","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"coarse","longname":"DoughVoice#coarse","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[19067,19073],"filename":"dough.mjs","lineno":771,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124420","name":"crush","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"crush","longname":"DoughVoice#crush","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number | undefined} */","meta":{"range":[19112,19120],"filename":"dough.mjs","lineno":773,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124421","name":"distort","type":"ClassProperty"}},"type":{"names":["number","undefined"]},"name":"distort","longname":"DoughVoice#distort","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {number} */","meta":{"range":[19148,19153],"filename":"dough.mjs","lineno":776,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124422","name":"freq","type":"ClassProperty"}},"type":{"names":["number"]},"name":"freq","longname":"DoughVoice#freq","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {string | undefined} */","meta":{"range":[19192,19197],"filename":"dough.mjs","lineno":778,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124423","name":"note","type":"ClassProperty"}},"type":{"names":["string","undefined"]},"name":"note","longname":"DoughVoice#note","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {TwoPoleFilter[] | null | undefined} */","meta":{"range":[19253,19258],"filename":"dough.mjs","lineno":781,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124424","name":"_lpf","type":"ClassProperty"}},"type":{"names":["Array.<TwoPoleFilter>","null","undefined"]},"name":"_lpf","longname":"DoughVoice#_lpf","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {TwoPoleFilter[] | null | undefined} */","meta":{"range":[19313,19318],"filename":"dough.mjs","lineno":783,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124425","name":"_hpf","type":"ClassProperty"}},"type":{"names":["Array.<TwoPoleFilter>","null","undefined"]},"name":"_hpf","longname":"DoughVoice#_hpf","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {TwoPoleFilter[] | null | undefined} */","meta":{"range":[19373,19378],"filename":"dough.mjs","lineno":785,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124426","name":"_bpf","type":"ClassProperty"}},"type":{"names":["Array.<TwoPoleFilter>","null","undefined"]},"name":"_bpf","longname":"DoughVoice#_bpf","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {Chorus[] | null | undefined} */","meta":{"range":[19426,19434],"filename":"dough.mjs","lineno":787,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124427","name":"_chorus","type":"ClassProperty"}},"type":{"names":["Array.<Chorus>","null","undefined"]},"name":"_chorus","longname":"DoughVoice#_chorus","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {Coarse[] | null | undefined} */","meta":{"range":[19482,19490],"filename":"dough.mjs","lineno":789,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124428","name":"_coarse","type":"ClassProperty"}},"type":{"names":["Array.<Coarse>","null","undefined"]},"name":"_coarse","longname":"DoughVoice#_coarse","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {Crush[] | null | undefined} */","meta":{"range":[19537,19544],"filename":"dough.mjs","lineno":791,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124429","name":"_crush","type":"ClassProperty"}},"type":{"names":["Array.<Crush>","null","undefined"]},"name":"_crush","longname":"DoughVoice#_crush","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/** @type {Distort[] | null | undefined} */","meta":{"range":[19593,19602],"filename":"dough.mjs","lineno":793,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124430","name":"_distort","type":"ClassProperty"}},"type":{"names":["Array.<Distort>","null","undefined"]},"name":"_distort","longname":"DoughVoice#_distort","kind":"member","memberof":"DoughVoice","scope":"instance"},{"comment":"/**\\n   * @param {DoughVoice} value\\n   */","meta":{"range":[19649,24138],"filename":"dough.mjs","lineno":798,"columnno":2,"path":"/home/alex/src/strudel/packages/supradough","code":{"id":"astnode100124431","name":"exports.DoughVoice","type":"MethodDefinition","paramnames":["value"]},"vars":{"":null}},"params":[{"type":{"names":["DoughVoice"]},"name":"value"}],"name":"DoughVoice","longname":"DoughVoice#DoughVoice","kind":"class","memberof":"DoughVoice","scope":"instance"},{"comment":"/**\\n * Change the pitch of each value by the given amount. Expects numbers or note strings as values.\\n * The amount can be given as a number of semitones or as a string in interval short notation.\\n * If you don't care about enharmonic correctness, just use numbers. Otherwise, pass the interval of\\n * the form: ST where S is the degree number and T the type of interval with\\n *\\n * - M = major\\n * - m = minor\\n * - P = perfect\\n * - A = augmented\\n * - d = diminished\\n *\\n * Examples intervals:\\n *\\n * - 1P = unison\\n * - 3M = major third\\n * - 3m = minor third\\n * - 4P = perfect fourth\\n * - 4A = augmented fourth\\n * - 5P = perfect fifth\\n * - 5d = diminished fifth\\n *\\n * @param {string | number} amount Either number of semitones or interval string.\\n * @returns Pattern\\n * @memberof Pattern\\n * @name transpose\\n * @synonyms trans\\n * @example\\n * \\"c2 c3\\".fast(2).transpose(\\"<0 -2 5 3>\\".slow(2)).note()\\n * @example\\n * \\"c2 c3\\".fast(2).transpose(\\"<1P -2M 4P 3m>\\".slow(2)).note()\\n */","meta":{"filename":"tonal.mjs","lineno":73,"columnno":0,"path":"/home/alex/src/strudel/packages/tonal","code":{}},"description":"<p>Change the pitch of each value by the given amount. Expects numbers or note strings as values.\\nThe amount can be given as a number of semitones or as a string in interval short notation.\\nIf you don't care about enharmonic correctness, just use numbers. Otherwise, pass the interval of\\nthe form: ST where S is the degree number and T the type of interval with</p>\\n<ul>\\n<li>M = major</li>\\n<li>m = minor</li>\\n<li>P = perfect</li>\\n<li>A = augmented</li>\\n<li>d = diminished</li>\\n</ul>\\n<p>Examples intervals:</p>\\n<ul>\\n<li>1P = unison</li>\\n<li>3M = major third</li>\\n<li>3m = minor third</li>\\n<li>4P = perfect fourth</li>\\n<li>4A = augmented fourth</li>\\n<li>5P = perfect fifth</li>\\n<li>5d = diminished fifth</li>\\n</ul>","params":[{"type":{"names":["string","number"]},"description":"<p>Either number of semitones or interval string.</p>","name":"amount"}],"returns":[{"description":"<p>Pattern</p>"}],"memberof":"Pattern","name":"transpose","synonyms_text":"trans","synonyms":["trans"],"examples":["\\"c2 c3\\".fast(2).transpose(\\"<0 -2 5 3>\\".slow(2)).note()","\\"c2 c3\\".fast(2).transpose(\\"<1P -2M 4P 3m>\\".slow(2)).note()"],"scope":"static","longname":"Pattern.transpose","kind":"member"},{"comment":"/**\\n * Transposes notes inside the scale by the number of steps.\\n * Expected to be called on a Pattern which already has a {@link Pattern#scale}\\n *\\n * @memberof Pattern\\n * @name scaleTranspose\\n * @param {offset} offset number of steps inside the scale\\n * @returns Pattern\\n * @synonyms scaleTrans, strans\\n * @example\\n * \\"-8 [2,4,6]\\"\\n * .scale('C4 bebop major')\\n * .scaleTranspose(\\"<0 -1 -2 -3 -4 -5 -6 -4>\\")\\n * .note()\\n */","meta":{"filename":"tonal.mjs","lineno":143,"columnno":0,"path":"/home/alex/src/strudel/packages/tonal","code":{}},"description":"<p>Transposes notes inside the scale by the number of steps.\\nExpected to be called on a Pattern which already has a {@link Pattern#scale}</p>","memberof":"Pattern","name":"scaleTranspose","params":[{"type":{"names":["offset"]},"description":"<p>number of steps inside the scale</p>","name":"offset"}],"returns":[{"description":"<p>Pattern</p>"}],"synonyms_text":"scaleTrans, strans","synonyms":["scaleTrans","strans"],"examples":["\\"-8 [2,4,6]\\"\\n.scale('C4 bebop major')\\n.scaleTranspose(\\"<0 -1 -2 -3 -4 -5 -6 -4>\\")\\n.note()"],"scope":"static","longname":"Pattern.scaleTranspose","kind":"member"},{"comment":"/**\\n * Turns numbers into notes in the scale (zero indexed) or quantizes notes to a scale.\\n *\\n * When describing notes via numbers, note that negative numbers can be used to wrap backwards\\n * in the scale as well as sharps or flats (but not both) to produce notes outside of the scale.\\n *\\n * Also sets scale for other scale operations, like {@link Pattern#scaleTranspose}.\\n *\\n * A scale consists of a root note (e.g. \`c4\`, \`c\`, \`f#\`, \`bb4\`) followed by semicolon (':') and then a [scale type](https://github.com/tonaljs/tonal/blob/main/packages/scale-type/data.ts).\\n *\\n * The root note defaults to octave 3, if no octave number is given.\\n *\\n * @name scale\\n * @param {string} scale Name of scale\\n * @returns Pattern\\n * @example\\n * n(\\"0 2 4 6 4 2\\").scale(\\"C:major\\")\\n * @example\\n * n(\\"[0,7] 4 [2,7] 4\\")\\n * .scale(\\"C:<major minor>/2\\")\\n * .s(\\"piano\\")\\n * @example\\n * n(rand.range(0,12).segment(8))\\n * .scale(\\"C:ritusen\\")\\n * .s(\\"piano\\")\\n * @example\\n * n(\\"<[0,7b] [-4# -4] [-2,7##] 4 [0,7] [-4# -4b] [-2,7###] 4b>*4\\")\\n * .scale(\\"C:<major minor>/2\\")\\n * .s(\\"piano\\")\\n * @example\\n * note(\\"C1*16\\").transpose(irand(36)).scale('Cb2 major').scaleTranspose(3)\\n */","meta":{"filename":"tonal.mjs","lineno":225,"columnno":0,"path":"/home/alex/src/strudel/packages/tonal","code":{}},"description":"<p>Turns numbers into notes in the scale (zero indexed) or quantizes notes to a scale.</p>\\n<p>When describing notes via numbers, note that negative numbers can be used to wrap backwards\\nin the scale as well as sharps or flats (but not both) to produce notes outside of the scale.</p>\\n<p>Also sets scale for other scale operations, like {@link Pattern#scaleTranspose}.</p>\\n<p>A scale consists of a root note (e.g. <code>c4</code>, <code>c</code>, <code>f#</code>, <code>bb4</code>) followed by semicolon (':') and then a <a href=\\"https://github.com/tonaljs/tonal/blob/main/packages/scale-type/data.ts\\">scale type</a>.</p>\\n<p>The root note defaults to octave 3, if no octave number is given.</p>","name":"scale","params":[{"type":{"names":["string"]},"description":"<p>Name of scale</p>","name":"scale"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["n(\\"0 2 4 6 4 2\\").scale(\\"C:major\\")","n(\\"[0,7] 4 [2,7] 4\\")\\n.scale(\\"C:<major minor>/2\\")\\n.s(\\"piano\\")","n(rand.range(0,12).segment(8))\\n.scale(\\"C:ritusen\\")\\n.s(\\"piano\\")","n(\\"<[0,7b] [-4# -4] [-2,7##] 4 [0,7] [-4# -4b] [-2,7###] 4b>*4\\")\\n.scale(\\"C:<major minor>/2\\")\\n.s(\\"piano\\")","note(\\"C1*16\\").transpose(irand(36)).scale('Cb2 major').scaleTranspose(3)"],"longname":"scale","kind":"member","scope":"global"},{"comment":"/**\\n * Adds a new custom voicing dictionary.\\n *\\n * @name addVoicings\\n * @memberof Pattern\\n * @param {string} name identifier for the voicing dictionary\\n * @param {Object} dictionary maps chord symbol to possible voicings\\n * @param {Array} range min, max note\\n * @returns Pattern\\n * @example\\n * addVoicings('cookie', {\\n *   7: ['3M 7m 9M 12P 15P', '7m 10M 13M 16M 19P'],\\n *   '^7': ['3M 6M 9M 12P 14M', '7M 10M 13M 16M 19P'],\\n *   m7: ['8P 11P 14m 17m 19P', '5P 8P 11P 14m 17m'],\\n *   m7b5: ['3m 5d 8P 11P 14m', '5d 8P 11P 14m 17m'],\\n *   o7: ['3m 6M 9M 11A 15P'],\\n *   '7alt': ['3M 7m 10m 13m 15P'],\\n *   '7#11': ['7m 10m 13m 15P 17m'],\\n * }, ['C3', 'C6'])\\n * \\"<C^7 A7 Dm7 G7>\\".voicings('cookie').note()\\n */","meta":{"filename":"voicings.mjs","lineno":89,"columnno":0,"path":"/home/alex/src/strudel/packages/tonal","code":{}},"description":"<p>Adds a new custom voicing dictionary.</p>","name":"addVoicings","memberof":"Pattern","params":[{"type":{"names":["string"]},"description":"<p>identifier for the voicing dictionary</p>","name":"name"},{"type":{"names":["Object"]},"description":"<p>maps chord symbol to possible voicings</p>","name":"dictionary"},{"type":{"names":["Array"]},"description":"<p>min, max note</p>","name":"range"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["addVoicings('cookie', {\\n  7: ['3M 7m 9M 12P 15P', '7m 10M 13M 16M 19P'],\\n  '^7': ['3M 6M 9M 12P 14M', '7M 10M 13M 16M 19P'],\\n  m7: ['8P 11P 14m 17m 19P', '5P 8P 11P 14m 17m'],\\n  m7b5: ['3m 5d 8P 11P 14m', '5d 8P 11P 14m 17m'],\\n  o7: ['3m 6M 9M 11A 15P'],\\n  '7alt': ['3M 7m 10m 13m 15P'],\\n  '7#11': ['7m 10m 13m 15P 17m'],\\n}, ['C3', 'C6'])\\n\\"<C^7 A7 Dm7 G7>\\".voicings('cookie').note()"],"scope":"static","longname":"Pattern.addVoicings","kind":"member"},{"comment":"/**\\n * DEPRECATED: still works, but it is recommended you use .voicing instead (without s).\\n * Turns chord symbols into voicings, using the smoothest voice leading possible.\\n * Uses [chord-voicings package](https://github.com/felixroos/chord-voicings#chord-voicings).\\n *\\n * @name voicings\\n * @memberof Pattern\\n * @param {string} dictionary which voicing dictionary to use.\\n * @returns Pattern\\n * @example\\n * stack(\\"<C^7 A7 Dm7 G7>\\".voicings('lefthand'), \\"<C3 A2 D3 G2>\\").note()\\n */","meta":{"filename":"voicings.mjs","lineno":130,"columnno":0,"path":"/home/alex/src/strudel/packages/tonal","code":{}},"description":"<p>DEPRECATED: still works, but it is recommended you use .voicing instead (without s).\\nTurns chord symbols into voicings, using the smoothest voice leading possible.\\nUses <a href=\\"https://github.com/felixroos/chord-voicings#chord-voicings\\">chord-voicings package</a>.</p>","name":"voicings","memberof":"Pattern","params":[{"type":{"names":["string"]},"description":"<p>which voicing dictionary to use.</p>","name":"dictionary"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["stack(\\"<C^7 A7 Dm7 G7>\\".voicings('lefthand'), \\"<C3 A2 D3 G2>\\").note()"],"scope":"static","longname":"Pattern.voicings","kind":"member"},{"comment":"/**\\n * Maps the chords of the incoming pattern to root notes in the given octave.\\n *\\n * @name rootNotes\\n * @memberof Pattern\\n * @param {octave} octave octave to use\\n * @returns Pattern\\n * @example\\n * \\"<C^7 A7 Dm7 G7>\\".rootNotes(2).note()\\n */","meta":{"filename":"voicings.mjs","lineno":156,"columnno":0,"path":"/home/alex/src/strudel/packages/tonal","code":{}},"description":"<p>Maps the chords of the incoming pattern to root notes in the given octave.</p>","name":"rootNotes","memberof":"Pattern","params":[{"type":{"names":["octave"]},"description":"<p>octave to use</p>","name":"octave"}],"returns":[{"description":"<p>Pattern</p>"}],"examples":["\\"<C^7 A7 Dm7 G7>\\".rootNotes(2).note()"],"scope":"static","longname":"Pattern.rootNotes","kind":"member"},{"comment":"/**\\n * Turns chord symbols into voicings. You can use the following control params:\\n *\\n * - \`chord\`: Note, followed by chord symbol, e.g. C Am G7 Bb^7\\n * - \`dict\`: voicing dictionary to use, falls back to default dictionary\\n * - \`anchor\`: the note that is used to align the chord\\n * - \`mode\`: how the voicing is aligned to the anchor\\n *   - \`below\`: top note <= anchor\\n *   - \`duck\`: top note <= anchor, anchor excluded\\n *   - \`above\`: bottom note >= anchor\\n * - \`offset\`: whole number that shifts the voicing up or down to the next voicing\\n * - \`n\`: if set, the voicing is played like a scale. Overshooting numbers will be octaved\\n *\\n * All of the above controls are optional, except \`chord\`.\\n * If you pass a pattern of strings to voicing, they will be interpreted as chords.\\n *\\n * @name voicing\\n * @returns Pattern\\n * @example\\n * n(\\"0 1 2 3\\").chord(\\"<C Am F G>\\").voicing()\\n */","meta":{"filename":"voicings.mjs","lineno":175,"columnno":0,"path":"/home/alex/src/strudel/packages/tonal","code":{}},"description":"<p>Turns chord symbols into voicings. You can use the following control params:</p>\\n<ul>\\n<li><code>chord</code>: Note, followed by chord symbol, e.g. C Am G7 Bb^7</li>\\n<li><code>dict</code>: voicing dictionary to use, falls back to default dictionary</li>\\n<li><code>anchor</code>: the note that is used to align the chord</li>\\n<li><code>mode</code>: how the voicing is aligned to the anchor\\n<ul>\\n<li><code>below</code>: top note &lt;= anchor</li>\\n<li><code>duck</code>: top note &lt;= anchor, anchor excluded</li>\\n<li><code>above</code>: bottom note &gt;= anchor</li>\\n</ul>\\n</li>\\n<li><code>offset</code>: whole number that shifts the voicing up or down to the next voicing</li>\\n<li><code>n</code>: if set, the voicing is played like a scale. Overshooting numbers will be octaved</li>\\n</ul>\\n<p>All of the above controls are optional, except <code>chord</code>.\\nIf you pass a pattern of strings to voicing, they will be interpreted as chords.</p>","name":"voicing","returns":[{"description":"<p>Pattern</p>"}],"examples":["n(\\"0 1 2 3\\").chord(\\"<C Am F G>\\").voicing()"],"longname":"voicing","kind":"member","scope":"global"},{"comment":"/**\\n * Renders an oscilloscope for the frequency domain of the audio signal.\\n * @name fscope\\n * @param {string} color line color as hex or color name. defaults to white.\\n * @param {number} scale scales the y-axis. Defaults to 0.25\\n * @param {number} pos y-position relative to screen height. 0 = top, 1 = bottom of screen\\n * @param {number} lean y-axis alignment where 0 = top and 1 = bottom\\n * @param {number} min min value\\n * @param {number} max max value\\n * @example\\n * s(\\"sawtooth\\").fscope()\\n */","meta":{"filename":"scope.mjs","lineno":98,"columnno":0,"path":"/home/alex/src/strudel/packages/webaudio","code":{}},"description":"<p>Renders an oscilloscope for the frequency domain of the audio signal.</p>","name":"fscope","params":[{"type":{"names":["string"]},"description":"<p>line color as hex or color name. defaults to white.</p>","name":"color"},{"type":{"names":["number"]},"description":"<p>scales the y-axis. Defaults to 0.25</p>","name":"scale"},{"type":{"names":["number"]},"description":"<p>y-position relative to screen height. 0 = top, 1 = bottom of screen</p>","name":"pos"},{"type":{"names":["number"]},"description":"<p>y-axis alignment where 0 = top and 1 = bottom</p>","name":"lean"},{"type":{"names":["number"]},"description":"<p>min value</p>","name":"min"},{"type":{"names":["number"]},"description":"<p>max value</p>","name":"max"}],"examples":["s(\\"sawtooth\\").fscope()"],"longname":"fscope","kind":"member","scope":"global"},{"comment":"/**\\n * Renders an oscilloscope for the time domain of the audio signal.\\n * @name scope\\n * @synonyms tscope\\n * @param {object} config optional config with options:\\n * @param {boolean} align if 1, the scope will be aligned to the first zero crossing. defaults to 1\\n * @param {string} color line color as hex or color name. defaults to white.\\n * @param {number} thickness line thickness. defaults to 3\\n * @param {number} scale scales the y-axis. Defaults to 0.25\\n * @param {number} pos y-position relative to screen height. 0 = top, 1 = bottom of screen\\n * @param {number} trigger amplitude value that is used to align the scope. defaults to 0.\\n * @example\\n * s(\\"sawtooth\\")._scope()\\n */","meta":{"filename":"scope.mjs","lineno":121,"columnno":0,"path":"/home/alex/src/strudel/packages/webaudio","code":{}},"description":"<p>Renders an oscilloscope for the time domain of the audio signal.</p>","name":"scope","synonyms_text":"tscope","synonyms":["tscope"],"params":[{"type":{"names":["object"]},"description":"<p>optional config with options:</p>","name":"config"},{"type":{"names":["boolean"]},"description":"<p>if 1, the scope will be aligned to the first zero crossing. defaults to 1</p>","name":"align"},{"type":{"names":["string"]},"description":"<p>line color as hex or color name. defaults to white.</p>","name":"color"},{"type":{"names":["number"]},"description":"<p>line thickness. defaults to 3</p>","name":"thickness"},{"type":{"names":["number"]},"description":"<p>scales the y-axis. Defaults to 0.25</p>","name":"scale"},{"type":{"names":["number"]},"description":"<p>y-position relative to screen height. 0 = top, 1 = bottom of screen</p>","name":"pos"},{"type":{"names":["number"]},"description":"<p>amplitude value that is used to align the scope. defaults to 0.</p>","name":"trigger"}],"examples":["s(\\"sawtooth\\")._scope()"],"longname":"scope","kind":"member","scope":"global"},{"comment":"/**\\n * Renders a spectrum analyzer for the incoming audio signal.\\n * @name spectrum\\n * @param {object} config optional config with options:\\n * @param {integer} thickness line thickness in px (default 3)\\n * @param {integer} speed scroll speed (default 1)\\n * @param {integer} min min db (default -80)\\n * @param {integer} max max db (default 0)\\n * @example\\n * n(\\"<0 4 <2 3> 1>*3\\")\\n * .off(1/8, add(n(5)))\\n * .off(1/5, add(n(7)))\\n * .scale(\\"d3:minor:pentatonic\\")\\n * .s('sine')\\n * .dec(.3).room(.5)\\n * ._spectrum()\\n */","meta":{"filename":"spectrum.mjs","lineno":5,"columnno":0,"path":"/home/alex/src/strudel/packages/webaudio","code":{}},"description":"<p>Renders a spectrum analyzer for the incoming audio signal.</p>","name":"spectrum","params":[{"type":{"names":["object"]},"description":"<p>optional config with options:</p>","name":"config"},{"type":{"names":["integer"]},"description":"<p>line thickness in px (default 3)</p>","name":"thickness"},{"type":{"names":["integer"]},"description":"<p>scroll speed (default 1)</p>","name":"speed"},{"type":{"names":["integer"]},"description":"<p>min db (default -80)</p>","name":"min"},{"type":{"names":["integer"]},"description":"<p>max db (default 0)</p>","name":"max"}],"examples":["n(\\"<0 4 <2 3> 1>*3\\")\\n.off(1/8, add(n(5)))\\n.off(1/5, add(n(7)))\\n.scale(\\"d3:minor:pentatonic\\")\\n.s('sine')\\n.dec(.3).room(.5)\\n._spectrum()"],"longname":"spectrum","kind":"member","scope":"global"},{"kind":"package","longname":"package:undefined","files":["/home/alex/src/strudel/packages/codemirror/autocomplete.mjs","/home/alex/src/strudel/packages/codemirror/basicSetup.mjs","/home/alex/src/strudel/packages/codemirror/codemirror.mjs","/home/alex/src/strudel/packages/codemirror/flash.mjs","/home/alex/src/strudel/packages/codemirror/highlight.mjs","/home/alex/src/strudel/packages/codemirror/html.mjs","/home/alex/src/strudel/packages/codemirror/index.mjs","/home/alex/src/strudel/packages/codemirror/keybindings.mjs","/home/alex/src/strudel/packages/codemirror/slider.mjs","/home/alex/src/strudel/packages/codemirror/themes/CutiePi.mjs","/home/alex/src/strudel/packages/codemirror/themes/algoboy.mjs","/home/alex/src/strudel/packages/codemirror/themes/androidstudio.mjs","/home/alex/src/strudel/packages/codemirror/themes/archBtw.mjs","/home/alex/src/strudel/packages/codemirror/themes/atomone.mjs","/home/alex/src/strudel/packages/codemirror/themes/aura.mjs","/home/alex/src/strudel/packages/codemirror/themes/bbedit.mjs","/home/alex/src/strudel/packages/codemirror/themes/blackscreen.mjs","/home/alex/src/strudel/packages/codemirror/themes/bluescreen.mjs","/home/alex/src/strudel/packages/codemirror/themes/bluescreenlight.mjs","/home/alex/src/strudel/packages/codemirror/themes/darcula.mjs","/home/alex/src/strudel/packages/codemirror/themes/dracula.mjs","/home/alex/src/strudel/packages/codemirror/themes/duotoneDark.mjs","/home/alex/src/strudel/packages/codemirror/themes/duotoneLight.mjs","/home/alex/src/strudel/packages/codemirror/themes/eclipse.mjs","/home/alex/src/strudel/packages/codemirror/themes/fruitDaw.mjs","/home/alex/src/strudel/packages/codemirror/themes/githubDark.mjs","/home/alex/src/strudel/packages/codemirror/themes/githubLight.mjs","/home/alex/src/strudel/packages/codemirror/themes/green-text.mjs","/home/alex/src/strudel/packages/codemirror/themes/gruvboxDark.mjs","/home/alex/src/strudel/packages/codemirror/themes/gruvboxLight.mjs","/home/alex/src/strudel/packages/codemirror/themes/materialDark.mjs","/home/alex/src/strudel/packages/codemirror/themes/materialLight.mjs","/home/alex/src/strudel/packages/codemirror/themes/monokai.mjs","/home/alex/src/strudel/packages/codemirror/themes/noctisLilac.mjs","/home/alex/src/strudel/packages/codemirror/themes/nord.mjs","/home/alex/src/strudel/packages/codemirror/themes/red-text.mjs","/home/alex/src/strudel/packages/codemirror/themes/solarizedDark.mjs","/home/alex/src/strudel/packages/codemirror/themes/solarizedLight.mjs","/home/alex/src/strudel/packages/codemirror/themes/sonic-pink.mjs","/home/alex/src/strudel/packages/codemirror/themes/strudel-theme.mjs","/home/alex/src/strudel/packages/codemirror/themes/sublime.mjs","/home/alex/src/strudel/packages/codemirror/themes/teletext.mjs","/home/alex/src/strudel/packages/codemirror/themes/terminal.mjs","/home/alex/src/strudel/packages/codemirror/themes/theme-helper.mjs","/home/alex/src/strudel/packages/codemirror/themes/tokioNightStorm.mjs","/home/alex/src/strudel/packages/codemirror/themes/tokyoNight.mjs","/home/alex/src/strudel/packages/codemirror/themes/tokyoNightDay.mjs","/home/alex/src/strudel/packages/codemirror/themes/vscodeDark.mjs","/home/alex/src/strudel/packages/codemirror/themes/vscodeLight.mjs","/home/alex/src/strudel/packages/codemirror/themes/whitescreen.mjs","/home/alex/src/strudel/packages/codemirror/themes/xcodeLight.mjs","/home/alex/src/strudel/packages/codemirror/themes.mjs","/home/alex/src/strudel/packages/codemirror/tooltip.mjs","/home/alex/src/strudel/packages/codemirror/vite.config.js","/home/alex/src/strudel/packages/codemirror/widget.mjs","/home/alex/src/strudel/packages/core/bench/pattern.bench.mjs","/home/alex/src/strudel/packages/core/clockworker.js","/home/alex/src/strudel/packages/core/controls.mjs","/home/alex/src/strudel/packages/core/cyclist.mjs","/home/alex/src/strudel/packages/core/drawLine.mjs","/home/alex/src/strudel/packages/core/euclid.mjs","/home/alex/src/strudel/packages/core/evaluate.mjs","/home/alex/src/strudel/packages/core/fraction.mjs","/home/alex/src/strudel/packages/core/hap.mjs","/home/alex/src/strudel/packages/core/index.mjs","/home/alex/src/strudel/packages/core/logger.mjs","/home/alex/src/strudel/packages/core/neocyclist.mjs","/home/alex/src/strudel/packages/core/pattern.mjs","/home/alex/src/strudel/packages/core/pick.mjs","/home/alex/src/strudel/packages/core/repl.mjs","/home/alex/src/strudel/packages/core/signal.mjs","/home/alex/src/strudel/packages/core/speak.mjs","/home/alex/src/strudel/packages/core/state.mjs","/home/alex/src/strudel/packages/core/test/controls.test.mjs","/home/alex/src/strudel/packages/core/test/drawLine.test.mjs","/home/alex/src/strudel/packages/core/test/euclid.test.js","/home/alex/src/strudel/packages/core/test/fraction.test.mjs","/home/alex/src/strudel/packages/core/test/pattern.test.mjs","/home/alex/src/strudel/packages/core/test/solmization.test.js","/home/alex/src/strudel/packages/core/test/util.test.mjs","/home/alex/src/strudel/packages/core/test/value.test.mjs","/home/alex/src/strudel/packages/core/time.mjs","/home/alex/src/strudel/packages/core/timespan.mjs","/home/alex/src/strudel/packages/core/ui.mjs","/home/alex/src/strudel/packages/core/util.mjs","/home/alex/src/strudel/packages/core/value.mjs","/home/alex/src/strudel/packages/core/vite.config.js","/home/alex/src/strudel/packages/core/zyklus.mjs","/home/alex/src/strudel/packages/csound/index.mjs","/home/alex/src/strudel/packages/csound/vite.config.js","/home/alex/src/strudel/packages/desktopbridge/index.mjs","/home/alex/src/strudel/packages/desktopbridge/loggerbridge.mjs","/home/alex/src/strudel/packages/desktopbridge/midibridge.mjs","/home/alex/src/strudel/packages/desktopbridge/oscbridge.mjs","/home/alex/src/strudel/packages/desktopbridge/utils.mjs","/home/alex/src/strudel/packages/draw/animate.mjs","/home/alex/src/strudel/packages/draw/color.mjs","/home/alex/src/strudel/packages/draw/draw.mjs","/home/alex/src/strudel/packages/draw/index.mjs","/home/alex/src/strudel/packages/draw/pianoroll.mjs","/home/alex/src/strudel/packages/draw/pitchwheel.mjs","/home/alex/src/strudel/packages/draw/spiral.mjs","/home/alex/src/strudel/packages/draw/vite.config.js","/home/alex/src/strudel/packages/embed/embed.js","/home/alex/src/strudel/packages/gamepad/gamepad.mjs","/home/alex/src/strudel/packages/gamepad/index.mjs","/home/alex/src/strudel/packages/gamepad/vite.config.js","/home/alex/src/strudel/packages/hs2js/src/hs2js.mjs","/home/alex/src/strudel/packages/hs2js/src/index.mjs","/home/alex/src/strudel/packages/hs2js/src/parser.mjs","/home/alex/src/strudel/packages/hs2js/vite.config.js","/home/alex/src/strudel/packages/hydra/hydra.mjs","/home/alex/src/strudel/packages/hydra/vite.config.js","/home/alex/src/strudel/packages/midi/index.mjs","/home/alex/src/strudel/packages/midi/midi.mjs","/home/alex/src/strudel/packages/midi/vite.config.js","/home/alex/src/strudel/packages/mini/bench/mini.bench.mjs","/home/alex/src/strudel/packages/mini/index.mjs","/home/alex/src/strudel/packages/mini/krill-parser.js","/home/alex/src/strudel/packages/mini/mini.mjs","/home/alex/src/strudel/packages/mini/test/mini.test.mjs","/home/alex/src/strudel/packages/mini/vite.config.js","/home/alex/src/strudel/packages/mondo/mondo.mjs","/home/alex/src/strudel/packages/mondo/test/mondo.test.mjs","/home/alex/src/strudel/packages/mondo/vite.config.js","/home/alex/src/strudel/packages/mondough/mondough.mjs","/home/alex/src/strudel/packages/mondough/vite.config.js","/home/alex/src/strudel/packages/motion/index.mjs","/home/alex/src/strudel/packages/motion/motion.mjs","/home/alex/src/strudel/packages/motion/vite.config.js","/home/alex/src/strudel/packages/mqtt/mqtt.mjs","/home/alex/src/strudel/packages/mqtt/vite.config.js","/home/alex/src/strudel/packages/osc/osc.mjs","/home/alex/src/strudel/packages/osc/server.js","/home/alex/src/strudel/packages/osc/superdirtoutput.js","/home/alex/src/strudel/packages/osc/tidal-sniffer.js","/home/alex/src/strudel/packages/osc/vite.config.js","/home/alex/src/strudel/packages/reference/index.mjs","/home/alex/src/strudel/packages/reference/vite.config.js","/home/alex/src/strudel/packages/repl/index.mjs","/home/alex/src/strudel/packages/repl/prebake.mjs","/home/alex/src/strudel/packages/repl/repl-component.mjs","/home/alex/src/strudel/packages/repl/vite.config.js","/home/alex/src/strudel/packages/sampler/sample-server.mjs","/home/alex/src/strudel/packages/serial/serial.mjs","/home/alex/src/strudel/packages/serial/vite.config.js","/home/alex/src/strudel/packages/soundfonts/convert.js","/home/alex/src/strudel/packages/soundfonts/fontloader.mjs","/home/alex/src/strudel/packages/soundfonts/gm.mjs","/home/alex/src/strudel/packages/soundfonts/index.mjs","/home/alex/src/strudel/packages/soundfonts/list.mjs","/home/alex/src/strudel/packages/soundfonts/sfumato.mjs","/home/alex/src/strudel/packages/soundfonts/vite.config.js","/home/alex/src/strudel/packages/superdough/audioContext.mjs","/home/alex/src/strudel/packages/superdough/dspworklet.mjs","/home/alex/src/strudel/packages/superdough/feedbackdelay.mjs","/home/alex/src/strudel/packages/superdough/fft.js","/home/alex/src/strudel/packages/superdough/helpers.mjs","/home/alex/src/strudel/packages/superdough/index.mjs","/home/alex/src/strudel/packages/superdough/logger.mjs","/home/alex/src/strudel/packages/superdough/noise.mjs","/home/alex/src/strudel/packages/superdough/ola-processor.js","/home/alex/src/strudel/packages/superdough/reverb.mjs","/home/alex/src/strudel/packages/superdough/reverbGen.mjs","/home/alex/src/strudel/packages/superdough/sampler.mjs","/home/alex/src/strudel/packages/superdough/superdough.mjs","/home/alex/src/strudel/packages/superdough/superdoughoutput.mjs","/home/alex/src/strudel/packages/superdough/synth.mjs","/home/alex/src/strudel/packages/superdough/util.mjs","/home/alex/src/strudel/packages/superdough/vite.config.js","/home/alex/src/strudel/packages/superdough/vowel.mjs","/home/alex/src/strudel/packages/superdough/wavetable.mjs","/home/alex/src/strudel/packages/superdough/worklets.mjs","/home/alex/src/strudel/packages/superdough/zzfx.mjs","/home/alex/src/strudel/packages/superdough/zzfx_fork.mjs","/home/alex/src/strudel/packages/supradough/dough-export.mjs","/home/alex/src/strudel/packages/supradough/dough-worklet.mjs","/home/alex/src/strudel/packages/supradough/dough.mjs","/home/alex/src/strudel/packages/supradough/index.mjs","/home/alex/src/strudel/packages/tidal/tidal.mjs","/home/alex/src/strudel/packages/tonal/index.mjs","/home/alex/src/strudel/packages/tonal/ireal.mjs","/home/alex/src/strudel/packages/tonal/test/tonal.test.mjs","/home/alex/src/strudel/packages/tonal/test/tonleiter.test.mjs","/home/alex/src/strudel/packages/tonal/tonal.mjs","/home/alex/src/strudel/packages/tonal/tonleiter.mjs","/home/alex/src/strudel/packages/tonal/vite.config.js","/home/alex/src/strudel/packages/tonal/voicings.mjs","/home/alex/src/strudel/packages/transpiler/index.mjs","/home/alex/src/strudel/packages/transpiler/test/transpiler.test.mjs","/home/alex/src/strudel/packages/transpiler/transpiler.mjs","/home/alex/src/strudel/packages/transpiler/vite.config.js","/home/alex/src/strudel/packages/vite-plugin-bundle-audioworklet/vite-plugin-bundle-audioworklet.js","/home/alex/src/strudel/packages/web/vite.config.js","/home/alex/src/strudel/packages/web/web.mjs","/home/alex/src/strudel/packages/webaudio/index.mjs","/home/alex/src/strudel/packages/webaudio/scope.mjs","/home/alex/src/strudel/packages/webaudio/spectrum.mjs","/home/alex/src/strudel/packages/webaudio/supradough.mjs","/home/alex/src/strudel/packages/webaudio/vite.config.js","/home/alex/src/strudel/packages/webaudio/webaudio.mjs","/home/alex/src/strudel/packages/xen/index.mjs","/home/alex/src/strudel/packages/xen/test/xen.test.mjs","/home/alex/src/strudel/packages/xen/tune.mjs","/home/alex/src/strudel/packages/xen/tunejs.js","/home/alex/src/strudel/packages/xen/vite.config.js","/home/alex/src/strudel/packages/xen/xen.mjs"]}]`),jsdoc={docs};let html=l=>{const a=document.createElement("template");return a.innerHTML=l.trim(),a.content.childNodes},parseChunk=l=>Array.isArray(l)?l.flat().join(""):l===void 0?"":l,h=(l,...a)=>{let o="";for(let u in l)o+=parseChunk(l[u]),o+=parseChunk(a[u]);return html(o)};function isNamedPitch$1(l){return l!==null&&typeof l=="object"&&"name"in l&&typeof l.name=="string"}function isPitch$1(l){return l!==null&&typeof l=="object"&&"step"in l&&typeof l.step=="number"&&"alt"in l&&typeof l.alt=="number"&&!isNaN(l.step)&&!isNaN(l.alt)}var FIFTHS$1=[0,2,4,-1,1,3,5],STEPS_TO_OCTS$1=FIFTHS$1.map(l=>Math.floor(l*7/12));function coordinates$1(l){const{step:a,alt:o,oct:u,dir:p=1}=l,d=FIFTHS$1[a]+7*o;if(u===void 0)return[p*d];const f=u-STEPS_TO_OCTS$1[a]-4*o;return[p*d,p*f]}var FIFTHS_TO_STEPS$1=[3,0,4,1,5,2,6];function pitch$1(l){const[a,o,u]=l,p=FIFTHS_TO_STEPS$1[unaltered$1(a)],d=Math.floor((a+1)/7);if(o===void 0)return{step:p,alt:d,dir:u};const f=o+4*d+STEPS_TO_OCTS$1[p];return{step:p,alt:d,oct:f,dir:u}}function unaltered$1(l){const a=(l+1)%7;return a<0?7+a:a}var fillStr$5=(l,a)=>Array(Math.abs(a)+1).join(l),NoInterval$1=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),INTERVAL_TONAL_REGEX$1="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX$1="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$8=new RegExp("^"+INTERVAL_TONAL_REGEX$1+"|"+INTERVAL_SHORTHAND_REGEX$1+"$");function tokenizeInterval$1(l){const a=REGEX$8.exec(`${l}`);return a===null?["",""]:a[1]?[a[1],a[2]]:[a[4],a[3]]}var cache$5={};function interval$1(l){return typeof l=="string"?cache$5[l]||(cache$5[l]=parse$5(l)):isPitch$1(l)?interval$1(pitchName$3(l)):isNamedPitch$1(l)?interval$1(l.name):NoInterval$1}var SIZES$2=[0,2,4,5,7,9,11],TYPES$1="PMMPPMM";function parse$5(l){const a=tokenizeInterval$1(l);if(a[0]==="")return NoInterval$1;const o=+a[0],u=a[1],p=(Math.abs(o)-1)%7,d=TYPES$1[p];if(d==="M"&&u==="P")return NoInterval$1;const f=d==="M"?"majorable":"perfectable",g=""+o+u,b=o<0?-1:1,O=o===8||o===-8?o:b*(p+1),S=qToAlt$1(f,u),M=Math.floor((Math.abs(o)-1)/7),A=b*(SIZES$2[p]+S+12*M),F=(b*(SIZES$2[p]+S)%12+12)%12,$=coordinates$1({step:p,alt:S,oct:M,dir:b});return{empty:!1,name:g,num:o,q:u,step:p,alt:S,dir:b,type:f,simple:O,semitones:A,chroma:F,coord:$,oct:M}}function coordToInterval$1(l,a){const[o,u=0]=l,p=o*7+u*12<0,d=a||p?[-o,-u,-1]:[o,u,1];return interval$1(pitch$1(d))}function qToAlt$1(l,a){return a==="M"&&l==="majorable"||a==="P"&&l==="perfectable"?0:a==="m"&&l==="majorable"?-1:/^A+$/.test(a)?a.length:/^d+$/.test(a)?-1*(l==="perfectable"?a.length:a.length+1):0}function pitchName$3(l){const{step:a,alt:o,oct:u=0,dir:p}=l;if(!p)return"";const d=a+1+7*u,f=d===0?a+1:d,g=p<0?"-":"",b=TYPES$1[a]==="M"?"majorable":"perfectable";return g+f+altToQ$1(b,o)}function altToQ$1(l,a){return a===0?l==="majorable"?"M":"P":a===-1&&l==="majorable"?"m":a>0?fillStr$5("A",a):fillStr$5("d",l==="perfectable"?a:a+1)}var fillStr$4=(l,a)=>Array(Math.abs(a)+1).join(l),NoNote$1=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),cache$4=new Map,stepToLetter$1=l=>"CDEFGAB".charAt(l),altToAcc$1=l=>l<0?fillStr$4("b",-l):fillStr$4("#",l),accToAlt$1=l=>l[0]==="b"?-l.length:l.length;function note$1(l){const a=JSON.stringify(l),o=cache$4.get(a);if(o)return o;const u=typeof l=="string"?parse$4(l):isPitch$1(l)?note$1(pitchName$2(l)):isNamedPitch$1(l)?note$1(l.name):NoNote$1;return cache$4.set(a,u),u}var REGEX$7=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote$1(l){const a=REGEX$7.exec(l);return a?[a[1].toUpperCase(),a[2].replace(/x/g,"##"),a[3],a[4]]:["","","",""]}function coordToNote$1(l){return note$1(pitch$1(l))}var mod$1=(l,a)=>(l%a+a)%a,SEMI$1=[0,2,4,5,7,9,11];function parse$4(l){const a=tokenizeNote$1(l);if(a[0]===""||a[3]!=="")return NoNote$1;const o=a[0],u=a[1],p=a[2],d=(o.charCodeAt(0)+3)%7,f=accToAlt$1(u),g=p.length?+p:void 0,b=coordinates$1({step:d,alt:f,oct:g}),O=o+u+p,S=o+u,M=(SEMI$1[d]+f+120)%12,A=g===void 0?mod$1(SEMI$1[d]+f,12)-12*99:SEMI$1[d]+f+12*(g+1),F=A>=0&&A<=127?A:null,$=g===void 0?null:Math.pow(2,(A-69)/12)*440;return{empty:!1,acc:u,alt:f,chroma:M,coord:b,freq:$,height:A,letter:o,midi:F,name:O,oct:g,pc:S,step:d}}function pitchName$2(l){const{step:a,alt:o,oct:u}=l,p=stepToLetter$1(a);if(!p)return"";const d=p+altToAcc$1(o);return u||u===0?d+u:d}function transpose$5(l,a){const o=note$1(l),u=Array.isArray(a)?a:interval$1(a).coord;if(o.empty||!u||u.length<2)return"";const p=o.coord,d=p.length===1?[p[0]+u[0]]:[p[0]+u[0],p[1]+u[1]];return coordToNote$1(d).name}function tonicIntervalsTransposer$1(l,a){const o=l.length;return u=>{if(!a)return"";const p=u<0?(o- -u%o)%o:u%o,d=Math.floor(u/o),f=transpose$5(a,[0,d]);return transpose$5(f,l[p])}}function distance$5(l,a){const o=note$1(l),u=note$1(a);if(o.empty||u.empty)return"";const p=o.coord,d=u.coord,f=d[0]-p[0],g=p.length===2&&d.length===2?d[1]-p[1]:-Math.floor(f*7/12),b=u.height===o.height&&u.midi!==null&&o.oct===u.oct&&o.step>u.step;return coordToInterval$1([f,g],b).name}var fillStr$3=(l,a)=>Array(a+1).join(l),REGEX$6=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function tokenize$4(l){const a=REGEX$6.exec(l);return a?[a[1],a[2],a[3]]:["","",""]}function abcToScientificNotation(l){const[a,o,u]=tokenize$4(l);if(o==="")return"";let p=4;for(let f=0;f<u.length;f++)p+=u.charAt(f)===","?-1:1;const d=a[0]==="_"?a.replace(/_/g,"b"):a[0]==="^"?a.replace(/\^/g,"#"):"";return o.charCodeAt(0)>96?o.toUpperCase()+d+(p+1):o+d+p}function scientificToAbcNotation(l){const a=note$1(l);if(a.empty||!a.oct&&a.oct!==0)return"";const{letter:o,acc:u,oct:p}=a,d=u[0]==="b"?u.replace(/b/g,"_"):u.replace(/#/g,"^"),f=p>4?o.toLowerCase():o,g=p===5?"":p>4?fillStr$3("'",p-5):fillStr$3(",",4-p);return d+f+g}function transpose$4(l,a){return scientificToAbcNotation(transpose$5(abcToScientificNotation(l),a))}function distance$4(l,a){return distance$5(abcToScientificNotation(l),abcToScientificNotation(a))}var abc_notation_default={abcToScientificNotation,scientificToAbcNotation,tokenize:tokenize$4,transpose:transpose$4,distance:distance$4};function ascR$1(l,a){const o=[];for(;a--;o[a]=a+l);return o}function descR$1(l,a){const o=[];for(;a--;o[a]=l-a);return o}function range$1(l,a){return l<a?ascR$1(l,a-l+1):descR$1(l,l-a+1)}function rotate$1(l,a){const o=a.length,u=(l%o+o)%o;return a.slice(u,o).concat(a.slice(0,u))}function compact$1(l){return l.filter(a=>a===0||a)}function sortedNoteNames(l){return l.map(o=>note$1(o)).filter(o=>!o.empty).sort((o,u)=>o.height-u.height).map(o=>o.name)}function sortedUniqNoteNames(l){return sortedNoteNames(l).filter((a,o,u)=>o===0||a!==u[o-1])}function shuffle$1(l,a=Math.random){let o,u,p=l.length;for(;p;)o=Math.floor(a()*p--),u=l[p],l[p]=l[o],l[o]=u;return l}function permutations$1(l){return l.length===0?[[]]:permutations$1(l.slice(1)).reduce((a,o)=>a.concat(l.map((u,p)=>{const d=o.slice();return d.splice(p,0,l[0]),d})),[])}const index$8=Object.freeze(Object.defineProperty({__proto__:null,compact:compact$1,permutations:permutations$1,range:range$1,rotate:rotate$1,shuffle:shuffle$1,sortedNoteNames,sortedUniqNoteNames},Symbol.toStringTag,{value:"Module"}));function ascR(l,a){const o=[];for(;a--;o[a]=a+l);return o}function descR(l,a){const o=[];for(;a--;o[a]=l-a);return o}function range(l,a){return l<a?ascR(l,a-l+1):descR(l,l-a+1)}function rotate(l,a){const o=a.length,u=(l%o+o)%o;return a.slice(u,o).concat(a.slice(0,u))}function compact(l){return l.filter(a=>a===0||a)}function shuffle(l,a=Math.random){let o,u,p=l.length;for(;p;)o=Math.floor(a()*p--),u=l[p],l[p]=l[o],l[o]=u;return l}function permutations(l){return l.length===0?[[]]:permutations(l.slice(1)).reduce((a,o)=>a.concat(l.map((u,p)=>{const d=o.slice();return d.splice(p,0,l[0]),d})),[])}var collection_default={compact,permutations,range,rotate,shuffle},EmptyPcset={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},setNumToChroma=l=>Number(l).toString(2).padStart(12,"0"),chromaToNumber=l=>parseInt(l,2),REGEX$5=/^[01]{12}$/;function isChroma(l){return REGEX$5.test(l)}var isPcsetNum=l=>typeof l=="number"&&l>=0&&l<=4095,isPcset=l=>l&&isChroma(l.chroma),cache$3={[EmptyPcset.chroma]:EmptyPcset};function get$b(l){const a=isChroma(l)?l:isPcsetNum(l)?setNumToChroma(l):Array.isArray(l)?listToChroma(l):isPcset(l)?l.chroma:EmptyPcset.chroma;return cache$3[a]=cache$3[a]||chromaToPcset(a)}var pcset$1=get$b,chroma$3=l=>get$b(l).chroma,intervals=l=>get$b(l).intervals,num$1=l=>get$b(l).setNum,IVLS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function chromaToIntervals(l){const a=[];for(let o=0;o<12;o++)l.charAt(o)==="1"&&a.push(IVLS[o]);return a}function notes$1(l){return get$b(l).intervals.map(a=>transpose$5("C",a))}function chromas(){return range(2048,4095).map(setNumToChroma)}function modes$1(l,a=!0){const u=get$b(l).chroma.split("");return compact(u.map((p,d)=>{const f=rotate(d,u);return a&&f[0]==="0"?null:f.join("")}))}function isEqual(l,a){return get$b(l).setNum===get$b(a).setNum}function isSubsetOf(l){const a=get$b(l).setNum;return o=>{const u=get$b(o).setNum;return a&&a!==u&&(u&a)===u}}function isSupersetOf(l){const a=get$b(l).setNum;return o=>{const u=get$b(o).setNum;return a&&a!==u&&(u|a)===u}}function isNoteIncludedIn(l){const a=get$b(l);return o=>{const u=note$1(o);return a&&!u.empty&&a.chroma.charAt(u.chroma)==="1"}}function filter(l){const a=isNoteIncludedIn(l);return o=>o.filter(a)}var pcset_default={get:get$b,chroma:chroma$3,num:num$1,intervals,chromas,isSupersetOf,isSubsetOf,isNoteIncludedIn,isEqual,filter,modes:modes$1,notes:notes$1,pcset:pcset$1};function chromaRotations(l){const a=l.split("");return a.map((o,u)=>rotate(u,a).join(""))}function chromaToPcset(l){const a=chromaToNumber(l),o=chromaRotations(l).map(chromaToNumber).filter(d=>d>=2048).sort()[0],u=setNumToChroma(o),p=chromaToIntervals(l);return{empty:!1,name:"",setNum:a,chroma:l,normalized:u,intervals:p}}function listToChroma(l){if(l.length===0)return EmptyPcset.chroma;let a;const o=[0,0,0,0,0,0,0,0,0,0,0,0];for(let u=0;u<l.length;u++)a=note$1(l[u]),a.empty&&(a=interval$1(l[u])),a.empty||(o[a.chroma]=1);return o.join("")}var CHORDS$1=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$3=CHORDS$1;({...EmptyPcset});var dictionary$2=[],index$7={};function all$3(){return dictionary$2.slice()}function add$5(l,a,o){const u=getQuality$1(l),p={...get$b(l),name:o||"",quality:u,intervals:l,aliases:a};dictionary$2.push(p),p.name&&(index$7[p.name]=p),index$7[p.setNum]=p,index$7[p.chroma]=p,p.aliases.forEach(d=>addAlias$2(p,d))}function addAlias$2(l,a){index$7[a]=l}function getQuality$1(l){const a=o=>l.indexOf(o)!==-1;return a("5A")?"Augmented":a("3M")?"Major":a("5d")?"Diminished":a("3m")?"Minor":"Unknown"}data_default$3.forEach(([l,a,o])=>add$5(l.split(" "),o.split(" "),a)),dictionary$2.sort((l,a)=>l.setNum-a.setNum);var namedSet=l=>{const a=l.reduce((o,u)=>{const p=note$1(u).chroma;return p!==void 0&&(o[p]=o[p]||note$1(u).name),o},{});return o=>a[o]};function detect$1(l,a={}){const o=l.map(p=>note$1(p).pc).filter(p=>p);return note$1.length===0?[]:findMatches(o,1,a).filter(p=>p.weight).sort((p,d)=>d.weight-p.weight).map(p=>p.name)}var BITMASK={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},testChromaNumber=l=>a=>!!(a&l),hasAnyThird=testChromaNumber(BITMASK.anyThirds),hasPerfectFifth=testChromaNumber(BITMASK.perfectFifth),hasAnySeventh=testChromaNumber(BITMASK.anySeventh),hasNonPerfectFifth=testChromaNumber(BITMASK.nonPerfectFifths);function hasAnyThirdAndPerfectFifthAndAnySeventh(l){const a=parseInt(l.chroma,2);return hasAnyThird(a)&&hasPerfectFifth(a)&&hasAnySeventh(a)}function withPerfectFifth(l){const a=parseInt(l,2);return hasNonPerfectFifth(a)?l:(a|16).toString(2)}function findMatches(l,a,o){const u=l[0],p=note$1(u).chroma,d=namedSet(l),f=modes$1(l,!1),g=[];return f.forEach((b,O)=>{const S=o.assumePerfectFifth&&withPerfectFifth(b);all$3().filter(A=>o.assumePerfectFifth&&hasAnyThirdAndPerfectFifthAndAnySeventh(A)?A.chroma===S:A.chroma===b).forEach(A=>{const F=A.aliases[0],$=d(O);O!==p?g.push({weight:.5*a,name:`${$}${F}/${u}`}):g.push({weight:1*a,name:`${$}${F}`})})}),g}function isNamedPitch(l){return l!==null&&typeof l=="object"&&"name"in l&&typeof l.name=="string"}var SIZES$1=[0,2,4,5,7,9,11],chroma$2=({step:l,alt:a})=>(SIZES$1[l]+a+120)%12,height=({step:l,alt:a,oct:o,dir:u=1})=>u*(SIZES$1[l]+a+12*(o===void 0?-100:o)),midi$1=l=>{const a=height(l);return l.oct!==void 0&&a>=-12&&a<=115?a+12:null};function isPitch(l){return l!==null&&typeof l=="object"&&"step"in l&&typeof l.step=="number"&&"alt"in l&&typeof l.alt=="number"}var FIFTHS=[0,2,4,-1,1,3,5],STEPS_TO_OCTS=FIFTHS.map(l=>Math.floor(l*7/12));function coordinates(l){const{step:a,alt:o,oct:u,dir:p=1}=l,d=FIFTHS[a]+7*o;if(u===void 0)return[p*d];const f=u-STEPS_TO_OCTS[a]-4*o;return[p*d,p*f]}var FIFTHS_TO_STEPS=[3,0,4,1,5,2,6];function pitch(l){const[a,o,u]=l,p=FIFTHS_TO_STEPS[unaltered(a)],d=Math.floor((a+1)/7);if(o===void 0)return{step:p,alt:d,dir:u};const f=o+4*d+STEPS_TO_OCTS[p];return{step:p,alt:d,oct:f,dir:u}}function unaltered(l){const a=(l+1)%7;return a<0?7+a:a}var fillStr$2=(l,a)=>Array(Math.abs(a)+1).join(l),NoInterval={empty:!0,name:"",acc:""},INTERVAL_TONAL_REGEX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",INTERVAL_SHORTHAND_REGEX="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$4=new RegExp("^"+INTERVAL_TONAL_REGEX+"|"+INTERVAL_SHORTHAND_REGEX+"$");function tokenizeInterval(l){const a=REGEX$4.exec(`${l}`);return a===null?["",""]:a[1]?[a[1],a[2]]:[a[4],a[3]]}var cache$2={};function interval(l){return typeof l=="string"?cache$2[l]||(cache$2[l]=parse$3(l)):isPitch(l)?interval(pitchName$1(l)):isNamedPitch(l)?interval(l.name):NoInterval}var SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM";function parse$3(l){const a=tokenizeInterval(l);if(a[0]==="")return NoInterval;const o=+a[0],u=a[1],p=(Math.abs(o)-1)%7,d=TYPES[p];if(d==="M"&&u==="P")return NoInterval;const f=d==="M"?"majorable":"perfectable",g=""+o+u,b=o<0?-1:1,O=o===8||o===-8?o:b*(p+1),S=qToAlt(f,u),M=Math.floor((Math.abs(o)-1)/7),A=b*(SIZES[p]+S+12*M),F=(b*(SIZES[p]+S)%12+12)%12,$=coordinates({step:p,alt:S,oct:M,dir:b});return{empty:!1,name:g,num:o,q:u,step:p,alt:S,dir:b,type:f,simple:O,semitones:A,chroma:F,coord:$,oct:M}}function coordToInterval(l,a){const[o,u=0]=l,p=o*7+u*12<0,d=a||p?[-o,-u,-1]:[o,u,1];return interval(pitch(d))}function qToAlt(l,a){return a==="M"&&l==="majorable"||a==="P"&&l==="perfectable"?0:a==="m"&&l==="majorable"?-1:/^A+$/.test(a)?a.length:/^d+$/.test(a)?-1*(l==="perfectable"?a.length:a.length+1):0}function pitchName$1(l){const{step:a,alt:o,oct:u=0,dir:p}=l;if(!p)return"";const d=a+1+7*u,f=d===0?a+1:d,g=p<0?"-":"",b=TYPES[a]==="M"?"majorable":"perfectable";return g+f+altToQ(b,o)}function altToQ(l,a){return a===0?l==="majorable"?"M":"P":a===-1&&l==="majorable"?"m":a>0?fillStr$2("A",a):fillStr$2("d",l==="perfectable"?a:a+1)}var fillStr$1=(l,a)=>Array(Math.abs(a)+1).join(l),NoNote={empty:!0,name:"",pc:"",acc:""},cache$1=new Map,stepToLetter=l=>"CDEFGAB".charAt(l),altToAcc=l=>l<0?fillStr$1("b",-l):fillStr$1("#",l),accToAlt=l=>l[0]==="b"?-l.length:l.length;function note(l){const a=JSON.stringify(l),o=cache$1.get(a);if(o)return o;const u=typeof l=="string"?parse$2(l):isPitch(l)?note(pitchName(l)):isNamedPitch(l)?note(l.name):NoNote;return cache$1.set(a,u),u}var REGEX$3=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote(l){const a=REGEX$3.exec(l);return a?[a[1].toUpperCase(),a[2].replace(/x/g,"##"),a[3],a[4]]:["","","",""]}function coordToNote(l){return note(pitch(l))}var mod=(l,a)=>(l%a+a)%a,SEMI=[0,2,4,5,7,9,11];function parse$2(l){const a=tokenizeNote(l);if(a[0]===""||a[3]!=="")return NoNote;const o=a[0],u=a[1],p=a[2],d=(o.charCodeAt(0)+3)%7,f=accToAlt(u),g=p.length?+p:void 0,b=coordinates({step:d,alt:f,oct:g}),O=o+u+p,S=o+u,M=(SEMI[d]+f+120)%12,A=g===void 0?mod(SEMI[d]+f,12)-12*99:SEMI[d]+f+12*(g+1),F=A>=0&&A<=127?A:null,$=g===void 0?null:Math.pow(2,(A-69)/12)*440;return{empty:!1,acc:u,alt:f,chroma:M,coord:b,freq:$,height:A,letter:o,midi:F,name:O,oct:g,pc:S,step:d}}function pitchName(l){const{step:a,alt:o,oct:u}=l,p=stepToLetter(a);if(!p)return"";const d=p+altToAcc(o);return u||u===0?d+u:d}function transpose$3(l,a){const o=note(l),u=Array.isArray(a)?a:interval(a).coord;if(o.empty||!u||u.length<2)return"";const p=o.coord,d=p.length===1?[p[0]+u[0]]:[p[0]+u[0],p[1]+u[1]];return coordToNote(d).name}function tonicIntervalsTransposer(l,a){const o=l.length;return u=>{if(!a)return"";const p=u<0?(o- -u%o)%o:u%o,d=Math.floor(u/o),f=transpose$3(a,[0,d]);return transpose$3(f,l[p])}}function distance$3(l,a){const o=note(l),u=note(a);if(o.empty||u.empty)return"";const p=o.coord,d=u.coord,f=d[0]-p[0],g=p.length===2&&d.length===2?d[1]-p[1]:-Math.floor(f*7/12),b=u.height===o.height&&u.midi!==null&&o.midi!==null&&o.step>u.step;return coordToInterval([f,g],b).name}var fillStr=(l,a)=>Array(Math.abs(a)+1).join(l);function deprecate(l,a,o){return function(...u){return console.warn(`${l} is deprecated. Use ${a}.`),o.apply(this,u)}}var isNamed=deprecate("isNamed","isNamedPitch",isNamedPitch);const Core=Object.freeze(Object.defineProperty({__proto__:null,accToAlt,altToAcc,chroma:chroma$2,coordToInterval,coordToNote,coordinates,deprecate,distance:distance$3,fillStr,height,interval,isNamed,isNamedPitch,isPitch,midi:midi$1,note,pitch,stepToLetter,tokenizeInterval,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$3},Symbol.toStringTag,{value:"Module"}));var CHORDS=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],data_default$2=CHORDS,NoChordType={...EmptyPcset,name:"",quality:"Unknown",intervals:[],aliases:[]},dictionary$1=[],index$6={};function get$a(l){return index$6[l]||NoChordType}var chordType=deprecate("ChordType.chordType","ChordType.get",get$a);function names$8(){return dictionary$1.map(l=>l.name).filter(l=>l)}function symbols(){return dictionary$1.map(l=>l.aliases[0]).filter(l=>l)}function keys$2(){return Object.keys(index$6)}function all$2(){return dictionary$1.slice()}var entries$2=deprecate("ChordType.entries","ChordType.all",all$2);function removeAll$1(){dictionary$1=[],index$6={}}function add$4(l,a,o){const u=getQuality(l),p={...get$b(l),name:o||"",quality:u,intervals:l,aliases:a};dictionary$1.push(p),p.name&&(index$6[p.name]=p),index$6[p.setNum]=p,index$6[p.chroma]=p,p.aliases.forEach(d=>addAlias$1(p,d))}function addAlias$1(l,a){index$6[a]=l}function getQuality(l){const a=o=>l.indexOf(o)!==-1;return a("5A")?"Augmented":a("3M")?"Major":a("5d")?"Diminished":a("3m")?"Minor":"Unknown"}data_default$2.forEach(([l,a,o])=>add$4(l.split(" "),o.split(" "),a)),dictionary$1.sort((l,a)=>l.setNum-a.setNum);var chord_type_default={names:names$8,symbols,get:get$a,all:all$2,add:add$4,removeAll:removeAll$1,keys:keys$2,entries:entries$2,chordType},SCALES=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],data_default$1=SCALES,NoScaleType={...EmptyPcset,intervals:[],aliases:[]},dictionary=[],index$5={};function names$7(){return dictionary.map(l=>l.name)}function get$9(l){return index$5[l]||NoScaleType}var scaleType=get$9;function all$1(){return dictionary.slice()}var entries$1=all$1;function keys$1(){return Object.keys(index$5)}function removeAll(){dictionary=[],index$5={}}function add$3(l,a,o=[]){const u={...get$b(l),name:a,intervals:l,aliases:o};return dictionary.push(u),index$5[u.name]=u,index$5[u.setNum]=u,index$5[u.chroma]=u,u.aliases.forEach(p=>addAlias(u,p)),u}function addAlias(l,a){index$5[a]=l}data_default$1.forEach(([l,a,...o])=>add$3(l.split(" "),a,o));var scale_type_default={names:names$7,get:get$9,all:all$1,add:add$3,removeAll,keys:keys$1,entries:entries$1,scaleType},NoChord={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize$3(l){const[a,o,u,p]=tokenizeNote(l);return a===""?["",l]:a==="A"&&p==="ug"?["","aug"]:[a+o,u+p]}function get$8(l){if(l==="")return NoChord;if(Array.isArray(l)&&l.length===2)return getChord(l[1],l[0]);{const[a,o]=tokenize$3(l),u=getChord(o,a);return u.empty?getChord(l):u}}function getChord(l,a,o){const u=get$a(l),p=note(a||""),d=note(o||"");if(u.empty||a&&p.empty||o&&d.empty)return NoChord;const f=distance$3(p.pc,d.pc),g=u.intervals.indexOf(f)+1;if(!d.empty&&!g)return NoChord;const b=Array.from(u.intervals);for(let A=1;A<g;A++){const F=b[0][0],$=b[0][1],B=parseInt(F,10)+7;b.push(`${B}${$}`),b.shift()}const O=p.empty?[]:b.map(A=>transpose$3(p,A));l=u.aliases.indexOf(l)!==-1?l:u.aliases[0];const S=`${p.empty?"":p.pc}${l}${d.empty||g<=1?"":"/"+d.pc}`,M=`${a?p.pc+" ":""}${u.name}${g>1&&o?" over "+d.pc:""}`;return{...u,name:M,symbol:S,type:u.name,root:d.name,intervals:b,rootDegree:g,tonic:p.name,notes:O}}var chord=deprecate("Chord.chord","Chord.get",get$8);function transpose$2(l,a){const[o,u]=tokenize$3(l);return o?transpose$3(o,a)+u:l}function chordScales(l){const a=get$8(l),o=isSupersetOf(a.chroma);return all$1().filter(u=>o(u.chroma)).map(u=>u.name)}function extended$1(l){const a=get$8(l),o=isSupersetOf(a.chroma);return all$2().filter(u=>o(u.chroma)).map(u=>a.tonic+u.aliases[0])}function reduced$1(l){const a=get$8(l),o=isSubsetOf(a.chroma);return all$2().filter(u=>o(u.chroma)).map(u=>a.tonic+u.aliases[0])}function degrees$1(l){const{intervals:a,tonic:o}=get$8(l),u=tonicIntervalsTransposer(a,o);return p=>p?u(p>0?p-1:p):""}function steps$1(l){const{intervals:a,tonic:o}=get$8(l);return tonicIntervalsTransposer(a,o)}var chord_default={getChord,get:get$8,detect:detect$1,chordScales,extended:extended$1,reduced:reduced$1,tokenize:tokenize$3,transpose:transpose$2,degrees:degrees$1,steps:steps$1,chord},DATA=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],data_default=DATA,VALUES=[];data_default.forEach(([l,a,o])=>add$2(l,a,o));var NoDuration={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function names$6(){return VALUES.reduce((l,a)=>(a.names.forEach(o=>l.push(o)),l),[])}function shorthands(){return VALUES.map(l=>l.shorthand)}var REGEX$2=/^([^.]+)(\.*)$/;function get$7(l){const[a,o,u]=REGEX$2.exec(l)||[],p=VALUES.find(g=>g.shorthand===o||g.names.includes(o));if(!p)return NoDuration;const d=calcDots(p.fraction,u.length),f=d[0]/d[1];return{...p,name:l,dots:u,value:f,fraction:d}}var value=l=>get$7(l).value,fraction=l=>get$7(l).fraction,duration_value_default={names:names$6,shorthands,get:get$7,value,fraction};function add$2(l,a,o){VALUES.push({empty:!1,dots:"",name:"",value:1/l,fraction:l<1?[1/l,1]:[1,l],shorthand:a,names:o})}function calcDots(l,a){const o=Math.pow(2,a);let u=l[0]*o,p=l[1]*o;const d=u;for(let f=0;f<a;f++)u+=d/Math.pow(2,f+1);for(;u%2===0&&p%2===0;)u/=2,p/=2;return[u,p]}function names$5(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var get$6=interval,name$1=l=>interval(l).name,semitones=l=>interval(l).semitones,quality=l=>interval(l).q,num=l=>interval(l).num;function simplify$2(l){const a=interval(l);return a.empty?"":a.simple+a.q}function invert(l){const a=interval(l);if(a.empty)return"";const o=(7-a.step)%7,u=a.type==="perfectable"?-a.alt:-(a.alt+1);return interval({step:o,alt:u,oct:a.oct,dir:a.dir}).name}var IN=[1,2,2,3,3,4,5,5,6,6,7,7],IQ="P m M m M P d P m M m M".split(" ");function fromSemitones(l){const a=l<0?-1:1,o=Math.abs(l),u=o%12,p=Math.floor(o/12);return a*(IN[u]+7*p)+IQ[u]}var distance$2=distance$5,add$1=combinator((l,a)=>[l[0]+a[0],l[1]+a[1]]),addTo=l=>a=>add$1(l,a),substract=combinator((l,a)=>[l[0]-a[0],l[1]-a[1]]);function transposeFifths$2(l,a){const o=get$6(l);if(o.empty)return"";const[u,p,d]=o.coord;return coordToInterval([u+a,p,d]).name}var interval_default={names:names$5,get:get$6,name:name$1,num,semitones,quality,fromSemitones,distance:distance$2,invert,simplify:simplify$2,add:add$1,addTo,substract,transposeFifths:transposeFifths$2};function combinator(l){return(a,o)=>{const u=interval(a).coord,p=interval(o).coord;if(u&&p){const d=l(u,p);return coordToInterval(d).name}}}function isMidi(l){return+l>=0&&+l<=127}function toMidi(l){if(isMidi(l))return+l;const a=note$1(l);return a.empty?null:a.midi}function midiToFreq(l,a=440){return Math.pow(2,(l-69)/12)*a}var L2=Math.log(2),L440=Math.log(440);function freqToMidi(l){const a=12*(Math.log(l)-L440)/L2+69;return Math.round(a*100)/100}var SHARPS="C C# D D# E F F# G G# A A# B".split(" "),FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");function midiToNoteName(l,a={}){if(isNaN(l)||l===-1/0||l===1/0)return"";l=Math.round(l);const u=(a.sharps===!0?SHARPS:FLATS)[l%12];if(a.pitchClass)return u;const p=Math.floor(l/12)-1;return u+p}function chroma$1(l){return l%12}function pcsetFromChroma(l){return l.split("").reduce((a,o,u)=>(u<12&&o==="1"&&a.push(u),a),[])}function pcsetFromMidi(l){return l.map(chroma$1).sort((a,o)=>a-o).filter((a,o,u)=>o===0||a!==u[o-1])}function pcset(l){return Array.isArray(l)?pcsetFromMidi(l):pcsetFromChroma(l)}function pcsetNearest(l){const a=pcset(l);return o=>{const u=chroma$1(o);for(let p=0;p<12;p++){if(a.includes(u+p))return o+p;if(a.includes(u-p))return o-p}}}function pcsetSteps(l,a){const o=pcset(l),u=o.length;return p=>{const d=p<0?(u- -p%u)%u:p%u,f=Math.floor(p/u);return o[d]+f*12+a}}function pcsetDegrees(l,a){const o=pcsetSteps(l,a);return u=>{if(u!==0)return o(u>0?u-1:u)}}var midi_default={chroma:chroma$1,freqToMidi,isMidi,midiToFreq,midiToNoteName,pcsetNearest,pcset,pcsetDegrees,pcsetSteps,toMidi},NAMES$2=["C","D","E","F","G","A","B"],toName=l=>l.name,onlyNotes=l=>l.map(note$1).filter(a=>!a.empty);function names$4(l){return l===void 0?NAMES$2.slice():Array.isArray(l)?onlyNotes(l).map(toName):[]}var get$5=note$1,name=l=>get$5(l).name,pitchClass=l=>get$5(l).pc,accidentals=l=>get$5(l).acc,octave=l=>get$5(l).oct,midi=l=>get$5(l).midi,freq=l=>get$5(l).freq,chroma=l=>get$5(l).chroma;function fromMidi(l){return midiToNoteName(l)}function fromFreq(l){return midiToNoteName(freqToMidi(l))}function fromFreqSharps(l){return midiToNoteName(freqToMidi(l),{sharps:!0})}function fromMidiSharps(l){return midiToNoteName(l,{sharps:!0})}var distance$1=distance$5,transpose$1=transpose$5,tr=transpose$5,transposeBy=l=>a=>transpose$1(a,l),trBy=transposeBy,transposeFrom=l=>a=>transpose$1(l,a),trFrom=transposeFrom;function transposeFifths$1(l,a){return transpose$1(l,[a,0])}var trFifths=transposeFifths$1;function transposeOctaves(l,a){return transpose$1(l,[0,a])}var ascending=(l,a)=>l.height-a.height,descending=(l,a)=>a.height-l.height;function sortedNames(l,a){return a=a||ascending,onlyNotes(l).sort(a).map(toName)}function sortedUniqNames(l){return sortedNames(l,ascending).filter((a,o,u)=>o===0||a!==u[o-1])}var simplify$1=l=>{const a=get$5(l);return a.empty?"":midiToNoteName(a.midi||a.chroma,{sharps:a.alt>0,pitchClass:a.midi===null})};function enharmonic(l,a){const o=get$5(l);if(o.empty)return"";const u=get$5(a||midiToNoteName(o.midi||o.chroma,{sharps:o.alt<0,pitchClass:!0}));if(u.empty||u.chroma!==o.chroma)return"";if(o.oct===void 0)return u.pc;const p=o.chroma-o.alt,d=u.chroma-u.alt,f=p>11||d<0?-1:p<0||d>11?1:0,g=o.oct+f;return u.pc+g}var note_default={names:names$4,get:get$5,name,pitchClass,accidentals,octave,midi,ascending,descending,distance:distance$1,sortedNames,sortedUniqNames,fromMidi,fromMidiSharps,freq,fromFreq,fromFreqSharps,chroma,transpose:transpose$1,tr,transposeBy,trBy,transposeFrom,trFrom,transposeFifths:transposeFifths$1,transposeOctaves,trFifths,simplify:simplify$1,enharmonic},NoRomanNumeral={empty:!0,name:"",chordType:""},cache={};function get$4(l){return typeof l=="string"?cache[l]||(cache[l]=parse$1(l)):typeof l=="number"?get$4(NAMES$1[l]||""):isPitch$1(l)?fromPitch(l):isNamedPitch$1(l)?get$4(l.name):NoRomanNumeral}var romanNumeral=get$4;function names$3(l=!0){return(l?NAMES$1:NAMES_MINOR).slice()}function fromPitch(l){return get$4(altToAcc$1(l.alt)+NAMES$1[l.step])}var REGEX$1=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function tokenize$2(l){return REGEX$1.exec(l)||["","","",""]}var ROMANS="I II III IV V VI VII",NAMES$1=ROMANS.split(" "),NAMES_MINOR=ROMANS.toLowerCase().split(" ");function parse$1(l){const[a,o,u,p]=tokenize$2(l);if(!u)return NoRomanNumeral;const d=u.toUpperCase(),f=NAMES$1.indexOf(d),g=accToAlt$1(o),b=1;return{empty:!1,name:a,roman:u,interval:interval$1({step:f,alt:g,dir:b}).name,acc:o,chordType:p,alt:g,step:f,major:u===d,oct:0,dir:b}}var roman_numeral_default={names:names$3,get:get$4,romanNumeral},Empty=Object.freeze([]),NoKey={type:"major",tonic:"",alteration:0,keySignature:""},NoKeyScale={tonic:"",grades:Empty,intervals:Empty,scale:Empty,triads:Empty,chords:Empty,chordsHarmonicFunction:Empty,chordScales:Empty,secondaryDominants:Empty,secondaryDominantSupertonics:Empty,substituteDominantsMinorRelative:Empty,substituteDominants:Empty,substituteDominantSupertonics:Empty,secondaryDominantsMinorRelative:Empty},NoMajorKey={...NoKey,...NoKeyScale,type:"major",minorRelative:"",scale:Empty,substituteDominants:Empty,secondaryDominantSupertonics:Empty,substituteDominantsMinorRelative:Empty},NoMinorKey={...NoKey,type:"minor",relativeMajor:"",natural:NoKeyScale,harmonic:NoKeyScale,melodic:NoKeyScale},mapScaleToType=(l,a,o="")=>a.map((u,p)=>`${l[p]}${o}${u}`);function keyScale(l,a,o,u,p){return d=>{const f=l.map(F=>get$4(F).interval||""),g=f.map(F=>transpose$1(d,F)),b=mapScaleToType(g,o),O=g.map(F=>transpose$1(F,"5P")).map(F=>g.includes(F)&&!b.includes(F+"7")?F+"7":""),S=supertonics(O,a),M=O.map(F=>{if(!F)return"";const $=F.slice(0,-1);return transpose$1($,"5d")+"7"}),A=supertonics(M,a);return{tonic:d,grades:l,intervals:f,scale:g,triads:mapScaleToType(g,a),chords:b,chordsHarmonicFunction:u.slice(),chordScales:mapScaleToType(g,p," "),secondaryDominants:O,secondaryDominantSupertonics:S,substituteDominants:M,substituteDominantSupertonics:A,secondaryDominantsMinorRelative:S,substituteDominantsMinorRelative:A}}}var supertonics=(l,a)=>l.map((o,u)=>{if(!o)return"";const p=o.slice(0,-1),d=transpose$1(p,"5P");return a[u].endsWith("m")?d+"m7":d+"m7b5"}),distInFifths=(l,a)=>{const o=note$1(l),u=note$1(a);return o.empty||u.empty?0:u.coord[0]-o.coord[0]},MajorScale=keyScale("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),NaturalScale=keyScale("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),HarmonicScale=keyScale("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),MelodicScale=keyScale("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function majorKey(l){const a=note$1(l).pc;if(!a)return NoMajorKey;const o=MajorScale(a),u=distInFifths("C",a);return{...o,type:"major",minorRelative:transpose$1(a,"-3m"),alteration:u,keySignature:altToAcc$1(u)}}function minorKey(l){const a=note$1(l).pc;if(!a)return NoMinorKey;const o=distInFifths("C",a)-3;return{type:"minor",tonic:a,relativeMajor:transpose$1(a,"3m"),alteration:o,keySignature:altToAcc$1(o),natural:NaturalScale(a),harmonic:HarmonicScale(a),melodic:MelodicScale(a)}}function majorTonicFromKeySignature(l){return typeof l=="number"?transposeFifths$1("C",l):typeof l=="string"&&/^b+|#+$/.test(l)?transposeFifths$1("C",accToAlt$1(l)):null}var key_default={majorKey,majorTonicFromKeySignature,minorKey},get$3=interval$1;function simplify(l){const a=interval$1(l);return a.empty?"":a.simple+a.q}function transposeFifths(l,a){const o=get$3(l);if(o.empty)return"";const[u,p,d]=o.coord;return coordToInterval$1([u+a,p,d]).name}var MODES=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],NoMode={...EmptyPcset,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},modes=MODES.map(toMode),index$4={};modes.forEach(l=>{index$4[l.name]=l,l.aliases.forEach(a=>{index$4[a]=l})});function get$2(l){return typeof l=="string"?index$4[l.toLowerCase()]||NoMode:l&&l.name?get$2(l.name):NoMode}var mode=get$2;function all(){return modes.slice()}var entries=all;function names$2(){return modes.map(l=>l.name)}function toMode(l){const[a,o,u,p,d,f,g]=l,b=g?[g]:[],O=Number(o).toString(2);return{empty:!1,intervals:get$9(p).intervals,modeNum:a,chroma:O,normalized:O,name:p,setNum:o,alt:u,triad:d,seventh:f,aliases:b}}function notes(l,a){return get$2(l).intervals.map(o=>transpose$5(a,o))}function chords(l){return(a,o)=>{const u=get$2(a);if(u.empty)return[];const p=rotate(u.modeNum,l),d=u.intervals.map(f=>transpose$5(o,f));return p.map((f,g)=>d[g]+f)}}var triads$1=chords(MODES.map(l=>l[4])),seventhChords=chords(MODES.map(l=>l[5]));function distance(l,a){const o=get$2(a),u=get$2(l);return o.empty||u.empty?"":simplify(transposeFifths("1P",u.alt-o.alt))}function relativeTonic(l,a,o){return transpose$5(o,distance(l,a))}var mode_default={get:get$2,names:names$2,all,distance,relativeTonic,notes,triads:triads$1,seventhChords,entries,mode};function tokenize$1(l){const[a,o,u,p]=tokenizeNote$1(l);return a===""?tokenizeBass("",l):a==="A"&&p==="ug"?tokenizeBass("","aug"):tokenizeBass(a+o,u+p)}function tokenizeBass(l,a){const o=a.split("/");if(o.length===1)return[l,o[0],""];const[u,p,d,f]=tokenizeNote$1(o[1]);return u!==""&&d===""&&f===""?[l,o[0],u+p]:[l,a,""]}function fromRomanNumerals(l,a){return a.map(get$4).map(u=>transpose$5(l,interval$1(u))+u.chordType)}function toRomanNumerals(l,a){return a.map(o=>{const[u,p]=tokenize$1(o),d=distance$5(l,u);return get$4(interval$1(d)).name+p})}var progression_default={fromRomanNumerals,toRomanNumerals};function numeric(l){const a=compact(l.map(o=>typeof o=="number"?o:toMidi(o)));return!l.length||a.length!==l.length?[]:a.reduce((o,u)=>{const p=o[o.length-1];return o.concat(range(p,u).slice(1))},[a[0]])}function chromatic(l,a){return numeric(l).map(o=>midiToNoteName(o,a))}var range_default={numeric,chromatic},NoScale={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize(l){if(typeof l!="string")return["",""];const a=l.indexOf(" "),o=note$1(l.substring(0,a));if(o.empty){const p=note$1(l);return p.empty?["",l]:[p.name,""]}const u=l.substring(o.name.length+1).toLowerCase();return[o.name,u.length?u:""]}var names$1=names$7;function get$1(l){const a=Array.isArray(l)?l:tokenize(l),o=note$1(a[0]).name,u=get$9(a[1]);if(u.empty)return NoScale;const p=u.name,d=o?u.intervals.map(g=>transpose$5(o,g)):[],f=o?o+" "+p:p;return{...u,name:f,type:p,tonic:o,notes:d}}var scale$1=get$1;function detect(l,a={}){const o=chroma$3(l),u=note$1(a.tonic??l[0]??""),p=u.chroma;if(p===void 0)return[];const d=o.split("");d[p]="1";const f=rotate(p,d).join(""),g=all$1().find(O=>O.chroma===f),b=[];return g&&b.push(u.name+" "+g.name),a.match==="exact"||extended(f).forEach(O=>{b.push(u.name+" "+O)}),b}function scaleChords(l){const a=get$1(l),o=isSubsetOf(a.chroma);return all$3().filter(u=>o(u.chroma)).map(u=>u.aliases[0])}function extended(l){const a=isChroma(l)?l:get$1(l).chroma,o=isSupersetOf(a);return all$1().filter(u=>o(u.chroma)).map(u=>u.name)}function reduced(l){const a=isSubsetOf(get$1(l).chroma);return all$1().filter(o=>a(o.chroma)).map(o=>o.name)}function scaleNotes(l){const a=l.map(p=>note$1(p).pc).filter(p=>p),o=a[0],u=sortedUniqNames(a);return rotate(u.indexOf(o),u)}function modeNames(l){const a=get$1(l);if(a.empty)return[];const o=a.tonic?a.notes:a.intervals;return modes$1(a.chroma).map((u,p)=>{const d=get$1(u).name;return d?[o[p],d]:["",""]}).filter(u=>u[0])}function getNoteNameOf(l){const a=Array.isArray(l)?scaleNotes(l):get$1(l).notes,o=a.map(u=>note$1(u).chroma);return u=>{const p=note$1(typeof u=="number"?fromMidi(u):u),d=p.height;if(d===void 0)return;const f=d%12,g=o.indexOf(f);if(g!==-1)return enharmonic(p.name,a[g])}}function rangeOf(l){const a=getNoteNameOf(l);return(o,u)=>{const p=note$1(o).height,d=note$1(u).height;return p===void 0||d===void 0?[]:range(p,d).map(a).filter(f=>f)}}function degrees(l){const{intervals:a,tonic:o}=get$1(l),u=tonicIntervalsTransposer$1(a,o);return p=>p?u(p>0?p-1:p):""}function steps(l){const{intervals:a,tonic:o}=get$1(l);return tonicIntervalsTransposer$1(a,o)}var scale_default={degrees,detect,extended,get:get$1,modeNames,names:names$1,rangeOf,reduced,scaleChords,scaleNotes,steps,tokenize,scale:scale$1},NONE={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},NAMES=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function names(){return NAMES.slice()}var REGEX=/^(\d*\d(?:\+\d)*)\/(\d+)$/,CACHE=new Map;function get(l){const a=JSON.stringify(l),o=CACHE.get(a);if(o)return o;const u=build(parse(l));return CACHE.set(a,u),u}function parse(l){if(typeof l=="string"){const[d,f,g]=REGEX.exec(l)||[];return parse([f,g])}const[a,o]=l,u=+o;if(typeof a=="number")return[a,u];const p=a.split("+").map(d=>+d);return p.length===1?[p[0],u]:[p,u]}var time_signature_default={names,parse,get},isPowerOfTwo=l=>Math.log(l)/Math.log(2)%1===0;function build([l,a]){const o=Array.isArray(l)?l.reduce((g,b)=>g+b,0):l,u=a;if(o===0||u===0)return NONE;const p=Array.isArray(l)?`${l.join("+")}/${a}`:`${l}/${a}`,d=Array.isArray(l)?l:[],f=u===4||u===2?"simple":u===8&&o%3===0?"compound":isPowerOfTwo(u)?"irregular":"irrational";return{empty:!1,name:p,type:f,upper:o,lower:u,additive:d}}var Tonal=Core,PcSet=pcset_default,ChordDictionary=chord_type_default,ScaleDictionary=scale_type_default;const dist$1=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:abc_notation_default,Array:index$8,Chord:chord_default,ChordDictionary,ChordType:chord_type_default,Collection:collection_default,Core,DurationValue:duration_value_default,Interval:interval_default,Key:key_default,Midi:midi_default,Mode:mode_default,Note:note_default,PcSet,Pcset:pcset_default,Progression:progression_default,Range:range_default,RomanNumeral:roman_numeral_default,Scale:scale_default,ScaleDictionary,ScaleType:scale_type_default,TimeSignature:time_signature_default,Tonal,accToAlt,altToAcc,chroma:chroma$2,coordToInterval,coordToNote,coordinates,deprecate,distance:distance$3,fillStr,height,interval,isNamed,isNamedPitch,isPitch,midi:midi$1,note,pitch,stepToLetter,tokenizeInterval,tokenizeNote,tonicIntervalsTransposer,transpose:transpose$3},Symbol.toStringTag,{value:"Module"})),flats=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],pcs=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],sharps=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],accs={b:-1,"#":1},pc2chroma=l=>{const[a,...o]=l.split("");return pcs.indexOf(a.toLowerCase())+o.reduce((u,p)=>u+accs[p],0)};function tokenizeChord$1(l){const a=(l||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return a?a.slice(1):[]}const midi2chroma=l=>l%12,step2semitones=l=>{let a=Number(l);return isNaN(a)?interval_default.semitones(l):a},x2midi=(l,a)=>{if(typeof l=="number")return l;if(typeof l=="string")return noteToMidi$1(l,a)},midi2note=(l,a=!1)=>{const o=Math.floor(l/12)-1;return(a?sharps:flats)[l%12]+o};function scaleStep$1(l,a,o=1){l=l.map(p=>typeof p=="string"?noteToMidi$1(p):p);const u=Math.floor(a/l.length)*o*12;return a=_mod$2(a,l.length),l[a]+u}function nearestNumberIndex(l,a,o){let u=0,p=1/0;return a.forEach((d,f)=>{const g=Math.abs(d-l);(!o&&g<p||o&&g<=p)&&(u=f,p=g)}),u}let scaleSteps={};function stepInNamedScale(l,a,o,u){const[p,d]=scale_default.tokenize(a),f=x2midi(p),g=midi2chroma(f);if(!scaleSteps[d]){const{intervals:A}=scale_default.get(`C ${d}`);scaleSteps[d]=A.map(step2semitones)}const b=scaleSteps[d];if(!b)return null;let O=f;if(o){o=x2midi(o,3);const A=midi2chroma(o),F=_mod$2(A-g,12),$=nearestNumberIndex(F,b,u);l=l+$,O=o-F}const S=Math.floor(l/b.length)*12;return l=_mod$2(l,b.length),b[l]+O+S}let modeTarget={below:l=>l.slice(-1)[0],duck:l=>l.slice(-1)[0],above:l=>l[0],root:l=>l[0]};function renderVoicing({chord:l,dictionary:a,offset:o=0,n:u,mode:p="below",anchor:d="c5",octaves:f=1}){const[g,b]=tokenizeChord$1(l),O=pc2chroma(g);d=x2midi(d?.note||d,4);const S=midi2chroma(d),M=a[b].map(le=>(typeof le=="string"?le.split(" "):le).map(step2semitones));let A,F,$=M.map((le,fe)=>{const _e=modeTarget[p](le),Pe=_mod$2(S-_e-O,12);return(A===void 0||Pe<A)&&(A=Pe,F=fe),Pe});p==="root"&&(F=0);const B=Math.ceil(o/M.length)*12,I=_mod$2(F+o,M.length),U=M[I],te=modeTarget[p](U),de=d-$[I]+B,se=U.map(le=>de-te+le);let q=se.map(le=>midi2note(le));return p==="duck"&&(q=q.filter((le,fe)=>se[fe]!==d)),u!==void 0?[scaleStep$1(q,u,f)]:q}const octavesInterval=l=>(l<=0?-1:1)+l*7+"P";function getScale(l){l=l.replaceAll(":"," ");const a=scale_default.get(l),{tonic:o,empty:u}=a;if(u&&isNote(l)||u&&!o)throw new Error(`Scale name ${l} is incomplete. Make sure to use ":" instead of spaces, example: .scale("C:major")`);if(u)throw new Error(`Invalid scale name "${l}"`);return a}function scaleStep(l,a){l=Math.ceil(l);let{intervals:o,tonic:u}=getScale(a);u=u||"C";const{pc:p,oct:d=3}=note_default.get(u),f=Math.floor(l/o.length),g=_mod$2(l,o.length),b=interval_default.add(o[g],octavesInterval(f));return note_default.transpose(p+d,b)}function scaleOffset(l,a,o){let{notes:u}=getScale(l);if(u=u.map(M=>note_default.get(M).pc),a=Number(a),isNaN(a))throw new Error(`scale offset "${a}" not a number`);const{pc:p,oct:d=3}=note_default.get(o),f=u.indexOf(p);if(f===-1)throw new Error(`note "${o}" is not in scale "${l}"`);let g=f,b=d,O=p;const S=Math.sign(a);for(;Math.abs(g-f)<Math.abs(a);){g+=S;const M=_mod$2(g,u.length);S<0&&O[0]==="C"&&(b+=S),O=u[M],S>0&&O[0]==="C"&&(b+=S)}return O+b}const{transpose,trans}=register(["transpose","trans"],function(a,o){return o.withHap(u=>{const p=u.value.note??u.value;if(typeof p=="number"){let g;typeof a=="number"?g=a:typeof a=="string"&&(g=interval_default.semitones(a)||0);const b=p+g;return typeof u.value=="object"?u.withValue(()=>({...u.value,note:b})):u.withValue(()=>b)}if(typeof p!="string"||!isNote(p))return logger$2(`[tonal] transpose: not a note "${p}"`,"warning"),u;const d=isNaN(Number(a))?String(a):interval_default.fromSemitones(a),f=note_default.transpose(p,d);return typeof u.value=="object"?u.withValue(()=>({...u.value,note:f})):u.withValue(()=>f)})}),{scaleTranspose,scaleTrans,strans}=register(["scaleTranspose","scaleTrans","strans"],function(l,a){return a.withHap(o=>{if(!o.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof o.value=="object")return o.withValue(()=>({...o.value,note:scaleOffset(o.context.scale,Number(l),o.value.note)}));if(typeof o.value!="string")throw new Error("can only use scaleTranspose with notes");return o.withValue(()=>scaleOffset(o.context.scale,Number(l),o.value))})});function _convertStepToNumberAndOffset(l){let a=Number(l),o=0;if(isNaN(a)){l=String(l);const u=/^(-?\d+)(#+|b+)?$/.exec(l);if(!u)throw new Error(`invalid scale step "${l}", expected number or integer with optional # b suffixes`);a=Number(u[1]);const p=u[2]||"";o=p[0]==="#"?p.length:-p.length}return[a,o]}let scaleToMidisAndNotes={};function _getNearestScaleNote(l,a,o=!0){let u=typeof a=="string"?noteToMidi$1(a):a;if(scaleToMidisAndNotes[l]===void 0){const{intervals:M,tonic:A}=getScale(l),{pc:F}=note_default.get(A),B=M.concat("8P").map(U=>note_default.transpose(F+"0",U)),I=B.map(noteToMidi$1);scaleToMidisAndNotes[l]=[I,B]}const[p,d]=scaleToMidisAndNotes[l],f=p[0],g=Math.floor((u-f)/12),b=p.map(M=>M+12*g),O=nearestNumberIndex(u,b,o),S=d[O];return note_default.transpose(S,interval_default.fromSemitones(12*g))}const scale=register("scale",function(l,a){return Array.isArray(l)&&(l=l.flat().join(" ")),a.fmap(o=>{const u=typeof o=="object";if(!u||u&&("n"in o||"value"in o)){const p=u?o.n??o.value:o;if(delete o.n,isNote(p))return pure(p);try{const[d,f]=_convertStepToNumberAndOffset(p);let g;u&&o.anchor?g=stepInNamedScale(d,l,o.anchor):g=scaleStep(d,l),f!=0&&(g=note_default.transpose(g,interval_default.fromSemitones(f))),o=pure(u?{...o,note:g}:g)}catch(d){return logger$2(`[tonal] ${d.message}`,"error"),silence}return o}else{const p=_getNearestScaleNote(l,o.note);return pure(u?{...o,note:p}:p)}}).outerJoin().withHap(o=>o.setContext({...o.context,scale:l}))},!0,!0);var dist={},dictionaryVoicing$1={},getBestVoicing={},hasRequiredGetBestVoicing;function requireGetBestVoicing(){if(hasRequiredGetBestVoicing)return getBestVoicing;hasRequiredGetBestVoicing=1,getBestVoicing.__esModule=!0,getBestVoicing.getBestVoicing=void 0;function l(a){var o=a.chord,u=a.range,p=a.finder,d=a.picker,f=a.lastVoicing,g=p(o,u);return g.length?d(g,f):[]}return getBestVoicing.getBestVoicing=l,getBestVoicing}var voicingsInRange={};const require$$0=getAugmentedNamespace(dist$1);var tokenizeChord={},hasRequiredTokenizeChord;function requireTokenizeChord(){if(hasRequiredTokenizeChord)return tokenizeChord;hasRequiredTokenizeChord=1,tokenizeChord.__esModule=!0,tokenizeChord.tokenizeChord=void 0;function l(a){var o=(a||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return o?o.slice(1):[]}return tokenizeChord.tokenizeChord=l,tokenizeChord}var hasRequiredVoicingsInRange;function requireVoicingsInRange(){if(hasRequiredVoicingsInRange)return voicingsInRange;hasRequiredVoicingsInRange=1,voicingsInRange.__esModule=!0,voicingsInRange.voicingsInRange=void 0;var l=require$$0,a=requireDictionaryVoicing(),o=requireTokenizeChord();function u(p,d,f){d===void 0&&(d=a.lefthand),f===void 0&&(f=["D3","A4"]);var g=(0,o.tokenizeChord)(p),b=g[0],O=g[1];if(!d[O])return[];var S=d[O].map(function(A){return A.split(" ")}),M=l.Range.chromatic(f);return S.reduce(function(A,F){var $=F.map(function(te){return l.Interval.substract(te,F[0])}),B=l.Note.transpose(b,F[0]),I=M.filter(function(te){return l.Note.chroma(te)===l.Note.chroma(B)}).filter(function(te){return l.Note.midi(l.Note.transpose(te,$[$.length-1]))<=l.Note.midi(f[1])}).map(function(te){return l.Note.enharmonic(te,B)}),U=I.map(function(te){return $.map(function(de){return l.Note.transpose(te,de)})});return A.concat(U)},[])}return voicingsInRange.voicingsInRange=u,voicingsInRange}var hasRequiredDictionaryVoicing;function requireDictionaryVoicing(){return hasRequiredDictionaryVoicing||(hasRequiredDictionaryVoicing=1,function(l){var a=dictionaryVoicing$1.__assign||function(){return a=Object.assign||function(g){for(var b,O=1,S=arguments.length;O<S;O++){b=arguments[O];for(var M in b)Object.prototype.hasOwnProperty.call(b,M)&&(g[M]=b[M])}return g},a.apply(this,arguments)},o=dictionaryVoicing$1.__rest||function(g,b){var O={};for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&b.indexOf(S)<0&&(O[S]=g[S]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,S=Object.getOwnPropertySymbols(g);M<S.length;M++)b.indexOf(S[M])<0&&Object.prototype.propertyIsEnumerable.call(g,S[M])&&(O[S[M]]=g[S[M]]);return O};l.__esModule=!0,l.dictionaryVoicing=l.dictionaryVoicingFinder=l.triads=l.guidetones=l.lefthand=void 0;var u=requireGetBestVoicing(),p=requireVoicingsInRange();l.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},l.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},l.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var d=function(g){return function(b,O){return(0,p.voicingsInRange)(b,g,O)}};l.dictionaryVoicingFinder=d;var f=function(g){var b=g.dictionary,O=g.range,S=o(g,["dictionary","range"]);return(0,u.getBestVoicing)(a(a({},S),{range:O,finder:(0,l.dictionaryVoicingFinder)(b)}))};l.dictionaryVoicing=f}(dictionaryVoicing$1)),dictionaryVoicing$1}var minTopNoteDiff$1={},hasRequiredMinTopNoteDiff;function requireMinTopNoteDiff(){if(hasRequiredMinTopNoteDiff)return minTopNoteDiff$1;hasRequiredMinTopNoteDiff=1,minTopNoteDiff$1.__esModule=!0,minTopNoteDiff$1.minTopNoteDiff=void 0;var l=require$$0;function a(o,u){if(!u)return o[0];var p=function(d){return Math.abs(l.Note.midi(u[u.length-1])-l.Note.midi(d[d.length-1]))};return o.reduce(function(d,f){return p(f)<p(d)?f:d},o[0])}return minTopNoteDiff$1.minTopNoteDiff=a,minTopNoteDiff$1}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(l){l.__esModule=!0;var a=requireDictionaryVoicing(),o=requireMinTopNoteDiff(),u=requireGetBestVoicing(),p=requireTokenizeChord();l.default={tokenizeChord:p.tokenizeChord,getBestVoicing:u.getBestVoicing,dictionaryVoicing:a.dictionaryVoicing,dictionaryVoicingFinder:a.dictionaryVoicingFinder,lefthand:a.lefthand,guidetones:a.guidetones,triads:a.triads,minTopNoteDiff:o.minTopNoteDiff}}(dist)),dist}var distExports=requireDist();const _voicings=getDefaultExportFromCjs(distExports),simple={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},complex={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing,minTopNoteDiff}=_voicings.default||_voicings,lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},triads={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},defaultDictionary={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},voicingRegistry={lefthand:{dictionary:lefthand,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:triads,mode:"below",anchor:"a4"},guidetones:{dictionary:guidetones,mode:"above",anchor:"a4"},legacy:{dictionary:defaultDictionary,mode:"below",anchor:"a4"}};let defaultDict="ireal";const setDefaultVoicings=l=>defaultDict=l,setVoicingRange=(l,a)=>addVoicings(l,voicingRegistry[l].dictionary,a),addVoicings=(l,a,o=["F3","A4"])=>{Object.assign(voicingRegistry,{[l]:{dictionary:a,range:o}})},registerVoicings=(l,a,o={})=>{Object.assign(voicingRegistry,{[l]:{dictionary:a,...o}})},getVoicing=(l,a,o)=>{const{dictionary:u,range:p}=voicingRegistry[a];return dictionaryVoicing({chord:l,dictionary:u,range:p,picker:minTopNoteDiff,lastVoicing:o})};let lastVoicing;const voicings=register("voicings",function(l,a){return a.fmap(o=>(lastVoicing=getVoicing(o,l,lastVoicing),stack(...lastVoicing))).outerJoin()}),rootNotes=register("rootNotes",function(l,a){return a.fmap(o=>{const d=(o.chord||o).match(/^([a-gA-G][b#]?).*$/)[1]+l;return o.chord?{note:d}:d})}),voicing=register("voicing",function(l){return l.fmap(a=>{a=typeof a=="string"?{chord:a}:a;let{dictionary:o=defaultDict,chord:u,anchor:p,offset:d,mode:f,n:g,octaves:b,...O}=a;o=typeof o=="string"?voicingRegistry[o]:{dictionary:o,mode:"below",anchor:"c5"};try{let S=renderVoicing({...o,chord:u,anchor:p,offset:d,mode:f,n:g,octaves:b});return stack(...S).note().set(O)}catch{return logger$2(`[voicing]: unknown chord "${u}"`),silence}}).outerJoin()});function voicingAlias(l,a,o){o=Array.isArray(o)?o:[o],o.forEach(u=>{u[a]=u[l]})}voicingAlias("^","",[simple,complex]),Object.keys(simple).forEach(l=>{if(l.includes("-")){let a=l.replace("-","m");voicingAlias(l,a,[complex,simple])}if(l.includes("^")){let a=l.replace("^","M");voicingAlias(l,a,[complex,simple])}if(l.includes("+")){let a=l.replace("+","aug");voicingAlias(l,a,[complex,simple])}}),registerVoicings("ireal",simple),registerVoicings("ireal-ext",complex);function resetVoicings(){lastVoicing=void 0,setDefaultVoicings("ireal")}const packageName="@strudel/tonal",index$3=Object.freeze(Object.defineProperty({__proto__:null,addVoicings,complex,packageName,registerVoicings,resetVoicings,rootNotes,scale,scaleTrans,scaleTranspose,setDefaultVoicings,setVoicingRange,simple,strans,trans,transpose,voicing,voicingAlias,voicingRegistry,voicings},Symbol.toStringTag,{value:"Module"})),escapeHtml=l=>{const a=document.createElement("div");return a.innerText=l,a.innerHTML},stripHtml=l=>{const a=document.createElement("div");return a.innerHTML=l,a.textContent||a.innerText||""},getDocLabel$1=l=>l.name||l.longname,buildParamsList=l=>l?.length?`
    <div class="autocomplete-info-params-section">
      <h4 class="autocomplete-info-section-title">Parameters</h4>
      <ul class="autocomplete-info-params-list">
        ${l.map(({name:a,type:o,description:u})=>`
          <li class="autocomplete-info-param-item">
            <span class="autocomplete-info-param-name">${a}</span>
            <span class="autocomplete-info-param-type">${o.names?.join(" | ")}</span>
            ${u?`<div class="autocomplete-info-param-desc">${stripHtml(u)}</div>`:""}
          </li>
        `).join("")}
      </ul>
    </div>
  `:"",buildExamples=l=>l?.length?`
    <div class="autocomplete-info-examples-section">
      <h4 class="autocomplete-info-section-title">Examples</h4>
      ${l.map(a=>`
        <pre class="autocomplete-info-example-code">${escapeHtml(a)}</pre>
      `).join("")}
    </div>
  `:"",Autocomplete=l=>h`
  <div class="autocomplete-info-container">
    <div class="autocomplete-info-tooltip">
      <h3 class="autocomplete-info-function-name">${getDocLabel$1(l)}</h3>
      ${l.synonyms_text?`<div class="autocomplete-info-function-synonyms">Synonyms: ${l.synonyms_text}</div>`:""}
      ${l.description?`<div class="autocomplete-info-function-description">${l.description}</div>`:""}
      ${buildParamsList(l.params)}
      ${buildExamples(l.examples)}
    </div>
  </div>
`[0],isValidDoc=l=>{const a=getDocLabel$1(l);return a&&!a.startsWith("_")&&!["package"].includes(l.kind)},hasExcludedTags=l=>["superdirtOnly","noAutocomplete"].some(a=>l.tags?.find(o=>o.originalTitle===a));function bankCompletions(){const l=soundMap$1.get(),a=new Set;for(const o of Object.keys(l)){const[u,p]=o.split("_");p&&u&&a.add(u)}return Array.from(a).sort().map(o=>({label:o,type:"bank"}))}let scaleCompletions=[];try{scaleCompletions=(scale_default.names?scale_default.names():[]).map(l=>({label:l,type:"scale"}))}catch(l){console.warn("[autocomplete] Could not load scale names from Tonal:",l)}const modeCompletions=[{label:"below",type:"mode"},{label:"above",type:"mode"},{label:"duck",type:"mode"},{label:"root",type:"mode"}],chordSymbols=["",...Object.keys(complex)].sort(),chordSymbolCompletions=chordSymbols.map(l=>l===""?{label:"major",apply:"",type:"chord-symbol"}:{label:l,apply:l,type:"chord-symbol"}),getSynonymDoc=(l,a)=>{const o=l.synonyms||[],p=[getDocLabel$1(l),...o].filter(d=>d&&d!==a);return{...l,name:a,longname:a,synonyms:p,synonyms_text:p.join(", ")}},jsdocCompletions=(()=>{const l=new Set,a=[];for(const o of jsdoc.docs){if(!isValidDoc(o)||hasExcludedTags(o))continue;const u=getDocLabel$1(o),p=o.synonyms||[];let d=[u,...p];for(const f of d)f&&!l.has(f)&&(l.add(f),a.push({label:f,info:()=>Autocomplete(getSynonymDoc(o,f)),type:"function"}))}return a})(),pitchNames=["C","C#","Db","D","D#","Eb","E","E#","Fb","F","F#","Gb","G","G#","Ab","A","A#","Bb","B","B#","Cb"],SCALE_NO_QUOTES_REGEX=/scale\(\s*$/,SCALE_AFTER_COLON_REGEX=/scale\(\s*['"][^'"]*:[^'"]*$/,SCALE_PRE_COLON_REGEX=/scale\(\s*['"][^'"]*$/,SCALE_PITCH_MATCH_REGEX=/([A-Ga-g][#b]*)?$/,SCALE_SPACES_TO_COLON_REGEX=/\s+/g;function scaleHandler(l){let a=l.matchBefore(SCALE_NO_QUOTES_REGEX);if(a)return{from:a.to,options:[]};let o=l.matchBefore(SCALE_AFTER_COLON_REGEX);if(o){const p=o.text,d=p.lastIndexOf(":");if(d!==-1){const f=p.slice(d+1),b=scaleCompletions.filter(S=>S.label.startsWith(f)).map(S=>({...S,apply:S.label.replace(SCALE_SPACES_TO_COLON_REGEX,":")}));return{from:o.from+d+1,options:b}}}let u=l.matchBefore(SCALE_PRE_COLON_REGEX);if(u&&!u.text.includes(":"))if(l.explicit){const d=u.text.match(SCALE_PITCH_MATCH_REGEX),f=d?d[0]:"",g=pitchNames.filter(S=>S.toLowerCase().startsWith(f.toLowerCase())),b=u.to-f.length,O=g.map(S=>({label:S,type:"pitch"}));return{from:b,options:O}}else return{from:u.to,options:[]};return null}const SOUND_NO_QUOTES_REGEX=/(s|sound)\(\s*$/,SOUND_WITH_QUOTES_REGEX=/(s|sound)\(\s*['"][^'"]*$/,SOUND_FRAGMENT_MATCH_REGEX=/(?:[\s[{(<])([\w]*)$/;function soundHandler(l){let a=l.matchBefore(SOUND_NO_QUOTES_REGEX);if(a)return{from:a.to,options:[]};let o=l.matchBefore(SOUND_WITH_QUOTES_REGEX);if(!o)return null;const u=o.text,p=Math.max(u.lastIndexOf('"'),u.lastIndexOf("'"));if(p===-1)return null;const d=u.slice(p+1),f=d.match(SOUND_FRAGMENT_MATCH_REGEX),g=f?f[1]:d;let S=Object.keys(soundMap$1.get()).sort().filter(A=>A.includes(g)).map(A=>({label:A,type:"sound"}));return{from:o.to-g.length,options:S}}const BANK_NO_QUOTES_REGEX=/bank\(\s*$/,BANK_WITH_QUOTES_REGEX=/bank\(\s*['"][^'"]*$/;function bankHandler(l){let a=l.matchBefore(BANK_NO_QUOTES_REGEX);if(a)return{from:a.to,options:[]};let o=l.matchBefore(BANK_WITH_QUOTES_REGEX);if(!o)return null;const u=o.text,p=Math.max(u.lastIndexOf('"'),u.lastIndexOf("'"));if(p===-1)return null;const f=u.slice(p+1),b=bankCompletions().filter(S=>S.label.startsWith(f));return{from:o.to-f.length,options:b}}const MODE_NO_QUOTES_REGEX=/mode\(\s*$/,MODE_AFTER_COLON_REGEX=/mode\(\s*['"][^'"]*:[^'"]*$/,MODE_PRE_COLON_REGEX=/mode\(\s*['"][^'"]*$/,MODE_FRAGMENT_MATCH_REGEX=/(?:[\s[{(<])([\w:]*)$/;function modeHandler(l){let a=l.matchBefore(MODE_NO_QUOTES_REGEX);if(a)return{from:a.to,options:[]};let o=l.matchBefore(MODE_AFTER_COLON_REGEX);if(o){const M=o.text,A=M.lastIndexOf(":");if(A!==-1){const F=M.slice(A+1),B=pitchNames.filter(U=>U.toLowerCase().startsWith(F.toLowerCase())).map(U=>({label:U,type:"pitch"}));return{from:o.from+A+1,options:B}}}let u=l.matchBefore(MODE_PRE_COLON_REGEX);if(!u)return null;const p=u.text,d=Math.max(p.lastIndexOf('"'),p.lastIndexOf("'"));if(d===-1)return null;const f=p.slice(d+1),g=f.match(MODE_FRAGMENT_MATCH_REGEX),b=g?g[1]:f,O=modeCompletions.filter(M=>M.label.startsWith(b));return{from:u.to-b.length,options:O}}const CHORD_NO_QUOTES_REGEX=/chord\(\s*$/,CHORD_WITH_QUOTES_REGEX=/chord\(\s*['"][^'"]*$/,CHORD_FRAGMENT_MATCH_REGEX=/(?:[\s[{(<])([\w#b+^:-]*)$/;function chordHandler(l){let a=l.matchBefore(CHORD_NO_QUOTES_REGEX);if(a)return{from:a.to,options:[]};let o=l.matchBefore(CHORD_WITH_QUOTES_REGEX);if(!o)return null;const u=o.text,p=Math.max(u.lastIndexOf('"'),u.lastIndexOf("'"));if(p===-1)return null;const d=u.slice(p+1),f=d.match(CHORD_FRAGMENT_MATCH_REGEX),g=f?f[1]:d;let b=null,O=g;for(const S of pitchNames)if(g.toLowerCase().startsWith(S.toLowerCase())){b=S,O=g.slice(S.length);break}if(b){const M=chordSymbolCompletions.filter(F=>F.label.toLowerCase().startsWith(O.toLowerCase()));return{from:o.to-O.length,options:M}}else{const M=pitchNames.filter(F=>F.toLowerCase().startsWith(g.toLowerCase())).map(F=>({label:F,type:"pitch"}));return{from:o.to-g.length,options:M}}}const FALLBACK_WORD_REGEX=/\w*/;function fallbackHandler(l){const a=l.matchBefore(FALLBACK_WORD_REGEX);return a&&a.from===a.to&&!l.explicit?null:a?{from:a.from,options:jsdocCompletions}:null}const handlers=[soundHandler,bankHandler,chordHandler,scaleHandler,modeHandler,fallbackHandler],strudelAutocomplete=l=>{for(const a of handlers){const o=a(l);if(o)return o}return null},isAutoCompletionEnabled=l=>l?[autocompletion({override:[strudelAutocomplete],closeOnBlur:!1})]:[],getDocLabel=l=>l.name||l.longname;let ctrlDown=!1;typeof window<"u"&&(window.addEventListener("keyup",function(l){l.key=="Control"&&(ctrlDown=!1)},!0),window.addEventListener("keydown",function(l){l.key=="Control"&&(ctrlDown=!0)},!0));const strudelTooltip=hoverTooltip((l,a,o)=>{if(!ctrlDown)return null;let{from:u,to:p,text:d}=l.state.doc.lineAt(a),f=a,g=a;for(;f>u&&/\w/.test(d[f-u-1]);)f--;for(;g<p&&/\w/.test(d[g-u]);)g++;if(f==a&&o<0||g==a&&o>0)return null;let b=d.slice(f-u,g-u),O=jsdoc.docs.filter(S=>getDocLabel(S)===b)[0];if(!O){const S=jsdoc.docs.filter(M=>M.synonyms&&M.synonyms.includes(b))[0];if(!S)return null;O=getSynonymDoc(S,b)}return{pos:f,end:g,above:!1,arrow:!0,create(S){let M=document.createElement("div");M.className="strudel-tooltip";const A=Autocomplete(O);return M.appendChild(A),{dom:M}}}},{hoverTime:10}),isTooltipEnabled=l=>l?strudelTooltip:[],setFlash=StateEffect.define(),flashField=StateField.define({create(){return Decoration.none},update(l,a){try{for(let o of a.effects)if(o.is(setFlash))if(o.value&&a.newDoc.length>0){const u=Decoration.mark({attributes:{style:"background-color: rgba(255,255,255, .4); filter: invert(10%)"}});l=Decoration.set([u.range(0,a.newDoc.length)])}else l=Decoration.set([]);return l}catch(o){return console.warn("flash error",o),l}},provide:l=>EditorView.decorations.from(l)}),flash=(l,a=200)=>{l.dispatch({effects:setFlash.of(!0)}),setTimeout(()=>{l.dispatch({effects:setFlash.of(!1)})},a)},isFlashEnabled=l=>l?flashField:[],setMiniLocations=StateEffect.define(),showMiniLocations=StateEffect.define(),updateMiniLocations=(l,a)=>{l.dispatch({effects:setMiniLocations.of(a)})},highlightMiniLocations=(l,a,o)=>{l.dispatch({effects:showMiniLocations.of({atTime:a,haps:o})})},miniLocations=StateField.define({create(){return Decoration.none},update(l,a){a.docChanged&&(l=l.map(a.changes));for(let o of a.effects)if(o.is(setMiniLocations)){const u=o.value.filter(([p])=>p<a.newDoc.length).map(([p,d])=>[p,Math.min(d,a.newDoc.length)]).map(p=>Decoration.mark({id:p.join(":"),attributes:{style:"background-color: #00CA2880"}}).range(...p));l=Decoration.set(u,!0)}return l}}),visibleMiniLocations=StateField.define({create(){return{atTime:0,haps:new Map}},update(l,a){for(let o of a.effects)if(o.is(showMiniLocations)){const u=new Map;for(let p of o.value.haps)if(!(!p.context?.locations||!p.whole))for(let{start:d,end:f}of p.context.locations){let g=`${d}:${f}`;(!u.has(g)||u.get(g).whole.begin.lt(p.whole.begin))&&u.set(g,p)}l={atTime:o.value.atTime,haps:u}}return l}}),miniLocationHighlights=EditorView.decorations.compute([miniLocations,visibleMiniLocations],l=>{const a=l.field(miniLocations).iter(),{haps:o}=l.field(visibleMiniLocations),u=new RangeSetBuilder;for(;a.value;){const{from:p,to:d,value:{spec:{id:f}}}=a;if(o.has(f)){const g=o.get(f),b=g.value?.color??"var(--foreground)",O=g.value?.markcss||`outline: solid 2px ${b}`;u.add(p,d,Decoration.mark({attributes:{style:O}}))}a.next()}return u.finish()}),highlightExtension=[miniLocations,visibleMiniLocations,miniLocationHighlights],isPatternHighlightingEnabled=(l,a)=>(l&&a&&setTimeout(()=>{updateMiniLocations(a.editor,a.miniLocations)},100),l?Prec.highest(highlightExtension):[]);function crelt(){var l=arguments[0];typeof l=="string"&&(l=document.createElement(l));var a=1,o=arguments[1];if(o&&typeof o=="object"&&o.nodeType==null&&!Array.isArray(o)){for(var u in o)if(Object.prototype.hasOwnProperty.call(o,u)){var p=o[u];typeof p=="string"?l.setAttribute(u,p):p!=null&&(l[u]=p)}a++}for(;a<arguments.length;a++)add(l,arguments[a]);return l}function add(l,a){if(typeof a=="string")l.appendChild(document.createTextNode(a));else if(a!=null)if(a.nodeType!=null)l.appendChild(a);else if(Array.isArray(a))for(var o=0;o<a.length;o++)add(l,a[o]);else throw new RangeError("Unsupported child node: "+a)}const basicNormalize=typeof String.prototype.normalize=="function"?l=>l.normalize("NFKD"):l=>l;class SearchCursor{constructor(a,o,u=0,p=a.length,d,f){this.test=f,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=a.iterRange(u,p),this.bufferStart=u,this.normalize=d?g=>d(basicNormalize(g)):basicNormalize,this.query=this.normalize(o)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let a=this.peek();if(a<0)return this.done=!0,this;let o=fromCodePoint(a),u=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(a);let p=this.normalize(o);if(p.length)for(let d=0,f=u;;d++){let g=p.charCodeAt(d),b=this.match(g,f,this.bufferPos+this.bufferStart);if(d==p.length-1){if(b)return this.value=b,this;break}f==u&&d<o.length&&o.charCodeAt(d)==g&&f++}}}match(a,o,u){let p=null;for(let d=0;d<this.matches.length;d+=2){let f=this.matches[d],g=!1;this.query.charCodeAt(f)==a&&(f==this.query.length-1?p={from:this.matches[d+1],to:u}:(this.matches[d]++,g=!0)),g||(this.matches.splice(d,2),d-=2)}return this.query.charCodeAt(0)==a&&(this.query.length==1?p={from:o,to:u}:this.matches.push(1,o)),p&&this.test&&!this.test(p.from,p.to,this.buffer,this.bufferStart)&&(p=null),p}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(a,o,u,p=0,d=a.length){if(this.text=a,this.to=d,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(o))return new MultilineRegExpCursor(a,o,u,p,d);this.re=new RegExp(o,baseFlags+(u?.ignoreCase?"i":"")),this.test=u?.test,this.iter=a.iter();let f=a.lineAt(p);this.curLineStart=f.from,this.matchPos=toCharEnd(a,p),this.getLine(this.curLineStart)}getLine(a){this.iter.next(a),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let a=this.matchPos-this.curLineStart;;){this.re.lastIndex=a;let o=this.matchPos<=this.to&&this.re.exec(this.curLine);if(o){let u=this.curLineStart+o.index,p=u+o[0].length;if(this.matchPos=toCharEnd(this.text,p+(u==p?1:0)),u==this.curLineStart+this.curLine.length&&this.nextLine(),(u<p||u>this.value.to)&&(!this.test||this.test(u,p,o)))return this.value={from:u,to:p,match:o},this;a=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),a=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(a,o){this.from=a,this.text=o}get to(){return this.from+this.text.length}static get(a,o,u){let p=flattened.get(a);if(!p||p.from>=u||p.to<=o){let g=new FlattenedDoc(o,a.sliceString(o,u));return flattened.set(a,g),g}if(p.from==o&&p.to==u)return p;let{text:d,from:f}=p;return f>o&&(d=a.sliceString(o,f)+d,f=o),p.to<u&&(d+=a.sliceString(p.to,u)),flattened.set(a,new FlattenedDoc(f,d)),new FlattenedDoc(o,d.slice(o-f,u-f))}}class MultilineRegExpCursor{constructor(a,o,u,p,d){this.text=a,this.to=d,this.done=!1,this.value=empty,this.matchPos=toCharEnd(a,p),this.re=new RegExp(o,baseFlags+(u?.ignoreCase?"i":"")),this.test=u?.test,this.flat=FlattenedDoc.get(a,p,this.chunkEnd(p+5e3))}chunkEnd(a){return a>=this.to?this.to:this.text.lineAt(a).to}next(){for(;;){let a=this.re.lastIndex=this.matchPos-this.flat.from,o=this.re.exec(this.flat.text);if(o&&!o[0]&&o.index==a&&(this.re.lastIndex=a+1,o=this.re.exec(this.flat.text)),o){let u=this.flat.from+o.index,p=u+o[0].length;if((this.flat.to>=this.to||o.index+o[0].length<=this.flat.text.length-10)&&(!this.test||this.test(u,p,o)))return this.value={from:u,to:p,match:o},this.matchPos=toCharEnd(this.text,p+(u==p?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(l){try{return new RegExp(l,baseFlags),!0}catch{return!1}}function toCharEnd(l,a){if(a>=l.length)return a;let o=l.lineAt(a),u;for(;a<o.to&&(u=o.text.charCodeAt(a-o.from))>=56320&&u<57344;)a++;return a}function createLineDialog(l){let a=String(l.state.doc.lineAt(l.state.selection.main.head).number),o=crelt("input",{class:"cm-textfield",name:"line",value:a}),u=crelt("form",{class:"cm-gotoLine",onkeydown:d=>{d.keyCode==27?(d.preventDefault(),l.dispatch({effects:dialogEffect.of(!1)}),l.focus()):d.keyCode==13&&(d.preventDefault(),p())},onsubmit:d=>{d.preventDefault(),p()}},crelt("label",l.state.phrase("Go to line"),": ",o)," ",crelt("button",{class:"cm-button",type:"submit"},l.state.phrase("go")));function p(){let d=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(o.value);if(!d)return;let{state:f}=l,g=f.doc.lineAt(f.selection.main.head),[,b,O,S,M]=d,A=S?+S.slice(1):0,F=O?+O:g.number;if(O&&M){let I=F/100;b&&(I=I*(b=="-"?-1:1)+g.number/f.doc.lines),F=Math.round(f.doc.lines*I)}else O&&b&&(F=F*(b=="-"?-1:1)+g.number);let $=f.doc.line(Math.max(1,Math.min(f.doc.lines,F))),B=EditorSelection.cursor($.from+Math.max(0,Math.min(A,$.length)));l.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(B.from,{y:"center"})],selection:B}),l.focus()}return{dom:u}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(l,a){for(let o of a.effects)o.is(dialogEffect)&&(l=o.value);return l},provide:l=>showPanel.from(l,a=>a?createLineDialog:null)}),gotoLine=l=>{let a=getPanel(l,createLineDialog);if(!a){let o=[dialogEffect.of(!0)];l.state.field(dialogField,!1)==null&&o.push(StateEffect.appendConfig.of([dialogField,baseTheme$1])),l.dispatch({effects:o}),a=getPanel(l,createLineDialog)}return a&&a.dom.querySelector("input").select(),!0},baseTheme$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),selectWord=({state:l,dispatch:a})=>{let{selection:o}=l,u=EditorSelection.create(o.ranges.map(p=>l.wordAt(p.head)||EditorSelection.cursor(p.head)),o.mainIndex);return u.eq(o)?!1:(a(l.update({selection:u})),!0)};function findNextOccurrence(l,a){let{main:o,ranges:u}=l.selection,p=l.wordAt(o.head),d=p&&p.from==o.from&&p.to==o.to;for(let f=!1,g=new SearchCursor(l.doc,a,u[u.length-1].to);;)if(g.next(),g.done){if(f)return null;g=new SearchCursor(l.doc,a,0,Math.max(0,u[u.length-1].from-1)),f=!0}else{if(f&&u.some(b=>b.from==g.value.from))continue;if(d){let b=l.wordAt(g.value.from);if(!b||b.from!=g.value.from||b.to!=g.value.to)continue}return g.value}}const selectNextOccurrence=({state:l,dispatch:a})=>{let{ranges:o}=l.selection;if(o.some(d=>d.from===d.to))return selectWord({state:l,dispatch:a});let u=l.sliceDoc(o[0].from,o[0].to);if(l.selection.ranges.some(d=>l.sliceDoc(d.from,d.to)!=u))return!1;let p=findNextOccurrence(l,u);return p?(a(l.update({selection:l.selection.addRange(EditorSelection.range(p.from,p.to),!1),effects:EditorView.scrollIntoView(p.to)})),!0):!1},searchConfigFacet=Facet.define({combine(l){return combineConfig(l,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:a=>new SearchPanel(a),scrollToMatch:a=>EditorView.scrollIntoView(a)})}});class SearchQuery{constructor(a){this.search=a.search,this.caseSensitive=!!a.caseSensitive,this.literal=!!a.literal,this.regexp=!!a.regexp,this.replace=a.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!a.wholeWord}unquote(a){return this.literal?a:a.replace(/\\([nrt\\])/g,(o,u)=>u=="n"?`
`:u=="r"?"\r":u=="t"?"	":"\\")}eq(a){return this.search==a.search&&this.replace==a.replace&&this.caseSensitive==a.caseSensitive&&this.regexp==a.regexp&&this.wholeWord==a.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(a,o=0,u){let p=a.doc?a:EditorState.create({doc:a});return u==null&&(u=p.doc.length),this.regexp?regexpCursor(this,p,o,u):stringCursor(this,p,o,u)}}class QueryType{constructor(a){this.spec=a}}function stringCursor(l,a,o,u){return new SearchCursor(a.doc,l.unquoted,o,u,l.caseSensitive?void 0:p=>p.toLowerCase(),l.wholeWord?stringWordTest(a.doc,a.charCategorizer(a.selection.main.head)):void 0)}function stringWordTest(l,a){return(o,u,p,d)=>((d>o||d+p.length<u)&&(d=Math.max(0,o-2),p=l.sliceString(d,Math.min(l.length,u+2))),(a(charBefore(p,o-d))!=CharCategory.Word||a(charAfter(p,o-d))!=CharCategory.Word)&&(a(charAfter(p,u-d))!=CharCategory.Word||a(charBefore(p,u-d))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(a){super(a)}nextMatch(a,o,u){let p=stringCursor(this.spec,a,u,a.doc.length).nextOverlapping();if(p.done){let d=Math.min(a.doc.length,o+this.spec.unquoted.length);p=stringCursor(this.spec,a,0,d).nextOverlapping()}return p.done||p.value.from==o&&p.value.to==u?null:p.value}prevMatchInRange(a,o,u){for(let p=u;;){let d=Math.max(o,p-1e4-this.spec.unquoted.length),f=stringCursor(this.spec,a,d,p),g=null;for(;!f.nextOverlapping().done;)g=f.value;if(g)return g;if(d==o)return null;p-=1e4}}prevMatch(a,o,u){let p=this.prevMatchInRange(a,0,o);return p||(p=this.prevMatchInRange(a,Math.max(0,u-this.spec.unquoted.length),a.doc.length)),p&&(p.from!=o||p.to!=u)?p:null}getReplacement(a){return this.spec.unquote(this.spec.replace)}matchAll(a,o){let u=stringCursor(this.spec,a,0,a.doc.length),p=[];for(;!u.next().done;){if(p.length>=o)return null;p.push(u.value)}return p}highlight(a,o,u,p){let d=stringCursor(this.spec,a,Math.max(0,o-this.spec.unquoted.length),Math.min(u+this.spec.unquoted.length,a.doc.length));for(;!d.next().done;)p(d.value.from,d.value.to)}}function regexpCursor(l,a,o,u){return new RegExpCursor(a.doc,l.search,{ignoreCase:!l.caseSensitive,test:l.wholeWord?regexpWordTest(a.charCategorizer(a.selection.main.head)):void 0},o,u)}function charBefore(l,a){return l.slice(findClusterBreak(l,a,!1),a)}function charAfter(l,a){return l.slice(a,findClusterBreak(l,a))}function regexpWordTest(l){return(a,o,u)=>!u[0].length||(l(charBefore(u.input,u.index))!=CharCategory.Word||l(charAfter(u.input,u.index))!=CharCategory.Word)&&(l(charAfter(u.input,u.index+u[0].length))!=CharCategory.Word||l(charBefore(u.input,u.index+u[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(a,o,u){let p=regexpCursor(this.spec,a,u,a.doc.length).next();return p.done&&(p=regexpCursor(this.spec,a,0,o).next()),p.done?null:p.value}prevMatchInRange(a,o,u){for(let p=1;;p++){let d=Math.max(o,u-p*1e4),f=regexpCursor(this.spec,a,d,u),g=null;for(;!f.next().done;)g=f.value;if(g&&(d==o||g.from>d+10))return g;if(d==o)return null}}prevMatch(a,o,u){return this.prevMatchInRange(a,0,o)||this.prevMatchInRange(a,u,a.doc.length)}getReplacement(a){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(o,u)=>u=="$"?"$":u=="&"?a.match[0]:u!="0"&&+u<a.match.length?a.match[u]:o)}matchAll(a,o){let u=regexpCursor(this.spec,a,0,a.doc.length),p=[];for(;!u.next().done;){if(p.length>=o)return null;p.push(u.value)}return p}highlight(a,o,u,p){let d=regexpCursor(this.spec,a,Math.max(0,o-250),Math.min(u+250,a.doc.length));for(;!d.next().done;)p(d.value.from,d.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(l){return new SearchState(defaultQuery(l).create(),null)},update(l,a){for(let o of a.effects)o.is(setSearchQuery)?l=new SearchState(o.value.create(),l.panel):o.is(togglePanel$1)&&(l=new SearchState(l.query,o.value?createSearchPanel:null));return l},provide:l=>showPanel.from(l,a=>a.panel)});class SearchState{constructor(a,o){this.query=a,this.panel=o}}const matchMark$1=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(l){this.view=l,this.decorations=this.highlight(l.state.field(searchState))}update(l){let a=l.state.field(searchState);(a!=l.startState.field(searchState)||l.docChanged||l.selectionSet||l.viewportChanged)&&(this.decorations=this.highlight(a))}highlight({query:l,panel:a}){if(!a||!l.spec.valid)return Decoration.none;let{view:o}=this,u=new RangeSetBuilder;for(let p=0,d=o.visibleRanges,f=d.length;p<f;p++){let{from:g,to:b}=d[p];for(;p<f-1&&b>d[p+1].from-2*250;)b=d[++p].to;l.highlight(o.state,g,b,(O,S)=>{let M=o.state.selection.ranges.some(A=>A.from==O&&A.to==S);u.add(O,S,M?selectedMatchMark:matchMark$1)})}return u.finish()}},{decorations:l=>l.decorations});function searchCommand(l){return a=>{let o=a.state.field(searchState,!1);return o&&o.query.spec.valid?l(a,o):openSearchPanel(a)}}const findNext=searchCommand((l,{query:a})=>{let{to:o}=l.state.selection.main,u=a.nextMatch(l.state,o,o);if(!u)return!1;let p=EditorSelection.single(u.from,u.to),d=l.state.facet(searchConfigFacet);return l.dispatch({selection:p,effects:[announceMatch(l,u),d.scrollToMatch(p.main,l)],userEvent:"select.search"}),selectSearchInput(l),!0}),findPrevious=searchCommand((l,{query:a})=>{let{state:o}=l,{from:u}=o.selection.main,p=a.prevMatch(o,u,u);if(!p)return!1;let d=EditorSelection.single(p.from,p.to),f=l.state.facet(searchConfigFacet);return l.dispatch({selection:d,effects:[announceMatch(l,p),f.scrollToMatch(d.main,l)],userEvent:"select.search"}),selectSearchInput(l),!0}),selectMatches=searchCommand((l,{query:a})=>{let o=a.matchAll(l.state,1e3);return!o||!o.length?!1:(l.dispatch({selection:EditorSelection.create(o.map(u=>EditorSelection.range(u.from,u.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:l,dispatch:a})=>{let o=l.selection;if(o.ranges.length>1||o.main.empty)return!1;let{from:u,to:p}=o.main,d=[],f=0;for(let g=new SearchCursor(l.doc,l.sliceDoc(u,p));!g.next().done;){if(d.length>1e3)return!1;g.value.from==u&&(f=d.length),d.push(EditorSelection.range(g.value.from,g.value.to))}return a(l.update({selection:EditorSelection.create(d,f),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((l,{query:a})=>{let{state:o}=l,{from:u,to:p}=o.selection.main;if(o.readOnly)return!1;let d=a.nextMatch(o,u,u);if(!d)return!1;let f=d,g=[],b,O,S=[];if(f.from==u&&f.to==p&&(O=o.toText(a.getReplacement(f)),g.push({from:f.from,to:f.to,insert:O}),f=a.nextMatch(o,f.from,f.to),S.push(EditorView.announce.of(o.phrase("replaced match on line $",o.doc.lineAt(u).number)+"."))),f){let M=g.length==0||g[0].from>=d.to?0:d.to-d.from-O.length;b=EditorSelection.single(f.from-M,f.to-M),S.push(announceMatch(l,f)),S.push(o.facet(searchConfigFacet).scrollToMatch(b.main,l))}return l.dispatch({changes:g,selection:b,effects:S,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((l,{query:a})=>{if(l.state.readOnly)return!1;let o=a.matchAll(l.state,1e9).map(p=>{let{from:d,to:f}=p;return{from:d,to:f,insert:a.getReplacement(p)}});if(!o.length)return!1;let u=l.state.phrase("replaced $ matches",o.length)+".";return l.dispatch({changes:o,effects:EditorView.announce.of(u),userEvent:"input.replace.all"}),!0});function createSearchPanel(l){return l.state.facet(searchConfigFacet).createPanel(l)}function defaultQuery(l,a){var o,u,p,d,f;let g=l.selection.main,b=g.empty||g.to>g.from+100?"":l.sliceDoc(g.from,g.to);if(a&&!b)return a;let O=l.facet(searchConfigFacet);return new SearchQuery({search:((o=a?.literal)!==null&&o!==void 0?o:O.literal)?b:b.replace(/\n/g,"\\n"),caseSensitive:(u=a?.caseSensitive)!==null&&u!==void 0?u:O.caseSensitive,literal:(p=a?.literal)!==null&&p!==void 0?p:O.literal,regexp:(d=a?.regexp)!==null&&d!==void 0?d:O.regexp,wholeWord:(f=a?.wholeWord)!==null&&f!==void 0?f:O.wholeWord})}function getSearchInput(l){let a=getPanel(l,createSearchPanel);return a&&a.dom.querySelector("[main-field]")}function selectSearchInput(l){let a=getSearchInput(l);a&&a==l.root.activeElement&&a.select()}const openSearchPanel=l=>{let a=l.state.field(searchState,!1);if(a&&a.panel){let o=getSearchInput(l);if(o&&o!=l.root.activeElement){let u=defaultQuery(l.state,a.query.spec);u.valid&&l.dispatch({effects:setSearchQuery.of(u)}),o.focus(),o.select()}}else l.dispatch({effects:[togglePanel$1.of(!0),a?setSearchQuery.of(defaultQuery(l.state,a.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=l=>{let a=l.state.field(searchState,!1);if(!a||!a.panel)return!1;let o=getPanel(l,createSearchPanel);return o&&o.dom.contains(l.root.activeElement)&&l.focus(),l.dispatch({effects:togglePanel$1.of(!1)}),!0};class SearchPanel{constructor(a){this.view=a;let o=this.query=a.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:o.search,placeholder:phrase(a,"Find"),"aria-label":phrase(a,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:o.replace,placeholder:phrase(a,"Replace"),"aria-label":phrase(a,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:o.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:o.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:o.wholeWord,onchange:this.commit});function u(p,d,f){return crelt("button",{class:"cm-button",name:p,onclick:d,type:"button"},f)}this.dom=crelt("div",{onkeydown:p=>this.keydown(p),class:"cm-search"},[this.searchField,u("next",()=>findNext(a),[phrase(a,"next")]),u("prev",()=>findPrevious(a),[phrase(a,"previous")]),u("select",()=>selectMatches(a),[phrase(a,"all")]),crelt("label",null,[this.caseField,phrase(a,"match case")]),crelt("label",null,[this.reField,phrase(a,"regexp")]),crelt("label",null,[this.wordField,phrase(a,"by word")]),...a.state.readOnly?[]:[crelt("br"),this.replaceField,u("replace",()=>replaceNext(a),[phrase(a,"replace")]),u("replaceAll",()=>replaceAll(a),[phrase(a,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(a),"aria-label":phrase(a,"close"),type:"button"},["×"])])}commit(){let a=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});a.eq(this.query)||(this.query=a,this.view.dispatch({effects:setSearchQuery.of(a)}))}keydown(a){runScopeHandlers(this.view,a,"search-panel")?a.preventDefault():a.keyCode==13&&a.target==this.searchField?(a.preventDefault(),(a.shiftKey?findPrevious:findNext)(this.view)):a.keyCode==13&&a.target==this.replaceField&&(a.preventDefault(),replaceNext(this.view))}update(a){for(let o of a.transactions)for(let u of o.effects)u.is(setSearchQuery)&&!u.value.eq(this.query)&&this.setQuery(u.value)}setQuery(a){this.query=a,this.searchField.value=a.search,this.replaceField.value=a.replace,this.caseField.checked=a.caseSensitive,this.reField.checked=a.regexp,this.wordField.checked=a.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(l,a){return l.state.phrase(a)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(l,{from:a,to:o}){let u=l.state.doc.lineAt(a),p=l.state.doc.lineAt(o).to,d=Math.max(u.from,a-AnnounceMargin),f=Math.min(p,o+AnnounceMargin),g=l.state.sliceDoc(d,f);if(d!=u.from){for(let b=0;b<AnnounceMargin;b++)if(!Break.test(g[b+1])&&Break.test(g[b])){g=g.slice(b);break}}if(f!=p){for(let b=g.length-1;b>g.length-AnnounceMargin;b--)if(!Break.test(g[b-1])&&Break.test(g[b])){g=g.slice(0,b);break}}return EditorView.announce.of(`${l.state.phrase("current match")}. ${g} ${l.state.phrase("on line")} ${u.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];let getDrawSelectionConfig$1=getDrawSelectionConfig$2,Piece$1=class{constructor(a,o,u,p,d,f,g,b,O,S){this.left=a,this.top=o,this.height=u,this.fontFamily=p,this.fontSize=d,this.fontWeight=f,this.color=g,this.className=b,this.letter=O,this.partial=S}draw(){let a=document.createElement("div");return a.className=this.className,this.adjust(a),a}adjust(a){a.style.left=this.left+"px",a.style.top=this.top+"px",a.style.height=this.height+"px",a.style.lineHeight=this.height+"px",a.style.fontFamily=this.fontFamily,a.style.fontSize=this.fontSize,a.style.fontWeight=this.fontWeight,a.style.color=this.partial?"transparent":this.color,a.className=this.className,a.textContent=this.letter}eq(a){return this.left==a.left&&this.top==a.top&&this.height==a.height&&this.fontFamily==a.fontFamily&&this.fontSize==a.fontSize&&this.fontWeight==a.fontWeight&&this.color==a.color&&this.className==a.className&&this.letter==a.letter}},BlockCursorPlugin$1=class{constructor(a,o){this.view=a,this.rangePieces=[],this.cursors=[],this.em=o,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=a.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),a.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){let o=getDrawSelectionConfig$1(this.view.state).cursorBlinkRate;this.cursorLayer.style.animationDuration=o+"ms"}update(a){(a.selectionSet||a.geometryChanged||a.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),configChanged$1(a)&&this.setBlinkRate()}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:a}=this.view,o=[];for(let u of a.selection.ranges){let p=u==a.selection.main,d=measureCursor$1(this.em,this.view,u,p);d&&o.push(d)}return{cursors:o}}drawSel({cursors:a}){if(a.length!=this.cursors.length||a.some((o,u)=>!o.eq(this.cursors[u]))){let o=this.cursorLayer.children;if(o.length!==a.length){this.cursorLayer.textContent="";for(const u of a)this.cursorLayer.appendChild(u.draw())}else a.forEach((u,p)=>u.adjust(o[p]));this.cursors=a}}destroy(){this.cursorLayer.remove()}};function configChanged$1(l){return getDrawSelectionConfig$1(l.startState)!=getDrawSelectionConfig$1(l.state)}const themeSpec$1={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696",color:"transparent !important"}},hideNativeSelection$1=Prec.highest(EditorView.theme(themeSpec$1));function getBase$1(l){let a=l.scrollDOM.getBoundingClientRect();return{left:(l.textDirection==Direction.LTR?a.left:a.right-l.scrollDOM.clientWidth)-l.scrollDOM.scrollLeft,top:a.top-l.scrollDOM.scrollTop}}function measureCursor$1(l,a,o,u){var p,d;let f=o.head,g=1;(l.$data.count||l.$data.keyChain)&&(g=.5);{let O=f<a.state.doc.length&&a.state.sliceDoc(f,f+1);O&&/[\uDC00-\uDFFF]/.test(O)&&f>1&&(f--,O=a.state.sliceDoc(f,f+1));let S=a.coordsAtPos(f,1);if(!S)return null;let M=getBase$1(a),A=a.domAtPos(f),F=A?A.node:a.contentDOM;for(;A&&A.node instanceof HTMLElement;)F=A.node,A={node:A.node.childNodes[A.offset],offset:0};if(!(F instanceof HTMLElement)){if(!F.parentNode)return null;F=F.parentNode}let $=getComputedStyle(F),B=S.left,I=(d=(p=a).coordsForChar)===null||d===void 0?void 0:d.call(p,f);if(I&&(B=I.left),!O||O==`
`||O=="\r")O=" ";else if(O=="	"){O=" ";var b=a.coordsAtPos(f+1,-1);b&&(B=b.left-(b.left-S.left)/parseInt($.tabSize))}else/[\uD800-\uDBFF]/.test(O)&&f<a.state.doc.length-1&&(O+=a.state.sliceDoc(f+1,f+2));let U=S.bottom-S.top;return new Piece$1(B-M.left,S.top-M.top+U*(1-g),U*g,$.fontFamily,$.fontSize,$.fontWeight,$.color,u?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",O,g!=1)}}const emacsStyle=EditorView.theme({".cm-emacsMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"5px 10px",backgroundColor:"#fffa8f",fontFamily:"monospace"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"#fffa8f"}}),emacsPlugin=ViewPlugin.fromClass(class{constructor(l){this.status="",this.view=l,this.em=new EmacsHandler(l),this.blockCursor=new BlockCursorPlugin$1(l,this.em),this.view.scrollDOM.classList.add("cm-emacsMode")}update(l){l.docChanged&&(this.em.$emacsMark=null,this.em.updateMarksOnChange(l.changes)),this.blockCursor.update(l)}destroy(){this.view.scrollDOM.classList.remove("cm-emacsMode"),this.blockCursor.destroy()}},{eventHandlers:{keydown:function(l,a){var o=this.em.handleKeyboard(l);return o&&this.blockCursor.scheduleRedraw(),!!o},mousedown:function(){this.em.$emacsMark=null}}}),showVimPanel$1=StateEffect.define(),vimPanelState$1=StateField.define({create:()=>!1,update(l,a){for(let o of a.effects)o.is(showVimPanel$1)&&(l=o.value);return l},provide:l=>showPanel.from(l,a=>a?createVimPanel$1:null)});function createVimPanel$1(l){let a=document.createElement("div");return a.className="cm-vim-panel",{top:!1,dom:a}}function emacs(l={}){return[emacsStyle,emacsPlugin,hideNativeSelection$1,vimPanelState$1]}var specialKey={Return:"Return",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Return",Divide:"/",Slash:"/",Multiply:"*",Subtract:"-",Minus:"-",Equal:"="},ignoredKeys={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1};const commandKeyBinding={};class EmacsHandler{constructor(a){this.view=a,this.$data={count:0,keyChain:"",lastCommand:""},this.$emacsMarkRing=[],this.$emacsMark=null}static bindKey(a,o){a.split("|").forEach(function(u){let p="",d=u.split(/\s+/);d.forEach(function(f,g){let b=f.split(/-(?=.)/),O=b.pop();b.length&&(p+=b.sort().join("-")+"-"),p+=O,g===d.length-1?commandKeyBinding[p]=o:(commandKeyBinding[p]="null",p+=" ")})})}static getKey(a){var o=a.code,u=a.key;if(ignoredKeys[u])return["","",""];o.length>1&&(o[0]=="N"&&(o=o.replace(/^Numpad/,"")),o[0]=="K"&&(o=o.replace(/^Key/,""))),o=specialKey[o]||o,o.length==1&&(o=o.toLowerCase());var p="";return a.ctrlKey&&(p+="C-"),a.metaKey&&(p+="CMD-"),a.altKey&&(p+="M-"),a.shiftKey&&(p+="S-"),[o,p,u]}static addCommands(a){Object.keys(a).forEach(function(o){var u=a[o];typeof u=="function"&&(u={exec:u}),EmacsHandler.commands[o]=u})}static execCommand(a,o,u,p=1){var d=void 0;if(p<0&&(p=-p),typeof a=="function")for(var f=0;f<p;f++)a(o.view);else if(a!=="null")if(a.exec){p>1&&a.handlesCount&&(u||(u={}),typeof u=="object"&&(u.count=p),p=1);for(var f=0;f<p;f++)d=a.exec(o,u||{})}else throw new Error("missformed command");return d}handleKeyboard(a){var o=EmacsHandler.getKey(a),u=this.findCommand(o);if(!(/Up|Down/.test(o?.[0])&&completionStatus(this.view.state))){if(u&&u.command){var p=EmacsHandler.execCommand(u.command,this,u.args,u.count);if(p===!1)return}return u}}findCommand([a,o,u]){if(a){var p=this,d=this.$data;if(!o&&a.length==1&&(p.pushEmacsMark(),d.count)){var f=new Array(d.count+1).join(u);return d.count=null,{command:"insertstring",args:f}}if(o=="C-"||d.count){var O=parseInt(a[a.length-1]);if(typeof O=="number"&&!isNaN(O))return d.count=Math.max(d.count||0,0),d.count=10*d.count+O,{command:"null"}}o&&(a=o+a),d.keyChain&&(a=d.keyChain+=" "+a);var g=commandKeyBinding[a];if(d.keyChain=g=="null"?a:"",!!g){if(g==="null")return{command:"null"};if(g==="universalArgument")return d.count=-4,{command:"null"};var b;if(typeof g!="string"&&(b=g.args,g.command&&(g=g.command)),(g==="insertstring"||g===splitLine||g===toggleComment)&&p.pushEmacsMark(),!(typeof g=="string"&&(g=EmacsHandler.commands[g],!g))){!g.readOnly&&!g.keepLastCommand&&(d.lastCommand=null);var O=d.count||1;return d.count&&(d.count=0),{command:g,args:b,count:O}}}}}showCommandLine(a){console.error("TODO")}updateMarksOnChange(a){this.$emacsMark&&(this.$emacsMark=this.updateMark(this.$emacsMark,a)),this.$emacsMarkRing=this.$emacsMarkRing.map(o=>this.updateMark(o,a)).filter(Boolean)}updateMark(a,o){if(a){var u=a.map(function(p){return o.mapPos(p,1,MapMode.TrackDel)}).filter(p=>p!=null);return u.length==0?null:u}}emacsMark(){return this.$emacsMark}setEmacsMark(a){this.$emacsMark=a}pushEmacsMark(a,o){var u=this.$emacsMark;u&&pushUnique(this.$emacsMarkRing,u),!a||o?this.setEmacsMark(a):pushUnique(this.$emacsMarkRing,a)}popEmacsMark(){var a=this.emacsMark();return a?(this.setEmacsMark(null),a):this.$emacsMarkRing.pop()}getLastEmacsMark(){return this.$emacsMark||this.$emacsMarkRing.slice(-1)[0]}getCopyText(){var a=this.view.state;return a.selection.ranges.map(o=>a.sliceDoc(o.from,o.to)).join(`
`)}clearSelection(){var a=this.view,o=a.state.selection,u=!o.ranges.some(d=>d.from!=d.to);if(u)return!1;var p=o.ranges.map(d=>EditorSelection.range(d.head,d.head));return a.dispatch({selection:EditorSelection.create(p,o.mainIndex)}),!0}onPaste(a){var o=this.view,u=o.state.selection,p;if(u.ranges.length>1){var d=a.split(`
`);d.length==u.ranges.length&&(p=d)}var f=0,g=o.state.changeByRange(b=>{var O=p?p[f]:a;return f++,{changes:{from:b.from,to:b.to,insert:O},range:EditorSelection.cursor(b.from+O.length)}});o.dispatch(g)}selectionToEmacsMark(){var a=this.view.state.selection;return a.ranges.map(o=>o.head)}}EmacsHandler.commands={};function pushUnique(l,a){l.length&&l[l.length-1]+""==a+""||l.push(a)}function initVim(l){var a=l.Pos;function o(k,E,R){if(E.line===R.line&&E.ch>=R.ch-1){var L=k.getLine(E.line),V=L.charCodeAt(E.ch);55296<=V&&V<=55551&&(R.ch+=1)}return{start:E,end:R}}var u=[{keys:"<Left>",type:"keyToKey",toKeys:"h"},{keys:"<Right>",type:"keyToKey",toKeys:"l"},{keys:"<Up>",type:"keyToKey",toKeys:"k"},{keys:"<Down>",type:"keyToKey",toKeys:"j"},{keys:"g<Up>",type:"keyToKey",toKeys:"gk"},{keys:"g<Down>",type:"keyToKey",toKeys:"gj"},{keys:"<Space>",type:"keyToKey",toKeys:"l"},{keys:"<BS>",type:"keyToKey",toKeys:"h"},{keys:"<Del>",type:"keyToKey",toKeys:"x"},{keys:"<C-Space>",type:"keyToKey",toKeys:"W"},{keys:"<C-BS>",type:"keyToKey",toKeys:"B"},{keys:"<S-Space>",type:"keyToKey",toKeys:"w"},{keys:"<S-BS>",type:"keyToKey",toKeys:"b"},{keys:"<C-n>",type:"keyToKey",toKeys:"j"},{keys:"<C-p>",type:"keyToKey",toKeys:"k"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-[>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-c>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>"},{keys:"<C-Esc>",type:"keyToKey",toKeys:"<Esc>",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},{keys:"<Home>",type:"keyToKey",toKeys:"0"},{keys:"<End>",type:"keyToKey",toKeys:"$"},{keys:"<PageUp>",type:"keyToKey",toKeys:"<C-b>"},{keys:"<PageDown>",type:"keyToKey",toKeys:"<C-f>"},{keys:"<CR>",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"<Ins>",type:"keyToKey",toKeys:"i",context:"normal"},{keys:"<Ins>",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"<C-f>",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"<C-b>",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"<C-d>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"<C-u>",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"g$",type:"motion",motion:"moveToEndOfDisplayLine"},{keys:"g^",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"g0",type:"motion",motion:"moveToStartOfDisplayLine"},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F<character>",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T<character>",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'<register>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`<register>",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[<character>",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",type:"operator",operator:"change"},{keys:"=",type:"operator",operator:"indentAuto"},{keys:">",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"<",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"gn",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!0}},{keys:"gN",type:"motion",motion:"findAndSelectNextInclusive",motionArgs:{forward:!1}},{keys:"gq",type:"operator",operator:"hardWrap"},{keys:"gw",type:"operator",operator:"hardWrap",operatorArgs:{keepCursor:!0}},{keys:"g?",type:"operator",operator:"rot13"},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"<C-u>",type:"operatorMotion",operator:"delete",motion:"moveToStartOfLine",context:"insert"},{keys:"<C-w>",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"<C-w>",type:"idle",context:"normal"},{keys:"<C-i>",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"<C-o>",type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"<C-e>",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"<C-y>",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"<C-v>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"<C-q>",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r<character>",type:"action",action:"replace",isEdit:!0},{keys:"@<register>",type:"action",action:"replayMacro"},{keys:"q<register>",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"<C-r>",type:"action",action:"redo"},{keys:"m<register>",type:"action",action:"setMark"},{keys:'"<register>',type:"action",action:"setRegister"},{keys:"<C-r><register>",type:"action",action:"insertRegister",context:"insert",isEdit:!0},{keys:"<C-o>",type:"action",action:"oneNormalCommand",context:"insert"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z<CR>",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"<C-a>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"<C-x>",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"<C-t>",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"<C-d>",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a<register>",type:"motion",motion:"textObjectManipulation"},{keys:"i<register>",type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],p=Object.create(null),d=u.length,f=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"omap",shortName:"om"},{name:"noremap",shortName:"no"},{name:"nnoremap",shortName:"nn"},{name:"vnoremap",shortName:"vn"},{name:"inoremap",shortName:"ino"},{name:"onoremap",shortName:"ono"},{name:"unmap"},{name:"mapclear",shortName:"mapc"},{name:"nmapclear",shortName:"nmapc"},{name:"vmapclear",shortName:"vmapc"},{name:"imapclear",shortName:"imapc"},{name:"omapclear",shortName:"omapc"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"startinsert",shortName:"start"},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"marks",excludeFromCommandHistory:!0},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"vglobal",shortName:"v"},{name:"delete",shortName:"d"},{name:"join",shortName:"j"},{name:"normal",shortName:"norm"},{name:"global",shortName:"g"}],g=hn("");function b(k){k.setOption("disableInput",!0),k.setOption("showCursorWhenSelecting",!1),l.signal(k,"vim-mode-change",{mode:"normal"}),k.on("cursorActivity",rr),Ve(k),l.on(k.getInputField(),"paste",S(k))}function O(k){k.setOption("disableInput",!1),k.off("cursorActivity",rr),l.off(k.getInputField(),"paste",S(k)),k.state.vim=null,An&&clearTimeout(An)}function S(k){var E=k.state.vim;return E.onPasteFn||(E.onPasteFn=function(){E.insertMode||(k.setCursor(St(k.getCursor(),0,1)),Qe.enterInsertMode(k,{},E))}),E.onPasteFn}var M=/[\d]/,A=[l.isWordChar,function(k){return k&&!l.isWordChar(k)&&!/\s/.test(k)}],F=[function(k){return/\S/.test(k)}],$=["<",">"],B=["-",'"',".",":","_","/","+"],I=/^\w$/,U=/^[A-Z]$/;try{U=new RegExp("^[\\p{Lu}]$","u")}catch{}function te(k,E){return E>=k.firstLine()&&E<=k.lastLine()}function de(k){return/^[a-z]$/.test(k)}function se(k){return"()[]{}".indexOf(k)!=-1}function q(k){return M.test(k)}function le(k){return U.test(k)}function fe(k){return/^\s*$/.test(k)}function _e(k){return".?!".indexOf(k)!=-1}function Pe(k,E){for(var R=0;R<E.length;R++)if(E[R]==k)return!0;return!1}var Oe={};function Fe(k,E,R,L,V){if(E===void 0&&!V)throw Error("defaultValue is required unless callback is provided");if(R||(R="string"),Oe[k]={type:R,defaultValue:E,callback:V},L)for(var j=0;j<L.length;j++)Oe[L[j]]=Oe[k];E&&we(k,E)}function we(k,E,R,L){var V=Oe[k];L=L||{};var j=L.scope;if(!V)return new Error("Unknown option: "+k);if(V.type=="boolean"){if(E&&E!==!0)return new Error("Invalid argument: "+k+"="+E);E!==!1&&(E=!0)}V.callback?(j!=="local"&&V.callback(E,void 0),j!=="global"&&R&&V.callback(E,R)):(j!=="local"&&(V.value=V.type=="boolean"?!!E:E),j!=="global"&&R&&(R.state.vim.options[k]={value:E}))}function ke(k,E,R){var L=Oe[k];R=R||{};var V=R.scope;if(!L)return new Error("Unknown option: "+k);if(L.callback){let j=E&&L.callback(void 0,E);return V!=="global"&&j!==void 0?j:V!=="local"?L.callback():void 0}else return(V!=="global"&&E&&E.state.vim.options[k]||V!=="local"&&L||{}).value}Fe("filetype",void 0,"string",["ft"],function(k,E){if(E!==void 0)if(k===void 0){let R=E.getOption("mode");return R=="null"?"":R}else{let R=k==""?"null":k;E.setOption("mode",R)}}),Fe("textwidth",80,"number",["tw"],function(k,E){if(E!==void 0)if(k===void 0){var R=E.getOption("textwidth");return R}else{var L=Math.round(k);L>1&&E.setOption("textwidth",L)}});var Ge=function(){var k=100,E=-1,R=0,L=0,V=new Array(k);function j(he,be,ye){var Ce=E%k,xe=V[Ce];function Se($e){var Le=++E%k,Ue=V[Le];Ue&&Ue.clear(),V[Le]=he.setBookmark($e)}if(xe){var ve=xe.find();ve&&!It(ve,be)&&Se(be)}else Se(be);Se(ye),R=E,L=E-k+1,L<0&&(L=0)}function re(he,be){E+=be,E>R?E=R:E<L&&(E=L);var ye=V[(k+E)%k];if(ye&&!ye.find()){var Ce=be>0?1:-1,xe,Se=he.getCursor();do if(E+=Ce,ye=V[(k+E)%k],ye&&(xe=ye.find())&&!It(Se,xe))break;while(E<R&&E>L)}return ye}function oe(he,be){var ye=E,Ce=re(he,be);return E=ye,Ce&&Ce.find()}return{cachedCursor:void 0,add:j,find:oe,move:re}},Be=function(k){return k?{changes:k.changes,expectCursorActivityForChange:k.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};class Ze{constructor(){this.latestRegister=void 0,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=void 0,this.lastInsertModeChanges=Be()}exitMacroRecordMode(){var E=Ee.macroModeState;E.onRecordingDone&&E.onRecordingDone(),E.onRecordingDone=void 0,E.isRecording=!1}enterMacroRecordMode(E,R){var L=Ee.registerController.getRegister(R);if(L){if(L.clear(),this.latestRegister=R,E.openDialog){var V=cn("span",{class:"cm-vim-message"},"recording @"+R);this.onRecordingDone=E.openDialog(V,function(){},{bottom:!0})}this.isRecording=!0}}}function Ve(k){return k.state.vim||(k.state.vim={inputState:new Et,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeReturn:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:void 0,sel:{anchor:new a(0,0),head:new a(0,0)},options:{},expectLiteralNext:!1,status:""}),k.state.vim}var Ee;function He(){Ee={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Ge(),macroModeState:new Ze,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new dn({}),searchHistoryController:new fn,exCommandHistoryController:new fn};for(var k in Oe){var E=Oe[k];E.value=E.defaultValue}}class nt{constructor(E,R){this.keyName=E,this.key=R.key,this.ctrlKey=R.ctrlKey,this.altKey=R.altKey,this.metaKey=R.metaKey,this.shiftKey=R.shiftKey}}var ht,Me={enterVimMode:b,leaveVimMode:O,buildKeyMap:function(){},getRegisterController:function(){return Ee.registerController},resetVimGlobalState_:He,getVimGlobalState_:function(){return Ee},maybeInitVimState_:Ve,suppressErrorLogging:!1,InsertModeKey:nt,map:function(k,E,R){Jt.map(k,E,R)},unmap:function(k,E){return Jt.unmap(k,E)},noremap:function(k,E,R){Jt.map(k,E,R,!0)},mapclear:function(k){var E=u.length,R=d,L=u.slice(0,E-R);if(u=u.slice(E-R),k)for(var V=L.length-1;V>=0;V--){var j=L[V];if(k!==j.context)if(j.context)this._mapCommand(j);else{var re=["normal","insert","visual"];for(var oe in re)if(re[oe]!==k){var he=Object.assign({},j);he.context=re[oe],this._mapCommand(he)}}}},langmap:Pt,vimKeyFromEvent:Wt,setOption:we,getOption:ke,defineOption:Fe,defineEx:function(k,E,R){if(!E)E=k;else if(k.indexOf(E)!==0)throw new Error('(Vim.defineEx) "'+E+'" is not a prefix of "'+k+'", command not registered');kn[k]=R,Jt.commandMap_[E]={name:k,shortName:E,type:"api"}},handleKey:function(k,E,R){var L=this.findKey(k,E,R);if(typeof L=="function")return L()},multiSelectHandleKey:Er,findKey:function(k,E,R){var L=Ve(k),V=k;function j(){var ye=Ee.macroModeState;if(ye.isRecording){if(E=="q")return ye.exitMacroRecordMode(),Mt(V),!0;R!="mapping"&&qe(ye,E)}}function re(){if(E=="<Esc>"){if(L.visualMode)mt(V);else if(L.insertMode)it(V);else return;return Mt(V),!0}}function oe(){if(re())return!0;L.inputState.keyBuffer.push(E);var ye=L.inputState.keyBuffer.join(""),Ce=E.length==1,xe=Ut.matchCommand(ye,u,L.inputState,"insert"),Se=L.inputState.changeQueue;if(xe.type=="none")return Mt(V),!1;if(xe.type=="partial"){if(xe.expectLiteralNext&&(L.expectLiteralNext=!0),ht&&window.clearTimeout(ht),ht=Ce&&window.setTimeout(function(){L.insertMode&&L.inputState.keyBuffer.length&&Mt(V)},ke("insertModeEscKeysTimeout")),Ce){var ve=V.listSelections();(!Se||Se.removed.length!=ve.length)&&(Se=L.inputState.changeQueue=new sn),Se.inserted+=E;for(var $e=0;$e<ve.length;$e++){var Le=Ot(ve[$e].anchor,ve[$e].head),Ue=Xt(ve[$e].anchor,ve[$e].head),Ie=V.getRange(Le,V.state.overwrite?St(Ue,0,1):Ue);Se.removed[$e]=(Se.removed[$e]||"")+Ie}}return!Ce}else xe.type=="full"&&(L.inputState.keyBuffer.length=0);if(L.expectLiteralNext=!1,ht&&window.clearTimeout(ht),xe.command&&Se){for(var ve=V.listSelections(),$e=0;$e<ve.length;$e++){var et=ve[$e].head;V.replaceRange(Se.removed[$e]||"",St(et,0,-Se.inserted.length),et,"+input")}Ee.macroModeState.lastInsertModeChanges.changes.pop()}return xe.command||Mt(V),xe.command}function he(){if(j()||re())return!0;L.inputState.keyBuffer.push(E);var ye=L.inputState.keyBuffer.join("");if(/^[1-9]\d*$/.test(ye))return!0;var Ce=/^(\d*)(.*)$/.exec(ye);if(!Ce)return Mt(V),!1;var xe=L.visualMode?"visual":"normal",Se=Ce[2]||Ce[1];L.inputState.operatorShortcut&&L.inputState.operatorShortcut.slice(-1)==Se&&(Se=L.inputState.operatorShortcut);var ve=Ut.matchCommand(Se,u,L.inputState,xe);return ve.type=="none"?(Mt(V),!1):ve.type=="partial"?(ve.expectLiteralNext&&(L.expectLiteralNext=!0),!0):ve.type=="clear"?(Mt(V),!0):(L.expectLiteralNext=!1,L.inputState.keyBuffer.length=0,Ce=/^(\d*)(.*)$/.exec(ye),Ce&&Ce[1]&&Ce[1]!="0"&&L.inputState.pushRepeatDigit(Ce[1]),ve.command)}var be=L.insertMode?oe():he();if(be===!1)return!L.insertMode&&(E.length===1||l.isMac&&/<A-.>/.test(E))?function(){return!0}:void 0;if(be===!0)return function(){return!0};if(be)return function(){return V.operation(function(){V.curOp.isVimOp=!0;try{if(typeof be!="object")return;be.type=="keyToKey"?ft(V,be.toKeys,be):Ut.processCommand(V,L,be)}catch(ye){throw V.state.vim=void 0,Ve(V),Me.suppressErrorLogging||console.log(ye),ye}return!0})}},handleEx:function(k,E){Jt.processCommand(k,E)},defineMotion:qt,defineAction:Tt,defineOperator:Dt,mapCommand:er,_mapCommand:un,defineRegister:pn,exitVisualMode:mt,exitInsertMode:it},Xe=[],kt=!1,je;function rt(k){if(!je)throw new Error("No prompt to send key to");if(k[0]=="<"){var E=k.toLowerCase().slice(1,-1),R=E.split("-");if(E=R.pop()||"",E=="lt")k="<";else if(E=="space")k=" ";else if(E=="cr")k=`
`;else if(Bt[E]){var L=je.value||"",V={key:Bt[E],target:{value:L,selectionEnd:L.length,selectionStart:L.length}};je.onKeyDown&&je.onKeyDown(V,je.value,re),je&&je.onKeyUp&&je.onKeyUp(V,je.value,re);return}}if(k==`
`){var j=je;je=null,j.onClose&&j.onClose(j.value)}else je.value=(je.value||"")+k;function re(oe){je&&(typeof oe=="string"?je.value=oe:je=null)}}function ft(k,E,R){var L=kt;if(R){if(Xe.indexOf(R)!=-1)return;Xe.push(R),kt=R.noremap!=!1}try{for(var V=Ve(k),j=/<(?:[CSMA]-)*\w+>|./gi,re;re=j.exec(E);){var oe=re[0],he=V.insertMode;if(je){rt(oe);continue}var be=Me.handleKey(k,oe,"mapping");if(!be&&he&&V.insertMode){if(oe[0]=="<"){var ye=oe.toLowerCase().slice(1,-1),Ce=ye.split("-");if(ye=Ce.pop()||"",ye=="lt")oe="<";else if(ye=="space")oe=" ";else if(ye=="cr")oe=`
`;else if(Bt.hasOwnProperty(ye)){oe=Bt[ye],ur(k,oe);continue}else oe=oe[0],j.lastIndex=re.index+1}k.replaceSelection(oe)}}}finally{if(Xe.pop(),kt=Xe.length?L:!1,!Xe.length&&je){var xe=je;je=null,Fn(k,xe)}}}var pt={Return:"CR",Backspace:"BS",Delete:"Del",Escape:"Esc",Insert:"Ins",ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"CR"," ":"Space"},Rt={Shift:1,Alt:1,Command:1,Control:1,CapsLock:1,AltGraph:1,Dead:1,Unidentified:1},Bt={};"Left|Right|Up|Down|End|Home".split("|").concat(Object.keys(pt)).forEach(function(k){Bt[(pt[k]||"").toLowerCase()]=Bt[k.toLowerCase()]=k});function Wt(k,E){var R=k.key;if(!Rt[R]){R.length>1&&R[0]=="n"&&(R=R.replace("Numpad","")),R=pt[R]||R;var L="";if(k.ctrlKey&&(L+="C-"),k.altKey&&(L+="A-"),k.metaKey&&(L+="M-"),l.isMac&&L=="A-"&&R.length==1&&(L=L.slice(2)),(L||R.length>1)&&k.shiftKey&&(L+="S-"),E&&!E.expectLiteralNext&&R.length==1){if(g.keymap&&R in g.keymap)(g.remapCtrl!=!1||!L)&&(R=g.keymap[R]);else if(R.charCodeAt(0)>128&&!p[R]){var V=k.code?.slice(-1)||"";k.shiftKey||(V=V.toLowerCase()),V&&(R=V,!L&&k.altKey&&(L="A-"))}}return L+=R,L.length>1&&(L="<"+L+">"),L}}function Pt(k,E){g.string!==k&&(g=hn(k)),g.remapCtrl=E}function hn(k){let E={};if(!k)return{keymap:E,string:""};function R(L){return L.split(/\\?(.)/).filter(Boolean)}return k.split(/((?:[^\\,]|\\.)+),/).map(L=>{if(!L)return;const V=L.split(/((?:[^\\;]|\\.)+);/);if(V.length==3){const j=R(V[1]),re=R(V[2]);if(j.length!==re.length)return;for(let oe=0;oe<j.length;++oe)E[j[oe]]=re[oe]}else if(V.length==1){const j=R(L);if(j.length%2!==0)return;for(let re=0;re<j.length;re+=2)E[j[re]]=j[re+1]}}),{keymap:E,string:k}}Fe("langmap",void 0,"string",["lmap"],function(k,E){if(k===void 0)return g.string;Pt(k)});class Et{constructor(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=void 0,this.changeQueue=null}pushRepeatDigit(E){this.operator?this.motionRepeat=this.motionRepeat.concat(E):this.prefixRepeat=this.prefixRepeat.concat(E)}getRepeat(){var E=0;return(this.prefixRepeat.length>0||this.motionRepeat.length>0)&&(E=1,this.prefixRepeat.length>0&&(E*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(E*=parseInt(this.motionRepeat.join(""),10))),E}}function Mt(k,E){k.state.vim.inputState=new Et,k.state.vim.expectLiteralNext=!1,l.signal(k,"vim-command-done",E)}function sn(){this.removed=[],this.inserted=""}class Lt{constructor(E,R,L){this.clear(),this.keyBuffer=[E||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!R,this.blockwise=!!L}setText(E,R,L){this.keyBuffer=[E||""],this.linewise=!!R,this.blockwise=!!L}pushText(E,R){R&&(this.linewise||this.keyBuffer.push(`
`),this.linewise=!0),this.keyBuffer.push(E)}pushInsertModeChanges(E){this.insertModeChanges.push(Be(E))}pushSearchQuery(E){this.searchQueries.push(E)}clear(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1}toString(){return this.keyBuffer.join("")}}function pn(k,E){var R=Ee.registerController.registers;if(!k||k.length!=1)throw Error("Register name must be 1 character");if(R[k])throw Error("Register already defined "+k);R[k]=E,B.push(k)}class dn{constructor(E){this.registers=E,this.unnamedRegister=E['"']=new Lt,E["."]=new Lt,E[":"]=new Lt,E["/"]=new Lt,E["+"]=new Lt}pushText(E,R,L,V,j){if(E!=="_"){V&&L.charAt(L.length-1)!==`
`&&(L+=`
`);var re=this.isValidRegister(E)?this.getRegister(E):null;if(!re||!E){switch(R){case"yank":this.registers[0]=new Lt(L,V,j);break;case"delete":case"change":L.indexOf(`
`)==-1?this.registers["-"]=new Lt(L,V):(this.shiftNumericRegisters_(),this.registers[1]=new Lt(L,V));break}this.unnamedRegister.setText(L,V,j);return}var oe=le(E);oe?re.pushText(L,V):re.setText(L,V,j),E==="+"&&navigator.clipboard.writeText(L),this.unnamedRegister.setText(re.toString(),V)}}getRegister(E){return this.isValidRegister(E)?(E=E.toLowerCase(),this.registers[E]||(this.registers[E]=new Lt),this.registers[E]):this.unnamedRegister}isValidRegister(E){return E&&(Pe(E,B)||I.test(E))}shiftNumericRegisters_(){for(var E=9;E>=2;E--)this.registers[E]=this.getRegister(""+(E-1))}}class fn{constructor(){this.historyBuffer=[],this.iterator=0,this.initialPrefix=null}nextMatch(E,R){var L=this.historyBuffer,V=R?-1:1;this.initialPrefix===null&&(this.initialPrefix=E);for(var j=this.iterator+V;R?j>=0:j<L.length;j+=V)for(var re=L[j],oe=0;oe<=re.length;oe++)if(this.initialPrefix==re.substring(0,oe))return this.iterator=j,re;if(j>=L.length)return this.iterator=L.length,this.initialPrefix;if(j<0)return E}pushInput(E){var R=this.historyBuffer.indexOf(E);R>-1&&this.historyBuffer.splice(R,1),E.length&&this.historyBuffer.push(E)}reset(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}}var Ut={matchCommand:function(k,E,R,L){var V=Ht(k,E,L,R),j=V.full[0];if(!j)return V.partial.length?{type:"partial",expectLiteralNext:V.partial.length==1&&V.partial[0].keys.slice(-11)=="<character>"}:{type:"none"};if(j.keys.slice(-11)=="<character>"||j.keys.slice(-10)=="<register>"){var re=mn(k);if(!re||re.length>1)return{type:"clear"};R.selectedCharacter=re}return{type:"full",command:j}},processCommand:function(k,E,R){switch(E.inputState.repeatOverride=R.repeatOverride,R.type){case"motion":this.processMotion(k,E,R);break;case"operator":this.processOperator(k,E,R);break;case"operatorMotion":this.processOperatorMotion(k,E,R);break;case"action":this.processAction(k,E,R);break;case"search":this.processSearch(k,E,R);break;case"ex":case"keyToEx":this.processEx(k,E,R);break}},processMotion:function(k,E,R){E.inputState.motion=R.motion,E.inputState.motionArgs=tn(R.motionArgs),this.evalInput(k,E)},processOperator:function(k,E,R){var L=E.inputState;if(L.operator)if(L.operator==R.operator){L.motion="expandToLine",L.motionArgs={linewise:!0,repeat:1},this.evalInput(k,E);return}else Mt(k);L.operator=R.operator,L.operatorArgs=tn(R.operatorArgs),R.keys.length>1&&(L.operatorShortcut=R.keys),R.exitVisualBlock&&(E.visualBlock=!1,Re(k)),E.visualMode&&this.evalInput(k,E)},processOperatorMotion:function(k,E,R){var L=E.visualMode,V=tn(R.operatorMotionArgs);V&&L&&V.visualLine&&(E.visualLine=!0),this.processOperator(k,E,R),L||this.processMotion(k,E,R)},processAction:function(k,E,R){var L=E.inputState,V=L.getRepeat(),j=!!V,re=tn(R.actionArgs)||{repeat:1};L.selectedCharacter&&(re.selectedCharacter=L.selectedCharacter),R.operator&&this.processOperator(k,E,R),R.motion&&this.processMotion(k,E,R),(R.motion||R.operator)&&this.evalInput(k,E),re.repeat=V||1,re.repeatIsExplicit=j,re.registerName=L.registerName,Mt(k),E.lastMotion=null,R.isEdit&&this.recordLastEdit(E,L,R),Qe[R.action](k,re,E)},processSearch:function(k,E,R){if(!k.getSearchCursor)return;var L=R.searchArgs.forward,V=R.searchArgs.wholeWordOnly;ln(k).setReversed(!L);var j=L?"/":"?",re=ln(k).getQuery(),oe=k.getScrollInfo(),he="";function be(Ie,et,ut){Ee.searchHistoryController.pushInput(Ie),Ee.searchHistoryController.reset();try{Mn(k,Ie,et,ut)}catch{_t(k,"Invalid regex: "+Ie),Mt(k);return}Ut.processMotion(k,E,{keys:"",type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:R.searchArgs.toJumplist}})}function ye(Ie){k.scrollTo(oe.left,oe.top),be(Ie,!0,!0);var et=Ee.macroModeState;et.isRecording&&nr(et,Ie)}function Ce(){return ke("pcre")?"(JavaScript regexp: set pcre)":"(Vim regexp: set nopcre)"}function xe(Ie,et,ut){var ct=Wt(Ie),Ct,xt;ct=="<Up>"||ct=="<Down>"?(Ct=ct=="<Up>",xt=Ie.target?Ie.target.selectionEnd:0,et=Ee.searchHistoryController.nextMatch(et,Ct)||"",ut(et),xt&&Ie.target&&(Ie.target.selectionEnd=Ie.target.selectionStart=Math.min(xt,Ie.target.value.length))):ct&&ct!="<Left>"&&ct!="<Right>"&&Ee.searchHistoryController.reset(),he=et,Se()}function Se(){var Ie;try{Ie=Mn(k,he,!0,!0)}catch{}Ie?k.scrollIntoView(Kn(k,!L,Ie),30):(me(k),k.scrollTo(oe.left,oe.top))}function ve(Ie,et,ut){var ct=Wt(Ie);ct=="<Esc>"||ct=="<C-c>"||ct=="<C-[>"||ct=="<BS>"&&et==""?(Ee.searchHistoryController.pushInput(et),Ee.searchHistoryController.reset(),Mn(k,re?.source||""),me(k),k.scrollTo(oe.left,oe.top),l.e_stop(Ie),Mt(k),ut(),k.focus()):ct=="<Up>"||ct=="<Down>"?l.e_stop(Ie):ct=="<C-u>"&&(l.e_stop(Ie),ut(""))}switch(R.searchArgs.querySrc){case"prompt":var $e=Ee.macroModeState;if($e.isPlaying){let et=$e.replaySearchQueries.shift();be(et||"",!0,!1)}else Fn(k,{onClose:ye,prefix:j,desc:cn("span",{$cursor:"pointer",onmousedown:function(et){et.preventDefault(),we("pcre",!ke("pcre")),this.textContent=Ce(),Se()}},Ce()),onKeyUp:xe,onKeyDown:ve});break;case"wordUnderCursor":var Le=nn(k,{noSymbol:!0}),Ue=!0;if(Le||(Le=nn(k,{noSymbol:!1}),Ue=!1),!Le){_t(k,"No word under cursor"),Mt(k);return}let Ie=k.getLine(Le.start.line).substring(Le.start.ch,Le.end.ch);Ue&&V?Ie="\\b"+Ie+"\\b":Ie=Cn(Ie),Ee.jumpList.cachedCursor=k.getCursor(),k.setCursor(Le.start),be(Ie,!0,!1);break}},processEx:function(k,E,R){function L(oe){Ee.exCommandHistoryController.pushInput(oe),Ee.exCommandHistoryController.reset(),Jt.processCommand(k,oe),k.state.vim&&Mt(k),me(k)}function V(oe,he,be){var ye=Wt(oe),Ce,xe;(ye=="<Esc>"||ye=="<C-c>"||ye=="<C-[>"||ye=="<BS>"&&he=="")&&(Ee.exCommandHistoryController.pushInput(he),Ee.exCommandHistoryController.reset(),l.e_stop(oe),Mt(k),me(k),be(),k.focus()),ye=="<Up>"||ye=="<Down>"?(l.e_stop(oe),Ce=ye=="<Up>",xe=oe.target?oe.target.selectionEnd:0,he=Ee.exCommandHistoryController.nextMatch(he,Ce)||"",be(he),xe&&oe.target&&(oe.target.selectionEnd=oe.target.selectionStart=Math.min(xe,oe.target.value.length))):ye=="<C-u>"?(l.e_stop(oe),be("")):ye&&ye!="<Left>"&&ye!="<Right>"&&Ee.exCommandHistoryController.reset()}function j(oe,he){var be=new l.StringStream(he),ye={};try{if(Jt.parseInput_(k,be,ye),ye.commandName!="s"){me(k);return}var Ce=Jt.matchCommand_(ye.commandName);if(!Ce||(Jt.parseCommandArgs_(be,ye,Ce),!ye.argString))return;var xe=Hn(ye.argString.slice(1),!0,!0);xe&&Gn(k,xe)}catch{}}if(R.type=="keyToEx")Jt.processCommand(k,R.exArgs.input);else{var re={onClose:L,onKeyDown:V,onKeyUp:j,prefix:":"};E.visualMode&&(re.value="'<,'>",re.selectValueOnOpen=!1),Fn(k,re)}},evalInput:function(k,E){var R=E.inputState,L=R.motion,V=R.motionArgs||{repeat:1},j=R.operator,re=R.operatorArgs||{},oe=R.registerName,he=E.sel,be=vt(E.visualMode?st(k,he.head):k.getCursor("head")),ye=vt(E.visualMode?st(k,he.anchor):k.getCursor("anchor")),Ce=vt(be),xe=vt(ye),Se,ve,$e;if(j&&this.recordLastEdit(E,R),R.repeatOverride!==void 0?$e=R.repeatOverride:$e=R.getRepeat(),$e>0&&V.explicitRepeat?V.repeatIsExplicit=!0:(V.noRepeat||!V.explicitRepeat&&$e===0)&&($e=1,V.repeatIsExplicit=!1),R.selectedCharacter&&(V.selectedCharacter=re.selectedCharacter=R.selectedCharacter),V.repeat=$e,Mt(k),L){var Le=Nt[L](k,be,V,E,R);if(E.lastMotion=Nt[L],!Le)return;if(V.toJumplist){var Ue=Ee.jumpList,Ie=Ue.cachedCursor;Ie?(jt(k,Ie,Le),delete Ue.cachedCursor):jt(k,be,Le)}Le instanceof Array?(ve=Le[0],Se=Le[1]):Se=Le,Se||(Se=vt(be)),E.visualMode?(E.visualBlock&&Se.ch===1/0||(Se=st(k,Se,Ce)),ve&&(ve=st(k,ve)),ve=ve||xe,he.anchor=ve,he.head=Se,Re(k),bn(k,E,"<",Ke(ve,Se)?ve:Se),bn(k,E,">",Ke(ve,Se)?Se:ve)):j||(Se=st(k,Se,Ce),k.setCursor(Se.line,Se.ch))}if(j){if(re.lastSel){ve=xe;var et=re.lastSel,ut=Math.abs(et.head.line-et.anchor.line),ct=Math.abs(et.head.ch-et.anchor.ch);et.visualLine?Se=new a(xe.line+ut,xe.ch):et.visualBlock?Se=new a(xe.line+ut,xe.ch+ct):et.head.line==et.anchor.line?Se=new a(xe.line,xe.ch+ct):Se=new a(xe.line+ut,xe.ch),E.visualMode=!0,E.visualLine=et.visualLine,E.visualBlock=et.visualBlock,he=E.sel={anchor:ve,head:Se},Re(k)}else E.visualMode&&(re.lastSel={anchor:vt(he.anchor),head:vt(he.head),visualBlock:E.visualBlock,visualLine:E.visualLine});var Ct,xt,yt,Je,At;if(E.visualMode){Ct=Ot(he.head,he.anchor),xt=Xt(he.head,he.anchor),yt=E.visualLine||re.linewise,Je=E.visualBlock?"block":yt?"line":"char";var en=o(k,Ct,xt);if(At=Ne(k,{anchor:en.start,head:en.end},Je),yt){var Qt=At.ranges;if(Je=="block")for(var rn=0;rn<Qt.length;rn++)Qt[rn].head.ch=$t(k,Qt[rn].head.line);else Je=="line"&&(Qt[0].head=new a(Qt[0].head.line+1,0))}}else{if(Ct=vt(ve||xe),xt=vt(Se||Ce),Ke(xt,Ct)){var xn=Ct;Ct=xt,xt=xn}yt=V.linewise||re.linewise,yt?bt(k,Ct,xt):V.forward&&Yt(k,Ct,xt),Je="char";var Dr=!V.inclusive||yt,en=o(k,Ct,xt);At=Ne(k,{anchor:en.start,head:en.end},Je,Dr)}k.setSelections(At.ranges,At.primary),E.lastMotion=null,re.repeat=$e,re.registerName=oe,re.linewise=yt;var In=at[j](k,re,At.ranges,xe,Se);E.visualMode&&mt(k,In!=null),In&&k.setCursor(In)}},recordLastEdit:function(k,E,R){var L=Ee.macroModeState;L.isPlaying||(k.lastEditInputState=E,k.lastEditActionCommand=R,L.lastInsertModeChanges.changes=[],L.lastInsertModeChanges.expectCursorActivityForChange=!1,L.lastInsertModeChanges.visualBlock=k.visualBlock?k.sel.head.line-k.sel.anchor.line:0)}},Nt={moveToTopLine:function(k,E,R){var L=vn(k).top+R.repeat-1;return new a(L,Zt(k.getLine(L)))},moveToMiddleLine:function(k){var E=vn(k),R=Math.floor((E.top+E.bottom)*.5);return new a(R,Zt(k.getLine(R)))},moveToBottomLine:function(k,E,R){var L=vn(k).bottom-R.repeat+1;return new a(L,Zt(k.getLine(L)))},expandToLine:function(k,E,R){var L=E;return new a(L.line+R.repeat-1,1/0)},findNext:function(k,E,R){var L=ln(k),V=L.getQuery();if(V){var j=!R.forward;j=L.isReversed()?!j:j,Gn(k,V);var re=Kn(k,j,V,R.repeat);return re||_t(k,"No match found "+V+(ke("pcre")?" (set nopcre to use Vim regexps)":"")),re}},findAndSelectNextInclusive:function(k,E,R,L,V){var j=ln(k),re=j.getQuery();if(re){var oe=!R.forward;oe=j.isReversed()?!oe:oe;var he=Pr(k,oe,re,R.repeat,L);if(he){if(V.operator)return he;var be=he[0],ye=new a(he[1].line,he[1].ch-1);if(L.visualMode){(L.visualLine||L.visualBlock)&&(L.visualLine=!1,L.visualBlock=!1,l.signal(k,"vim-mode-change",{mode:"visual",subMode:""}));var Ce=L.sel.anchor;if(Ce)return j.isReversed()?R.forward?[Ce,be]:[Ce,ye]:R.forward?[Ce,ye]:[Ce,be]}else L.visualMode=!0,L.visualLine=!1,L.visualBlock=!1,l.signal(k,"vim-mode-change",{mode:"visual",subMode:""});return oe?[ye,be]:[be,ye]}}},goToMark:function(k,E,R,L){var V=Kt(k,L,R.selectedCharacter||"");return V?R.linewise?{line:V.line,ch:Zt(k.getLine(V.line))}:V:null},moveToOtherHighlightedEnd:function(k,E,R,L){var V=L.sel;return L.visualBlock&&R.sameLine?[st(k,new a(V.anchor.line,V.head.ch)),st(k,new a(V.head.line,V.anchor.ch))]:[V.head,V.anchor]},jumpToMark:function(k,E,R,L){for(var V=E,j=0;j<R.repeat;j++){var re=V;for(var oe in L.marks)if(de(oe)){var he=L.marks[oe].find(),be=R.forward?Ke(he,re):Ke(re,he);if(!be&&!(R.linewise&&he.line==re.line)){var ye=It(re,V),Ce=R.forward?an(re,he,V):an(V,he,re);(ye||Ce)&&(V=he)}}}return R.linewise&&(V=new a(V.line,Zt(k.getLine(V.line)))),V},moveByCharacters:function(k,E,R){var L=E,V=R.repeat,j=R.forward?L.ch+V:L.ch-V;return new a(L.line,j)},moveByLines:function(k,E,R,L){var V=E,j=V.ch;switch(L.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:j=L.lastHPos;break;default:L.lastHPos=j}var re=R.repeat+(R.repeatOffset||0),oe=R.forward?V.line+re:V.line-re,he=k.firstLine(),be=k.lastLine(),ye=k.findPosV(V,R.forward?re:-re,"line",L.lastHSPos),Ce=R.forward?ye.line>oe:ye.line<oe;return Ce&&(oe=ye.line,j=ye.ch),oe<he&&V.line==he?this.moveToStartOfLine(k,E,R,L):oe>be&&V.line==be?Vn(k,E,R,L,!0):(R.toFirstChar&&(j=Zt(k.getLine(oe)),L.lastHPos=j),L.lastHSPos=k.charCoords(new a(oe,j),"div").left,new a(oe,j))},moveByDisplayLines:function(k,E,R,L){var V=E;switch(L.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:L.lastHSPos=k.charCoords(V,"div").left}var j=R.repeat,re=k.findPosV(V,R.forward?j:-j,"line",L.lastHSPos);if(re.hitSide)if(R.forward){var oe=k.charCoords(re,"div"),he={top:oe.top+8,left:L.lastHSPos};re=k.coordsChar(he,"div")}else{var be=k.charCoords(new a(k.firstLine(),0),"div");be.left=L.lastHSPos,re=k.coordsChar(be,"div")}return L.lastHPos=re.ch,re},moveByPage:function(k,E,R){var L=E,V=R.repeat;return k.findPosV(L,R.forward?V:-V,"page")},moveByParagraph:function(k,E,R){var L=R.forward?1:-1;return Qn(k,E,R.repeat,L).start},moveBySentence:function(k,E,R){var L=R.forward?1:-1;return yr(k,E,R.repeat,L)},moveByScroll:function(k,E,R,L){var V=k.getScrollInfo(),j=null,re=R.repeat;re||(re=V.clientHeight/(2*k.defaultTextHeight()));var oe=k.charCoords(E,"local");if(R.repeat=re,j=Nt.moveByDisplayLines(k,E,R,L),!j)return null;var he=k.charCoords(j,"local");return k.scrollTo(null,V.top+he.top-oe.top),j},moveByWords:function(k,E,R){return fr(k,E,R.repeat,!!R.forward,!!R.wordEnd,!!R.bigWord)},moveTillCharacter:function(k,E,R){var L=R.repeat,V=$n(k,L,R.forward,R.selectedCharacter,E),j=R.forward?-1:1;return Vt(j,R),V?(V.ch+=j,V):null},moveToCharacter:function(k,E,R){var L=R.repeat;return Vt(0,R),$n(k,L,R.forward,R.selectedCharacter,E)||E},moveToSymbol:function(k,E,R){var L=R.repeat;return R.selectedCharacter&&dr(k,L,R.forward,R.selectedCharacter)||E},moveToColumn:function(k,E,R,L){var V=R.repeat;return L.lastHPos=V-1,L.lastHSPos=k.charCoords(E,"div").left,mr(k,V)},moveToEol:function(k,E,R,L){return Vn(k,E,R,L,!1)},moveToFirstNonWhiteSpaceCharacter:function(k,E){var R=E;return new a(R.line,Zt(k.getLine(R.line)))},moveToMatchedSymbol:function(k,E){for(var R=E,L=R.line,V=R.ch,j=k.getLine(L),re;V<j.length;V++)if(re=j.charAt(V),re&&se(re)){var oe=k.getTokenTypeAt(new a(L,V+1));if(oe!=="string"&&oe!=="comment")break}if(V<j.length){var he=re==="<"||re===">"?/[(){}[\]<>]/:/[(){}[\]]/,be=k.findMatchingBracket(new a(L,V),{bracketRegex:he});return be.to}else return R},moveToStartOfLine:function(k,E){return new a(E.line,0)},moveToLineOrEdgeOfDocument:function(k,E,R){var L=R.forward?k.lastLine():k.firstLine();return R.repeatIsExplicit&&(L=R.repeat-k.getOption("firstLineNumber")),new a(L,Zt(k.getLine(L)))},moveToStartOfDisplayLine:function(k){return k.execCommand("goLineLeft"),k.getCursor()},moveToEndOfDisplayLine:function(k){k.execCommand("goLineRight");var E=k.getCursor();return E.sticky=="before"&&E.ch--,E},textObjectManipulation:function(k,E,R,L){var V={"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","<":">",">":"<"},j={"'":!0,'"':!0,"`":!0},re=R.selectedCharacter||"";re=="b"?re="(":re=="B"&&(re="{");var oe=!R.textObjectInner,he,be;if(V[re]){if(be=!0,he=jn(k,E,re,oe),!he){var ye=k.getSearchCursor(new RegExp("\\"+re,"g"),E);ye.find()&&(he=jn(k,ye.from(),re,oe))}}else if(j[re])be=!0,he=br(k,E,re,oe);else if(re==="W"||re==="w")for(var Ce=R.repeat||1;Ce-- >0;){var xe=nn(k,{inclusive:oe,innerWord:!oe,bigWord:re==="W",noSymbol:re==="W",multiline:!0},he&&he.end);xe&&(he||(he=xe),he.end=xe.end)}else if(re==="p")if(he=Qn(k,E,R.repeat,0,oe),R.linewise=!0,L.visualMode)L.visualLine||(L.visualLine=!0);else{var Se=L.inputState.operatorArgs;Se&&(Se.linewise=!0),he.end.line--}else if(re==="t")he=Ye(k,E,oe);else if(re==="s"){var ve=k.getLine(E.line);E.ch>0&&_e(ve[E.ch])&&(E.ch-=1);var $e=Xn(k,E,R.repeat,1,oe),Le=Xn(k,E,R.repeat,-1,oe);fe(k.getLine(Le.line)[Le.ch])&&fe(k.getLine($e.line)[$e.ch-1])&&(Le={line:Le.line,ch:Le.ch+1}),he={start:Le,end:$e}}return he?k.state.vim.visualMode?De(k,he.start,he.end,be):[he.start,he.end]:null},repeatLastCharacterSearch:function(k,E,R){var L=Ee.lastCharacterSearch,V=R.repeat,j=R.forward===L.forward,re=(L.increment?1:0)*(j?-1:1);k.moveH(-re,"char"),R.inclusive=!!j;var oe=$n(k,V,j,L.selectedCharacter);return oe?(oe.ch+=re,oe):(k.moveH(re,"char"),E)}};function qt(k,E){Nt[k]=E}function yn(k,E){for(var R=[],L=0;L<E;L++)R.push(k);return R}var at={change:function(k,E,R){var L,V,j=k.state.vim,re=R[0].anchor,oe=R[0].head;if(j.visualMode)if(E.fullLine)oe.ch=Number.MAX_VALUE,oe.line--,k.setSelection(re,oe),V=k.getSelection(),k.replaceSelection(""),L=re;else{V=k.getSelection();var ye=yn("",R.length);k.replaceSelections(ye),L=Ot(R[0].head,R[0].anchor)}else{V=k.getRange(re,oe);var he=j.lastEditInputState;if(he?.motion=="moveByWords"&&!fe(V)){var be=/\s+$/.exec(V);be&&he.motionArgs&&he.motionArgs.forward&&(oe=St(oe,0,-be[0].length),V=V.slice(0,-be[0].length))}E.linewise&&(re=new a(re.line,Zt(k.getLine(re.line))),oe.line>re.line&&(oe=new a(oe.line-1,Number.MAX_VALUE))),k.replaceRange("",re,oe),L=re}Ee.registerController.pushText(E.registerName,"change",V,E.linewise,R.length>1),Qe.enterInsertMode(k,{head:L},k.state.vim)},delete:function(k,E,R){var L,V,j=k.state.vim;if(j.visualBlock){V=k.getSelection();var he=yn("",R.length);k.replaceSelections(he),L=Ot(R[0].head,R[0].anchor)}else{var re=R[0].anchor,oe=R[0].head;E.linewise&&oe.line!=k.firstLine()&&re.line==k.lastLine()&&re.line==oe.line-1&&(re.line==k.firstLine()?re.ch=0:re=new a(re.line-1,$t(k,re.line-1))),V=k.getRange(re,oe),k.replaceRange("",re,oe),L=re,E.linewise&&(L=Nt.moveToFirstNonWhiteSpaceCharacter(k,re))}return Ee.registerController.pushText(E.registerName,"delete",V,E.linewise,j.visualBlock),st(k,L)},indent:function(k,E,R){var L=k.state.vim,V=L.visualMode&&E.repeat||1;if(L.visualBlock){for(var j=k.getOption("tabSize"),re=k.getOption("indentWithTabs")?"	":" ".repeat(j),oe,he=R.length-1;he>=0;he--)if(oe=Ot(R[he].anchor,R[he].head),E.indentRight)k.replaceRange(re.repeat(V),oe,oe);else{for(var be=k.getLine(oe.line),ye=0,Ce=0;Ce<V;Ce++){var xe=be[oe.ch+ye];if(xe=="	")ye++;else if(xe==" "){ye++;for(var Se=1;Se<re.length&&(xe=be[oe.ch+ye],xe===" ");Se++)ye++}else break}k.replaceRange("",oe,St(oe,0,ye))}return oe}else if(k.indentMore)for(var Ce=0;Ce<V;Ce++)E.indentRight?k.indentMore():k.indentLess();else{var ve=R[0].anchor.line,$e=L.visualBlock?R[R.length-1].anchor.line:R[0].head.line;E.linewise&&$e--;for(var he=ve;he<=$e;he++)for(var Ce=0;Ce<V;Ce++)k.indentLine(he,E.indentRight)}return Nt.moveToFirstNonWhiteSpaceCharacter(k,R[0].anchor)},indentAuto:function(k,E,R){return k.execCommand("indentAuto"),Nt.moveToFirstNonWhiteSpaceCharacter(k,R[0].anchor)},hardWrap:function(k,E,R,L){if(k.hardWrap){var V=R[0].anchor.line,j=R[0].head.line;E.linewise&&j--;var re=k.hardWrap({from:V,to:j});return re>V&&E.linewise&&re--,E.keepCursor?L:new a(re,0)}},changeCase:function(k,E,R,L,V){for(var j=k.getSelections(),re=[],oe=E.toLower,he=0;he<j.length;he++){var be=j[he],ye="";if(oe===!0)ye=be.toLowerCase();else if(oe===!1)ye=be.toUpperCase();else for(var Ce=0;Ce<be.length;Ce++){var xe=be.charAt(Ce);ye+=le(xe)?xe.toLowerCase():xe.toUpperCase()}re.push(ye)}return k.replaceSelections(re),E.shouldMoveCursor?V:!k.state.vim.visualMode&&E.linewise&&R[0].anchor.line+1==R[0].head.line?Nt.moveToFirstNonWhiteSpaceCharacter(k,L):E.linewise?L:Ot(R[0].anchor,R[0].head)},yank:function(k,E,R,L){var V=k.state.vim,j=k.getSelection(),re=V.visualMode?Ot(V.sel.anchor,V.sel.head,R[0].head,R[0].anchor):L;return Ee.registerController.pushText(E.registerName,"yank",j,E.linewise,V.visualBlock),re},rot13:function(k,E,R,L,V){for(var j=k.getSelections(),re=[],oe=0;oe<j.length;oe++){const he=j[oe].split("").map(be=>{const ye=be.charCodeAt(0);return ye>=65&&ye<=90?String.fromCharCode(65+(ye-65+13)%26):ye>=97&&ye<=122?String.fromCharCode(97+(ye-97+13)%26):be}).join("");re.push(he)}return k.replaceSelections(re),E.shouldMoveCursor?V:!k.state.vim.visualMode&&E.linewise&&R[0].anchor.line+1==R[0].head.line?Nt.moveToFirstNonWhiteSpaceCharacter(k,L):E.linewise?L:Ot(R[0].anchor,R[0].head)}};function Dt(k,E){at[k]=E}var Qe={jumpListWalk:function(k,E,R){if(!R.visualMode){var L=E.repeat||1,V=E.forward,j=Ee.jumpList,re=j.move(k,V?L:-L),oe=re?re.find():void 0;oe=oe||k.getCursor(),k.setCursor(oe)}},scroll:function(k,E,R){if(!R.visualMode){var L=E.repeat||1,V=k.defaultTextHeight(),j=k.getScrollInfo().top,re=V*L,oe=E.forward?j+re:j-re,he=vt(k.getCursor()),be=k.charCoords(he,"local");if(E.forward)oe>be.top?(he.line+=(oe-be.top)/V,he.line=Math.ceil(he.line),k.setCursor(he),be=k.charCoords(he,"local"),k.scrollTo(null,be.top)):k.scrollTo(null,oe);else{var ye=oe+k.getScrollInfo().clientHeight;ye<be.bottom?(he.line-=(be.bottom-ye)/V,he.line=Math.floor(he.line),k.setCursor(he),be=k.charCoords(he,"local"),k.scrollTo(null,be.bottom-k.getScrollInfo().clientHeight)):k.scrollTo(null,oe)}}},scrollToCursor:function(k,E){var R=k.getCursor().line,L=k.charCoords(new a(R,0),"local"),V=k.getScrollInfo().clientHeight,j=L.top;switch(E.position){case"center":j=L.bottom-V/2;break;case"bottom":var re=new a(R,k.getLine(R).length-1),oe=k.charCoords(re,"local"),he=oe.bottom-j;j=j-V+he;break}k.scrollTo(null,j)},replayMacro:function(k,E,R){var L=E.selectedCharacter||"",V=E.repeat||1,j=Ee.macroModeState;for(L=="@"?L=j.latestRegister||"":j.latestRegister=L;V--;)Bn(k,R,j,L)},enterMacroRecordMode:function(k,E){var R=Ee.macroModeState,L=E.selectedCharacter;Ee.registerController.isValidRegister(L)&&R.enterMacroRecordMode(k,L)},toggleOverwrite:function(k){k.state.overwrite?(k.toggleOverwrite(!1),k.setOption("keyMap","vim-insert"),l.signal(k,"vim-mode-change",{mode:"insert"})):(k.toggleOverwrite(!0),k.setOption("keyMap","vim-replace"),l.signal(k,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(k,E,R){if(!k.getOption("readOnly")){R.insertMode=!0,R.insertModeRepeat=E&&E.repeat||1;var L=E?E.insertAt:null,V=R.sel,j=E.head||k.getCursor("head"),re=k.listSelections().length;if(L=="eol")j=new a(j.line,$t(k,j.line));else if(L=="bol")j=new a(j.line,0);else if(L=="charAfter"){var oe=o(k,j,St(j,0,1));j=oe.end}else if(L=="firstNonBlank"){var oe=o(k,j,Nt.moveToFirstNonWhiteSpaceCharacter(k,j));j=oe.end}else if(L=="startOfSelectedArea"){if(!R.visualMode)return;R.visualBlock?(j=new a(Math.min(V.head.line,V.anchor.line),Math.min(V.head.ch,V.anchor.ch)),re=Math.abs(V.head.line-V.anchor.line)+1):V.head.line<V.anchor.line?j=V.head:j=new a(V.anchor.line,0)}else if(L=="endOfSelectedArea"){if(!R.visualMode)return;R.visualBlock?(j=new a(Math.min(V.head.line,V.anchor.line),Math.max(V.head.ch,V.anchor.ch)+1),re=Math.abs(V.head.line-V.anchor.line)+1):V.head.line>=V.anchor.line?j=St(V.head,0,1):j=new a(V.anchor.line,0)}else if(L=="inplace"){if(R.visualMode)return}else L=="lastEdit"&&(j=En(k)||j);k.setOption("disableInput",!1),E&&E.replace?(k.toggleOverwrite(!0),k.setOption("keyMap","vim-replace"),l.signal(k,"vim-mode-change",{mode:"replace"})):(k.toggleOverwrite(!1),k.setOption("keyMap","vim-insert"),l.signal(k,"vim-mode-change",{mode:"insert"})),Ee.macroModeState.isPlaying||(k.on("change",gn),R.insertEnd&&R.insertEnd.clear(),R.insertEnd=k.setBookmark(j,{insertLeft:!0}),l.on(k.getInputField(),"keydown",lr)),R.visualMode&&mt(k),z(k,j,re)}},toggleVisualMode:function(k,E,R){var L=E.repeat,V=k.getCursor(),j;if(R.visualMode)R.visualLine!=!!E.linewise||R.visualBlock!=!!E.blockwise?(R.visualLine=!!E.linewise,R.visualBlock=!!E.blockwise,l.signal(k,"vim-mode-change",{mode:"visual",subMode:R.visualLine?"linewise":R.visualBlock?"blockwise":""}),Re(k)):mt(k);else{R.visualMode=!0,R.visualLine=!!E.linewise,R.visualBlock=!!E.blockwise,j=st(k,new a(V.line,V.ch+L-1));var re=o(k,V,j);R.sel={anchor:re.start,head:re.end},l.signal(k,"vim-mode-change",{mode:"visual",subMode:R.visualLine?"linewise":R.visualBlock?"blockwise":""}),Re(k),bn(k,R,"<",Ot(V,j)),bn(k,R,">",Xt(V,j))}},reselectLastSelection:function(k,E,R){var L=R.lastSelection;if(R.visualMode&&Ae(k,R),L){var V=L.anchorMark.find(),j=L.headMark.find();if(!V||!j)return;R.sel={anchor:V,head:j},R.visualMode=!0,R.visualLine=L.visualLine,R.visualBlock=L.visualBlock,Re(k),bn(k,R,"<",Ot(V,j)),bn(k,R,">",Xt(V,j)),l.signal(k,"vim-mode-change",{mode:"visual",subMode:R.visualLine?"linewise":R.visualBlock?"blockwise":""})}},joinLines:function(k,E,R){var L,V;if(R.visualMode){if(L=k.getCursor("anchor"),V=k.getCursor("head"),Ke(V,L)){var j=V;V=L,L=j}V.ch=$t(k,V.line)-1}else{var re=Math.max(E.repeat,2);L=k.getCursor(),V=st(k,new a(L.line+re-1,1/0))}for(var oe=0,he=L.line;he<V.line;he++){oe=$t(k,L.line);var be="",ye=0;if(!E.keepSpaces){var Ce=k.getLine(L.line+1);ye=Ce.search(/\S/),ye==-1?ye=Ce.length:be=" "}k.replaceRange(be,new a(L.line,oe),new a(L.line+1,ye))}var xe=st(k,new a(L.line,oe));R.visualMode&&mt(k,!1),k.setCursor(xe)},newLineAndEnterInsertMode:function(k,E,R){R.insertMode=!0;var L=vt(k.getCursor());if(L.line===k.firstLine()&&!E.after)k.replaceRange(`
`,new a(k.firstLine(),0)),k.setCursor(k.firstLine(),0);else{L.line=E.after?L.line:L.line-1,L.ch=$t(k,L.line),k.setCursor(L);var V=l.commands.newlineAndIndentContinueComment||l.commands.newlineAndIndent;V(k)}this.enterInsertMode(k,{repeat:E.repeat},R)},paste:function(k,E,R){var L=Ee.registerController.getRegister(E.registerName);if(E.registerName==="+")navigator.clipboard.readText().then(j=>{this.continuePaste(k,E,R,j,L)});else{var V=L.toString();this.continuePaste(k,E,R,V,L)}},continuePaste:function(k,E,R,L,V){var j=vt(k.getCursor());if(L){if(E.matchIndent){var re=k.getOption("tabSize"),oe=function(Qt){var rn=Qt.split("	").length-1,xn=Qt.split(" ").length-1;return rn*re+xn*1},he=k.getLine(k.getCursor().line),be=oe(he.match(/^\s*/)[0]),ye=L.replace(/\n$/,""),Ce=L!==ye,xe=oe(L.match(/^\s*/)[0]),L=ye.replace(/^\s*/gm,function(Qt){var rn=be+(oe(Qt)-xe);if(rn<0)return"";if(k.getOption("indentWithTabs")){var xn=Math.floor(rn/re);return Array(xn+1).join("	")}else return Array(rn+1).join(" ")});L+=Ce?`
`:""}E.repeat>1&&(L=Array(E.repeat+1).join(L));var Se=V.linewise,ve=V.blockwise,$e=ve?L.split(`
`):void 0;if($e){Se&&$e.pop();for(var Le=0;Le<$e.length;Le++)$e[Le]=$e[Le]==""?" ":$e[Le];j.ch+=E.after?1:0,j.ch=Math.min($t(k,j.line),j.ch)}else Se?R.visualMode?L=R.visualLine?L.slice(0,-1):`
`+L.slice(0,L.length-1)+`
`:E.after?(L=`
`+L.slice(0,L.length-1),j.ch=$t(k,j.line)):j.ch=0:j.ch+=E.after?1:0;var Ue;if(R.visualMode){R.lastPastedText=L;var Ie,et=pe(k),ut=et[0],ct=et[1],Ct=k.getSelection(),xt=k.listSelections(),yt=new Array(xt.length).join("1").split("1");R.lastSelection&&(Ie=R.lastSelection.headMark.find()),Ee.registerController.unnamedRegister.setText(Ct),ve?(k.replaceSelections(yt),ct=new a(ut.line+L.length-1,ut.ch),k.setCursor(ut),K(k,ct),k.replaceSelections(L),Ue=ut):R.visualBlock?(k.replaceSelections(yt),k.setCursor(ut),k.replaceRange(L,ut,ut),Ue=ut):(k.replaceRange(L,ut,ct),Ue=k.posFromIndex(k.indexFromPos(ut)+L.length-1)),Ie&&(R.lastSelection.headMark=k.setBookmark(Ie)),Se&&(Ue.ch=0)}else if(ve&&$e){k.setCursor(j);for(var Le=0;Le<$e.length;Le++){var Je=j.line+Le;Je>k.lastLine()&&k.replaceRange(`
`,new a(Je,0));var At=$t(k,Je);At<j.ch&&N(k,Je,j.ch)}k.setCursor(j),K(k,new a(j.line+$e.length-1,j.ch)),k.replaceSelections($e),Ue=j}else if(k.replaceRange(L,j),Se){var Je=E.after?j.line+1:j.line;Ue=new a(Je,Zt(k.getLine(Je)))}else Ue=vt(j),/\n/.test(L)||(Ue.ch+=L.length-(E.after?1:0));R.visualMode&&mt(k,!1),k.setCursor(Ue)}},undo:function(k,E){k.operation(function(){Ft(k,l.commands.undo,E.repeat)(),k.setCursor(st(k,k.getCursor("start")))})},redo:function(k,E){Ft(k,l.commands.redo,E.repeat)()},setRegister:function(k,E,R){R.inputState.registerName=E.selectedCharacter},insertRegister:function(k,E,R){var L=E.selectedCharacter,V=Ee.registerController.getRegister(L),j=V&&V.toString();j&&k.replaceSelection(j)},oneNormalCommand:function(k,E,R){it(k,!0),R.insertModeReturn=!0,l.on(k,"vim-command-done",function L(){R.visualMode||(R.insertModeReturn&&(R.insertModeReturn=!1,R.insertMode||Qe.enterInsertMode(k,{},R)),l.off(k,"vim-command-done",L))})},setMark:function(k,E,R){var L=E.selectedCharacter;L&&bn(k,R,L,k.getCursor())},replace:function(k,E,R){var L=E.selectedCharacter||"",V=k.getCursor(),j,re,oe=k.listSelections();if(R.visualMode)V=k.getCursor("start"),re=k.getCursor("end");else{var he=k.getLine(V.line);j=V.ch+E.repeat,j>he.length&&(j=he.length),re=new a(V.line,j)}var be=o(k,V,re);if(V=be.start,re=be.end,L==`
`)R.visualMode||k.replaceRange("",V,re),(l.commands.newlineAndIndentContinueComment||l.commands.newlineAndIndent)(k);else{var ye=k.getRange(V,re);if(ye=ye.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,L),ye=ye.replace(/[^\n]/g,L),R.visualBlock){var Ce=new Array(k.getOption("tabSize")+1).join(" ");ye=k.getSelection(),ye=ye.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,L);var xe=ye.replace(/\t/g,Ce).replace(/[^\n]/g,L).split(`
`);k.replaceSelections(xe)}else k.replaceRange(ye,V,re);R.visualMode?(V=Ke(oe[0].anchor,oe[0].head)?oe[0].anchor:oe[0].head,k.setCursor(V),mt(k,!1)):k.setCursor(St(re,0,-1))}},incrementNumberToken:function(k,E){for(var R=k.getCursor(),L=k.getLine(R.line),V=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,j,re,oe,he;(j=V.exec(L))!==null&&(re=j.index,oe=re+j[0].length,!(R.ch<oe)););if(!(!E.backtrack&&oe<=R.ch)){if(j){var be=j[2]||j[4],ye=j[3]||j[5],Ce=E.increase?1:-1,xe={"0b":2,0:8,"":10,"0x":16}[be.toLowerCase()],Se=parseInt(j[1]+ye,xe)+Ce*E.repeat;he=Se.toString(xe);var ve=be?new Array(ye.length-he.length+1+j[1].length).join("0"):"";he.charAt(0)==="-"?he="-"+be+ve+he.substr(1):he=be+ve+he;var $e=new a(R.line,re),Le=new a(R.line,oe);k.replaceRange(he,$e,Le)}else return;k.setCursor(new a(R.line,re+he.length-1))}},repeatLastEdit:function(k,E,R){var L=R.lastEditInputState;if(L){var V=E.repeat;V&&E.repeatIsExplicit?L.repeatOverride=V:V=L.repeatOverride||V,cr(k,R,V,!1)}},indent:function(k,E){k.indentLine(k.getCursor().line,E.indentRight)},exitInsertMode:function(k,E){it(k)}};function Tt(k,E){Qe[k]=E}function st(k,E,R){var L=k.state.vim,V=L.insertMode||L.visualMode,j=Math.min(Math.max(k.firstLine(),E.line),k.lastLine()),re=k.getLine(j),oe=re.length-1+ +!!V,he=Math.min(Math.max(0,E.ch),oe),be=re.charCodeAt(he);if(56320<=be&&be<=57343){var ye=1;R&&R.line==j&&R.ch>he&&(ye=-1),he+=ye,he>oe&&(he-=2)}return new a(j,he)}function tn(k){var E={};for(var R in k)Object.prototype.hasOwnProperty.call(k,R)&&(E[R]=k[R]);return E}function St(k,E,R){return typeof E=="object"&&(R=E.ch,E=E.line),new a(k.line+E,k.ch+R)}function Ht(k,E,R,L){L.operator&&(R="operatorPending");for(var V,j=[],re=[],oe=kt?E.length-d:0,he=oe;he<E.length;he++){var be=E[he];R=="insert"&&be.context!="insert"||be.context&&be.context!=R||L.operator&&be.type=="action"||!(V=wn(k,be.keys))||(V=="partial"&&j.push(be),V=="full"&&re.push(be))}return{partial:j,full:re}}function wn(k,E){const R=E.slice(-11)=="<character>",L=E.slice(-10)=="<register>";if(R||L){var V=E.length-(R?11:10),j=k.slice(0,V),re=E.slice(0,V);return j==re&&k.length>V?"full":re.indexOf(j)==0?"partial":!1}else return k==E?"full":E.indexOf(k)==0?"partial":!1}function mn(k){var E=/^.*(<[^>]+>)$/.exec(k),R=E?E[1]:k.slice(-1);if(R.length>1)switch(R){case"<CR>":case"<S-CR>":R=`
`;break;case"<Space>":case"<S-Space>":R=" ";break;default:R="";break}return R}function Ft(k,E,R){return function(){for(var L=0;L<R;L++)E(k)}}function vt(k){return new a(k.line,k.ch)}function It(k,E){return k.ch==E.ch&&k.line==E.line}function Ke(k,E){return k.line<E.line||k.line==E.line&&k.ch<E.ch}function Ot(k,E){return arguments.length>2&&(E=Ot.apply(void 0,Array.prototype.slice.call(arguments,1))),Ke(k,E)?k:E}function Xt(k,E){return arguments.length>2&&(E=Xt.apply(void 0,Array.prototype.slice.call(arguments,1))),Ke(k,E)?E:k}function an(k,E,R){var L=Ke(k,E),V=Ke(E,R);return L&&V}function $t(k,E){return k.getLine(E).length}function On(k){return k.trim?k.trim():k.replace(/^\s+|\s+$/g,"")}function Cn(k){return k.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function N(k,E,R){var L=$t(k,E),V=new Array(R-L+1).join(" ");k.setCursor(new a(E,L)),k.replaceRange(V,k.getCursor())}function K(k,E){var R=[],L=k.listSelections(),V=vt(k.clipPos(E)),j=!It(E,V),re=k.getCursor("head"),oe=ee(L,re),he=It(L[oe].head,L[oe].anchor),be=L.length-1,ye=be-oe>oe?be:0,Ce=L[ye].anchor,xe=Math.min(Ce.line,V.line),Se=Math.max(Ce.line,V.line),ve=Ce.ch,$e=V.ch,Le=L[ye].head.ch-ve,Ue=$e-ve;Le>0&&Ue<=0?(ve++,j||$e--):Le<0&&Ue>=0?(ve--,he||$e++):Le<0&&Ue==-1&&(ve--,$e++);for(var Ie=xe;Ie<=Se;Ie++){var et={anchor:new a(Ie,ve),head:new a(Ie,$e)};R.push(et)}return k.setSelections(R),E.ch=$e,Ce.ch=ve,Ce}function z(k,E,R){for(var L=[],V=0;V<R;V++){var j=St(E,V,0);L.push({anchor:j,head:j})}k.setSelections(L,0)}function ee(k,E,R){for(var L=0;L<k.length;L++){var V=It(k[L].anchor,E),j=It(k[L].head,E);if(V||j)return L}return-1}function pe(k,E){var R=k.listSelections(),L=R[0],V=R[R.length-1],j=Ke(L.anchor,L.head)?L.anchor:L.head,re=Ke(V.anchor,V.head)?V.head:V.anchor;return[j,re]}function Ae(k,E){var R=E.sel.anchor,L=E.sel.head;E.lastPastedText&&(L=k.posFromIndex(k.indexFromPos(R)+E.lastPastedText.length),E.lastPastedText=void 0),E.lastSelection={anchorMark:k.setBookmark(R),headMark:k.setBookmark(L),anchor:vt(R),head:vt(L),visualMode:E.visualMode,visualLine:E.visualLine,visualBlock:E.visualBlock}}function De(k,E,R,L){var V=k.state.vim.sel,j=L?E:V.head,re=L?E:V.anchor,oe;return Ke(R,E)&&(oe=R,R=E,E=oe),Ke(j,re)?(j=Ot(E,j),re=Xt(re,R)):(re=Ot(E,re),j=Xt(j,R),j=St(j,0,-1),j.ch==-1&&j.line!=k.firstLine()&&(j=new a(j.line-1,$t(k,j.line-1)))),[re,j]}function Re(k,E,R){var L=k.state.vim;E=E||L.sel,R||(R=L.visualLine?"line":L.visualBlock?"block":"char");var V=Ne(k,E,R);k.setSelections(V.ranges,V.primary)}function Ne(k,E,R,L){var V=vt(E.head),j=vt(E.anchor);if(R=="char"){var re=!L&&!Ke(E.head,E.anchor)?1:0,oe=Ke(E.head,E.anchor)?1:0;return V=St(E.head,0,re),j=St(E.anchor,0,oe),{ranges:[{anchor:j,head:V}],primary:0}}else if(R=="line"){if(Ke(E.head,E.anchor))V.ch=0,j.ch=$t(k,j.line);else{j.ch=0;var he=k.lastLine();V.line>he&&(V.line=he),V.ch=$t(k,V.line)}return{ranges:[{anchor:j,head:V}],primary:0}}else if(R=="block"){var be=Math.min(j.line,V.line),ye=j.ch,Ce=Math.max(j.line,V.line),xe=V.ch;ye<xe?xe+=1:ye+=1;for(var Se=Ce-be+1,ve=V.line==be?0:Se-1,$e=[],Le=0;Le<Se;Le++)$e.push({anchor:new a(be+Le,ye),head:new a(be+Le,xe)});return{ranges:$e,primary:ve}}throw"never happens"}function ot(k){var E=k.getCursor("head");return k.getSelection().length==1&&(E=Ot(E,k.getCursor("anchor"))),E}function mt(k,E){var R=k.state.vim;E!==!1&&k.setCursor(st(k,R.sel.head)),Ae(k,R),R.visualMode=!1,R.visualLine=!1,R.visualBlock=!1,R.insertMode||l.signal(k,"vim-mode-change",{mode:"normal"})}function Yt(k,E,R){var L=k.getRange(E,R);if(/\n\s*$/.test(L)){var V=L.split(`
`);V.pop();for(var j=V.pop();V.length>0&&j&&fe(j);j=V.pop())R.line--,R.ch=0;j?(R.line--,R.ch=$t(k,R.line)):R.ch=0}}function bt(k,E,R){E.ch=0,R.ch=0,R.line++}function Zt(k){if(!k)return 0;var E=k.search(/\S/);return E==-1?k.length:E}function nn(k,{inclusive:E,innerWord:R,bigWord:L,noSymbol:V,multiline:j},re){var oe=re||ot(k),he=k.getLine(oe.line),be=he,ye=oe.line,Ce=ye,xe=oe.ch,Se,ve=V?A[0]:F[0];if(R&&/\s/.test(he.charAt(xe)))ve=function(ut){return/\s/.test(ut)};else{for(;!ve(he.charAt(xe));)if(xe++,xe>=he.length){if(!j)return null;xe--,Se=Zn(k,oe,!0,L,!0);break}L?ve=F[0]:(ve=A[0],ve(he.charAt(xe))||(ve=A[1]))}for(var $e=xe,Le=xe;ve(he.charAt(Le))&&Le>=0;)Le--;if(Le++,Se)$e=Se.to,Ce=Se.line,be=k.getLine(Ce),!be&&$e==0&&$e++;else for(;ve(he.charAt($e))&&$e<he.length;)$e++;if(E){var Ue=$e,Ie=oe.ch<=Le&&/\s/.test(he.charAt(oe.ch));if(!Ie)for(;/\s/.test(be.charAt($e))&&$e<be.length;)$e++;if(Ue==$e||Ie){for(var et=Le;/\s/.test(he.charAt(Le-1))&&Le>0;)Le--;!Le&&!Ie&&(Le=et)}}return{start:new a(ye,Le),end:new a(Ce,$e)}}function Ye(k,E,R){var L=E;if(!l.findMatchingTag||!l.findEnclosingTag)return{start:L,end:L};var V=l.findMatchingTag(k,E)||l.findEnclosingTag(k,E);return!V||!V.open||!V.close?{start:L,end:L}:R?{start:V.open.from,end:V.close.to}:{start:V.open.to,end:V.close.from}}function jt(k,E,R){It(E,R)||Ee.jumpList.add(k,E,R)}function Vt(k,E){Ee.lastCharacterSearch.increment=k,Ee.lastCharacterSearch.forward=E.forward,Ee.lastCharacterSearch.selectedCharacter=E.selectedCharacter}var Sn={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},Pn={bracket:{isComplete:function(k){if(k.nextCh===k.symb){if(k.depth++,k.depth>=1)return!0}else k.nextCh===k.reverseSymb&&k.depth--;return!1}},section:{init:function(k){k.curMoveThrough=!0,k.symb=(k.forward?"]":"[")===k.symb?"{":"}"},isComplete:function(k){return k.index===0&&k.nextCh===k.symb}},comment:{isComplete:function(k){var E=k.lastCh==="*"&&k.nextCh==="/";return k.lastCh=k.nextCh,E}},method:{init:function(k){k.symb=k.symb==="m"?"{":"}",k.reverseSymb=k.symb==="{"?"}":"{"},isComplete:function(k){return k.nextCh===k.symb}},preprocess:{init:function(k){k.index=0},isComplete:function(k){if(k.nextCh==="#"){var E=k.lineText.match(/^#(\w+)/)?.[1];if(E==="endif"){if(k.forward&&k.depth===0)return!0;k.depth++}else if(E==="if"){if(!k.forward&&k.depth===0)return!0;k.depth--}if(E==="else"&&k.depth===0)return!0}return!1}}};function dr(k,E,R,L){var V=vt(k.getCursor()),j=R?1:-1,re=R?k.lineCount():-1,oe=V.ch,he=V.line,be=k.getLine(he),ye={lineText:be,nextCh:be.charAt(oe),lastCh:null,index:oe,symb:L,reverseSymb:(R?{")":"(","}":"{"}:{"(":")","{":"}"})[L],forward:R,depth:0,curMoveThrough:!1},Ce=Sn[L];if(!Ce)return V;var xe=Pn[Ce].init,Se=Pn[Ce].isComplete;for(xe&&xe(ye);he!==re&&E;){if(ye.index+=j,ye.nextCh=ye.lineText.charAt(ye.index),!ye.nextCh){if(he+=j,ye.lineText=k.getLine(he)||"",j>0)ye.index=0;else{var ve=ye.lineText.length;ye.index=ve>0?ve-1:0}ye.nextCh=ye.lineText.charAt(ye.index)}Se(ye)&&(V.line=he,V.ch=ye.index,E--)}return ye.nextCh||ye.curMoveThrough?new a(he,ye.index):V}function Zn(k,E,R,L,V){var j=E.line,re=E.ch,oe=k.getLine(j),he=R?1:-1,be=L?F:A;if(V&&oe==""){if(j+=he,oe=k.getLine(j),!te(k,j))return null;re=R?0:oe.length}for(;;){if(V&&oe=="")return{from:0,to:0,line:j};for(var ye=he>0?oe.length:-1,Ce=ye,xe=ye;re!=ye;){for(var Se=!1,ve=0;ve<be.length&&!Se;++ve)if(be[ve](oe.charAt(re))){for(Ce=re;re!=ye&&be[ve](oe.charAt(re));)re+=he;if(xe=re,Se=Ce!=xe,Ce==E.ch&&j==E.line&&xe==Ce+he)continue;return{from:Math.min(Ce,xe+1),to:Math.max(Ce,xe),line:j}}Se||(re+=he)}if(j+=he,!te(k,j))return null;oe=k.getLine(j),re=he>0?0:oe.length}}function fr(k,E,R,L,V,j){var re=vt(E),oe=[];(L&&!V||!L&&V)&&R++;for(var he=!(L&&V),be=0;be<R;be++){var ye=Zn(k,E,L,j,he);if(!ye){var Ce=$t(k,k.lastLine());oe.push(L?{line:k.lastLine(),from:Ce,to:Ce}:{line:0,from:0,to:0});break}oe.push(ye),E=new a(ye.line,L?ye.to-1:ye.from)}var xe=oe.length!=R,Se=oe[0],ve=oe.pop();return L&&!V?(!xe&&(Se.from!=re.ch||Se.line!=re.line)&&(ve=oe.pop()),ve&&new a(ve.line,ve.from)):L&&V?ve&&new a(ve.line,ve.to-1):!L&&V?(!xe&&(Se.to!=re.ch||Se.line!=re.line)&&(ve=oe.pop()),ve&&new a(ve.line,ve.to)):ve&&new a(ve.line,ve.from)}function Vn(k,E,R,L,V){var j=E,re=new a(j.line+R.repeat-1,1/0),oe=k.clipPos(re);return oe.ch--,V||(L.lastHPos=1/0,L.lastHSPos=k.charCoords(oe,"div").left),re}function $n(k,E,R,L,V){if(L){for(var j=V||k.getCursor(),re=j.ch,oe,he=0;he<E;he++){var be=k.getLine(j.line);if(oe=gr(re,be,L,R),oe==-1)return;re=oe}if(oe!=null)return new a(k.getCursor().line,oe)}}function mr(k,E){var R=k.getCursor().line;return st(k,new a(R,E-1))}function bn(k,E,R,L){!Pe(R,$)&&!I.test(R)||(E.marks[R]&&E.marks[R].clear(),E.marks[R]=k.setBookmark(L))}function gr(k,E,R,L,V){var j;return L?j=E.indexOf(R,k+1):j=E.lastIndexOf(R,k-1),j}function Qn(k,E,R,L,V){var j=E.line,re=k.firstLine(),oe=k.lastLine(),he,be,ye=j;function Ce(Le){return!k.getLine(Le)}function xe(Le,Ue,Ie){return Ie?Ce(Le)!=Ce(Le+Ue):!Ce(Le)&&Ce(Le+Ue)}if(L){for(;re<=ye&&ye<=oe&&R>0;)xe(ye,L)&&R--,ye+=L;return{start:new a(ye,0),end:E}}var Se=k.state.vim;if(Se.visualLine&&xe(j,1,!0)){var ve=Se.sel.anchor;xe(ve.line,-1,!0)&&(!V||ve.line!=j)&&(j+=1)}var $e=Ce(j);for(ye=j;ye<=oe&&R;ye++)xe(ye,1,!0)&&(!V||Ce(ye)!=$e)&&R--;for(be=new a(ye,0),ye>oe&&!$e?$e=!0:V=!1,ye=j;ye>re&&!((!V||Ce(ye)==$e||ye==j)&&xe(ye,-1,!0));ye--);return he=new a(ye,0),{start:he,end:be}}function Xn(k,E,R,L,V){function j(be){be.line!==null&&(be.pos+be.dir<0||be.pos+be.dir>=be.line.length?be.line=null:be.pos+=be.dir)}function re(be,ye,Ce,xe){var Se=be.getLine(ye),ve={line:Se,ln:ye,pos:Ce,dir:xe};if(ve.line==="")return{ln:ve.ln,pos:ve.pos};var $e=ve.pos;for(j(ve);ve.line!==null;){if($e=ve.pos,_e(ve.line[ve.pos]))if(V){for(j(ve);ve.line!==null&&fe(ve.line[ve.pos]);)$e=ve.pos,j(ve);return{ln:ve.ln,pos:$e+1}}else return{ln:ve.ln,pos:ve.pos+1};j(ve)}return{ln:ve.ln,pos:$e+1}}function oe(be,ye,Ce,xe){var Se=be.getLine(ye),ve={line:Se,ln:ye,pos:Ce,dir:xe};if(ve.line==="")return{ln:ve.ln,pos:ve.pos};var $e=ve.pos;for(j(ve);ve.line!==null;){if(!fe(ve.line[ve.pos])&&!_e(ve.line[ve.pos]))$e=ve.pos;else if(_e(ve.line[ve.pos]))return V?fe(ve.line[ve.pos+1])?{ln:ve.ln,pos:ve.pos+1}:{ln:ve.ln,pos:$e}:{ln:ve.ln,pos:$e};j(ve)}return ve.line=Se,V&&fe(ve.line[ve.pos])?{ln:ve.ln,pos:ve.pos}:{ln:ve.ln,pos:$e}}for(var he={ln:E.line,pos:E.ch};R>0;)L<0?he=oe(k,he.ln,he.pos,L):he=re(k,he.ln,he.pos,L),R--;return new a(he.ln,he.pos)}function yr(k,E,R,L){function V(he,be){if(be.line!==null)if(be.pos+be.dir<0||be.pos+be.dir>=be.line.length){if(be.ln+=be.dir,!te(he,be.ln)){be.line=null;return}be.line=he.getLine(be.ln),be.pos=be.dir>0?0:be.line.length-1}else be.pos+=be.dir}function j(he,be,ye,Ce){var Le=he.getLine(be),xe=Le==="",Se={line:Le,ln:be,pos:ye,dir:Ce},ve={ln:Se.ln,pos:Se.pos},$e=Se.line==="";for(V(he,Se);Se.line!==null;){if(ve.ln=Se.ln,ve.pos=Se.pos,Se.line===""&&!$e)return{ln:Se.ln,pos:Se.pos};if(xe&&Se.line!==""&&!fe(Se.line[Se.pos]))return{ln:Se.ln,pos:Se.pos};_e(Se.line[Se.pos])&&!xe&&(Se.pos===Se.line.length-1||fe(Se.line[Se.pos+1]))&&(xe=!0),V(he,Se)}var Le=he.getLine(ve.ln);ve.pos=0;for(var Ue=Le.length-1;Ue>=0;--Ue)if(!fe(Le[Ue])){ve.pos=Ue;break}return ve}function re(he,be,ye,Ce){var Le=he.getLine(be),xe={line:Le,ln:be,pos:ye,dir:Ce},Se=xe.ln,ve=null,$e=xe.line==="";for(V(he,xe);xe.line!==null;){if(xe.line===""&&!$e)return ve!==null?{ln:Se,pos:ve}:{ln:xe.ln,pos:xe.pos};if(_e(xe.line[xe.pos])&&ve!==null&&!(xe.ln===Se&&xe.pos+1===ve))return{ln:Se,pos:ve};xe.line!==""&&!fe(xe.line[xe.pos])&&($e=!1,Se=xe.ln,ve=xe.pos),V(he,xe)}var Le=he.getLine(Se);ve=0;for(var Ue=0;Ue<Le.length;++Ue)if(!fe(Le[Ue])){ve=Ue;break}return{ln:Se,pos:ve}}for(var oe={ln:E.line,pos:E.ch};R>0;)L<0?oe=re(k,oe.ln,oe.pos,L):oe=j(k,oe.ln,oe.pos,L),R--;return new a(oe.ln,oe.pos)}function jn(k,E,R,L){var V=E,j={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"<":/[<>]/,">":/[<>]/}[R],re={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","<":"<",">":"<"}[R],oe=k.getLine(V.line).charAt(V.ch),he=oe===re?1:0,be=k.scanForBracket(new a(V.line,V.ch+he),-1,void 0,{bracketRegex:j}),ye=k.scanForBracket(new a(V.line,V.ch+he),1,void 0,{bracketRegex:j});if(!be||!ye)return null;var Ce=be.pos,xe=ye.pos;if(Ce.line==xe.line&&Ce.ch>xe.ch||Ce.line>xe.line){var Se=Ce;Ce=xe,xe=Se}return L?xe.ch+=1:Ce.ch+=1,{start:Ce,end:xe}}function br(k,E,R,L){var V=vt(E),j=k.getLine(V.line),re=j.split(""),oe,he,be,ye,Ce=re.indexOf(R);if(V.ch<Ce)V.ch=Ce;else if(Ce<V.ch&&re[V.ch]==R){var xe=/string/.test(k.getTokenTypeAt(St(E,0,1))),Se=/string/.test(k.getTokenTypeAt(E)),ve=xe&&!Se;ve||(he=V.ch,--V.ch)}if(re[V.ch]==R&&!he)oe=V.ch+1;else for(be=V.ch;be>-1&&!oe;be--)re[be]==R&&(oe=be+1);if(oe&&!he)for(be=oe,ye=re.length;be<ye&&!he;be++)re[be]==R&&(he=be);return!oe||!he?{start:V,end:V}:(L&&(--oe,++he),{start:new a(V.line,oe),end:new a(V.line,he)})}Fe("pcre",!0,"boolean");class _r{constructor(){this.highlightTimeout}getQuery(){return Ee.query}setQuery(E){Ee.query=E}getOverlay(){return this.searchOverlay}setOverlay(E){this.searchOverlay=E}isReversed(){return Ee.isReversed}setReversed(E){Ee.isReversed=E}getScrollbarAnnotate(){return this.annotate}setScrollbarAnnotate(E){this.annotate=E}}function ln(k){var E=k.state.vim;return E.searchState_||(E.searchState_=new _r)}function vr(k){return Wn(k,"/")}function Or(k){return Un(k,"/")}function Wn(k,E){var R=Un(k,E);if(!R.length)return[];var L=[];if(R[0]===0){for(var V=0;V<R.length;V++)typeof R[V]=="number"&&L.push(k.substring(R[V]+1,R[V+1]));return L}}function Un(k,E){E||(E="/");for(var R=!1,L=[],V=0;V<k.length;V++){var j=k.charAt(V);!R&&j==E&&L.push(V),R=!R&&j=="\\"}return L}function xr(k){var E={V:"|(){+?*.[$^",M:"|(){+?*.[",m:"|(){+?",v:"<>"},R={">":"(?<=[\\w])(?=[^\\w]|$)","<":"(?<=[^\\w]|^)(?=[\\w])"},L=E.m,V=k.replace(/\\.|[\[|(){+*?.$^<>]/g,function(re){if(re[0]==="\\"){var oe=re[1];return oe==="}"||L.indexOf(oe)!=-1?oe:oe in E?(L=E[oe],""):oe in R?R[oe]:re}else return L.indexOf(re)!=-1?R[re]||"\\"+re:re}),j=V.indexOf("\\zs");return j!=-1&&(V="(?<="+V.slice(0,j)+")"+V.slice(j+3)),j=V.indexOf("\\ze"),j!=-1&&(V=V.slice(0,j)+"(?="+V.slice(j+3)+")"),V}var zn={"\\n":`
`,"\\r":"\r","\\t":"	"};function wr(k){for(var E=!1,R=[],L=-1;L<k.length;L++){var V=k.charAt(L)||"",j=k.charAt(L+1)||"";zn[V+j]?(R.push(zn[V+j]),L++):E?(R.push(V),E=!1):V==="\\"?(E=!0,q(j)||j==="$"?R.push("$"):j!=="/"&&j!=="\\"&&R.push("\\")):(V==="$"&&R.push("$"),R.push(V),j==="/"&&R.push("\\"))}return R.join("")}var qn={"\\/":"/","\\\\":"\\","\\n":`
`,"\\r":"\r","\\t":"	","\\&":"&"};function Cr(k){for(var E=new l.StringStream(k),R=[];!E.eol();){for(;E.peek()&&E.peek()!="\\";)R.push(E.next());var L=!1;for(var V in qn)if(E.match(V,!0)){L=!0,R.push(qn[V]);break}L||R.push(E.next())}return R.join("")}function Hn(k,E,R){var L=Ee.registerController.getRegister("/");L.setText(k);var V=Or(k),j,re;if(!V.length)j=k;else{j=k.substring(0,V[0]);var oe=k.substring(V[0]);re=oe.indexOf("i")!=-1}if(!j)return null;ke("pcre")||(j=xr(j)),R&&(E=/^[^A-Z]*$/.test(j));var he=new RegExp(j,E||re?"im":"m");return he}function cn(k){typeof k=="string"&&(k=document.createElement(k));for(var E=1;E<arguments.length;E++){var R=arguments[E];if(R)if(typeof R!="object"&&(R=document.createTextNode(R)),R.nodeType)k.appendChild(R);else for(var L in R)Object.prototype.hasOwnProperty.call(R,L)&&(L[0]==="$"?k.style[L.slice(1)]=R[L]:typeof R[L]=="function"?k[L]=R[L]:k.setAttribute(L,R[L]))}return k}function _t(k,E,R){var L=cn("div",{$color:"red",$whiteSpace:"pre",class:"cm-vim-message"},E);k.openNotification?R?(L=cn("div",{},L,cn("div",{},"Press ENTER or type command to continue")),k.state.closeVimNotification&&k.state.closeVimNotification(),k.state.closeVimNotification=k.openNotification(L,{bottom:!0,duration:0})):k.openNotification(L,{bottom:!0,duration:15e3}):alert(L.innerText)}function Yn(k,E){return cn("div",{$display:"flex",$flex:1},cn("span",{$fontFamily:"monospace",$whiteSpace:"pre",$flex:1,$display:"flex"},k,cn("input",{type:"text",autocorrect:"off",autocapitalize:"off",spellcheck:"false",$flex:1})),E&&cn("span",{$color:"#888"},E))}function Fn(k,E){if(Xe.length){E.value||(E.value=""),je=E;return}var R=Yn(E.prefix,E.desc);if(k.openDialog)k.openDialog(R,E.onClose,{onKeyDown:E.onKeyDown,onKeyUp:E.onKeyUp,bottom:!0,selectValueOnOpen:!1,value:E.value});else{var L="";typeof E.prefix!="string"&&E.prefix&&(L+=E.prefix.textContent),E.desc&&(L+=" "+E.desc),E.onClose?.(prompt(L,""))}}function Sr(k,E){return k instanceof RegExp&&E instanceof RegExp?k.flags==E.flags&&k.source==E.source:!1}function Mn(k,E,R,L){if(E){var V=ln(k),j=Hn(E,!!R,!!L);if(j)return Gn(k,j),Sr(j,V.getQuery())||V.setQuery(j),j}}function kr(k){if(k.source.charAt(0)=="^")var E=!0;return{token:function(R){if(E&&!R.sol()){R.skipToEnd();return}var L=R.match(k,!1);if(L)return L[0].length==0?(R.next(),"searching"):!R.sol()&&(R.backUp(1),!k.exec(R.next()+L[0]))?(R.next(),null):(R.match(k),"searching");for(;!R.eol()&&(R.next(),!R.match(k,!1)););},query:k}}var An=0;function Gn(k,E){clearTimeout(An);var R=ln(k);R.highlightTimeout=An,An=setTimeout(function(){if(k.state.vim){var L=ln(k);L.highlightTimeout=void 0;var V=L.getOverlay();(!V||E!=V.query)&&(V&&k.removeOverlay(V),V=kr(E),k.addOverlay(V),k.showMatchesOnScrollbar&&(L.getScrollbarAnnotate()&&L.getScrollbarAnnotate().clear(),L.setScrollbarAnnotate(k.showMatchesOnScrollbar(E))),L.setOverlay(V))}},50)}function Kn(k,E,R,L){return k.operation(function(){L===void 0&&(L=1);for(var V=k.getCursor(),j=k.getSearchCursor(R,V),re=0;re<L;re++){var oe=j.find(E);if(re==0&&oe&&It(j.from(),V)){var he=E?j.from():j.to();oe=j.find(E),oe&&!oe[0]&&It(j.from(),he)&&k.getLine(he.line).length==he.ch&&(oe=j.find(E))}if(!oe&&(j=k.getSearchCursor(R,E?new a(k.lastLine()):new a(k.firstLine(),0)),!j.find(E)))return}return j.from()})}function Pr(k,E,R,L,V){return k.operation(function(){L===void 0&&(L=1);var j=k.getCursor(),re=k.getSearchCursor(R,j),oe=re.find(!E);!V.visualMode&&oe&&It(re.from(),j)&&re.find(!E);for(var he=0;he<L;he++)if(oe=re.find(E),!oe&&(re=k.getSearchCursor(R,E?new a(k.lastLine()):new a(k.firstLine(),0)),!re.find(E)))return;var be=re.from(),ye=re.to();return be&&ye&&[be,ye]})}function me(k){var E=ln(k);E.highlightTimeout&&(clearTimeout(E.highlightTimeout),E.highlightTimeout=void 0),k.removeOverlay(ln(k).getOverlay()),E.setOverlay(null),E.getScrollbarAnnotate()&&(E.getScrollbarAnnotate().clear(),E.setScrollbarAnnotate(null))}function tt(k,E,R){return typeof k!="number"&&(k=k.line),E instanceof Array?Pe(k,E):typeof R=="number"?k>=E&&k<=R:k==E}function vn(k){var E=k.getScrollInfo(),R=6,L=10,V=k.coordsChar({left:0,top:R+E.top},"local"),j=E.clientHeight-L+E.top,re=k.coordsChar({left:0,top:j},"local");return{top:V.line,bottom:re.line}}function Kt(k,E,R){if(R=="'"||R=="`")return Ee.jumpList.find(k,-1)||new a(0,0);if(R==".")return En(k);var L=E.marks[R];return L&&L.find()}function En(k){if(k.getLastEditEnd)return k.getLastEditEnd();for(var E=k.doc.history.done,R=E.length;R--;)if(E[R].changes)return vt(E[R].changes[0].to)}class We{constructor(){this.commandMap_,this.buildCommandMap_()}processCommand(E,R,L){var V=this;E.operation(function(){E.curOp&&(E.curOp.isVimOp=!0),V._processCommand(E,R,L)})}_processCommand(E,R,L){var V=E.state.vim,j=Ee.registerController.getRegister(":"),re=j.toString(),oe=new l.StringStream(R);j.setText(R);var he=L||{};he.input=R;try{this.parseInput_(E,oe,he)}catch(Ce){throw _t(E,Ce+""),Ce}V.visualMode&&mt(E);var be,ye;if(!he.commandName)he.line!==void 0&&(ye="move");else if(be=this.matchCommand_(he.commandName),be){if(ye=be.name,be.excludeFromCommandHistory&&j.setText(re),this.parseCommandArgs_(oe,he,be),be.type=="exToKey"){ft(E,be.toKeys||"",be);return}else if(be.type=="exToEx"){this.processCommand(E,be.toInput||"");return}}if(!ye){_t(E,'Not an editor command ":'+R+'"');return}try{kn[ye](E,he),(!be||!be.possiblyAsync)&&he.callback&&he.callback()}catch(Ce){throw _t(E,Ce+""),Ce}}parseInput_(E,R,L){R.eatWhile(":"),R.eat("%")?(L.line=E.firstLine(),L.lineEnd=E.lastLine()):(L.line=this.parseLineSpec_(E,R),L.line!==void 0&&R.eat(",")&&(L.lineEnd=this.parseLineSpec_(E,R))),L.line==null?E.state.vim.visualMode?(L.selectionLine=Kt(E,E.state.vim,"<")?.line,L.selectionLineEnd=Kt(E,E.state.vim,">")?.line):L.selectionLine=E.getCursor().line:(L.selectionLine=L.line,L.selectionLineEnd=L.lineEnd);var V=R.match(/^(\w+|!!|@@|[!#&*<=>@~])/);return V?L.commandName=V[1]:L.commandName=(R.match(/.*/)||[""])[0],L}parseLineSpec_(E,R){var L=R.match(/^(\d+)/);if(L)return parseInt(L[1],10)-1;switch(R.next()){case".":return this.parseLineSpecOffset_(R,E.getCursor().line);case"$":return this.parseLineSpecOffset_(R,E.lastLine());case"'":var V=R.next()||"",j=Kt(E,E.state.vim,V);if(!j)throw new Error("Mark not set");return this.parseLineSpecOffset_(R,j.line);case"-":case"+":return R.backUp(1),this.parseLineSpecOffset_(R,E.getCursor().line);default:R.backUp(1);return}}parseLineSpecOffset_(E,R){var L=E.match(/^([+-])?(\d+)/);if(L){var V=parseInt(L[2],10);L[1]=="-"?R-=V:R+=V}return R}parseCommandArgs_(E,R,L){if(!E.eol()){R.argString=E.match(/.*/)?.[0];var V=L.argDelimiter||/\s+/,j=On(R.argString||"").split(V);j.length&&j[0]&&(R.args=j)}}matchCommand_(E){for(var R=E.length;R>0;R--){var L=E.substring(0,R);if(this.commandMap_[L]){var V=this.commandMap_[L];if(V.name.indexOf(E)===0)return V}}}buildCommandMap_(){this.commandMap_={};for(var E=0;E<f.length;E++){var R=f[E],L=R.shortName||R.name;this.commandMap_[L]=R}}map(E,R,L,V){if(E!=":"&&E.charAt(0)==":"){if(L)throw Error("Mode not supported for ex mappings");var j=E.substring(1);R!=":"&&R.charAt(0)==":"?this.commandMap_[j]={name:j,type:"exToEx",toInput:R.substring(1),user:!0}:this.commandMap_[j]={name:j,type:"exToKey",toKeys:R,user:!0}}else{var re={keys:E,type:"keyToKey",toKeys:R,noremap:!!V};L&&(re.context=L),un(re)}}unmap(E,R){if(E!=":"&&E.charAt(0)==":"){if(R)throw Error("Mode not supported for ex mappings");var L=E.substring(1);if(this.commandMap_[L]&&this.commandMap_[L].user)return delete this.commandMap_[L],!0}else for(var V=E,j=0;j<u.length;j++)if(V==u[j].keys&&u[j].context===R)return u.splice(j,1),Ln(V),!0}}var kn={colorscheme:function(k,E){if(!E.args||E.args.length<1){_t(k,k.getOption("theme"));return}k.setOption("theme",E.args[0])},map:function(k,E,R,L){var V=E.args;if(!V||V.length<2){k&&_t(k,"Invalid mapping: "+E.input);return}Jt.map(V[0],V[1],R,L)},imap:function(k,E){this.map(k,E,"insert")},nmap:function(k,E){this.map(k,E,"normal")},vmap:function(k,E){this.map(k,E,"visual")},omap:function(k,E){this.map(k,E,"operatorPending")},noremap:function(k,E){this.map(k,E,void 0,!0)},inoremap:function(k,E){this.map(k,E,"insert",!0)},nnoremap:function(k,E){this.map(k,E,"normal",!0)},vnoremap:function(k,E){this.map(k,E,"visual",!0)},onoremap:function(k,E){this.map(k,E,"operatorPending",!0)},unmap:function(k,E,R){var L=E.args;(!L||L.length<1||!Jt.unmap(L[0],R))&&k&&_t(k,"No such mapping: "+E.input)},mapclear:function(k,E){Me.mapclear()},imapclear:function(k,E){Me.mapclear("insert")},nmapclear:function(k,E){Me.mapclear("normal")},vmapclear:function(k,E){Me.mapclear("visual")},omapclear:function(k,E){Me.mapclear("operatorPending")},move:function(k,E){Ut.processCommand(k,k.state.vim,{keys:"",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:E.line+1})},set:function(k,E){var R=E.args,L=E.setCfg||{};if(!R||R.length<1){k&&_t(k,"Invalid mapping: "+E.input);return}var V=R[0].split("="),j=V.shift()||"",re=V.length>0?V.join("="):void 0,oe=!1,he=!1;if(j.charAt(j.length-1)=="?"){if(re)throw Error("Trailing characters: "+E.argString);j=j.substring(0,j.length-1),oe=!0}else j.charAt(j.length-1)=="!"&&(j=j.substring(0,j.length-1),he=!0);re===void 0&&j.substring(0,2)=="no"&&(j=j.substring(2),re=!1);var be=Oe[j]&&Oe[j].type=="boolean";if(be&&(he?re=!ke(j,k,L):re==null&&(re=!0)),!be&&re===void 0||oe){var ye=ke(j,k,L);ye instanceof Error?_t(k,ye.message):ye===!0||ye===!1?_t(k," "+(ye?"":"no")+j):_t(k,"  "+j+"="+ye)}else{var Ce=we(j,re,k,L);Ce instanceof Error&&_t(k,Ce.message)}},setlocal:function(k,E){E.setCfg={scope:"local"},this.set(k,E)},setglobal:function(k,E){E.setCfg={scope:"global"},this.set(k,E)},registers:function(k,E){var R=E.args,L=Ee.registerController.registers,V=`----------Registers----------

`;if(R)for(var oe=R.join(""),he=0;he<oe.length;he++){var j=oe.charAt(he);if(Ee.registerController.isValidRegister(j)){var be=L[j]||new Lt;V+='"'+j+"    "+be.toString()+`
`}}else for(var j in L){var re=L[j].toString();re.length&&(V+='"'+j+"    "+re+`
`)}_t(k,V,!0)},marks:function(k,E){var R=E.args,L=k.state.vim.marks,V=`-----------Marks-----------
mark	line	col

`;if(R)for(var oe=R.join(""),he=0;he<oe.length;he++){var j=oe.charAt(he),re=L[j]&&L[j].find();re&&(V+=j+"	"+re.line+"	"+re.ch+`
`)}else for(var j in L){var re=L[j]&&L[j].find();re&&(V+=j+"	"+re.line+"	"+re.ch+`
`)}_t(k,V,!0)},sort:function(k,E){var R,L,V,j,re;function oe(){if(E.argString){var yt=new l.StringStream(E.argString);if(yt.eat("!")&&(R=!0),yt.eol())return;if(!yt.eatSpace())return"Invalid arguments";var Je=yt.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!Je||!yt.eol())return"Invalid arguments";if(Je[1]){L=Je[1].indexOf("i")!=-1,V=Je[1].indexOf("u")!=-1;var At=Je[1].indexOf("d")!=-1||Je[1].indexOf("n")!=-1,en=Je[1].indexOf("x")!=-1,Qt=Je[1].indexOf("o")!=-1;if(Number(At)+Number(en)+Number(Qt)>1)return"Invalid arguments";j=At&&"decimal"||en&&"hex"||Qt&&"octal"}Je[2]&&(re=new RegExp(Je[2].substr(1,Je[2].length-2),L?"i":""))}}var he=oe();if(he){_t(k,he+": "+E.argString);return}var be=E.line||k.firstLine(),ye=E.lineEnd||E.line||k.lastLine();if(be==ye)return;var Ce=new a(be,0),xe=new a(ye,$t(k,ye)),Se=k.getRange(Ce,xe).split(`
`),ve=j=="decimal"?/(-?)([\d]+)/:j=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:j=="octal"?/([0-7]+)/:null,$e=j=="decimal"?10:j=="hex"?16:j=="octal"?8:void 0,Le=[],Ue=[];if(j||re)for(var Ie=0;Ie<Se.length;Ie++){var et=re?Se[Ie].match(re):null;et&&et[0]!=""?Le.push(et):ve&&ve.exec(Se[Ie])?Le.push(Se[Ie]):Ue.push(Se[Ie])}else Ue=Se;function ut(yt,Je){if(R){var At;At=yt,yt=Je,Je=At}L&&(yt=yt.toLowerCase(),Je=Je.toLowerCase());var en=ve&&ve.exec(yt),Qt=ve&&ve.exec(Je);if(!en||!Qt)return yt<Je?-1:1;var rn=parseInt((en[1]+en[2]).toLowerCase(),$e),xn=parseInt((Qt[1]+Qt[2]).toLowerCase(),$e);return rn-xn}function ct(yt,Je){if(R){var At;At=yt,yt=Je,Je=At}return L&&(yt[0]=yt[0].toLowerCase(),Je[0]=Je[0].toLowerCase()),yt[0]<Je[0]?-1:1}if(Le.sort(re?ct:ut),re)for(var Ie=0;Ie<Le.length;Ie++)Le[Ie]=Le[Ie].input;else j||Ue.sort(ut);if(Se=R?Le.concat(Ue):Ue.concat(Le),V){var Ct=Se,xt;Se=[];for(var Ie=0;Ie<Ct.length;Ie++)Ct[Ie]!=xt&&Se.push(Ct[Ie]),xt=Ct[Ie]}k.replaceRange(Se.join(`
`),Ce,xe)},vglobal:function(k,E){this.global(k,E)},normal:function(k,E){var R=!1,L=E.argString;if(L&&L[0]=="!"&&(L=L.slice(1),R=!0),L=L.trimStart(),!L){_t(k,"Argument is required.");return}var V=E.line;if(typeof V=="number")for(var j=isNaN(E.lineEnd)?V:E.lineEnd,re=V;re<=j;re++)k.setCursor(re,0),ft(k,E.argString.trimStart(),{noremap:R}),k.state.vim.insertMode&&it(k,!0);else ft(k,E.argString.trimStart(),{noremap:R}),k.state.vim.insertMode&&it(k,!0)},global:function(k,E){var R=E.argString;if(!R){_t(k,"Regular Expression missing from global");return}var L=E.commandName[0]==="v";R[0]==="!"&&E.commandName[0]==="g"&&(L=!0,R=R.slice(1));var V=E.line!==void 0?E.line:k.firstLine(),j=E.lineEnd||E.line||k.lastLine(),re=vr(R),oe=R,he="";if(re&&re.length&&(oe=re[0],he=re.slice(1,re.length).join("/")),oe)try{Mn(k,oe,!0,!0)}catch{_t(k,"Invalid regex: "+oe);return}for(var be=ln(k).getQuery(),ye=[],Ce=V;Ce<=j;Ce++){var xe=k.getLine(Ce),Se=be.test(xe);Se!==L&&ye.push(he?k.getLineHandle(Ce):xe)}if(!he){_t(k,ye.join(`
`));return}var ve=0,$e=function(){if(ve<ye.length){var Le=ye[ve++],Ue=k.getLineNumber(Le);if(Ue==null){$e();return}var Ie=Ue+1+he;Jt.processCommand(k,Ie,{callback:$e})}else k.releaseLineHandles&&k.releaseLineHandles()};$e()},substitute:function(k,E){if(!k.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var R=E.argString,L=R?Wn(R,R[0]):[],V="",j="",re,oe,he,be=!1,ye=!1;if(L&&L.length)V=L[0],ke("pcre")&&V!==""&&(V=new RegExp(V).source),j=L[1],j!==void 0&&(ke("pcre")?j=Cr(j.replace(/([^\\])&/g,"$1$$&")):j=wr(j),Ee.lastSubstituteReplacePart=j),re=L[2]?L[2].split(" "):[];else if(R&&R.length){_t(k,"Substitutions should be of the form :s/pattern/replace/");return}if(re&&(oe=re[0],he=parseInt(re[1]),oe&&(oe.indexOf("c")!=-1&&(be=!0),oe.indexOf("g")!=-1&&(ye=!0),ke("pcre")?V=V+"/"+oe:V=V.replace(/\//g,"\\/")+"/"+oe)),V)try{Mn(k,V,!0,!0)}catch{_t(k,"Invalid regex: "+V);return}if(j=j||Ee.lastSubstituteReplacePart,j===void 0){_t(k,"No previous substitute regular expression");return}var Ce=ln(k),xe=Ce.getQuery(),Se=E.line!==void 0?E.line:k.getCursor().line,ve=E.lineEnd||Se;Se==k.firstLine()&&ve==k.lastLine()&&(ve=1/0),he&&(Se=ve,ve=Se+he-1);var $e=st(k,new a(Se,0)),Le=k.getSearchCursor(xe,$e);Jn(k,be,ye,Se,ve,Le,xe,j,E.callback)},startinsert:function(k,E){ft(k,E.argString=="!"?"A":"i",{})},redo:l.commands.redo,undo:l.commands.undo,write:function(k){l.commands.save?l.commands.save(k):k.save&&k.save()},nohlsearch:function(k){me(k)},yank:function(k){var E=vt(k.getCursor()),R=E.line,L=k.getLine(R);Ee.registerController.pushText("0","yank",L,!0,!0)},delete:function(k,E){var R=E.selectionLine,L=isNaN(E.selectionLineEnd)?R:E.selectionLineEnd;at.delete(k,{linewise:!0},[{anchor:new a(R,0),head:new a(L+1,0)}])},join:function(k,E){var R=E.selectionLine,L=isNaN(E.selectionLineEnd)?R:E.selectionLineEnd;k.setCursor(new a(R,0)),Qe.joinLines(k,{repeat:L-R},k.state.vim)},delmarks:function(k,E){if(!E.argString||!On(E.argString)){_t(k,"Argument required");return}for(var R=k.state.vim,L=new l.StringStream(On(E.argString));!L.eol();){L.eatSpace();var V=L.pos;if(!L.match(/[a-zA-Z]/,!1)){_t(k,"Invalid argument: "+E.argString.substring(V));return}var j=L.next();if(L.match("-",!0)){if(!L.match(/[a-zA-Z]/,!1)){_t(k,"Invalid argument: "+E.argString.substring(V));return}var re=j,oe=L.next();if(re&&oe&&de(re)==de(oe)){var he=re.charCodeAt(0),be=oe.charCodeAt(0);if(he>=be){_t(k,"Invalid argument: "+E.argString.substring(V));return}for(var ye=0;ye<=be-he;ye++){var Ce=String.fromCharCode(he+ye);delete R.marks[Ce]}}else{_t(k,"Invalid argument: "+re+"-");return}}else j&&delete R.marks[j]}}},Jt=new We;Me.defineEx("version","ve",k=>{_t(k,"Codemirror-vim version: 6.3.0")});function Jn(k,E,R,L,V,j,re,oe,he){k.state.vim.exMode=!0;var be=!1,ye=0,Ce,xe,Se;function ve(){k.operation(function(){for(;!be;)$e(),Ue();Ie()})}function $e(){var ut="",ct=j.match||j.pos&&j.pos.match;if(ct)ut=oe.replace(/\$(\d{1,3}|[$&])/g,function(yt,Je){if(Je=="$")return"$";if(Je=="&")return ct[0];for(var At=Je;parseInt(At)>=ct.length&&At.length>0;)At=At.slice(0,At.length-1);return At?ct[At]+Je.slice(At.length,Je.length):yt});else{var Ct=k.getRange(j.from(),j.to());ut=Ct.replace(re,oe)}var xt=j.to().line;j.replace(ut),xe=j.to().line,V+=xe-xt,Se=xe<xt}function Le(){var ut=Ce&&vt(j.to()),ct=j.findNext();return ct&&!ct[0]&&ut&&It(j.from(),ut)&&(ct=j.findNext()),ct&&ye++,ct}function Ue(){for(;Le()&&tt(j.from(),L,V);)if(!(!R&&j.from().line==xe&&!Se)){k.scrollIntoView(j.from(),30),k.setSelection(j.from(),j.to()),Ce=j.from(),be=!1;return}be=!0}function Ie(ut){if(ut&&ut(),k.focus(),Ce){k.setCursor(Ce);var ct=k.state.vim;ct.exMode=!1,ct.lastHPos=ct.lastHSPos=Ce.ch}he?he():be&&_t(k,(ye?"Found "+ye+" matches":"No matches found")+" for pattern: "+re+(ke("pcre")?" (set nopcre to use Vim regexps)":""))}function et(ut,ct,Ct){l.e_stop(ut);var xt=Wt(ut);switch(xt){case"y":$e(),Ue();break;case"n":Ue();break;case"a":var yt=he;he=void 0,k.operation(ve),he=yt;break;case"l":$e();case"q":case"<Esc>":case"<C-c>":case"<C-[>":Ie(Ct);break}return be&&Ie(Ct),!0}if(Ue(),be){_t(k,"No matches for "+re+(ke("pcre")?" (set nopcre to use vim regexps)":""));return}if(!E){ve(),he&&he();return}Fn(k,{prefix:cn("span","replace with ",cn("strong",oe)," (y/n/a/q/l)"),onKeyDown:et})}function it(k,E){var R=k.state.vim,L=Ee.macroModeState,V=Ee.registerController.getRegister("."),j=L.isPlaying,re=L.lastInsertModeChanges;j||(k.off("change",gn),R.insertEnd&&R.insertEnd.clear(),R.insertEnd=void 0,l.off(k.getInputField(),"keydown",lr)),!j&&R.insertModeRepeat&&R.insertModeRepeat>1&&(cr(k,R,R.insertModeRepeat-1,!0),R.lastEditInputState.repeatOverride=R.insertModeRepeat),delete R.insertModeRepeat,R.insertMode=!1,E||k.setCursor(k.getCursor().line,k.getCursor().ch-1),k.setOption("keyMap","vim"),k.setOption("disableInput",!0),k.toggleOverwrite(!1),V.setText(re.changes.join("")),l.signal(k,"vim-mode-change",{mode:"normal"}),L.isRecording&&Ar(L)}function un(k){u.unshift(k),k.keys&&Mr(k.keys)}function Mr(k){k.split(/(<(?:[CSMA]-)*\w+>|.)/i).forEach(function(E){E&&(p[E]||(p[E]=0),p[E]++)})}function Ln(k){k.split(/(<(?:[CSMA]-)*\w+>|.)/i).forEach(function(E){p[E]&&p[E]--})}function er(k,E,R,L,V){var j={keys:k,type:E};j[E]=R,j[E+"Args"]=L;for(var re in V)j[re]=V[re];un(j)}Fe("insertModeEscKeysTimeout",200,"number");function Bn(k,E,R,L){var V=Ee.registerController.getRegister(L);if(L==":"){V.keyBuffer[0]&&Jt.processCommand(k,V.keyBuffer[0]),R.isPlaying=!1;return}var j=V.keyBuffer,re=0;R.isPlaying=!0,R.replaySearchQueries=V.searchQueries.slice(0);for(var oe=0;oe<j.length;oe++)for(var he=j[oe],be,ye,Ce=/<(?:[CSMA]-)*\w+>|./gi;be=Ce.exec(he);)if(ye=be[0],Me.handleKey(k,ye,"macro"),E.insertMode){var xe=V.insertModeChanges[re++].changes;Ee.macroModeState.lastInsertModeChanges.changes=xe,Dn(k,xe,1),it(k)}R.isPlaying=!1}function qe(k,E){if(!k.isPlaying){var R=k.latestRegister,L=Ee.registerController.getRegister(R);L&&L.pushText(E)}}function Ar(k){if(!k.isPlaying){var E=k.latestRegister,R=Ee.registerController.getRegister(E);R&&R.pushInsertModeChanges&&R.pushInsertModeChanges(k.lastInsertModeChanges)}}function nr(k,E){if(!k.isPlaying){var R=k.latestRegister,L=Ee.registerController.getRegister(R);L&&L.pushSearchQuery&&L.pushSearchQuery(E)}}function gn(k,E){var R=Ee.macroModeState,L=R.lastInsertModeChanges;if(!R.isPlaying)for(var V=k.state.vim;E;){if(L.expectCursorActivityForChange=!0,L.ignoreCount>1)L.ignoreCount--;else if(E.origin=="+input"||E.origin=="paste"||E.origin===void 0){var j=k.listSelections().length;j>1&&(L.ignoreCount=j);var re=E.text.join(`
`);if(L.maybeReset&&(L.changes=[],L.maybeReset=!1),re)if(k.state.overwrite&&!/\n/.test(re))L.changes.push([re]);else{if(re.length>1){var oe=V&&V.insertEnd&&V.insertEnd.find(),he=k.getCursor();if(oe&&oe.line==he.line){var be=oe.ch-he.ch;be>0&&be<re.length&&(L.changes.push([re,be]),re="")}}re&&L.changes.push(re)}}E=E.next}}function rr(k){var E=k.state.vim;if(E.insertMode){var R=Ee.macroModeState;if(R.isPlaying)return;var L=R.lastInsertModeChanges;L.expectCursorActivityForChange?L.expectCursorActivityForChange=!1:(L.maybeReset=!0,E.insertEnd&&E.insertEnd.clear(),E.insertEnd=k.setBookmark(k.getCursor(),{insertLeft:!0}))}else k.curOp?.isVimOp||sr(k,E)}function sr(k,E){var R=k.getCursor("anchor"),L=k.getCursor("head");if(E.visualMode&&!k.somethingSelected()?mt(k,!1):!E.visualMode&&!E.insertMode&&k.somethingSelected()&&(E.visualMode=!0,E.visualLine=!1,l.signal(k,"vim-mode-change",{mode:"visual"})),E.visualMode){var V=Ke(L,R)?0:-1,j=Ke(L,R)?-1:0;L=St(L,0,V),R=St(R,0,j),E.sel={anchor:R,head:L},bn(k,E,"<",Ot(L,R)),bn(k,E,">",Xt(L,R))}else E.insertMode||(E.lastHPos=k.getCursor().ch)}function lr(k){var E=Ee.macroModeState,R=E.lastInsertModeChanges,L=l.keyName?l.keyName(k):k.key;L&&(L.indexOf("Delete")!=-1||L.indexOf("Backspace")!=-1)&&(R.maybeReset&&(R.changes=[],R.maybeReset=!1),R.changes.push(new nt(L,k)))}function cr(k,E,R,L){var V=Ee.macroModeState;V.isPlaying=!0;var j=E.lastEditActionCommand,re=E.inputState;function oe(){j?Ut.processAction(k,E,j):Ut.evalInput(k,E)}function he(ye){if(V.lastInsertModeChanges.changes.length>0){ye=E.lastEditActionCommand?ye:1;var Ce=V.lastInsertModeChanges;Dn(k,Ce.changes,ye)}}if(E.inputState=E.lastEditInputState,j&&j.interlaceInsertRepeat)for(var be=0;be<R;be++)oe(),he(1);else L||oe(),he(R);E.inputState=re,E.insertMode&&!L&&it(k),V.isPlaying=!1}function ur(k,E){l.lookupKey(E,"vim-insert",function(L){return typeof L=="string"?l.commands[L](k):L(k),!0})}function Dn(k,E,R){var L=k.getCursor("head"),V=Ee.macroModeState.lastInsertModeChanges.visualBlock;V&&(z(k,L,V+1),R=k.listSelections().length,k.setCursor(L));for(var j=0;j<R;j++){V&&k.setCursor(St(L,j,0));for(var re=0;re<E.length;re++){var oe=E[re];if(oe instanceof nt)ur(k,oe.keyName);else if(typeof oe=="string")k.replaceSelection(oe);else{var he=k.getCursor(),be=St(he,0,oe[0].length-(oe[1]||0));k.replaceRange(oe[0],he,oe[1]?he:be),k.setCursor(be)}}}V&&k.setCursor(St(L,0,1))}function Nn(k){var E=new k.constructor;return Object.keys(k).forEach(function(R){if(R!="insertEnd"){var L=k[R];Array.isArray(L)?L=L.slice():L&&typeof L=="object"&&L.constructor!=Object&&(L=Nn(L)),E[R]=L}}),k.sel&&(E.sel={head:k.sel.head&&vt(k.sel.head),anchor:k.sel.anchor&&vt(k.sel.anchor)}),E}function Er(k,E,R){var j=Ve(k),L=k,V=!1,j=Me.maybeInitVimState_(L),re=j.visualBlock||j.wasInVisualBlock;if(L.state.closeVimNotification){var oe=L.state.closeVimNotification;if(L.state.closeVimNotification=null,oe(),E=="<CR>")return Mt(L),!0}var he=L.isInMultiSelectMode();if(j.wasInVisualBlock&&!he?j.wasInVisualBlock=!1:he&&j.visualBlock&&(j.wasInVisualBlock=!0),E=="<Esc>"&&!j.insertMode&&!j.visualMode&&he&&j.status=="<Esc>")Mt(L);else if(re||!he||L.inVirtualSelectionMode)V=Me.handleKey(L,E,R);else{var be=Nn(j),ye=j.inputState.changeQueueList||[];L.operation(function(){L.curOp&&(L.curOp.isVimOp=!0);var Ce=0;L.forEachSelection(function(){L.state.vim.inputState.changeQueue=ye[Ce];var xe=L.getCursor("head"),Se=L.getCursor("anchor"),ve=Ke(xe,Se)?0:-1,$e=Ke(xe,Se)?-1:0;xe=St(xe,0,ve),Se=St(Se,0,$e),L.state.vim.sel.head=xe,L.state.vim.sel.anchor=Se,V=Me.handleKey(L,E,R),L.virtualSelection&&(ye[Ce]=L.state.vim.inputState.changeQueue,L.state.vim=Nn(be)),Ce++}),L.curOp?.cursorActivity&&!V&&(L.curOp.cursorActivity=!1),L.state.vim=j,j.inputState.changeQueueList=ye,j.inputState.changeQueue=null},!0)}return V&&!j.visualMode&&!j.insertMode&&j.visualMode!=L.somethingSelected()&&sr(L,j),V}return He(),Me}function indexFromPos(l,a){var o=a.ch,u=a.line+1;u<1&&(u=1,o=0),u>l.lines&&(u=l.lines,o=Number.MAX_VALUE);var p=l.line(u);return Math.min(p.from+Math.max(0,o),p.to)}function posFromIndex(l,a){let o=l.lineAt(a);return{line:o.number-1,ch:a-o.from}}class Pos{constructor(a,o){this.line=a,this.ch=o}}function on(l,a,o){if(l.addEventListener)l.addEventListener(a,o,!1);else{var u=l._handlers||(l._handlers={});u[a]=(u[a]||[]).concat(o)}}function off(l,a,o){if(l.removeEventListener)l.removeEventListener(a,o,!1);else{var u=l._handlers,p=u&&u[a];if(p){var d=p.indexOf(o);d>-1&&(u[a]=p.slice(0,d).concat(p.slice(d+1)))}}}function signal(l,a,...o){var u,p=(u=l._handlers)===null||u===void 0?void 0:u[a];if(p)for(var d=0;d<p.length;++d)p[d](...o)}function signalTo(l,...a){if(l)for(var o=0;o<l.length;++o)l[o](...a)}let wordChar;try{wordChar=new RegExp("[\\w\\p{Alphabetic}\\p{Number}_]","u")}catch(l){wordChar=/[\w]/}function dispatchChange(l,a){var o=l.cm6;if(!o.state.readOnly){var u="input.type.compose";if(l.curOp&&(l.curOp.lastChange||(u="input.type.compose.start")),a.annotations)try{a.annotations.some(function(p){p.value=="input"&&(p.value=u)})}catch(p){console.error(p)}else a.userEvent=u;return o.dispatch(a)}}function runHistoryCommand(l,a){var o;l.curOp&&(l.curOp.$changeStart=void 0),(a?undo:redo)(l.cm6);let u=(o=l.curOp)===null||o===void 0?void 0:o.$changeStart;u!=null&&l.cm6.dispatch({selection:{anchor:u}})}var keys={Left:l=>runScopeHandlers(l.cm6,{key:"Left"},"editor"),Right:l=>runScopeHandlers(l.cm6,{key:"Right"},"editor"),Up:l=>runScopeHandlers(l.cm6,{key:"Up"},"editor"),Down:l=>runScopeHandlers(l.cm6,{key:"Down"},"editor"),Backspace:l=>runScopeHandlers(l.cm6,{key:"Backspace"},"editor"),Delete:l=>runScopeHandlers(l.cm6,{key:"Delete"},"editor")};class CodeMirror{openDialog(a,o,u){return openDialog(this,a,o,u)}openNotification(a,o){return openNotification(this,a,o)}constructor(a){this.state={},this.marks=Object.create(null),this.$mid=0,this.options={},this._handlers={},this.$lastChangeEndOffset=0,this.virtualSelection=null,this.cm6=a,this.onChange=this.onChange.bind(this),this.onSelectionChange=this.onSelectionChange.bind(this)}on(a,o){on(this,a,o)}off(a,o){off(this,a,o)}signal(a,o,u){signal(this,a,o,u)}indexFromPos(a){return indexFromPos(this.cm6.state.doc,a)}posFromIndex(a){return posFromIndex(this.cm6.state.doc,a)}foldCode(a){let o=this.cm6,u=o.state.selection.ranges,p=this.cm6.state.doc,d=indexFromPos(p,a),f=EditorSelection.create([EditorSelection.range(d,d)],0).ranges;o.state.selection.ranges=f,foldCode(o),o.state.selection.ranges=u}firstLine(){return 0}lastLine(){return this.cm6.state.doc.lines-1}lineCount(){return this.cm6.state.doc.lines}setCursor(a,o){typeof a=="object"&&(o=a.ch,a=a.line);var u=indexFromPos(this.cm6.state.doc,{line:a,ch:o||0});this.cm6.dispatch({selection:{anchor:u}},{scrollIntoView:!this.curOp}),this.curOp&&!this.curOp.isVimOp&&this.onBeforeEndOperation()}getCursor(a){var o=this.cm6.state.selection.main,u=a=="head"||!a?o.head:a=="anchor"?o.anchor:a=="start"?o.from:a=="end"?o.to:null;if(u==null)throw new Error("Invalid cursor type");return this.posFromIndex(u)}listSelections(){var a=this.cm6.state.doc;return this.cm6.state.selection.ranges.map(o=>({anchor:posFromIndex(a,o.anchor),head:posFromIndex(a,o.head)}))}setSelections(a,o){var u=this.cm6.state.doc,p=a.map(d=>{var f=indexFromPos(u,d.head),g=indexFromPos(u,d.anchor);return f==g?EditorSelection.cursor(f,1):EditorSelection.range(g,f)});this.cm6.dispatch({selection:EditorSelection.create(p,o)})}setSelection(a,o,u){this.setSelections([{anchor:a,head:o}],0),u&&u.origin=="*mouse"&&this.onBeforeEndOperation()}getLine(a){var o=this.cm6.state.doc;return a<0||a>=o.lines?"":this.cm6.state.doc.line(a+1).text}getLineHandle(a){return this.$lineHandleChanges||(this.$lineHandleChanges=[]),{row:a,index:this.indexFromPos(new Pos(a,0))}}getLineNumber(a){var o=this.$lineHandleChanges;if(!o)return null;for(var u=a.index,p=0;p<o.length;p++)if(u=o[p].changes.mapPos(u,1,MapMode.TrackAfter),u==null)return null;var d=this.posFromIndex(u);return d.ch==0?d.line:null}releaseLineHandles(){this.$lineHandleChanges=void 0}getRange(a,o){var u=this.cm6.state.doc;return this.cm6.state.sliceDoc(indexFromPos(u,a),indexFromPos(u,o))}replaceRange(a,o,u,p){u||(u=o);var d=this.cm6.state.doc,f=indexFromPos(d,o),g=indexFromPos(d,u);dispatchChange(this,{changes:{from:f,to:g,insert:a}})}replaceSelection(a){dispatchChange(this,this.cm6.state.replaceSelection(a))}replaceSelections(a){var o=this.cm6.state.selection.ranges,u=o.map((p,d)=>({from:p.from,to:p.to,insert:a[d]||""}));dispatchChange(this,{changes:u})}getSelection(){return this.getSelections().join(`
`)}getSelections(){var a=this.cm6;return a.state.selection.ranges.map(o=>a.state.sliceDoc(o.from,o.to))}somethingSelected(){return this.cm6.state.selection.ranges.some(a=>!a.empty)}getInputField(){return this.cm6.contentDOM}clipPos(a){var o=this.cm6.state.doc,u=a.ch,p=a.line+1;p<1&&(p=1,u=0),p>o.lines&&(p=o.lines,u=Number.MAX_VALUE);var d=o.line(p);return u=Math.min(Math.max(0,u),d.to-d.from),new Pos(p-1,u)}getValue(){return this.cm6.state.doc.toString()}setValue(a){var o=this.cm6;return o.dispatch({changes:{from:0,to:o.state.doc.length,insert:a},selection:EditorSelection.range(0,0)})}focus(){return this.cm6.focus()}blur(){return this.cm6.contentDOM.blur()}defaultTextHeight(){return this.cm6.defaultLineHeight}findMatchingBracket(a,o){var u=this.cm6.state,p=indexFromPos(u.doc,a),d=matchBrackets(u,p+1,-1);return d&&d.end?{to:posFromIndex(u.doc,d.end.from)}:(d=matchBrackets(u,p,1),d&&d.end?{to:posFromIndex(u.doc,d.end.from)}:{to:void 0})}scanForBracket(a,o,u,p){return scanForBracket(this,a,o,u,p)}indentLine(a,o){o?this.indentMore():this.indentLess()}indentMore(){indentMore(this.cm6)}indentLess(){indentLess(this.cm6)}execCommand(a){if(a=="indentAuto")CodeMirror.commands.indentAuto(this);else if(a=="goLineLeft")cursorLineBoundaryBackward(this.cm6);else if(a=="goLineRight"){cursorLineBoundaryForward(this.cm6);let o=this.cm6.state,u=o.selection.main.head;u<o.doc.length&&o.sliceDoc(u,u+1)!==`
`&&cursorCharBackward(this.cm6)}else console.log(a+" is not implemented")}setBookmark(a,o){var u=o?.insertLeft?1:-1,p=this.indexFromPos(a),d=new Marker(this,p,u);return d}addOverlay({query:a}){let o=new SearchQuery({regexp:!0,search:a.source,caseSensitive:!/i/.test(a.flags)});if(o.valid){o.forVim=!0,this.cm6Query=o;let u=setSearchQuery.of(o);return this.cm6.dispatch({effects:u}),o}}removeOverlay(a){if(!this.cm6Query)return;this.cm6Query.forVim=!1;let o=setSearchQuery.of(this.cm6Query);this.cm6.dispatch({effects:o})}getSearchCursor(a,o){var u=this,p=null,d=null,f=!1;o.ch==null&&(o.ch=Number.MAX_VALUE);var g=indexFromPos(u.cm6.state.doc,o),b=a.source.replace(/(\\.|{(?:\d+(?:,\d*)?|,\d+)})|[{}]/g,function(F,$){return $||"\\"+F});function O(F,$=0,B=F.length){return new RegExpCursor(F,b,{ignoreCase:a.ignoreCase},$,B)}function S(F){var $=u.cm6.state.doc;if(F>$.length)return null;let B=O($,F).next();return B.done?null:B.value}var M=1e4;function A(F,$){var B=u.cm6.state.doc;for(let I=1;;I++){let U=Math.max(F,$-I*M),te=O(B,U,$),de=null;for(;!te.next().done;)de=te.value;if(de&&(U==F||de.from>U+10))return de;if(U==F)return null}}return{findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(F){var $=u.cm6.state.doc;if(F){let B=p?f?p.to-1:p.from:g;p=A(0,B)}else{let B=p?f?p.to+1:p.to:g;p=S(B)}return d=p&&{from:posFromIndex($,p.from),to:posFromIndex($,p.to),match:p.match},f=p?p.from==p.to:!1,p&&p.match},from:function(){return d?.from},to:function(){return d?.to},replace:function(F){p&&(dispatchChange(u,{changes:{from:p.from,to:p.to,insert:F}}),p.to=p.from+F.length,d&&(d.to=posFromIndex(u.cm6.state.doc,p.to)))},get match(){return d&&d.match}}}findPosV(a,o,u,p){let{cm6:d}=this;const f=d.state.doc;let g=u=="page"?d.dom.clientHeight:0;const b=indexFromPos(f,a);let O=EditorSelection.cursor(b,1,void 0,p),S=Math.round(Math.abs(o));for(let A=0;A<S;A++)u=="page"?O=d.moveVertically(O,o>0,g):u=="line"&&(O=d.moveVertically(O,o>0));let M=posFromIndex(f,O.head);return(o<0&&O.head==0&&p!=0&&a.line==0&&a.ch!=0||o>0&&O.head==f.length&&M.ch!=p&&a.line==M.line)&&(M.hitSide=!0),M}charCoords(a,o){var u=this.cm6.contentDOM.getBoundingClientRect(),p=indexFromPos(this.cm6.state.doc,a),d=this.cm6.coordsAtPos(p),f=-u.top;return{left:(d?.left||0)-u.left,top:(d?.top||0)+f,bottom:(d?.bottom||0)+f}}coordsChar(a,o){var u=this.cm6.contentDOM.getBoundingClientRect(),p=this.cm6.posAtCoords({x:a.left+u.left,y:a.top+u.top})||0;return posFromIndex(this.cm6.state.doc,p)}getScrollInfo(){var a=this.cm6.scrollDOM;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight,width:a.scrollWidth,clientHeight:a.clientHeight,clientWidth:a.clientWidth}}scrollTo(a,o){a!=null&&(this.cm6.scrollDOM.scrollLeft=a),o!=null&&(this.cm6.scrollDOM.scrollTop=o)}scrollIntoView(a,o){if(a){var u=this.indexFromPos(a);this.cm6.dispatch({effects:EditorView.scrollIntoView(u)})}else this.cm6.dispatch({scrollIntoView:!0,userEvent:"scroll"})}getWrapperElement(){return this.cm6.dom}getMode(){return{name:this.getOption("mode")}}setSize(a,o){this.cm6.dom.style.width=a+4+"px",this.cm6.dom.style.height=o+"px",this.refresh()}refresh(){this.cm6.measure()}destroy(){this.removeOverlay()}getLastEditEnd(){return this.posFromIndex(this.$lastChangeEndOffset)}onChange(a){this.$lineHandleChanges&&this.$lineHandleChanges.push(a);for(let u in this.marks)this.marks[u].update(a.changes);this.virtualSelection&&(this.virtualSelection.ranges=this.virtualSelection.ranges.map(u=>u.map(a.changes)));var o=this.curOp=this.curOp||{};a.changes.iterChanges((u,p,d,f,g)=>{(o.$changeStart==null||o.$changeStart>d)&&(o.$changeStart=d),this.$lastChangeEndOffset=f;var b={text:g.toJSON()};o.lastChange?o.lastChange.next=o.lastChange=b:o.lastChange=o.change=b},!0),o.changeHandlers||(o.changeHandlers=this._handlers.change&&this._handlers.change.slice())}onSelectionChange(){var a=this.curOp=this.curOp||{};a.cursorActivityHandlers||(a.cursorActivityHandlers=this._handlers.cursorActivity&&this._handlers.cursorActivity.slice()),this.curOp.cursorActivity=!0}operation(a,o){this.curOp||(this.curOp={$d:0}),this.curOp.$d++;try{var u=a()}finally{this.curOp&&(this.curOp.$d--,this.curOp.$d||this.onBeforeEndOperation())}return u}onBeforeEndOperation(){var a=this.curOp,o=!1;a&&(a.change&&signalTo(a.changeHandlers,this,a.change),a&&a.cursorActivity&&(signalTo(a.cursorActivityHandlers,this,null),a.isVimOp&&(o=!0)),this.curOp=null),o&&this.scrollIntoView()}moveH(a,o){if(o=="char"){var u=this.getCursor();this.setCursor(u.line,u.ch+a)}}setOption(a,o){switch(a){case"keyMap":this.state.keyMap=o;break;case"textwidth":this.state.textwidth=o;break}}getOption(a){switch(a){case"firstLineNumber":return 1;case"tabSize":return this.cm6.state.tabSize||4;case"readOnly":return this.cm6.state.readOnly;case"indentWithTabs":return this.cm6.state.facet(indentUnit)=="	";case"indentUnit":return this.cm6.state.facet(indentUnit).length||2;case"textwidth":return this.state.textwidth;case"keyMap":return this.state.keyMap||"vim"}}toggleOverwrite(a){this.state.overwrite=a}getTokenTypeAt(a){var o,u=this.indexFromPos(a),p=ensureSyntaxTree(this.cm6.state,u),d=p?.resolve(u),f=((o=d?.type)===null||o===void 0?void 0:o.name)||"";return/comment/i.test(f)?"comment":/string/i.test(f)?"string":""}overWriteSelection(a){var o=this.cm6.state.doc,u=this.cm6.state.selection,p=u.ranges.map(d=>{if(d.empty){var f=d.to<o.length?o.sliceString(d.from,d.to+1):"";if(f&&!/\n/.test(f))return EditorSelection.range(d.from,d.to+1)}return d});this.cm6.dispatch({selection:EditorSelection.create(p,u.mainIndex)}),this.replaceSelection(a)}isInMultiSelectMode(){return this.cm6.state.selection.ranges.length>1}virtualSelectionMode(){return!!this.virtualSelection}forEachSelection(a){var o=this.cm6.state.selection;this.virtualSelection=EditorSelection.create(o.ranges,o.mainIndex);for(var u=0;u<this.virtualSelection.ranges.length;u++){var p=this.virtualSelection.ranges[u];p&&(this.cm6.dispatch({selection:EditorSelection.create([p])}),a(),this.virtualSelection.ranges[u]=this.cm6.state.selection.ranges[0])}this.cm6.dispatch({selection:this.virtualSelection}),this.virtualSelection=null}hardWrap(a){return hardWrap(this,a)}}CodeMirror.isMac=typeof navigator<"u"&&/Mac/.test(navigator.platform),CodeMirror.Pos=Pos,CodeMirror.StringStream=StringStream,CodeMirror.commands={cursorCharLeft:function(l){cursorCharLeft(l.cm6)},redo:function(l){runHistoryCommand(l,!1)},undo:function(l){runHistoryCommand(l,!0)},newlineAndIndent:function(l){insertNewlineAndIndent({state:l.cm6.state,dispatch:a=>dispatchChange(l,a)})},indentAuto:function(l){indentSelection(l.cm6)},newlineAndIndentContinueComment:void 0,save:void 0},CodeMirror.isWordChar=function(l){return wordChar.test(l)},CodeMirror.keys=keys,CodeMirror.addClass=function(l,a){},CodeMirror.rmClass=function(l,a){},CodeMirror.e_preventDefault=function(l){l.preventDefault()},CodeMirror.e_stop=function(l){var a,o;(a=l?.stopPropagation)===null||a===void 0||a.call(l),(o=l?.preventDefault)===null||o===void 0||o.call(l)},CodeMirror.lookupKey=function(a,o,u){var p=CodeMirror.keys[a];!p&&/^Arrow/.test(a)&&(p=CodeMirror.keys[a.slice(5)]),p&&u(p)},CodeMirror.on=on,CodeMirror.off=off,CodeMirror.signal=signal,CodeMirror.findMatchingTag=findMatchingTag,CodeMirror.findEnclosingTag=findEnclosingTag,CodeMirror.keyName=void 0;function dialogDiv(l,a,o){var u=document.createElement("div");return u.appendChild(a),u}function closeNotification(l,a){l.state.currentNotificationClose&&l.state.currentNotificationClose(),l.state.currentNotificationClose=a}function openNotification(l,a,o){closeNotification(l,g);var u=dialogDiv(l,a,o&&o.bottom),p=!1,d,f=o&&typeof o.duration<"u"?o.duration:5e3;function g(){p||(p=!0,clearTimeout(d),u.remove(),hideDialog(l,u))}return u.onclick=function(b){b.preventDefault(),g()},showDialog(l,u),f&&(d=setTimeout(g,f)),g}function showDialog(l,a){var o=l.state.dialog;l.state.dialog=a,a.style.flex="1",a&&o!==a&&(o&&o.contains(document.activeElement)&&l.focus(),o&&o.parentElement?o.parentElement.replaceChild(a,o):o&&o.remove(),CodeMirror.signal(l,"dialog"))}function hideDialog(l,a){l.state.dialog==a&&(l.state.dialog=null,CodeMirror.signal(l,"dialog"))}function openDialog(l,a,o,u){u||(u={}),closeNotification(l,void 0);var p=dialogDiv(l,a,u.bottom),d=!1;showDialog(l,p);function f(b){if(typeof b=="string")g.value=b;else{if(d)return;d=!0,hideDialog(l,p),l.state.dialog||l.focus(),u.onClose&&u.onClose(p)}}var g=p.getElementsByTagName("input")[0];return g&&(u.value&&(g.value=u.value,u.selectValueOnOpen!==!1&&g.select()),u.onInput&&CodeMirror.on(g,"input",function(b){u.onInput(b,g.value,f)}),u.onKeyUp&&CodeMirror.on(g,"keyup",function(b){u.onKeyUp(b,g.value,f)}),CodeMirror.on(g,"keydown",function(b){u&&u.onKeyDown&&u.onKeyDown(b,g.value,f)||(b.keyCode==13&&o&&o(g.value),(b.keyCode==27||u.closeOnEnter!==!1&&b.keyCode==13)&&(g.blur(),CodeMirror.e_stop(b),f()))}),u.closeOnBlur!==!1&&CodeMirror.on(g,"blur",function(){setTimeout(function(){document.activeElement!==g&&f()})}),g.focus()),f}var matching={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function bracketRegex(l){return l&&l.bracketRegex||/[(){}[\]]/}function scanForBracket(l,a,o,u,p){for(var d=p&&p.maxScanLineLength||1e4,f=p&&p.maxScanLines||1e3,g=[],b=bracketRegex(p),O=o>0?Math.min(a.line+f,l.lastLine()+1):Math.max(l.firstLine()-1,a.line-f),S=a.line;S!=O;S+=o){var M=l.getLine(S);if(M){var A=o>0?0:M.length-1,F=o>0?M.length:-1;if(!(M.length>d))for(S==a.line&&(A=a.ch-(o<0?1:0));A!=F;A+=o){var $=M.charAt(A);if(b.test($)){var B=matching[$];if(B&&B.charAt(1)==">"==o>0)g.push($);else if(g.length)g.pop();else return{pos:new Pos(S,A),ch:$}}}}}return S-o==(o>0?l.lastLine():l.firstLine())?!1:null}function findMatchingTag(l,a){return null}function findEnclosingTag(l,a){var o,u,p=l.cm6.state,d=l.indexFromPos(a);if(d<p.doc.length){var f=p.sliceDoc(d,d+1);f=="<"&&d++}for(var g=ensureSyntaxTree(p,d),b=g?.resolve(d)||null;b;){if(((o=b.firstChild)===null||o===void 0?void 0:o.type.name)=="OpenTag"&&((u=b.lastChild)===null||u===void 0?void 0:u.type.name)=="CloseTag")return{open:convertRange(p.doc,b.firstChild),close:convertRange(p.doc,b.lastChild)};b=b.parent}}function convertRange(l,a){return{from:posFromIndex(l,a.from),to:posFromIndex(l,a.to)}}class Marker{constructor(a,o,u){this.cm=a,this.id=a.$mid++,this.offset=o,this.assoc=u,a.marks[this.id]=this}clear(){delete this.cm.marks[this.id]}find(){return this.offset==null?null:this.cm.posFromIndex(this.offset)}update(a){this.offset!=null&&(this.offset=a.mapPos(this.offset,this.assoc,MapMode.TrackDel))}}function hardWrap(l,a){for(var o,u=a.column||l.getOption("textwidth")||80,p=a.allowMerge!=!1,d=Math.min(a.from,a.to),f=Math.max(a.from,a.to);d<=f;){var g=l.getLine(d);if(g.length>u){var b=$(g,u,5);if(b){var O=(o=/^\s*/.exec(g))===null||o===void 0?void 0:o[0];l.replaceRange(`
`+O,new Pos(d,b.start),new Pos(d,b.end))}f++}else if(p&&/\S/.test(g)&&d!=f){var S=l.getLine(d+1);if(S&&/\S/.test(S)){var M=g.replace(/\s+$/,""),A=S.replace(/^\s+/,""),F=M+" "+A,b=$(F,u,5);b&&b.start>M.length||F.length<u?(l.replaceRange(" ",new Pos(d,M.length),new Pos(d+1,S.length-A.length)),d--,f--):M.length<g.length&&l.replaceRange("",new Pos(d,M.length),new Pos(d,g.length))}}d++}return d;function $(B,I,U){if(!(B.length<I)){var te=B.slice(0,I),de=B.slice(I),se=/^(?:(\s+)|(\S+)(\s+))/.exec(de),q=/(?:(\s+)|(\s+)(\S+))$/.exec(te),le=0,fe=0;if(q&&!q[2]&&(le=I-q[1].length,fe=I),se&&!se[2]&&(le||(le=I),fe=I+se[1].length),le)return{start:le,end:fe};if(q&&q[2]&&q.index>U)return{start:q.index,end:q.index+q[2].length};if(se&&se[2])return le=I+se[2].length,{start:le,end:le+se[3].length}}}}let getDrawSelectionConfig=getDrawSelectionConfig$2;class Piece{constructor(a,o,u,p,d,f,g,b,O,S){this.left=a,this.top=o,this.height=u,this.fontFamily=p,this.fontSize=d,this.fontWeight=f,this.color=g,this.className=b,this.letter=O,this.partial=S}draw(){let a=document.createElement("div");return a.className=this.className,this.adjust(a),a}adjust(a){a.style.left=this.left+"px",a.style.top=this.top+"px",a.style.height=this.height+"px",a.style.lineHeight=this.height+"px",a.style.fontFamily=this.fontFamily,a.style.fontSize=this.fontSize,a.style.fontWeight=this.fontWeight,a.style.color=this.partial?"transparent":this.color,a.className=this.className,a.textContent=this.letter}eq(a){return this.left==a.left&&this.top==a.top&&this.height==a.height&&this.fontFamily==a.fontFamily&&this.fontSize==a.fontSize&&this.fontWeight==a.fontWeight&&this.color==a.color&&this.className==a.className&&this.letter==a.letter}}class BlockCursorPlugin{constructor(a,o){this.view=a,this.rangePieces=[],this.cursors=[],this.cm=o,this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.cursorLayer=a.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer cm-vimCursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),a.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){let o=getDrawSelectionConfig(this.cm.cm6.state).cursorBlinkRate;this.cursorLayer.style.animationDuration=o+"ms"}update(a){(a.selectionSet||a.geometryChanged||a.viewportChanged)&&(this.view.requestMeasure(this.measureReq),this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),configChanged(a)&&this.setBlinkRate()}scheduleRedraw(){this.view.requestMeasure(this.measureReq)}readPos(){let{state:a}=this.view,o=[];for(let u of a.selection.ranges){let p=u==a.selection.main,d=measureCursor(this.cm,this.view,u,p);d&&o.push(d)}return{cursors:o}}drawSel({cursors:a}){if(a.length!=this.cursors.length||a.some((o,u)=>!o.eq(this.cursors[u]))){let o=this.cursorLayer.children;if(o.length!==a.length){this.cursorLayer.textContent="";for(const u of a)this.cursorLayer.appendChild(u.draw())}else a.forEach((u,p)=>u.adjust(o[p]));this.cursors=a}}destroy(){this.cursorLayer.remove()}}function configChanged(l){return getDrawSelectionConfig(l.startState)!=getDrawSelectionConfig(l.state)}const themeSpec={".cm-vimMode .cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-fat-cursor":{position:"absolute",background:"#ff9696",border:"none",whiteSpace:"pre"},"&:not(.cm-focused) .cm-fat-cursor":{background:"none",outline:"solid 1px #ff9696",color:"transparent !important"}},hideNativeSelection=Prec.highest(EditorView.theme(themeSpec));function getBase(l){let a=l.scrollDOM.getBoundingClientRect();return{left:(l.textDirection==Direction.LTR?a.left:a.right-l.scrollDOM.clientWidth)-l.scrollDOM.scrollLeft*l.scaleX,top:a.top-l.scrollDOM.scrollTop*l.scaleY}}function measureCursor(l,a,o,u){var p,d,f,g;let b=o.head,O=!1,S=1,M=l.state.vim;if(M&&(!M.insertMode||l.state.overwrite)){if(O=!0,M.visualBlock&&!u)return null;o.anchor<o.head&&(b<a.state.doc.length&&a.state.sliceDoc(b,b+1))!=`
`&&b--,l.state.overwrite?S=.2:M.status&&(S=.5)}if(O){let F=b<a.state.doc.length&&a.state.sliceDoc(b,b+1);F&&/[\uDC00-\uDFFF]/.test(F)&&b>1&&(b--,F=a.state.sliceDoc(b,b+1));let $=a.coordsAtPos(b,1);if(!$)return null;let B=getBase(a),I=a.domAtPos(b),U=I?I.node:a.contentDOM;for(U instanceof Text&&I.offset>=U.data.length&&!((p=U.parentElement)===null||p===void 0)&&p.nextSibling&&(U=(d=U.parentElement)===null||d===void 0?void 0:d.nextSibling,I={node:U,offset:0});I&&I.node instanceof HTMLElement;)U=I.node,I={node:I.node.childNodes[I.offset],offset:0};if(!(U instanceof HTMLElement)){if(!U.parentNode)return null;U=U.parentNode}let te=getComputedStyle(U),de=$.left,se=(g=(f=a).coordsForChar)===null||g===void 0?void 0:g.call(f,b);if(se&&(de=se.left),!F||F==`
`||F=="\r")F=" ";else if(F=="	"){F=" ";var A=a.coordsAtPos(b+1,-1);A&&(de=A.left-(A.left-$.left)/parseInt(te.tabSize))}else/[\uD800-\uDBFF]/.test(F)&&b<a.state.doc.length-1&&(F+=a.state.sliceDoc(b+1,b+2));let q=$.bottom-$.top;return new Piece((de-B.left)/a.scaleX,($.top-B.top+q*(1-S))/a.scaleY,q*S/a.scaleY,te.fontFamily,te.fontSize,te.fontWeight,te.color,u?"cm-fat-cursor cm-cursor-primary":"cm-fat-cursor cm-cursor-secondary",F,S!=1)}else return null}var FIREFOX_LINUX=typeof navigator<"u"&&/linux/i.test(navigator.platform)&&/ Gecko\/\d+/.exec(navigator.userAgent);const Vim=initVim(CodeMirror),HighlightMargin=250,vimStyle=EditorView.baseTheme({".cm-vimMode .cm-cursorLayer:not(.cm-vimCursorLayer)":{display:"none"},".cm-vim-panel":{padding:"0px 10px",fontFamily:"monospace",minHeight:"1.3em",display:"flex"},".cm-vim-panel input":{border:"none",outline:"none",backgroundColor:"inherit"},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"}}),vimPlugin=ViewPlugin.fromClass(class{constructor(l){this.status="",this.query=null,this.decorations=Decoration.none,this.waitForCopy=!1,this.lastKeydown="",this.useNextTextInput=!1,this.compositionText="",this.view=l;const a=this.cm=new CodeMirror(l);Vim.enterVimMode(this.cm),this.view.cm=this.cm,this.cm.state.vimPlugin=this,this.blockCursor=new BlockCursorPlugin(l,a),this.updateClass(),this.cm.on("vim-command-done",()=>{a.state.vim&&(a.state.vim.status=""),this.blockCursor.scheduleRedraw(),this.updateStatus()}),this.cm.on("vim-mode-change",o=>{a.state.vim&&(a.state.vim.mode=o.mode,o.subMode&&(a.state.vim.mode+=" block"),a.state.vim.status="",this.blockCursor.scheduleRedraw(),this.updateClass(),this.updateStatus())}),this.cm.on("dialog",()=>{this.cm.state.statusbar?this.updateStatus():l.dispatch({effects:showVimPanel.of(!!this.cm.state.dialog)})}),this.dom=document.createElement("span"),this.spacer=document.createElement("span"),this.spacer.style.flex="1",this.statusButton=document.createElement("span"),this.statusButton.onclick=o=>{Vim.handleKey(this.cm,"<Esc>","user"),this.cm.focus()},this.statusButton.style.cssText="cursor: pointer"}update(l){var a;if((l.viewportChanged||l.docChanged)&&this.query&&this.highlight(this.query),l.docChanged&&this.cm.onChange(l),l.selectionSet&&this.cm.onSelectionChange(),l.viewportChanged,this.cm.curOp&&!this.cm.curOp.isVimOp&&this.cm.onBeforeEndOperation(),l.transactions){for(let o of l.transactions)for(let u of o.effects)if(u.is(setSearchQuery))if(!((a=u.value)===null||a===void 0?void 0:a.forVim))this.highlight(null);else{let d=u.value.create();this.highlight(d)}}this.blockCursor.update(l)}updateClass(){const l=this.cm.state;!l.vim||l.vim.insertMode&&!l.overwrite?this.view.scrollDOM.classList.remove("cm-vimMode"):this.view.scrollDOM.classList.add("cm-vimMode")}updateStatus(){let l=this.cm.state.statusbar,a=this.cm.state.vim;if(!l||!a)return;let o=this.cm.state.dialog;if(o)o.parentElement!=l&&(l.textContent="",l.appendChild(o));else{l.textContent="";var u=(a.mode||"normal").toUpperCase();a.insertModeReturn&&(u+="(C-O)"),this.statusButton.textContent=`--${u}--`,l.appendChild(this.statusButton),l.appendChild(this.spacer)}this.dom.textContent=a.status,l.appendChild(this.dom)}destroy(){Vim.leaveVimMode(this.cm),this.updateClass(),this.blockCursor.destroy(),delete this.view.cm}highlight(l){if(this.query=l,!l)return this.decorations=Decoration.none;let{view:a}=this,o=new RangeSetBuilder;for(let u=0,p=a.visibleRanges,d=p.length;u<d;u++){let{from:f,to:g}=p[u];for(;u<d-1&&g>p[u+1].from-2*HighlightMargin;)g=p[++u].to;l.highlight(a.state,f,g,(b,O)=>{o.add(b,O,matchMark)})}return this.decorations=o.finish()}handleKey(l,a){const o=this.cm;let u=o.state.vim;if(!u)return;const p=Vim.vimKeyFromEvent(l,u);if(CodeMirror.signal(this.cm,"inputEvent",{type:"handleKey",key:p}),!p)return;if(p=="<Esc>"&&!u.insertMode&&!u.visualMode&&this.query){const g=u.searchState_;g&&(o.removeOverlay(g.getOverlay()),g.setOverlay(null))}if(p==="<C-c>"&&!CodeMirror.isMac&&o.somethingSelected())return this.waitForCopy=!0,!0;u.status=(u.status||"")+p;let f=Vim.multiSelectHandleKey(o,p,"user");return u=Vim.maybeInitVimState_(o),!f&&u.insertMode&&o.state.overwrite&&(l.key&&l.key.length==1&&!/\n/.test(l.key)?(f=!0,o.overWriteSelection(l.key)):l.key=="Backspace"&&(f=!0,CodeMirror.commands.cursorCharLeft(o))),f&&(CodeMirror.signal(this.cm,"vim-keypress",p),l.preventDefault(),l.stopPropagation(),this.blockCursor.scheduleRedraw()),this.updateStatus(),!!f}},{eventHandlers:{copy:function(l,a){this.waitForCopy&&(this.waitForCopy=!1,Promise.resolve().then(()=>{var o=this.cm,u=o.state.vim;u&&(u.insertMode?o.setSelection(o.getCursor(),o.getCursor()):o.operation(()=>{o.curOp&&(o.curOp.isVimOp=!0),Vim.handleKey(o,"<Esc>","user")}))}))},compositionstart:function(l,a){this.useNextTextInput=!0,CodeMirror.signal(this.cm,"inputEvent",l)},compositionupdate:function(l,a){CodeMirror.signal(this.cm,"inputEvent",l)},compositionend:function(l,a){CodeMirror.signal(this.cm,"inputEvent",l)},keypress:function(l,a){CodeMirror.signal(this.cm,"inputEvent",l),this.lastKeydown=="Dead"&&this.handleKey(l,a)},keydown:function(l,a){CodeMirror.signal(this.cm,"inputEvent",l),this.lastKeydown=l.key,this.lastKeydown=="Unidentified"||this.lastKeydown=="Process"||this.lastKeydown=="Dead"?this.useNextTextInput=!0:(this.useNextTextInput=!1,this.handleKey(l,a))}},provide:()=>[EditorView.inputHandler.of((l,a,o,u)=>{var p,d,f=getCM(l);if(!f)return!1;var g=(p=f.state)===null||p===void 0?void 0:p.vim,b=f.state.vimPlugin;if(g&&!g.insertMode&&!(!((d=f.curOp)===null||d===void 0)&&d.isVimOp)){if(u==="\0\0")return!0;if(CodeMirror.signal(f,"inputEvent",{type:"text",text:u,from:a,to:o}),u.length==1&&b.useNextTextInput){if(g.expectLiteralNext&&l.composing)return b.compositionText=u,!1;if(b.compositionText){var O=b.compositionText;b.compositionText="";var S=l.state.selection.main.head,M=l.state.sliceDoc(S-O.length,S);if(O===M){var A=f.getCursor();f.replaceRange("",f.posFromIndex(S-O.length),A)}}return b.handleKey({key:u,preventDefault:()=>{},stopPropagation:()=>{}}),forceEndComposition(l),!0}}return!1})],decorations:l=>l.decorations});function forceEndComposition(l){var a=l.scrollDOM.parentElement;if(a){if(FIREFOX_LINUX){l.contentDOM.textContent="\0\0",l.contentDOM.dispatchEvent(new CustomEvent("compositionend"));return}var o=l.scrollDOM.nextSibling,u=window.getSelection(),p=u&&{anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset};l.scrollDOM.remove(),a.insertBefore(l.scrollDOM,o);try{p&&u&&(u.setPosition(p.anchorNode,p.anchorOffset),p.focusNode&&u.extend(p.focusNode,p.focusOffset))}catch(d){console.error(d)}l.focus(),l.contentDOM.dispatchEvent(new CustomEvent("compositionend"))}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),showVimPanel=StateEffect.define(),vimPanelState=StateField.define({create:()=>!1,update(l,a){for(let o of a.effects)o.is(showVimPanel)&&(l=o.value);return l},provide:l=>showPanel.from(l,a=>a?createVimPanel:null)});function createVimPanel(l){let a=document.createElement("div");a.className="cm-vim-panel";let o=l.cm;return o.state.dialog&&a.appendChild(o.state.dialog),{top:!1,dom:a}}function statusPanel(l){let a=document.createElement("div");a.className="cm-vim-panel";let o=l.cm;return o.state.statusbar=a,o.state.vimPlugin.updateStatus(),{dom:a}}function vim(l={}){return[vimStyle,vimPlugin,hideNativeSelection,l.status?showPanel.of(statusPanel):vimPanelState]}function getCM(l){return l.cm||null}class SelectedDiagnostic{constructor(a,o,u){this.from=a,this.to=o,this.diagnostic=u}}class LintState{constructor(a,o,u){this.diagnostics=a,this.panel=o,this.selected=u}static init(a,o,u){let p=a,d=u.facet(lintConfig).markerFilter;d&&(p=d(p,u));let f=a.slice().sort((M,A)=>M.from-A.from||M.to-A.to),g=new RangeSetBuilder,b=[],O=0;for(let M=0;;){let A=M==f.length?null:f[M];if(!A&&!b.length)break;let F,$;for(b.length?(F=O,$=b.reduce((I,U)=>Math.min(I,U.to),A&&A.from>F?A.from:1e8)):(F=A.from,$=A.to,b.push(A),M++);M<f.length;){let I=f[M];if(I.from==F&&(I.to>I.from||I.to==F))b.push(I),M++,$=Math.min(I.to,$);else{$=Math.min(I.from,$);break}}let B=maxSeverity(b);if(b.some(I=>I.from==I.to||I.from==I.to-1&&u.doc.lineAt(I.from).to==I.from))g.add(F,F,Decoration.widget({widget:new DiagnosticWidget(B),diagnostics:b.slice()}));else{let I=b.reduce((U,te)=>te.markClass?U+" "+te.markClass:U,"");g.add(F,$,Decoration.mark({class:"cm-lintRange cm-lintRange-"+B+I,diagnostics:b.slice(),inclusiveEnd:b.some(U=>U.to>$)}))}O=$;for(let I=0;I<b.length;I++)b[I].to<=O&&b.splice(I--,1)}let S=g.finish();return new LintState(S,o,findDiagnostic(S))}}function findDiagnostic(l,a=null,o=0){let u=null;return l.between(o,1e9,(p,d,{spec:f})=>{if(!(a&&f.diagnostics.indexOf(a)<0))if(!u)u=new SelectedDiagnostic(p,d,a||f.diagnostics[0]);else{if(f.diagnostics.indexOf(u.diagnostic)<0)return!1;u=new SelectedDiagnostic(u.from,d,u.diagnostic)}}),u}function hideTooltip(l,a){let o=a.pos,u=a.end||o,p=l.state.facet(lintConfig).hideOn(l,o,u);if(p!=null)return p;let d=l.startState.doc.lineAt(a.pos);return!!(l.effects.some(f=>f.is(setDiagnosticsEffect))||l.changes.touchesRange(d.from,Math.max(d.to,u)))}function maybeEnableLint(l,a){return l.field(lintState,!1)?a:a.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(l,a){if(a.docChanged&&l.diagnostics.size){let o=l.diagnostics.map(a.changes),u=null,p=l.panel;if(l.selected){let d=a.changes.mapPos(l.selected.from,1);u=findDiagnostic(o,l.selected.diagnostic,d)||findDiagnostic(o,null,d)}!o.size&&p&&a.state.facet(lintConfig).autoPanel&&(p=null),l=new LintState(o,p,u)}for(let o of a.effects)if(o.is(setDiagnosticsEffect)){let u=a.state.facet(lintConfig).autoPanel?o.value.length?LintPanel.open:null:l.panel;l=LintState.init(o.value,u,a.state)}else o.is(togglePanel)?l=new LintState(l.diagnostics,o.value?LintPanel.open:null,l.selected):o.is(movePanelSelection)&&(l=new LintState(l.diagnostics,l.panel,o.value));return l},provide:l=>[showPanel.from(l,a=>a.panel),EditorView.decorations.from(l,a=>a.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(l,a,o){let{diagnostics:u}=l.state.field(lintState),p,d=-1,f=-1;u.between(a-(o<0?1:0),a+(o>0?1:0),(b,O,{spec:S})=>{if(a>=b&&a<=O&&(b==O||(a>b||o>0)&&(a<O||o<0)))return p=S.diagnostics,d=b,f=O,!1});let g=l.state.facet(lintConfig).tooltipFilter;return p&&g&&(p=g(p,l.state)),p?{pos:d,end:f,above:l.state.doc.lineAt(d).to<f,create(){return{dom:diagnosticsTooltip(l,p)}}}:null}function diagnosticsTooltip(l,a){return crelt("ul",{class:"cm-tooltip-lint"},a.map(o=>renderDiagnostic(l,o,!1)))}const openLintPanel=l=>{let a=l.state.field(lintState,!1);(!a||!a.panel)&&l.dispatch({effects:maybeEnableLint(l.state,[togglePanel.of(!0)])});let o=getPanel(l,LintPanel.open);return o&&o.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=l=>{let a=l.state.field(lintState,!1);return!a||!a.panel?!1:(l.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=l=>{let a=l.state.field(lintState,!1);if(!a)return!1;let o=l.state.selection.main,u=a.diagnostics.iter(o.to+1);return!u.value&&(u=a.diagnostics.iter(0),!u.value||u.from==o.from&&u.to==o.to)?!1:(l.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0}),!0)},lintConfig=Facet.define({combine(l){return Object.assign({sources:l.map(a=>a.source).filter(a=>a!=null)},combineConfig(l.map(a=>a.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(a,o)=>a?o?u=>a(u)||o(u):a:o}))}});function assignKeys(l){let a=[];if(l)e:for(let{name:o}of l){for(let u=0;u<o.length;u++){let p=o[u];if(/[a-zA-Z]/.test(p)&&!a.some(d=>d.toLowerCase()==p.toLowerCase())){a.push(p);continue e}}a.push("")}return a}function renderDiagnostic(l,a,o){var u;let p=o?assignKeys(a.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+a.severity},crelt("span",{class:"cm-diagnosticText"},a.renderMessage?a.renderMessage(l):a.message),(u=a.actions)===null||u===void 0?void 0:u.map((d,f)=>{let g=!1,b=A=>{if(A.preventDefault(),g)return;g=!0;let F=findDiagnostic(l.state.field(lintState).diagnostics,a);F&&d.apply(l,F.from,F.to)},{name:O}=d,S=p[f]?O.indexOf(p[f]):-1,M=S<0?O:[O.slice(0,S),crelt("u",O.slice(S,S+1)),O.slice(S+1)];return crelt("button",{type:"button",class:"cm-diagnosticAction",onclick:b,onmousedown:b,"aria-label":` Action: ${O}${S<0?"":` (access key "${p[f]})"`}.`},M)}),a.source&&crelt("div",{class:"cm-diagnosticSource"},a.source))}class DiagnosticWidget extends WidgetType{constructor(a){super(),this.sev=a}eq(a){return a.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(a,o){this.diagnostic=o,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(a,o,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(a){this.view=a,this.items=[];let o=p=>{if(p.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(p.keyCode==38||p.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(p.keyCode==40||p.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(p.keyCode==36)this.moveSelection(0);else if(p.keyCode==35)this.moveSelection(this.items.length-1);else if(p.keyCode==13)this.view.focus();else if(p.keyCode>=65&&p.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:d}=this.items[this.selectedIndex],f=assignKeys(d.actions);for(let g=0;g<f.length;g++)if(f[g].toUpperCase().charCodeAt(0)==p.keyCode){let b=findDiagnostic(this.view.state.field(lintState).diagnostics,d);b&&d.actions[g].apply(a,b.from,b.to)}}else return;p.preventDefault()},u=p=>{for(let d=0;d<this.items.length;d++)this.items[d].dom.contains(p.target)&&this.moveSelection(d)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:o,onclick:u}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"×")),this.update()}get selectedIndex(){let a=this.view.state.field(lintState).selected;if(!a)return-1;for(let o=0;o<this.items.length;o++)if(this.items[o].diagnostic==a.diagnostic)return o;return-1}update(){let{diagnostics:a,selected:o}=this.view.state.field(lintState),u=0,p=!1,d=null,f=new Set;for(a.between(0,this.view.state.doc.length,(g,b,{spec:O})=>{for(let S of O.diagnostics){if(f.has(S))continue;f.add(S);let M=-1,A;for(let F=u;F<this.items.length;F++)if(this.items[F].diagnostic==S){M=F;break}M<0?(A=new PanelItem(this.view,S),this.items.splice(u,0,A),p=!0):(A=this.items[M],M>u&&(this.items.splice(u,M-u),p=!0)),o&&A.diagnostic==o.diagnostic?A.dom.hasAttribute("aria-selected")||(A.dom.setAttribute("aria-selected","true"),d=A):A.dom.hasAttribute("aria-selected")&&A.dom.removeAttribute("aria-selected"),u++}});u<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)p=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),p=!0),d?(this.list.setAttribute("aria-activedescendant",d.id),this.view.requestMeasure({key:this,read:()=>({sel:d.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:g,panel:b})=>{let O=b.height/this.list.offsetHeight;g.top<b.top?this.list.scrollTop-=(b.top-g.top)/O:g.bottom>b.bottom&&(this.list.scrollTop+=(g.bottom-b.bottom)/O)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),p&&this.sync()}sync(){let a=this.list.firstChild;function o(){let u=a;a=u.nextSibling,u.remove()}for(let u of this.items)if(u.dom.parentNode==this.list){for(;a!=u.dom;)o();a=u.dom.nextSibling}else this.list.insertBefore(u.dom,a);for(;a;)o()}moveSelection(a){if(this.selectedIndex<0)return;let o=this.view.state.field(lintState),u=findDiagnostic(o.diagnostics,this.items[a].diagnostic);u&&this.view.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0,effects:movePanelSelection.of(u)})}static open(a){return new LintPanel(a)}}function svg(l,a='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${a}>${encodeURIComponent(l)}</svg>')`}function underline(l){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${l}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(l){return l=="error"?4:l=="warning"?3:l=="info"?2:1}function maxSeverity(l){let a="hint",o=1;for(let u of l){let p=severityWeight(u.severity);p>o&&(o=p,a=u.severity)}return a}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],l=>{let{selected:a,panel:o}=l.field(lintState);return!a||!o||a.from==a.to?Decoration.none:Decoration.set([activeMark.range(a.from,a.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],createAddCursor=l=>a=>{const o=l==="down";let u=a.state.selection;for(const p of u.ranges)u=u.addRange(a.moveVertically(p,o));return a.dispatch({selection:u}),!0},addCursorUp=createAddCursor("up"),addCursorDown=createAddCursor("down"),addCursorAtEachSelectionLine=l=>{let a=null;for(const o of l.state.selection.ranges)if(!o.empty)for(let u=o.from;u<=o.to;){const p=l.state.doc.lineAt(u),d=Math.min(p.to,o.to);a?a=a.addRange(EditorSelection.range(d,d)):a=EditorSelection.single(d),u=p.to+1}return a?(l.dispatch({selection:a}),!0):!1},vscodeKeymap=[{key:"Ctrl-Space",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion},{key:"Tab",run:acceptCompletion},{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Alt-Enter",run:selectMatches,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:replaceAll,scope:"editor search-panel"},{key:"Ctrl-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0},{key:"Shift-Mod-l",run:selectSelectionMatches},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:addCursorUp,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:addCursorDown,preventDefault:!0},{key:"Shift-Alt-i",run:addCursorAtEachSelectionLine},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteBracketPair},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward},{mac:"Mod-Backspace",run:deleteToLineStart},{mac:"Mod-Delete",run:deleteToLineEnd},{mac:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{mac:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{mac:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{mac:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{mac:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{mac:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{mac:"Ctrl-d",run:deleteCharForward},{mac:"Ctrl-h",run:deleteCharBackward},{mac:"Ctrl-k",run:deleteToLineEnd},{mac:"Ctrl-Alt-h",run:deleteGroupBackward},{mac:"Ctrl-o",run:splitLine},{mac:"Ctrl-t",run:transposeChars},{mac:"Ctrl-v",run:cursorPageDown},{mac:"Alt-v",run:cursorPageUp},{key:"Shift-Mod-k",run:deleteLine},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Alt-ArrowUp",run:moveLineUp},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:copyLineDown},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Mod-l",run:selectLine,preventDefault:!0},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Tab",run:indentMore,shift:indentLess,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Mod-k Mod-0",run:foldAll},{key:"Mod-k Mod-j",run:unfoldAll},{key:"Mod-k Mod-c",run:lineComment},{key:"Mod-k Mod-u",run:lineUncomment},{key:"Mod-/",run:toggleComment},{key:"Shift-Alt-a",run:toggleBlockComment},{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",run:redo,preventDefault:!0},{key:"Mod-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Mod-Shift-m",run:openLintPanel},{key:"F8",run:nextDiagnostic}],vscodePlugin=ViewPlugin.fromClass(class{constructor(){}},{provide:()=>Prec.highest(keymap.of([...vscodeKeymap]))}),vscodeExtension=l=>[vscodePlugin].concat(l??[]),keymaps={vim,emacs,codemirror:()=>keymap.of(defaultKeymap),vscode:vscodeExtension};function keybindings(l){const a=keymaps[l];return[a?Prec.high(a()):[]]}const createTheme=({theme:l,settings:a,styles:o})=>{const u=EditorView.theme({"&":{color:a.foreground,backgroundColor:a.background},".cm-gutters":{backgroundColor:a.gutterBackground,color:a.gutterForeground},".cm-content":{caretColor:a.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:a.caret},".cm-activeLineGutter":{backgroundColor:a.lineHighlight},".cm-activeLine":{backgroundColor:a.lineHighlight},"&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection":{background:a.selection+" !important"},"& .cm-selectionMatch":{backgroundColor:a.selectionMatch}},{dark:l==="dark"}),p=HighlightStyle.define(o);return[u,syntaxHighlighting(p)]},settings$D={background:"#222",lineBackground:"#22222299",foreground:"#fff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},strudelTheme=createTheme({theme:"dark",settings:settings$D,styles:[{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#89ddff"},{tag:tags.labelName,color:"#89ddff"},{tag:tags.keyword,color:"#c792ea"},{tag:tags.operator,color:"#89ddff"},{tag:tags.special(tags.variableName),color:"#eeffff"},{tag:tags.typeName,color:"#c3e88d"},{tag:tags.atom,color:"#f78c6c"},{tag:tags.number,color:"#c3e88d"},{tag:tags.definition(tags.variableName),color:"#82aaff"},{tag:tags.string,color:"#c3e88d"},{tag:tags.special(tags.string),color:"#c3e88d"},{tag:tags.comment,color:"#7d8799"},{tag:tags.variableName,color:"#c792ea"},{tag:tags.tagName,color:"#c3e88d"},{tag:tags.bracket,color:"#525154"},{tag:tags.meta,color:"#ffcb6b"},{tag:tags.attributeName,color:"#c792ea"},{tag:tags.propertyName,color:"#c792ea"},{tag:tags.className,color:"#decb6b"},{tag:tags.invalid,color:"#ffffff"},{tag:[tags.unit,tags.punctuation],color:"#82aaff"}]}),settings$C={background:"#051DB5",lineBackground:"#051DB550",foreground:"white",caret:"white",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},bluescreen=createTheme({theme:"dark",settings:settings$C,styles:[{tag:tags.labelName,color:"inherit"},{tag:tags.keyword,color:"inherit"},{tag:tags.operator,color:"inherit"},{tag:tags.special(tags.variableName),color:"inherit"},{tag:tags.typeName,color:"inherit"},{tag:tags.atom,color:"inherit"},{tag:tags.number,color:"inherit"},{tag:tags.definition(tags.variableName),color:"inherit"},{tag:tags.string,color:"inherit"},{tag:tags.special(tags.string),color:"inherit"},{tag:tags.comment,color:"inherit"},{tag:tags.variableName,color:"inherit"},{tag:tags.tagName,color:"inherit"},{tag:tags.bracket,color:"inherit"},{tag:tags.meta,color:"inherit"},{tag:tags.attributeName,color:"inherit"},{tag:tags.propertyName,color:"inherit"},{tag:tags.className,color:"inherit"},{tag:tags.invalid,color:"inherit"},{tag:[tags.unit,tags.punctuation],color:"inherit"}]}),settings$B={background:"black",foreground:"white",caret:"white",selection:"#ffffff20",selectionMatch:"#036dd626",lineHighlight:"#ffffff10",lineBackground:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"},blackscreen=createTheme({theme:"dark",settings:settings$B,styles:[{tag:tags.labelName,color:"inherit"},{tag:tags.keyword,color:"inherit"},{tag:tags.operator,color:"inherit"},{tag:tags.special(tags.variableName),color:"inherit"},{tag:tags.typeName,color:"inherit"},{tag:tags.atom,color:"inherit"},{tag:tags.number,color:"inherit"},{tag:tags.definition(tags.variableName),color:"inherit"},{tag:tags.string,color:"inherit"},{tag:tags.special(tags.string),color:"inherit"},{tag:tags.comment,color:"inherit"},{tag:tags.variableName,color:"inherit"},{tag:tags.tagName,color:"inherit"},{tag:tags.bracket,color:"inherit"},{tag:tags.meta,color:"inherit"},{tag:tags.attributeName,color:"inherit"},{tag:tags.propertyName,color:"inherit"},{tag:tags.className,color:"inherit"},{tag:tags.invalid,color:"inherit"},{tag:[tags.unit,tags.punctuation],color:"inherit"}]}),settings$A={background:"white",foreground:"black",caret:"black",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#ffffff26",lineHighlight:"#cccccc50",lineBackground:"#ffffff50",gutterBackground:"transparent",gutterForeground:"black",light:!0},whitescreen=createTheme({theme:"light",settings:settings$A,styles:[{tag:tags.labelName,color:"inherit"},{tag:tags.keyword,color:"inherit"},{tag:tags.operator,color:"inherit"},{tag:tags.special(tags.variableName),color:"inherit"},{tag:tags.typeName,color:"inherit"},{tag:tags.atom,color:"inherit"},{tag:tags.number,color:"inherit"},{tag:tags.definition(tags.variableName),color:"inherit"},{tag:tags.string,color:"inherit"},{tag:tags.special(tags.string),color:"inherit"},{tag:tags.comment,color:"inherit"},{tag:tags.variableName,color:"inherit"},{tag:tags.tagName,color:"inherit"},{tag:tags.bracket,color:"inherit"},{tag:tags.meta,color:"inherit"},{tag:tags.attributeName,color:"inherit"},{tag:tags.propertyName,color:"inherit"},{tag:tags.className,color:"inherit"},{tag:tags.invalid,color:"inherit"}]});let colorA="#6edee4",colorB="white",colorC="red",colorD="#f8fc55";const settings$z={background:"#000000",foreground:colorA,caret:colorC,selection:colorD,selectionMatch:colorA,lineHighlight:"#6edee440",lineBackground:"#00000040",gutterBackground:"transparent",gutterForeground:"#8a919966"};let punctuation=colorD,mini=colorB;const teletext=createTheme({theme:"dark",settings:settings$z,styles:[{tag:tags.labelName,color:colorB},{tag:tags.keyword,color:colorA},{tag:tags.operator,color:mini},{tag:tags.special(tags.variableName),color:colorA},{tag:tags.typeName,color:colorA},{tag:tags.atom,color:colorA},{tag:tags.number,color:mini},{tag:tags.definition(tags.variableName),color:colorA},{tag:tags.string,color:mini},{tag:tags.special(tags.string),color:mini},{tag:tags.comment,color:punctuation},{tag:tags.variableName,color:colorA},{tag:tags.tagName,color:colorA},{tag:tags.bracket,color:punctuation},{tag:tags.meta,color:colorA},{tag:tags.attributeName,color:colorA},{tag:tags.propertyName,color:colorA},{tag:tags.className,color:colorA},{tag:tags.invalid,color:colorC},{tag:[tags.unit,tags.punctuation],color:punctuation}]}),palettes={"Central Florida A":["#FFF630","#B3AC22","#666213","#191905"],"Central Florida B":["#38CEBA","#279082","#16524A","#061513"],"Central Florida C":["#FF8836","#B35F26","#663616","#190E05"],"Central Florida D":["#E07070","#9D4E4E","#5A2D2D","#160B0B"],"Central Florida E":["#7AA4CB","#55738E","#314251","#0C1014"],"Feminine Energy A":["#DC5686","#9A415E","#582536","#16090D"],"Feminine Energy B":["#D0463C","#92312A","#531c18","#150706"],"Feminine Energy C":["#D86918","#974A11","#562A0A","#160A02"],"Feminine Energy D":["#EFC54F","#A78A36","#604F20","#181408"],"Feminine Energy E":["#866399","#5e456b","#36283d","#0d0a0f"],"Sour Watermelon A":["#993366","#6B2447","#3D1429","#0F050A"],"Sour Watermelon B":["#996666","#6B4747","#3D2929","#0F0A0A"],"Sour Watermelon C":["#999966","#686B47","#3d3d29","#0f0f0A"],"Sour Watermelon D":["#99cc66","#6b8f47","#3d5229","#0f140a"],"Sour Watermelon E":["#99ff66","#6bb347","#3d6629","#0f190a"],"Peri Peaceful A":["#909BE9","#656DA3","#3A3E5D","#0e0f17"],"Peri Peaceful B":["#68628d","#494563","#2a2738","#0a0a0e"],"Peri Peaceful E":["#b5a0a9","#7f7076","#484044","#121011"],"Hichem Palette B":["#4fa3a5","#377273","#204142","#081010"],"Hichem Palette C":["#Fe6f9b","#b24e6d","#662c3e","#190b0f"],"Hichem Palette D":["#ffbb5a","#b3833f","#664b24","#191309"],"JSR2 A":["#E0EFC0","#9da786","#5a604d","#161813"]},palette=palettes["Sour Watermelon B"],settings$y={background:palette[3],foreground:palette[1],caret:palette[0],selection:palette[0],selectionMatch:palette[1],lineHighlight:palette[3],lineBackground:palette[3]+"90",gutterBackground:"transparent",gutterForeground:palette[0],light:!1},algoboy=createTheme({theme:"dark",settings:settings$y,styles:[{tag:tags.comment,color:palette[2]},{tag:tags.string,color:palette[1]},{tag:[tags.atom,tags.number],color:palette[1]},{tag:[tags.meta,tags.labelName,tags.variableName],color:palette[0]},{tag:[tags.keyword,tags.tagName,tags.arithmeticOperator],color:palette[1]},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:palette[0]},{tag:[tags.function(tags.variableName),tags.propertyName],color:palette[0]},{tag:tags.atom,color:palette[1]}]}),deepPurple="#5c019a",yellowPink="#fbeffc",grey="#272C35",pinkAccent="#fee1ff",lightGrey="#465063",bratGreen="#9acd3f",lighterGrey="#97a1b7",pink="#f6a6fd",settings$x={background:"white",lineBackground:"transparent",foreground:deepPurple,caret:"#797977",selection:yellowPink,selectionMatch:"#2B323D",gutterBackground:grey,gutterForeground:lightGrey,gutterBorder:"transparent",lineHighlight:pinkAccent},CutiePi=createTheme({theme:"light",settings:settings$x,styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:deepPurple},{tag:[tags.tagName,tags.heading],color:settings$x.foreground},{tag:tags.comment,color:lighterGrey},{tag:[tags.variableName,tags.propertyName,tags.labelName],color:pink},{tag:[tags.attributeName,tags.number],color:"#d19a66"},{tag:tags.className,color:grey},{tag:tags.keyword,color:deepPurple},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:bratGreen}]}),hex$5=["#1e1e1e","#fbde2d","#ff1493","#4c83ff","#ededed","#cccccc","#ffffff30","#dc2f8c"],settings$w={background:"#000000",lineBackground:"transparent",foreground:hex$5[4],selection:hex$5[6],gutterBackground:hex$5[0],gutterForeground:hex$5[5],gutterBorder:"transparent",lineHighlight:hex$5[0]},sonicPink=createTheme({theme:"dark",settings:settings$w,styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:hex$5[4]},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:hex$5[3]},{tag:tags.comment,color:"#54636D"},{tag:[tags.variableName,tags.propertyName,tags.labelName],color:hex$5[4]},{tag:[tags.attributeName,tags.number],color:hex$5[3]},{tag:tags.keyword,color:hex$5[1]},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:hex$5[2]}]}),hex$4=["#000000","#ff5356","#bd312a","#54636D","#171717"],settings$v={background:hex$4[0],lineBackground:"transparent",foreground:hex$4[2],selection:hex$4[4],selectionMatch:hex$4[0],gutterBackground:hex$4[0],gutterForeground:hex$4[3],gutterBorder:"transparent",lineHighlight:hex$4[0]},redText=createTheme({theme:"dark",settings:settings$v,styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:hex$4[2]},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:hex$4[1]},{tag:tags.comment,color:hex$4[3]},{tag:[tags.variableName,tags.propertyName,tags.labelName],color:hex$4[2]},{tag:[tags.attributeName,tags.number],color:hex$4[1]},{tag:tags.keyword,color:hex$4[2]},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:hex$4[1]}]}),hex$3=["#000000","#8ed675","#56bd2a","#54636D","#171717"],settings$u={background:hex$3[0],lineBackground:"transparent",foreground:hex$3[2],selection:hex$3[4],selectionMatch:hex$3[0],gutterBackground:hex$3[0],gutterForeground:hex$3[3],gutterBorder:"transparent",lineHighlight:hex$3[0]},greenText=createTheme({theme:"dark",settings:settings$u,styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:hex$3[2]},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:hex$3[1]},{tag:tags.comment,color:hex$3[3]},{tag:[tags.variableName,tags.propertyName,tags.labelName],color:hex$3[2]},{tag:[tags.attributeName,tags.number],color:hex$3[1]},{tag:tags.keyword,color:hex$3[2]},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:hex$3[1]}]}),hex$2=["rgb(0, 0, 0)","rgb(82, 208, 250)","rgba(113, 208, 250, .4)","rgba(113, 208, 250, .15)"],settings$t={background:hex$2[0],lineBackground:"transparent",foreground:hex$2[1],selection:hex$2[2],selectionMatch:hex$2[0],gutterBackground:hex$2[0],gutterForeground:hex$2[2],gutterBorder:"transparent",lineHighlight:hex$2[0]},archBtw=createTheme({theme:"dark",settings:settings$t,styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:hex$2[1]},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:hex$2[1]},{tag:[tags.comment,tags.brace,tags.bracket],color:hex$2[2]},{tag:[tags.variableName,tags.propertyName,tags.labelName],color:hex$2[1]},{tag:[tags.attributeName,tags.number],color:hex$2[1]},{tag:tags.keyword,color:hex$2[1]},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:hex$2[1]}]}),hex$1=["rgb(84, 93, 98)","rgb(255, 255, 255)","rgba(255, 255, 255, .25)","rgb(67, 76, 81)","rgb(186, 230, 115)","rgb(252, 184, 67)","rgb(124, 206, 254)","rgb(83, 101, 102)","rgba(46, 62, 72,.5)","rgb(94, 100, 108)","rgb(167, 216, 177)"],settings$s={background:hex$1[0],lineBackground:"transparent",foreground:hex$1[10],selection:hex$1[8],selectionMatch:hex$1[0],gutterBackground:hex$1[3],gutterForeground:hex$1[2],gutterBorder:"transparent",lineHighlight:hex$1[3]},fruitDaw=createTheme({theme:"dark",settings:settings$s,styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:hex$1[1]},{tag:[tags.bool,tags.special(tags.variableName)],color:hex$1[1]},{tag:[tags.comment,tags.brace,tags.bracket],color:hex$1[2]},{tag:[tags.variableName],color:hex$1[1]},{tag:[tags.labelName,tags.propertyName,tags.self,tags.atom],color:hex$1[5]},{tag:[tags.attributeName,tags.number],color:hex$1[6]},{tag:tags.keyword,color:hex$1[5]},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:hex$1[4]}]}),hex=["rgb(75, 130, 247)","rgb(47, 108, 246)","rgb(255, 255, 255)","rgba(255, 255, 255,.3)"],settings$r={background:hex[0],lineBackground:"transparent",foreground:hex[2],selection:hex[3],selectionMatch:hex[0],gutterBackground:hex[0],gutterForeground:hex[2],gutterBorder:"transparent",lineHighlight:hex[1]},bluescreenlight=createTheme({theme:"dark",settings:settings$r,styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:hex[2]},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:hex[2]},{tag:[tags.comment,tags.bracket,tags.brace,tags.compareOperator],color:hex[3]},{tag:[tags.variableName,tags.propertyName,tags.labelName],color:hex[2]},{tag:[tags.attributeName,tags.number],color:hex[2]},{tag:tags.keyword,color:hex[2]},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:hex[2]}]}),settings$q={background:"#282b2e",lineBackground:"#282b2e99",foreground:"#a9b7c6",caret:"#00FF00",selection:"#343739",selectionMatch:"#343739",lineHighlight:"#343739"},androidstudio=createTheme({theme:"dark",settings:{background:"#282b2e",foreground:"#a9b7c6",caret:"#00FF00",selection:"#4e5254",selectionMatch:"#4e5254",gutterForeground:"#cccccc50",lineHighlight:"#7f85891f"},styles:[{tag:tags.labelName,color:"inherit"},{tag:[tags.keyword,tags.deleted,tags.className],color:"#a9b7c6"},{tag:[tags.number,tags.literal],color:"#6897bb"},{tag:[tags.link,tags.variableName],color:"#a9b7c6"},{tag:[tags.comment,tags.quote],color:"grey"},{tag:[tags.meta,tags.documentMeta],color:"#bbb529"},{tag:[tags.propertyName,tags.attributeValue],color:"#a9b7c6"},{tag:[tags.string],color:"#6a8759"},{tag:[tags.heading,tags.typeName],color:"#ffc66d"},{tag:[tags.attributeName],color:"#a9b7c6"},{tag:[tags.emphasis],fontStyle:"italic"}]}),settings$p={background:"#272C35",lineBackground:"#272C3599",foreground:"hsl(220, 14%, 71%)",caret:"#797977",selection:"#ffffff30",selectionMatch:"#2B323D",gutterBackground:"#272C35",gutterForeground:"#465063",gutterBorder:"transparent",lineHighlight:"#2B323D"},atomone=createTheme({theme:"dark",settings:{background:"#272C35",foreground:"#9d9b97",caret:"#797977",selection:"#3d4c64",selectionMatch:"#3d4c64",gutterBackground:"#272C35",gutterForeground:"#465063",gutterBorder:"transparent",lineHighlight:"#2e3f5940"},styles:[{tag:[tags.function(tags.variableName),tags.function(tags.propertyName),tags.url,tags.processingInstruction],color:"hsl(207, 82%, 66%)"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"hsl( 29, 54%, 61%)"},{tag:[tags.tagName,tags.heading],color:"#e06c75"},{tag:tags.comment,color:"#54636D"},{tag:[tags.variableName,tags.propertyName,tags.labelName],color:"hsl(220, 14%, 71%)"},{tag:[tags.attributeName,tags.number],color:"hsl( 29, 54%, 61%)"},{tag:tags.className,color:"hsl( 39, 67%, 69%)"},{tag:tags.keyword,color:"hsl(286, 60%, 67%)"},{tag:[tags.string,tags.regexp,tags.special(tags.propertyName)],color:"#98c379"}]}),settings$o={background:"#21202e",lineBackground:"#21202e99",foreground:"#edecee",caret:"#a277ff",selection:"#3d375e7f",selectionMatch:"#3d375e7f",gutterBackground:"#21202e",gutterForeground:"#edecee",gutterBorder:"transparent",lineHighlight:"#a394f033"},aura=createTheme({theme:"dark",settings:{background:"#21202e",foreground:"#edecee",caret:"#a277ff",selection:"#5a51898f",selectionMatch:"#5a51898f",gutterBackground:"#21202e",gutterForeground:"#edecee",gutterBorder:"transparent",lineHighlight:"#a394f033"},styles:[{tag:tags.keyword,color:"#a277ff"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#edecee"},{tag:[tags.propertyName],color:"#ffca85"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#61ffca"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#ffca85"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#61ffca"},{tag:[tags.definition(tags.name),tags.separator],color:"#edecee"},{tag:[tags.className],color:"#82e2ff"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#61ffca"},{tag:[tags.typeName],color:"#82e2ff"},{tag:[tags.operator,tags.operatorKeyword],color:"#a277ff"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#61ffca"},{tag:[tags.meta,tags.comment],color:"#6d6d6d"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#a277ff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#edecee"},{tag:tags.invalid,color:"#ff6767"},{tag:tags.strikethrough,textDecoration:"line-through"}]}),settings$n={background:"#242424",lineBackground:"#24242499",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"rgba(255, 255, 255, 0.1)",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},darcula=createTheme({theme:"dark",settings:{background:"#242424",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"transparent",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},styles:[{tag:tags.labelName,color:"#CCCCCC"},{tag:[tags.atom,tags.number],color:"#7A9EC2"},{tag:[tags.comment],color:"#707070"},{tag:[tags.string],color:"#6A8759"},{tag:[tags.variableName,tags.operator],color:"#CCCCCC"},{tag:[tags.function(tags.variableName),tags.propertyName],color:"#FFC66D"},{tag:[tags.meta,tags.className],color:"#FFC66D"},{tag:[tags.propertyName],color:"#FFC66D"},{tag:[tags.keyword],color:"#CC7832"},{tag:[tags.tagName],color:"#ff79c6"},{tag:[tags.typeName],color:"#ffb86c"}]}),settings$m={background:"#282a36",lineBackground:"#282a3699",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"#282a36",gutterForeground:"#6272a4",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},purple="#BD93F9",dracula=createTheme({theme:"dark",settings:{background:"#282a36",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"#282a36",gutterForeground:"#6272a4",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},styles:[{tag:tags.comment,color:"#6272a4"},{tag:tags.string,color:"#f1fa8c"},{tag:[tags.atom,tags.number],color:purple},{tag:[tags.meta,tags.labelName,tags.variableName],color:"#f8f8f2"},{tag:[tags.keyword,tags.tagName,tags.arithmeticOperator],color:"#ff79c6"},{tag:[tags.function(tags.variableName),tags.propertyName],color:"#50fa7b"},{tag:tags.atom,color:"#bd93f9"}]}),settings$l={background:"#2a2734",lineBackground:"#2a273499",foreground:"#eeebff",caret:"#ffad5c",selection:"rgba(255, 255, 255, 0.1)",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"},duotoneDark=createTheme({theme:"dark",settings:{background:"#2a2734",foreground:"#6c6783",caret:"#ffad5c",selection:"#9a86fd",selectionMatch:"#9a86fd",gutterBackground:"#2a2734",gutterForeground:"#545167",lineHighlight:"#36334280"},styles:[{tag:[tags.comment,tags.bracket,tags.operator],color:"#6c6783"},{tag:[tags.atom,tags.number,tags.keyword,tags.link,tags.attributeName,tags.quote],color:"#ffcc99"},{tag:[tags.emphasis,tags.heading,tags.tagName,tags.propertyName,tags.className,tags.variableName],color:"#eeebff"},{tag:[tags.typeName,tags.url],color:"#eeebff"},{tag:tags.string,color:"#ffb870"},{tag:[tags.propertyName],color:"#eeebff"},{tag:tags.labelName,color:"#eeebff"}]}),settings$k={light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#000",caret:"#FFFFFF",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#f7f7f7",gutterForeground:"#999",lineHighlight:"#e8f2ff",gutterBorder:"transparent"},eclipse=createTheme({theme:"light",settings:{background:"#fff",foreground:"#000",caret:"#FFFFFF",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#f7f7f7",gutterForeground:"#999",lineHighlight:"#006fff1c",gutterBorder:"transparent"},styles:[{tag:[tags.comment],color:"#3F7F5F"},{tag:[tags.documentMeta],color:"#FF1717"},{tag:tags.keyword,color:"#7F0055",fontWeight:"bold"},{tag:tags.atom,color:"#00f"},{tag:tags.number,color:"#164"},{tag:tags.propertyName,color:"#164"},{tag:[tags.variableName,tags.definition(tags.variableName)],color:"#0000C0"},{tag:tags.function(tags.variableName),color:"#0000C0"},{tag:tags.string,color:"#2A00FF"},{tag:tags.operator,color:"black"},{tag:tags.tagName,color:"#170"},{tag:tags.attributeName,color:"#00c"},{tag:tags.link,color:"#219"}]}),settings$j={background:"#0d1117",lineBackground:"#0d111799",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},githubDark=createTheme({theme:"dark",settings:{background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},styles:[{tag:tags.labelName,color:"#d2a8ff"},{tag:[tags.standard(tags.tagName),tags.tagName],color:"#7ee787"},{tag:[tags.comment,tags.bracket],color:"#8b949e"},{tag:[tags.className,tags.propertyName],color:"#d2a8ff"},{tag:[tags.variableName,tags.attributeName],color:"#d2a8ff"},{tag:[tags.number,tags.operator],color:"#79c0ff"},{tag:[tags.keyword,tags.typeName,tags.typeOperator,tags.typeName],color:"#ff7b72"},{tag:[tags.string,tags.meta,tags.regexp],color:"#a5d6ff"},{tag:[tags.name,tags.quote],color:"#7ee787"},{tag:[tags.heading,tags.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[tags.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[tags.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#ffab70"},{tag:tags.link,textDecoration:"underline"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.invalid,color:"#f97583"}]}),settings$i={light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},githubLight=createTheme({theme:"light",settings:{background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},styles:[{tag:[tags.standard(tags.tagName),tags.tagName],color:"#116329"},{tag:[tags.comment,tags.bracket],color:"#6a737d"},{tag:[tags.className,tags.propertyName],color:"#6f42c1"},{tag:[tags.variableName,tags.attributeName,tags.number,tags.operator],color:"#005cc5"},{tag:[tags.keyword,tags.typeName,tags.typeOperator,tags.typeName],color:"#d73a49"},{tag:[tags.string,tags.meta,tags.regexp],color:"#032f62"},{tag:[tags.name,tags.quote],color:"#22863a"},{tag:[tags.heading,tags.strong],color:"#24292e",fontWeight:"bold"},{tag:[tags.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[tags.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#e36209"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#032f62"},{tag:tags.link,textDecoration:"underline"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.invalid,color:"#cb2431"}]}),settings$h={background:"#282828",lineBackground:"#28282899",foreground:"#ebdbb2",caret:"#ebdbb2",selection:"#bdae93",selectionMatch:"#bdae93",lineHighlight:"#3c3836",gutterBackground:"#282828",gutterForeground:"#7c6f64"},gruvboxDark=createTheme({theme:"dark",settings:{background:"#282828",foreground:"#ebdbb2",caret:"#ebdbb2",selection:"#b99d555c",selectionMatch:"#b99d555c",lineHighlight:"#baa1602b",gutterBackground:"#282828",gutterForeground:"#7c6f64"},styles:[{tag:tags.keyword,color:"#fb4934"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#8ec07c"},{tag:[tags.variableName],color:"#83a598"},{tag:[tags.function(tags.variableName)],color:"#8ec07c",fontStyle:"bold"},{tag:[tags.labelName],color:"#ebdbb2"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#d3869b"},{tag:[tags.definition(tags.name),tags.separator],color:"#ebdbb2"},{tag:[tags.brace],color:"#ebdbb2"},{tag:[tags.annotation],color:"#fb4934d"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#d3869b"},{tag:[tags.typeName,tags.className],color:"#fabd2f"},{tag:[tags.operatorKeyword],color:"#fb4934"},{tag:[tags.tagName],color:"#8ec07c",fontStyle:"bold"},{tag:[tags.squareBracket],color:"#fe8019"},{tag:[tags.angleBracket],color:"#83a598"},{tag:[tags.attributeName],color:"#8ec07c"},{tag:[tags.regexp],color:"#8ec07c"},{tag:[tags.quote],color:"#928374"},{tag:[tags.string],color:"#ebdbb2"},{tag:tags.link,color:"#a89984",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#d3869b"},{tag:[tags.meta],color:"#fabd2f"},{tag:[tags.comment],color:"#928374",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#fe8019"},{tag:tags.emphasis,fontStyle:"italic",color:"#b8bb26"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#b8bb26"},{tag:[tags.heading1,tags.heading2],fontWeight:"bold",color:"#b8bb26"},{tag:[tags.heading3,tags.heading4],fontWeight:"bold",color:"#fabd2f"},{tag:[tags.heading5,tags.heading6],color:"#fabd2f"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d3869b"},{tag:[tags.processingInstruction,tags.inserted],color:"#83a598"},{tag:[tags.contentSeparator],color:"#fb4934"},{tag:tags.invalid,color:"#fe8019",borderBottom:"1px dotted #fb4934d"}]}),settings$g={light:!0,background:"#fbf1c7",lineBackground:"#fbf1c799",foreground:"#3c3836",caret:"#af3a03",selection:"#ebdbb2",selectionMatch:"#bdae93",lineHighlight:"#ebdbb2",gutterBackground:"#ebdbb2",gutterForeground:"#665c54",gutterBorder:"transparent"},gruvboxLight=createTheme({theme:"light",settings:{background:"#fbf1c7",foreground:"#3c3836",caret:"#af3a03",selection:"#bdae9391",selectionMatch:"#bdae9391",lineHighlight:"#a37f2238",gutterBackground:"#ebdbb2",gutterForeground:"#665c54",gutterBorder:"transparent"},styles:[{tag:tags.keyword,color:"#9d0006"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#427b58"},{tag:[tags.variableName],color:"#076678"},{tag:[tags.function(tags.variableName)],color:"#79740e",fontStyle:"bold"},{tag:[tags.labelName],color:"#3c3836"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#8f3f71"},{tag:[tags.definition(tags.name),tags.separator],color:"#3c3836"},{tag:[tags.brace],color:"#3c3836"},{tag:[tags.annotation],color:"#9d0006"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#8f3f71"},{tag:[tags.typeName,tags.className],color:"#b57614"},{tag:[tags.operator,tags.operatorKeyword],color:"#9d0006"},{tag:[tags.tagName],color:"#427b58",fontStyle:"bold"},{tag:[tags.squareBracket],color:"#af3a03"},{tag:[tags.angleBracket],color:"#076678"},{tag:[tags.attributeName],color:"#427b58"},{tag:[tags.regexp],color:"#427b58"},{tag:[tags.quote],color:"#928374"},{tag:[tags.string],color:"#3c3836"},{tag:tags.link,color:"#7c6f64",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#8f3f71"},{tag:[tags.meta],color:"#b57614"},{tag:[tags.comment],color:"#928374",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#af3a03"},{tag:tags.emphasis,fontStyle:"italic",color:"#79740e"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#79740e"},{tag:[tags.heading1,tags.heading2],fontWeight:"bold",color:"#79740e"},{tag:[tags.heading3,tags.heading4],fontWeight:"bold",color:"#b57614"},{tag:[tags.heading5,tags.heading6],color:"#b57614"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#8f3f71"},{tag:[tags.processingInstruction,tags.inserted],color:"#076678"},{tag:[tags.contentSeparator],color:"#9d0006"},{tag:tags.invalid,color:"#af3a03",borderBottom:"1px dotted #9d0006"}]}),settings$f={background:"#212121",lineBackground:"#21212199",foreground:"#bdbdbd",caret:"#a0a4ae",selection:"#d7d4f0",selectionMatch:"#d7d4f0",gutterBackground:"#212121",gutterForeground:"#999",gutterActiveForeground:"#4f5b66",lineHighlight:"#111111"},materialDark=createTheme({theme:"dark",settings:{background:"#212121",foreground:"#bdbdbd",caret:"#a0a4ae",selection:"#d7d4f063",selectionMatch:"#d7d4f063",gutterBackground:"#212121",gutterForeground:"#999",gutterActiveForeground:"#4f5b66",lineHighlight:"#333333"},styles:[{tag:tags.keyword,color:"#cf6edf"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#56c8d8"},{tag:[tags.propertyName],color:"#82AAFF"},{tag:[tags.variableName],color:"#bdbdbd"},{tag:[tags.function(tags.variableName)],color:"#82AAFF"},{tag:[tags.labelName],color:"#cf6edf"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#facf4e"},{tag:[tags.definition(tags.name),tags.separator],color:"#56c8d8"},{tag:[tags.brace],color:"#cf6edf"},{tag:[tags.annotation],color:"#f07178"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#f07178"},{tag:[tags.typeName,tags.className],color:"#f07178"},{tag:[tags.operator,tags.operatorKeyword],color:"#82AAFF"},{tag:[tags.tagName],color:"#99d066"},{tag:[tags.squareBracket],color:"#f07178"},{tag:[tags.angleBracket],color:"#606f7a"},{tag:[tags.attributeName],color:"#bdbdbd"},{tag:[tags.regexp],color:"#f07178"},{tag:[tags.quote],color:"#6abf69"},{tag:[tags.string],color:"#99d066"},{tag:tags.link,color:"#56c8d8",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#facf4e"},{tag:[tags.meta],color:"#707d8b"},{tag:[tags.comment],color:"#707d8b",fontStyle:"italic"},{tag:tags.monospace,color:"#bdbdbd"},{tag:tags.strong,fontWeight:"bold",color:"#f07178"},{tag:tags.emphasis,fontStyle:"italic",color:"#99d066"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#facf4e"},{tag:tags.heading1,fontWeight:"bold",color:"#facf4e"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#facf4e"},{tag:[tags.heading5,tags.heading6],color:"#facf4e"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#56c8d8"},{tag:[tags.processingInstruction,tags.inserted],color:"#f07178"},{tag:[tags.contentSeparator],color:"#56c8d8"},{tag:tags.invalid,color:"#606f7a",borderBottom:"1px dotted #f07178"}]}),settings$e={light:!0,background:"#FAFAFA",lineBackground:"#FAFAFA99",foreground:"#90A4AE",caret:"#272727",selection:"#80CBC440",selectionMatch:"#FAFAFA",gutterBackground:"#FAFAFA",gutterForeground:"#90A4AE",gutterBorder:"transparent",lineHighlight:"#CCD7DA50"},materialLight=createTheme({theme:"light",settings:{background:"#FAFAFA",foreground:"#90A4AE",caret:"#272727",selection:"#80CBC440",selectionMatch:"#80CBC440",gutterBackground:"#FAFAFA",gutterForeground:"#90A4AE",gutterBorder:"transparent",lineHighlight:"#CCD7DA50"},styles:[{tag:tags.keyword,color:"#39ADB5"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#90A4AE"},{tag:[tags.propertyName],color:"#6182B8"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#91B859"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#6182B8"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#39ADB5"},{tag:[tags.definition(tags.name),tags.separator],color:"#90A4AE"},{tag:[tags.className],color:"#E2931D"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#F76D47"},{tag:[tags.typeName],color:"#E2931D",fontStyle:"#E2931D"},{tag:[tags.operator,tags.operatorKeyword],color:"#39ADB5"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#91B859"},{tag:[tags.meta,tags.comment],color:"#90A4AE"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#39ADB5"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#90A4AE"},{tag:tags.invalid,color:"#E5393570"},{tag:tags.strikethrough,textDecoration:"line-through"}]}),settings$d={background:"#2e3440",lineBackground:"#2e344099",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#3b4252",selectionMatch:"#e5e9f0",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a"},nord=createTheme({theme:"dark",settings:{background:"#2e3440",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#00000073",selectionMatch:"#00000073",gutterBackground:"#2e3440",gutterForeground:"#4c566a",gutterActiveForeground:"#d8dee9",lineHighlight:"#4c566a29"},styles:[{tag:tags.keyword,color:"#5e81ac"},{tag:[tags.name,tags.deleted,tags.character,tags.propertyName,tags.macroName],color:"#88c0d0"},{tag:[tags.variableName],color:"#8fbcbb"},{tag:[tags.function(tags.variableName)],color:"#8fbcbb"},{tag:[tags.labelName],color:"#81a1c1"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#5e81ac"},{tag:[tags.definition(tags.name),tags.separator],color:"#a3be8c"},{tag:[tags.brace],color:"#8fbcbb"},{tag:[tags.annotation],color:"#d30102"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#b48ead"},{tag:[tags.typeName,tags.className],color:"#ebcb8b"},{tag:[tags.operator,tags.operatorKeyword],color:"#a3be8c"},{tag:[tags.tagName],color:"#b48ead"},{tag:[tags.squareBracket],color:"#bf616a"},{tag:[tags.angleBracket],color:"#d08770"},{tag:[tags.attributeName],color:"#ebcb8b"},{tag:[tags.regexp],color:"#5e81ac"},{tag:[tags.quote],color:"#b48ead"},{tag:[tags.string],color:"#a3be8c"},{tag:tags.link,color:"#a3be8c",textDecoration:"underline",textUnderlinePosition:"under"},{tag:[tags.url,tags.escape,tags.special(tags.string)],color:"#8fbcbb"},{tag:[tags.meta],color:"#88c0d0"},{tag:[tags.monospace],color:"#d8dee9",fontStyle:"italic"},{tag:[tags.comment],color:"#4c566a",fontStyle:"italic"},{tag:tags.strong,fontWeight:"bold",color:"#5e81ac"},{tag:tags.emphasis,fontStyle:"italic",color:"#5e81ac"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:tags.heading,fontWeight:"bold",color:"#5e81ac"},{tag:tags.special(tags.heading1),fontWeight:"bold",color:"#5e81ac"},{tag:tags.heading1,fontWeight:"bold",color:"#5e81ac"},{tag:[tags.heading2,tags.heading3,tags.heading4],fontWeight:"bold",color:"#5e81ac"},{tag:[tags.heading5,tags.heading6],color:"#5e81ac"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#d08770"},{tag:[tags.processingInstruction,tags.inserted],color:"#8fbcbb"},{tag:[tags.contentSeparator],color:"#ebcb8b"},{tag:tags.invalid,color:"#434c5e",borderBottom:"1px dotted #d30102"}]}),settings$c={background:"#272822",lineBackground:"#27282299",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#49483E",selectionMatch:"#49483E",gutterBackground:"#272822",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},monokai=createTheme({theme:"dark",settings:{background:"#272822",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#49483E",selectionMatch:"#49483E",gutterBackground:"#272822",gutterForeground:"#FFFFFF70",lineHighlight:"#0000003b"},styles:[{tag:tags.labelName,color:"#bababa"},{tag:[tags.comment,tags.documentMeta],color:"#8292a2"},{tag:[tags.number,tags.bool,tags.null,tags.atom],color:"#ae81ff"},{tag:[tags.attributeValue,tags.className,tags.name],color:"#e6db74"},{tag:[tags.propertyName,tags.attributeName],color:"#a6e22e"},{tag:[tags.variableName],color:"#9effff"},{tag:[tags.squareBracket],color:"#bababa"},{tag:[tags.string,tags.special(tags.brace)],color:"#e6db74"},{tag:[tags.regexp,tags.className,tags.typeName,tags.definition(tags.typeName)],color:"#66d9ef"},{tag:[tags.definition(tags.variableName),tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#a6e22e"},{tag:[tags.keyword,tags.definitionKeyword,tags.modifier,tags.tagName,tags.angleBracket],color:"#f92672"}]}),settings$b={background:"#002b36",lineBackground:"#002b3699",foreground:"#93a1a1",caret:"#839496",selection:"#173541",selectionMatch:"#aafe661a",gutterBackground:"#00252f",gutterForeground:"#839496",lineHighlight:"#173541"},c$1={background:"#002B36",foreground:"#839496",selection:"#004454AA",selectionMatch:"#005A6FAA",cursor:"#D30102",dropdownBackground:"#00212B",dropdownBorder:"#2AA19899",activeLine:"#00cafe11",matchingBracket:"#073642",keyword:"#859900",storage:"#93A1A1",variable:"#268BD2",parameter:"#268BD2",function:"#268BD2",string:"#2AA198",constant:"#CB4B16",type:"#859900",class:"#268BD2",number:"#D33682",comment:"#586E75",heading:"#268BD2",invalid:"#DC322F",regexp:"#DC322F",tag:"#268BD2"},solarizedDark=createTheme({theme:"dark",settings:{background:c$1.background,foreground:c$1.foreground,caret:c$1.cursor,selection:c$1.selection,selectionMatch:c$1.selection,gutterBackground:c$1.background,gutterForeground:c$1.foreground,gutterBorder:"transparent",lineHighlight:c$1.activeLine},styles:[{tag:tags.keyword,color:c$1.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:c$1.variable},{tag:[tags.propertyName],color:c$1.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:c$1.string},{tag:[tags.function(tags.variableName),tags.labelName],color:c$1.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:c$1.constant},{tag:[tags.definition(tags.name),tags.separator],color:c$1.variable},{tag:[tags.className],color:c$1.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:c$1.number},{tag:[tags.typeName],color:c$1.type,fontStyle:c$1.type},{tag:[tags.operator,tags.operatorKeyword],color:c$1.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:c$1.regexp},{tag:[tags.meta,tags.comment],color:c$1.comment},{tag:tags.tagName,color:c$1.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:c$1.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:c$1.variable},{tag:tags.invalid,color:c$1.invalid},{tag:tags.strikethrough,textDecoration:"line-through"}]}),settings$a={light:!0,background:"#fdf6e3",lineBackground:"#fdf6e399",foreground:"#657b83",caret:"#586e75",selection:"#dfd9c8",selectionMatch:"#dfd9c8",gutterBackground:"#00000010",gutterForeground:"#657b83",lineHighlight:"#dfd9c8"},c={background:"#FDF6E3",foreground:"#657B83",selection:"#EEE8D5",selectionMatch:"#EEE8D5",cursor:"#657B83",dropdownBackground:"#EEE8D5",dropdownBorder:"#D3AF86",activeLine:"#3d392d11",matchingBracket:"#EEE8D5",keyword:"#859900",storage:"#586E75",variable:"#268BD2",parameter:"#268BD2",function:"#268BD2",string:"#2AA198",constant:"#CB4B16",type:"#859900",class:"#268BD2",number:"#D33682",comment:"#93A1A1",heading:"#268BD2",invalid:"#DC322F",regexp:"#DC322F",tag:"#268BD2"},solarizedLight=createTheme({theme:"light",settings:{background:c.background,foreground:c.foreground,caret:c.cursor,selection:c.selection,selectionMatch:c.selectionMatch,gutterBackground:c.background,gutterForeground:c.foreground,gutterBorder:"transparent",lineHighlight:c.activeLine},styles:[{tag:tags.keyword,color:c.keyword},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:c.variable},{tag:[tags.propertyName],color:c.function},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:c.string},{tag:[tags.function(tags.variableName),tags.labelName],color:c.function},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:c.constant},{tag:[tags.definition(tags.name),tags.separator],color:c.variable},{tag:[tags.className],color:c.class},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:c.number},{tag:[tags.typeName],color:c.type,fontStyle:c.type},{tag:[tags.operator,tags.operatorKeyword],color:c.keyword},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:c.regexp},{tag:[tags.meta,tags.comment],color:c.comment},{tag:tags.tagName,color:c.tag},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:c.heading},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:c.variable},{tag:tags.invalid,color:c.invalid},{tag:tags.strikethrough,textDecoration:"line-through"}]}),settings$9={background:"#303841",lineBackground:"#30384199",foreground:"#FFFFFF",caret:"#FBAC52",selection:"#4C5964",selectionMatch:"#3A546E",gutterBackground:"#303841",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},sublime=createTheme({theme:"dark",settings:{background:"#303841",foreground:"#FFFFFF",caret:"#FBAC52",selection:"#4C5964",selectionMatch:"#3A546E",gutterBackground:"#303841",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:tags.labelName,color:"#A2A9B5"},{tag:[tags.meta,tags.comment],color:"#A2A9B5"},{tag:[tags.attributeName,tags.keyword],color:"#B78FBA"},{tag:tags.function(tags.variableName),color:"#5AB0B0"},{tag:[tags.string,tags.regexp,tags.attributeValue],color:"#99C592"},{tag:tags.operator,color:"#f47954"},{tag:[tags.tagName,tags.modifier],color:"#E35F63"},{tag:[tags.number,tags.definition(tags.tagName),tags.className,tags.definition(tags.variableName)],color:"#fbac52"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#E35F63"},{tag:tags.variableName,color:"#539ac4"},{tag:[tags.propertyName,tags.typeName],color:"#629ccd"},{tag:tags.propertyName,color:"#36b7b5"}]}),settings$8={background:"#1a1b26",lineBackground:"#1a1b2699",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#1e202e"},tokyoNight=createTheme({theme:"dark",settings:{background:"#1a1b26",foreground:"#787c99",caret:"#c0caf5",selection:"#515c7e40",selectionMatch:"#16161e",gutterBackground:"#1a1b26",gutterForeground:"#787c99",gutterBorder:"transparent",lineHighlight:"#474b6611"},styles:[{tag:tags.keyword,color:"#bb9af7"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#c0caf5"},{tag:[tags.propertyName],color:"#7aa2f7"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#9ece6a"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#7aa2f7"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#bb9af7"},{tag:[tags.definition(tags.name),tags.separator],color:"#c0caf5"},{tag:[tags.className],color:"#c0caf5"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#ff9e64"},{tag:[tags.typeName],color:"#0db9d7"},{tag:[tags.operator,tags.operatorKeyword],color:"#bb9af7"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#b4f9f8"},{tag:[tags.meta,tags.comment],color:"#444b6a"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#89ddff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#c0caf5"},{tag:tags.invalid,color:"#ff5370"},{tag:tags.strikethrough,textDecoration:"line-through"}]}),settings$7={background:"#24283b",lineBackground:"#24283b99",foreground:"#7982a9",caret:"#c0caf5",selection:"#6f7bb630",selectionMatch:"#1f2335",gutterBackground:"#24283b",gutterForeground:"#7982a9",gutterBorder:"transparent",lineHighlight:"#292e42"},tokyoNightStorm=createTheme({theme:"dark",settings:{background:"#24283b",foreground:"#7982a9",caret:"#c0caf5",selection:"#6f7bb630",selectionMatch:"#343b5f",gutterBackground:"#24283b",gutterForeground:"#7982a9",gutterBorder:"transparent",lineHighlight:"#292e427a"},styles:[{tag:tags.keyword,color:"#bb9af7"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#c0caf5"},{tag:[tags.propertyName],color:"#7aa2f7"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#9ece6a"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#7aa2f7"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#bb9af7"},{tag:[tags.definition(tags.name),tags.separator],color:"#c0caf5"},{tag:[tags.className],color:"#c0caf5"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#ff9e64"},{tag:[tags.typeName],color:"#2ac3de",fontStyle:"#2ac3de"},{tag:[tags.operator,tags.operatorKeyword],color:"#bb9af7"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#b4f9f8"},{tag:[tags.meta,tags.comment],color:"#565f89"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#89ddff"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#c0caf5"},{tag:tags.invalid,color:"#ff5370"},{tag:tags.strikethrough,textDecoration:"line-through"}]}),settings$6={light:!0,background:"#e1e2e7",lineBackground:"#e1e2e799",foreground:"#3760bf",caret:"#3760bf",selection:"#99a7df",selectionMatch:"#99a7df",gutterBackground:"#e1e2e7",gutterForeground:"#3760bf",gutterBorder:"transparent",lineHighlight:"#5f5faf11"},tokyoNightDay=createTheme({theme:"light",settings:{background:"#e1e2e7",foreground:"#3760bf",caret:"#3760bf",selection:"#99a7df",selectionMatch:"#99a7df",gutterBackground:"#e1e2e7",gutterForeground:"#3760bf",gutterBorder:"transparent",lineHighlight:"#5f5faf11"},styles:[{tag:tags.keyword,color:"#007197"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName],color:"#3760bf"},{tag:[tags.propertyName],color:"#3760bf"},{tag:[tags.processingInstruction,tags.string,tags.inserted,tags.special(tags.string)],color:"#587539"},{tag:[tags.function(tags.variableName),tags.labelName],color:"#3760bf"},{tag:[tags.color,tags.constant(tags.name),tags.standard(tags.name)],color:"#3760bf"},{tag:[tags.definition(tags.name),tags.separator],color:"#3760bf"},{tag:[tags.className],color:"#3760bf"},{tag:[tags.number,tags.changed,tags.annotation,tags.modifier,tags.self,tags.namespace],color:"#b15c00"},{tag:[tags.typeName],color:"#007197",fontStyle:"#007197"},{tag:[tags.operator,tags.operatorKeyword],color:"#007197"},{tag:[tags.url,tags.escape,tags.regexp,tags.link],color:"#587539"},{tag:[tags.meta,tags.comment],color:"#848cb5"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.link,textDecoration:"underline"},{tag:tags.heading,fontWeight:"bold",color:"#b15c00"},{tag:[tags.atom,tags.bool,tags.special(tags.variableName)],color:"#3760bf"},{tag:tags.invalid,color:"#f52a65"},{tag:tags.strikethrough,textDecoration:"line-through"}]}),settings$5={background:"#1e1e1e",lineBackground:"#1e1e1e99",foreground:"#fff",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff"},vscodeDark=createTheme({theme:"dark",settings:{background:"#1e1e1e",foreground:"#fff",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},styles:[{tag:[tags.keyword,tags.operatorKeyword,tags.modifier,tags.color,tags.constant(tags.name),tags.standard(tags.name),tags.standard(tags.tagName),tags.special(tags.brace),tags.atom,tags.bool,tags.special(tags.variableName)],color:"#569cd6"},{tag:[tags.controlKeyword,tags.moduleKeyword],color:"#c586c0"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName,tags.propertyName,tags.variableName,tags.labelName,tags.definition(tags.name)],color:"#9cdcfe"},{tag:tags.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[tags.typeName,tags.className,tags.tagName,tags.number,tags.changed,tags.annotation,tags.self,tags.namespace],color:"#4ec9b0"},{tag:[tags.function(tags.variableName),tags.function(tags.propertyName)],color:"#dcdcaa"},{tag:[tags.number],color:"#b5cea8"},{tag:[tags.operator,tags.punctuation,tags.separator,tags.url,tags.escape,tags.regexp],color:"#d4d4d4"},{tag:[tags.regexp],color:"#d16969"},{tag:[tags.special(tags.string),tags.processingInstruction,tags.string,tags.inserted],color:"#ce9178"},{tag:[tags.angleBracket],color:"#808080"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.meta,tags.comment],color:"#6a9955"},{tag:tags.link,color:"#6a9955",textDecoration:"underline"},{tag:tags.invalid,color:"#ff0000"}]}),settings$4={background:"#ffffff",lineBackground:"#ffffff50",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},vscodeLight=createTheme({theme:"light",settings:{background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},styles:[{tag:[tags.keyword,tags.operatorKeyword,tags.modifier,tags.color,tags.constant(tags.name),tags.standard(tags.name),tags.standard(tags.tagName),tags.special(tags.brace),tags.atom,tags.bool,tags.special(tags.variableName)],color:"#0000ff"},{tag:[tags.moduleKeyword,tags.controlKeyword],color:"#af00db"},{tag:[tags.name,tags.deleted,tags.character,tags.macroName,tags.propertyName,tags.variableName,tags.labelName,tags.definition(tags.name)],color:"#0070c1"},{tag:tags.heading,fontWeight:"bold",color:"#0070c1"},{tag:[tags.typeName,tags.className,tags.tagName,tags.number,tags.changed,tags.annotation,tags.self,tags.namespace],color:"#267f99"},{tag:[tags.function(tags.variableName),tags.function(tags.propertyName)],color:"#795e26"},{tag:[tags.number],color:"#098658"},{tag:[tags.operator,tags.punctuation,tags.separator,tags.url,tags.escape,tags.regexp],color:"#383a42"},{tag:[tags.regexp],color:"#af00db"},{tag:[tags.special(tags.string),tags.processingInstruction,tags.string,tags.inserted],color:"#a31515"},{tag:[tags.angleBracket],color:"#383a42"},{tag:tags.strong,fontWeight:"bold"},{tag:tags.emphasis,fontStyle:"italic"},{tag:tags.strikethrough,textDecoration:"line-through"},{tag:[tags.meta,tags.comment],color:"#008000"},{tag:tags.link,color:"#4078f2",textDecoration:"underline"},{tag:tags.invalid,color:"#e45649"}]}),settings$3={light:!0,background:"#fff",lineBackground:"#ffffff99",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#EDF4FF"},xcodeLight=createTheme({theme:"light",settings:{background:"#fff",foreground:"#3D3D3D",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#AFAFAF",lineHighlight:"#d5e6ff69"},styles:[{tag:[tags.comment,tags.quote],color:"#707F8D"},{tag:[tags.typeName,tags.typeOperator],color:"#aa0d91"},{tag:[tags.keyword],color:"#aa0d91",fontWeight:"bold"},{tag:[tags.string,tags.meta],color:"#D23423"},{tag:[tags.name],color:"#032f62"},{tag:[tags.typeName],color:"#522BB2"},{tag:[tags.variableName],color:"#23575C"},{tag:[tags.definition(tags.variableName)],color:"#327A9E"},{tag:[tags.regexp,tags.link],color:"#0e0eff"}]}),settings$2={light:!0,background:"#FFFFFF",lineBackground:"#FFFFFF99",foreground:"#000000",caret:"#FBAC52",selection:"#FFD420",selectionMatch:"#FFD420",gutterBackground:"#f5f5f5",gutterForeground:"#4D4D4C",gutterBorder:"transparent",lineHighlight:"#00000012"},bbedit=createTheme({theme:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#FBAC52",selection:"#FFD420",selectionMatch:"#FFD420",gutterBackground:"#f5f5f5",gutterForeground:"#4D4D4C",gutterBorder:"transparent",lineHighlight:"#00000012"},styles:[{tag:[tags.meta,tags.comment],color:"#804000"},{tag:[tags.keyword,tags.strong],color:"#0000FF"},{tag:[tags.number],color:"#FF0080"},{tag:[tags.string],color:"#FF0080"},{tag:[tags.variableName],color:"#006600"},{tag:[tags.escape],color:"#33CC33"},{tag:[tags.tagName],color:"#1C02FF"},{tag:[tags.heading],color:"#0C07FF"},{tag:[tags.quote],color:"#000000"},{tag:[tags.list],color:"#B90690"},{tag:[tags.documentMeta],color:"#888888"},{tag:[tags.function(tags.variableName)],color:"#0000A2"},{tag:[tags.definition(tags.typeName),tags.typeName],color:"#6D79DE"}]}),settings$1={light:!0,background:"#f2f1f8",lineBackground:"#f2f1f899",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",selectionMatch:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},noctisLilac=createTheme({theme:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",selectionMatch:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#16067911"},styles:[{tag:tags.comment,color:"#9995b7"},{tag:tags.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[tags.definitionKeyword,tags.modifier],color:"#ff5792"},{tag:[tags.className,tags.tagName,tags.definition(tags.typeName)],color:"#0094f0"},{tag:[tags.number,tags.bool,tags.null,tags.special(tags.brace)],color:"#5842ff"},{tag:[tags.definition(tags.propertyName),tags.function(tags.variableName)],color:"#0095a8"},{tag:tags.typeName,color:"#b3694d"},{tag:[tags.propertyName,tags.variableName],color:"#fa8900"},{tag:tags.operator,color:"#ff5792"},{tag:tags.self,color:"#e64100"},{tag:[tags.string,tags.regexp],color:"#00b368"},{tag:[tags.paren,tags.bracket],color:"#0431fa"},{tag:tags.labelName,color:"#00bdd6"},{tag:tags.attributeName,color:"#e64100"},{tag:tags.angleBracket,color:"#9995b7"}]}),themes={strudelTheme,algoboy,archBtw,androidstudio,atomone,aura,bbedit,blackscreen,bluescreen,bluescreenlight,CutiePi,darcula,dracula,duotoneDark,eclipse,fruitDaw,githubDark,githubLight,greenText,gruvboxDark,gruvboxLight,sonicPink,materialDark,materialLight,monokai,noctisLilac,nord,redText,solarizedDark,solarizedLight,sublime,teletext,tokyoNight,tokyoNightDay,tokyoNightStorm,vscodeDark,vscodeLight,whitescreen,xcodeLight},settings={strudelTheme:settings$D,bluescreen:settings$C,bluescreenlight:settings$r,blackscreen:settings$B,whitescreen:settings$A,teletext:settings$z,algoboy:settings$y,archBtw:settings$t,androidstudio:settings$q,atomone:settings$p,aura:settings$o,bbedit:settings$2,darcula:settings$n,dracula:settings$m,duotoneDark:settings$l,eclipse:settings$k,CutiePi:settings$x,sonicPink:settings$w,fruitDaw:settings$s,githubLight:settings$i,githubDark:settings$j,greenText:settings$u,gruvboxDark:settings$h,gruvboxLight:settings$g,materialDark:settings$f,materialLight:settings$e,noctisLilac:settings$1,nord:settings$d,monokai:settings$c,redText:settings$v,solarizedLight:settings$a,solarizedDark:settings$b,sublime:settings$9,tokyoNight:settings$8,tokyoNightStorm:settings$7,vscodeDark:settings$5,vscodeLight:settings$4,xcodeLight:settings$3,tokyoNightDay:settings$6};function getColors(l){const a=/#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})/g,o=[];let u;for(;(u=a.exec(l))!==null;){const p=u[0];o.includes(p)||o.push(p)}return o}function themeColors(l){return getColors(stringifySafe(l))}function getCircularReplacer(){const l=new WeakSet;return(a,o)=>{if(typeof o=="object"&&o!==null){if(l.has(o))return;l.add(o)}return o}}function stringifySafe(l){return JSON.stringify(l,getCircularReplacer())}const theme=l=>themes[l]||themes.strudelTheme;function injectStyle(l){const a=document.createElement("style");document.head.appendChild(a);const o=a.sheet,u=o.insertRule(l,0);return()=>o.deleteRule(u)}let currentTheme,resetThemeStyle,themeStyle,styleID="strudel-theme-vars";function initTheme(l){document.getElementById(styleID)||(themeStyle=document.createElement("style"),themeStyle.id=styleID,document.head.append(themeStyle)),activateTheme(l)}function activateTheme(l){if(currentTheme===l)return;currentTheme=l,settings[l]||console.warn("theme",l,"has no settings.. defaulting to strudelTheme settings");const a=settings[l]||settings.strudelTheme;themeStyle.innerHTML=`:root {
      ${Object.entries(a).map(([o,u])=>`--${o}: ${u} !important;`).join(`
`)}
    }`,setTheme(a),a.light?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark"),resetThemeStyle?.(),resetThemeStyle=void 0,a.customStyle&&(resetThemeStyle=injectStyle(a.customStyle))}let sliderValues={};const getSliderID=l=>`slider_${l}`;class SliderWidget extends WidgetType{constructor(a,o,u,p,d,f,g){super(),this.value=a,this.min=o,this.max=u,this.from=p,this.originalFrom=p,this.to=d,this.step=f,this.view=g}eq(){return!1}toDOM(){let a=document.createElement("span");a.setAttribute("aria-hidden","true"),a.className="cm-slider";let o=a.appendChild(document.createElement("input"));return o.type="range",o.min=this.min,o.max=this.max,o.step=this.step??(this.max-this.min)/1e3,o.originalValue=this.value,o.value=o.originalValue,o.from=this.from,o.originalFrom=this.originalFrom,o.to=this.to,o.style="width:64px;margin-right:4px;transform:translateY(4px)",this.slider=o,o.addEventListener("input",u=>{const p=u.target.value;let d=p;const f=o.from+o.originalValue.length;let g={from:o.from,to:f,insert:d};o.originalValue=d,o.value=d,this.view.dispatch({changes:g});const b=getSliderID(o.originalFrom);window.postMessage({type:"cm-slider",value:Number(p),id:b})}),a}ignoreEvent(a){return!0}}const setSliderWidgets=StateEffect.define(),updateSliderWidgets=(l,a)=>{l.dispatch({effects:setSliderWidgets.of(a)})};function getSliders(l,a){return l.filter(o=>o.type==="slider").map(({from:o,to:u,value:p,min:d,max:f,step:g})=>Decoration.widget({widget:new SliderWidget(p,d,f,o,u,g,a),side:0}).range(o))}const sliderPlugin=ViewPlugin.fromClass(class{decorations;constructor(l){this.decorations=Decoration.set([])}update(l){l.transactions.forEach(a=>{if(a.docChanged){this.decorations=this.decorations.map(a.changes);const o=this.decorations.iter();for(;o.value;)o.value?.widget?.slider&&(o.value.widget.slider.from=o.from,o.value.widget.slider.to=o.to),o.next()}for(let o of a.effects)o.is(setSliderWidgets)&&(this.decorations=Decoration.set(getSliders(o.value,l.view)))})}},{decorations:l=>l.decorations});let slider=l=>(console.warn("slider will only work when the transpiler is used... passing value as is"),pure(l)),sliderWithID=(l,a,o,u)=>(sliderValues[l]=a,ref$1(()=>sliderValues[l]));typeof window<"u"&&window.addEventListener("message",l=>{l.data.type==="cm-slider"&&(sliderValues[l.data.id]!==void 0?sliderValues[l.data.id]=l.data.value:console.warn(`slider with id "${l.data.id}" is not registered. Only ${Object.keys(sliderValues)}`))});const addWidget=StateEffect.define({map:({from:l,to:a},o)=>({from:o.mapPos(l),to:o.mapPos(a)})}),updateWidgets=(l,a)=>{l.dispatch({effects:addWidget.of(a)})};function getWidgets(l){return l.sort((a,o)=>a.to-o.to).map(a=>Decoration.widget({widget:new BlockWidget(a),side:0,block:!0}).range(a.to))}const widgetField=StateField.define({create(){return Decoration.none},update(l,a){l=l.map(a.changes);for(let o of a.effects)if(o.is(addWidget))try{l=l.update({filter:()=>!1,add:getWidgets(o.value)})}catch(u){console.log("err",u)}return l},provide:l=>EditorView.decorations.from(l)}),widgetElements={};function setWidget(l,a){widgetElements[l]=a,a.id=l}class BlockWidget extends WidgetType{constructor(a){super(),this.widgetConfig=a}eq(){return!0}toDOM(){const a=getWidgetID(this.widgetConfig);return widgetElements[a]}ignoreEvent(a){return!0}}const widgetPlugin=[widgetField];function registerWidget(l,a){registerWidgetType(l),a&&(Pattern$1.prototype[l]=function(o,u={fold:1}){return a(o,u,this)})}function getCanvasWidget(l,a={}){const{width:o=500,height:u=60,pixelRatio:p=window.devicePixelRatio}=a;let d=document.getElementById(l)||document.createElement("canvas");return d.width=o*p,d.height=u*p,d.style.width=o+"px",d.style.height=u+"px",setWidget(l,d),d}registerWidget("_pianoroll",(l,a={},o)=>{const u=getCanvasWidget(l,a).getContext("2d");return o.tag(l).pianoroll({fold:1,...a,ctx:u,id:l})}),registerWidget("_punchcard",(l,a={},o)=>{const u=getCanvasWidget(l,a).getContext("2d");return o.tag(l).punchcard({fold:1,...a,ctx:u,id:l})}),registerWidget("_spiral",(l,a={},o)=>{let u=a.size||275;a={width:u,height:u,...a,size:u/5};const p=getCanvasWidget(l,a).getContext("2d");return o.tag(l).spiral({...a,ctx:p,id:l})}),registerWidget("_scope",(l,a={},o)=>{a={width:500,height:60,pos:.5,scale:1,...a};const u=getCanvasWidget(l,a).getContext("2d");return o.tag(l).scope({...a,ctx:u,id:l})}),registerWidget("_pitchwheel",(l,a={},o)=>{let u=a.size||200;a={width:u,height:u,...a,size:u/5};const p=getCanvasWidget(l,a).getContext("2d");return o.pitchwheel({...a,ctx:p,id:l})}),registerWidget("_spectrum",(l,a={},o)=>{let u=a.size||200;a={width:u,height:u,...a,size:u/5};const p=getCanvasWidget(l,a).getContext("2d");return o.spectrum({...a,ctx:p,id:l})});let identity=l=>l,storageEngine={},eventsEngine={addEventListener(){},removeEventListener(){}};function testSupport(){try{return typeof localStorage<"u"}catch{return!1}}testSupport()&&(storageEngine=localStorage);let windowPersistentEvents={addEventListener(l,a,o){window.addEventListener("storage",a),window.addEventListener("pageshow",o)},removeEventListener(l,a,o){window.removeEventListener("storage",a),window.removeEventListener("pageshow",o)}};typeof window<"u"&&(eventsEngine=windowPersistentEvents);function persistentAtom(l,a=void 0,o={}){let u=o.encode||identity,p=o.decode||identity,d=atom(a),f=d.set;d.set=O=>{typeof O>"u"?delete storageEngine[l]:storageEngine[l]=u(O),f(O)};function g(O){O.key===l?O.newValue===null?f(void 0):f(p(O.newValue)):storageEngine[l]||f(void 0)}function b(){d.set(storageEngine[l]?p(storageEngine[l]):a)}return onMount(d,()=>{if(b(),o.listen!==!1)return eventsEngine.addEventListener(l,g,b),()=>{eventsEngine.removeEventListener(l,g,b)}}),d}const basicSetup=[highlightSpecialChars(),history(),dropCursor(),rectangularSelection(),crosshairCursor(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...historyKeymap])];[highlightSpecialChars(),history(),drawSelection(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),keymap.of([...defaultKeymap,...historyKeymap])];const extensions={isLineWrappingEnabled:l=>l?EditorView.lineWrapping:[],isBracketMatchingEnabled:l=>l?bracketMatching({brackets:"()[]{}<>"}):[],isBracketClosingEnabled:l=>l?closeBrackets():[],isLineNumbersDisplayed:l=>l?lineNumbers():[],theme,isAutoCompletionEnabled,isTooltipEnabled,isPatternHighlightingEnabled,isActiveLineHighlighted:l=>l?[highlightActiveLine(),highlightActiveLineGutter()]:[],isFlashEnabled,keybindings,isTabIndentationEnabled:l=>l?keymap.of([indentWithTab]):[],isMultiCursorEnabled:l=>l?[EditorState.allowMultipleSelections.of(!0),EditorView.clickAddsSelectionRange.of(a=>a.metaKey||a.ctrlKey)]:[]},compartments=Object.fromEntries(Object.keys(extensions).map(l=>[l,new Compartment])),defaultSettings={keybindings:"codemirror",isBracketMatchingEnabled:!1,isBracketClosingEnabled:!0,isLineNumbersDisplayed:!0,isActiveLineHighlighted:!1,isAutoCompletionEnabled:!1,isPatternHighlightingEnabled:!0,isFlashEnabled:!0,isTooltipEnabled:!1,isLineWrappingEnabled:!1,isTabIndentationEnabled:!1,isMultiCursorEnabled:!1,theme:"strudelTheme",fontFamily:"monospace",fontSize:18},codemirrorSettings=persistentAtom("codemirror-settings",defaultSettings,{encode:JSON.stringify,decode:JSON.parse});function initEditor({initialCode:l="",onChange:a,onEvaluate:o,onStop:u,root:p,mondo:d}){const f=codemirrorSettings.get(),g=Object.keys(compartments).map(O=>compartments[O].of(extensions[O](parseBooleans(f[O]))));initTheme(f.theme);let b=EditorState.create({doc:l,extensions:[...g,basicSetup,d?[]:javascript(),javascriptLanguage.data.of({closeBrackets:{brackets:["(","[","{","'",'"',"<"]},bracketMatching:{brackets:["(","[","{","'",'"',"<"]}}),sliderPlugin,widgetPlugin,syntaxHighlighting(defaultHighlightStyle),EditorView.updateListener.of(O=>a(O)),drawSelection({cursorBlinkRate:0}),Prec.highest(keymap.of([{key:"Ctrl-Enter",run:()=>o?.()},{key:"Alt-Enter",run:()=>o?.()},{key:"Ctrl-.",run:()=>u?.()},{key:"Alt-.",preventDefault:!0,run:()=>u?.()}]))]});return new EditorView({state:b,parent:p})}class StrudelMirror{constructor(a){const{root:o,id:u,initialCode:p="",onDraw:d,drawContext:f,drawTime:g=[0,0],autodraw:b,prebake:O,bgFill:S=!0,solo:M=!0,...A}=a;this.code=p,this.root=o,this.miniLocations=[],this.widgets=[],this.drawTime=g,this.drawContext=f,this.onDraw=d||this.draw,this.id=u||s4(),this.solo=M,this.drawer=new Drawer((B,I,U,te)=>{const de=B.filter(se=>se.isActive(I));this.highlight(de,I),this.onDraw(B,I,te)},g),this.prebaked=O(),b&&this.drawFirstFrame(),this.repl=repl$1({...A,id:u,onToggle:B=>{A?.onToggle?.(B),B?(this.drawer.start(this.repl.scheduler),this.solo&&document.dispatchEvent(new CustomEvent("start-repl",{detail:this.id}))):(this.drawer.stop(),updateMiniLocations(this.editor,[]),cleanupDraw(!0,u))},beforeEval:async()=>{cleanupDraw(!0,u),await this.prebaked,await A?.beforeEval?.()},afterEval:B=>{this.miniLocations=B.meta?.miniLocations,this.widgets=B.meta?.widgets;const I=this.widgets.filter(de=>de.type==="slider");updateSliderWidgets(this.editor,I);const U=this.widgets.filter(de=>de.type!=="slider");updateWidgets(this.editor,U),updateMiniLocations(this.editor,this.miniLocations),A?.afterEval?.(B);const te=B.pattern.getPainters().length?this.drawTime:[0,0];this.drawer.setDrawTime(te),this.drawer.invalidate(this.repl.scheduler)}}),this.editor=initEditor({root:o,initialCode:p,onChange:B=>{B.docChanged&&(this.code=B.state.doc.toString(),this.repl.setCode?.(this.code))},onEvaluate:()=>this.evaluate(),onStop:()=>this.stop(),mondo:A.mondo});const F=this.root.querySelector(".cm-editor");F&&(this.root.style.display="block",S&&(this.root.style.backgroundColor="var(--background)"),F.style.backgroundColor="transparent");const $=codemirrorSettings.get();this.setFontSize($.fontSize),this.setFontFamily($.fontFamily),this.onStartRepl=B=>{this.solo&&B.detail!==this.id&&this.stop()},document.addEventListener("start-repl",this.onStartRepl)}draw(a,o,u){u?.forEach(p=>p(this.drawContext,o,a,this.drawTime))}async drawFirstFrame(){if(this.onDraw){await this.prebaked;try{await this.repl.evaluate(this.code,!1),this.drawer.invalidate(this.repl.scheduler,-.001),this.onDraw?.(this.drawer.visibleHaps,-.001,this.drawer.painters)}catch{console.warn("first frame could not be painted")}}}async evaluate(){this.flash(),await this.repl.evaluate(this.code)}async stop(){this.repl.scheduler.stop()}async toggle(){this.repl.scheduler.started?this.repl.stop():this.evaluate()}flash(a){flash(this.editor,a)}highlight(a,o){highlightMiniLocations(this.editor,o,a)}setFontSize(a){this.root.style.fontSize=a+"px"}setFontFamily(a){this.root.style.fontFamily=a;const o=this.root.querySelector(".cm-scroller");o&&(o.style.fontFamily=a)}reconfigureExtension(a,o){if(!extensions[a]){console.warn(`extension ${a} is not known`);return}o=parseBooleans(o);const u=extensions[a](o,this);this.editor.dispatch({effects:compartments[a].reconfigure(u)}),a==="theme"&&activateTheme(o)}setLineWrappingEnabled(a){this.reconfigureExtension("isLineWrappingEnabled",a)}setBracketMatchingEnabled(a){this.reconfigureExtension("isBracketMatchingEnabled",a)}setLineNumbersDisplayed(a){this.reconfigureExtension("isLineNumbersDisplayed",a)}setBracketClosingEnabled(a){this.reconfigureExtension("isBracketClosingEnabled",a)}setTheme(a){this.reconfigureExtension("theme",a)}setAutocompletionEnabled(a){this.reconfigureExtension("isAutoCompletionEnabled",a)}updateSettings(a){this.setFontSize(a.fontSize),this.setFontFamily(a.fontFamily);for(let u in extensions)this.reconfigureExtension(u,a[u]);const o={...codemirrorSettings.get(),...a};codemirrorSettings.set(o)}changeSetting(a,o){if(extensions[a]){this.reconfigureExtension(a,o);return}else a==="fontFamily"?this.setFontFamily(o):a==="fontSize"&&this.setFontSize(o)}setCode(a){const o={from:0,to:this.editor.state.doc.length,insert:a};this.editor.dispatch({changes:o})}clear(){this.onStartRepl&&document.removeEventListener("start-repl",this.onStartRepl)}getCursorLocation(){return this.editor.state.selection.main.head}setCursorLocation(a){return this.editor.dispatch({selection:{anchor:a}})}appendCode(a){const o=this.getCursorLocation();this.setCode(this.code+a),this.setCursorLocation(o)}}function parseBooleans(l){return{true:!0,false:!1}[l]??l}function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}const markcss=registerControl("markcss"),index$2=Object.freeze(Object.defineProperty({__proto__:null,BlockWidget,SliderWidget,StrudelMirror,activateTheme,addWidget,codemirrorSettings,defaultSettings,flash,flashField,highlightExtension,highlightMiniLocations,initEditor,initTheme,injectStyle,isFlashEnabled,isPatternHighlightingEnabled,markcss,registerWidget,setFlash,setMiniLocations,setSliderWidgets,setWidget,settings,showMiniLocations,slider,sliderPlugin,sliderValues,sliderWithID,theme,themeColors,themes,toggleBlockComment,toggleBlockCommentByLine,toggleComment,toggleLineComment,updateMiniLocations,updateSliderWidgets,updateWidgets,widgetPlugin},Symbol.toStringTag,{value:"Module"}));async function prebake(){const l=evalScope(core,Promise.resolve().then(()=>index$b),Promise.resolve().then(()=>index$a),Promise.resolve().then(()=>index$3),Promise.resolve().then(()=>index$9),Promise.resolve().then(()=>index$2),Promise.resolve().then(()=>hydra$1),Promise.resolve().then(()=>index$1),Promise.resolve().then(()=>index)),a="https://raw.githubusercontent.com/felixroos/dough-samples/main",o="https://raw.githubusercontent.com/todepond/samples/main";await Promise.all([l,registerSynthSounds(),registerZZFXSounds(),Promise.resolve().then(()=>index$1).then(({registerSoundfonts:p})=>p()),samples(`${a}/tidal-drum-machines.json`),samples(`${a}/piano.json`),samples(`${a}/Dirt-Samples.json`),samples(`${a}/vcsl.json`),samples(`${a}/mridangam.json`),samples("https://raw.githubusercontent.com/tidalcycles/uzu-drumkit/main/strudel.json")]),aliasBank(`${o}/tidal-drum-machines-alias.json`)}const maxPan=noteToMidi$1("C8"),panwidth=(l,a)=>l*a+(1-a)/2;if(Pattern$1.prototype.piano=function(){return this.fmap(l=>({...l,clip:l.clip??1})).s("piano").release(.1).fmap(l=>{const a=valueToMidi$1(l),o=panwidth(Math.min(Math.round(a)/maxPan,1),.5);return{...l,pan:(l.pan||1)*o}})},typeof HTMLElement<"u"){class l extends HTMLElement{static observedAttributes=["code"];settings=codemirrorSettings.get();editor=null;sync=!1;solo=!0;constructor(){super()}attributeChangedCallback(o,u,p){o==="code"&&(this.code=p,this.editor?.setCode(p))}connectedCallback(){setTimeout(()=>{const d=(this.innerHTML+"").replace("<!--","").replace("-->","").trim();d&&this.setAttribute("code",d)});const o=document.createElement("div");this.parentElement.insertBefore(o,this.nextSibling);const u=getDrawContext(),p=[-2,2];this.editor=new StrudelMirror({defaultOutput:webaudioOutput,getTime:()=>getAudioContext().currentTime,transpiler,root:o,initialCode:"// LOADING",pattern:silence,drawTime:p,drawContext:u,prebake,onUpdateState:d=>{const f=new CustomEvent("update",{detail:d});this.dispatchEvent(f)},solo:this.solo,sync:this.sync}),this.editor.updateSettings(this.settings),this.editor.setCode(this.code)}}customElements.define("strudel-editor",l)}let latestOptions,hydra;async function initHydra(l={}){if(latestOptions&&JSON.stringify(latestOptions)!==JSON.stringify(l)&&document.getElementById("hydra-canvas")?.remove(),latestOptions=l,!document.getElementById("hydra-canvas")){const{src:a="https://unpkg.com/hydra-synth",feedStrudel:o=!1,contextType:u="webgl",pixelRatio:p=1,pixelated:d=!0,...f}={detectAudio:!1,...l},{canvas:g}=getDrawContext("hydra-canvas",{contextType:u,pixelRatio:p,pixelated:d});if(f.canvas=g,await import(a),hydra=new Hydra(f),o){const{canvas:b}=getDrawContext();b.style.display="none",hydra.synth.s0.init({src:b})}}}function clearHydra(){hydra&&hydra.hush(),globalThis.s0?.clear(),document.getElementById("hydra-canvas")?.remove(),globalThis.speed=speed,globalThis.shape=shape}const H=l=>()=>reify(l).queryArc(getTime(),getTime())[0].value,hydra$1=Object.freeze(Object.defineProperty({__proto__:null,H,clearHydra,initHydra},Symbol.toStringTag,{value:"Module"})),gm={gm_piano:["0000_JCLive_sf2_file","0000_FluidR3_GM_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file"],gm_epiano1:["0040_JCLive_sf2_file","0040_FluidR3_GM_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_GeneralUserGS_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file"],gm_epiano2:["0050_JCLive_sf2_file","0050_FluidR3_GM_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_GeneralUserGS_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file"],gm_harpsichord:["0060_JCLive_sf2_file","0060_FluidR3_GM_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_GeneralUserGS_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file"],gm_clavinet:["0070_JCLive_sf2_file","0070_FluidR3_GM_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file"],gm_celesta:["0080_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0081_FluidR3_GM_sf2_file"],gm_glockenspiel:["0090_JCLive_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file"],gm_music_box:["0100_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file"],gm_vibraphone:["0110_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0111_FluidR3_GM_sf2_file"],gm_marimba:["0120_JCLive_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file"],gm_xylophone:["0130_JCLive_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0131_FluidR3_GM_sf2_file"],gm_tubular_bells:["0140_JCLive_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file"],gm_dulcimer:["0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file"],gm_drawbar_organ:["0160_JCLive_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file"],gm_percussive_organ:["0170_JCLive_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file"],gm_rock_organ:["0180_JCLive_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file"],gm_church_organ:["0190_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file"],gm_reed_organ:["0200_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file"],gm_accordion:["0210_JCLive_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file"],gm_harmonica:["0220_FluidR3_GM_sf2_file","0220_JCLive_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_GeneralUserGS_sf2_file","0221_FluidR3_GM_sf2_file"],gm_bandoneon:["0230_Aspirin_sf2_file","0230_JCLive_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file"],gm_acoustic_guitar_nylon:["0240_JCLive_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file"],gm_acoustic_guitar_steel:["0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file"],gm_electric_guitar_jazz:["0260_JCLive_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file"],gm_electric_guitar_clean:["0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file"],gm_electric_guitar_muted:["0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file"],gm_overdriven_guitar:["0290_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file"],gm_distortion_guitar:["0300_FluidR3_GM_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file"],gm_guitar_harmonics:["0310_Aspirin_sf2_file","0310_FluidR3_GM_sf2_file","0310_Chaos_sf2_file"],gm_acoustic_bass:["0320_JCLive_sf2_file","0320_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file"],gm_electric_bass_finger:["0330_JCLive_sf2_file","0330_FluidR3_GM_sf2_fible","0330_Aspirin_sf2_file","0330_GeneralUserGS_sf2_file"],gm_electric_bass_pick:["0340_JCLive_sf2_file","0340_FluidR3_GM_sf2_file","0340_Aspirin_sf2_file","0340_GeneralUserGS_sf2_file","0341_Aspirin_sf2_file"],gm_fretless_bass:["0350_Aspirin_sf2_file","0350_JCLive_sf2_file"],gm_slap_bass_1:["0360_Aspirin_sf2_file","0360_JCLive_sf2_file","0360_FluidR3_GM_sf2_file","0360_Chaos_sf2_file"],gm_slap_bass_2:["0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_fil e","0370_JCLive_sf2_file"],gm_synth_bass_1:["0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file"],gm_synth_bass_2:["0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file"],gm_violin:["0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_JCLive_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file"],gm_viola:["0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file"],gm_cello:["0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file"],gm_contrabass:["0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file"],gm_tremolo_strings:["0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file"],gm_pizzicato_strings:["0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file"],gm_orchestral_harp:["0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file"],gm_timpani:["0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file"],gm_string_ensemble_1:["0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file"],gm_string_ensemble_2:["0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file"],gm_synth_strings_1:["0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file"],gm_synth_strings_2:["0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file"],gm_choir_aahs:["0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file"],gm_voice_oohs:["0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file"],gm_synth_choir:["0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file"],gm_orchestra_hit:["0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file"],gm_trumpet:["0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file"],gm_trombone:["0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file"],gm_tuba:["0580_FluidR3_GM_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_GeneralUserGS_sf2_file"],gm_muted_trumpet:["0590_JCLive_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file"],gm_french_horn:["0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file"],gm_brass_section:["0610_JCLive_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file"],gm_synth_brass_1:["0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file"],gm_synth_brass_2:["0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file"],gm_soprano_sax:["0640_JCLive_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0641_FluidR3_GM_sf2_file"],gm_alto_sax:["0650_JCLive_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file"],gm_tenor_sax:["0660_JCLive_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file"],gm_baritone_sax:["0670_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0671_FluidR3_GM_sf2_file"],gm_oboe:["0680_JCLive_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0681_FluidR3_GM_sf2_file"],gm_english_horn:["0690_JCLive_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0691_FluidR3_GM_sf2_file"],gm_bassoon:["0700_JCLive_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0701_FluidR3_GM_sf2_file"],gm_clarinet:["0710_JCLive_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0711_FluidR3_GM_sf2_file"],gm_piccolo:["0720_JCLive_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0721_FluidR3_GM_sf2_file"],gm_flute:["0730_JCLive_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0731_FluidR3_GM_sf2_file"],gm_recorder:["0740_JCLive_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file"],gm_pan_flute:["0750_JCLive_sf2_file","0750_FluidR3_GM_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_GeneralUserGS_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file"],gm_blown_bottle:["0760_FluidR3_GM_sf2_file","0760_JCLive_sf2_file","0760_Chaos_sf2_file","0760_GeneralUserGS_sf2_file","0761_FluidR3_GM_sf2_file"],gm_shakuhachi:["0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file"],gm_whistle:["0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file"],gm_ocarina:["0790_FluidR3_GM_sf2_file","0790_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_GeneralUserGS_sf2_file"],gm_lead_1_square:["0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file"],gm_lead_2_sawtooth:["0810_JCLive_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file"],gm_lead_3_calliope:["0820_JCLive_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file"],gm_lead_4_chiff:["0830_JCLive_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file"],gm_lead_5_charang:["0840_JCLive_sf2_file","0840_FluidR3_GM_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_GeneralUserGS_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file"],gm_lead_6_voice:["0850_JCLive_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file"],gm_lead_7_fifths:["0860_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0861_Aspirin_sf2_file"],gm_lead_8_bass_lead:["0870_JCLive_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file"],gm_pad_new_age:["0880_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file"],gm_pad_warm:["0890_JCLive_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file"],gm_pad_poly:["0900_JCLive_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file"],gm_pad_choir:["0910_FluidR3_GM_sf2_file","0910_JCLive_sf2_file","0910_Aspirin_sf2_file","0910_GeneralUserGS_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file"],gm_pad_bowed:["0920_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file"],gm_pad_metallic:["0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file"],gm_pad_halo:["0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file"],gm_pad_sweep:["0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file"],gm_fx_rain:["0960_FluidR3_GM_sf2_file","0960_Chaos_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file"],gm_fx_soundtrack:["0970_FluidR3_GM_sf2_file","0970_Aspirin_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file"],gm_fx_crystal:["0980_Aspirin_sf2_file","0980_JCLive_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0981_FluidR3_GM_sf2_file","0981_Aspirin_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file"],gm_fx_atmosphere:["0990_JCLive_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file"],gm_fx_brightness:["1000_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file"],gm_fx_goblins:["1010_FluidR3_GM_sf2_file","1010_JCLive_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_GeneralUserGS_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file"],gm_fx_echoes:["1020_FluidR3_GM_sf2_file","1020_JCLive_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_GeneralUserGS_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file"],gm_fx_sci_fi:["1030_FluidR3_GM_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file"],gm_sitar:["1040_Aspirin_sf2_file","1040_FluidR3_GM_sf2_file","1040_JCLive_sf2_file","1040_Chaos_sf2_file","1040_GeneralUserGS_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file"],gm_banjo:["1050_FluidR3_GM_sf2_file","1050_JCLive_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_GeneralUserGS_sf2_file","1051_GeneralUserGS_sf2_file"],gm_shamisen:["1060_JCLive_sf2_file","1060_FluidR3_GM_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_GeneralUserGS_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file"],gm_koto:["1070_FluidR3_GM_sf2_file","1070_JCLive_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_GeneralUserGS_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file"],gm_kalimba:["1080_JCLive_sf2_file","1080_FluidR3_GM_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_GeneralUserGS_sf2_file"],gm_bagpipe:["1090_Aspirin_sf2_file"],gm_fiddle:["1100_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file"],gm_shanai:["1110_Aspirin_sf2_file","1110_FluidR3_GM_sf2_file","1110_JCLive_sf2_file","1110_Chaos_sf2_file","1110_GeneralUserGS_sf2_file"],gm_tinkle_bell:["1120_Aspirin_sf2_file"],gm_agogo:["1130_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1131_FluidR3_GM_sf2_file"],gm_steel_drums:["1140_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_JCLive_sf2_file","1140_Chaos_sf2_file","1140_GeneralUserGS_sf2_file","1141_FluidR3_GM_sf2_file"],gm_woodblock:["1150_JCLive_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file"],gm_taiko_drum:["1160_JCLive_sf2_file","1160_FluidR3_GM_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_GeneralUserGS_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file"],gm_melodic_tom:["1170_JCLive_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file"],gm_synth_drum:["1180_JCLive_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file"],gm_reverse_cymbal:["1190_JCLive_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file"],gm_guitar_fret_noise:["1200_JCLive_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file"],gm_breath_noise:["1210_FluidR3_GM_sf2_file","1210_JCLive_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_GeneralUserGS_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file"],gm_seashore:["1220_JCLive_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file"],gm_bird_tweet:["1230_FluidR3_GM_sf2_file","1230_JCLive_sf2_file","1230_Aspirin_sf2_file","1230_GeneralUserGS_sf2_file","1231_GeneralUserGS_sf2_file","1232_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file"],gm_telephone:["1240_JCLive_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1241_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file"],gm_helicopter:["1250_JCLive_sf2_file","1250_Aspirin_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_GeneralUserGS_sf2_file","1254_GeneralUserGS_sf2_file","1255_GeneralUserGS_sf2_file","1256_GeneralUserGS_sf2_file","1257_GeneralUserGS_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file"],gm_applause:["1260_JCLive_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file"],gm_gunshot:["1270_JCLive_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file",""]};let defaultSoundfontUrl="https://felixroos.github.io/webaudiofontdata/sound",soundfontUrl=defaultSoundfontUrl;function setSoundfontUrl(l){soundfontUrl=l}let loadCache$1={};async function loadFont(name){if(loadCache$1[name])return loadCache$1[name];const load=async()=>{const url=`${soundfontUrl}/${name}.js`,preset=await fetch(url).then(l=>l.text());let[_,data]=preset.split("={");return eval("{"+data)};return loadCache$1[name]=load(),loadCache$1[name]}async function getFontBufferSource(l,a,o){let{note:u="c3",freq:p}=a,d;if(p)d=freqToMidi$2(p);else if(typeof u=="string")d=noteToMidi$1(u);else if(typeof u=="number")d=u;else throw new Error(`unexpected "note" type "${typeof u}"`);const{buffer:f,zone:g}=await getFontPitch(l,d,o),b=o.createBufferSource();b.buffer=f;const O=g.originalPitch-100*g.coarseTune-g.fineTune,S=1*Math.pow(2,(100*d-O)/1200);return b.playbackRate.value=S,g.loopStart>1&&g.loopStart<g.loopEnd&&(b.loop=!0,b.loopStart=g.loopStart/g.sampleRate,b.loopEnd=g.loopEnd/g.sampleRate),b}let bufferCache={};async function getFontPitch(l,a,o){const u=`${l}:::${a}`;if(bufferCache[u])return bufferCache[u];const p=async()=>{const d=await loadFont(l);if(!d)throw new Error(`Could not load soundfont ${l}`);const f=findZone(d,a);if(!f)throw new Error("no soundfont zone found for preset ",l,"pitch",a);const g=await getBuffer(f,o);if(!g)throw new Error(`no soundfont buffer found for preset ${l}, pitch: ${a}`);return{buffer:g,zone:f}};return bufferCache[u]=p(),bufferCache[u]}function findZone(l,a){return l.find(o=>o.keyRangeLow<=a&&o.keyRangeHigh+1>=a)}async function getBuffer(l,a){if(l.sample){console.warn("zone.sample untested!");const u=atob(l.sample);l.buffer=a.createBuffer(1,u.length/2,l.sampleRate);const p=l.buffer.getChannelData(0);let d,f,g;for(var o=0;o<u.length/2;o++)d=u.charCodeAt(o*2),f=u.charCodeAt(o*2+1),d<0&&(d=256+d),f<0&&(f=256+f),g=f*256+d,g>=32768&&(g=g-65536),p[o]=g/65536}else if(l.file){const u=l.file.length,p=new ArrayBuffer(u),d=new Uint8Array(p),f=atob(l.file);let g;for(let b=0;b<f.length;b++)g=f.charCodeAt(b),d[b]=g;return new Promise(b=>a.decodeAudioData(p,b))}}function registerSoundfonts(){Object.entries(gm).forEach(([l,a])=>{registerSound(l,async(o,u,p)=>{const[d,f,g,b]=getADSRValues([u.attack,u.decay,u.sustain,u.release]),{duration:O}=u,S=getSoundIndex$1(u.n,a.length),M=a[S],A=getAudioContext(),F=await getFontBufferSource(M,u,A);F.start(o);const $=A.createGain(),B=F.connect($),I=o+O;getParamADSR(B.gain,d,f,g,b,0,.3,o,I,"linear");let U=I+b+.01,te=getVibratoOscillator(F.detune,u,o);getPitchEnvelope(F.detune,u,o,I),F.stop(U);const de=se=>{};return F.onended=()=>{F.disconnect(),te?.stop(),B.disconnect(),p()},{node:B,stop:de}},{type:"soundfont",prebake:!0,fonts:a})})}const instruments=["0000_JCLive_sf2_file","0000_Aspirin_sf2_file","0000_Chaos_sf2_file","0000_FluidR3_GM_sf2_file","0000_GeneralUserGS_sf2_file","0001_FluidR3_GM_sf2_file","0001_GeneralUserGS_sf2_file","0010_Aspirin_sf2_file","0010_Chaos_sf2_file","0010_FluidR3_GM_sf2_file","0010_GeneralUserGS_sf2_file","0010_JCLive_sf2_file","0011_Aspirin_sf2_file","0011_FluidR3_GM_sf2_file","0011_GeneralUserGS_sf2_file","0012_GeneralUserGS_sf2_file","0020_Aspirin_sf2_file","0020_Chaos_sf2_file","0020_FluidR3_GM_sf2_file","0020_GeneralUserGS_sf2_file","0020_JCLive_sf2_file","0021_Aspirin_sf2_file","0021_GeneralUserGS_sf2_file","0022_Aspirin_sf2_file","0030_Aspirin_sf2_file","0030_Chaos_sf2_file","0030_FluidR3_GM_sf2_file","0030_GeneralUserGS_sf2_file","0030_JCLive_sf2_file","0031_Aspirin_sf2_file","0031_FluidR3_GM_sf2_file","0031_GeneralUserGS_sf2_file","0040_Aspirin_sf2_file","0040_Chaos_sf2_file","0040_FluidR3_GM_sf2_file","0040_GeneralUserGS_sf2_file","0040_JCLive_sf2_file","0041_FluidR3_GM_sf2_file","0041_GeneralUserGS_sf2_file","0042_GeneralUserGS_sf2_file","0043_GeneralUserGS_sf2_file","0044_GeneralUserGS_sf2_file","0046_GeneralUserGS_sf2_file","0050_Aspirin_sf2_file","0050_Chaos_sf2_file","0050_FluidR3_GM_sf2_file","0050_GeneralUserGS_sf2_file","0050_JCLive_sf2_file","0051_FluidR3_GM_sf2_file","0051_GeneralUserGS_sf2_file","0053_GeneralUserGS_sf2_file","0054_GeneralUserGS_sf2_file","0060_Aspirin_sf2_file","0060_Chaos_sf2_file","0060_FluidR3_GM_sf2_file","0060_GeneralUserGS_sf2_file","0060_JCLive_sf2_file","0061_Aspirin_sf2_file","0061_GeneralUserGS_sf2_file","0062_GeneralUserGS_sf2_file","0070_Aspirin_sf2_file","0070_Chaos_sf2_file","0070_FluidR3_GM_sf2_file","0070_JCLive_sf2_file","0080_Aspirin_sf2_file","0080_Chaos_sf2_file","0080_FluidR3_GM_sf2_file","0080_GeneralUserGS_sf2_file","0080_JCLive_sf2_file","0081_FluidR3_GM_sf2_file","0090_Aspirin_sf2_file","0090_Chaos_sf2_file","0090_FluidR3_GM_sf2_file","0090_GeneralUserGS_sf2_file","0090_JCLive_sf2_file","0100_Aspirin_sf2_file","0100_Chaos_sf2_file","0100_FluidR3_GM_sf2_file","0100_GeneralUserGS_sf2_file","0100_JCLive_sf2_file","0110_Aspirin_sf2_file","0110_Chaos_sf2_file","0110_FluidR3_GM_sf2_file","0110_GeneralUserGS_sf2_file","0110_JCLive_sf2_file","0111_FluidR3_GM_sf2_file","0120_Aspirin_sf2_file","0120_Chaos_sf2_file","0120_FluidR3_GM_sf2_file","0120_GeneralUserGS_sf2_file","0120_JCLive_sf2_file","0121_FluidR3_GM_sf2_file","0121_GeneralUserGS_sf2_file","0130_Aspirin_sf2_file","0130_Chaos_sf2_file","0130_FluidR3_GM_sf2_file","0130_GeneralUserGS_sf2_file","0130_JCLive_sf2_file","0131_FluidR3_GM_sf2_file","0140_Aspirin_sf2_file","0140_FluidR3_GM_sf2_file","0140_GeneralUserGS_sf2_file","0140_JCLive_sf2_file","0141_FluidR3_GM_sf2_file","0142_GeneralUserGS_sf2_file","0150_Aspirin_sf2_file","0150_Chaos_sf2_file","0150_FluidR3_GM_sf2_file","0150_GeneralUserGS_sf2_file","0151_FluidR3_GM_sf2_file","0160_Aspirin_sf2_file","0160_Chaos_sf2_file","0160_FluidR3_GM_sf2_file","0160_GeneralUserGS_sf2_file","0160_JCLive_sf2_file","0161_Aspirin_sf2_file","0161_FluidR3_GM_sf2_file","0170_Aspirin_sf2_file","0170_Chaos_sf2_file","0170_FluidR3_GM_sf2_file","0170_JCLive_sf2_file","0171_FluidR3_GM_sf2_file","0172_FluidR3_GM_sf2_file","0180_Aspirin_sf2_file","0180_Chaos_sf2_file","0180_FluidR3_GM_sf2_file","0180_GeneralUserGS_sf2_file","0180_JCLive_sf2_file","0190_Aspirin_sf2_file","0190_Chaos_sf2_file","0190_FluidR3_GM_sf2_file","0190_GeneralUserGS_sf2_file","0190_JCLive_sf2_file","0200_Aspirin_sf2_file","0200_Chaos_sf2_file","0200_FluidR3_GM_sf2_file","0200_GeneralUserGS_sf2_file","0200_JCLive_sf2_file","0201_Aspirin_sf2_file","0201_FluidR3_GM_sf2_file","0201_GeneralUserGS_sf2_file","0210_FluidR3_GM_sf2_file","0210_GeneralUserGS_sf2_file","0210_JCLive_sf2_file","0211_Aspirin_sf2_file","0211_FluidR3_GM_sf2_file","0211_GeneralUserGS_sf2_file","0212_GeneralUserGS_sf2_file","0220_Aspirin_sf2_file","0220_Chaos_sf2_file","0220_FluidR3_GM_sf2_file","0220_GeneralUserGS_sf2_file","0220_JCLive_sf2_file","0221_FluidR3_GM_sf2_file","0230_Aspirin_sf2_file","0230_Chaos_sf2_file","0230_FluidR3_GM_sf2_file","0230_GeneralUserGS_sf2_file","0230_JCLive_sf2_file","0231_FluidR3_GM_sf2_file","0231_GeneralUserGS_sf2_file","0231_JCLive_sf2_file","0232_FluidR3_GM_sf2_file","0233_FluidR3_GM_sf2_file","0240_Aspirin_sf2_file","0240_Chaos_sf2_file","0240_FluidR3_GM_sf2_file","0240_GeneralUserGS_sf2_file","0240_JCLive_sf2_file","0240_LK_Godin_Nylon_SF2_file","0241_JCLive_sf2_file","0242_JCLive_sf2_file","0243_JCLive_sf2_file","0253_Acoustic_Guitar_sf2_file","0250_Aspirin_sf2_file","0250_Chaos_sf2_file","0250_FluidR3_GM_sf2_file","0250_GeneralUserGS_sf2_file","0250_LK_AcousticSteel_SF2_file","0253_Acoustic_Guitar_sf2_file","0253_GeneralUserGS_sf2_file","0254_Acoustic_Guitar_sf2_file","0254_GeneralUserGS_sf2_file","0260_Aspirin_sf2_file","0260_Chaos_sf2_file","0260_FluidR3_GM_sf2_file","0260_GeneralUserGS_sf2_file","0260_JCLive_sf2_file","0260_Stratocaster_sf2_file","0261_GeneralUserGS_sf2_file","0261_Stratocaster_sf2_file","0262_Stratocaster_sf2_file","0270_Aspirin_sf2_file","0270_Chaos_sf2_file","0270_FluidR3_GM_sf2_file","0270_GeneralUserGS_sf2_file","0270_SBAWE32_sf2_file","0270_Stratocaster_sf2_file","0271_GeneralUserGS_sf2_file","0271_Stratocaster_sf2_file","0272_Stratocaster_sf2_file","0280_Aspirin_sf2_file","0280_Chaos_sf2_file","0280_GeneralUserGS_sf2_file","0280_JCLive_sf2_file","0280_LesPaul_sf2_file","0280_SBAWE32_sf2_file","0281_Aspirin_sf2_file","0281_FluidR3_GM_sf2_file","0281_GeneralUserGS_sf2_file","0282_FluidR3_GM_sf2_file","0290_Aspirin_sf2_file","0290_Chaos_sf2_file","0290_FluidR3_GM_sf2_file","0290_GeneralUserGS_sf2_file","0290_LesPaul_sf2_file","0290_SBAWE32_sf2_file","0291_LesPaul_sf2_file","0291_SBAWE32_sf2_file","0292_Aspirin_sf2_file","0292_LesPaul_sf2_file","0300_Aspirin_sf2_file","0300_Chaos_sf2_file","0300_FluidR3_GM_sf2_file","0300_GeneralUserGS_sf2_file","0300_LesPaul_sf2_file","0302_Aspirin_sf2_file","0304_Aspirin_sf2_file","0310_Aspirin_sf2_file","0310_Chaos_sf2_file","0310_FluidR3_GM_sf2_file","0320_Aspirin_sf2_file","0320_Chaos_sf2_file","0320_FluidR3_GM_sf2_file","0320_JCLive_sf2_file","0330_Aspirin_sf2_file","0330_FluidR3_GM_sf2_file","0330_GeneralUserGS_sf2_file","0330_JCLive_sf2_file","0340_Aspirin_sf2_file","0340_FluidR3_GM_sf2_file","0340_GeneralUserGS_sf2_file","0340_JCLive_sf2_file","0341_Aspirin_sf2_file","0350_Aspirin_sf2_file","0350_JCLive_sf2_file","0360_Aspirin_sf2_file","0360_Chaos_sf2_file","0360_FluidR3_GM_sf2_file","0360_JCLive_sf2_file","0370_Aspirin_sf2_file","0370_FluidR3_GM_sf2_file","0370_GeneralUserGS_sf2_file","0370_JCLive_sf2_file","0380_Aspirin_sf2_file","0380_Chaos_sf2_file","0380_FluidR3_GM_sf2_file","0380_JCLive_sf2_file","0381_FluidR3_GM_sf2_file","0381_GeneralUserGS_sf2_file","0382_GeneralUserGS_sf2_file","0383_GeneralUserGS_sf2_file","0384_GeneralUserGS_sf2_file","0387_GeneralUserGS_sf2_file","0390_Aspirin_sf2_file","0390_FluidR3_GM_sf2_file","0390_GeneralUserGS_sf2_file","0390_JCLive_sf2_file","0391_FluidR3_GM_sf2_file","0392_FluidR3_GM_sf2_file","0393_GeneralUserGS_sf2_file","0400_Aspirin_sf2_file","0400_Chaos_sf2_file","0400_FluidR3_GM_sf2_file","0400_GeneralUserGS_sf2_file","0400_JCLive_sf2_file","0401_Aspirin_sf2_file","0401_FluidR3_GM_sf2_file","0401_GeneralUserGS_sf2_file","0402_GeneralUserGS_sf2_file","0410_Aspirin_sf2_file","0410_FluidR3_GM_sf2_file","0410_GeneralUserGS_sf2_file","0410_JCLive_sf2_file","0411_FluidR3_GM_sf2_file","0420_Aspirin_sf2_file","0420_FluidR3_GM_sf2_file","0420_GeneralUserGS_sf2_file","0420_JCLive_sf2_file","0421_FluidR3_GM_sf2_file","0421_GeneralUserGS_sf2_file","0430_Aspirin_sf2_file","0430_Chaos_sf2_file","0430_GeneralUserGS_sf2_file","0440_Aspirin_sf2_file","0440_Chaos_sf2_file","0440_GeneralUserGS_sf2_file","0440_JCLive_sf2_file","0441_GeneralUserGS_sf2_file","0442_GeneralUserGS_sf2_file","0450_Aspirin_sf2_file","0450_Chaos_sf2_file","0450_FluidR3_GM_sf2_file","0450_GeneralUserGS_sf2_file","0450_JCLive_sf2_file","0451_FluidR3_GM_sf2_file","0460_Aspirin_sf2_file","0460_FluidR3_GM_sf2_file","0460_GeneralUserGS_sf2_file","0460_JCLive_sf2_file","0461_FluidR3_GM_sf2_file","0470_Aspirin_sf2_file","0470_Chaos_sf2_file","0470_FluidR3_GM_sf2_file","0470_GeneralUserGS_sf2_file","0471_FluidR3_GM_sf2_file","0471_GeneralUserGS_sf2_file","0480_Aspirin_sf2_file","0480_Chaos_sf2_file","0480_FluidR3_GM_sf2_file","0480_GeneralUserGS_sf2_file","0480_JCLive_sf2_file","0481_Aspirin_sf2_file","0481_FluidR3_GM_sf2_file","0481_GeneralUserGS_sf2_file","0482_Aspirin_sf2_file","0482_GeneralUserGS_sf2_file","0483_GeneralUserGS_sf2_file","0490_Aspirin_sf2_file","0490_Chaos_sf2_file","0490_FluidR3_GM_sf2_file","0490_GeneralUserGS_sf2_file","0490_JCLive_sf2_file","0491_GeneralUserGS_sf2_file","0492_GeneralUserGS_sf2_file","0500_Aspirin_sf2_file","0500_GeneralUserGS_sf2_file","0500_JCLive_sf2_file","0501_FluidR3_GM_sf2_file","0502_GeneralUserGS_sf2_file","0503_FluidR3_GM_sf2_file","0505_FluidR3_GM_sf2_file","0510_Aspirin_sf2_file","0510_Chaos_sf2_file","0510_GeneralUserGS_sf2_file","0511_GeneralUserGS_sf2_file","0520_Aspirin_sf2_file","0520_Chaos_sf2_file","0520_FluidR3_GM_sf2_file","0520_GeneralUserGS_sf2_file","0520_JCLive_sf2_file","0520_Soul_Ahhs_sf2_file","0521_FluidR3_GM_sf2_file","0521_Soul_Ahhs_sf2_file","0522_Soul_Ahhs_sf2_file","0530_Aspirin_sf2_file","0530_Chaos_sf2_file","0530_FluidR3_GM_sf2_file","0530_GeneralUserGS_sf2_file","0531_FluidR3_GM_sf2_file","0531_JCLive_sf2_file","0540_Aspirin_sf2_file","0540_Chaos_sf2_file","0540_FluidR3_GM_sf2_file","0540_GeneralUserGS_sf2_file","0541_FluidR3_GM_sf2_file","0550_Aspirin_sf2_file","0550_Chaos_sf2_file","0550_FluidR3_GM_sf2_file","0550_GeneralUserGS_sf2_file","0551_FluidR3_GM_sf2_file","0560_Aspirin_sf2_file","0560_Chaos_sf2_file","0560_FluidR3_GM_sf2_file","0560_JCLive_sf2_file","0570_Aspirin_sf2_file","0570_Chaos_sf2_file","0570_FluidR3_GM_sf2_file","0570_GeneralUserGS_sf2_file","0571_GeneralUserGS_sf2_file","0580_Aspirin_sf2_file","0580_Chaos_sf2_file","0580_FluidR3_GM_sf2_file","0580_GeneralUserGS_sf2_file","0590_Aspirin_sf2_file","0590_Chaos_sf2_file","0590_FluidR3_GM_sf2_file","0590_GeneralUserGS_sf2_file","0590_JCLive_sf2_file","0600_Aspirin_sf2_file","0600_FluidR3_GM_sf2_file","0600_GeneralUserGS_sf2_file","0600_JCLive_sf2_file","0601_FluidR3_GM_sf2_file","0610_Aspirin_sf2_file","0610_Chaos_sf2_file","0610_FluidR3_GM_sf2_file","0610_GeneralUserGS_sf2_file","0610_JCLive_sf2_file","0620_Aspirin_sf2_file","0620_FluidR3_GM_sf2_file","0621_Aspirin_sf2_file","0621_FluidR3_GM_sf2_file","0630_Aspirin_sf2_file","0630_Chaos_sf2_file","0630_FluidR3_GM_sf2_file","0630_JCLive_sf2_file","0631_FluidR3_GM_sf2_file","0632_FluidR3_GM_sf2_file","0633_FluidR3_GM_sf2_file","0640_Aspirin_sf2_file","0640_Chaos_sf2_file","0640_FluidR3_GM_sf2_file","0640_JCLive_sf2_file","0641_FluidR3_GM_sf2_file","0650_Chaos_sf2_file","0650_FluidR3_GM_sf2_file","0650_GeneralUserGS_sf2_file","0650_JCLive_sf2_file","0651_Aspirin_sf2_file","0651_FluidR3_GM_sf2_file","0660_Aspirin_sf2_file","0660_Chaos_sf2_file","0660_GeneralUserGS_sf2_file","0660_JCLive_sf2_file","0670_Aspirin_sf2_file","0670_Chaos_sf2_file","0670_FluidR3_GM_sf2_file","0670_GeneralUserGS_sf2_file","0670_JCLive_sf2_file","0671_FluidR3_GM_sf2_file","0680_Chaos_sf2_file","0680_FluidR3_GM_sf2_file","0680_GeneralUserGS_sf2_file","0680_JCLive_sf2_file","0681_FluidR3_GM_sf2_file","0690_Aspirin_sf2_file","0690_FluidR3_GM_sf2_file","0690_JCLive_sf2_file","0691_FluidR3_GM_sf2_file","0700_FluidR3_GM_sf2_file","0700_GeneralUserGS_sf2_file","0700_JCLive_sf2_file","0701_FluidR3_GM_sf2_file","0710_Aspirin_sf2_file","0710_Chaos_sf2_file","0710_FluidR3_GM_sf2_file","0710_GeneralUserGS_sf2_file","0710_JCLive_sf2_file","0711_FluidR3_GM_sf2_file","0720_Aspirin_sf2_file","0720_FluidR3_GM_sf2_file","0720_GeneralUserGS_sf2_file","0720_JCLive_sf2_file","0721_FluidR3_GM_sf2_file","0730_Aspirin_sf2_file","0730_FluidR3_GM_sf2_file","0730_GeneralUserGS_sf2_file","0730_JCLive_sf2_file","0731_FluidR3_GM_sf2_file","0740_Aspirin_sf2_file","0740_Chaos_sf2_file","0740_FluidR3_GM_sf2_file","0740_GeneralUserGS_sf2_file","0740_JCLive_sf2_file","0750_Aspirin_sf2_file","0750_Chaos_sf2_file","0750_FluidR3_GM_sf2_file","0750_GeneralUserGS_sf2_file","0750_JCLive_sf2_file","0751_Aspirin_sf2_file","0751_FluidR3_GM_sf2_file","0751_GeneralUserGS_sf2_file","0760_Chaos_sf2_file","0760_FluidR3_GM_sf2_file","0760_GeneralUserGS_sf2_file","0760_JCLive_sf2_file","0761_FluidR3_GM_sf2_file","0770_Aspirin_sf2_file","0770_FluidR3_GM_sf2_file","0770_GeneralUserGS_sf2_file","0770_JCLive_sf2_file","0771_FluidR3_GM_sf2_file","0780_Aspirin_sf2_file","0780_Chaos_sf2_file","0780_FluidR3_GM_sf2_file","0780_JCLive_sf2_file","0790_Aspirin_sf2_file","0790_FluidR3_GM_sf2_file","0790_GeneralUserGS_sf2_file","0790_JCLive_sf2_file","0800_Aspirin_sf2_file","0800_Chaos_sf2_file","0800_FluidR3_GM_sf2_file","0810_Aspirin_sf2_file","0810_Chaos_sf2_file","0810_FluidR3_GM_sf2_file","0810_GeneralUserGS_sf2_file","0810_JCLive_sf2_file","0811_Aspirin_sf2_file","0811_GeneralUserGS_sf2_file","0820_Aspirin_sf2_file","0820_Chaos_sf2_file","0820_FluidR3_GM_sf2_file","0820_GeneralUserGS_sf2_file","0820_JCLive_sf2_file","0821_FluidR3_GM_sf2_file","0821_GeneralUserGS_sf2_file","0830_Aspirin_sf2_file","0830_FluidR3_GM_sf2_file","0830_GeneralUserGS_sf2_file","0830_JCLive_sf2_file","0831_FluidR3_GM_sf2_file","0831_GeneralUserGS_sf2_file","0840_Aspirin_sf2_file","0840_Chaos_sf2_file","0840_FluidR3_GM_sf2_file","0840_GeneralUserGS_sf2_file","0840_JCLive_sf2_file","0841_Aspirin_sf2_file","0841_Chaos_sf2_file","0841_FluidR3_GM_sf2_file","0841_GeneralUserGS_sf2_file","0842_FluidR3_GM_sf2_file","0850_Aspirin_sf2_file","0850_FluidR3_GM_sf2_file","0850_JCLive_sf2_file","0851_FluidR3_GM_sf2_file","0851_GeneralUserGS_sf2_file","0851_JCLive_sf2_file","0860_Aspirin_sf2_file","0860_Chaos_sf2_file","0860_GeneralUserGS_sf2_file","0860_JCLive_sf2_file","0861_Aspirin_sf2_file","0870_Aspirin_sf2_file","0870_Chaos_sf2_file","0870_FluidR3_GM_sf2_file","0870_GeneralUserGS_sf2_file","0870_JCLive_sf2_file","0880_Aspirin_sf2_file","0880_Chaos_sf2_file","0880_FluidR3_GM_sf2_file","0880_GeneralUserGS_sf2_file","0880_JCLive_sf2_file","0881_Aspirin_sf2_file","0881_FluidR3_GM_sf2_file","0881_GeneralUserGS_sf2_file","0882_Aspirin_sf2_file","0882_GeneralUserGS_sf2_file","0885_GeneralUserGS_sf2_file","0887_GeneralUserGS_sf2_file","0890_Aspirin_sf2_file","0890_Chaos_sf2_file","0890_FluidR3_GM_sf2_file","0890_GeneralUserGS_sf2_file","0890_JCLive_sf2_file","0891_Aspirin_sf2_file","0891_FluidR3_GM_sf2_file","0900_Chaos_sf2_file","0900_FluidR3_GM_sf2_file","0900_GeneralUserGS_sf2_file","0900_JCLive_sf2_file","0901_Aspirin_sf2_file","0901_FluidR3_GM_sf2_file","0901_GeneralUserGS_sf2_file","0910_Aspirin_sf2_file","0910_FluidR3_GM_sf2_file","0910_GeneralUserGS_sf2_file","0910_JCLive_sf2_file","0911_GeneralUserGS_sf2_file","0911_JCLive_sf2_file","0920_Aspirin_sf2_file","0920_GeneralUserGS_sf2_file","0920_JCLive_sf2_file","0921_Aspirin_sf2_file","0921_GeneralUserGS_sf2_file","0930_Aspirin_sf2_file","0930_Chaos_sf2_file","0930_FluidR3_GM_sf2_file","0930_GeneralUserGS_sf2_file","0931_Aspirin_sf2_file","0931_FluidR3_GM_sf2_file","0931_GeneralUserGS_sf2_file","0940_Chaos_sf2_file","0940_FluidR3_GM_sf2_file","0940_GeneralUserGS_sf2_file","0940_JCLive_sf2_file","0941_Aspirin_sf2_file","0941_FluidR3_GM_sf2_file","0941_GeneralUserGS_sf2_file","0941_JCLive_sf2_file","0950_Aspirin_sf2_file","0950_Chaos_sf2_file","0950_FluidR3_GM_sf2_file","0950_GeneralUserGS_sf2_file","0950_JCLive_sf2_file","0951_FluidR3_GM_sf2_file","0951_GeneralUserGS_sf2_file","0960_Chaos_sf2_file","0960_FluidR3_GM_sf2_file","0960_GeneralUserGS_sf2_file","0961_Aspirin_sf2_file","0961_FluidR3_GM_sf2_file","0962_GeneralUserGS_sf2_file","0970_Aspirin_sf2_file","0970_FluidR3_GM_sf2_file","0970_GeneralUserGS_sf2_file","0971_FluidR3_GM_sf2_file","0971_GeneralUserGS_sf2_file","0980_Aspirin_sf2_file","0980_Chaos_sf2_file","0980_GeneralUserGS_sf2_file","0980_JCLive_sf2_file","0981_Aspirin_sf2_file","0981_FluidR3_GM_sf2_file","0981_GeneralUserGS_sf2_file","0982_GeneralUserGS_sf2_file","0983_GeneralUserGS_sf2_file","0984_GeneralUserGS_sf2_file","0990_Aspirin_sf2_file","0990_Chaos_sf2_file","0990_FluidR3_GM_sf2_file","0990_GeneralUserGS_sf2_file","0990_JCLive_sf2_file","0991_Aspirin_sf2_file","0991_FluidR3_GM_sf2_file","0991_GeneralUserGS_sf2_file","0991_JCLive_sf2_file","0992_FluidR3_GM_sf2_file","0992_JCLive_sf2_file","0993_JCLive_sf2_file","0994_JCLive_sf2_file","1000_Aspirin_sf2_file","1000_Chaos_sf2_file","1000_FluidR3_GM_sf2_file","1000_GeneralUserGS_sf2_file","1000_JCLive_sf2_file","1001_Aspirin_sf2_file","1001_FluidR3_GM_sf2_file","1001_GeneralUserGS_sf2_file","1001_JCLive_sf2_file","1002_Aspirin_sf2_file","1002_FluidR3_GM_sf2_file","1002_GeneralUserGS_sf2_file","1010_Aspirin_sf2_file","1010_Chaos_sf2_file","1010_FluidR3_GM_sf2_file","1010_GeneralUserGS_sf2_file","1010_JCLive_sf2_file","1011_Aspirin_sf2_file","1011_FluidR3_GM_sf2_file","1011_JCLive_sf2_file","1012_Aspirin_sf2_file","1020_Aspirin_sf2_file","1020_Chaos_sf2_file","1020_FluidR3_GM_sf2_file","1020_GeneralUserGS_sf2_file","1020_JCLive_sf2_file","1021_Aspirin_sf2_file","1021_FluidR3_GM_sf2_file","1021_GeneralUserGS_sf2_file","1021_JCLive_sf2_file","1022_GeneralUserGS_sf2_file","1030_Aspirin_sf2_file","1030_Chaos_sf2_file","1030_FluidR3_GM_sf2_file","1030_GeneralUserGS_sf2_file","1030_JCLive_sf2_file","1031_Aspirin_sf2_file","1031_FluidR3_GM_sf2_file","1031_GeneralUserGS_sf2_file","1032_FluidR3_GM_sf2_file","1040_Aspirin_sf2_file","1040_Chaos_sf2_file","1040_FluidR3_GM_sf2_file","1040_GeneralUserGS_sf2_file","1040_JCLive_sf2_file","1041_FluidR3_GM_sf2_file","1041_GeneralUserGS_sf2_file","1050_Aspirin_sf2_file","1050_Chaos_sf2_file","1050_FluidR3_GM_sf2_file","1050_GeneralUserGS_sf2_file","1050_JCLive_sf2_file","1051_GeneralUserGS_sf2_file","1060_Aspirin_sf2_file","1060_Chaos_sf2_file","1060_FluidR3_GM_sf2_file","1060_GeneralUserGS_sf2_file","1060_JCLive_sf2_file","1061_FluidR3_GM_sf2_file","1061_GeneralUserGS_sf2_file","1070_Aspirin_sf2_file","1070_Chaos_sf2_file","1070_FluidR3_GM_sf2_file","1070_GeneralUserGS_sf2_file","1070_JCLive_sf2_file","1071_FluidR3_GM_sf2_file","1071_GeneralUserGS_sf2_file","1072_GeneralUserGS_sf2_file","1073_GeneralUserGS_sf2_file","1080_Aspirin_sf2_file","1080_Chaos_sf2_file","1080_FluidR3_GM_sf2_file","1080_GeneralUserGS_sf2_file","1080_JCLive_sf2_file","1090_Aspirin_sf2_file","1090_Chaos_sf2_file","1090_FluidR3_GM_sf2_file","1090_GeneralUserGS_sf2_file","1090_JCLive_sf2_file","1100_Aspirin_sf2_file","1100_Chaos_sf2_file","1100_FluidR3_GM_sf2_file","1100_GeneralUserGS_sf2_file","1100_JCLive_sf2_file","1101_Aspirin_sf2_file","1101_FluidR3_GM_sf2_file","1101_GeneralUserGS_sf2_file","1102_GeneralUserGS_sf2_file","1110_Aspirin_sf2_file","1110_Chaos_sf2_file","1110_FluidR3_GM_sf2_file","1110_GeneralUserGS_sf2_file","1110_JCLive_sf2_file","1120_Aspirin_sf2_file","1120_Chaos_sf2_file","1120_FluidR3_GM_sf2_file","1120_GeneralUserGS_sf2_file","1120_JCLive_sf2_file","1130_Aspirin_sf2_file","1130_Chaos_sf2_file","1130_FluidR3_GM_sf2_file","1130_GeneralUserGS_sf2_file","1130_JCLive_sf2_file","1131_FluidR3_GM_sf2_file","1140_Aspirin_sf2_file","1140_Chaos_sf2_file","1140_FluidR3_GM_sf2_file","1140_GeneralUserGS_sf2_file","1140_JCLive_sf2_file","1141_FluidR3_GM_sf2_file","1150_Aspirin_sf2_file","1150_Chaos_sf2_file","1150_FluidR3_GM_sf2_file","1150_GeneralUserGS_sf2_file","1150_JCLive_sf2_file","1151_FluidR3_GM_sf2_file","1151_GeneralUserGS_sf2_file","1152_FluidR3_GM_sf2_file","1152_GeneralUserGS_sf2_file","1160_Aspirin_sf2_file","1160_Chaos_sf2_file","1160_FluidR3_GM_sf2_file","1160_GeneralUserGS_sf2_file","1160_JCLive_sf2_file","1161_FluidR3_GM_sf2_file","1161_GeneralUserGS_sf2_file","1162_FluidR3_GM_sf2_file","1162_GeneralUserGS_sf2_file","1163_FluidR3_GM_sf2_file","1170_Aspirin_sf2_file","1170_Chaos_sf2_file","1170_FluidR3_GM_sf2_file","1170_GeneralUserGS_sf2_file","1170_JCLive_sf2_file","1171_FluidR3_GM_sf2_file","1171_GeneralUserGS_sf2_file","1172_FluidR3_GM_sf2_file","1173_FluidR3_GM_sf2_file","1180_Aspirin_sf2_file","1180_Chaos_sf2_file","1180_FluidR3_GM_sf2_file","1180_GeneralUserGS_sf2_file","1180_JCLive_sf2_file","1181_FluidR3_GM_sf2_file","1181_GeneralUserGS_sf2_file","1190_Aspirin_sf2_file","1190_Chaos_sf2_file","1190_FluidR3_GM_sf2_file","1190_GeneralUserGS_sf2_file","1190_JCLive_sf2_file","1191_GeneralUserGS_sf2_file","1192_GeneralUserGS_sf2_file","1193_GeneralUserGS_sf2_file","1194_GeneralUserGS_sf2_file","1200_Aspirin_sf2_file","1200_Chaos_sf2_file","1200_FluidR3_GM_sf2_file","1200_GeneralUserGS_sf2_file","1200_JCLive_sf2_file","1201_Aspirin_sf2_file","1201_GeneralUserGS_sf2_file","1202_GeneralUserGS_sf2_file","1210_Aspirin_sf2_file","1210_Chaos_sf2_file","1210_FluidR3_GM_sf2_file","1210_GeneralUserGS_sf2_file","1210_JCLive_sf2_file","1211_Aspirin_sf2_file","1211_GeneralUserGS_sf2_file","1212_GeneralUserGS_sf2_file","1220_Aspirin_sf2_file","1220_Chaos_sf2_file","1220_FluidR3_GM_sf2_file","1220_GeneralUserGS_sf2_file","1220_JCLive_sf2_file","1221_Aspirin_sf2_file","1221_GeneralUserGS_sf2_file","1221_JCLive_sf2_file","1222_Aspirin_sf2_file","1222_GeneralUserGS_sf2_file","1223_Aspirin_sf2_file","1223_GeneralUserGS_sf2_file","1224_Aspirin_sf2_file","1224_GeneralUserGS_sf2_file","1225_GeneralUserGS_sf2_file","1226_GeneralUserGS_sf2_file","1230_Aspirin_sf2_file","1230_Chaos_sf2_file","1230_FluidR3_GM_sf2_file","1230_GeneralUserGS_sf2_file","1230_JCLive_sf2_file","1231_Aspirin_sf2_file","1231_GeneralUserGS_sf2_file","1232_Aspirin_sf2_file","1232_GeneralUserGS_sf2_file","1233_GeneralUserGS_sf2_file","1234_GeneralUserGS_sf2_file","1240_Aspirin_sf2_file","1240_Chaos_sf2_file","1240_FluidR3_GM_sf2_file","1240_GeneralUserGS_sf2_file","1240_JCLive_sf2_file","1241_Aspirin_sf2_file","1241_GeneralUserGS_sf2_file","1242_Aspirin_sf2_file","1242_GeneralUserGS_sf2_file","1243_Aspirin_sf2_file","1243_GeneralUserGS_sf2_file","1244_Aspirin_sf2_file","1244_GeneralUserGS_sf2_file","1250_Aspirin_sf2_file","1250_Chaos_sf2_file","1250_FluidR3_GM_sf2_file","1250_GeneralUserGS_sf2_file","1250_JCLive_sf2_file","1251_Aspirin_sf2_file","1251_FluidR3_GM_sf2_file","1251_GeneralUserGS_sf2_file","1252_Aspirin_sf2_file","1252_FluidR3_GM_sf2_file","1252_GeneralUserGS_sf2_file","1253_Aspirin_sf2_file","1253_GeneralUserGS_sf2_file","1254_Aspirin_sf2_file","1254_GeneralUserGS_sf2_file","1255_Aspirin_sf2_file","1255_GeneralUserGS_sf2_file","1256_Aspirin_sf2_file","1256_GeneralUserGS_sf2_file","1257_Aspirin_sf2_file","1257_GeneralUserGS_sf2_file","1258_Aspirin_sf2_file","1258_GeneralUserGS_sf2_file","1259_GeneralUserGS_sf2_file","1260_Aspirin_sf2_file","1260_Chaos_sf2_file","1260_FluidR3_GM_sf2_file","1260_GeneralUserGS_sf2_file","1260_JCLive_sf2_file","1261_Aspirin_sf2_file","1261_GeneralUserGS_sf2_file","1262_Aspirin_sf2_file","1262_GeneralUserGS_sf2_file","1263_Aspirin_sf2_file","1263_GeneralUserGS_sf2_file","1264_Aspirin_sf2_file","1264_GeneralUserGS_sf2_file","1265_Aspirin_sf2_file","1265_GeneralUserGS_sf2_file","1270_Aspirin_sf2_file","1270_Chaos_sf2_file","1270_FluidR3_GM_sf2_file","1270_GeneralUserGS_sf2_file","1270_JCLive_sf2_file","1271_Aspirin_sf2_file","1271_GeneralUserGS_sf2_file","1272_Aspirin_sf2_file","1272_GeneralUserGS_sf2_file","1273_GeneralUserGS_sf2_file","1274_GeneralUserGS_sf2_file"],drums=["35_0_Chaos_sf2_file","35_12_JCLive_sf2_file","35_16_JCLive_sf2_file","35_18_JCLive_sf2_file","35_4_Chaos_sf2_file","36_12_JCLive_sf2_file","36_16_JCLive_sf2_file","36_18_JCLive_sf2_file","36_4_Chaos_sf2_file","37_12_JCLive_sf2_file","37_16_JCLive_sf2_file","37_18_JCLive_sf2_file","37_4_Chaos_sf2_file","38_12_JCLive_sf2_file","38_16_JCLive_sf2_file","38_18_JCLive_sf2_file","38_4_Chaos_sf2_file","39_12_JCLive_sf2_file","39_16_JCLive_sf2_file","39_18_JCLive_sf2_file","39_4_Chaos_sf2_file","40_12_JCLive_sf2_file","40_16_JCLive_sf2_file","40_18_JCLive_sf2_file","40_4_Chaos_sf2_file","41_12_JCLive_sf2_file","41_16_JCLive_sf2_file","41_18_JCLive_sf2_file","41_4_Chaos_sf2_file","42_12_JCLive_sf2_file","42_16_JCLive_sf2_file","42_18_JCLive_sf2_file","42_4_Chaos_sf2_file","43_12_JCLive_sf2_file","43_16_JCLive_sf2_file","43_18_JCLive_sf2_file","43_4_Chaos_sf2_file","44_12_JCLive_sf2_file","44_16_JCLive_sf2_file","44_18_JCLive_sf2_file","44_4_Chaos_sf2_file","45_12_JCLive_sf2_file","45_16_JCLive_sf2_file","45_18_JCLive_sf2_file","45_4_Chaos_sf2_file","46_12_JCLive_sf2_file","46_16_JCLive_sf2_file","46_18_JCLive_sf2_file","46_4_Chaos_sf2_file","47_12_JCLive_sf2_file","47_16_JCLive_sf2_file","47_18_JCLive_sf2_file","47_4_Chaos_sf2_file","48_12_JCLive_sf2_file","48_16_JCLive_sf2_file","48_18_JCLive_sf2_file","48_4_Chaos_sf2_file","49_12_JCLive_sf2_file","49_16_JCLive_sf2_file","49_18_JCLive_sf2_file","49_4_Chaos_sf2_file","50_12_JCLive_sf2_file","50_16_JCLive_sf2_file","50_18_JCLive_sf2_file","50_4_Chaos_sf2_file","51_12_JCLive_sf2_file","51_16_JCLive_sf2_file","51_18_JCLive_sf2_file","51_4_Chaos_sf2_file","52_12_JCLive_sf2_file","52_16_JCLive_sf2_file","52_18_JCLive_sf2_file","52_4_Chaos_sf2_file","53_12_JCLive_sf2_file","53_16_JCLive_sf2_file","53_18_JCLive_sf2_file","53_4_Chaos_sf2_file","54_12_JCLive_sf2_file","54_16_JCLive_sf2_file","54_18_JCLive_sf2_file","54_4_Chaos_sf2_file","55_12_JCLive_sf2_file","55_16_JCLive_sf2_file","55_18_JCLive_sf2_file","55_4_Chaos_sf2_file","56_12_JCLive_sf2_file","56_16_JCLive_sf2_file","56_18_JCLive_sf2_file","56_4_Chaos_sf2_file","57_12_JCLive_sf2_file","57_16_JCLive_sf2_file","57_18_JCLive_sf2_file","57_4_Chaos_sf2_file","58_12_JCLive_sf2_file","58_16_JCLive_sf2_file","58_18_JCLive_sf2_file","58_4_Chaos_sf2_file","59_12_JCLive_sf2_file","59_16_JCLive_sf2_file","59_18_JCLive_sf2_file","59_4_Chaos_sf2_file","60_12_JCLive_sf2_file","60_16_JCLive_sf2_file","60_18_JCLive_sf2_file","60_4_Chaos_sf2_file","61_12_JCLive_sf2_file","61_16_JCLive_sf2_file","61_18_JCLive_sf2_file","61_4_Chaos_sf2_file","62_12_JCLive_sf2_file","62_16_JCLive_sf2_file","62_18_JCLive_sf2_file","62_4_Chaos_sf2_file","63_12_JCLive_sf2_file","63_16_JCLive_sf2_file","63_18_JCLive_sf2_file","63_4_Chaos_sf2_file","64_12_JCLive_sf2_file","64_16_JCLive_sf2_file","64_18_JCLive_sf2_file","64_4_Chaos_sf2_file","65_12_JCLive_sf2_file","65_16_JCLive_sf2_file","65_18_JCLive_sf2_file","65_4_Chaos_sf2_file","66_12_JCLive_sf2_file","66_16_JCLive_sf2_file","66_18_JCLive_sf2_file","66_4_Chaos_sf2_file","67_12_JCLive_sf2_file","67_16_JCLive_sf2_file","67_18_JCLive_sf2_file","67_4_Chaos_sf2_file","68_12_JCLive_sf2_file","68_16_JCLive_sf2_file","68_18_JCLive_sf2_file","68_4_Chaos_sf2_file","69_12_JCLive_sf2_file","69_16_JCLive_sf2_file","69_18_JCLive_sf2_file","69_4_Chaos_sf2_file","70_12_JCLive_sf2_file","70_16_JCLive_sf2_file","70_18_JCLive_sf2_file","70_4_Chaos_sf2_file","71_12_JCLive_sf2_file","71_16_JCLive_sf2_file","71_18_JCLive_sf2_file","71_4_Chaos_sf2_file","72_12_JCLive_sf2_file","72_16_JCLive_sf2_file","72_18_JCLive_sf2_file","72_4_Chaos_sf2_file","73_12_JCLive_sf2_file","73_16_JCLive_sf2_file","73_18_JCLive_sf2_file","73_4_Chaos_sf2_file","74_12_JCLive_sf2_file","74_16_JCLive_sf2_file","74_18_JCLive_sf2_file","74_4_Chaos_sf2_file","75_12_JCLive_sf2_file","75_16_JCLive_sf2_file","75_18_JCLive_sf2_file","75_4_Chaos_sf2_file","76_12_JCLive_sf2_file","76_16_JCLive_sf2_file","76_18_JCLive_sf2_file","76_4_Chaos_sf2_file","77_12_JCLive_sf2_file","77_16_JCLive_sf2_file","77_18_JCLive_sf2_file","77_4_Chaos_sf2_file","78_12_JCLive_sf2_file","78_16_JCLive_sf2_file","78_18_JCLive_sf2_file","78_4_Chaos_sf2_file","79_12_JCLive_sf2_file","79_16_JCLive_sf2_file","79_18_JCLive_sf2_file","79_4_Chaos_sf2_file","80_12_JCLive_sf2_file","80_16_JCLive_sf2_file","80_18_JCLive_sf2_file","80_4_Chaos_sf2_file","81_12_JCLive_sf2_file","81_16_JCLive_sf2_file","81_18_JCLive_sf2_file","81_4_Chaos_sf2_file"],instrumentNames=[];instrumentNames[0]="Acoustic Grand Piano: Piano",instrumentNames[1]="Bright Acoustic Piano: Piano",instrumentNames[2]="Electric Grand Piano: Piano",instrumentNames[3]="Honky-tonk Piano: Piano",instrumentNames[4]="Electric Piano 1: Piano",instrumentNames[5]="Electric Piano 2: Piano",instrumentNames[6]="Harpsichord: Piano",instrumentNames[7]="Clavinet: Piano",instrumentNames[8]="Celesta: Chromatic Percussion",instrumentNames[9]="Glockenspiel: Chromatic Percussion",instrumentNames[10]="Music Box: Chromatic Percussion",instrumentNames[11]="Vibraphone: Chromatic Percussion",instrumentNames[12]="Marimba: Chromatic Percussion",instrumentNames[13]="Xylophone: Chromatic Percussion",instrumentNames[14]="Tubular Bells: Chromatic Percussion",instrumentNames[15]="Dulcimer: Chromatic Percussion",instrumentNames[16]="Drawbar Organ: Organ",instrumentNames[17]="Percussive Organ: Organ",instrumentNames[18]="Rock Organ: Organ",instrumentNames[19]="Church Organ: Organ",instrumentNames[20]="Reed Organ: Organ",instrumentNames[21]="Accordion: Organ",instrumentNames[22]="Harmonica: Organ",instrumentNames[23]="Tango Accordion: Organ",instrumentNames[24]="Acoustic Guitar (nylon): Guitar",instrumentNames[25]="Acoustic Guitar (steel): Guitar",instrumentNames[26]="Electric Guitar (jazz): Guitar",instrumentNames[27]="Electric Guitar (clean): Guitar",instrumentNames[28]="Electric Guitar (muted): Guitar",instrumentNames[29]="Overdriven Guitar: Guitar",instrumentNames[30]="Distortion Guitar: Guitar",instrumentNames[31]="Guitar Harmonics: Guitar",instrumentNames[32]="Acoustic Bass: Bass",instrumentNames[33]="Electric Bass (finger): Bass",instrumentNames[34]="Electric Bass (pick): Bass",instrumentNames[35]="Fretless Bass: Bass",instrumentNames[36]="Slap Bass 1: Bass",instrumentNames[37]="Slap Bass 2: Bass",instrumentNames[38]="Synth Bass 1: Bass",instrumentNames[39]="Synth Bass 2: Bass",instrumentNames[40]="Violin: Strings",instrumentNames[41]="Viola: Strings",instrumentNames[42]="Cello: Strings",instrumentNames[43]="Contrabass: Strings",instrumentNames[44]="Tremolo Strings: Strings",instrumentNames[45]="Pizzicato Strings: Strings",instrumentNames[46]="Orchestral Harp: Strings",instrumentNames[47]="Timpani: Strings",instrumentNames[48]="String Ensemble 1: Ensemble",instrumentNames[49]="String Ensemble 2: Ensemble",instrumentNames[50]="Synth Strings 1: Ensemble",instrumentNames[51]="Synth Strings 2: Ensemble",instrumentNames[52]="Choir Aahs: Ensemble",instrumentNames[53]="Voice Oohs: Ensemble",instrumentNames[54]="Synth Choir: Ensemble",instrumentNames[55]="Orchestra Hit: Ensemble",instrumentNames[56]="Trumpet: Brass",instrumentNames[57]="Trombone: Brass",instrumentNames[58]="Tuba: Brass",instrumentNames[59]="Muted Trumpet: Brass",instrumentNames[60]="French Horn: Brass",instrumentNames[61]="Brass Section: Brass",instrumentNames[62]="Synth Brass 1: Brass",instrumentNames[63]="Synth Brass 2: Brass",instrumentNames[64]="Soprano Sax: Reed",instrumentNames[65]="Alto Sax: Reed",instrumentNames[66]="Tenor Sax: Reed",instrumentNames[67]="Baritone Sax: Reed",instrumentNames[68]="Oboe: Reed",instrumentNames[69]="English Horn: Reed",instrumentNames[70]="Bassoon: Reed",instrumentNames[71]="Clarinet: Reed",instrumentNames[72]="Piccolo: Pipe",instrumentNames[73]="Flute: Pipe",instrumentNames[74]="Recorder: Pipe",instrumentNames[75]="Pan Flute: Pipe",instrumentNames[76]="Blown bottle: Pipe",instrumentNames[77]="Shakuhachi: Pipe",instrumentNames[78]="Whistle: Pipe",instrumentNames[79]="Ocarina: Pipe",instrumentNames[80]="Lead 1 (square): Synth Lead",instrumentNames[81]="Lead 2 (sawtooth): Synth Lead",instrumentNames[82]="Lead 3 (calliope): Synth Lead",instrumentNames[83]="Lead 4 (chiff): Synth Lead",instrumentNames[84]="Lead 5 (charang): Synth Lead",instrumentNames[85]="Lead 6 (voice): Synth Lead",instrumentNames[86]="Lead 7 (fifths): Synth Lead",instrumentNames[87]="Lead 8 (bass + lead): Synth Lead",instrumentNames[88]="Pad 1 (new age): Synth Pad",instrumentNames[89]="Pad 2 (warm): Synth Pad",instrumentNames[90]="Pad 3 (polysynth): Synth Pad",instrumentNames[91]="Pad 4 (choir): Synth Pad",instrumentNames[92]="Pad 5 (bowed): Synth Pad",instrumentNames[93]="Pad 6 (metallic): Synth Pad",instrumentNames[94]="Pad 7 (halo): Synth Pad",instrumentNames[95]="Pad 8 (sweep): Synth Pad",instrumentNames[96]="FX 1 (rain): Synth Effects",instrumentNames[97]="FX 2 (soundtrack): Synth Effects",instrumentNames[98]="FX 3 (crystal): Synth Effects",instrumentNames[99]="FX 4 (atmosphere): Synth Effects",instrumentNames[100]="FX 5 (brightness): Synth Effects",instrumentNames[101]="FX 6 (goblins): Synth Effects",instrumentNames[102]="FX 7 (echoes): Synth Effects",instrumentNames[103]="FX 8 (sci-fi): Synth Effects",instrumentNames[104]="Sitar: Ethnic",instrumentNames[105]="Banjo: Ethnic",instrumentNames[106]="Shamisen: Ethnic",instrumentNames[107]="Koto: Ethnic",instrumentNames[108]="Kalimba: Ethnic",instrumentNames[109]="Bagpipe: Ethnic",instrumentNames[110]="Fiddle: Ethnic",instrumentNames[111]="Shanai: Ethnic",instrumentNames[112]="Tinkle Bell: Percussive",instrumentNames[113]="Agogo: Percussive",instrumentNames[114]="Steel Drums: Percussive",instrumentNames[115]="Woodblock: Percussive",instrumentNames[116]="Taiko Drum: Percussive",instrumentNames[117]="Melodic Tom: Percussive",instrumentNames[118]="Synth Drum: Percussive",instrumentNames[119]="Reverse Cymbal: Percussive",instrumentNames[120]="Guitar Fret Noise: Sound effects",instrumentNames[121]="Breath Noise: Sound effects",instrumentNames[122]="Seashore: Sound effects",instrumentNames[123]="Bird Tweet: Sound effects",instrumentNames[124]="Telephone Ring: Sound effects",instrumentNames[125]="Helicopter: Sound effects",instrumentNames[126]="Applause: Sound effects",instrumentNames[127]="Gunshot: Sound effects";const list=Object.freeze(Object.defineProperty({__proto__:null,drums,instrumentNames,instruments},Symbol.toStringTag,{value:"Module"}));var SoundFont2={exports:{}},hasRequiredSoundFont2;function requireSoundFont2(){return hasRequiredSoundFont2||(hasRequiredSoundFont2=1,function(l,a){(function(o,u){l.exports=u()})(window,function(){return function(o){var u={};function p(d){if(u[d])return u[d].exports;var f=u[d]={i:d,l:!1,exports:{}};return o[d].call(f.exports,f,f.exports,p),f.l=!0,f.exports}return p.m=o,p.c=u,p.d=function(d,f,g){p.o(d,f)||Object.defineProperty(d,f,{enumerable:!0,get:g})},p.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},p.t=function(d,f){if(1&f&&(d=p(d)),8&f||4&f&&typeof d=="object"&&d&&d.__esModule)return d;var g=Object.create(null);if(p.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:d}),2&f&&typeof d!="string")for(var b in d)p.d(g,b,function(O){return d[O]}.bind(null,b));return g},p.n=function(d){var f=d&&d.__esModule?function(){return d.default}:function(){return d};return p.d(f,"a",f),f},p.o=function(d,f){return Object.prototype.hasOwnProperty.call(d,f)},p.p="",p(p.s="./src/index.ts")}({"./src/chunk.ts":function(o,u,p){p.r(u),p.d(u,"SF2Chunk",function(){return F});var d=p("./src/riff/index.ts"),f=p("./src/constants.ts"),g=p("./src/chunks/index.ts");function b($){return(b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})($)}function O($,B){for(var I=0;I<B.length;I++){var U=B[I];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty($,U.key,U)}}function S($){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)})($)}function M($,B){return(M=Object.setPrototypeOf||function(I,U){return I.__proto__=U,I})($,B)}function A($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}var F=function($){function B(te){var de,se,q,le,fe,_e;return function(Pe,Oe){if(!(Pe instanceof Oe))throw new TypeError("Cannot call a class as a function")}(this,B),se=this,de=!(q=S(B).call(this,te.id,te.length,te.buffer,te.subChunks))||b(q)!=="object"&&typeof q!="function"?A(se):q,le=A(A(de)),_e=void 0,(fe="subChunks")in le?Object.defineProperty(le,fe,{value:_e,enumerable:!0,configurable:!0,writable:!0}):le[fe]=_e,de.subChunks=te.subChunks.map(function(Pe){return new B(Pe)}),de}var I,U;return function(te,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");te.prototype=Object.create(de&&de.prototype,{constructor:{value:te,writable:!0,configurable:!0}}),de&&M(te,de)}(B,d.RIFFChunk),I=B,(U=[{key:"getMetaData",value:function(){if(this.id!=="LIST")throw new d.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var te=this.subChunks.reduce(function(de,se){if(se.id==="ifil"||se.id==="iver"){if(se.length!==f.SF_VERSION_LENGTH)throw new d.ParseError("Invalid size for the '".concat(se.id,"' sub-chunk"));de[se.id]="".concat(se.getInt16(),".").concat(se.getInt16(2))}else de[se.id]=se.getString();return de},{});if(!te.ifil)throw new d.ParseError("Missing required 'ifil' sub-chunk");if(!te.INAM)throw new d.ParseError("Missing required 'INAM' sub-chunk");return{version:te.ifil,soundEngine:te.isng||"EMU8000",name:te.INAM,rom:te.irom,romVersion:te.iver,creationDate:te.ICRD,author:te.IENG,product:te.IPRD,copyright:te.ICOP,comments:te.ICMT,createdBy:te.ISFT}}},{key:"getSampleData",value:function(){if(this.id!=="LIST")throw new d.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));var te=this.subChunks[0];if(te.id!=="smpl")throw new d.ParseError("Invalid chunk signature","'smpl'","'".concat(te.id,"'"));return te.buffer}},{key:"getPresetData",value:function(){if(this.id!=="LIST")throw new d.ParseError("Unexpected chunk ID","'LIST'","'".concat(this.id,"'"));return{presetHeaders:Object(g.getPresetHeaders)(this.subChunks[0]),presetZones:Object(g.getZones)(this.subChunks[1],"pbag"),presetModulators:Object(g.getModulators)(this.subChunks[2],"pmod"),presetGenerators:Object(g.getGenerators)(this.subChunks[3],"pgen"),instrumentHeaders:Object(g.getInstrumentHeaders)(this.subChunks[4]),instrumentZones:Object(g.getZones)(this.subChunks[5],"ibag"),instrumentModulators:Object(g.getModulators)(this.subChunks[6],"imod"),instrumentGenerators:Object(g.getGenerators)(this.subChunks[7],"igen"),sampleHeaders:Object(g.getSampleHeaders)(this.subChunks[8])}}}])&&O(I.prototype,U),B}()},"./src/chunks/generators.ts":function(o,u,p){p.r(u),p.d(u,"getGenerators",function(){return M});var d=p("./src/riff/index.ts"),f=p("./src/types/index.ts"),g=p("./src/constants.ts"),b=[f.GeneratorType.StartAddrsOffset,f.GeneratorType.EndAddrsOffset,f.GeneratorType.StartLoopAddrsOffset,f.GeneratorType.EndLoopAddrsOffset,f.GeneratorType.StartAddrsCoarseOffset,f.GeneratorType.EndAddrsCoarseOffset,f.GeneratorType.StartLoopAddrsCoarseOffset,f.GeneratorType.KeyNum,f.GeneratorType.Velocity,f.GeneratorType.EndLoopAddrsCoarseOffset,f.GeneratorType.SampleModes,f.GeneratorType.ExclusiveClass,f.GeneratorType.OverridingRootKey],O=[f.GeneratorType.Unused1,f.GeneratorType.Unused2,f.GeneratorType.Unused3,f.GeneratorType.Unused4,f.GeneratorType.Reserved1,f.GeneratorType.Reserved2,f.GeneratorType.Reserved3],S=[f.GeneratorType.KeyRange,f.GeneratorType.VelRange],M=function(A,F){if(A.id!==F)throw new d.ParseError("Unexpected chunk ID","'".concat(F,"'"),"'".concat(A.id,"'"));if(A.length%g.SF_GENERATOR_SIZE)throw new d.ParseError("Invalid size for the '".concat(F,"' sub-chunk"));return A.iterate(function($){var B=$.getInt16();return f.GeneratorType[B]?F==="pgen"&&b.includes(B)||F==="igen"&&O.includes(B)?null:S.includes(B)?{id:B,range:{lo:$.getByte(),hi:$.getByte()}}:{id:B,value:$.getInt16BE()}:null})}},"./src/chunks/index.ts":function(o,u,p){p.r(u);var d=p("./src/chunks/instruments/index.ts");p.d(u,"getInstrumentHeaders",function(){return d.getInstrumentHeaders});var f=p("./src/chunks/presets/index.ts");p.d(u,"getPresetHeaders",function(){return f.getPresetHeaders});var g=p("./src/chunks/samples/index.ts");p.d(u,"getSampleHeaders",function(){return g.getSampleHeaders});var b=p("./src/chunks/generators.ts");p.d(u,"getGenerators",function(){return b.getGenerators});var O=p("./src/chunks/modulators.ts");p.d(u,"getModulators",function(){return O.getModulators});var S=p("./src/chunks/zones.ts");p.d(u,"getZones",function(){return S.getZones}),p.d(u,"getItemsInZone",function(){return S.getItemsInZone})},"./src/chunks/instruments/headers.ts":function(o,u,p){p.r(u),p.d(u,"getInstrumentHeaders",function(){return g});var d=p("./src/riff/index.ts"),f=p("./src/constants.ts"),g=function(b){if(b.id!=="inst")throw new d.ParseError("Unexpected chunk ID","'inst'","'".concat(b.id,"'"));if(b.length%f.SF_INSTRUMENT_HEADER_SIZE)throw new d.ParseError("Invalid size for the 'inst' sub-chunk");return b.iterate(function(O){return{name:O.getString(),bagIndex:O.getInt16()}})}},"./src/chunks/instruments/index.ts":function(o,u,p){p.r(u);var d=p("./src/chunks/instruments/headers.ts");p.d(u,"getInstrumentHeaders",function(){return d.getInstrumentHeaders})},"./src/chunks/modulators.ts":function(o,u,p){p.r(u),p.d(u,"getModulators",function(){return b});var d=p("./src/riff/index.ts"),f=p("./src/constants.ts"),g=function(O){return{type:O>>10&63,polarity:O>>9&1,direction:O>>8&1,palette:O>>7&1,index:127&O}},b=function(O,S){if(O.id!==S)throw new d.ParseError("Unexpected chunk ID","'".concat(S,"'"),"'".concat(O.id,"'"));if(O.length%f.SF_MODULATOR_SIZE)throw new d.ParseError("Invalid size for the '".concat(S,"' sub-chunk"));return O.iterate(function(M){return{source:g(M.getInt16BE()),id:M.getInt16BE(),value:M.getInt16BE(),valueSource:g(M.getInt16BE()),transform:M.getInt16BE()}})}},"./src/chunks/presets/headers.ts":function(o,u,p){p.r(u),p.d(u,"getPresetHeaders",function(){return g});var d=p("./src/riff/index.ts"),f=p("./src/constants.ts"),g=function(b){if(b.id!=="phdr")throw new d.ParseError("Invalid chunk ID","'phdr'","'".concat(b.id,"'"));if(b.length%f.SF_PRESET_HEADER_SIZE)throw new d.ParseError("Invalid size for the 'phdr' sub-chunk");return b.iterate(function(O){return{name:O.getString(),preset:O.getInt16(),bank:O.getInt16(),bagIndex:O.getInt16(),library:O.getUInt32(),genre:O.getUInt32(),morphology:O.getUInt32()}})}},"./src/chunks/presets/index.ts":function(o,u,p){p.r(u);var d=p("./src/chunks/presets/headers.ts");p.d(u,"getPresetHeaders",function(){return d.getPresetHeaders})},"./src/chunks/samples/headers.ts":function(o,u,p){p.r(u),p.d(u,"getSampleHeaders",function(){return g});var d=p("./src/riff/index.ts"),f=p("./src/constants.ts"),g=function(b){if(b.id!=="shdr")throw new d.ParseError("Unexpected chunk ID","'shdr'","'".concat(b.id,"'"));if(b.length%f.SF_SAMPLE_HEADER_SIZE)throw new d.ParseError("Invalid size for the 'shdr' sub-chunk");return b.iterate(function(O){return{name:O.getString(),start:O.getUInt32(),end:O.getUInt32(),startLoop:O.getUInt32(),endLoop:O.getUInt32(),sampleRate:O.getUInt32(),originalPitch:O.getByte(),pitchCorrection:O.getChar(),link:O.getInt16(),type:O.getInt16()}})}},"./src/chunks/samples/index.ts":function(o,u,p){p.r(u);var d=p("./src/chunks/samples/headers.ts");p.d(u,"getSampleHeaders",function(){return d.getSampleHeaders})},"./src/chunks/zones.ts":function(o,u,p){p.r(u),p.d(u,"getZones",function(){return b}),p.d(u,"getItemsInZone",function(){return O});var d=p("./src/riff/index.ts"),f=p("./src/constants.ts"),g=p("./src/types/index.ts"),b=function(F,$){if(F.id!==$)throw new d.ParseError("Unexpected chunk ID","'".concat($,"'"),"'".concat(F.id,"'"));if(F.length%f.SF_BAG_SIZE)throw new d.ParseError("Invalid size for the '".concat($,"' sub-chunk"));return F.iterate(function(B){return{generatorIndex:B.getInt16(),modulatorIndex:B.getInt16()}})},O=function(F,$,B,I,U,te){for(var de=[],se=0;se<F.length;se++){for(var q=F[se],le=F[se+1],fe=q.bagIndex,_e=le?le.bagIndex:$.length,Pe=[],Oe=void 0,Fe=fe;Fe<_e;Fe++){var we=S(Fe,$,B),ke=M(Fe,$,I),Ge=ke[g.GeneratorType.KeyRange]&&ke[g.GeneratorType.KeyRange].range,Be=ke[te];if(Be){var Ze=U[Be.value];Ze&&Pe.push({keyRange:Ge,modulators:we,generators:ke,reference:Ze})}else Fe-fe==0&&(Oe={keyRange:Ge,modulators:we,generators:ke})}de.push({header:q,globalZone:Oe,zones:Pe})}return de},S=function(F,$,B){var I=$[F],U=$[F+1],te=I.modulatorIndex,de=U?U.modulatorIndex:$.length;return A(te,de,B)},M=function(F,$,B){var I=$[F],U=$[F+1],te=I.generatorIndex,de=U?U.generatorIndex:$.length;return A(te,de,B)},A=function(F,$,B){for(var I={},U=F;U<$;U++){var te=B[U];te&&(I[te.id]=te)}return I}},"./src/constants.ts":function(o,u,p){p.r(u),p.d(u,"SF_VERSION_LENGTH",function(){return d}),p.d(u,"SF_PRESET_HEADER_SIZE",function(){return f}),p.d(u,"SF_BAG_SIZE",function(){return g}),p.d(u,"SF_MODULATOR_SIZE",function(){return b}),p.d(u,"SF_GENERATOR_SIZE",function(){return O}),p.d(u,"SF_INSTRUMENT_HEADER_SIZE",function(){return S}),p.d(u,"SF_SAMPLE_HEADER_SIZE",function(){return M}),p.d(u,"DEFAULT_SAMPLE_RATE",function(){return A});var d=4,f=38,g=4,b=10,O=4,S=22,M=46,A=22050},"./src/index.ts":function(o,u,p){p.r(u);var d=p("./src/types/index.ts");for(var f in d)f!=="default"&&function(S){p.d(u,S,function(){return d[S]})}(f);var g=p("./src/chunk.ts");p.d(u,"SF2Chunk",function(){return g.SF2Chunk});var b=p("./src/constants.ts");p.d(u,"SF_VERSION_LENGTH",function(){return b.SF_VERSION_LENGTH}),p.d(u,"SF_PRESET_HEADER_SIZE",function(){return b.SF_PRESET_HEADER_SIZE}),p.d(u,"SF_BAG_SIZE",function(){return b.SF_BAG_SIZE}),p.d(u,"SF_MODULATOR_SIZE",function(){return b.SF_MODULATOR_SIZE}),p.d(u,"SF_GENERATOR_SIZE",function(){return b.SF_GENERATOR_SIZE}),p.d(u,"SF_INSTRUMENT_HEADER_SIZE",function(){return b.SF_INSTRUMENT_HEADER_SIZE}),p.d(u,"SF_SAMPLE_HEADER_SIZE",function(){return b.SF_SAMPLE_HEADER_SIZE}),p.d(u,"DEFAULT_SAMPLE_RATE",function(){return b.DEFAULT_SAMPLE_RATE});var O=p("./src/soundFont2.ts");p.d(u,"SoundFont2",function(){return O.SoundFont2})},"./src/riff/chunkIterator.ts":function(o,u,p){p.r(u),p.d(u,"ChunkIterator",function(){return b});var d=p("./src/utils/index.ts");function f(O,S){for(var M=0;M<S.length;M++){var A=S[M];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(O,A.key,A)}}function g(O,S,M){return S in O?Object.defineProperty(O,S,{value:M,enumerable:!0,configurable:!0,writable:!0}):O[S]=M,O}var b=function(){function O(A){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;(function($,B){if(!($ instanceof B))throw new TypeError("Cannot call a class as a function")})(this,O),g(this,"target",[]),g(this,"chunk",void 0),g(this,"position",0),this.chunk=A,this.position=F}var S,M;return S=O,(M=[{key:"iterate",value:function(A){for(;this.position<this.chunk.length;){var F=A(this);F&&this.target.push(F)}}},{key:"getString",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,F=Object(d.getStringFromBuffer)(this.getBuffer(this.position,A));return this.position+=A,F}},{key:"getInt16",value:function(){return this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8}},{key:"getInt16BE",value:function(){return this.getInt16()<<16>>16}},{key:"getUInt32",value:function(){return(this.chunk.buffer[this.position++]|this.chunk.buffer[this.position++]<<8|this.chunk.buffer[this.position++]<<16|this.chunk.buffer[this.position++]<<24)>>>0}},{key:"getByte",value:function(){return this.chunk.buffer[this.position++]}},{key:"getChar",value:function(){return this.chunk.buffer[this.position++]<<24>>24}},{key:"skip",value:function(A){this.position+=A}},{key:"getBuffer",value:function(A,F){return this.chunk.buffer.subarray(A,A+F)}},{key:"currentPosition",get:function(){return this.position}}])&&f(S.prototype,M),O}()},"./src/riff/index.ts":function(o,u,p){p.r(u);var d=p("./src/riff/chunkIterator.ts");p.d(u,"ChunkIterator",function(){return d.ChunkIterator});var f=p("./src/riff/parseError.ts");p.d(u,"ParseError",function(){return f.ParseError});var g=p("./src/riff/parser.ts");p.d(u,"parseBuffer",function(){return g.parseBuffer}),p.d(u,"getChunk",function(){return g.getChunk}),p.d(u,"getChunkLength",function(){return g.getChunkLength}),p.d(u,"getSubChunks",function(){return g.getSubChunks}),p.d(u,"getChunkId",function(){return g.getChunkId});var b=p("./src/riff/riffChunk.ts");p.d(u,"RIFFChunk",function(){return b.RIFFChunk})},"./src/riff/parseError.ts":function(o,u,p){function d(A){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(A)}function f(A,F){return!F||d(F)!=="object"&&typeof F!="function"?function($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}(A):F}function g(A){var F=typeof Map=="function"?new Map:void 0;return(g=function($){if($===null||(B=$,Function.toString.call(B).indexOf("[native code]")===-1))return $;var B;if(typeof $!="function")throw new TypeError("Super expression must either be null or a function");if(F!==void 0){if(F.has($))return F.get($);F.set($,I)}function I(){return b($,arguments,S(this).constructor)}return I.prototype=Object.create($.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),O(I,$)})(A)}function b(A,F,$){return(b=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(B,I,U){var te=[null];te.push.apply(te,I);var de=new(Function.bind.apply(B,te));return U&&O(de,U.prototype),de}).apply(null,arguments)}function O(A,F){return(O=Object.setPrototypeOf||function($,B){return $.__proto__=B,$})(A,F)}function S(A){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)})(A)}p.r(u),p.d(u,"ParseError",function(){return M});var M=function(A){function F($,B,I){return function(U,te){if(!(U instanceof te))throw new TypeError("Cannot call a class as a function")}(this,F),f(this,S(F).call(this,"".concat($).concat(B&&I?", expected ".concat(B,", received ").concat(I):"")))}return function($,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(B&&B.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),B&&O($,B)}(F,g(Error)),F}()},"./src/riff/parser.ts":function(o,u,p){p.r(u),p.d(u,"parseBuffer",function(){return b}),p.d(u,"getChunk",function(){return O}),p.d(u,"getChunkLength",function(){return S}),p.d(u,"getSubChunks",function(){return M}),p.d(u,"getChunkId",function(){return A});var d=p("./src/riff/parseError.ts"),f=p("./src/utils/buffer.ts"),g=p("./src/riff/riffChunk.ts"),b=function(F){var $=A(F);if($!=="RIFF")throw new d.ParseError("Invalid file format","RIFF",$);var B=A(F,8);if(B!=="sfbk")throw new d.ParseError("Invalid signature","sfbk",B);var I=F.subarray(8),U=M(I.subarray(4));return new g.RIFFChunk($,I.length,I,U)},O=function(F,$){var B=A(F,$),I=S(F,$+4),U=[];return B!=="RIFF"&&B!=="LIST"||(U=M(F.subarray($+12))),new g.RIFFChunk(B,I,F.subarray($+8),U)},S=function(F,$){return((F=F.subarray($,$+4))[0]|F[1]<<8|F[2]<<16|F[3]<<24)>>>0},M=function(F){for(var $=[],B=0;B<=F.length-8;){var I=O(F,B);$.push(I),B=(B+=8+I.length)%2?B+1:B}return $},A=function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Object(f.getStringFromBuffer)(F.subarray($,$+4))}},"./src/riff/riffChunk.ts":function(o,u,p){p.r(u),p.d(u,"RIFFChunk",function(){return O});var d=p("./src/riff/chunkIterator.ts"),f=p("./src/utils/index.ts");function g(S,M){for(var A=0;A<M.length;A++){var F=M[A];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(S,F.key,F)}}function b(S,M,A){return M in S?Object.defineProperty(S,M,{value:A,enumerable:!0,configurable:!0,writable:!0}):S[M]=A,S}var O=function(){function S(F,$,B,I){(function(U,te){if(!(U instanceof te))throw new TypeError("Cannot call a class as a function")})(this,S),b(this,"id",void 0),b(this,"length",void 0),b(this,"buffer",void 0),b(this,"subChunks",void 0),this.id=F,this.length=$,this.buffer=B,this.subChunks=I}var M,A;return M=S,(A=[{key:"getString",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1?arguments[1]:void 0;return Object(f.getStringFromBuffer)(this.getBuffer(F,$||this.length-F))}},{key:"getInt16",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[F++]|this.buffer[F]<<8}},{key:"getUInt32",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(this.buffer[F++]|this.buffer[F++]<<8|this.buffer[F++]<<16|this.buffer[F]<<24)>>>0}},{key:"getByte",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[F]}},{key:"getChar",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.buffer[F]<<24>>24}},{key:"iterator",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new d.ChunkIterator(this,F)}},{key:"iterate",value:function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=new d.ChunkIterator(this,$);return B.iterate(F),B.target}},{key:"getBuffer",value:function(F,$){return this.buffer.subarray(F,F+$)}}])&&g(M.prototype,A),S}()},"./src/soundFont2.ts":function(o,u,p){p.r(u),p.d(u,"SoundFont2",function(){return $});var d=p("./src/types/index.ts"),f=p("./src/chunk.ts"),g=p("./src/riff/index.ts"),b=p("./src/chunks/index.ts"),O=p("./src/utils/index.ts");function S(B){for(var I=1;I<arguments.length;I++){var U=arguments[I]!=null?arguments[I]:{},te=Object.keys(U);typeof Object.getOwnPropertySymbols=="function"&&(te=te.concat(Object.getOwnPropertySymbols(U).filter(function(de){return Object.getOwnPropertyDescriptor(U,de).enumerable}))),te.forEach(function(de){F(B,de,U[de])})}return B}function M(B,I){for(var U=0;U<I.length;U++){var te=I[U];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(B,te.key,te)}}function A(B,I,U){return I&&M(B.prototype,I),U&&M(B,U),B}function F(B,I,U){return I in B?Object.defineProperty(B,I,{value:U,enumerable:!0,configurable:!0,writable:!0}):B[I]=U,B}var $=function(){function B(I){if(function(te,de){if(!(te instanceof de))throw new TypeError("Cannot call a class as a function")}(this,B),F(this,"chunk",void 0),F(this,"metaData",void 0),F(this,"sampleData",void 0),F(this,"samples",void 0),F(this,"presetData",void 0),F(this,"instruments",void 0),F(this,"presets",void 0),F(this,"banks",void 0),!(I instanceof f.SF2Chunk)){var U=Object(g.parseBuffer)(I);I=new f.SF2Chunk(U)}if(I.subChunks.length!==3)throw new g.ParseError("Invalid sfbk structure","3 chunks","".concat(I.subChunks.length," chunks"));this.chunk=I,this.metaData=I.subChunks[0].getMetaData(),this.sampleData=I.subChunks[1].getSampleData(),this.presetData=I.subChunks[2].getPresetData(),this.samples=this.getSamples(),this.instruments=this.getInstruments(),this.presets=this.getPresets(),this.banks=this.getBanks()}return A(B,null,[{key:"from",value:function(I){return new B(I)}}]),A(B,[{key:"getKeyData",value:function(I){var U=this,te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Object(O.memoize)(function(se,q,le){var fe=U.banks[q];if(fe){var _e=fe.presets[le];if(_e){var Pe=_e.zones.find(function(Be){return U.isKeyInRange(Be,se)});if(Pe){var Oe=Pe.instrument,Fe=Oe.zones.find(function(Be){return U.isKeyInRange(Be,se)});if(Fe){var we=Fe.sample,ke=S({},Pe.generators,Fe.generators),Ge=S({},Pe.modulators,Fe.modulators);return{keyNumber:se,preset:_e,instrument:Oe,sample:we,generators:ke,modulators:Ge}}}}}return null})(I,te,de)}},{key:"isKeyInRange",value:function(I,U){return I.keyRange===void 0||I.keyRange.lo<=U&&I.keyRange.hi>=U}},{key:"getBanks",value:function(){return this.presets.reduce(function(I,U){var te=U.header.bank;return I[te]||(I[te]={presets:[]}),I[te].presets[U.header.preset]=U,I},[])}},{key:"getPresets",value:function(){var I=this.presetData,U=I.presetHeaders,te=I.presetZones,de=I.presetGenerators,se=I.presetModulators;return Object(b.getItemsInZone)(U,te,se,de,this.instruments,d.GeneratorType.Instrument).filter(function(q){return q.header.name!=="EOP"}).map(function(q){return{header:q.header,globalZone:q.globalZone,zones:q.zones.map(function(le){return{keyRange:le.keyRange,generators:le.generators,modulators:le.modulators,instrument:le.reference}})}})}},{key:"getInstruments",value:function(){var I=this.presetData,U=I.instrumentHeaders,te=I.instrumentZones,de=I.instrumentModulators,se=I.instrumentGenerators;return Object(b.getItemsInZone)(U,te,de,se,this.samples,d.GeneratorType.SampleId).filter(function(q){return q.header.name!=="EOI"}).map(function(q){return{header:q.header,globalZone:q.globalZone,zones:q.zones.map(function(le){return{keyRange:le.keyRange,generators:le.generators,modulators:le.modulators,sample:le.reference}})}})}},{key:"getSamples",value:function(){var I=this;return this.presetData.sampleHeaders.filter(function(U){return U.name!=="EOS"}).map(function(U){if(U.name!=="EOS"&&U.sampleRate<=0)throw new Error("Illegal sample rate of ".concat(U.sampleRate," hz in sample '").concat(U.name,"'"));return U.originalPitch>=128&&U.originalPitch<=254&&(U.originalPitch=60),U.startLoop-=U.start,U.endLoop-=U.start,{header:U,data:new Int16Array(new Uint8Array(I.sampleData.subarray(2*U.start,2*U.end)).buffer)}})}}]),B}()},"./src/types/bank.ts":function(o,u){},"./src/types/generator.ts":function(o,u,p){var d,f;function g(O,S,M){return S in O?Object.defineProperty(O,S,{value:M,enumerable:!0,configurable:!0,writable:!0}):O[S]=M,O}p.r(u),p.d(u,"GeneratorType",function(){return f}),p.d(u,"DEFAULT_GENERATOR_VALUES",function(){return b}),function(O){O[O.StartAddrsOffset=0]="StartAddrsOffset",O[O.EndAddrsOffset=1]="EndAddrsOffset",O[O.StartLoopAddrsOffset=2]="StartLoopAddrsOffset",O[O.EndLoopAddrsOffset=3]="EndLoopAddrsOffset",O[O.StartAddrsCoarseOffset=4]="StartAddrsCoarseOffset",O[O.ModLFOToPitch=5]="ModLFOToPitch",O[O.VibLFOToPitch=6]="VibLFOToPitch",O[O.ModEnvToPitch=7]="ModEnvToPitch",O[O.InitialFilterFc=8]="InitialFilterFc",O[O.InitialFilterQ=9]="InitialFilterQ",O[O.ModLFOToFilterFc=10]="ModLFOToFilterFc",O[O.ModEnvToFilterFc=11]="ModEnvToFilterFc",O[O.EndAddrsCoarseOffset=12]="EndAddrsCoarseOffset",O[O.ModLFOToVolume=13]="ModLFOToVolume",O[O.Unused1=14]="Unused1",O[O.ChorusEffectsSend=15]="ChorusEffectsSend",O[O.ReverbEffectsSend=16]="ReverbEffectsSend",O[O.Pan=17]="Pan",O[O.Unused2=18]="Unused2",O[O.Unused3=19]="Unused3",O[O.Unused4=20]="Unused4",O[O.DelayModLFO=21]="DelayModLFO",O[O.FreqModLFO=22]="FreqModLFO",O[O.DelayVibLFO=23]="DelayVibLFO",O[O.FreqVibLFO=24]="FreqVibLFO",O[O.DelayModEnv=25]="DelayModEnv",O[O.AttackModEnv=26]="AttackModEnv",O[O.HoldModEnv=27]="HoldModEnv",O[O.DecayModEnv=28]="DecayModEnv",O[O.SustainModEnv=29]="SustainModEnv",O[O.ReleaseModEnv=30]="ReleaseModEnv",O[O.KeyNumToModEnvHold=31]="KeyNumToModEnvHold",O[O.KeyNumToModEnvDecay=32]="KeyNumToModEnvDecay",O[O.DelayVolEnv=33]="DelayVolEnv",O[O.AttackVolEnv=34]="AttackVolEnv",O[O.HoldVolEnv=35]="HoldVolEnv",O[O.DecayVolEnv=36]="DecayVolEnv",O[O.SustainVolEnv=37]="SustainVolEnv",O[O.ReleaseVolEnv=38]="ReleaseVolEnv",O[O.KeyNumToVolEnvHold=39]="KeyNumToVolEnvHold",O[O.KeyNumToVolEnvDecay=40]="KeyNumToVolEnvDecay",O[O.Instrument=41]="Instrument",O[O.Reserved1=42]="Reserved1",O[O.KeyRange=43]="KeyRange",O[O.VelRange=44]="VelRange",O[O.StartLoopAddrsCoarseOffset=45]="StartLoopAddrsCoarseOffset",O[O.KeyNum=46]="KeyNum",O[O.Velocity=47]="Velocity",O[O.InitialAttenuation=48]="InitialAttenuation",O[O.Reserved2=49]="Reserved2",O[O.EndLoopAddrsCoarseOffset=50]="EndLoopAddrsCoarseOffset",O[O.CoarseTune=51]="CoarseTune",O[O.FineTune=52]="FineTune",O[O.SampleId=53]="SampleId",O[O.SampleModes=54]="SampleModes",O[O.Reserved3=55]="Reserved3",O[O.ScaleTuning=56]="ScaleTuning",O[O.ExclusiveClass=57]="ExclusiveClass",O[O.OverridingRootKey=58]="OverridingRootKey",O[O.Unused5=59]="Unused5",O[O.EndOper=60]="EndOper"}(f||(f={}));var b=(g(d={},f.StartAddrsOffset,0),g(d,f.EndAddrsOffset,0),g(d,f.StartLoopAddrsOffset,0),g(d,f.EndLoopAddrsOffset,0),g(d,f.StartAddrsCoarseOffset,0),g(d,f.ModLFOToPitch,0),g(d,f.VibLFOToPitch,0),g(d,f.ModEnvToPitch,0),g(d,f.InitialFilterFc,13500),g(d,f.InitialFilterQ,0),g(d,f.ModLFOToFilterFc,0),g(d,f.ModEnvToFilterFc,0),g(d,f.EndAddrsCoarseOffset,0),g(d,f.ModLFOToVolume,0),g(d,f.ChorusEffectsSend,0),g(d,f.ReverbEffectsSend,0),g(d,f.Pan,0),g(d,f.DelayModLFO,-12e3),g(d,f.FreqModLFO,0),g(d,f.DelayVibLFO,-12e3),g(d,f.FreqVibLFO,0),g(d,f.DelayModEnv,-12e3),g(d,f.AttackModEnv,-12e3),g(d,f.HoldModEnv,-12e3),g(d,f.DecayModEnv,-12e3),g(d,f.SustainModEnv,0),g(d,f.ReleaseModEnv,-12e3),g(d,f.KeyNumToModEnvHold,0),g(d,f.KeyNumToModEnvDecay,0),g(d,f.DelayVolEnv,-12e3),g(d,f.AttackVolEnv,-12e3),g(d,f.HoldVolEnv,-12e3),g(d,f.DecayVolEnv,-12e3),g(d,f.SustainVolEnv,0),g(d,f.ReleaseVolEnv,-12e3),g(d,f.KeyNumToVolEnvHold,0),g(d,f.KeyNumToVolEnvDecay,0),g(d,f.StartLoopAddrsCoarseOffset,0),g(d,f.KeyNum,-1),g(d,f.Velocity,-1),g(d,f.InitialAttenuation,0),g(d,f.EndLoopAddrsCoarseOffset,0),g(d,f.CoarseTune,0),g(d,f.FineTune,0),g(d,f.SampleModes,0),g(d,f.ScaleTuning,100),g(d,f.ExclusiveClass,0),g(d,f.OverridingRootKey,-1),d)},"./src/types/index.ts":function(o,u,p){p.r(u);var d=p("./src/types/bank.ts");for(var f in d)f!=="default"&&function(I){p.d(u,I,function(){return d[I]})}(f);var g=p("./src/types/generator.ts");p.d(u,"GeneratorType",function(){return g.GeneratorType}),p.d(u,"DEFAULT_GENERATOR_VALUES",function(){return g.DEFAULT_GENERATOR_VALUES});var b=p("./src/types/instrument.ts");for(var f in b)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(f)<0&&function(U){p.d(u,U,function(){return b[U]})}(f);var O=p("./src/types/key.ts");for(var f in O)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(f)<0&&function(U){p.d(u,U,function(){return O[U]})}(f);var S=p("./src/types/metaData.ts");for(var f in S)["GeneratorType","DEFAULT_GENERATOR_VALUES","default"].indexOf(f)<0&&function(U){p.d(u,U,function(){return S[U]})}(f);var M=p("./src/types/modulator.ts");p.d(u,"ControllerType",function(){return M.ControllerType}),p.d(u,"ControllerPolarity",function(){return M.ControllerPolarity}),p.d(u,"ControllerDirection",function(){return M.ControllerDirection}),p.d(u,"ControllerPalette",function(){return M.ControllerPalette}),p.d(u,"Controller",function(){return M.Controller}),p.d(u,"TransformType",function(){return M.TransformType}),p.d(u,"DEFAULT_INSTRUMENT_MODULATORS",function(){return M.DEFAULT_INSTRUMENT_MODULATORS});var A=p("./src/types/preset.ts");for(var f in A)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(f)<0&&function(U){p.d(u,U,function(){return A[U]})}(f);var F=p("./src/types/presetData.ts");for(var f in F)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","default"].indexOf(f)<0&&function(U){p.d(u,U,function(){return F[U]})}(f);var $=p("./src/types/sample.ts");p.d(u,"SampleType",function(){return $.SampleType});var B=p("./src/types/zone.ts");for(var f in B)["GeneratorType","DEFAULT_GENERATOR_VALUES","ControllerType","ControllerPolarity","ControllerDirection","ControllerPalette","Controller","TransformType","DEFAULT_INSTRUMENT_MODULATORS","SampleType","default"].indexOf(f)<0&&function(U){p.d(u,U,function(){return B[U]})}(f)},"./src/types/instrument.ts":function(o,u){},"./src/types/key.ts":function(o,u){},"./src/types/metaData.ts":function(o,u){},"./src/types/modulator.ts":function(o,u,p){p.r(u),p.d(u,"ControllerType",function(){return d}),p.d(u,"ControllerPolarity",function(){return f}),p.d(u,"ControllerDirection",function(){return g}),p.d(u,"ControllerPalette",function(){return b}),p.d(u,"Controller",function(){return O}),p.d(u,"TransformType",function(){return S}),p.d(u,"DEFAULT_INSTRUMENT_MODULATORS",function(){return A});var d,f,g,b,O,S,M=p("./src/types/generator.ts");(function(F){F[F.Linear=0]="Linear",F[F.Concave=1]="Concave",F[F.Convex=2]="Convex",F[F.Switch=3]="Switch"})(d||(d={})),function(F){F[F.Unipolar=0]="Unipolar",F[F.Bipolar=1]="Bipolar"}(f||(f={})),function(F){F[F.Increasing=0]="Increasing",F[F.Decreasing=1]="Decreasing"}(g||(g={})),function(F){F[F.GeneralController=0]="GeneralController",F[F.MidiController=1]="MidiController"}(b||(b={})),function(F){F[F.NoController=0]="NoController",F[F.NoteOnVelocity=2]="NoteOnVelocity",F[F.NoteOnKeyNumber=3]="NoteOnKeyNumber",F[F.PolyPressure=10]="PolyPressure",F[F.ChannelPressure=13]="ChannelPressure",F[F.PitchWheel=14]="PitchWheel",F[F.PitchWheelSensitivity=16]="PitchWheelSensitivity",F[F.Link=127]="Link"}(O||(O={})),function(F){F[F.Linear=0]="Linear",F[F.Absolute=2]="Absolute"}(S||(S={}));var A=[{id:M.GeneratorType.InitialAttenuation,source:{type:d.Concave,polarity:f.Unipolar,direction:g.Decreasing,palette:b.GeneralController,index:O.NoteOnVelocity},value:960,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.InitialFilterFc,source:{type:d.Linear,polarity:f.Unipolar,direction:g.Decreasing,palette:b.GeneralController,index:O.NoteOnVelocity},value:-2400,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.VibLFOToPitch,source:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.ChannelPressure},value:50,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.VibLFOToPitch,source:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.MidiController,index:1},value:50,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.InitialAttenuation,source:{type:d.Concave,polarity:f.Unipolar,direction:g.Decreasing,palette:b.MidiController,index:7},value:960,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.InitialAttenuation,source:{type:d.Linear,polarity:f.Bipolar,direction:g.Increasing,palette:b.MidiController,index:10},value:1e3,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.InitialAttenuation,source:{type:d.Concave,polarity:f.Unipolar,direction:g.Decreasing,palette:b.MidiController,index:11},value:960,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.ReverbEffectsSend,source:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.MidiController,index:91},value:200,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.ChorusEffectsSend,source:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.MidiController,index:93},value:200,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.NoController},transform:S.Linear},{id:M.GeneratorType.CoarseTune,source:{type:d.Linear,polarity:f.Bipolar,direction:g.Increasing,palette:b.GeneralController,index:O.PitchWheel},value:12700,valueSource:{type:d.Linear,polarity:f.Unipolar,direction:g.Increasing,palette:b.GeneralController,index:O.PitchWheelSensitivity},transform:S.Linear}]},"./src/types/preset.ts":function(o,u){},"./src/types/presetData.ts":function(o,u){},"./src/types/sample.ts":function(o,u,p){var d;p.r(u),p.d(u,"SampleType",function(){return d}),function(f){f[f.EOS=0]="EOS",f[f.Mono=1]="Mono",f[f.Right=2]="Right",f[f.Left=4]="Left",f[f.Linked=8]="Linked",f[f.RomMono=32769]="RomMono",f[f.RomRight=32770]="RomRight",f[f.RomLeft=32772]="RomLeft",f[f.RomLinked=32776]="RomLinked"}(d||(d={}))},"./src/types/zone.ts":function(o,u){},"./src/utils/buffer.ts":function(o,u,p){p.r(u),p.d(u,"getStringFromBuffer",function(){return d});var d=function(f){return new TextDecoder("utf8").decode(f).split(/\0/)[0].trim()}},"./src/utils/index.ts":function(o,u,p){p.r(u);var d=p("./src/utils/buffer.ts");p.d(u,"getStringFromBuffer",function(){return d.getStringFromBuffer});var f=p("./src/utils/memoize.ts");p.d(u,"memoize",function(){return f.memoize})},"./src/utils/memoize.ts":function(o,u,p){p.r(u),p.d(u,"memoize",function(){return d});var d=function(f){var g={};return function(){for(var b=arguments.length,O=new Array(b),S=0;S<b;S++)O[S]=arguments[S];var M=JSON.stringify(O);if(M in g)return g[M];var A=f.apply(void 0,O);return g[M]=A,A}}}})})}(SoundFont2)),SoundFont2.exports}var SoundFont2Exports=requireSoundFont2();const m=l=>Math.pow(2,l/1200),Q=l=>l/1e3,G=(l,a)=>{const o=Math.pow(10,a);return Math.round(l*o)/o};typeof AudioParam<"u"&&(AudioParam.prototype.dahdsr=function(l,a,o,u,p,d,f,g,b){p=Math.max(G(p,4),.001),f=Math.max(G(f,4),.001),b=G(b,4),a=Math.max(a,.001);let O=l;return this.setValueAtTime(a,O),this.setValueAtTime(a,O+=u),this.exponentialRampToValueAtTime(o,O+=p),this.setValueAtTime(o,O+=d),this.exponentialRampToValueAtTime(Math.max(g*o,.001),O+=f),(S,M)=>{this.cancelAndHoldAtTime(S);const A=Math.max(M??a,.001);this.exponentialRampToValueAtTime(A,S+b)}});const T={0:"startAddrOffset",1:"endAddrOffset",2:"startloopAddrsOffset",3:"endloopAddrsOffset",4:"startAddrsCoarseOffset",5:"modLfoToPitch",6:"vibLfoToPitch",7:"modEnvToPitch",8:"initialFilterFc",9:"initialFilterQ",10:"modLfoToFilterFc",11:"modEnvToFilterFc",12:"endAddrsCoarseOffset",13:"modLfoToVolume",14:"unused1",15:"chorusEffectsSend",16:"reverbEffectsSend",17:"pan",18:"unused2",19:"unused3",20:"unused4",21:"delayModLFO",22:"freqModLFO",23:"delayVibLFO",24:"freqVibLFO",25:"delayModEnv",26:"attackModEnv",27:"holdModEnv",28:"decayModEnv",29:"sustainModEnv",30:"releaseModEnv",31:"keyNumToModEnvHold",32:"keyNumToModEnvDecay",33:"delayVolEnv",34:"attackVolEnv",35:"holdVolEnv",36:"decayVolEnv",37:"sustainVolEnv",38:"releaseVolEnv",39:"keyNumToVolEnvHold",40:"keyNumToVolEnvDecay",41:"instrument",42:"reserved1",43:"keyRange",44:"velRange",45:"startloopAddrsCoarseOffset",46:"keyNum",47:"velocity",48:"initialAttenuation",49:"reserved2",50:"endloopAddrsCoarseOffset",51:"coarseTune",52:"fineTune",53:"sampleID",54:"sampleModes",55:"reserved3",56:"scaleTuning",57:"exclusiveClass",58:"overridingRootKey",59:"unused5",60:"endOper"};Object.fromEntries(Object.entries(SoundFont2Exports.DEFAULT_GENERATOR_VALUES).map(([l,a])=>[T[l],a]));const D=(l,a,o,u,p)=>{var d,f,g,b,O,S,M;const A=SoundFont2Exports.DEFAULT_GENERATOR_VALUES[l];if(typeof A!="number")throw new Error(`no default value found for generator with index ${l}`);const F=a.generators[l],$=(f=(d=o.globalZone)==null?void 0:d.generators)==null?void 0:f[l],B=(g=u?.generators)==null?void 0:g[l],I=(O=(b=p.globalZone)==null?void 0:b.generators)==null?void 0:O[l],U=F&&"value"in F?F.value:void 0,te=$&&"value"in $?$.value:void 0,de=B&&"value"in B?B.value:void 0,se=I&&"value"in I?I.value:void 0,q=(S=U??te)!=null?S:A,le=(M=de??se)!=null?M:0;return q+le},J=l=>SoundFont2Exports.DEFAULT_GENERATOR_VALUES[l]!==void 0,W=(l,a,o)=>{var u,p,d,f;return Object.fromEntries(Array.from(new Set([Object.keys((p=(u=o.globalZone)==null?void 0:u.generators)!=null?p:{}),Object.keys(a.generators),Object.keys((f=(d=a.instrument.globalZone)==null?void 0:d.generators)!=null?f:{}),Object.keys(l.generators)].flat())).filter(J).map(g=>[T[g],D(parseInt(g),l,a.instrument,a,o)]))};async function ae(l){const a=await fetch(l).then(u=>u.arrayBuffer()),o=new Uint8Array(a);return new SoundFont2Exports.SoundFont2(o)}function X(l,a,o){let{time:u=l.currentTime}=o;const{midi:p,start:d,velocity:f=.3,startLoop:g,endLoop:b,sampleRate:O,originalPitch:S,pitchCorrection:M,type:A,sampleModes:F=0,overridingRootKey:$,fineTune:B=0,startloopAddrsOffset:I=0,startloopAddrsCoarseOffset:U=0,endloopAddrsOffset:te=0,endloopAddrsCoarseOffset:de=0,delayVolEnv:se=-12e3,attackVolEnv:q=-12e3,holdVolEnv:le=-12e3,decayVolEnv:fe=-12e3,sustainVolEnv:_e=0,releaseVolEnv:Pe=-12e3,pan:Oe=0,...Fe}=o,we=100*($!==void 0&&$!==-1?$:S)+M-B,ke=p*100-we,Ge=1*Math.pow(2,ke/1200);a.playbackRate.value=Ge;const Be=g+I+U*32768,Ze=b+te+de*32768;Ze>Be&&F===1?(a.loopStart=Be/O,a.loopEnd=Ze/O,a.loop=!0):F===3&&console.warn("unimplemented sampleMode 3 (play till end on note off)"),Object.keys(Fe).filter(ht=>!["name","instrument","keyRange","sampleID","end"].includes(ht)).length;const Ve=l.createGain(),Ee=[u,0,f,m(se),m(q),m(le),m(fe),_e>=960?0:1-Q(_e),m(Pe)],He=Ve.gain.dahdsr(...Ee),nt=l.createStereoPanner();return nt.pan.value=Oe/1e3,Ve.connect(nt),a.connect(Ve),nt.connect(l.destination),a.start(u),(ht=l.currentTime)=>{a.stop(ht+m(Pe)),He(ht)}}function Y(l,a,o={}){const{header:u,data:p}=a,d=new Float32Array(p.length);for(let b=0;b<p.length;b++)d[b]=p[b]/32768;const f=l.createBuffer(1,d.length,u.sampleRate);f.getChannelData(0).set(d);const g=l.createBufferSource();return g.buffer=f,o={...u,...o},X(l,g,o)}const C=(l,a)=>!l.keyRange||l.keyRange.lo<=a&&a<=l.keyRange.hi,x=(l,a)=>l.zones.filter(o=>C(o,a)&&o.instrument).map(o=>o.instrument.zones.filter(u=>C(u,a)).map(u=>{const p=W(u,o,l);return{...u,mergedGenerators:p}})).flat(),ce=(l,a,o,u=l.currentTime)=>{const p=x(a,o).map(d=>Y(l,d.sample,{...d.mergedGenerators,midi:o,time:u}));return(d=l.currentTime)=>{p.forEach(f=>f(d))}};Pattern$1.prototype.soundfont=function(l,a=0){return this.onTrigger((o,u,p,d)=>{const f=getAudioContext(),g=getPlayableNoteValue(o),b=l.presets[a%l.presets.length],O=d,S=[f,b,noteToMidi$1(g),O];ce(...S)(O+o.duration)})};const soundfontCache=new Map;function loadSoundfont(l){if(soundfontCache.get(l))return soundfontCache.get(l);const a=ae(l);return soundfontCache.set(l,a),a}const index$1=Object.freeze(Object.defineProperty({__proto__:null,getFontBufferSource,loadSoundfont,registerSoundfonts,setSoundfontUrl,soundfontList:list,startPresetNote:ce},Symbol.toStringTag,{value:"Module"}));class EventEmitter{constructor(a=!1){this.eventMap={},this.eventsSuspended=a==!0}addListener(a,o,u={}){if(typeof a=="string"&&a.length<1||a instanceof String&&a.length<1||typeof a!="string"&&!(a instanceof String)&&a!==EventEmitter.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof o!="function")throw new TypeError("The callback must be a function.");const p=new Listener(a,this,o,u);return this.eventMap[a]||(this.eventMap[a]=[]),u.prepend?this.eventMap[a].unshift(p):this.eventMap[a].push(p),p}addOneTimeListener(a,o,u={}){u.remaining=1,this.addListener(a,o,u)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(a,o){return a===void 0?this.eventMap[EventEmitter.ANY_EVENT]&&this.eventMap[EventEmitter.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,u])=>u.length>0):this.eventMap[a]&&this.eventMap[a].length>0?o instanceof Listener?this.eventMap[a].filter(p=>p===o).length>0:typeof o=="function"?this.eventMap[a].filter(p=>p.callback===o).length>0:o==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(a){return this.eventMap[a]||[]}suspendEvent(a){this.getListeners(a).forEach(o=>{o.suspended=!0})}unsuspendEvent(a){this.getListeners(a).forEach(o=>{o.suspended=!1})}getListenerCount(a){return this.getListeners(a).length}emit(a,...o){if(typeof a!="string"&&!(a instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let u=[],p=this.eventMap[EventEmitter.ANY_EVENT]||[];return this.eventMap[a]&&(p=p.concat(this.eventMap[a])),p.forEach(d=>{if(d.suspended)return;let f=[...o];Array.isArray(d.arguments)&&(f=f.concat(d.arguments)),d.remaining>0&&(u.push(d.callback.apply(d.context,f)),d.count++),--d.remaining<1&&d.remove()}),u}removeListener(a,o,u={}){if(a===void 0){this.eventMap={};return}else if(!this.eventMap[a])return;let p=this.eventMap[a].filter(d=>o&&d.callback!==o||u.remaining&&u.remaining!==d.remaining||u.context&&u.context!==d.context);p.length?this.eventMap[a]=p:delete this.eventMap[a]}async waitFor(a,o={}){return o.duration=parseInt(o.duration),(isNaN(o.duration)||o.duration<=0)&&(o.duration=1/0),new Promise((u,p)=>{let d,f=this.addListener(a,()=>{clearTimeout(d),u()},{remaining:1});o.duration!==1/0&&(d=setTimeout(()=>{f.remove(),p("The duration expired before the event was emitted.")},o.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Listener{constructor(a,o,u,p={}){if(typeof a!="string"&&!(a instanceof String)&&a!==EventEmitter.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!o)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof u!="function")throw new TypeError("The 'callback' must be a function.");p.arguments!==void 0&&!Array.isArray(p.arguments)&&(p.arguments=[p.arguments]),p=Object.assign({context:o,remaining:1/0,arguments:void 0,duration:1/0},p),p.duration!==1/0&&setTimeout(()=>this.remove(),p.duration),this.arguments=p.arguments,this.callback=u,this.context=p.context,this.count=0,this.event=a,this.remaining=parseInt(p.remaining)>=1?parseInt(p.remaining):1/0,this.suspended=!1,this.target=o}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Enumerations{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),Enumerations.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),Enumerations.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),Enumerations.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),Enumerations.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Note{constructor(a,o={}){this.duration=wm.defaults.note.duration,this.attack=wm.defaults.note.attack,this.release=wm.defaults.note.release,o.duration!=null&&(this.duration=o.duration),o.attack!=null&&(this.attack=o.attack),o.rawAttack!=null&&(this.attack=Utilities.from7bitToFloat(o.rawAttack)),o.release!=null&&(this.release=o.release),o.rawRelease!=null&&(this.release=Utilities.from7bitToFloat(o.rawRelease)),Number.isInteger(a)?this.identifier=Utilities.toNoteIdentifier(a):this.identifier=a}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(a){const o=Utilities.getNoteDetails(a);if(wm.validation&&!a)throw new Error("Invalid note identifier");this._name=o.name,this._accidental=o.accidental,this._octave=o.octave}get name(){return this._name}set name(a){if(wm.validation&&(a=a.toUpperCase(),!["C","D","E","F","G","A","B"].includes(a)))throw new Error("Invalid name value");this._name=a}get accidental(){return this._accidental}set accidental(a){if(wm.validation&&(a=a.toLowerCase(),!["#","##","b","bb"].includes(a)))throw new Error("Invalid accidental value");this._accidental=a}get octave(){return this._octave}set octave(a){if(wm.validation&&(a=parseInt(a),isNaN(a)))throw new Error("Invalid octave value");this._octave=a}get duration(){return this._duration}set duration(a){if(wm.validation&&(a=parseFloat(a),isNaN(a)||a===null||a<0))throw new RangeError("Invalid duration value.");this._duration=a}get attack(){return this._attack}set attack(a){if(wm.validation&&(a=parseFloat(a),isNaN(a)||!(a>=0&&a<=1)))throw new RangeError("Invalid attack value.");this._attack=a}get release(){return this._release}set release(a){if(wm.validation&&(a=parseFloat(a),isNaN(a)||!(a>=0&&a<=1)))throw new RangeError("Invalid release value.");this._release=a}get rawAttack(){return Utilities.fromFloatTo7Bit(this._attack)}set rawAttack(a){this._attack=Utilities.from7bitToFloat(a)}get rawRelease(){return Utilities.fromFloatTo7Bit(this._release)}set rawRelease(a){this._release=Utilities.from7bitToFloat(a)}get number(){return Utilities.toNoteNumber(this.identifier)}getOffsetNumber(a=0,o=0){return wm.validation&&(a=parseInt(a)||0,o=parseInt(o)||0),Math.min(Math.max(this.number+a*12+o,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Utilities{static toNoteNumber(a,o=0){if(o=o==null?0:parseInt(o),isNaN(o))throw new RangeError("Invalid 'octaveOffset' value");typeof a!="string"&&(a="");const u=this.getNoteDetails(a);if(!u)throw new TypeError("Invalid note identifier");const p={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let d=(u.octave+1+o)*12;if(d+=p[u.name],u.accidental&&(u.accidental.startsWith("b")?d-=u.accidental.length:d+=u.accidental.length),d<0||d>127)throw new RangeError("Invalid octaveOffset value");return d}static getNoteDetails(a){Number.isInteger(a)&&(a=this.toNoteIdentifier(a));const o=a.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!o)throw new TypeError("Invalid note identifier");const u=o[1].toUpperCase(),p=parseInt(o[3]);let d=o[2].toLowerCase();return d=d===""?void 0:d,{accidental:d,identifier:u+(d||"")+p,name:u,octave:p}}static sanitizeChannels(a){let o;if(wm.validation){if(a==="all")o=["all"];else if(a==="none")return[]}return Array.isArray(a)?o=a:o=[a],o.indexOf("all")>-1&&(o=Enumerations.MIDI_CHANNEL_NUMBERS),o.map(function(u){return parseInt(u)}).filter(function(u){return u>=1&&u<=16})}static toTimestamp(a){let o=!1;const u=parseFloat(a);return isNaN(u)?!1:(typeof a=="string"&&a.substring(0,1)==="+"?u>=0&&(o=wm.time+u):u>=0&&(o=u),o)}static guessNoteNumber(a,o){o=parseInt(o)||0;let u=!1;if(Number.isInteger(a)&&a>=0&&a<=127)u=parseInt(a);else if(parseInt(a)>=0&&parseInt(a)<=127)u=parseInt(a);else if(typeof a=="string"||a instanceof String)try{u=this.toNoteNumber(a.trim(),o)}catch{return!1}return u}static toNoteIdentifier(a,o){if(a=parseInt(a),isNaN(a)||a<0||a>127)throw new RangeError("Invalid note number");if(o=o==null?0:parseInt(o),isNaN(o))throw new RangeError("Invalid octaveOffset value");const u=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],p=Math.floor(a/12-1)+o;return u[a%12]+p.toString()}static buildNote(a,o={}){if(o.octaveOffset=parseInt(o.octaveOffset)||0,a instanceof Note)return a;let u=this.guessNoteNumber(a,o.octaveOffset);if(u===!1)throw new TypeError(`The input could not be parsed as a note (${a})`);return o.octaveOffset=void 0,new Note(u,o)}static buildNoteArray(a,o={}){let u=[];return Array.isArray(a)||(a=[a]),a.forEach(p=>{u.push(this.buildNote(p,o))}),u}static from7bitToFloat(a){return a===1/0&&(a=127),a=parseInt(a)||0,Math.min(Math.max(a/127,0),1)}static fromFloatTo7Bit(a){return a===1/0&&(a=1),a=parseFloat(a)||0,Math.min(Math.max(Math.round(a*127),0),127)}static fromMsbLsbToFloat(a,o=0){wm.validation&&(a=Math.min(Math.max(parseInt(a)||0,0),127),o=Math.min(Math.max(parseInt(o)||0,0),127));const u=((a<<7)+o)/16383;return Math.min(Math.max(u,0),1)}static fromFloatToMsbLsb(a){wm.validation&&(a=Math.min(Math.max(parseFloat(a)||0,0),1));const o=Math.round(a*16383);return{msb:o>>7,lsb:o&127}}static offsetNumber(a,o=0,u=0){if(wm.validation){if(a=parseInt(a),isNaN(a))throw new Error("Invalid note number");o=parseInt(o)||0,u=parseInt(u)||0}return Math.min(Math.max(a+o*12+u,0),127)}static getPropertyByValue(a,o){return Object.keys(a).find(u=>a[u]===o)}static getCcNameByNumber(a){if(!(wm.validation&&(a=parseInt(a),!(a>=0&&a<=127))))return Enumerations.CONTROL_CHANGE_MESSAGES[a].name}static getCcNumberByName(a){let o=Enumerations.CONTROL_CHANGE_MESSAGES.find(u=>u.name===a);return o?o.number:Enumerations.MIDI_CONTROL_CHANGE_MESSAGES[a]}static getChannelModeByNumber(a){if(!(a>=120&&a<=127))return!1;for(let o in Enumerations.CHANNEL_MODE_MESSAGES)if(Enumerations.CHANNEL_MODE_MESSAGES.hasOwnProperty(o)&&a===Enumerations.CHANNEL_MODE_MESSAGES[o])return o;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class OutputChannel extends EventEmitter{constructor(a,o){super(),this._output=a,this._number=o,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(a,o={time:0}){return this.output.send(a,o),this}sendKeyAftertouch(a,o,u={}){if(wm.validation){if(u.useRawValue&&(u.rawValue=u.useRawValue),isNaN(parseFloat(o)))throw new RangeError("Invalid key aftertouch value.");if(u.rawValue){if(!(o>=0&&o<=127&&Number.isInteger(o)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(o>=0&&o<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}u.rawValue||(o=Utilities.fromFloatTo7Bit(o));const p=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(a)||(a=[a]),Utilities.buildNoteArray(a).forEach(d=>{this.send([(Enumerations.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),d.getOffsetNumber(p),o],{time:Utilities.toTimestamp(u.time)})}),this}sendControlChange(a,o,u={}){if(typeof a=="string"&&(a=Utilities.getCcNumberByName(a)),Array.isArray(o)||(o=[o]),wm.validation){if(a===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(a)||!(a>=0&&a<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(o=o.map(p=>{const d=Math.min(Math.max(parseInt(p),0),127);if(isNaN(d))throw new TypeError("Values must be integers between 0 and 127");return d}),o.length===2&&a>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return o.forEach((p,d)=>{this.send([(Enumerations.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),a+d*32,o[d]],{time:Utilities.toTimestamp(u.time)})}),this}_selectNonRegisteredParameter(a,o={}){return this.sendControlChange(99,a[0],o),this.sendControlChange(98,a[1],o),this}_deselectRegisteredParameter(a={}){return this.sendControlChange(101,127,a),this.sendControlChange(100,127,a),this}_deselectNonRegisteredParameter(a={}){return this.sendControlChange(101,127,a),this.sendControlChange(100,127,a),this}_selectRegisteredParameter(a,o={}){return this.sendControlChange(101,a[0],o),this.sendControlChange(100,a[1],o),this}_setCurrentParameter(a,o={}){return a=[].concat(a),this.sendControlChange(6,a[0],o),a.length<2?this:(this.sendControlChange(38,a[1],o),this)}sendRpnDecrement(a,o={}){if(Array.isArray(a)||(a=Enumerations.REGISTERED_PARAMETERS[a]),wm.validation){if(a===void 0)throw new TypeError("The specified registered parameter is invalid.");let u=!1;if(Object.getOwnPropertyNames(Enumerations.REGISTERED_PARAMETERS).forEach(p=>{Enumerations.REGISTERED_PARAMETERS[p][0]===a[0]&&Enumerations.REGISTERED_PARAMETERS[p][1]===a[1]&&(u=!0)}),!u)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(a,o),this.sendControlChange(97,0,o),this._deselectRegisteredParameter(o),this}sendRpnIncrement(a,o={}){if(Array.isArray(a)||(a=Enumerations.REGISTERED_PARAMETERS[a]),wm.validation){if(a===void 0)throw new TypeError("The specified registered parameter is invalid.");let u=!1;if(Object.getOwnPropertyNames(Enumerations.REGISTERED_PARAMETERS).forEach(p=>{Enumerations.REGISTERED_PARAMETERS[p][0]===a[0]&&Enumerations.REGISTERED_PARAMETERS[p][1]===a[1]&&(u=!0)}),!u)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(a,o),this.sendControlChange(96,0,o),this._deselectRegisteredParameter(o),this}playNote(a,o={}){this.sendNoteOn(a,o);const u=Array.isArray(a)?a:[a];for(let p of u)if(parseInt(p.duration)>0){const d={time:(Utilities.toTimestamp(o.time)||wm.time)+parseInt(p.duration),release:p.release,rawRelease:p.rawRelease};this.sendNoteOff(p,d)}else if(parseInt(o.duration)>0){const d={time:(Utilities.toTimestamp(o.time)||wm.time)+parseInt(o.duration),release:o.release,rawRelease:o.rawRelease};this.sendNoteOff(p,d)}return this}sendNoteOff(a,o={}){if(wm.validation){if(o.rawRelease!=null&&!(o.rawRelease>=0&&o.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(o.release!=null&&!(o.release>=0&&o.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");o.rawVelocity&&(o.rawRelease=o.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),o.velocity&&(o.release=o.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let u=64;o.rawRelease!=null?u=o.rawRelease:isNaN(o.release)||(u=Math.round(o.release*127));const p=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Utilities.buildNoteArray(a,{rawRelease:parseInt(u)}).forEach(d=>{this.send([(Enumerations.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),d.getOffsetNumber(p),d.rawRelease],{time:Utilities.toTimestamp(o.time)})}),this}stopNote(a,o={}){return this.sendNoteOff(a,o)}sendNoteOn(a,o={}){if(wm.validation){if(o.rawAttack!=null&&!(o.rawAttack>=0&&o.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(o.attack!=null&&!(o.attack>=0&&o.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");o.rawVelocity&&(o.rawAttack=o.velocity,o.rawRelease=o.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),o.velocity&&(o.attack=o.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let u=64;o.rawAttack!=null?u=o.rawAttack:isNaN(o.attack)||(u=Math.round(o.attack*127));const p=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Utilities.buildNoteArray(a,{rawAttack:u}).forEach(d=>{this.send([(Enumerations.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),d.getOffsetNumber(p),d.rawAttack],{time:Utilities.toTimestamp(o.time)})}),this}sendChannelMode(a,o=0,u={}){if(typeof a=="string"&&(a=Enumerations.CHANNEL_MODE_MESSAGES[a]),wm.validation){if(a===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(a)||!(a>=120&&a<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(o))||o<0||o>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(Enumerations.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),a,o],{time:Utilities.toTimestamp(u.time)}),this}sendOmniMode(a,o={}){return a===void 0||a?this.sendChannelMode("omnimodeon",0,o):this.sendChannelMode("omnimodeoff",0,o),this}sendChannelAftertouch(a,o={}){if(wm.validation){if(isNaN(parseFloat(a)))throw new RangeError("Invalid channel aftertouch value.");if(o.rawValue){if(!(a>=0&&a<=127&&Number.isInteger(a)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(a>=0&&a<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return o.rawValue||(a=Utilities.fromFloatTo7Bit(a)),this.send([(Enumerations.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(a)],{time:Utilities.toTimestamp(o.time)}),this}sendMasterTuning(a,o={}){if(a=parseFloat(a)||0,wm.validation&&!(a>-65&&a<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let u=Math.floor(a)+64,p=a-Math.floor(a);p=Math.round((p+1)/2*16383);let d=p>>7&127,f=p&127;return this.sendRpnValue("channelcoarsetuning",u,o),this.sendRpnValue("channelfinetuning",[d,f],o),this}sendModulationRange(a,o,u={}){if(wm.validation){if(!Number.isInteger(a)||!(a>=0&&a<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(o!=null&&(!Number.isInteger(o)||!(o>=0&&o<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return o>=0&&o<=127||(o=0),this.sendRpnValue("modulationrange",[a,o],u),this}sendNrpnValue(a,o,u={}){if(o=[].concat(o),wm.validation){if(!Array.isArray(a)||!Number.isInteger(a[0])||!Number.isInteger(a[1]))throw new TypeError("The specified NRPN is invalid.");if(!(a[0]>=0&&a[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(a[1]>=0&&a[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");o.forEach(p=>{if(!(p>=0&&p<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(a,u),this._setCurrentParameter(o,u),this._deselectNonRegisteredParameter(u),this}sendPitchBend(a,o={}){if(wm.validation)if(o.rawValue&&Array.isArray(a)){if(!(a[0]>=0&&a[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(a[1]>=0&&a[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(o.rawValue&&!Array.isArray(a)){if(!(a>=0&&a<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(a)||a===null)throw new RangeError("Invalid pitch bend value.");if(!(a>=-1&&a<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let u=0,p=0;if(o.rawValue&&Array.isArray(a))u=a[0],p=a[1];else if(o.rawValue&&!Array.isArray(a))u=a;else{const d=Utilities.fromFloatToMsbLsb((a+1)/2);u=d.msb,p=d.lsb}return this.send([(Enumerations.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),p,u],{time:Utilities.toTimestamp(o.time)}),this}sendPitchBendRange(a,o,u={}){if(wm.validation){if(!Number.isInteger(a)||!(a>=0&&a<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(o)||!(o>=0&&o<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[a,o],u),this}sendProgramChange(a,o={}){if(a=parseInt(a)||0,wm.validation&&!(a>=0&&a<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(Enumerations.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),a],{time:Utilities.toTimestamp(o.time)}),this}sendRpnValue(a,o,u={}){if(Array.isArray(a)||(a=Enumerations.REGISTERED_PARAMETERS[a]),wm.validation){if(!Number.isInteger(a[0])||!Number.isInteger(a[1]))throw new TypeError("The specified NRPN is invalid.");if(!(a[0]>=0&&a[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(a[1]>=0&&a[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(o).forEach(p=>{if(!(p>=0&&p<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(a,u),this._setCurrentParameter(o,u),this._deselectRegisteredParameter(u),this}sendTuningBank(a,o={}){if(wm.validation&&(!Number.isInteger(a)||!(a>=0&&a<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",a,o),this}sendTuningProgram(a,o={}){if(wm.validation&&(!Number.isInteger(a)||!(a>=0&&a<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",a,o),this}sendLocalControl(a,o={}){return a?this.sendChannelMode("localcontrol",127,o):this.sendChannelMode("localcontrol",0,o)}sendAllNotesOff(a={}){return this.sendChannelMode("allnotesoff",0,a)}sendAllSoundOff(a={}){return this.sendChannelMode("allsoundoff",0,a)}sendResetAllControllers(a={}){return this.sendChannelMode("resetallcontrollers",0,a)}sendPolyphonicMode(a,o={}){return a==="mono"?this.sendChannelMode("monomodeon",0,o):this.sendChannelMode("polymodeon",0,o)}get octaveOffset(){return this._octaveOffset}set octaveOffset(a){if(this.validation&&(a=parseInt(a),isNaN(a)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=a}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Output extends EventEmitter{constructor(a){super(),this._midiOutput=a,this._octaveOffset=0,this.channels=[];for(let o=1;o<=16;o++)this.channels[o]=new OutputChannel(this,o);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(a=>a.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(a){let o={timestamp:wm.time};a.port.connection==="open"?(o.type="opened",o.target=this,o.port=o.target,this.emit("opened",o)):a.port.connection==="closed"&&a.port.state==="connected"?(o.type="closed",o.target=this,o.port=o.target,this.emit("closed",o)):a.port.connection==="closed"&&a.port.state==="disconnected"?(o.type="disconnected",o.port={connection:a.port.connection,id:a.port.id,manufacturer:a.port.manufacturer,name:a.port.name,state:a.port.state,type:a.port.type},this.emit("disconnected",o)):a.port.connection==="pending"&&a.port.state==="disconnected"||console.warn("This statechange event was not caught:",a.port.connection,a.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(a){return Promise.reject(a)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(a,o={time:0},u=0){if(a instanceof Message&&(a=Utilities.isNode?a.data:a.rawData),a instanceof Uint8Array&&Utilities.isNode&&(a=Array.from(a)),wm.validation){if(!Array.isArray(a)&&!(a instanceof Uint8Array)&&(a=[a],Array.isArray(o)&&(a=a.concat(o)),o=isNaN(u)?{time:0}:{time:u}),!(parseInt(a[0])>=128&&parseInt(a[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");a.slice(1).forEach(p=>{if(p=parseInt(p),!(p>=0&&p<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),o||(o={time:0})}return this._midiOutput.send(a,Utilities.toTimestamp(o.time)),this}sendSysex(a,o=[],u={}){if(a=[].concat(a),o instanceof Uint8Array){const p=new Uint8Array(1+a.length+o.length+1);p[0]=Enumerations.SYSTEM_MESSAGES.sysex,p.set(Uint8Array.from(a),1),p.set(o,1+a.length),p[p.length-1]=Enumerations.SYSTEM_MESSAGES.sysexend,this.send(p,{time:u.time})}else{const p=a.concat(o,Enumerations.SYSTEM_MESSAGES.sysexend);this.send([Enumerations.SYSTEM_MESSAGES.sysex].concat(p),{time:u.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():wm.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(a,o={}){if(wm.validation&&(a=parseInt(a),isNaN(a)||!(a>=0&&a<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([Enumerations.SYSTEM_MESSAGES.timecode,a],{time:o.time}),this}sendSongPosition(a=0,o={}){a=Math.floor(a)||0;var u=a>>7&127,p=a&127;return this.send([Enumerations.SYSTEM_MESSAGES.songposition,u,p],{time:o.time}),this}sendSongSelect(a=0,o={}){if(wm.validation&&(a=parseInt(a),isNaN(a)||!(a>=0&&a<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([Enumerations.SYSTEM_MESSAGES.songselect,a],{time:o.time}),this}sendTuneRequest(a={}){return this.send([Enumerations.SYSTEM_MESSAGES.tunerequest],{time:a.time}),this}sendClock(a={}){return this.send([Enumerations.SYSTEM_MESSAGES.clock],{time:a.time}),this}sendStart(a={}){return this.send([Enumerations.SYSTEM_MESSAGES.start],{time:a.time}),this}sendContinue(a={}){return this.send([Enumerations.SYSTEM_MESSAGES.continue],{time:a.time}),this}sendStop(a={}){return this.send([Enumerations.SYSTEM_MESSAGES.stop],{time:a.time}),this}sendActiveSensing(a={}){return this.send([Enumerations.SYSTEM_MESSAGES.activesensing],{time:a.time}),this}sendReset(a={}){return this.send([Enumerations.SYSTEM_MESSAGES.reset],{time:a.time}),this}sendTuningRequest(a={}){return wm.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(a)}sendKeyAftertouch(a,o,u={}){return u.channels==null&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(u.channels).forEach(p=>{this.channels[p].sendKeyAftertouch(a,o,u)}),this}sendControlChange(a,o,u={},p={}){if(wm.validation&&(Array.isArray(u)||Number.isInteger(u)||u==="all")){const d=u;u=p,u.channels=d,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return u.channels==null&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(u.channels).forEach(d=>{this.channels[d].sendControlChange(a,o,u)}),this}sendPitchBendRange(a=0,o=0,u={}){return u.channels==null&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(u.channels).forEach(p=>{this.channels[p].sendPitchBendRange(a,o,u)}),this}setPitchBendRange(a=0,o=0,u="all",p={}){return wm.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),p.channels=u,p.channels==="all"&&(p.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(a,o,p)}sendRpnValue(a,o,u={}){return u.channels==null&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(u.channels).forEach(p=>{this.channels[p].sendRpnValue(a,o,u)}),this}setRegisteredParameter(a,o=[],u="all",p={}){return wm.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),p.channels=u,p.channels==="all"&&(p.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(a,o,p)}sendChannelAftertouch(a,o={},u={}){if(wm.validation&&(Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].sendChannelAftertouch(a,o)}),this}sendPitchBend(a,o={},u={}){if(wm.validation&&(Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].sendPitchBend(a,o)}),this}sendProgramChange(a=0,o={},u={}){if(wm.validation&&(Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].sendProgramChange(a,o)}),this}sendModulationRange(a,o,u={}){return u.channels==null&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(u.channels).forEach(p=>{this.channels[p].sendModulationRange(a,o,u)}),this}setModulationRange(a=0,o=0,u="all",p={}){return wm.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),p.channels=u,p.channels==="all"&&(p.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(a,o,p)}sendMasterTuning(a,o={}){return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(u=>{this.channels[u].sendMasterTuning(a,o)}),this}setMasterTuning(a,o={},u={}){return wm.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),u.channels=o,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(a,u)}sendTuningProgram(a,o={}){return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(u=>{this.channels[u].sendTuningProgram(a,o)}),this}setTuningProgram(a,o="all",u={}){return wm.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),u.channels=o,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(a,u)}sendTuningBank(a=0,o={}){return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(u=>{this.channels[u].sendTuningBank(a,o)}),this}setTuningBank(a,o="all",u={}){return wm.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),u.channels=o,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(a,u)}sendChannelMode(a,o=0,u={},p={}){if(wm.validation&&(Array.isArray(u)||Number.isInteger(u)||u==="all")){const d=u;u=p,u.channels=d,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return u.channels==null&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(u.channels).forEach(d=>{this.channels[d].sendChannelMode(a,o,u)}),this}sendAllSoundOff(a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o].sendAllSoundOff(a)}),this}sendAllNotesOff(a={}){return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(o=>{this.channels[o].sendAllNotesOff(a)}),this}sendResetAllControllers(a={},o={}){if(wm.validation&&(Array.isArray(a)||Number.isInteger(a)||a==="all")){const u=a;a=o,a.channels=u,a.channels==="all"&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return a.channels==null&&(a.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(a.channels).forEach(u=>{this.channels[u].sendResetAllControllers(a)}),this}sendPolyphonicMode(a,o={},u={}){if(wm.validation&&(Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].sendPolyphonicMode(a,o)}),this}sendLocalControl(a,o={},u={}){if(wm.validation&&(Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].sendLocalControl(a,o)}),this}sendOmniMode(a,o={},u={}){if(wm.validation&&(Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].sendOmniMode(a,o)}),this}sendNrpnValue(a,o,u={}){return u.channels==null&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(u.channels).forEach(p=>{this.channels[p].sendNrpnValue(a,o,u)}),this}setNonRegisteredParameter(a,o=[],u="all",p={}){return wm.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),p.channels=u,p.channels==="all"&&(p.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(a,o,p)}sendRpnIncrement(a,o={}){return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(u=>{this.channels[u].sendRpnIncrement(a,o)}),this}incrementRegisteredParameter(a,o="all",u={}){return wm.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),u.channels=o,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(a,u)}sendRpnDecrement(a,o={}){return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(u=>{this.channels[u].sendRpnDecrement(a,o)}),this}decrementRegisteredParameter(a,o="all",u={}){return wm.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),u.channels=o,u.channels==="all"&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(a,u)}sendNoteOff(a,o={},u={}){if(wm.validation&&(Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].sendNoteOff(a,o)}),this}stopNote(a,o){return this.sendNoteOff(a,o)}playNote(a,o={},u={}){if(wm.validation&&(o.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),o.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].playNote(a,o)}),this}sendNoteOn(a,o={},u={}){if(wm.validation&&(Array.isArray(o)||Number.isInteger(o)||o==="all")){const p=o;o=u,o.channels=p,o.channels==="all"&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return o.channels==null&&(o.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(o.channels).forEach(p=>{this.channels[p].sendNoteOn(a,o)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(a){if(this.validation&&(a=parseInt(a),isNaN(a)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=a}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Forwarder{constructor(a=[],o={}){this.destinations=[],this.types=[...Object.keys(Enumerations.SYSTEM_MESSAGES),...Object.keys(Enumerations.CHANNEL_MESSAGES)],this.channels=Enumerations.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(a)||(a=[a]),o.types&&!Array.isArray(o.types)&&(o.types=[o.types]),o.channels&&!Array.isArray(o.channels)&&(o.channels=[o.channels]),wm.validation&&(a.forEach(u=>{if(!(u instanceof Output))throw new TypeError("Destinations must be of type 'Output'.")}),o.types!==void 0&&o.types.forEach(u=>{if(!Enumerations.SYSTEM_MESSAGES.hasOwnProperty(u)&&!Enumerations.CHANNEL_MESSAGES.hasOwnProperty(u))throw new TypeError("Type must be a valid message type.")}),o.channels!==void 0&&o.channels.forEach(u=>{if(!Enumerations.MIDI_CHANNEL_NUMBERS.includes(u))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=a,o.types&&(this.types=o.types),o.channels&&(this.channels=o.channels)}forward(a){this.suspended||this.types.includes(a.type)&&(a.channel&&!this.channels.includes(a.channel)||this.destinations.forEach(o=>{wm.validation&&!(o instanceof Output)||o.send(a)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class InputChannel extends EventEmitter{constructor(a,o){super(),this._input=a,this._number=o,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(a){const o=Object.assign({},a);o.port=this.input,o.target=this,o.type="midimessage",this.emit(o.type,o),this._parseEventForStandardMessages(o)}_parseEventForStandardMessages(a){const o=Object.assign({},a);o.type=o.message.type||"unknownmessage";const u=a.message.dataBytes[0],p=a.message.dataBytes[1];if(o.type==="noteoff"||o.type==="noteon"&&p===0)this.notesState[u]=!1,o.type="noteoff",o.note=new Note(Utilities.offsetNumber(u,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset),{rawAttack:0,rawRelease:p}),o.value=Utilities.from7bitToFloat(p),o.rawValue=p,o.velocity=o.note.release,o.rawVelocity=o.note.rawRelease;else if(o.type==="noteon")this.notesState[u]=!0,o.note=new Note(Utilities.offsetNumber(u,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset),{rawAttack:p}),o.value=Utilities.from7bitToFloat(p),o.rawValue=p,o.velocity=o.note.attack,o.rawVelocity=o.note.rawAttack;else if(o.type==="keyaftertouch")o.note=new Note(Utilities.offsetNumber(u,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset)),o.value=Utilities.from7bitToFloat(p),o.rawValue=p,o.identifier=o.note.identifier,o.key=o.note.number,o.rawKey=u;else if(o.type==="controlchange"){o.controller={number:u,name:Enumerations.CONTROL_CHANGE_MESSAGES[u].name,description:Enumerations.CONTROL_CHANGE_MESSAGES[u].description,position:Enumerations.CONTROL_CHANGE_MESSAGES[u].position},o.subtype=o.controller.name||"controller"+u,o.value=Utilities.from7bitToFloat(p),o.rawValue=p;const d=Object.assign({},o);d.type=`${o.type}-controller${u}`,delete d.subtype,this.emit(d.type,d);const f=Object.assign({},o);f.type=`${o.type}-`+Enumerations.CONTROL_CHANGE_MESSAGES[u].name,delete f.subtype,f.type.indexOf("controller")!==0&&this.emit(f.type,f),o.message.dataBytes[0]>=120&&this._parseChannelModeMessage(o),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(o.message.dataBytes[0])&&this._parseEventForParameterNumber(o)}else o.type==="programchange"?(o.value=u,o.rawValue=o.value):o.type==="channelaftertouch"?(o.value=Utilities.from7bitToFloat(u),o.rawValue=u):o.type==="pitchbend"?(o.value=((p<<7)+u-8192)/8192,o.rawValue=(p<<7)+u):o.type="unknownmessage";this.emit(o.type,o)}_parseChannelModeMessage(a){const o=Object.assign({},a);o.type=o.controller.name,o.type==="localcontrol"&&(o.value=o.message.data[2]===127,o.rawValue=o.message.data[2]),o.type==="omnimodeon"?(o.type="omnimode",o.value=!0,o.rawValue=o.message.data[2]):o.type==="omnimodeoff"&&(o.type="omnimode",o.value=!1,o.rawValue=o.message.data[2]),o.type==="monomodeon"?(o.type="monomode",o.value=!0,o.rawValue=o.message.data[2]):o.type==="polymodeon"&&(o.type="monomode",o.value=!1,o.rawValue=o.message.data[2]),this.emit(o.type,o)}_parseEventForParameterNumber(a){const o=a.message.dataBytes[0],u=a.message.dataBytes[1];o===99||o===101?(this._nrpnBuffer=[],this._rpnBuffer=[],o===99?this._nrpnBuffer=[a.message]:u!==127&&(this._rpnBuffer=[a.message])):o===98||o===100?o===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(a.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&u!==127?this._rpnBuffer.push(a.message):this._rpnBuffer=[]):(o===6||o===38||o===96||o===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],a):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],a):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(a){return a===6||a===38||a===96||a===97||a===98||a===99||a===100||a===101}_dispatchParameterNumberEvent(a,o,u,p){a=a==="nrpn"?"nrpn":"rpn";const d={target:p.target,timestamp:p.timestamp,message:p.message,parameterMsb:o,parameterLsb:u,value:Utilities.from7bitToFloat(p.message.dataBytes[1]),rawValue:p.message.dataBytes[1]};a==="rpn"?d.parameter=Object.keys(Enumerations.REGISTERED_PARAMETERS).find(b=>Enumerations.REGISTERED_PARAMETERS[b][0]===o&&Enumerations.REGISTERED_PARAMETERS[b][1]===u):d.parameter=(o<<7)+u;const f=Enumerations.CONTROL_CHANGE_MESSAGES[p.message.dataBytes[0]].name;d.type=`${a}-${f}`,this.emit(d.type,d);const g=Object.assign({},d);g.type==="nrpn-dataincrement"?g.type="nrpn-databuttonincrement":g.type==="nrpn-datadecrement"?g.type="nrpn-databuttondecrement":g.type==="rpn-dataincrement"?g.type="rpn-databuttonincrement":g.type==="rpn-datadecrement"&&(g.type="rpn-databuttondecrement"),this.emit(g.type,g),d.type=a,d.subtype=f,this.emit(d.type,d)}getChannelModeByNumber(a){return wm.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),a=Math.floor(a)),Utilities.getChannelModeByNumber(a)}getCcNameByNumber(a){if(wm.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),a=parseInt(a),!(a>=0&&a<=127)))throw new RangeError("Invalid control change number.");return Utilities.getCcNameByNumber(a)}getNoteState(a){a instanceof Note&&(a=a.identifier);const o=Utilities.guessNoteNumber(a,wm.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[o]}get octaveOffset(){return this._octaveOffset}set octaveOffset(a){if(this.validation&&(a=parseInt(a),isNaN(a)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=a}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(a){this.validation&&(a=!!a),this.parameterNumberEventsEnabled=a}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Message{constructor(a){this.rawData=a,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=Utilities.getPropertyByValue(Enumerations.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=Utilities.getPropertyByValue(Enumerations.SYSTEM_MESSAGES,this.command)),this.statusByte===Enumerations.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Input extends EventEmitter{constructor(a){super(),this._midiInput=a,this._octaveOffset=0,this.channels=[];for(let o=1;o<=16;o++)this.channels[o]=new InputChannel(this,o);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(a=>a.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(a){let o={timestamp:wm.time,target:this,port:this};a.port.connection==="open"?(o.type="opened",this.emit("opened",o)):a.port.connection==="closed"&&a.port.state==="connected"?(o.type="closed",this.emit("closed",o)):a.port.connection==="closed"&&a.port.state==="disconnected"?(o.type="disconnected",o.port={connection:a.port.connection,id:a.port.id,manufacturer:a.port.manufacturer,name:a.port.name,state:a.port.state,type:a.port.type},this.emit("disconnected",o)):a.port.connection==="pending"&&a.port.state==="disconnected"||console.warn("This statechange event was not caught: ",a.port.connection,a.port.state)}_onMidiMessage(a){const o=new Message(a.data),u={port:this,target:this,message:o,timestamp:a.timeStamp,type:"midimessage",data:o.data,rawData:o.data,statusByte:o.data[0],dataBytes:o.dataBytes};this.emit("midimessage",u),o.isSystemMessage?this._parseEvent(u):o.isChannelMessage&&this.channels[o.channel]._processMidiMessageEvent(u),this._forwarders.forEach(p=>p.forward(o))}_parseEvent(a){const o=Object.assign({},a);o.type=o.message.type||"unknownmidimessage",o.type==="songselect"&&(o.song=a.data[1]+1,o.value=a.data[1],o.rawValue=o.value),this.emit(o.type,o)}async open(){try{await this._midiInput.open()}catch(a){return Promise.reject(a)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(a){return Promise.reject(a)}return Promise.resolve(this)}getChannelModeByNumber(){wm.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(a,o,u={}){if(wm.validation&&typeof u=="function"){let p=o!=null?[].concat(o):void 0;o=u,u={channels:p}}if(Enumerations.CHANNEL_EVENTS.includes(a)){u.channels===void 0&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS);let p=[];return Utilities.sanitizeChannels(u.channels).forEach(d=>{p.push(this.channels[d].addListener(a,o,u))}),p}else return super.addListener(a,o,u)}addOneTimeListener(a,o,u={}){return u.remaining=1,this.addListener(a,o,u)}on(a,o,u,p){return this.addListener(a,o,u,p)}hasListener(a,o,u={}){if(wm.validation&&typeof u=="function"){let p=[].concat(o);o=u,u={channels:p}}return Enumerations.CHANNEL_EVENTS.includes(a)?(u.channels===void 0&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(u.channels).every(p=>this.channels[p].hasListener(a,o))):super.hasListener(a,o)}removeListener(a,o,u={}){if(wm.validation&&typeof u=="function"){let p=[].concat(o);o=u,u={channels:p}}if(u.channels===void 0&&(u.channels=Enumerations.MIDI_CHANNEL_NUMBERS),a==null)return Utilities.sanitizeChannels(u.channels).forEach(p=>{this.channels[p]&&this.channels[p].removeListener()}),super.removeListener();Enumerations.CHANNEL_EVENTS.includes(a)?Utilities.sanitizeChannels(u.channels).forEach(p=>{this.channels[p].removeListener(a,o,u)}):super.removeListener(a,o,u)}addForwarder(a,o={}){let u;return a instanceof Forwarder?u=a:u=new Forwarder(a,o),this._forwarders.push(u),u}removeForwarder(a){this._forwarders=this._forwarders.filter(o=>o!==a)}hasForwarder(a){return this._forwarders.includes(a)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(a){if(this.validation&&(a=parseInt(a),isNaN(a)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=a}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return wm.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */let WebMidi$1=class extends EventEmitter{constructor(){super(),this.defaults={note:{attack:Utilities.from7bitToFloat(64),release:Utilities.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(a={},o=!1){if(Utilities.isNode)try{window.navigator}catch{let g=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,g)}if(this.validation=a.validation!==!1,this.validation&&(typeof a=="function"&&(a={callback:a,sysex:o}),o&&(a.sysex=!0)),this.enabled)return typeof a.callback=="function"&&a.callback(),Promise.resolve();const u={timestamp:this.time,target:this,type:"error",error:void 0},p={timestamp:this.time,target:this,type:"midiaccessgranted"},d={timestamp:this.time,target:this,type:"enabled"};try{typeof a.requestMIDIAccessFunction=="function"?this.interface=await a.requestMIDIAccessFunction({sysex:a.sysex,software:a.software}):this.interface=await navigator.requestMIDIAccess({sysex:a.sysex,software:a.software})}catch(f){return u.error=f,this.emit("error",u),typeof a.callback=="function"&&a.callback(f),Promise.reject(f)}this.emit("midiaccessgranted",p),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(f){return u.error=f,this.emit("error",u),typeof a.callback=="function"&&a.callback(f),Promise.reject(f)}return this.emit("enabled",d),typeof a.callback=="function"&&a.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let a={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",a),this.removeListener()})}getInputById(a,o={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!a)return}if(o.disconnected){for(let u=0;u<this._disconnectedInputs.length;u++)if(this._disconnectedInputs[u].id===a.toString())return this._disconnectedInputs[u]}else for(let u=0;u<this.inputs.length;u++)if(this.inputs[u].id===a.toString())return this.inputs[u]}getInputByName(a,o={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!a)return;a=a.toString()}if(o.disconnected){for(let u=0;u<this._disconnectedInputs.length;u++)if(~this._disconnectedInputs[u].name.indexOf(a))return this._disconnectedInputs[u]}else for(let u=0;u<this.inputs.length;u++)if(~this.inputs[u].name.indexOf(a))return this.inputs[u]}getOutputByName(a,o={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!a)return;a=a.toString()}if(o.disconnected){for(let u=0;u<this._disconnectedOutputs.length;u++)if(~this._disconnectedOutputs[u].name.indexOf(a))return this._disconnectedOutputs[u]}else for(let u=0;u<this.outputs.length;u++)if(~this.outputs[u].name.indexOf(a))return this.outputs[u]}getOutputById(a,o={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!a)return}if(o.disconnected){for(let u=0;u<this._disconnectedOutputs.length;u++)if(this._disconnectedOutputs[u].id===a.toString())return this._disconnectedOutputs[u]}else for(let u=0;u<this.outputs.length;u++)if(this.outputs[u].id===a.toString())return this.outputs[u]}noteNameToNumber(a){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),Utilities.toNoteNumber(a,this.octaveOffset)}getOctave(a){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),a=parseInt(a)),!isNaN(a)&&a>=0&&a<=127?Utilities.getNoteDetails(Utilities.offsetNumber(a,this.octaveOffset)).octave:!1}sanitizeChannels(a){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),Utilities.sanitizeChannels(a)}toMIDIChannels(a){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),Utilities.sanitizeChannels(a)}guessNoteNumber(a){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),Utilities.guessNoteNumber(a,this.octaveOffset)}getValidNoteArray(a,o={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),Utilities.buildNoteArray(a,o)}convertToTimestamp(a){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),Utilities.toTimestamp(a)}async _destroyInputsAndOutputs(){let a=[];return this.inputs.forEach(o=>a.push(o.destroy())),this.outputs.forEach(o=>a.push(o.destroy())),Promise.all(a).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(a){this._updateInputsAndOutputs();let o={timestamp:a.timeStamp,type:a.port.state,target:this};if(a.port.state==="connected"&&a.port.connection==="open"){a.port.type==="output"?o.port=this.getOutputById(a.port.id):a.port.type==="input"&&(o.port=this.getInputById(a.port.id)),this.emit(a.port.state,o);const u=Object.assign({},o);u.type="portschanged",this.emit(u.type,u)}else if(a.port.state==="disconnected"&&a.port.connection==="pending"){a.port.type==="input"?o.port=this.getInputById(a.port.id,{disconnected:!0}):a.port.type==="output"&&(o.port=this.getOutputById(a.port.id,{disconnected:!0})),this.emit(a.port.state,o);const u=Object.assign({},o);u.type="portschanged",this.emit(u.type,u)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let o=this._inputs.length-1;o>=0;o--){const u=this._inputs[o];Array.from(this.interface.inputs.values()).find(d=>d===u._midiInput)||(this._disconnectedInputs.push(u),this._inputs.splice(o,1))}let a=[];return this.interface.inputs.forEach(o=>{if(!this._inputs.find(u=>u._midiInput===o)){let u=this._disconnectedInputs.find(p=>p._midiInput===o);u||(u=new Input(o)),this._inputs.push(u),a.push(u.open())}}),Promise.all(a)}async _updateOutputs(){if(!this.interface)return;for(let o=this._outputs.length-1;o>=0;o--){const u=this._outputs[o];Array.from(this.interface.outputs.values()).find(d=>d===u._midiOutput)||(this._disconnectedOutputs.push(u),this._outputs.splice(o,1))}let a=[];return this.interface.outputs.forEach(o=>{if(!this._outputs.find(u=>u._midiOutput===o)){let u=this._disconnectedOutputs.find(p=>p._midiOutput===o);u||(u=new Output(o)),this._outputs.push(u),a.push(u.open())}}),Promise.all(a)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),Utilities.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),Utilities.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(a){if(this.validation&&(a=parseInt(a),isNaN(a)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=a}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.12"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),Enumerations.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),Enumerations.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),Enumerations.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),Enumerations.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),Enumerations.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};const wm=new WebMidi$1;wm.constructor=null;const _WebMidi=Object.freeze(Object.defineProperty({__proto__:null,Enumerations,Forwarder,Input,InputChannel,Message,Note,Output,OutputChannel,Utilities,WebMidi:wm},Symbol.toStringTag,{value:"Module"})),{WebMidi}=_WebMidi;function supportsMidi(){return typeof navigator.requestMIDIAccess=="function"}function getMidiDeviceNamesString(l){return l.map(a=>`'${a.name}'`).join(" | ")}function enableWebMidi(l={}){const{onReady:a,onConnected:o,onDisconnected:u,onEnabled:p}=l;if(!WebMidi.enabled){if(!supportsMidi())throw new Error("Your Browser does not support WebMIDI.");return WebMidi.addListener("connected",()=>{o?.(WebMidi)}),WebMidi.addListener("enabled",()=>{p?.(WebMidi)}),WebMidi.addListener("disconnected",d=>{u?.(WebMidi,d)}),new Promise((d,f)=>{if(WebMidi.enabled){d(WebMidi);return}WebMidi.enable(g=>{g&&f(g),a?.(WebMidi),d(WebMidi)},{sysex:!0})})}}function getDevice(l,a){if(!a.length)throw new Error("🔌 No MIDI devices found. Connect a device or enable IAC Driver.");if(typeof l=="number")return a[l];const o=d=>a.find(f=>f.name.includes(d));if(typeof l=="string")return o(l);const u=o("IAC"),p=u??a[0];if(!p)throw new Error(`🔌 MIDI device '${p||""}' not found. Use one of ${getMidiDeviceNamesString(a)}`);return u??a[0]}typeof window<"u"&&window.addEventListener("message",l=>{WebMidi?.enabled&&l.data==="strudel-stop"&&WebMidi.outputs.forEach(a=>a.sendStop())});const midicontrolMap=new Map;function unifyMapping(l){return Object.fromEntries(Object.entries(l).map(([a,o])=>(typeof o=="number"&&(o={ccn:o}),[getControlName(a),o])))}function githubPath(l,a=""){if(!l.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[o,u]=l.split("github:");return u=u.endsWith("/")?u.slice(0,-1):u,u.split("/").length===2&&(u+="/main"),`https://raw.githubusercontent.com/${u}/${a}`}function defaultmidimap(l){midicontrolMap.set("default",unifyMapping(l))}let loadCache={};async function midimaps(l){typeof l=="string"&&(l.startsWith("github:")&&(l=githubPath(l,"midimap.json")),loadCache[l]||(loadCache[l]=fetch(l).then(a=>a.json())),l=await loadCache[l]),typeof l=="object"&&Object.entries(l).forEach(([a,o])=>midicontrolMap.set(a,unifyMapping(o)))}const midisoundMap=new Map;function normalize(l=0,a=0,o=1,u=1){if(a===o)throw new Error("min and max cannot be the same value");let p=(l-a)/(o-a);return p=Math.min(1,Math.max(0,p)),Math.pow(p,u)}function mapCC(l,a){return Object.keys(a).filter(o=>!!l[getControlName(o)]).map(o=>{const{ccn:u,min:p=0,max:d=1,exp:f=1}=l[o],g=normalize(a[o],p,d,f);return{ccn:u,ccv:g}})}function sendCC(l,a,o,u,p){if(typeof a!="number"||a<0||a>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof l))throw new Error("expected ccn to be a number or a string");const d=Math.round(a*127);o.sendControlChange(l,d,u,{time:p})}function sendProgramChange(l,a,o,u){if(typeof l!="number"||l<0||l>127)throw new Error("expected progNum (program change) to be a number between 0 and 127");a.sendProgramChange(l,o,{time:u})}function sendSysex(l,a,o,u){if(Array.isArray(l)){if(!l.every(p=>Number.isInteger(p)&&p>=0&&p<=255))throw new Error("all sysexid bytes must be integers between 0 and 255")}else if(!Number.isInteger(l)||l<0||l>255)throw new Error("A:sysexid must be an number between 0 and 255 or an array of such integers");if(!Array.isArray(a))throw new Error("expected sysex to be an array of numbers (0-255)");if(!a.every(p=>Number.isInteger(p)&&p>=0&&p<=255))throw new Error("all sysex bytes must be integers between 0 and 255");o.sendSysex(l,a,{time:u})}function sendNRPN(l,a,o,u,p){if(Array.isArray(l)){if(!l.every(d=>Number.isInteger(d)&&d>=0&&d<=255))throw new Error("all nrpnn bytes must be integers between 0 and 255")}else if(!Number.isInteger(a)||a<0||a>255)throw new Error("A:sysexid must be an number between 0 and 255 or an array of such integers");o.sendNRPN(l,a,u,{time:p})}function sendPitchBend(l,a,o,u){if(typeof l!="number"||l<-1||l>1)throw new Error("expected midibend to be a number between -1 and 1");a.sendPitchBend(l,o,{time:u})}function sendAftertouch(l,a,o,u){if(typeof l!="number"||l<0||l>1)throw new Error("expected miditouch to be a number between 0 and 1");a.sendChannelAftertouch(l,o,{time:u})}function sendNote(l,a,o,u,p,d){if(l==null||l==="")throw new Error("note cannot be null or empty");if(a!=null&&(typeof a!="number"||a<0||a>1))throw new Error("velocity must be a number between 0 and 1");if(o!=null&&(typeof o!="number"||o<0))throw new Error("duration must be a positive number");const f=typeof l=="number"?l:noteToMidi$1(l),g=new Note(f,{attack:a,duration:o});u.playNote(g,p,{time:d})}Pattern$1.prototype.midi=function(l,a={}){if(isPattern(l))throw new Error(`.midi does not accept Pattern input for midiport. Make sure to pass device name with single quotes. Example: .midi('${WebMidi.outputs?.[0]?.name||"IAC Driver Bus 1"}')`);if(typeof l=="object"){const{port:u,isController:p=!1,...d}=l;a={isController:p,...d,...a},l=u}let o={isController:!1,latencyMs:34,noteOffsetMs:10,midichannel:1,velocity:.9,gain:1,midimap:"default",midiport:l,...a};return enableWebMidi({onEnabled:({outputs:u})=>{const p=getDevice(o.midiport,u),d=u.filter(f=>f.name!==p.name);logger$2(`Midi enabled! Using "${p.name}". ${d?.length?`Also available: ${getMidiDeviceNamesString(d)}`:""}`)},onDisconnected:({outputs:u})=>logger$2(`Midi device disconnected! Available: ${getMidiDeviceNamesString(u)}`)}),this.onTrigger((u,p,d,f)=>{if(!WebMidi.enabled){logger$2("Midi not enabled");return}u.ensureObjectValue();const g=o.latencyMs,b=`+${getEventOffsetMs(f,p)+g}`;let{note:O,nrpnn:S,nrpv:M,ccn:A,ccv:F,midichan:$=o.midichannel,midicmd:B,midibend:I,miditouch:U,polyTouch:te,gain:de=o.gain,velocity:se=o.velocity,progNum:q,sysexid:le,sysexdata:fe,midimap:_e=o.midimap,midiport:Pe=o.midiport}=u.value;const Oe=getDevice(Pe,WebMidi.outputs);if(!Oe){logger$2(`[midi] midiport "${Pe}" not found! available: ${WebMidi.outputs.map(Fe=>`'${Fe.name}'`).join(", ")}`);return}if(se=de*se,midicontrolMap.has(_e)?mapCC(midicontrolMap.get(_e),u.value).forEach(({ccn:we,ccv:ke})=>sendCC(we,ke,Oe,$,b)):_e!=="default"&&logger$2(`[midi] midimap "${_e}" not found! Available maps: ${[...midicontrolMap.keys()].join(", ")}`),O!==void 0&&!o.isController){const Fe=u.duration.valueOf()/d*1e3-o.noteOffsetMs;sendNote(O,se,Fe,Oe,$,b)}if(q!==void 0&&sendProgramChange(q,Oe,$,b),le!==void 0&&fe!==void 0&&sendSysex(le,fe,Oe,b),F!==void 0&&A!==void 0&&sendCC(A,F,Oe,$,b),S!==void 0&&M!==void 0&&sendNRPN(S,M,Oe,$,b),I!==void 0&&sendPitchBend(I,Oe,$,b),U!==void 0&&sendAftertouch(U,Oe,$,b),u.whole.begin+0===0&&Oe.sendStart({time:b}),["clock","midiClock"].includes(B))Oe.sendClock({time:b});else if(["start"].includes(B))Oe.sendStart({time:b});else if(["stop"].includes(B))Oe.sendStop({time:b});else if(["continue"].includes(B))Oe.sendContinue({time:b});else if(Array.isArray(B)){if(B[0]==="progNum")sendProgramChange(B[1],Oe,$,b);else if(B[0]==="cc")B.length===2&&sendCC(B[0],B[1]/127,Oe,$,b);else if(B[0]==="sysex"&&B.length===3){const[Fe,we,ke]=B;sendSysex(we,ke,Oe,b)}}})};let listeners={};const refs={};async function midin(l){if(isPattern(l))throw new Error(`midin: does not accept Pattern as input. Make sure to pass device name with single quotes. Example: midin('${WebMidi.outputs?.[0]?.name||"IAC Driver Bus 1"}')`);const a=await enableWebMidi(),o=getDevice(l,WebMidi.inputs);if(!o)throw new Error(`midiin: device "${l}" not found.. connected devices: ${getMidiDeviceNamesString(WebMidi.inputs)}`);if(a){const p=WebMidi.inputs.filter(d=>d.name!==o.name);logger$2(`Midi enabled! Using "${o.name}". ${p?.length?`Also available: ${getMidiDeviceNamesString(p)}`:""}`)}refs[l]||(refs[l]={});const u=p=>ref$1(()=>refs[l][p]||0);return listeners[l]&&o.removeListener("midimessage",listeners[l]),listeners[l]=p=>{const d=p.dataBytes[0],f=p.dataBytes[1];refs[l]&&(refs[l][d]=f/127)},o.addListener("midimessage",listeners[l]),u}const index=Object.freeze(Object.defineProperty({__proto__:null,WebMidi,defaultmidimap,enableWebMidi,midicontrolMap,midimaps,midin,midisoundMap},Symbol.toStringTag,{value:"Module"}));return exports.prebake=prebake,Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),exports}({});
