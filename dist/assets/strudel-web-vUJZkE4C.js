var mv=Object.defineProperty;var fv=(t,e,n)=>e in t?mv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Re=(t,e,n)=>fv(t,typeof e!="symbol"?e+"":e,n);import{f as Ce,i as k1,v as yv,P as bv,l as cu,z as gv,a as Mv,p as Pv,F as Cv,n as vv,H as Py,A as xv}from"./strudel-core-cY4HxVpV.js";let bn=[],ur=0;const Di=4;let Av=t=>{let e=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(r){return n.lc=e.push(r),()=>{for(let i=ur+Di;i<bn.length;)bn[i]===r?bn.splice(i,Di):i+=Di;let s=e.indexOf(r);~s&&(e.splice(s,1),--n.lc||n.off())}},notify(r,s){let i=!bn.length;for(let a of e)bn.push(a,n.value,r,s);if(i){for(ur=0;ur<bn.length;ur+=Di)bn[ur](bn[ur+1],bn[ur+2],bn[ur+3]);bn.length=0}},off(){},set(r){let s=n.value;s!==r&&(n.value=r,n.notify(s))},subscribe(r){let s=n.listen(r);return r(n.value),s},value:t};return n};const Dv=5,Fi=6,Zi=10;let Fv=(t,e,n,r)=>(t.events=t.events||{},t.events[n+Zi]||(t.events[n+Zi]=r(s=>{t.events[n].reduceRight((i,a)=>(a(i),i),{shared:{},...s})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let s=t.events[n],i=s.indexOf(e);s.splice(i,1),s.length||(delete t.events[n],t.events[n+Zi](),delete t.events[n+Zi])}),Zv=1e3,X7=(t,e)=>Fv(t,r=>{let s=e(r);s&&t.events[Fi].push(s)},Dv,r=>{let s=t.listen;t.listen=(...a)=>(!t.lc&&!t.active&&(t.active=!0,r()),s(...a));let i=t.off;return t.events[Fi]=[],t.off=()=>{i(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let a of t.events[Fi])a();t.events[Fi]=[]}},Zv)},()=>{t.listen=s,t.off=i}}),wv=(t={})=>{let e=Av(t);return e.setKey=function(n,r){let s=e.value;typeof r>"u"&&n in e.value?(e.value={...e.value},delete e.value[n],e.notify(s,n)):e.value[n]!==r&&(e.value={...e.value,[n]:r},e.notify(s,n))},e};if(typeof DelayNode<"u"){class t extends DelayNode{constructor(n,r,s,i){super(n),r=Math.abs(r),this.delayTime.value=s;const a=n.createGain();a.gain.value=Math.min(Math.abs(i),.995),this.feedback=a.gain;const o=n.createGain();return o.gain.value=r,this.delayGain=o,this.connect(a),this.connect(o),a.connect(this),this.connect=u=>o.connect(u),this}start(n){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,n+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(e,n,r){return new t(this,e,n,r)}}var lu={};lu.generateReverb=function(t,e){for(var n=t.audioContext||new AudioContext,r=n.sampleRate,s=t.numChannels||2,i=t.decayTime*1.5,a=Math.round(t.decayTime*r),o=Math.round(i*r),u=Math.round((t.fadeInTime||0)*r),c=Math.pow(1/1e3,1/a),l=n.createBuffer(s,o,r),d=0;d<s;d++){for(var m=l.getChannelData(d),f=0;f<o;f++)m[f]=Sv()*Math.pow(c,f);for(var f=0;f<u;f++)m[f]*=f/u}Xv(l,t.lpFreqStart||0,t.lpFreqEnd||0,t.decayTime,e)};lu.generateGraph=function(t,e,n,r,s){var i=document.createElement("canvas");i.width=e,i.height=n;var a=i.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,i.width,i.height),a.fillStyle="#fff";for(var o=e/t.length,u=n/(s-r),c=0;c<t.length;c++)a.fillRect(c*o,n-(t[c]-r)*u,1,1);return i};var Xv=function(t,e,n,r,s){if(e==0){s(t);return}var i=Gv(t),a=new OfflineAudioContext(t.numberOfChannels,i[0].length,t.sampleRate),o=a.createBufferSource();o.buffer=t;var u=a.createBiquadFilter();e=Math.min(e,t.sampleRate/2),n=Math.min(n,t.sampleRate/2),u.type="lowpass",u.Q.value=1e-4,u.frequency.setValueAtTime(e,0),u.frequency.linearRampToValueAtTime(n,r),o.connect(u),u.connect(a.destination),o.start(),a.oncomplete=function(c){s(c.renderedBuffer)},a.startRendering(),window.filterNode=u},Gv=function(t){for(var e=[],n=0;n<t.numberOfChannels;n++)e[n]=t.getChannelData(n);return e},Sv=function(){return Math.random()*2-1};let Cy=t=>console.log(t);function vy(t,e="superdough"){ce(`[${e}] error: ${t.message}`)}const ce=(...t)=>Cy(...t),xy=t=>{Cy=t},Ev=t=>{var s;if(typeof t!="string")return[];const[e,n="",r]=((s=t.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/))==null?void 0:s.slice(1))||[];return e?[e,n,r?Number(r):void 0]:[]},Vv={c:0,d:2,e:4,f:5,g:7,a:9,b:11},kv={"#":1,b:-1,s:1,f:-1},ea=(t,e=3)=>{const[n,r,s=e]=Ev(t);if(!n)throw new Error('not a note: "'+t+'"');const i=Vv[n.toLowerCase()],a=(r==null?void 0:r.split("").reduce((o,u)=>o+kv[u],0))||0;return(Number(s)+1)*12+i+a},Ay=t=>Math.pow(2,(t-69)/12)*440,dr=(t,e,n)=>Math.min(Math.max(t,e),n),Bv=t=>12*Math.log(t/440)/Math.LN2+69,Lv=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:r}=t;return typeof n=="number"?Bv(n):typeof r=="string"?ea(r):typeof r=="number"?r:e};function Un(t,e=0,n){return isNaN(Number(t))?(!n&&ce(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const Dy=(t,e)=>(t%e+e)%e,B1=(t,e)=>Dy(Math.round(Un(t,0)),e);function Wv(t,e){return t/e}function Fy(t,e){const{s:n,n:r=0}=t;let s=Lv(t,36),i=s-36,a,o=0;if(Array.isArray(e))o=B1(r,e.length),a=e[o];else{const c=d=>ea(d)-s,l=Object.keys(e).filter(d=>!d.startsWith("_")).reduce((d,m,f)=>!d||Math.abs(c(m))<Math.abs(c(d))?m:d,null);i=-c(l),o=B1(r,e[l].length),a=e[l][o]}const u=`${n}:${o}`;return{transpose:i,url:a,index:o,midi:s,label:u}}typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(t,e,n=1,r=0){const s=Math.floor(dr(r,0,1)*e.length),i=e.sampleRate*t,a=this.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let o=0;o<e.numberOfChannels;o++){let u=e.getChannelData(o),c=a.getChannelData(o);for(let l=0;l<i;l++){let d=(s+l*Math.abs(n))%u.length;n<1&&(d=d*-1),c[l]=u.at(d)||0}}return a},AudioContext.prototype.createReverb=function(t,e,n,r,s,i,a){const o=this.createConvolver();return o.generate=(u=2,c=.1,l=15e3,d=1e3,m,f,g)=>{o.duration=u,o.fade=c,o.lp=l,o.dim=d,o.ir=m,o.irspeed=f,o.irbegin=g,m?o.buffer=this.adjustLength(u,m,f,g):lu.generateReverb({audioContext:this,numChannels:2,decayTime:u,fadeInTime:c,lpFreqStart:l,lpFreqEnd:d},b=>{o.buffer=b})},o.generate(t,e,n,r,s,i,a),o});var L1={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class t extends GainNode{constructor(n,r){if(super(n),!L1[r])throw new Error("vowel: unknown vowel "+r);const{gains:s,qs:i,freqs:a}=L1[r],o=n.createGain();for(let u=0;u<5;u++){const c=n.createGain();c.gain.value=s[u];const l=n.createBiquadFilter();l.type="bandpass",l.Q.value=i[u],l.frequency.value=a[u],this.connect(l),l.connect(c),c.connect(o)}return o.gain.value=8,this.connect=u=>o.connect(u),this}}AudioContext.prototype.createVowelFilter=function(e){return new t(this,e)}}const Rv="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oQyl7InVzZSBzdHJpY3QiO3ZhciBUZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIHllPShDLEQsTCk9PkQgaW4gQz9UZShDLEQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOkx9KTpDW0RdPUw7dmFyIFN0PShDLEQsTCk9PnllKEMsdHlwZW9mIEQhPSJzeW1ib2wiP0QrIiI6RCxMKTtjbGFzcyBMIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMoZSwxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGUsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKXtsZXQgcj10W3NdLmxlbmd0aDtyIT10aGlzLmlucHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKHMscil9Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspe2xldCByPWVbc10ubGVuZ3RoO3IhPXRoaXMub3V0cHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhzLHIpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxlKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkoZSk7Zm9yKGxldCBzPTA7czxlO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KGUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtzXT10aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQsZSl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bc109bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dFtlXVtzXTt0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5zZXQocix0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dGhpcy5vdXRwdXRCdWZmZXJzW2VdW3NdLnN1YmFycmF5KDAsMTI4KTt0W2VdW3NdLnNldChyKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IGU9MDtlPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW2VdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspZm9yKGxldCBzPTA7czx0aGlzLmJsb2NrU2l6ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdW3NdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW2VdW3NdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQsZSxzKXtjb25zdCBpPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIWk/ITE6KHRoaXMuc3RhcnRlZD1pLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLHMpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhlKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQsZSxzKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBrdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLnNpemUqMikscz0wO3M8ZS5sZW5ndGg7cys9Mil7Y29uc3QgYz1NYXRoLlBJKnMvdGhpcy5zaXplO2Vbc109TWF0aC5jb3MoYyksZVtzKzFdPS1NYXRoLnNpbihjKX10aGlzLnRhYmxlPWU7Zm9yKHZhciByPTAsaT0xO3RoaXMuc2l6ZT5pO2k8PD0xKXIrKzt0aGlzLl93aWR0aD1yJTI9PT0wP3ItMTpyLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgbz0wO288dGhpcy5fYml0cmV2Lmxlbmd0aDtvKyspe3RoaXMuX2JpdHJldltvXT0wO2Zvcih2YXIgYT0wO2E8dGhpcy5fd2lkdGg7YSs9Mil7dmFyIHU9dGhpcy5fd2lkdGgtYS0yO3RoaXMuX2JpdHJldltvXXw9KG8+Pj5hJjMpPDx1fX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxyPTA7cjx0Lmxlbmd0aDtyKz0yKXNbcj4+PjFdPXRbcl07cmV0dXJuIHN9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLHI9MDtyPHMubGVuZ3RoO3IrPTIpc1tyXT10W3I+Pj4xXSxzW3IrMV09MDtyZXR1cm4gc31jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgZT10aGlzLl9jc2l6ZSxzPWU+Pj4xLHI9MjtyPHM7cis9Mil0W2Utcl09dFtyXSx0W2UtcisxXT0tdFtyKzFdfXRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxlKXtpZih0PT09ZSl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9ZSx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLGk9ZS9yPDwxLG8sYSx1PXRoaXMuX2JpdHJldjtpZihpPT09NClmb3Iobz0wLGE9MDtvPGU7bys9aSxhKyspe2NvbnN0IGQ9dVthXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG8sZCxyKX1lbHNlIGZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3QgZD11W2FdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQobyxkLHIpfXZhciBjPXRoaXMuX2ludj8tMToxLGg9dGhpcy50YWJsZTtmb3Iocj4+PTI7cj49MjtyPj49Mil7aT1lL3I8PDE7dmFyIGY9aT4+PjI7Zm9yKG89MDtvPGU7bys9aSlmb3IodmFyIHA9bytmLGw9byxtPTA7bDxwO2wrPTIsbSs9cil7Y29uc3QgZD1sLGI9ZCtmLEk9YitmLHY9SStmLFA9dFtkXSx3PXRbZCsxXSxUPXRbYl0sQj10W2IrMV0sQT10W0ldLHk9dFtJKzFdLE89dFt2XSxxPXRbdisxXSx4PVAsRT13LE49aFttXSxGPWMqaFttKzFdLFY9VCpOLUIqRixrPVQqRitCKk4sUj1oWzIqbV0sWD1jKmhbMiptKzFdLHR0PUEqUi15KlgsZXQ9QSpYK3kqUixzdD1oWzMqbV0scnQ9YypoWzMqbSsxXSxudD1PKnN0LXEqcnQsaXQ9TypydCtxKnN0LG90PXgrdHQsSz1FK2V0LGo9eC10dCxhdD1FLWV0LGN0PVYrbnQsWj1rK2l0LCQ9YyooVi1udCksdXQ9Yyooay1pdCksbHQ9b3QrY3QsZ3Q9SytaLGJ0PW90LWN0LEl0PUstWixfdD1qK3V0LEJ0PWF0LSQsTXQ9ai11dCxQdD1hdCskO3RbZF09bHQsdFtkKzFdPWd0LHRbYl09X3QsdFtiKzFdPUJ0LHRbSV09YnQsdFtJKzFdPUl0LHRbdl09TXQsdFt2KzFdPVB0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPWlbZV0sYT1pW2UrMV0sdT1pW2Urc10sYz1pW2UrcysxXSxoPW8rdSxmPWErYyxwPW8tdSxsPWEtYztyW3RdPWgsclt0KzFdPWYsclt0KzJdPXAsclt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPXRoaXMuX2ludj8tMToxLGE9cyoyLHU9cyozLGM9aVtlXSxoPWlbZSsxXSxmPWlbZStzXSxwPWlbZStzKzFdLGw9aVtlK2FdLG09aVtlK2ErMV0sZD1pW2UrdV0sYj1pW2UrdSsxXSxJPWMrbCx2PWgrbSxQPWMtbCx3PWgtbSxUPWYrZCxCPXArYixBPW8qKGYtZCkseT1vKihwLWIpLE89SStULHE9ditCLHg9UCt5LEU9dy1BLE49SS1ULEY9di1CLFY9UC15LGs9dytBO3JbdF09TyxyW3QrMV09cSxyW3QrMl09eCxyW3QrM109RSxyW3QrNF09TixyW3QrNV09RixyW3QrNl09VixyW3QrN109a31fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQsZT10aGlzLl9jc2l6ZSxzPXRoaXMuX3dpZHRoLHI9MTw8cyxpPWUvcjw8MSxvLGEsdT10aGlzLl9iaXRyZXY7aWYoaT09PTQpZm9yKG89MCxhPTA7bzxlO28rPWksYSsrKXtjb25zdCB3dD11W2FdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKG8sd3Q+Pj4xLHI+Pj4xKX1lbHNlIGZvcihvPTAsYT0wO288ZTtvKz1pLGErKyl7Y29uc3Qgd3Q9dVthXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChvLHd0Pj4+MSxyPj4+MSl9dmFyIGM9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtpPWUvcjw8MTt2YXIgZj1pPj4+MSxwPWY+Pj4xLGw9cD4+PjE7Zm9yKG89MDtvPGU7bys9aSlmb3IodmFyIG09MCxkPTA7bTw9bDttKz0yLGQrPXIpe3ZhciBiPW8rbSxJPWIrcCx2PUkrcCxQPXYrcCx3PXRbYl0sVD10W2IrMV0sQj10W0ldLEE9dFtJKzFdLHk9dFt2XSxPPXRbdisxXSxxPXRbUF0seD10W1ArMV0sRT13LE49VCxGPWhbZF0sVj1jKmhbZCsxXSxrPUIqRi1BKlYsUj1CKlYrQSpGLFg9aFsyKmRdLHR0PWMqaFsyKmQrMV0sZXQ9eSpYLU8qdHQsc3Q9eSp0dCtPKlgscnQ9aFszKmRdLG50PWMqaFszKmQrMV0saXQ9cSpydC14Km50LG90PXEqbnQreCpydCxLPUUrZXQsaj1OK3N0LGF0PUUtZXQsY3Q9Ti1zdCxaPWsraXQsJD1SK290LHV0PWMqKGstaXQpLGx0PWMqKFItb3QpLGd0PUsrWixidD1qKyQsSXQ9YXQrbHQsX3Q9Y3QtdXQ7aWYodFtiXT1ndCx0W2IrMV09YnQsdFtJXT1JdCx0W0krMV09X3QsbT09PTApe3ZhciBCdD1LLVosTXQ9ai0kO3Rbdl09QnQsdFt2KzFdPU10O2NvbnRpbnVlfWlmKG0hPT1sKXt2YXIgUHQ9YXQsbWU9LWN0LHZlPUssZ2U9LWosYmU9LWMqbHQsSWU9LWMqdXQsX2U9LWMqJCxCZT0tYypaLE1lPVB0K2JlLFBlPW1lK0llLHdlPXZlK0JlLFNlPWdlLV9lLEN0PW8rcC1tLEV0PW8rZi1tO3RbQ3RdPU1lLHRbQ3QrMV09UGUsdFtFdF09d2UsdFtFdCsxXT1TZX19fX1fc2luZ2xlUmVhbFRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LGk9dGhpcy5fZGF0YSxvPWlbZV0sYT1pW2Urc10sdT1vK2EsYz1vLWE7clt0XT11LHJbdCsxXT0wLHJbdCsyXT1jLHJbdCszXT0wfV9zaW5nbGVSZWFsVHJhbnNmb3JtNCh0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsaT10aGlzLl9kYXRhLG89dGhpcy5faW52Py0xOjEsYT1zKjIsdT1zKjMsYz1pW2VdLGg9aVtlK3NdLGY9aVtlK2FdLHA9aVtlK3VdLGw9YytmLG09Yy1mLGQ9aCtwLGI9byooaC1wKSxJPWwrZCx2PW0sUD0tYix3PWwtZCxUPW0sQj1iO3JbdF09SSxyW3QrMV09MCxyW3QrMl09dixyW3QrM109UCxyW3QrNF09dyxyW3QrNV09MCxyW3QrNl09VCxyW3QrN109Qn19bGV0IER0PW49PmNvbnNvbGUubG9nKG4pO2NvbnN0IHp0PSguLi5uKT0+RHQoLi4ubikscXQ9KG4sdCxlKT0+TWF0aC5taW4oTWF0aC5tYXgobix0KSxlKSxUdD1uPT5uLygxK24pLFd0PShuLHQpPT4obiV0K3QpJXQsTHQ9KG4sdCk9PigxK3QpKm4vKDErdCpNYXRoLmFicyhuKSksWT0obix0KT0+TWF0aC50YW5oKG4qKDErdCkpLFl0PShuLHQpPT5xdCgoMSt0KSpuLC0xLDEpLHl0PShuLHQpPT57bGV0IGU9KDErLjUqdCkqbjtjb25zdCBzPVd0KGUrMSw0KTtyZXR1cm4gMS1NYXRoLmFicyhzLTIpfSxIdD0obix0KT0+TWF0aC5zaW4oTWF0aC5QSS8yKnl0KG4sdCkpLFV0PShuLHQpPT57Y29uc3QgZT1UdChNYXRoLmxvZzFwKHQpKSxzPShuLWUvMypuKm4qbikvKDEtZS8zKTtyZXR1cm4gWShzLHQpfSxBdD0obix0LGU9ITEpPT57Y29uc3Qgcz0xKzIqdCxpPS4wNypUdChNYXRoLmxvZzFwKHQpKSxvPVkobitpLDIqdCksYT1ZKGU/aTotbitpLDIqdCksdT1vLWEsYz0xL01hdGguY29zaChzKmkpLGg9YypjLGY9TWF0aC5tYXgoMWUtOCwoZT8xOjIpKnMqaCk7cmV0dXJuIFkodS9mLHQpfSxPdD17c2N1cnZlOkx0LHNvZnQ6WSxoYXJkOll0LGN1YmljOlV0LGRpb2RlOkF0LGFzeW06KG4sdCk9PkF0KG4sdCwhMCksZm9sZDp5dCxzaW5lZm9sZDpIdCxjaGVieXNoZXY6KG4sdCk9Pntjb25zdCBlPTEwKk1hdGgubG9nMXAodCk7bGV0IHM9MSxyPW4saSxvPTA7Zm9yKGxldCBhPTE7YTw2NDthKyspe2lmKGE8Mil7bys9YT09MD9zOnI7Y29udGludWV9aT0yKm4qcy1yLHI9cyxzPWksYSUyPT09MCYmKG8rPU1hdGgubWluKDEuMyplL2EsMikqaSl9cmV0dXJuIFkobyxlLzIwKX19LEc9T2JqZWN0LmZyZWV6ZShPYmplY3Qua2V5cyhPdCkpLEt0PW49PntsZXQgdD1uO3R5cGVvZiBuPT0ic3RyaW5nIiYmKHQ9Ry5pbmRleE9mKG4pLHQ9PT0tMSYmKHp0KGBbc3VwZXJkb3VnaF0gQ291bGQgbm90IGZpbmQgd2F2ZXNoYXBpbmcgYWxnb3JpdGhtICR7bn0uCiAgICAgICAgQXZhaWxhYmxlIG9wdGlvbnMgYXJlICR7Ry5qb2luKCIsICIpfS4KICAgICAgICBEZWZhdWx0aW5nIHRvICR7R1swXX0uYCksdD0wKSk7Y29uc3QgZT1HW3QlRy5sZW5ndGhdO3JldHVybiBPdFtlXX0sTT0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLHh0PShuLHQpPT4obiV0K3QpJXQsanQ9KG4sdCxlKT0+ZSoodC1uKStuLFM9KG4sdCk9Pm5bdF0/P25bMF0sVz1uPT5uLU1hdGguZmxvb3IobiksZnQ9bj0+bnwwLE50PShuLHQsZSk9Pm48Mj8wOmp0KC10Ki41LHQqLjUsZS8obi0xKSksSD0obix0KT0+bipNYXRoLnBvdygyLHQvMTIpO2Z1bmN0aW9uIEZ0KG4sdD0xKXtyZXR1cm4gbj49dD9uLT10Om48MCYmKG4rPXQpLG59Y29uc3QgVT0xMjg7ZnVuY3Rpb24gWnQobix0KXtyZXR1cm4gdD1NYXRoLm1pbih0LDEtdCksbjx0PyhuLz10LG4rbi1uKm4tMSk6bj4xLXQ/KG49KG4tMSkvdCxuKm4rbituKzEpOjB9Y29uc3QgcHQ9e3RyaShuLHQ9LjUpe2NvbnN0IGU9MS10O3JldHVybiBuPj10PzEvZS1uL2U6bi90fSxzaW5lKG4pe3JldHVybiBNYXRoLnNpbihNYXRoLlBJKjIqbikqLjUrLjV9LHJhbXAobil7cmV0dXJuIG59LHNhdyhuKXtyZXR1cm4gMS1ufSxzcXVhcmUobix0PS41KXtyZXR1cm4gbj49dD8wOjF9LGN1c3RvbShuLHQ9WzAsMV0pe2NvbnN0IGU9dC5sZW5ndGgtMSxzPU1hdGguZmxvb3IobiplKSxyPTEvZSxpPU0odFtzXSwwLDEpLGE9TSh0W3MrMV0sMCwxKSx1PWksYz0wLGg9cjtyZXR1cm4oYS11KS8oaC1jKSoobi1yKnMpK2l9LHNhd2JsZXAobix0KXtyZXR1cm4gMipuLTEtWnQobix0KX19O2Z1bmN0aW9uIFEobix0KXtyZXR1cm4gdC5sZW5ndGg+MT90W25dOnRbMF19Y29uc3QgJHQ9T2JqZWN0LmtleXMocHQpO2NsYXNzIEd0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InRpbWUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOi41fSx7bmFtZToic2tldyIsZGVmYXVsdFZhbHVlOi41fSx7bmFtZToiZGVwdGgiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToicGhhc2VvZmZzZXQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiY3VydmUiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZGNvZmZzZXQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToibWluIixkZWZhdWx0VmFsdWU6MH0se25hbWU6Im1heCIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGFzZX1pbmNyZW1lbnRQaGFzZSh0KXt0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2U9dGhpcy5waGFzZS0xKX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXMuYmVnaW5bMF07aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1yKXJldHVybiEwO2NvbnN0IGk9ZVswXSxvPXMuZnJlcXVlbmN5WzBdLGE9cy50aW1lWzBdLHU9cy5kZXB0aFswXSxjPXMuc2tld1swXSxoPXMucGhhc2VvZmZzZXRbMF0sZj1zLmN1cnZlWzBdLHA9cy5kY29mZnNldFswXSxsPXMubWluWzBdLG09cy5tYXhbMF0sZD0kdFtzLnNoYXBlWzBdXSxiPWlbMF0ubGVuZ3RoPz8wO3RoaXMucGhhc2U9PW51bGwmJih0aGlzLnBoYXNlPXh0KGEqbytoLDEpKTtjb25zdCBJPW8vc2FtcGxlUmF0ZTtmb3IobGV0IHY9MDt2PGI7disrKXtmb3IobGV0IFA9MDtQPGkubGVuZ3RoO1ArKyl7bGV0IHc9KHB0W2RdKHRoaXMucGhhc2UsYykrcCkqdTt3PU1hdGgucG93KHcsZiksaVtQXVt2XT1NKHcsbCxtKX10aGlzLmluY3JlbWVudFBoYXNlKEkpfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGZvLXByb2Nlc3NvciIsR3QpO2NsYXNzIFF0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNvYXJzZSIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87bGV0IGE9cy5jb2Fyc2VbMF0/PzA7YT1NYXRoLm1heCgxLGEpO2ZvcihsZXQgdT0wO3U8VTt1KyspZm9yKGxldCBjPTA7YzxyLmxlbmd0aDtjKyspaVtjXVt1XT11JWE9PT0wP3JbY11bdV06aVtjXVt1LTFdO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY29hcnNlLXByb2Nlc3NvciIsUXQpO2NsYXNzIEp0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImNydXNoIixkZWZhdWx0VmFsdWU6MH1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLGk9ZVswXSxvPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhbylyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9bztsZXQgYT1zLmNydXNoWzBdPz84O2E9TWF0aC5tYXgoMSxhKTtmb3IobGV0IHU9MDt1PFU7dSsrKWZvcihsZXQgYz0wO2M8ci5sZW5ndGg7YysrKXtjb25zdCBoPU1hdGgucG93KDIsYS0xKTtpW2NdW3VdPU1hdGgucm91bmQocltjXVt1XSpoKS9ofXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiY3J1c2gtcHJvY2Vzc29yIixKdCk7Y2xhc3MgWHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2xldCBhPXMuc2hhcGVbMF07YT1hPDE/YTouOTk5OTk5OTk5NixhPTIqYS8oMS1hKTtjb25zdCB1PU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxzLnBvc3RnYWluWzBdKSk7Zm9yKGxldCBjPTA7YzxVO2MrKylmb3IobGV0IGg9MDtoPHIubGVuZ3RoO2grKylpW2hdW2NdPSgxK2EpKnJbaF1bY10vKDErYSpNYXRoLmFicyhyW2hdW2NdKSkqdTtyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoInNoYXBlLXByb2Nlc3NvciIsWHQpO2NsYXNzIFZ0e2NvbnN0cnVjdG9yKCl7U3QodGhpcywiczAiLDApO1N0KHRoaXMsInMxIiwwKX11cGRhdGUodCxlLHM9MCl7cz1NKHMsMCwxKSxlPU0oZSwwLHNhbXBsZVJhdGUvMi0xKTtjb25zdCByPU0oMipNYXRoLnNpbihlKihkdC9zYW1wbGVSYXRlKSksMCwxLjE0KSxvPTEtTWF0aC5wb3coLjUsKHMrLjEyNSkvLjEyNSkqcjtyZXR1cm4gdGhpcy5zMD1vKnRoaXMuczAtcip0aGlzLnMxK3IqdCx0aGlzLnMxPW8qdGhpcy5zMStyKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgdGUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToidmFsdWUiLGRlZmF1bHRWYWx1ZTouNX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLmZpbHRlcnM9W25ldyBWdCxuZXcgVnRdfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9TShzLnZhbHVlWzBdLDAsMSk7bGV0IHU9Im5vbmUiLGMsaD0xO2E+LjUxPyh1PSJoaXBhc3MiLGg9KGEtLjUpKjIpOmE8LjQ5JiYodT0ibG9wYXNzIixoPWEqMiksYz1NYXRoLnBvdyhoKjExLDQpO2ZvcihsZXQgZj0wO2Y8ci5sZW5ndGg7ZisrKWZvcihsZXQgcD0wO3A8VTtwKyspdT09Im5vbmUiP2lbZl1bcF09cltmXVtwXToodGhpcy5maWx0ZXJzW2ZdLnVwZGF0ZShyW2ZdW3BdLGMsLjEpLHU9PT0ibG9wYXNzIj9pW2ZdW3BdPXRoaXMuZmlsdGVyc1tmXS5zMTp1PT09ImhpcGFzcyI/aVtmXVtwXT1yW2ZdW3BdLXRoaXMuZmlsdGVyc1tmXS5zMTppW2ZdW3BdPXJbZl1bcF0pO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGpmLXByb2Nlc3NvciIsdGUpO2Z1bmN0aW9uIHoobil7Y29uc3QgdD1uKm47cmV0dXJuIG4qKDI3K3QpLygyNys5KnQpfWNvbnN0IGR0PTMuMTQxNTkyNjUzNTk7Y2xhc3MgZWUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NTAwfSx7bmFtZToicSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkcml2ZSIsZGVmYXVsdFZhbHVlOi42OX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5wMD1bMCwwXSx0aGlzLnAxPVswLDBdLHRoaXMucDI9WzAsMF0sdGhpcy5wMz1bMCwwXSx0aGlzLnAzMj1bMCwwXSx0aGlzLnAzMz1bMCwwXSx0aGlzLnAzND1bMCwwXX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0saT1lWzBdLG89clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFvKXJldHVybiExO3RoaXMuc3RhcnRlZD1vO2NvbnN0IGE9cy5xWzBdLHU9TShNYXRoLmV4cChzLmRyaXZlWzBdKSwuMSwyZTMpO2xldCBjPXMuZnJlcXVlbmN5WzBdO2M9YyoyKmR0L3NhbXBsZVJhdGUsYz1jPjE/MTpjO2NvbnN0IGg9TWF0aC5taW4oOCxhKi4xMyk7bGV0IGY9MS91Kk1hdGgubWluKDEuNzUsMStoKTtmb3IobGV0IHA9MDtwPFU7cCsrKWZvcihsZXQgbD0wO2w8ci5sZW5ndGg7bCsrKXtjb25zdCBtPXRoaXMucDNbbF0qLjM2MDg5MSt0aGlzLnAzMltsXSouNDE3MjkrdGhpcy5wMzNbbF0qLjE3Nzg5Nit0aGlzLnAzNFtsXSouMDQzOTcyNTt0aGlzLnAzNFtsXT10aGlzLnAzM1tsXSx0aGlzLnAzM1tsXT10aGlzLnAzMltsXSx0aGlzLnAzMltsXT10aGlzLnAzW2xdLHRoaXMucDBbbF0rPSh6KHJbbF1bcF0qdS1oKm0pLXoodGhpcy5wMFtsXSkpKmMsdGhpcy5wMVtsXSs9KHoodGhpcy5wMFtsXSkteih0aGlzLnAxW2xdKSkqYyx0aGlzLnAyW2xdKz0oeih0aGlzLnAxW2xdKS16KHRoaXMucDJbbF0pKSpjLHRoaXMucDNbbF0rPSh6KHRoaXMucDJbbF0pLXoodGhpcy5wM1tsXSkpKmMsaVtsXVtwXT1tKmZ9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsYWRkZXItcHJvY2Vzc29yIixlZSk7Y2xhc3Mgc2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiZGlzdG9ydCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcih7cHJvY2Vzc29yT3B0aW9uczp0fSl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5hbGdvcml0aG09S3QodC5hbGdvcml0aG0pfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxpPWVbMF0sbz1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIW8pcmV0dXJuITE7dGhpcy5zdGFydGVkPW87Zm9yKGxldCBhPTA7YTxVO2ErKyl7Y29uc3QgdT1NKFMocy5wb3N0Z2FpbixhKSwuMDAxLDEpLGM9TWF0aC5leHBtMShTKHMuZGlzdG9ydCxhKSk7Zm9yKGxldCBoPTA7aDxyLmxlbmd0aDtoKyspe2NvbnN0IGY9cltoXVthXTtpW2hdW2FdPXUqdGhpcy5hbGdvcml0aG0oZixjKX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJkaXN0b3J0LXByb2Nlc3NvciIsc2UpO2NsYXNzIHJlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlPVtdfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjF9XX1wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdO2ZvcihsZXQgaT0wO2k8clswXS5sZW5ndGg7aSsrKXtjb25zdCBvPVMocy5kZXR1bmUsaSksYT1TKHMudm9pY2VzLGkpLHU9UyhzLmZyZXFzcHJlYWQsaSksYz1TKHMucGFuc3ByZWFkLGkpKi41Ky41LGg9TWF0aC5zcXJ0KDEtYyksZj1NYXRoLnNxcnQoYyk7bGV0IHA9UyhzLmZyZXF1ZW5jeSxpKTtwPUgocCxvLzEwMCk7Zm9yKGxldCBsPTA7bDxhO2wrKyl7Y29uc3QgbT0obCYxKT09MTtsZXQgZD1oLGI9ZjttJiYoZD1mLGI9aCk7Y29uc3QgST1IKHAsTnQoYSx1LGwpKSx2PXh0KEkvc2FtcGxlUmF0ZSwxKTt0aGlzLnBoYXNlW2xdPXRoaXMucGhhc2VbbF0/P01hdGgucmFuZG9tKCk7Y29uc3QgUD1wdC5zYXdibGVwKHRoaXMucGhhc2VbbF0sdik7clswXVtpXT1yWzBdW2ldK1AqZCxyWzFdW2ldPXJbMV1baV0rUCpiLHRoaXMucGhhc2VbbF09RnQodGhpcy5waGFzZVtsXSt2KX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzdXBlcnNhdy1vc2NpbGxhdG9yIixyZSk7Y29uc3QgbmU9MjA0ODtmdW5jdGlvbiBpZShuKXtsZXQgdD1uZXcgRmxvYXQzMkFycmF5KG4pO2Zvcih2YXIgZT0wO2U8bjtlKyspdFtlXT0uNSooMS1NYXRoLmNvcygyKk1hdGguUEkqZS9uKSk7cmV0dXJuIHR9Y2xhc3Mgb2UgZXh0ZW5kcyBMe3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InBpdGNoRmFjdG9yIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKHQpe3QucHJvY2Vzc29yT3B0aW9ucz17YmxvY2tTaXplOm5lfSxzdXBlcih0KSx0aGlzLmZmdFNpemU9dGhpcy5ibG9ja1NpemUsdGhpcy50aW1lQ3Vyc29yPTAsdGhpcy5oYW5uV2luZG93PWllKHRoaXMuYmxvY2tTaXplKSx0aGlzLmZmdD1uZXcga3QodGhpcy5mZnRTaXplKSx0aGlzLmZyZXFDb21wbGV4QnVmZmVyPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMudGltZUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5tYWduaXR1ZGVzPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5mZnRTaXplLzIrMSksdGhpcy5wZWFrSW5kZXhlcz1uZXcgSW50MzJBcnJheSh0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSx0aGlzLm5iUGVha3M9MH1wcm9jZXNzT0xBKHQsZSxzKXtsZXQgcj1zLnBpdGNoRmFjdG9yW3MucGl0Y2hGYWN0b3IubGVuZ3RoLTFdO3I8MCYmKHI9ciouMjUpLHI9TWF0aC5tYXgoMCxyKzEpO2Zvcih2YXIgaT0wO2k8dGhpcy5uYklucHV0cztpKyspZm9yKHZhciBvPTA7bzx0W2ldLmxlbmd0aDtvKyspe3ZhciBhPXRbaV1bb10sdT1lW2ldW29dO3RoaXMuYXBwbHlIYW5uV2luZG93KGEpLHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlcixhKSx0aGlzLmNvbXB1dGVNYWduaXR1ZGVzKCksdGhpcy5maW5kUGVha3MoKSx0aGlzLnNoaWZ0UGVha3MociksdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkKSx0aGlzLmZmdC5mcm9tQ29tcGxleEFycmF5KHRoaXMudGltZUNvbXBsZXhCdWZmZXIsdSksdGhpcy5hcHBseUhhbm5XaW5kb3codSl9dGhpcy50aW1lQ3Vyc29yKz10aGlzLmhvcFNpemV9YXBwbHlIYW5uV2luZG93KHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5ibG9ja1NpemU7ZSsrKXRbZV09dFtlXSp0aGlzLmhhbm5XaW5kb3dbZV0qMS42Mn1jb21wdXRlTWFnbml0dWRlcygpe2Zvcih2YXIgdD0wLGU9MDt0PHRoaXMubWFnbml0dWRlcy5sZW5ndGg7KXtsZXQgcz10aGlzLmZyZXFDb21wbGV4QnVmZmVyW2VdLHI9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlKzFdO3RoaXMubWFnbml0dWRlc1t0XT1zKioyK3IqKjIsdCs9MSxlKz0yfX1maW5kUGVha3MoKXt0aGlzLm5iUGVha3M9MDt2YXIgdD0yO2xldCBlPXRoaXMubWFnbml0dWRlcy5sZW5ndGgtMjtmb3IoO3Q8ZTspe2xldCBzPXRoaXMubWFnbml0dWRlc1t0XTtpZih0aGlzLm1hZ25pdHVkZXNbdC0xXT49c3x8dGhpcy5tYWduaXR1ZGVzW3QtMl0+PXMpe3QrKztjb250aW51ZX1pZih0aGlzLm1hZ25pdHVkZXNbdCsxXT49c3x8dGhpcy5tYWduaXR1ZGVzW3QrMl0+PXMpe3QrKztjb250aW51ZX10aGlzLnBlYWtJbmRleGVzW3RoaXMubmJQZWFrc109dCx0aGlzLm5iUGVha3MrKyx0Kz0yfX1zaGlmdFBlYWtzKHQpe3RoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkLmZpbGwoMCk7Zm9yKHZhciBlPTA7ZTx0aGlzLm5iUGVha3M7ZSsrKXtsZXQgbz10aGlzLnBlYWtJbmRleGVzW2VdLGE9TWF0aC5yb3VuZChvKnQpO2lmKGE+dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhazt2YXIgcz0wLHI9dGhpcy5mZnRTaXplO2lmKGU+MCl7bGV0IGg9dGhpcy5wZWFrSW5kZXhlc1tlLTFdO3M9by1NYXRoLmZsb29yKChvLWgpLzIpfWlmKGU8dGhpcy5uYlBlYWtzLTEpe2xldCBoPXRoaXMucGVha0luZGV4ZXNbZSsxXTtyPW8rTWF0aC5jZWlsKChoLW8pLzIpfWxldCB1PXMtbyxjPXItbztmb3IodmFyIGk9dTtpPGM7aSsrKXtsZXQgaD1vK2ksZj1hK2k7aWYoZj49dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhaztsZXQgcD0yKk1hdGguUEkqKGYtaCkvdGhpcy5mZnRTaXplLGw9TWF0aC5jb3MocCp0aGlzLnRpbWVDdXJzb3IpLG09TWF0aC5zaW4ocCp0aGlzLnRpbWVDdXJzb3IpLGQ9aCoyLGI9ZCsxLEk9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltkXSx2PXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbYl0sUD1JKmwtdiptLHc9SSptK3YqbCxUPWYqMixCPVQrMTt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtUXSs9UCx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtCXSs9d319fX1yZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2Rlci1wcm9jZXNzb3IiLG9lKTtjbGFzcyBhZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3Nvcntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waT1kdCx0aGlzLnBoaT0tdGhpcy5waSx0aGlzLlkwPTAsdGhpcy5ZMT0wLHRoaXMuUFc9dGhpcy5waSx0aGlzLkI9Mi4zLHRoaXMuZHBoaWY9MCx0aGlzLmVudmY9MH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6InB1bHNld2lkdGgiLGRlZmF1bHRWYWx1ZToxLG1pbjowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9XX1wcm9jZXNzKHQsZSxzKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdO2xldCBpPTEsbztmb3IobGV0IGE9MDthPChyWzBdLmxlbmd0aD8/MCk7YSsrKXtjb25zdCB1PSgxLU0oUShhLHMucHVsc2V3aWR0aCksLS45OSwuOTkpKSp0aGlzLnBpLGM9UShhLHMuZGV0dW5lKSxoPUgoUShhLHMuZnJlcXVlbmN5KSxjLzEwMCk7bz1oKih0aGlzLnBpLyhzYW1wbGVSYXRlKi41KSksdGhpcy5kcGhpZis9LjEqKG8tdGhpcy5kcGhpZiksaSo9Ljk5OTgsdGhpcy5lbnZmKz0uMSooaS10aGlzLmVudmYpLHRoaXMuQj0yLjMqKDEtMWUtNCpoKSx0aGlzLkI8MCYmKHRoaXMuQj0wKSx0aGlzLnBoaSs9dGhpcy5kcGhpZix0aGlzLnBoaT49dGhpcy5waSYmKHRoaXMucGhpLT0yKnRoaXMucGkpO2xldCBmPU1hdGguY29zKHRoaXMucGhpK3RoaXMuQip0aGlzLlkwKTt0aGlzLlkwPS41KihmK3RoaXMuWTApO2xldCBwPU1hdGguY29zKHRoaXMucGhpK3RoaXMuQip0aGlzLlkxK3UpO3RoaXMuWTE9LjUqKHArdGhpcy5ZMSk7Zm9yKGxldCBsPTA7bDxyLmxlbmd0aDtsKyspcltsXVthXT0uMTUqKGYtcCkqdGhpcy5lbnZmfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigicHVsc2Utb3NjaWxsYXRvciIsYWUpO2NvbnN0IG10PXtiaXRDOmZ1bmN0aW9uKG4sdCxlKXtyZXR1cm4gbiZ0P2U6MH0sYnI6ZnVuY3Rpb24obix0PTgpe2lmKHQ+MzIpdGhyb3cgbmV3IEVycm9yKCJicigpIFNpemUgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiAzMiIpO3tsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dC0wO3MrKyllKz1tdC5iaXRDKG4sMioqcywyKioodC0ocysxKSkpO3JldHVybiBlfX0sc2luZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5zaW4obi8oMTI4L01hdGguUEkpKX0sY29zZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5jb3Mobi8oMTI4L01hdGguUEkpKX0sdGFuZjpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC50YW4obi8oMTI4L01hdGguUEkpKX0scmVnRzpmdW5jdGlvbihuLHQpe3JldHVybiB0LnRlc3Qobi50b1N0cmluZygyKSl9fTtsZXQgSixodDtmdW5jdGlvbiBjZShuKXtpZigoSnx8aHQpPT1udWxsKXtKPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE1hdGgpLGh0PUoubWFwKHM9Pk1hdGhbc10pO2NvbnN0IHQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobXQpLGU9dC5tYXAocz0+bXRbc10pO0oucHVzaCgiaW50Iiwid2luZG93IiwuLi50KSxodC5wdXNoKE1hdGguZmxvb3IsZ2xvYmFsVGhpcywuLi5lKX1yZXR1cm4gbmV3IEZ1bmN0aW9uKC4uLkosInQiLGByZXR1cm4gMCwKJHtufHwwfTtgKS5iaW5kKGdsb2JhbFRoaXMsLi4uaHQpfWNsYXNzIHVlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBvcnQub25tZXNzYWdlPXQ9PntsZXR7Y29kZVRleHQ6ZX09dC5kYXRhO2NvbnN0e2J5dGVCZWF0U3RhcnRUaW1lOnN9PXQuZGF0YTtzIT1udWxsJiYodGhpcy50PTAsdGhpcy5pbml0aWFsT2Zmc2V0PU1hdGguZmxvb3IocykpLGU9ZS50cmltKCkucmVwbGFjZSgvXmV2YWxcKHVuZXNjYXBlXChlc2NhcGUoPzpgfFwoJ3xcKCJ8XChgKSguKj8pKD86YHwnXCl8IlwpfGBcKSkucmVwbGFjZVwoXC91XChcLlwuXClcL2csWyInYF1cJDElWyInYF1cKVwpXCkkLywocixpKT0+dW5lc2NhcGUoZXNjYXBlKGkpLnJlcGxhY2UoL3UoLi4pL2csIiQxJSIpKSksdGhpcy5mdW5jPWNlKGUpfSx0aGlzLmluaXRpYWxPZmZzZXQ9bnVsbCx0aGlzLnQ9bnVsbCx0aGlzLmZ1bmM9bnVsbH1zdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowLG1pbjpOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxtaW46MH1dfXByb2Nlc3ModCxlLHMpe2lmKHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1zLmJlZ2luWzBdKXJldHVybiEwO2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTt0aGlzLnQ9PW51bGwmJih0aGlzLnQ9cy5iZWdpblswXSpzYW1wbGVSYXRlKTtjb25zdCByPWVbMF07Zm9yKGxldCBpPTA7aTxyWzBdLmxlbmd0aDtpKyspe2NvbnN0IG89UShpLHMuZGV0dW5lKSxhPUgoUShpLHMuZnJlcXVlbmN5KSxvLzEwMCk7bGV0IHU9dGhpcy50LyhzYW1wbGVSYXRlLzI1NikqYSt0aGlzLmluaXRpYWxPZmZzZXQ7Y29uc3QgZj0oKHRoaXMuZnVuYyh1KSYyNTUpLzEyNy41LTEpKi4yO2ZvcihsZXQgcD0wO3A8ci5sZW5ndGg7cCsrKXJbcF1baV09TShmLC0uNCwuNCk7dGhpcy50PXRoaXMudCsxfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiYnl0ZS1iZWF0LXByb2Nlc3NvciIsdWUpO2NvbnN0IGc9T2JqZWN0LmZyZWV6ZSh7Tk9ORTowLEFTWU06MSxNSVJST1I6MixCRU5EUDozLEJFTkRNOjQsQkVORE1QOjUsU1lOQzo2LFFVQU5UOjcsRk9MRDo4LFBXTTo5LE9SQklUOjEwLFNQSU46MTEsQ0hBT1M6MTIsUFJJTUVTOjEzLEJJTkFSWToxNCxCUk9XTklBTjoxNSxSRUNJUFJPQ0FMOjE2LFdPUk1IT0xFOjE3LExPR0lTVElDOjE4LFNJR01PSUQ6MTksRlJBQ1RBTDoyMCxGTElQOjIxfSk7ZnVuY3Rpb24gaGUobil7cmV0dXJuIG49bisyMTI3OTEyMjE0KyhuPDwxMiksbj1uXjMzNDUwNzI3MDBebj4+PjE5LG49biszNzQ3NjEzOTMrKG48PDUpLG49biszNTUwNjM1MTE2Xm48PDksbj1uKzQyNTE5OTM3OTcrKG48PDMpLG49bl4zMDQyNTk0NTY5Xm4+Pj4xNixuPj4+MH1jb25zdCBSdD1uPT4oaGUobik+Pj44KS8xNjc3NzIxNjtmdW5jdGlvbiBsZShuLHQpe2xldCBlPTA7Zm9yKGxldCBzPTA7czx0O3MrKyllPWU8PDF8biYxLG4+Pj49MTtyZXR1cm4gZX1mdW5jdGlvbiBmZShuKXtjb25zdCB0PU1hdGguZmxvb3IobiksZT1uLXQscz1SdCh0KSxyPVJ0KHQrMSk7cmV0dXJuIHMrKHItcykqZX1mdW5jdGlvbiBwZShuLHQ9NCl7bGV0IGU9LjUscz0wLHI9MCxpPTE7Zm9yKGxldCBvPTA7bzx0O28rKylzKz1lKmZlKG4qaSkscis9ZSxlKj0uNSxpKj0yO3JldHVybiBzL3IqMi0xfWNvbnN0IHZ0PXt9O2NsYXNzIGRlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJmcmVxc3ByZWFkIixkZWZhdWx0VmFsdWU6LjE4LG1pbjowfSx7bmFtZToicG9zaXRpb24iLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfSx7bmFtZToid2FycCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4OjF9LHtuYW1lOiJ3YXJwTW9kZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJ2b2ljZXMiLGRlZmF1bHRWYWx1ZToxLG1pbjoxfSx7bmFtZToicGFuc3ByZWFkIixkZWZhdWx0VmFsdWU6LjcsbWluOjAsbWF4OjF9LHtuYW1lOiJwaGFzZXJhbmQiLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfV19Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5mcmFtZUxlbj0wLHRoaXMubnVtRnJhbWVzPTAsdGhpcy5waGFzZT1bXSx0aGlzLmludlNSPTEvc2FtcGxlUmF0ZSx0aGlzLnBvcnQub25tZXNzYWdlPWU9Pntjb25zdHt0eXBlOnMscGF5bG9hZDpyfT1lLmRhdGF8fHt9O2lmKHM9PT0idGFibGUiKXtjb25zdCBpPXIua2V5O2lmKHRoaXMuZnJhbWVMZW49ci5mcmFtZUxlbiwhdnRbaV0pe2NvbnN0IG89W3IuZnJhbWVzXTtsZXQgYT1vWzBdO2ZvcihsZXQgdT0xO3U8MTt1Kyspe2NvbnN0IGM9YS5sZW5ndGg+PjEsaD1hLm1hcChmPT57Y29uc3QgcD1uZXcgRmxvYXQzMkFycmF5KGMpO2ZvcihsZXQgbD0wO2w8YztsKyspcFtsXT0oZlsyKmxdK2ZbMipsKzFdKS8yO3JldHVybiBwfSk7aWYoby5wdXNoKGgpLGE9aCxjPD0zMilicmVha312dFtpXT1vfXRoaXMudGFibGVzPXZ0W2ldLHRoaXMubnVtRnJhbWVzPXRoaXMudGFibGVzWzBdLmxlbmd0aH19fV9taXJyb3IodCl7cmV0dXJuIDEtTWF0aC5hYnMoMip0LTEpfV90b0JpdHModCxlPTIscz0xMil7Y29uc3Qgcj1zKyhlLXMpKnQ7cmV0dXJue2I6cixuOk1hdGgucm91bmQoTWF0aC5wb3coMixyKSl9fV93YXJwUGhhc2UodCxlLHMpe3N3aXRjaChzKXtjYXNlIGcuTk9ORTpyZXR1cm4gdDtjYXNlIGcuQVNZTTp7Y29uc3Qgcj0uMDErLjk5KmU7cmV0dXJuIHQ8cj8uNSp0L3I6LjUrLjUqKHQtcikvKDEtcil9Y2FzZSBnLk1JUlJPUjpyZXR1cm4gdGhpcy5fbWlycm9yKHRoaXMuX3dhcnBQaGFzZSh0LGUsZy5BU1lNKSk7Y2FzZSBnLkJFTkRQOnJldHVybiBNYXRoLnBvdyh0LDErMyplKTtjYXNlIGcuQkVORE06cmV0dXJuIE1hdGgucG93KHQsMS8oMSszKmUpKTtjYXNlIGcuQkVORE1QOnJldHVybiBlPC41P3RoaXMuX3dhcnBQaGFzZSh0LDEtMiplLDMpOnRoaXMuX3dhcnBQaGFzZSh0LDIqZS0xLDIpO2Nhc2UgZy5TWU5DOntjb25zdCByPU1hdGgucG93KDE2LGUqZSk7cmV0dXJuIHQqciUxfWNhc2UgZy5RVUFOVDp7Y29uc3R7bjpyfT10aGlzLl90b0JpdHMoZSk7cmV0dXJuIGZ0KHQqcikvcn1jYXNlIGcuRk9MRDp7Y29uc3QgaT0xK01hdGgubWF4KDEsTWF0aC5yb3VuZCg3KmUpKTtyZXR1cm4gTWF0aC5hYnMoVyhpKnQpLS41KSoyfWNhc2UgZy5QV006e2NvbnN0IHI9TSguNSsuNDkqKDIqZS0xKSwwLDEpO3JldHVybiB0PHI/dC9yKi41Oi41Kyh0LXIpLygxLXIpKi41fWNhc2UgZy5PUkJJVDp7Y29uc3Qgcj0uNSplO3JldHVybiBXKHQrcipNYXRoLnNpbigyKk1hdGguUEkqMyp0KSl9Y2FzZSBnLlNQSU46e2NvbnN0IHI9LjUqZSx7bjppfT10aGlzLl90b0JpdHMoZSwxLDYpO3JldHVybiBXKHQrcipNYXRoLnNpbigyKk1hdGguUEkqaSp0KSl9Y2FzZSBnLkNIQU9TOntjb25zdCBpPSgzLjcrLjMqZSkqdCooMS10KTtyZXR1cm4gTSgoMS1lKSp0K2UqaSwwLDEpfWNhc2UgZy5QUklNRVM6e2NvbnN0IHI9bz0+e2lmKG88MilyZXR1cm4hMTtpZihvJTI9PT0wKXJldHVybiBvPT09Mjtmb3IobGV0IGE9MzthKmE8PW87YSs9MilpZihvJWE9PT0wKXJldHVybiExO3JldHVybiEwfTtsZXR7bjppfT10aGlzLl90b0JpdHMoZSwzKTtmb3IoOyFyKGkpOylpKys7cmV0dXJuIGZ0KHQqaSkvaX1jYXNlIGcuQklOQVJZOntsZXR7YjpyfT10aGlzLl90b0JpdHMoZSwzKTtyPU1hdGgucm91bmQocik7Y29uc3QgaT0xPDxyLG89ZnQodCppKTtyZXR1cm4gbGUobyxyKS9pfWNhc2UgZy5NT0RVTEFSOntjb25zdHtuOnJ9PXRoaXMuX3RvQml0cyhlKSxpPS41KmUsbz1XKHQqcikvcjtyZXR1cm4gVyh0K2kqbyl9Y2FzZSBnLkJST1dOSUFOOntjb25zdCByPS4yNSplKnBlKDY0KnQsNCk7cmV0dXJuIFcodCtyKX1jYXNlIGcuUkVDSVBST0NBTDp7Y29uc3Qgcj0yKzQqZSxpPXQqcixvPXQrKDEtdCkqcixhPW8+MWUtMTI/aS9vOjA7cmV0dXJuIE0oYSwwLDEpfWNhc2UgZy5XT1JNSE9MRTp7Y29uc3Qgcj1NKC44KmUsMCwxKSxpPS41KigxLXIpLG89LjUqKDErcik7cmV0dXJuIHQ8aT90L2kqLjU6dD5vPy41KigxKyh0LW8pLygxLW8pKTouNX1jYXNlIGcuTE9HSVNUSUM6e2xldCByPXQ7Y29uc3QgaT0zLjYrLjQqZSxvPTErTWF0aC5yb3VuZCgyKmUpO2ZvcihsZXQgYT0wO2E8bzthKyspcj1pKnIqKDEtcik7cmV0dXJuIE0ociwwLDEpfWNhc2UgZy5TSUdNT0lEOntjb25zdCByPTErMTAqZSxpPXQtLjUsbz0xLygxK01hdGguZXhwKC1yKmkpKSxhPTEvKDErTWF0aC5leHAoLjUqcikpLHU9MS8oMStNYXRoLmV4cCgtLjUqcikpO3JldHVybihvLWEpLyh1LWEpfWNhc2UgZy5GUkFDVEFMOntjb25zdCByPS41Kk1hdGguc2luKDIqTWF0aC5QSSp0KSplO3JldHVybiBXKHQrcil9Y2FzZSBnLkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQsZSl7Y29uc3Qgcz10Lmxlbmd0aCxyPWUqcztsZXQgaT1yfDA7aT49cyYmKGk9MCk7Y29uc3Qgbz1yLWksYT10W2ldO2xldCB1PWkrMTt1Pj1zJiYodT0wKTtjb25zdCBjPXRbdV07cmV0dXJuIGErKGMtYSkqb31fY2hvb3NlTWlwKHQpe3ZhciByO2NvbnN0IGU9TSh0LDFlLTYsNjQpO2xldCBzPTA7Zm9yKDtzKzE8KCgocj10aGlzLnRhYmxlcyk9PW51bGw/dm9pZCAwOnIubGVuZ3RoKXx8MSkmJmU8dGhpcy50YWJsZXNbc11bMF0ubGVuZ3RoLzg7KXMrKztyZXR1cm4gc31wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7Y29uc3Qgcj1lWzBdWzBdLGk9ZVswXVsxXXx8ZVswXVswXTtpZighdGhpcy50YWJsZXMpcmV0dXJuIHIuZmlsbCgwKSxpIT09ciYmaS5zZXQociksITA7Zm9yKGxldCBvPTA7bzxyLmxlbmd0aDtvKyspe2NvbnN0IGE9UyhzLmRldHVuZSxvKSx1PVMocy5mcmVxc3ByZWFkLG8pLGg9TShTKHMucG9zaXRpb24sbyksMCwxKSoodGhpcy5udW1GcmFtZXMtMSksZj1ofDAscD1oLWYsbD1NKFMocy53YXJwLG8pLDAsMSksbT1TKHMud2FycE1vZGUsbyksZD1TKHMudm9pY2VzLG8pLGI9TShTKHMucGhhc2VyYW5kLG8pLDAsMSksST1kPjE/TShTKHMucGFuc3ByZWFkLG8pLDAsMSk6MCx2PU1hdGguc3FydCguNS0uNSpJKSxQPU1hdGguc3FydCguNSsuNSpJKTtsZXQgdz1TKHMuZnJlcXVlbmN5LG8pO3c9SCh3LGEvMTAwKTtjb25zdCBUPTEvTWF0aC5zcXJ0KGQpO2ZvcihsZXQgQj0wO0I8ZDtCKyspe2NvbnN0IEE9KEImMSk9PTE7bGV0IHk9dixPPVA7QSYmKHk9UCxPPXYpO2NvbnN0IHg9SCh3LE50KGQsdSxCKSkqdGhpcy5pbnZTUixFPXRoaXMuX2Nob29zZU1pcCh4KSxOPXRoaXMudGFibGVzW0VdO3RoaXMucGhhc2VbQl09dGhpcy5waGFzZVtCXT8/TWF0aC5yYW5kb20oKSpiO2NvbnN0IEY9dGhpcy5fd2FycFBoYXNlKHRoaXMucGhhc2VbQl0sbCxtKSxWPXRoaXMuX3NhbXBsZUZyYW1lKE5bZl0sRiksaz10aGlzLl9zYW1wbGVGcmFtZShOW01hdGgubWluKHRoaXMubnVtRnJhbWVzLTEsZisxKV0sRik7bGV0IFI9Visoay1WKSpwO209PT1nLkZMSVAmJnRoaXMucGhhc2VbQl08bCYmKFI9LVIpLHJbb10rPVIqeSpULGlbb10rPVIqTypULHRoaXMucGhhc2VbQl09RnQodGhpcy5waGFzZVtCXSt4KX19cmV0dXJuITB9fXJldHVybiByZWdpc3RlclByb2Nlc3Nvcigid2F2ZXRhYmxlLW9zY2lsbGF0b3ItcHJvY2Vzc29yIixkZSksQy5XYXJwTW9kZT1nLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxDfSh7fSk7Cg==";let Ro;const Zy=()=>(Ro=new AudioContext,Ro),Xt=()=>Ro||Zy();function Tv(){return Xt().currentTime}let ho={};function wy(t,e){const n=Xt();if(ho[t])return ho[t];const r=2*n.sampleRate,s=n.createBuffer(1,r,n.sampleRate),i=s.getChannelData(0);let a=0,o,u,c,l,d,m,f;o=u=c=l=d=m=f=0;for(let g=0;g<r;g++)if(t==="white")i[g]=Math.random()*2-1;else if(t==="brown"){let b=Math.random()*2-1;i[g]=(a+.02*b)/1.02,a=i[g]}else if(t==="pink"){let b=Math.random()*2-1;o=.99886*o+b*.0555179,u=.99332*u+b*.0750759,c=.969*c+b*.153852,l=.8665*l+b*.3104856,d=.55*d+b*.5329522,m=-.7616*m-b*.016898,i[g]=o+u+c+l+d+m+f+b*.5362,i[g]*=.11,f=b*.115926}else if(t==="crackle"){const b=e*.01;Math.random()<b?i[g]=Math.random()*2-1:i[g]=0}return t!=="crackle"&&(ho[t]=s),s}function To(t="white",e,n=.02){const r=Xt().createBufferSource();return r.buffer=wy(t,n),r.loop=!0,r.start(e),{node:r,stop:s=>r.stop(s)}}function zv(t,e,n){const r=To("pink",n);return{node:Gy(t,r.node,e),stop:s=>r==null?void 0:r.stop(s)}}const hu=["pink","white","brown","crackle"];function Ie(t){const e=Xt().createGain();return e.gain.value=t,e}function Ni(t,e,n){const r=Ie(n);return t.connect(r),r.connect(e),r}const W1=(t,e,n,r)=>r-n===0?0:(e-t)/(r-n);function Ke(t,e,n,r){const s=new AudioWorkletNode(t,e,r);return Object.entries(n).forEach(([i,a])=>{a!==void 0&&(s.parameters.get(i).value=a)}),s}const sn=(t,e,n,r,s,i,a,o,u,c="exponential")=>{e=Un(e),n=Un(n),r=Un(r),s=Un(s);const l=c==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";c==="exponential"&&(i=i===0?.001:i,a=a===0?.001:a);const d=a-i,m=a,f=i+r*d,g=u-o,b=x=>{let D;if(e>x){let G=W1(i,m,0,e);D=x*G+(i>m?i:0)}else D=(x-e)*W1(m,f,0,n)+m;return c==="exponential"&&(D=D||.001),D};t.setValueAtTime(i,o),e>g?t[l](b(g),u):e+n>g?(t[l](b(e),o+e),t[l](b(g),u)):(t[l](b(e),o+e),t[l](b(e+n),o+e+n),t.setValueAtTime(f,u)),t[l](i,u+s)};function Iv(t){return typeof t=="number"?t%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[t]??0}function ni(t,e,n,r={}){const{shape:s=0,...i}=r,{dcoffset:a=-.5,depth:o=1}=r,u={frequency:1,depth:o,skew:.5,phaseoffset:0,time:e,begin:e,end:n,shape:Iv(s),dcoffset:a,min:a*o,max:a*o+o,curve:1,...i};return Ke(t,"lfo-processor",u)}function Xy(t,e,n,r,s,i){const a={threshold:e??-3,ratio:n??10,knee:r??10,attack:s??.005,release:i??.05};return new DynamicsCompressorNode(t,a)}const an=(t,e="linear",n)=>{const[r,s,i,a]=t;if(r==null&&s==null&&i==null&&a==null)return n??[.001,.001,1,.01];const o=i??(r!=null&&s==null||r==null&&s==null?1:.001);return[Math.max(r??0,.001),Math.max(s??0,.001),Math.min(o,1),Math.max(a??0,.01)]};function zo(t,e,n,r,s,i){let{amount:a,offset:o,defaultAmount:u=1,curve:c="linear",values:l,holdEnd:d,defaultValues:m}=s;a==null&&(a=l.some(Z=>Z!=null)?u:0);const f=o??0,g=a+f;if(Math.abs(g-f)){const[Z,A,V,E]=an(l,c,m);sn(e,Z,A,V,E,f,g,n,d,c)}let b,{defaultDepth:x=1,depth:D,dcoffset:G,...k}=i;return D==null&&(D=Object.values(k).some(Z=>Z!=null)?x:0),D&&(b=ni(t,n,r,{depth:D,dcoffset:G,...k}),b.connect(e)),{lfo:b,disconnect:()=>b==null?void 0:b.disconnect()}}function Li(t,e,n,r,s,i,a,o,u,c,l,d,m,f){const g="exponential",[b,x,D,G]=an([s,i,a,o],g,[.005,.14,0,.1]);let k,Z;if(m==="ladder"?(k=Ke(t,"ladder-processor",{frequency:n,q:r,drive:f}),Z=k.parameters.get("frequency")):(k=t.createBiquadFilter(),k.type=e,k.Q.value=r,k.frequency.value=n,Z=k.frequency),(s??i??a??o??u)!==void 0){u=Un(u,1,!0),d=Un(d,0,!0);const A=Math.abs(u),V=A*d;let E=dr(2**-V*n,0,2e4),B=dr(2**(A-V)*n,0,2e4);return u<0&&([E,B]=[B,E]),sn(Z,b,x,D,G,E,B,c,l,g),k}return k}let R1=t=>t<.5?1:1-(t-.5)/.5;function Gy(t,e,n=0){const r=Xt();if(!n)return t;let s=r.createGain(),i=r.createGain();t.connect(s),e.connect(i),s.gain.value=R1(n),i.gain.value=R1(1-n);let a=r.createGain();return s.connect(a),i.connect(a),a}let Nv=["linear","exponential"];function as(t,e,n,r){if((e.pattack??e.pdecay??e.psustain??e.prelease??e.penv)===void 0)return;const s=Un(e.penv,1,!0),i=Nv[e.pcurve??0];let[a,o,u,c]=an([e.pattack,e.pdecay,e.psustain,e.prelease],i,[.2,.001,1,.001]),l=e.panchor??u;const d=s*100,m=0-d*l,f=d-d*l;sn(t,a,o,u,c,m,f,n,r,i)}function os(t,e,n){const{vibmod:r=.5,vib:s}=e;let i;if(s>0){i=Xt().createOscillator(),i.frequency.value=s;const a=Xt().createGain();return a.gain.value=r*100,i.connect(a),a.connect(t),i.start(n),i}}function qr(t,e,n,r){const s=new ConstantSourceNode(t),i=Ie(0);return i.connect(t.destination),s.connect(i),s.onended=()=>{try{i.disconnect()}catch{}try{s.disconnect()}catch{}e()},s.start(n),s.stop(r),s}const Kv=(t,e=1,n="sine")=>{const r=Xt();let s;hu.includes(n)?(s=r.createBufferSource(),s.buffer=wy(n,2),s.loop=!0):(s=r.createOscillator(),s.type=n,s.frequency.value=t),s.start();const i=new GainNode(r,{gain:e});return s.connect(i),{node:i,stop:a=>s.stop(a)}},Yv=(t,e,n,r="sine")=>{const s=t.value*e,i=s*n;return Kv(s,i,r)};function Hs(t,e,n){const{fmh:r=1,fmi:s,fmenv:i="exp",fmattack:a,fmdecay:o,fmsustain:u,fmrelease:c,fmvelocity:l,fmwave:d="sine",duration:m}=e;let f,g=()=>{};if(s){const b=Xt().createGain(),x=Yv(t,r,s,d);if(f=x.node,g=x.stop,![a,o,u,c,l].some(D=>D!==void 0))f.connect(t);else{const[D,G,k,Z]=an([a,o,u,c]),A=n+m;sn(b.gain,D,G,k,Z,0,1,n,A,i==="exp"?"exponential":"linear"),f.connect(b),b.connect(t)}}return{stop:g}}const Sy=t=>t/(1+t),_v=(t,e)=>(t%e+e)%e,Hv=(t,e)=>(1+e)*t/(1+e*Math.abs(t)),$r=(t,e)=>Math.tanh(t*(1+e)),jv=(t,e)=>dr((1+e)*t,-1,1),Ey=(t,e)=>{let n=(1+.5*e)*t;const r=_v(n+1,4);return 1-Math.abs(r-2)},Jv=(t,e)=>Math.sin(Math.PI/2*Ey(t,e)),Ov=(t,e)=>{const n=Sy(Math.log1p(e)),r=(t-n/3*t*t*t)/(1-n/3);return $r(r,e)},Vy=(t,e,n=!1)=>{const r=1+2*e,s=.07*Sy(Math.log1p(e)),i=$r(t+s,2*e),a=$r(n?s:-t+s,2*e),o=i-a,u=1/Math.cosh(r*s),c=u*u,l=Math.max(1e-8,(n?1:2)*r*c);return $r(o/l,e)},Uv=(t,e)=>Vy(t,e,!0),Qv=(t,e)=>{const n=10*Math.log1p(e);let r=1,s=t,i,a=0;for(let o=1;o<64;o++){if(o<2){a+=o==0?r:s;continue}i=2*t*r-s,s=r,r=i,o%2===0&&(a+=Math.min(1.3*n/o,2)*i)}return $r(a,n/20)},pu={scurve:Hv,soft:$r,hard:jv,cubic:Ov,diode:Vy,asym:Uv,fold:Ey,sinefold:Jv,chebyshev:Qv},Fs=Object.freeze(Object.keys(pu)),qv=t=>{let e=t;typeof t=="string"&&(e=Fs.indexOf(t),e===-1&&(ce(`[superdough] Could not find waveshaping algorithm ${t}.
        Available options are ${Fs.join(", ")}.
        Defaulting to ${Fs[0]}.`),e=0));const n=Fs[e%Fs.length];return pu[n]},ky=(t,e,n)=>Ke(Xt(),"distort-processor",{distort:t,postgain:e},{processorOptions:{algorithm:n}}),xr=(t,e=36)=>{let{note:n,freq:r}=t;return n=n||e,typeof n=="string"&&(n=ea(n)),!r&&typeof n=="number"&&(r=Ay(n)),Number(r)},Ur=t=>{var e;t!=null&&(t.disconnect(),(e=t.parameters.get("end"))==null||e.setValueAtTime(0,0))},du={},po={},$v=t=>du[t];function tx(t,e){var n=1024;if(t<n)return t+" B";var r=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],s=-1;do t/=n,++s;while(t>=n);return t.toFixed(1)+" "+r[s]}function By(t,e){const{speed:n=1}=t,{transpose:r,url:s,index:i,midi:a,label:o}=Fy(t,e);let u=Math.abs(n)*Math.pow(2,r/12);return{transpose:r,url:s,index:i,midi:a,label:o,playbackRate:u}}const Ly=async(t,e,n)=>{let{url:r,label:s,playbackRate:i}=By(t,e);n&&(r=await n(r));const a=Xt(),o=await mu(r,a,s);return t.unit==="c"&&(i=i*o.duration),{buffer:o,playbackRate:i}},Wy=async(t,e,n)=>{let{buffer:r,playbackRate:s}=await Ly(t,e,n);t.speed<0&&(r=Ry(r));const i=Xt().createBufferSource();i.buffer=r,i.playbackRate.value=s;const{loopBegin:a=0,loopEnd:o=1,begin:u=0,end:c=1}=t,l=u*i.buffer.duration;t.loop&&(i.loop=!0,i.loopStart=a*i.buffer.duration-l,i.loopEnd=o*i.buffer.duration-l);const d=i.buffer.duration/i.playbackRate.value,m=(c-u)*d;return{bufferSource:i,offset:l,bufferDuration:d,sliceDuration:m}},mu=(t,e,n,r=0)=>{const s=n?`sound "${n}:${r}"`:"sample";if(t=t.replace("#","%23"),!po[t]){ce(`[sampler] load ${s}..`,"load-sample",{url:t});const i=Date.now();po[t]=fetch(t).then(a=>a.arrayBuffer()).then(async a=>{const o=Date.now()-i,u=tx(a.byteLength);ce(`[sampler] load ${s}... done! loaded ${u} in ${o}ms`,"loaded-sample",{url:t});const c=await e.decodeAudioData(a);return du[t]=c,c})}return po[t]};function Ry(t){const e=Xt(),n=e.createBuffer(t.numberOfChannels,t.length,e.sampleRate);for(let r=0;r<t.numberOfChannels;r++)n.copyToChannel(t.getChannelData(r).slice().reverse(),r,r);return n}const ex=t=>du[t];function Ty(t){if(t.startsWith("bubo:")){const[e,n]=t.split(":");t=`github:Bubobubobubobubo/dough-${n}`}return t}function zy(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let n=t.slice(7);n=n.endsWith("/")?n.slice(0,-1):n;let r=n.split("/"),s=r[0],i=r.length>=2?r[1]:"samples",a=r.length>=3?r[2]:"main",o=r.slice(3);return o.push(e||""),o=o.join("/"),`https://raw.githubusercontent.com/${s}/${i}/${a}/${o}`}const Iy=(t,e,n=t._base||"")=>Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&(s=[s]),typeof s!="object")throw new Error("wrong sample map format for "+r);n=s._base||n,n=Ty(n),n.startsWith("github:")&&(n=zy(n,""));const i=a=>n+a;Array.isArray(s)?s=s.map(i):s=Object.fromEntries(Object.entries(s).map(([a,o])=>[a,(typeof o=="string"?[o]:o).map(i)])),e(r,s)});let Ny={};function nx(t,e){Ny[t]=e}function rx(t){const e=Object.entries(Ny).find(([n])=>t.startsWith(n));if(e)return e[1]}async function sx(t){const e=rx(t);if(e)return e(t);if(t=Ty(t),t.startsWith("github:")&&(t=zy(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432"),t.startsWith("shabda:")){let[s,i]=t.split("shabda:");t=`https://shabda.ndre.gr/${i}.json?strudel=1`}if(t.startsWith("shabda/speech")){let[s,i]=t.split("shabda/speech");i=i.startsWith("/")?i.substring(1):i;let[a,o]=i.split(":"),u="f",c="en-GB";a&&([c,u]=a.split("/")),t=`https://shabda.ndre.gr/speech/${o}.json?gender=${u}&language=${c}&strudel=1'`}if(typeof fetch!="function")return;const n=t.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const r=await fetch(t).then(s=>s.json()).catch(s=>{throw console.error(s),new Error(`error loading "${t}"`)});return[r,r._base||n]}const Ky=async(t,e=t._base||"",n={})=>{if(typeof t=="string"){const[i,a]=await sx(t);return Ky(i,e||a,n)}const{prebake:r,tag:s}=n;Iy(t,(i,a)=>{_y(i,a,{baseUrl:e,prebake:r,tag:s})},e)},T1=[];async function Yy(t,e,n,r,s){let{s:i,nudge:a=0,cut:o,loop:u,clip:c=void 0,n:l=0,speed:d=1,duration:m}=e;if(d===0)return;const f=Xt();let[g,b,x,D]=an([e.attack,e.decay,e.sustain,e.release]);const{bufferSource:G,sliceDuration:k,offset:Z}=await Wy(e,r,s);if(f.currentTime>t){ce(`[sampler] still loading sound "${i}:${l}"`,"highlight");return}if(!G){ce(`[sampler] could not load "${i}:${l}"`,"error");return}let A=os(G.detune,e,t);const V=t+a;G.start(V,Z);const E=f.createGain(),B=G.connect(E);c==null&&u==null&&e.release==null&&(m=k);let K=t+m;sn(B.gain,g,b,x,D,0,1,t,K,"linear"),as(G.detune,e,t,K);const R=f.createGain();B.connect(R),G.onended=function(){G.disconnect(),A==null||A.stop(),B.disconnect(),R.disconnect(),n()};let j=K+D+.01;G.stop(j);const W={node:R,bufferSource:G,stop:_=>{G.stop(_)}};if(o!==void 0){const _=T1[o];_&&(_.node.gain.setValueAtTime(1,V),_.node.gain.linearRampToValueAtTime(0,V+.01)),T1[o]=W}return W}function ix(t,e,n){Vn(t,(r,s,i)=>Yy(r,s,i,e),{type:"sample",samples:e,...n})}function _y(t,e,n){t.startsWith("wt_")?Mu(t,e,n):ix(t,e,n)}let jr=(t,e)=>t!==void 0&&t!==e,ax=class{constructor(e){Re(this,"reverbNode");Re(this,"delayNode");Re(this,"output");Re(this,"summingNode");Re(this,"djfNode");Re(this,"audioContext");this.audioContext=e,this.output=new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode=new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode.connect(this.output)}disconnect(){var e,n;this.output.disconnect(),this.summingNode.disconnect(),(e=this.delayNode)==null||e.disconnect(),(n=this.reverbNode)==null||n.disconnect()}getDjf(e,n=0){this.djfNode==null&&(this.djfNode=Ke(this.audioContext,"djf-processor",{value:e}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(e,n)}getDelay(e=0,n=.5,r){var s,i;return n=dr(n,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,e,n),this.delayNode.connect(this.summingNode),(i=(s=this.delayNode).start)==null||i.call(s,r)),this.delayNode.delayTime.value!==e&&this.delayNode.delayTime.setValueAtTime(e,r),this.delayNode.feedback.value!==n&&this.delayNode.feedback.setValueAtTime(n,r),this.delayNode}getReverb(e,n,r,s,i,a,o){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(e,n,r,s,i,a,o),this.reverbNode.connect(this.summingNode)),(jr(e,this.reverbNode.duration)||jr(n,this.reverbNode.fade)||jr(r,this.reverbNode.lp)||jr(s,this.reverbNode.dim)||jr(a,this.reverbNode.irspeed)||jr(o,this.reverbNode.irbegin)||this.reverbNode.ir!==i)&&this.reverbNode.generate(e,n,r,s,i,a,o),this.reverbNode}sendReverb(e,n){Ni(e,this.reverbNode,n)}sendDelay(e,n){Ni(e,this.delayNode,n)}duck(e,n=0,r=.1,s=1){const i=n,a=Math.max(r,.002),o=this.output.gain;qr(this.audioContext,()=>{const u=this.audioContext.currentTime,c=o.value;o.cancelScheduledValues(u),o.setValueAtTime(c,u);const l=Math.max(e,u),d=dr(1-Math.sqrt(s),.01,c);o.exponentialRampToValueAtTime(d,l+i),o.exponentialRampToValueAtTime(1,l+i+a)},0,e-.01)}connectToOutput(e){e.connect(this.summingNode)}};class ox{constructor(e){Re(this,"channelMerger");Re(this,"destinationGain");Re(this,"connectToDestination",(e,n=[0,1])=>{const r=new StereoPannerNode(this.audioContext);e.connect(r);const s=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:r.channelCount});r.connect(s),n.forEach((i,a)=>{s.connect(this.channelMerger,a%r.channelCount,i%this.audioContext.destination.channelCount)})});this.audioContext=e,this.initializeAudio()}initializeAudio(){const e=this.audioContext,n=e.destination.maxChannelCount;this.audioContext.destination.channelCount=n,this.channelMerger=new ChannelMergerNode(e,{numberOfInputs:e.destination.channelCount}),this.destinationGain=new GainNode(e),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(e.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}}let ux=class{constructor(e){Re(this,"audioContext");Re(this,"output");Re(this,"nodes",{});this.audioContext=e,this.output=new ox(e)}reset(){Array.from(this.nodes).forEach(e=>{e.disconnect()}),this.nodes={},this.output.reset()}duck(e,n,r=0,s=.1,i=1){const a=[e].flat(),o=[r].flat(),u=[s].flat(),c=[i].flat();a.forEach((l,d)=>{const m=this.nodes[l];if(m==null){vy(new Error(`duck target orbit ${l} does not exist`),"superdough");return}const f=o[d]??o[0],g=Math.max(u[d]??u[0],.002),b=c[d]??c[0];m.duck(n,f,g,b)})}getOrbit(e,n){return this.nodes[e]==null&&(this.nodes[e]=new ax(this.audioContext),this.output.connectToDestination(this.nodes[e].output,n)),this.nodes[e]}};const fu=128,Io="System Standard";let Hy=fu;function jy(t){Hy=parseInt(t)??fu}let Jy=!1;function Oy(t){Jy=t==!0}const An=wv();function Vn(t,e,n={}){t=t.toLowerCase().replace(/\s+/g,"_"),An.setKey(t,{onTrigger:e,data:n})}let Uy=t=>t;function On(t){return Uy(t)}function cx(t){Uy=t}function No(t){for(const n in t)t[n.toLowerCase()]=t[n];const e=An.get();for(const n in e){const[r,s]=n.split("_");if(!s)continue;const i=t[r];if(i){if(typeof i=="string")e[`${i}_${s}`.toLowerCase()]=e[n];else if(Array.isArray(i))for(const a of i)e[`${a}_${s}`.toLowerCase()]=e[n]}}An.set({...e})}async function lx(t){const e=await(await fetch(t)).json();No(e)}async function hx(...t){switch(t.length){case 1:return typeof t[0]=="string"?lx(t[0]):No(t[0]);case 2:return No({[t[0]]:t[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+t.length)}}function px(t,e){if(ts(t)==null){ce("soundAlias: original sound not found");return}An.setKey(e,ts(t))}function ts(t){return typeof t!="string"?(console.warn(`getSound: expected string got "${t}". fall back to triangle`),An.get().triangle):An.get()[t.toLowerCase()]}const Qy=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let t=await navigator.mediaDevices.enumerateDevices();t=t.filter(n=>n.kind==="audiooutput"&&n.deviceId!=="default");const e=new Map;return e.set(Io,""),t.forEach(n=>{e.set(n.label,n.deviceId)}),e};let ri={s:"triangle",gain:.8,postgain:1,density:".03",ftype:"12db",fanchor:0,resonance:1,hresonance:1,bandq:1,channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const dx=Object.freeze({...ri});function mx(t,e){ri[t]=e}function fx(){ri={...dx}}let yu=new Map(Object.entries(ri));function bu(t,e){yu.set(t,e)}function re(t){return yu.get(t)}function yx(t){Object.keys(t).forEach(e=>{bu(e,t[e])})}function qy(){yu=new Map(Object.entries(ri))}function bx(t){qy(),t==="1.0"&&bu("fanchor",.5)}const gx=()=>An.set({});let $y=[];function tb(t){$y.push(t)}let mo;function Mx(){if(!mo){const t=Xt(),e=$y.concat([Rv]);mo=Promise.all(e.map(n=>t.audioWorklet.addModule(n)))}return mo}async function eb(t={}){const{disableWorklets:e=!1,maxPolyphony:n,audioDeviceName:r=Io,multiChannelOrbits:s=!1}=t;if(jy(n),Oy(s),typeof window>"u")return;const i=Xt();if(r!=null&&r!=Io)try{const a=(await Qy()).get(r),o=(a??"").length>0;i.sinkId!==a&&o&&await i.setSinkId(a),ce(`[superdough] Audio Device set to ${r}, it might take a few seconds before audio plays on all output channels`)}catch{ce("[superdough] failed to set audio interface","warning")}if(await i.resume(),e){ce("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await Mx(),ce("[superdough] AudioWorklets loaded")}catch(a){console.warn("could not load AudioWorklet effects",a)}ce("[superdough] ready")}let fo;async function Px(t){return fo||(fo=new Promise(e=>{document.addEventListener("click",async function n(){document.removeEventListener("click",n),await eb(t),e()})})),fo}let es;function nb(){return es==null&&(es=new ux(Xt())),es}function rb(t,e){nb().output.connectToDestination(t,e)}function Cx(t,e,n=1,r=.5,s=1e3,i=2e3){const a=Xt(),o=ni(a,t,e,{frequency:n,depth:i*2}),u=2;let c=0;const l=[];for(let d=0;d<u;d++){const m=a.createBiquadFilter();m.type="notch",m.gain.value=1,m.frequency.value=s+c,m.Q.value=2-Math.min(Math.max(r*2,0),1.9),o.connect(m.detune),c+=282,d>0&&l[d-1].connect(m),l.push(m)}return l[l.length-1]}function vx(t){t=t??0;const e=["12db","ladder","24db"];return typeof t=="number"?e[Math.floor(Dy(t,e.length))]:t}let ke={},Dr={};function sb(t,e=1024,n=.5){if(!ke[t]){const r=Xt().createAnalyser();r.fftSize=e,r.smoothingTimeConstant=n,ke[t]=r,Dr[t]=new Float32Array(ke[t].frequencyBinCount)}return ke[t].fftSize!==e&&(ke[t].fftSize=e,Dr[t]=new Float32Array(ke[t].frequencyBinCount)),ke[t]}function na(t="time",e=1){const n={time:()=>{var r;return(r=ke[e])==null?void 0:r.getFloatTimeDomainData(Dr[e])},frequency:()=>{var r;return(r=ke[e])==null?void 0:r.getFloatFrequencyData(Dr[e])}}[t];if(!n)throw new Error(`getAnalyzerData: ${t} not supported. use one of ${Object.keys(n).join(", ")}`);return n(),Dr[e]}function xx(){es==null||es.reset(),ke={},Dr={}}let Zs=new Map;function z1(t){return(Array.isArray(t)?t:[t]).map(e=>e-1)}const gu=async(t,e,n,r=.5,s=.5)=>{var pe,vt,de;const i=Xt(),a=nb();let{stretch:o}=t;if(o!=null&&(e=e-.04),typeof t!="object")throw new Error(`expected hap.value to be an object, but got "${t}". Hint: append .note() or .s() to the end`,"error");if(t.duration=n,e<i.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${e.toFixed(2)}, now: ${i.currentTime.toFixed(2)})`);return}let{tremolo:u,tremolosync:c,tremolodepth:l=1,tremoloskew:d,tremolophase:m=0,tremoloshape:f,s:g=re("s"),bank:b,source:x,gain:D=re("gain"),postgain:G=re("postgain"),density:k=re("density"),duckorbit:Z,duckonset:A,duckattack:V,duckdepth:E,djf:B,fanchor:K=re("fanchor"),drive:R=.69,release:j=0,cutoff:W,lpenv:_,lpattack:nt,lpdecay:ut,lpsustain:tt,lprelease:st,resonance:q=re("resonance"),hpenv:$,hcutoff:mt,hpattack:Lt,hpdecay:Y,hpsustain:St,hprelease:Kt,hresonance:ye=re("hresonance"),bpenv:Gt,bandf:Yt,bpattack:ct,bpdecay:xt,bpsustain:ae,bprelease:ee,bandq:Mt=re("bandq"),phaserrate:Ye,phaserdepth:Tt=re("phaserdepth"),phasersweep:We,phasercenter:oe,coarse:ne,crush:be,dry:Ge,shape:Ae,shapevol:De=re("shapevol"),distort:Se,distortvol:Jt=re("distortvol"),distorttype:Ee=re("distorttype"),pan:Pt,vowel:Vt,delay:et=re("delay"),delayfeedback:It=re("delayfeedback"),delaysync:kt=re("delaysync"),delaytime:dn,orbit:Gn=re("orbit"),room:Fe,roomfade:Sn,roomlp:Ue,roomdim:Ot,roomsize:Nn,ir:mn,irspeed:_t,irbegin:ue,i:_e=re("i"),velocity:Qe=re("velocity"),analyze:Kn,fft:Cr=re("fft"),compressor:ar,compressorRatio:h,compressorKnee:M,compressorAttack:y,compressorRelease:P}=t;dn=dn??Wv(kt,r);const F=z1(Jy&&Gn>0?[Gn*2-1,Gn*2]:re("channels")),L=t.channels!=null?z1(t.channels):F,z=a.getOrbit(Gn,L);Z!=null&&a.duck(Z,e,A,V,E),D=On(Un(D,1)),G=On(G),De=On(De),Jt=On(Jt),et=On(et),Qe=On(Qe),l=On(l),D*=Qe;const I=e+n,Q=I+j,ft=Math.round(Math.random()*1e6);for(let ht=0;ht<=Zs.size-Hy;ht++){const Nt=Zs.entries().next(),Ht=Nt.value[1],io=Nt.value[0],Pi=e+.25;(vt=(pe=Ht==null?void 0:Ht.node)==null?void 0:pe.gain)==null||vt.linearRampToValueAtTime(0,Pi),(de=Ht==null?void 0:Ht.stop)==null||de.call(Ht,Pi),Zs.delete(io)}let Wt=[];if(["-","~","_"].includes(g))return;b&&g&&(g=`${b}_${g}`,t.s=g);let ge;if(x)ge=x(e,t,n,r);else if(ts(g)){const{onTrigger:ht}=ts(g),Nt=await ht(e,t,()=>{Wt.forEach(Ht=>Ht==null?void 0:Ht.disconnect()),Zs.delete(ft)},r);Nt&&(ge=Nt.node,Zs.set(ft,Nt))}else throw new Error(`sound ${g} not found! Is it loaded?`);if(!ge)return;if(i.currentTime>e){ce("[webaudio] skip hap: still loading",i.currentTime-e);return}const Ft=[];Ft.push(ge),o!==void 0&&Ft.push(Ke(i,"phase-vocoder-processor",{pitchFactor:o})),Ft.push(Ie(D));const qe=vx(t.ftype);if(W!==void 0){let ht=()=>Li(i,"lowpass",W,q,nt,ut,tt,st,_,e,I,K,qe,R);Ft.push(ht()),qe==="24db"&&Ft.push(ht())}if(mt!==void 0){let ht=()=>Li(i,"highpass",mt,ye,Lt,Y,St,Kt,$,e,I,K);Ft.push(ht()),qe==="24db"&&Ft.push(ht())}if(Yt!==void 0){let ht=()=>Li(i,"bandpass",Yt,Mt,ct,xt,ae,ee,Gt,e,I,K);Ft.push(ht()),qe==="24db"&&Ft.push(ht())}if(Vt!==void 0){const ht=i.createVowelFilter(Vt);Ft.push(ht)}if(ne!==void 0&&Ft.push(Ke(i,"coarse-processor",{coarse:ne})),be!==void 0&&Ft.push(Ke(i,"crush-processor",{crush:be})),Ae!==void 0&&Ft.push(Ke(i,"shape-processor",{shape:Ae,postgain:De})),Se!==void 0&&Ft.push(ky(Se,Jt,Ee)),c!=null&&(u=r*c),t.wtPosSynced!=null&&(t.wtPosRate/=r),t.wtWarpSynced!=null&&(t.wtWarpRate/=r),u!==void 0){const ht=Math.max(1-l,0),Nt=new GainNode(i,{gain:ht}),Ht=s/r;ni(i,e,Q,{skew:d??(f!=null?.5:1),frequency:u,depth:l,time:Ht,dcoffset:0,shape:f,phaseoffset:m,min:0,max:1,curve:1.5}).connect(Nt.gain),Ft.push(Nt)}if(ar!==void 0&&Ft.push(Xy(i,ar,h,M,y,P)),Pt!==void 0){const ht=i.createStereoPanner();ht.pan.value=2*Pt-1,Ft.push(ht)}if(Ye!==void 0&&Tt>0){const ht=Cx(e,Q,Ye,Tt,oe,We);Ft.push(ht)}const He=new GainNode(i,{gain:G});if(Ft.push(He),et>0&&dn>0&&It>0&&(z.getDelay(dn,It,e),z.sendDelay(He,et)),Fe>0){let ht;if(mn!==void 0){let Nt,Ht=ts(mn);Array.isArray(Ht)?Nt=Ht.data.samples[_e%Ht.data.samples.length]:typeof Ht=="object"&&(Nt=Object.values(Ht.data.samples).flat()[_e%Object.values(Ht.data.samples).length]),ht=await mu(Nt,i,mn,0)}z.getReverb(Nn,Sn,Ue,Ot,ht,_t,ue),z.sendReverb(He,Fe)}if(B!=null&&z.getDjf(B,e),Kn){const ht=sb(Kn,2**(Cr+5)),Nt=Ni(He,ht,1);Wt.push(Nt)}if(Ge!=null){Ge=On(Ge);const ht=new GainNode(i,{gain:Ge});Ft.push(ht),z.connectToOutput(ht)}else z.connectToOutput(He);Ft.slice(1).reduce((ht,Nt)=>ht.connect(Nt),Ft[0]),Wt=Wt.concat(Ft)},Ax=(t,e,n,r)=>{gu(e,t-n,e.duration/r,r)},Dx=["triangle","square","sawtooth","sine"],Fx=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function Zx(t,e){const n=t,r=new Float32Array(e);for(let s=0;s<e;s++){const i=s*2/e-1;r[s]=Math.tanh(i*n)}return r}function wx(){[...Dx].forEach(t=>{Vn(t,(e,n,r)=>{const[s,i,a,o]=an([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u=ab(t,e,n),{node:c,stop:l,triggerRelease:d}=u;const m=Ie(.3),{duration:f}=n;c.onended=()=>{c.disconnect(),m.disconnect(),r()};const g=Ie(1);let b=c.connect(m).connect(g);const x=e+f;sn(b.gain,s,i,a,o,0,1,e,x,"linear");const D=x+o+.01;return d==null||d(D),l(D),{node:b,stop:G=>{l(G)}}},{type:"synth",prebake:!0})}),Vn("sbd",(t,e,n)=>{const{duration:r,decay:s=.5,pdecay:i=.5,penv:a=36,clip:o}=e,u=Xt(),c=.02,l=1.2,d=.025,m=1,f=u.createOscillator();f.type="triangle",f.frequency.value=xr(e,29),f.detune.setValueAtTime(a*100,0),f.detune.setValueAtTime(a*100,t),f.detune.exponentialRampToValueAtTime(.001,t+i);const g=Ie(1);g.gain.setValueAtTime(1,t+c),g.gain.exponentialRampToValueAtTime(.001,t+c+s),f.start(t);const b=To("brown",t,2),x=Ie(1);x.gain.setValueAtTime(l,t),x.gain.exponentialRampToValueAtTime(.001,t+d);const D=new WaveShaperNode(u);D.curve=Zx(2,u.sampleRate);const G=Ie(m);f.onended=()=>{f.disconnect(),g.disconnect(),D.disconnect(),b.node.disconnect(),x.disconnect(),G.disconnect(),n()};const k=f.connect(D).connect(g).connect(G);b.node.connect(x).connect(G);let Z=t+s+.01;return o!=null&&(Z=Math.min(t+o*r,Z)),G.gain.setValueAtTime(m,Z-.01),G.gain.linearRampToValueAtTime(0,Z),f.stop(Z),b.stop(Z),{node:k,stop:A=>{f.stop(A)}}},{type:"synth",prebake:!0}),Vn("supersaw",(t,e,n)=>{const r=Xt();let{duration:s,n:i,unison:a=5,spread:o=.6,detune:u}=e;u=u??i??.18;const c=xr(e),[l,d,m,f]=an([e.attack,e.decay,e.sustain,e.release],"linear",[.001,.05,.6,.01]),g=t+s,b=g+f+.01,x=dr(a,1,100);let D=x>1?dr(o,0,1):0,G=Ke(r,"supersaw-oscillator",{frequency:c,begin:t,end:b,freqspread:u,voices:x,panspread:D},{outputChannelCount:[2]});const k=1/Math.sqrt(x);as(G.parameters.get("detune"),e,t,g);const Z=os(G.parameters.get("detune"),e,t),A=Hs(G.parameters.get("frequency"),e,t);let V=Ie(1);V=G.connect(V),sn(V.gain,l,d,m,f,0,.3*k,t,g,"linear");let E=qr(r,()=>{Ur(G),V.disconnect(),n(),A==null||A.stop(),Z==null||Z.stop()},t,b);return{node:V,stop:B=>{E.stop(B)}}},{prebake:!0,type:"synth"}),Vn("bytebeat",(t,e,n)=>{const r=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:s=0}=e,i=xr(e),{byteBeatExpression:a=r[s%r.length],byteBeatStartTime:o}=e,u=Xt();let{duration:c}=e;const[l,d,m,f]=an([e.attack,e.decay,e.sustain,e.release],"linear",[.001,.05,.6,.01]),g=t+c,b=g+f+.01;let x=Ke(u,"byte-beat-processor",{frequency:i,begin:t,end:b},{outputChannelCount:[2]});x.port.postMessage({codeText:a,byteBeatStartTime:o,frequency:i});let D=Ie(1);D=x.connect(D),sn(D.gain,l,d,m,f,0,1,t,g,"linear");let G=qr(u,()=>{Ur(x),D.disconnect(),n()},t,b);return{node:D,stop:k=>{G.stop(k)}}},{prebake:!0,type:"synth"}),Vn("pulse",(t,e,n)=>{const r=Xt();let{pwrate:s,pwsweep:i}=e;i==null&&(s!=null?i=.3:i=0),s==null&&i!=null&&(s=1);let{duration:a,pw:o=.5}=e;const u=xr(e),[c,l,d,m]=an([e.attack,e.decay,e.sustain,e.release],"linear",[.001,.05,.6,.01]),f=t+a,g=f+m+.01;let b=Ke(r,"pulse-oscillator",{frequency:u,begin:t,end:g,pulsewidth:o},{outputChannelCount:[2]});as(b.parameters.get("detune"),e,t,f);const x=os(b.parameters.get("detune"),e,t),D=Hs(b.parameters.get("frequency"),e,t);let G=Ie(1);G=b.connect(G),sn(G.gain,c,l,d,m,0,1,t,f,"linear");let k;i!=0&&(k=ni(r,t,g,{frequency:s,depth:i}),k.connect(b.parameters.get("pulsewidth")));let Z=qr(r,()=>{Ur(b),Ur(k),G.disconnect(),n(),D==null||D.stop(),x==null||x.stop()},t,g);return{node:G,stop:A=>{Z.stop(A)}}},{prebake:!0,type:"synth"}),[...hu].forEach(t=>{Vn(t,(e,n,r)=>{const[s,i,a,o]=an([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u,{density:c}=n;u=To(t,e,c);let{node:l,stop:d,triggerRelease:m}=u;const f=Ie(.3),{duration:g}=n;l.onended=()=>{l.disconnect(),f.disconnect(),r()};const b=Ie(1);let x=l.connect(f).connect(b);const D=e+g;sn(x.gain,s,i,a,o,0,1,e,D,"linear");const G=D+o+.01;return m==null||m(G),d(G),{node:x,stop:k=>{d(k)}}},{type:"synth",prebake:!0})}),Fx.forEach(([t,e])=>An.set({...An.get(),[t]:An.get()[e]}))}function ib(t,e){const n=new Float32Array(t+1),r=new Float32Array(t+1),s=Xt(),i=s.createOscillator(),a={sawtooth:c=>[0,-1/c],square:c=>[0,c%2===0?0:1/c],triangle:c=>[c%2===0?0:1/(c*c),0]};if(!a[e])throw new Error(`unknown wave type ${e}`);n[0]=0,r[0]=0;let o=1;for(;o<=t;){const[c,l]=a[e](o);n[o]=c,r[o]=l,o++}const u=s.createPeriodicWave(n,r);return i.setPeriodicWave(u),i}function ab(t,e,n){let{n:r,duration:s,noise:i=0}=n,a;!r||t==="sine"?(a=Xt().createOscillator(),a.type=t||"triangle"):a=ib(r,t),a.frequency.value=xr(n),a.start(e);let o=os(a.detune,n,e);as(a.detune,n,e,e+s);const u=Hs(a.frequency,n,e);let c;return i&&(c=zv(a,i,e)),{node:(c==null?void 0:c.node)||a,stop:l=>{u.stop(l),o==null||o.stop(l),c==null||c.stop(l),a.stop(l)},triggerRelease:l=>{}}}function Xx(t=1,e=.05,n=220,r=0,s=0,i=.1,a=0,o=1,u=0,c=0,l=0,d=0,m=0,f=0,g=0,b=0,x=0,D=1,G=0,k=0){let Z=Math.PI*2,A=Xt().sampleRate,V=$=>$>0?1:-1,E=u*=500*Z/A/A,B=n*=(1+e*2*Math.random()-e)*Z/A,K=[],R=0,j=0,W=0,_=1,nt=0,ut=0,tt=0,st,q;for(r=r*A+9,G*=A,s*=A,i*=A,x*=A,c*=500*Z/A**3,g*=Z/A,l*=Z/A,d*=A,m=m*A|0,q=r+G+s+i+x|0;W<q;K[W++]=tt)++ut%(b*100|0)||(tt=a?a>1?a>2?a>3?Math.sin((R%Z)**3):Math.max(Math.min(Math.tan(R),1),-1):1-(2*R/Z%2+2)%2:1-4*Math.abs(Math.round(R/Z)-R/Z):Math.sin(R),tt=(m?1-k+k*Math.sin(Z*W/m):1)*V(tt)*Math.abs(tt)**o*t*1*(W<r?W/r:W<r+G?1-(W-r)/G*(1-D):W<r+G+s?D:W<q-x?(q-W-x)/i*D:0),tt=x?tt/2+(x>W?0:(W<q-x?1:(q-W)/x)*K[W-x|0]/2):tt),st=(n+=u+=c)*Math.cos(g*j++),R+=st-st*f*(1-(Math.sin(W)+1)*1e9%2),_&&++_>d&&(n+=l,B+=l,_=0),m&&!(++nt%m)&&(n=B,u=E,_||(_=1));return K}const ob=(t,e)=>{let{s:n,note:r=36,freq:s,zrand:i=0,attack:a=0,decay:o=0,sustain:u=.8,release:c=.1,curve:l=1,slide:d=0,deltaSlide:m=0,pitchJump:f=0,pitchJumpTime:g=0,lfo:b=0,znoise:x=0,zmod:D=0,zcrush:G=0,zdelay:k=0,tremolo:Z=0,duration:A=.2,zzfx:V}=t;const E=Math.max(A-a-o,0);typeof r=="string"&&(r=ea(r)),!s&&typeof r=="number"&&(s=Ay(r)),n=n.replace("z_","");const B=["sine","triangle","sawtooth","tan","noise"].indexOf(n)||0;l=n==="square"?0:l;const K=Xx(...V||[.25,i,s,a,E,c,B,l,d,m,f,g,b,x,D,G,k,u,o,Z]),R=Xt(),j=R.createBuffer(1,K.length,R.sampleRate);j.getChannelData(0).set(K);const W=Xt().createBufferSource();return W.buffer=j,W.start(e),{node:W}};function Gx(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(t=>{Vn(t,(e,n,r)=>{const{node:s}=ob({s:t,...n},e);return s.onended=()=>{s.disconnect(),r()},{node:s,stop:()=>{}}},{type:"synth",prebake:!0})})}let en;async function ub(t,e){const n=`dsp-worklet-${Date.now()}`,r=`${e}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${n}', MyProcessor);
`,s=`data:text/javascript;base64,${btoa(r)}`;await t.audioWorklet.addModule(s);const i=new AudioWorkletNode(t,n);return{node:i,stop:()=>i.port.postMessage("stop")}}const cb=()=>{var t;en&&(en==null||en.stop(),(t=en==null?void 0:en.node)==null||t.disconnect())};typeof window<"u"&&window.addEventListener("message",t=>{var e;t.data==="strudel-stop"?cb():(e=t.data)!=null&&e.dough&&(en==null||en.node.port.postMessage(t.data))});const Sx=async t=>{const e=Xt();cb(),en=await ub(e,t),en.node.connect(e.destination)};function lb(t,e,n,r){window.postMessage({time:r,dough:t.value,currentTime:e,duration:t.duration,cps:n})}const Ko=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),I1=new Set;async function Ex(t,e,n=2048){const r=`${t},${n}`;if(!I1.has(r)){const s=(await Lx(t,e)).getChannelData(0),i=s.length,a=Math.max(1,Math.floor(i/n)),o=new Array(a);for(let u=0;u<a;u++){const c=u*n;o[u]=s.subarray(c,c+n)}return I1.add(r),{frames:o,frameLen:n,numFrames:a,key:r}}return{frameLen:n,key:r}}function Vx(t,e){var n=1024;if(t<n)return t+" B";var r=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],s=-1;do t/=n,++s;while(t>=n);return t.toFixed(1)+" "+r[s]}function kx(t){const e=new DataView(t);let n=12;for(;n+8<=e.byteLength;){const r=String.fromCharCode(e.getUint8(n),e.getUint8(n+1),e.getUint8(n+2),e.getUint8(n+3)),s=e.getUint32(n+4,!0);if(r==="fmt ")return e.getUint32(n+12,!0);n+=8+s+(s&1)}return null}async function Bx(t){const e=kx(t)||44100;return await new OfflineAudioContext(1,1,e).decodeAudioData(t)}const yo={},Lx=(t,e)=>{if(t=t.replace("#","%23"),!yo[t]){ce(`[wavetable] load table ${e}..`,"load-table",{url:t});const n=Date.now();yo[t]=fetch(t).then(r=>r.arrayBuffer()).then(async r=>{const s=Date.now()-n,i=Vx(r.byteLength);return ce(`[wavetable] load table ${e}... done! loaded ${i} in ${s}ms`,"loaded-table",{url:t}),await Bx(r)})}return yo[t]};function hb(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,r]=t.split("github:");return r=r.endsWith("/")?r.slice(0,-1):r,r.split("/").length===2&&(r+="/main"),`https://raw.githubusercontent.com/${r}/${e}`}const N1=(t,e,n,r={})=>(e=t._base||e,Object.entries(t).forEach(([s,i])=>{if(s==="_base")return!1;if(typeof i=="string"&&(i=[i]),typeof i!="object")throw new Error("wrong json format for "+s);let a=e;a.startsWith("github:")&&(a=hb(a,"")),i=i.map(o=>a+o).filter(o=>o.toLowerCase().endsWith(".wav")?!0:(ce(`[wavetable] skipping ${o} -- wavetables must be ".wav" format`),!1)),i.length&&Mu(s,i,{baseUrl:e,frameLen:n})}));function Mu(t,e,n){Vn(t,(r,s,i,a)=>pb(r,s,i,e,a,(n==null?void 0:n.frameLen)??2048),{type:"wavetable",tables:e,...n})}const Wx=async(t,e,n,r={})=>{if(n!==void 0)return N1(n,t,e);if(t.startsWith("github:")&&(t=hb(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432"),typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(t).then(s=>s.json()).then(s=>N1(s,t,e,r)).catch(s=>{throw console.error(s),new Error(`error loading "${t}"`)})};async function pb(t,e,n,r,s,i){const{s:a,n:o=0,duration:u,clip:c}=e,l=Xt(),[d,m,f,g]=an([e.attack,e.decay,e.sustain,e.release]);let{warpmode:b}=e;typeof b=="string"&&(b=Ko[b.toUpperCase()]??Ko.NONE);const x=xr(e),{url:D,label:G}=Fy(e,r),k=await Ex(D,G,i);let Z=t+u;c!==void 0&&(Z=Math.min(t+c*u,Z));const A=Z+g,V=A+.01,E=Ke(l,"wavetable-oscillator-processor",{begin:t,end:V,frequency:x,freqspread:e.detune,position:e.wt,warp:e.warp,warpMode:b,voices:Math.max(e.unison??1,1),panspread:e.spread,phaserand:e.wtphaserand??e.unison>1?1:0},{outputChannelCount:[2]});if(E.port.postMessage({type:"table",payload:k}),l.currentTime>t){ce(`[wavetable] still loading sound "${a}:${o}"`,"highlight");return}const B=[e.wtattack,e.wtdecay,e.wtsustain,e.wtrelease],K=[e.warpattack,e.warpdecay,e.warpsustain,e.warprelease],R=E.parameters,j=R.get("position"),W=R.get("warp");let _=e.wtrate;e.wtsync!=null&&(_=s*e.wtsync);const nt=zo(l,j,t,A,{offset:e.wt,amount:e.wtenv,defaultAmount:.5,values:B,holdEnd:Z,defaultValues:[0,.5,0,.1]},{frequency:_,depth:e.wtdepth,defaultDepth:.5,shape:e.wtshape,skew:e.wtskew,dcoffset:e.wtdc??0});let ut=e.warprate;e.warpsync!=null&&(ut=ut=s*e.warpsync);const tt=zo(l,W,t,A,{offset:e.warp,amount:e.warpenv,defaultAmount:.5,values:K,holdEnd:Z,defaultValues:[0,.5,0,.1]},{frequency:ut,depth:e.warpdepth,defaultDepth:.5,shape:e.warpshape,skew:e.warpskew,dcoffset:e.warpdc??0}),st=os(E.parameters.get("detune"),e,t),q=Hs(E.parameters.get("frequency"),e,t),$=l.createGain(),mt=E.connect($);sn(mt.gain,d,m,f,g,0,.3,t,Z,"linear"),as(E.parameters.get("detune"),e,t,Z);const Lt={node:mt,source:E},Y=qr(l,()=>{Ur(E),st==null||st.stop(),q==null||q.stop(),mt.disconnect(),nt==null||nt.disconnect(),tt==null||tt.disconnect(),n()},t,V);return Lt.stop=St=>{Y.stop(St)},Lt}typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const lt=BigInt(0),gt=BigInt(1),js=BigInt(2),Yo=BigInt(5),Ne=BigInt(10),Rx=2e3,U={s:gt,n:lt,d:gt};function Hn(t,e){try{t=BigInt(t)}catch{throw lr()}return t*e}function gn(t){return typeof t=="bigint"?t:Math.floor(t)}function qt(t,e){if(e===lt)throw Pu();const n=Object.create(Ut.prototype);n.s=t<lt?-gt:gt,t=t<lt?-t:t;const r=vr(t,e);return n.n=t/r,n.d=e/r,n}function Jr(t){const e={};let n=t,r=js,s=Yo-gt;for(;s<=n;){for(;n%r===lt;)n/=r,e[r]=(e[r]||lt)+gt;s+=gt+js*r++}return n!==t?n>1&&(e[n]=(e[n]||lt)+gt):e[t]=(e[t]||lt)+gt,e}const me=function(t,e){let n=lt,r=gt,s=gt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw lr();if(t%1!==0)throw K1();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw lr();if(e%1!==0)throw K1();r=BigInt(e)}s=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw lr();s=n*r}else if(typeof t=="number"){if(isNaN(t))throw lr();if(t<0&&(s=-gt,t=-t),t%1===0)n=BigInt(t);else if(t>0){let i=1,a=0,o=1,u=1,c=1,l=1e7;for(t>=1&&(i=10**Math.floor(1+Math.log10(t)),t/=i);o<=l&&c<=l;){let d=(a+u)/(o+c);if(t===d){o+c<=l?(n=a+u,r=o+c):c>o?(n=u,r=c):(n=a,r=o);break}else t>d?(a+=u,o+=c):(u+=a,c+=o),o>l?(n=u,r=c):(n=a,r=o)}n=BigInt(n)*BigInt(i),r=BigInt(r)}}else if(typeof t=="string"){let i=0,a=lt,o=lt,u=lt,c=gt,l=gt,d=t.replace(/_/g,"").match(/\d+|./g);if(d===null)throw lr();if(d[i]==="-"?(s=-gt,i++):d[i]==="+"&&i++,d.length===i+1?o=Hn(d[i++],s):d[i+1]==="."||d[i]==="."?(d[i]!=="."&&(a=Hn(d[i++],s)),i++,(i+1===d.length||d[i+1]==="("&&d[i+3]===")"||d[i+1]==="'"&&d[i+3]==="'")&&(o=Hn(d[i],s),c=Ne**BigInt(d[i].length),i++),(d[i]==="("&&d[i+2]===")"||d[i]==="'"&&d[i+2]==="'")&&(u=Hn(d[i+1],s),l=Ne**BigInt(d[i+1].length)-gt,i+=3)):d[i+1]==="/"||d[i+1]===":"?(o=Hn(d[i],s),c=Hn(d[i+2],gt),i+=3):d[i+3]==="/"&&d[i+1]===" "&&(a=Hn(d[i],s),o=Hn(d[i+2],s),c=Hn(d[i+4],gt),i+=5),d.length<=i)r=c*l,s=n=u+r*a+l*o;else throw lr()}else if(typeof t=="bigint")n=t,s=t,r=gt;else throw lr();if(r===lt)throw Pu();U.s=s<lt?-gt:gt,U.n=n<lt?-n:n,U.d=r<lt?-r:r};function Tx(t,e,n){let r=gt;for(;e>lt;t=t*t%n,e>>=gt)e&gt&&(r=r*t%n);return r}function zx(t,e){for(;e%js===lt;e/=js);for(;e%Yo===lt;e/=Yo);if(e===gt)return lt;let n=Ne%e,r=1;for(;n!==gt;r++)if(n=n*Ne%e,r>Rx)return lt;return BigInt(r)}function Ix(t,e,n){let r=gt,s=Tx(Ne,n,e);for(let i=0;i<300;i++){if(r===s)return BigInt(i);r=r*Ne%e,s=s*Ne%e}return 0}function vr(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Ut(t,e){if(me(t,e),this instanceof Ut)t=vr(U.d,U.n),this.s=U.s,this.n=U.n/t,this.d=U.d/t;else return qt(U.s*U.n,U.d)}var Pu=function(){return new Error("Division by Zero")},lr=function(){return new Error("Invalid argument")},K1=function(){return new Error("Parameters must be integer")};Ut.prototype={s:gt,n:lt,d:gt,abs:function(){return qt(this.n,this.d)},neg:function(){return qt(-this.s*this.n,this.d)},add:function(t,e){return me(t,e),qt(this.s*this.n*U.d+U.s*this.d*U.n,this.d*U.d)},sub:function(t,e){return me(t,e),qt(this.s*this.n*U.d-U.s*this.d*U.n,this.d*U.d)},mul:function(t,e){return me(t,e),qt(this.s*U.s*this.n*U.n,this.d*U.d)},div:function(t,e){return me(t,e),qt(this.s*U.s*this.n*U.d,this.d*U.n)},clone:function(){return qt(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return qt(this.s*this.n%this.d,gt);if(me(t,e),lt===U.n*this.d)throw Pu();return qt(this.s*(U.d*this.n)%(U.n*this.d),U.d*this.d)},gcd:function(t,e){return me(t,e),qt(vr(U.n,this.n)*vr(U.d,this.d),U.d*this.d)},lcm:function(t,e){return me(t,e),U.n===lt&&this.n===lt?qt(lt,gt):qt(U.n*this.n,vr(U.n,this.n)*vr(U.d,this.d))},inverse:function(){return qt(this.s*this.d,this.n)},pow:function(t,e){if(me(t,e),U.d===gt)return U.s<lt?qt((this.s*this.d)**U.n,this.n**U.n):qt((this.s*this.n)**U.n,this.d**U.n);if(this.s<lt)return null;let n=Jr(this.n),r=Jr(this.d),s=gt,i=gt;for(let a in n)if(a!=="1"){if(a==="0"){s=lt;break}if(n[a]*=U.n,n[a]%U.d===lt)n[a]/=U.d;else return null;s*=BigInt(a)**n[a]}for(let a in r)if(a!=="1"){if(r[a]*=U.n,r[a]%U.d===lt)r[a]/=U.d;else return null;i*=BigInt(a)**r[a]}return U.s<lt?qt(i,s):qt(s,i)},log:function(t,e){if(me(t,e),this.s<=lt||U.s<=lt)return null;const n={},r=Jr(U.n),s=Jr(U.d),i=Jr(this.n),a=Jr(this.d);for(const c in s)r[c]=(r[c]||lt)-s[c];for(const c in a)i[c]=(i[c]||lt)-a[c];for(const c in r)c!=="1"&&(n[c]=!0);for(const c in i)c!=="1"&&(n[c]=!0);let o=null,u=null;for(const c in n){const l=r[c]||lt,d=i[c]||lt;if(l===lt){if(d!==lt)return null;continue}let m=d,f=l;const g=vr(m,f);if(m/=g,f/=g,o===null&&u===null)o=m,u=f;else if(m*u!==o*f)return null}return o!==null&&u!==null?qt(o,u):null},equals:function(t,e){return me(t,e),this.s*this.n*U.d===U.s*U.n*this.d},lt:function(t,e){return me(t,e),this.s*this.n*U.d<U.s*U.n*this.d},lte:function(t,e){return me(t,e),this.s*this.n*U.d<=U.s*U.n*this.d},gt:function(t,e){return me(t,e),this.s*this.n*U.d>U.s*U.n*this.d},gte:function(t,e){return me(t,e),this.s*this.n*U.d>=U.s*U.n*this.d},compare:function(t,e){me(t,e);let n=this.s*this.n*U.d-U.s*U.n*this.d;return(lt<n)-(n<lt)},ceil:function(t){return t=Ne**BigInt(t||0),qt(gn(this.s*t*this.n/this.d)+(t*this.n%this.d>lt&&this.s>=lt?gt:lt),t)},floor:function(t){return t=Ne**BigInt(t||0),qt(gn(this.s*t*this.n/this.d)-(t*this.n%this.d>lt&&this.s<lt?gt:lt),t)},round:function(t){return t=Ne**BigInt(t||0),qt(gn(this.s*t*this.n/this.d)+this.s*((this.s>=lt?gt:lt)+js*(t*this.n%this.d)>this.d?gt:lt),t)},roundTo:function(t,e){me(t,e);const n=this.n*U.d,r=this.d*U.n,s=n%r;let i=gn(n/r);return s+s>=r&&i++,qt(this.s*i*U.n,U.d)},divisible:function(t,e){return me(t,e),!(!(U.n*this.d)||this.n*U.d%(U.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=zx(e,n),s=Ix(e,n,r),i=this.s<lt?"-":"";if(i+=gn(e/n),e%=n,e*=Ne,e&&(i+="."),r){for(let a=s;a--;)i+=gn(e/n),e%=n,e*=Ne;i+="(";for(let a=r;a--;)i+=gn(e/n),e%=n,e*=Ne;i+=")"}else for(let a=t;e&&a--;)i+=gn(e/n),e%=n,e*=Ne;return i},toFraction:function(t){let e=this.n,n=this.d,r=this.s<lt?"-":"";if(n===gt)r+=e;else{let s=gn(e/n);t&&s>lt&&(r+=s,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<lt?"-":"";if(n===gt)r+=e;else{let s=gn(e/n);t&&s>lt&&(r+=s,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(gn(t/e));let r=t%e;t=e,e=r}while(t!==gt);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let s=1;s<r.length;s++){let i=qt(r[s-1],gt);for(let o=s-2;o>=0;o--)i=i.inverse().add(r[o]);let a=i.sub(n);if(a.n*e<a.d)return i.mul(this.s)}return this}};const ra="strudel.log";let Nx=1e3,Y1,_1;function Cu(t,e="cyclist"){le(`[${e}] error: ${t.message}`)}function le(t,e,n={}){let r=performance.now();Y1===t&&r-_1<Nx||(Y1=t,_1=r,console.log(`%c${t}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(ra,{detail:{message:t,type:e,data:n}})))}le.key=ra;const db=t=>/^[a-gA-G][#bs]*[0-9]$/.test(t),gr=t=>/^[a-gA-G][#bsf]*[0-9]?$/.test(t),vu=t=>{var s;if(typeof t!="string")return[];const[e,n="",r]=((s=t.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/))==null?void 0:s.slice(1))||[];return e?[e,n,r?Number(r):void 0]:[]},Kx={c:0,d:2,e:4,f:5,g:7,a:9,b:11},Yx={"#":1,b:-1,s:1,f:-1},rr=(t,e=3)=>{const[n,r,s=e]=vu(t);if(!n)throw new Error('not a note: "'+t+'"');const i=Kx[n.toLowerCase()],a=(r==null?void 0:r.split("").reduce((o,u)=>o+Yx[u],0))||0;return(Number(s)+1)*12+i+a},Xr=t=>Math.pow(2,(t-69)/12)*440,sa=t=>12*Math.log(t/440)/Math.LN2+69,mb=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:r}=t;if(typeof n=="number")return sa(n);if(typeof r=="string")return rr(r);if(typeof r=="number")return r;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e},fb=(t,e)=>(t-e)*1e3,xu=t=>Xr(typeof t=="number"?t:rr(t)),_x=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],yb=t=>{const e=Math.floor(t/12)-1;return _x[t%12]+e},Je=(t,e)=>(t%e+e)%e,Au=t=>t.reduce((e,n)=>e+n)/t.length;function Du(t,e=0){return isNaN(Number(t))?(le(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const bb=(t,e)=>Je(Math.round(Du(t??0,0)),e),gb=t=>{let{value:e,context:n}=t,r=e;if(typeof r=="object"&&!Array.isArray(r)&&(r=r.note||r.n||r.value,r===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(e)}`);if(typeof r=="number"&&n.type!=="frequency")r=Xr(t.value);else if(typeof r=="number"&&n.type==="frequency")r=t.value;else if(typeof r!="string"||!gr(r))throw new Error("not a note: "+JSON.stringify(r));return r},Fu=t=>{let{value:e,context:n}=t;if(typeof e=="object")return e.freq?e.freq:xu(e.note||e.n||e.value);if(typeof e=="number"&&n.type!=="frequency")e=Xr(t.value);else if(typeof e=="string"&&gr(e))e=Xr(rr(t.value));else if(typeof e!="number")throw new Error("not a note or frequency: "+e);return e},Zu=(t,e)=>t.slice(e).concat(t.slice(0,e)),wu=(...t)=>t.reduce((e,n)=>(...r)=>e(n(...r)),e=>e),Mb=(...t)=>wu(...t.reverse()),Vr=t=>t.filter(e=>e!=null),Bn=t=>[].concat(...t),Ar=t=>t,Pb=(t,e)=>t,ia=(t,e)=>Array.from({length:e-t+1},(n,r)=>r+t);function Ct(t,e,n=t.length){const r=function s(...i){if(i.length>=n)return t.apply(this,i);{const a=function(...o){return s.apply(this,i.concat(o))};return e&&e(a,i),a}};return e&&e(r,[]),r}function aa(t){const e=Number(t);if(!isNaN(e))return e;if(gr(t))return rr(t);throw new Error(`cannot parse as numeral: "${t}"`)}function oa(t,e){return(...n)=>t(...n.map(e))}function ze(t){return oa(t,aa)}function Xu(t){const e=Number(t);if(!isNaN(e))return e;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[t];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${t}"`)}const Cb=t=>oa(t,Xu),ua=function(t,e){return[e.slice(0,t),e.slice(t)]},si=(t,e,n)=>e.map((r,s)=>t(r,n[s])),Gu=function(t){const e=[];for(let n=0;n<t.length-1;++n)e.push([t[n],t[n+1]]);return e},ii=(t,e,n)=>Math.min(Math.max(t,e),n),Hx=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],jx=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],Jx=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],Ox=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],Ux=["I","Ro","Ha","Ni","Ho","He","To"],Qx=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],vb=(t,e="letters")=>{const n=(e==="solfeggio"?Hx:e==="indian"?jx:e==="german"?Jx:e==="byzantine"?Ox:e==="japanese"?Ux:Qx)[t%12],r=Math.floor(t/12)-1;return n+r};function xb(t){var e={};return t.filter(function(n){return e.hasOwn(n)?!1:e[n]=!0})}function Ab(t){return t.sort().filter(function(e,n,r){return!n||e!=r[n-1]})}function Su(t){return t.sort((e,n)=>e.compare(n)).filter(function(e,n,r){return!n||e.ne(r[n-1])})}function Eu(t){const e=new TextEncoder().encode(t);return btoa(String.fromCharCode(...e))}function Vu(t){const e=new Uint8Array(atob(t).split("").map(n=>n.charCodeAt(0)));return new TextDecoder().decode(e)}function Db(t){return encodeURIComponent(Eu(t))}function Fb(t){return Vu(decodeURIComponent(t))}function ku(t,e){return Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(([n,r],s)=>[n,e(r,n,s)]))}function Ki(t,e){return t/e}class Bu{constructor({getTargetClockTime:e=qx,weight:n=16,offsetDelta:r=.005,checkAfterTime:s=2,resetAfterTime:i=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=e,this.weight=n,this.offsetDelta=r,this.checkAfterTime=s,this.resetAfterTime=i,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(e){const n=this.getTargetClockTime(),r=n-this.timeAtPrevOffsetSample,s=n-e;if(r>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=s),this.prevOffsetTimes.push(s),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||r>this.checkAfterTime){this.timeAtPrevOffsetSample=n;const i=Au(this.prevOffsetTimes);Math.abs(i-this.offsetTime)>this.offsetDelta&&(this.offsetTime=i)}return this.offsetTime}calculateTimestamp(e,n){return this.calculateOffset(e)+n}}function Zb(){return performance.now()*.001}function qx(){return Date.now()*.001}const Lu=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let ws;function Wu(){if(ws==null){if(typeof window>"u")return;ws={},window.addEventListener("keydown",t=>{ws[t.key]=!0}),window.addEventListener("keyup",t=>{ws[t.key]=!1})}return{...ws}}function ca(t,e=!1){return typeof t=="object"?e?JSON.stringify(t).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(t):t}Ut.prototype.sam=function(){return this.floor()};Ut.prototype.nextSam=function(){return this.sam().add(1)};Ut.prototype.wholeCycle=function(){return new te(this.sam(),this.nextSam())};Ut.prototype.cyclePos=function(){return this.sub(this.sam())};Ut.prototype.lt=function(t){return this.compare(t)<0};Ut.prototype.gt=function(t){return this.compare(t)>0};Ut.prototype.lte=function(t){return this.compare(t)<=0};Ut.prototype.gte=function(t){return this.compare(t)>=0};Ut.prototype.eq=function(t){return this.compare(t)==0};Ut.prototype.ne=function(t){return this.compare(t)!=0};Ut.prototype.max=function(t){return this.gt(t)?this:t};Ut.prototype.maximum=function(...t){return t=t.map(e=>new Ut(e)),t.reduce((e,n)=>n.max(e),this)};Ut.prototype.min=function(t){return this.lt(t)?this:t};Ut.prototype.mulmaybe=function(t){return t!==void 0?this.mul(t):void 0};Ut.prototype.divmaybe=function(t){return t!==void 0?this.div(t):void 0};Ut.prototype.addmaybe=function(t){return t!==void 0?this.add(t):void 0};Ut.prototype.submaybe=function(t){return t!==void 0?this.sub(t):void 0};Ut.prototype.show=function(){return this.s*this.n+"/"+this.d};Ut.prototype.or=function(t){return this.eq(0)?t:this};const H=t=>Ut(t),$x=(...t)=>{if(t=Vr(t),t.length!==0)return t.reduce((e,n)=>e.gcd(n),H(1))},xn=(...t)=>{if(t=Vr(t),t.length===0)return;const e=t.pop();return t.reduce((n,r)=>n===void 0||r===void 0?void 0:n.lcm(r),e)};H._original=Ut;class te{constructor(e,n){this.begin=H(e),this.end=H(n)}get spanCycles(){const e=[];var n=this.begin;const r=this.end,s=r.sam();if(n.equals(r))return[new te(n,r)];for(;r.gt(n);){if(n.sam().equals(s)){e.push(new te(n,this.end));break}const i=n.nextSam();e.push(new te(n,i)),n=i}return e}get duration(){return this.end.sub(this.begin)}cycleArc(){const e=this.begin.cyclePos(),n=e.add(this.duration);return new te(e,n)}withTime(e){return new te(e(this.begin),e(this.end))}withEnd(e){return new te(this.begin,e(this.end))}withCycle(e){const n=this.begin.sam(),r=n.add(e(this.begin.sub(n))),s=n.add(e(this.end.sub(n)));return new te(r,s)}intersection(e){const n=this.begin.max(e.begin),r=this.end.min(e.end);if(!n.gt(r)&&!(n.equals(r)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(e.end)&&e.begin.lt(e.end))))return new te(n,r)}intersection_e(e){const n=this.intersection(e);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(H(2)))}equals(e){return this.begin.equals(e.begin)&&this.end.equals(e.end)}show(){return this.begin.show()+" → "+this.end.show()}}let fe=class Ws{constructor(e,n,r,s={},i=!1){this.whole=e,this.part=n,this.value=r,this.context=s,this.stateful=i,i&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){var n,r;let e;return typeof((n=this.value)==null?void 0:n.duration)=="number"?e=H(this.value.duration):e=this.whole.end.sub(this.whole.begin),typeof((r=this.value)==null?void 0:r.clip)=="number"?e.mul(this.value.clip):e}get endClipped(){return this.whole.begin.add(this.duration)}isActive(e){return this.whole.begin<=e&&this.endClipped>=e}isInPast(e){return e>this.endClipped}isInNearPast(e,n){return n-e<=this.endClipped}isInFuture(e){return e<this.whole.begin}isInNearFuture(e,n){return n<this.whole.begin&&n>this.whole.begin-e}isWithinTime(e,n){return this.whole.begin<=n&&this.endClipped>=e}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(e){const n=this.whole?e(this.whole):void 0;return new Ws(n,e(this.part),this.value,this.context)}withValue(e){return new Ws(this.whole,this.part,e(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(e){var n;return(n=this.context.tags)==null?void 0:n.includes(e)}resolveState(e){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[r,s]=n(e);return[r,new Ws(this.whole,this.part,s,this.context,!1)]}return[e,this]}spanEquals(e){return this.whole==null&&e.whole==null||this.whole.equals(e.whole)}equals(e){return this.spanEquals(e)&&this.part.equals(e.part)&&this.value===e.value}show(e=!1){const n=typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var r="";if(this.whole==null)r="~"+this.part.show;else{var s=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(r=this.whole.begin.show()+" ⇜ "),s||(r+="("),r+=this.part.show(),s||(r+=")"),this.whole.end.equals(this.part.end)||(r+=" ⇝ "+this.whole.end.show())}return"[ "+r+" | "+n+" ]"}showWhole(e=!1){return`${this.whole==null?"~":this.whole.show()}: ${ca(this.value,e)}`}combineContext(e){const n=this;return{...n.context,...e.context,locations:(n.context.locations||[]).concat(e.context.locations||[])}}setContext(e){return new Ws(this.whole,this.part,this.value,e)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}};class Gr{constructor(e,n={}){this.span=e,this.controls=n}setSpan(e){return new Gr(e,this.controls)}withSpan(e){return this.setSpan(e(this.span))}setControls(e){return new Gr(this.span,e)}}function tA(t,e,n){if((e==null?void 0:e.value)!==void 0&&Object.keys(e).length===1)return le("[warn]: Can't do arithmetic on control pattern."),t;const r=Object.keys(t).filter(s=>Object.keys(e).includes(s));return Object.assign({},t,e,Object.fromEntries(r.map(s=>[s,n(t[s],e[s])])))}Ct((t,e)=>t*e);Ct((t,e)=>e.map(t));function Ru(t,e=60){let n=0,r=H(0),s=[""],i="";for(;s[0].length<e;){const a=t.queryArc(n,n+1),o=a.filter(l=>l.hasOnset()).map(l=>l.duration),u=$x(...o),c=u.inverse();s=s.map(l=>l+"|"),i+="|";for(let l=0;l<c;l++){const[d,m]=[r,r.add(u)],f=a.filter(b=>b.whole.begin.lte(d)&&b.whole.end.gte(m)),g=f.length-s.length;g>0&&(s=s.concat(Array(g).fill(i))),s=s.map((b,x)=>{const D=f[x];if(D){const G=D.whole.begin.eq(d)?""+D.value:"-";return b+G}return b+"."}),i+=".",r=r.add(u)}n++}return s.join(`
`)}let _o,Zn=!0;const wb=function(t){Zn=!!t},Tu=t=>_o=t;let J=class Me{constructor(e,n=void 0){Re(this,"polyJoin",function(){const e=this;return e.fmap(n=>n.extend(e._steps.div(n._steps))).outerJoin()});this.query=e,this._Pattern=!0,this._steps=n}get _steps(){return this.__steps}set _steps(e){this.__steps=e===void 0?void 0:H(e)}setSteps(e){return this._steps=e,this}withSteps(e){return Zn?new Me(this.query,this._steps===void 0?void 0:e(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(e){const n=new Me(r=>this.query(r).map(s=>s.withValue(e)));return n._steps=this._steps,n}withState(e){return this.withHaps((n,r)=>(e(r),n))}fmap(e){return this.withValue(e)}appWhole(e,n){const r=this,s=function(i){const a=r.query(i),o=n.query(i),u=function(c,l){const d=c.part.intersection(l.part);if(d!=null)return new fe(e(c.whole,l.whole),d,c.value(l.value),l.combineContext(c))};return Bn(a.map(c=>Vr(o.map(l=>u(c,l)))))};return new Me(s)}appBoth(e){const n=this,r=function(i,a){if(!(i==null||a==null))return i.intersection_e(a)},s=n.appWhole(r,e);return Zn&&(s._steps=xn(e._steps,n._steps)),s}appLeft(e){const n=this,r=function(i){const a=[];for(const o of n.query(i)){const u=e.query(i.setSpan(o.wholeOrPart()));for(const c of u){const l=o.whole,d=o.part.intersection(c.part);if(d){const m=o.value(c.value),f=c.combineContext(o),g=new fe(l,d,m,f);a.push(g)}}}return a},s=new Me(r);return s._steps=this._steps,s}appRight(e){const n=this,r=function(i){const a=[];for(const o of e.query(i)){const u=n.query(i.setSpan(o.wholeOrPart()));for(const c of u){const l=o.whole,d=c.part.intersection(o.part);if(d){const m=c.value(o.value),f=o.combineContext(c),g=new fe(l,d,m,f);a.push(g)}}}return a},s=new Me(r);return s._steps=e._steps,s}bindWhole(e,n){const r=this,s=function(i){const a=function(u,c){return new fe(e(u.whole,c.whole),c.part,c.value,Object.assign({},u.context,c.context,{locations:(u.context.locations||[]).concat(c.context.locations||[])}))},o=function(u){return n(u.value).query(i.setSpan(u.part)).map(c=>a(u,c))};return Bn(r.query(i).map(u=>o(u)))};return new Me(s)}bind(e){const n=function(r,s){if(!(r==null||s==null))return r.intersection_e(s)};return this.bindWhole(n,e)}join(){return this.bind(Ar)}outerBind(e){return this.bindWhole(n=>n,e).setSteps(this._steps)}outerJoin(){return this.outerBind(Ar)}innerBind(e){return this.bindWhole((n,r)=>r,e)}innerJoin(){return this.innerBind(Ar)}resetJoin(e=!1){const n=this;return new Me(r=>n.discreteOnly().query(r).map(s=>s.value.late(e?s.whole.begin:s.whole.begin.cyclePos()).query(r).map(i=>new fe(i.whole?i.whole.intersection(s.whole):void 0,i.part.intersection(s.part),i.value).setContext(s.combineContext(i))).filter(i=>i.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const e=this;function n(r){const s=e.discreteOnly().query(r);function i(a){const o=a.value._focusSpan(a.wholeOrPart()).query(r.setSpan(a.part));function u(c,l){let d;if(l.whole&&c.whole&&(d=l.whole.intersection(c.whole),!d))return;const m=l.part.intersection(c.part);if(!m)return;const f=l.combineContext(c);return new fe(d,m,l.value,f)}return o.map(c=>u(a,c))}return Bn(s.map(i)).filter(a=>a)}return new Me(n)}squeezeBind(e){return this.fmap(e).squeezeJoin()}polyBind(e){return this.fmap(e).polyJoin()}queryArc(e,n,r={}){try{return this.query(new Gr(new te(e,n),r))}catch(s){return le(`[query]: ${s.message}`,"error"),[]}}splitQueries(){const e=this,n=r=>Bn(r.span.spanCycles.map(s=>e.query(r.setSpan(s))));return new Me(n)}withQuerySpan(e){return new Me(n=>this.query(n.withSpan(e)))}withQuerySpanMaybe(e){const n=this;return new Me(r=>{const s=r.withSpan(e);return s.span?n.query(s):[]})}withQueryTime(e){return new Me(n=>this.query(n.withSpan(r=>r.withTime(e))))}withHapSpan(e){return new Me(n=>this.query(n).map(r=>r.withSpan(e)))}withHapTime(e){return this.withHapSpan(n=>n.withTime(e))}withHaps(e){const n=new Me(r=>e(this.query(r),r));return n._steps=this._steps,n}withHap(e){return this.withHaps(n=>n.map(e))}setContext(e){return this.withHap(n=>n.setContext(e))}withContext(e){const n=this.withHap(r=>r.setContext(e(r.context)));return this.__pure!==void 0&&(n.__pure=this.__pure,n.__pure_loc=this.__pure_loc),n}stripContext(){return this.withHap(e=>e.setContext({}))}withLoc(e,n){const r={start:e,end:n},s=this.withContext(i=>{const a=(i.locations||[]).concat([r]);return{...i,locations:a}});return this.__pure&&(s.__pure=this.__pure,s.__pure_loc=r),s}filterHaps(e){return new Me(n=>this.query(n).filter(e))}filterValues(e){return new Me(n=>this.query(n).filter(r=>e(r.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(e=>e!=null)}onsetsOnly(){return this.filterHaps(e=>e.hasOnset())}discreteOnly(){return this.filterHaps(e=>e.whole)}defragmentHaps(){return this.discreteOnly().withHaps(e=>{const n=[];for(var r=0;r<e.length;++r){for(var s=!0,i=e[r];s;){const u=JSON.stringify(e[r].value);for(var a=!1,o=r+1;o<e.length;o++){const c=e[o];if(i.whole.equals(c.whole)){if(i.part.begin.eq(c.part.end)){if(u===JSON.stringify(c.value)){i=new fe(i.whole,new te(c.part.begin,i.part.end),i.value),e.splice(o,1),a=!0;break}}else if(c.part.begin.eq(i.part.end)&&u==JSON.stringify(c.value)){i=new fe(i.whole,new te(i.part.begin,c.part.end),i.value),e.splice(o,1),a=!0;break}}}s=a}n.push(i)}return n})}firstCycle(e=!1){var n=this;return e||(n=n.stripContext()),n.query(new Gr(new te(H(0),H(1))))}get firstCycleValues(){return this.firstCycle().map(e=>e.value)}get showFirstCycle(){return this.firstCycle().map(e=>`${e.value}: ${e.whole.begin.toFraction()} - ${e.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(e=>e.sort((n,r)=>n.part.begin.sub(r.part.begin).or(n.part.end.sub(r.part.end)).or(n.whole.begin.sub(r.whole.begin).or(n.whole.end.sub(r.whole.end)))))}asNumber(){return this.fmap(aa)}_opIn(e,n){return this.fmap(n).appLeft(O(e))}_opOut(e,n){return this.fmap(n).appRight(O(e))}_opMix(e,n){return this.fmap(n).appBoth(O(e))}_opSqueeze(e,n){const r=O(e);return this.fmap(s=>r.fmap(i=>n(s)(i))).squeezeJoin()}_opSqueezeOut(e,n){const r=this;return O(e).fmap(s=>r.fmap(i=>n(i)(s))).squeezeJoin()}_opReset(e,n){return O(e).fmap(r=>this.fmap(s=>n(s)(r))).resetJoin()}_opRestart(e,n){return O(e).fmap(r=>this.fmap(s=>n(s)(r))).restartJoin()}_opPoly(e,n){const r=O(e);return this.fmap(s=>r.fmap(i=>n(i)(s))).polyJoin()}layer(...e){return jt(...e.map(n=>n(this)))}superimpose(...e){return this.stack(...e.map(n=>n(this)))}stack(...e){return jt(this,...e)}sequence(...e){return ln(this,...e)}seq(...e){return ln(this,...e)}cat(...e){return _u(this,...e)}fastcat(...e){return xe(this,...e)}slowcat(...e){return sr(this,...e)}onTrigger(e,n=!0){return this.withHap(r=>r.setContext({...r.context,onTrigger:(...s)=>{var i,a;(a=(i=r.context).onTrigger)==null||a.call(i,...s),e(...s)},dominantTrigger:r.context.dominantTrigger||n}))}log(e=r=>`[hap] ${r.showWhole(!0)}`,n=r=>({hap:r})){return this.onTrigger((...r)=>{le(e(...r),void 0,n(...r))},!1)}logValues(e=n=>`[hap] ${ca(n,!0)}`){return this.log(n=>e(n.value))}drawLine(){return console.log(Ru(this)),this}unjoin(e,n=Ar){return e.withHap(r=>r.withValue(s=>s?n(this.ribbon(r.whole.begin,r.whole.duration)):this))}into(e,n){return this.unjoin(e,n).innerJoin()}};function eA(t,e){let n=[];return e.forEach(r=>{const s=n.findIndex(([i])=>t(r,i));s===-1?n.push([r]):n[s].push(r)}),n}const nA=(t,e)=>t.spanEquals(e);J.prototype.collect=function(){return this.withHaps(t=>eA(nA,t).map(e=>new fe(e[0].whole,e[0].part,e,{})))};const Xb=T("arpWith",(t,e)=>e.collect().fmap(n=>O(t(n))).innerJoin().withHap(n=>new fe(n.whole,n.part,n.value.value,n.combineContext(n.value)))),Gb=T("arp",(t,e)=>e.arpWith(n=>O(t).fmap(r=>n[r%n.length])),!1);function wi(t){return!Array.isArray(t)&&typeof t=="object"}function rA(t,e,n){return wi(t)||wi(e)?(wi(t)||(t={value:t}),wi(e)||(e={value:e}),tA(t,e,n)):n(t,e)}(function(){const t={set:[(n,r)=>r],keep:[n=>n],keepif:[(n,r)=>r?n:void 0],add:[ze((n,r)=>n+r)],sub:[ze((n,r)=>n-r)],mul:[ze((n,r)=>n*r)],div:[ze((n,r)=>n/r)],mod:[ze(Je)],pow:[ze(Math.pow)],log2:[ze(Math.log2)],band:[ze((n,r)=>n&r)],bor:[ze((n,r)=>n|r)],bxor:[ze((n,r)=>n^r)],blshift:[ze((n,r)=>n<<r)],brshift:[ze((n,r)=>n>>r)],lt:[(n,r)=>n<r],gt:[(n,r)=>n>r],lte:[(n,r)=>n<=r],gte:[(n,r)=>n>=r],eq:[(n,r)=>n==r],eqt:[(n,r)=>n===r],ne:[(n,r)=>n!=r],net:[(n,r)=>n!==r],and:[(n,r)=>n&&r],or:[(n,r)=>n||r],func:[(n,r)=>r(n)]},e=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[n,[r,s]]of Object.entries(t)){J.prototype["_"+n]=function(i){return this.fmap(a=>r(a,i))},Object.defineProperty(J.prototype,n,{get:function(){const i=this,a=(...o)=>i[n].in(...o);for(const o of e)a[o.toLowerCase()]=function(...u){var c=i;u=ln(u),s&&(c=s(c),u=s(u));var l;return n==="keepif"?(l=c["_op"+o](u,d=>m=>r(d,m)),l=l.removeUndefineds()):l=c["_op"+o](u,d=>m=>rA(d,m,r)),l};return a.squeezein=a.squeeze,a}});for(const i of e)J.prototype[i.toLowerCase()]=function(...a){return this.set[i.toLowerCase()](a)}}J.prototype.struct=function(...n){return this.keepif.out(...n)},J.prototype.structAll=function(...n){return this.keep.out(...n)},J.prototype.mask=function(...n){return this.keepif.in(...n)},J.prototype.maskAll=function(...n){return this.keep.in(...n)},J.prototype.reset=function(...n){return this.keepif.reset(...n)},J.prototype.resetAll=function(...n){return this.keep.reset(...n)},J.prototype.restart=function(...n){return this.keepif.restart(...n)},J.prototype.restartAll=function(...n){return this.keep.restart(...n)}})();const Sb=jt,Eb=jt,Vb=oi,kr=t=>new J(()=>[],t),Rt=kr(1),cn=kr(0);function ie(t){function e(r){return r.span.spanCycles.map(s=>new fe(H(s.begin).wholeCycle(),s,t))}const n=new J(e,1);return n.__pure=t,n}function la(t){return t instanceof J||(t==null?void 0:t._Pattern)}function O(t){return la(t)?t:_o&&typeof t=="string"?_o(t):ie(t)}function zu(t){let e=ie([]);for(const n of t)e=e.bind(r=>n.fmap(s=>r.concat([s])));return e}function jt(...t){t=t.map(r=>Array.isArray(r)?ln(...r):O(r));const e=r=>Bn(t.map(s=>s.query(r))),n=new J(e);return Zn&&(n._steps=xn(...t.map(r=>r._steps))),n}function Iu(t,e){if(e=e.map(i=>Array.isArray(i)?ln(...i):O(i)),e.length===0)return Rt;if(e.length===1)return e[0];const[n,...r]=e.map(i=>i._steps),s=Zn?n.maximum(...r):void 0;return jt(...t(s,e))}function Nu(...t){return Iu((e,n)=>n.map(r=>r._steps.eq(e)?r:Be(r,kr(e.sub(r._steps)))),t)}function Ku(...t){return Iu((e,n)=>n.map(r=>r._steps.eq(e)?r:Be(kr(e.sub(r._steps)),r)),t)}function Yu(...t){return Iu((e,n)=>n.map(r=>{if(r._steps.eq(e))return r;const s=kr(e.sub(r._steps).div(2));return Be(s,r,s)}),t)}function kb(t,...e){const[n,...r]=e.map(a=>a._steps),s=n.maximum(...r),i={centre:Yu,left:Nu,right:Ku,expand:jt,repeat:(...a)=>oi(...a).steps(s)};return t.inhabit(i).fmap(a=>a(...e)).innerJoin().setSteps(s)}function sr(...t){if(t=t.map(r=>Array.isArray(r)?xe(...r):O(r)),t.length==1)return t[0];const e=function(r){const s=r.span,i=Je(s.begin.sam(),t.length),a=t[i];if(!a)return[];const o=s.begin.floor().sub(s.begin.div(t.length).floor());return a.withHapTime(u=>u.add(o)).query(r.setSpan(s.withTime(u=>u.sub(o))))},n=Zn?xn(...t.map(r=>r._steps)):void 0;return new J(e).splitQueries().setSteps(n)}function ha(...t){t=t.map(O);const e=function(n){var s;const r=Math.floor(n.span.begin)%t.length;return((s=t[r])==null?void 0:s.query(n))||[]};return new J(e).splitQueries()}function _u(...t){return sr(...t)}function Bb(...t){const e=t.reduce((n,[r])=>n+r,0);return t=t.map(([n,r])=>[n,r.fast(n)]),Be(...t).slow(e)}function Lb(...t){let e=H(0);for(let n of t)n.length==2&&n.unshift(e),e=n[1];return jt(...t.map(([n,r,s])=>ie(O(s)).compress(H(n).div(e),H(r).div(e)))).slow(e).innerJoin()}function xe(...t){let e=sr(...t);return t.length>1&&(e=e._fast(t.length),e._steps=t.length),t.length==1&&t[0].__steps_source&&(t._steps=t[0]._steps),e}function ln(...t){return xe(...t)}function Hu(...t){return xe(...t)}function Ho(t){return Array.isArray(t)?t.length==0?[Rt,0]:t.length==1?Ho(t[0]):[xe(...t.map(e=>Ho(e)[0])),t.length]:[O(t),1]}const Wb=Ct((t,e)=>O(e).mask(t)),Rb=Ct((t,e)=>O(e).struct(t)),Tb=Ct((t,e)=>O(e).superimpose(...t)),zb=Ct((t,e)=>O(e).withValue(t)),Ib=Ct((t,e)=>O(e).bind(t)),Nb=Ct((t,e)=>O(e).innerBind(t)),Kb=Ct((t,e)=>O(e).outerBind(t)),Yb=Ct((t,e)=>O(e).squeezeBind(t)),_b=Ct((t,e)=>O(e).stepBind(t)),Hb=Ct((t,e)=>O(e).polyBind(t)),jb=Ct((t,e)=>O(e).set(t)),Jb=Ct((t,e)=>O(e).keep(t)),Ob=Ct((t,e)=>O(e).keepif(t)),Ub=Ct((t,e)=>O(e).add(t)),Qb=Ct((t,e)=>O(e).sub(t)),qb=Ct((t,e)=>O(e).mul(t)),$b=Ct((t,e)=>O(e).div(t)),tg=Ct((t,e)=>O(e).mod(t)),eg=Ct((t,e)=>O(e).pow(t)),ng=Ct((t,e)=>O(e).band(t)),rg=Ct((t,e)=>O(e).bor(t)),sg=Ct((t,e)=>O(e).bxor(t)),ig=Ct((t,e)=>O(e).blshift(t)),ag=Ct((t,e)=>O(e).brshift(t)),og=Ct((t,e)=>O(e).lt(t)),ug=Ct((t,e)=>O(e).gt(t)),cg=Ct((t,e)=>O(e).lte(t)),lg=Ct((t,e)=>O(e).gte(t)),hg=Ct((t,e)=>O(e).eq(t)),pg=Ct((t,e)=>O(e).eqt(t)),dg=Ct((t,e)=>O(e).ne(t)),mg=Ct((t,e)=>O(e).net(t)),fg=Ct((t,e)=>O(e).and(t)),yg=Ct((t,e)=>O(e).or(t)),bg=Ct((t,e)=>O(e).func(t));function T(t,e,n=!0,r=!1,s=i=>i.innerJoin()){if(Array.isArray(t)){const o={};for(const u of t)o[u]=T(u,e,n,r,s);return o}const i=e.length;var a;return n?a=function(...o){o=o.map(O);const u=o[o.length-1];let c;if(i===1)c=e(u);else{const l=o.slice(0,-1);if(l.every(d=>d.__pure!=null)){const d=l.map(f=>f.__pure),m=l.filter(f=>f.__pure_loc).map(f=>f.__pure_loc);c=e(...d,u),c=c.withContext(f=>{const g=(f.locations||[]).concat(m);return{...f,locations:g}})}else{const[d,...m]=l;let f=(...g)=>e(...g,u);f=Ct(f,null,i-1),c=s(m.reduce((g,b)=>g.appLeft(b),d.fmap(f)))}}return r&&(c._steps=u._steps),c}:a=function(...o){o=o.map(O);const u=e(...o);return r&&(u._steps=o[o.length-1]._steps),u},J.prototype[t]=function(...o){if(i===2&&o.length!==1)o=[ln(...o)];else if(i!==o.length+1)throw new Error(`.${t}() expects ${i-1} inputs but got ${o.length}.`);return o=o.map(O),a(...o,this)},i>1&&(J.prototype["_"+t]=function(...o){const u=e(...o,this);return r&&u.setSteps(this._steps),u}),Ct(a,null,i)}function ai(t,e,n=!0,r=!1,s=i=>i.stepJoin()){return T(t,e,n,r,s)}const gg=T("round",function(t){return t.asNumber().fmap(e=>Math.round(e))}),Mg=T("floor",function(t){return t.asNumber().fmap(e=>Math.floor(e))}),Pg=T("ceil",function(t){return t.asNumber().fmap(e=>Math.ceil(e))}),Cg=T("toBipolar",function(t){return t.fmap(e=>e*2-1)}),vg=T("fromBipolar",function(t){return t.fmap(e=>(e+1)/2)}),xg=T("range",function(t,e,n){return n.mul(e-t).add(t)}),Ag=T("rangex",function(t,e,n){return n._range(Math.log(t),Math.log(e)).fmap(Math.exp)}),Dg=T("range2",function(t,e,n){return n.fromBipolar()._range(t,e)}),Fg=T("ratio",t=>t.fmap(e=>Array.isArray(e)?e.slice(1).reduce((n,r)=>n/r,e[0]):e)),Zg=T("compress",function(t,e,n){return t=H(t),e=H(e),t.gt(e)||t.gt(1)||e.gt(1)||t.lt(0)||e.lt(0)?Rt:n._fastGap(H(1).div(e.sub(t)))._late(t)}),{compressSpan:wg,compressspan:Xg}=T(["compressSpan","compressspan"],function(t,e){return e._compress(t.begin,t.end)}),{fastGap:Gg,fastgap:Sg}=T(["fastGap","fastgap"],function(t,e){const n=function(s){const i=s.begin.sam(),a=s.begin.sub(i).mul(t).min(1),o=s.end.sub(i).mul(t).min(1);if(!(a>=1))return new te(i.add(a),i.add(o))},r=function(s){const i=s.part.begin,a=s.part.end,o=i.sam(),u=i.sub(o).div(t).min(1),c=a.sub(o).div(t).min(1),l=new te(o.add(u),o.add(c)),d=s.whole?new te(l.begin.sub(i.sub(s.whole.begin).div(t)),l.end.add(s.whole.end.sub(a).div(t))):void 0;return new fe(d,l,s.value,s.context)};return e.withQuerySpanMaybe(n).withHap(r).splitQueries()}),Eg=T("focus",function(t,e,n){return t=H(t),e=H(e),n._early(t.sam())._fast(H(1).div(e.sub(t)))._late(t)}),{focusSpan:Vg,focusspan:kg}=T(["focusSpan","focusspan"],function(t,e){return e._focus(t.begin,t.end)}),Bg=T("ply",function(t,e){const n=e.fmap(r=>ie(r)._fast(t)).squeezeJoin();return Zn&&(n._steps=H(t).mulmaybe(e._steps)),n}),{fast:Lg,density:E7}=T(["fast","density"],function(t,e){return t===0?Rt:(t=H(t),e.withQueryTime(n=>n.mul(t)).withHapTime(n=>n.div(t)).setSteps(e._steps))},!0,!0),Wg=T("hurry",function(t,e){return e._fast(t).mul(ie({speed:t}))}),{slow:Rg,sparsity:Tg}=T(["slow","sparsity"],function(t,e){return t===0?Rt:e._fast(H(1).div(t))}),zg=T("inside",function(t,e,n){return e(n._slow(t))._fast(t)}),Ig=T("outside",function(t,e,n){return e(n._fast(t))._slow(t)}),Ng=T("lastOf",function(t,e,n){const r=Array(t-1).fill(n);return r.push(e(n)),ha(...r)}),{firstOf:Kg,every:Yg}=T(["firstOf","every"],function(t,e,n){const r=Array(t-1).fill(n);return r.unshift(e(n)),ha(...r)}),_g=T("apply",function(t,e){return t(e)}),Hg=T("cpm",function(t,e){return e._fast(t/60/1)}),jg=T("early",function(t,e){return t=H(t),e.withQueryTime(n=>n.add(t)).withHapTime(n=>n.sub(t))},!0,!0),ju=T("late",function(t,e){return t=H(t),e._early(H(0).sub(t))},!0,!0),Jg=T("zoom",function(t,e,n){var i;if(e=H(e),t=H(t),t.gte(e))return cn;const r=e.sub(t),s=Zn?(i=n._steps)==null?void 0:i.mulmaybe(r):void 0;return n.withQuerySpan(a=>a.withCycle(o=>o.mul(r).add(t))).withHapSpan(a=>a.withCycle(o=>o.sub(t).div(r))).splitQueries().setSteps(s)}),{zoomArc:Og,zoomarc:Ug}=T(["zoomArc","zoomarc"],function(t,e){return e.zoom(t.begin,t.end)}),Qg=T("bite",(t,e,n)=>e.fmap(r=>s=>{const i=H(r).div(s).mod(1),a=i.add(H(1).div(s));return n.zoom(i,a)}).appLeft(t).squeezeJoin(),!1),qg=T("linger",function(t,e){return t==0?Rt:t<0?e._zoom(t.add(1),1)._slow(t):e._zoom(0,t)._slow(t)},!0,!0),{segment:$g,seg:t2}=T(["segment","seg"],function(t,e){return e.struct(ie(!0)._fast(t)).setSteps(t)}),e2=T("swingBy",(t,e,n)=>n.inside(e,ju(Hu(0,t/2)))),n2=T("swing",(t,e)=>e.swingBy(1/3,t)),{invert:r2,inv:s2}=T(["invert","inv"],function(t){return t.fmap(e=>!e)},!0,!0),i2=T("when",function(t,e,n){return t?e(n):n}),a2=T("off",function(t,e,n){return jt(n,e(n.late(t)))}),o2=T("brak",function(t){return t.when(sr(!1,!0),e=>xe(e,Rt)._late(.25))}),Ju=T("rev",function(t){const e=function(n){const r=n.span,s=r.begin.sam(),i=r.begin.nextSam(),a=function(o){const u=o.withTime(l=>s.add(i.sub(l))),c=u.begin;return u.begin=u.end,u.end=c,u};return t.query(n.setSpan(a(r))).map(o=>o.withSpan(a))};return new J(e).splitQueries()},!1,!0),u2=T("pressBy",function(t,e){return e.fmap(n=>ie(n).compress(t,1)).squeezeJoin()}),c2=T("press",function(t){return t._pressBy(.5)});J.prototype.hush=function(){return Rt};const l2=T("palindrome",function(t){return t.lastOf(2,Ju)},!0,!0),{juxBy:h2,juxby:p2}=T(["juxBy","juxby"],function(t,e,n){t/=2;const r=function(a,o,u){return o in a?a[o]:u},s=n.withValue(a=>Object.assign({},a,{pan:r(a,"pan",.5)-t})),i=e(n.withValue(a=>Object.assign({},a,{pan:r(a,"pan",.5)+t})));return jt(s,i).setSteps(Zn?xn(s._steps,i._steps):void 0)}),d2=T("jux",function(t,e){return e._juxBy(1,t,e)}),{echoWith:m2,echowith:f2,stutWith:y2,stutwith:b2}=T(["echoWith","echowith","stutWith","stutwith"],function(t,e,n,r){return jt(...ia(0,t-1).map(s=>n(r.late(H(e).mul(s)),s)))}),g2=T("echo",function(t,e,n,r){return r._echoWith(t,e,(s,i)=>s.gain(Math.pow(n,i)))}),M2=T("stut",function(t,e,n,r){return r._echoWith(t,n,(s,i)=>s.gain(Math.pow(e,i)))}),Ou=function(t,e,n=!1){return t=H(t),sr(...ia(0,t.sub(1)).map(r=>n?e.late(H(r).div(t)):e.early(H(r).div(t))))},P2=T("iter",function(t,e){return Ou(t,e,!1)},!0,!0),{iterBack:C2,iterback:v2}=T(["iterBack","iterback"],function(t,e){return Ou(t,e,!0)},!0,!0),{repeatCycles:x2}=T("repeatCycles",function(t,e){return new J(function(n){const r=n.span.begin.sam(),s=r.div(t).sam(),i=r.sub(s);return n=n.withSpan(a=>a.withTime(o=>o.sub(i))),e.query(n).map(a=>a.withSpan(o=>o.withTime(u=>u.add(i))))}).splitQueries()},!0,!0),Uu=function(t,e,n,r=!1,s=!1){const i=Array(t-1).fill(!1);i.unshift(!0);const a=Ou(t,ln(...i),!r);return s||(n=n.repeatCycles(t)),n.when(a,e)},{chunk:A2,slowchunk:D2,slowChunk:F2}=T(["chunk","slowchunk","slowChunk"],function(t,e,n){return Uu(t,e,n,!1,!1)},!0,!0),{chunkBack:Z2,chunkback:w2}=T(["chunkBack","chunkback"],function(t,e,n){return Uu(t,e,n,!0)},!0,!0),{fastchunk:X2,fastChunk:G2}=T(["fastchunk","fastChunk"],function(t,e,n){return Uu(t,e,n,!1,!0)},!0,!0),{chunkinto:S2,chunkInto:E2}=T(["chunkinto","chunkInto"],function(t,e,n){return n.into(xe(!0,...Array(t-1).fill(!1))._iterback(t),e)}),{chunkbackinto:V2,chunkBackInto:k2}=T(["chunkbackinto","chunkBackInto"],function(t,e,n){return n.into(xe(!0,...Array(t-1).fill(!1))._iter(t)._early(1),e)}),B2=T("bypass",function(t,e){return t=!!parseInt(t),t?Rt:e},!0,!0),{ribbon:L2,rib:W2}=T(["ribbon","rib"],(t,e,n)=>n.early(t).restart(ie(1).slow(e))),R2=T("hsla",(t,e,n,r,s)=>s.color(`hsla(${t}turn,${e*100}%,${n*100}%,${r})`)),T2=T("hsl",(t,e,n,r)=>r.color(`hsl(${t}turn,${e*100}%,${n*100}%)`));J.prototype.tag=function(t){return this.withContext(e=>({...e,tags:(e.tags||[]).concat([t])}))};const z2=T("filter",(t,e)=>e.withHaps(n=>n.filter(t))),I2=T("filterWhen",(t,e)=>e.filter(n=>t(n.whole.begin))),N2=T("within",(t,e,n,r)=>jt(n(r.filterWhen(s=>s.cyclePos()>=t&&s.cyclePos()<=e)),r.filterWhen(s=>s.cyclePos()<t||s.cyclePos()>e)));J.prototype.stepJoin=function(){const t=this,e=Be(...Yi(_i(t.queryArc(0,1))))._steps,n=function(r){const s=t.early(r.span.begin.sam()).query(r.setSpan(new te(H(0),H(1))));return Be(...Yi(_i(s))).query(r)};return new J(n,e)};J.prototype.stepBind=function(t){return this.fmap(t).stepJoin()};function Yi(t){const e=t.filter((i,a)=>a.hasSteps).reduce((i,a)=>i.add(a),H(0)),n=Vr(t.map((i,a)=>a._steps)).reduce((i,a)=>i.add(a),H(0)),r=e.eq(0)?void 0:n.div(e);function s(i,a){return a._steps===void 0?[i.mulmaybe(r),a]:[a._steps,a]}return t.map(i=>s(...i))}function _i(t){const e=Bn(t.map(r=>[r.part.begin,r.part.end])),n=Su([H(0),H(1),...e]);return Gu(n).map(r=>[r[1].sub(r[0]),jt(...Qu(new te(...r),t).map(s=>s.value.withHap(i=>i.setContext(i.combineContext(s)))))])}function Qu(t,e){return Vr(e.map(n=>qu(t,n)))}function qu(t,e){const n=t.intersection(e.part);if(n!=null)return new fe(e.whole,n,e.value,e.context)}const $u=T("pace",function(t,e){return e._steps===void 0?e:e._steps.eq(H(0))?cn:e._fast(H(t).div(e._steps)).setSteps(t)});function tc(t,...e){const n=e.map(s=>Ho(s));if(n.length==0)return Rt;t==0&&(t=n[0][1]);const r=[];for(const s of n)s[1]!=0&&(t==s[1]?r.push(s[0]):r.push(s[0]._fast(H(t).div(H(s[1])))));return jt(...r)}function oi(...t){if(Array.isArray(t[0]))return tc(0,...t);if(t=t.filter(r=>r.hasSteps),t.length==0)return Rt;const e=xn(...t.map(r=>r._steps));if(e.eq(H(0)))return cn;const n=jt(...t.map(r=>r.pace(e)));return n._steps=e,n}function Be(...t){if(t.length===0)return cn;const e=a=>Array.isArray(a)?a:[a._steps??1,a];if(t=t.map(e),t.find(a=>a[0]===void 0)){const a=t.map(u=>u[0]).filter(u=>u!==void 0);if(a.length===0)return xe(...t.map(u=>u[1]));if(a.length===t.length)return cn;const o=a.reduce((u,c)=>u.add(c),H(0)).div(a.length);for(let u of t)u[0]===void 0&&(u[0]=o)}if(t.length==1)return O(t[0][1]).withSteps(a=>t[0][0]);const n=t.map(a=>a[0]).reduce((a,o)=>a.add(o),H(0));let r=H(0);const s=[];for(const[a,o]of t){if(H(a).eq(0))continue;const u=r.add(a);s.push(O(o)._compress(r.div(n),u.div(n))),r=u}const i=jt(...s);return i._steps=n,i}function ec(...t){t=t.map(s=>Array.isArray(s)?s.map(O):[O(s)]);const e=xn(...t.map(s=>H(s.length)));let n=[];for(let s=0;s<e;++s)n.push(...t.map(i=>i.length==0?Rt:i[s%i.length]));n=n.filter(s=>s.hasSteps&&s._steps>0);const r=n.reduce((s,i)=>s.add(i._steps),H(0));return n=Be(...n),n._steps=r,n}const nc=ai("take",function(t,e){if(!e.hasSteps||e._steps.lte(0)||(t=H(t),t.eq(0)))return cn;const n=t<0;n&&(t=t.abs());const r=t.div(e._steps);return r.lte(0)?cn:r.gte(1)?e:n?e.zoom(H(1).sub(r),1):e.zoom(0,r)}),rc=ai("drop",function(t,e){return e.hasSteps?(t=H(t),t.lt(0)?e.take(e._steps.add(t)):e.take(H(0).sub(e._steps.sub(t)))):cn}),sc=ai("extend",function(t,e){return e.fast(t).expand(t)}),ic=ai("expand",function(t,e){return e.withSteps(n=>n.mul(H(t)))}),ac=ai("contract",function(t,e){return e.withSteps(n=>n.div(H(t)))});J.prototype.shrinklist=function(t){const e=this;if(!e.hasSteps)return[e];let[n,r]=Array.isArray(t)?t:[t,e._steps];if(n=H(n),r===0||n===0)return[e];const s=n>0,i=[];if(s){const a=H(1).div(e._steps).mul(n);for(let o=0;o<r;++o){const u=a.mul(o);if(u.gt(1))break;i.push([u,1])}}else{n=H(0).sub(n);const a=H(1).div(e._steps).mul(n);for(let o=0;o<r;++o){const u=H(1).sub(a.mul(o));if(u.lt(0))break;i.push([H(0),u])}}return i.map(a=>e.zoom(...a))};const oc=(t,e)=>e.shrinklist(t),uc=T("shrink",function(t,e){if(!e.hasSteps)return cn;const n=e.shrinklist(t),r=Be(...n);return r._steps=n.reduce((s,i)=>s.add(i._steps),H(0)),r},!0,!1,t=>t.stepJoin()),K2=T("grow",function(t,e){if(!e.hasSteps)return cn;const n=e.shrinklist(H(0).sub(t));n.reverse();const r=Be(...n);return r._steps=n.reduce((s,i)=>s.add(i._steps),H(0)),r},!0,!1,t=>t.stepJoin()),cc=function(t,...e){return t.tour(...e)};J.prototype.tour=function(...t){return Be(...[].concat(...t.map((e,n)=>[...t.slice(0,t.length-n),this,...t.slice(t.length-n)]),this,...t))};const lc=function(...t){t=t.filter(r=>r.hasSteps);const e=sr(...t.map(r=>r._slow(r._steps))),n=xn(...t.map(r=>r._steps));return e._fast(n).setSteps(n)},Y2=Be,pa=Be,_2=Be,H2=ec,j2=oi;J.prototype.s_polymeter=J.prototype.polymeter;const J2=uc;J.prototype.s_taper=J.prototype.shrink;const O2=oc;J.prototype.s_taperlist=J.prototype.shrinklist;const U2=nc;J.prototype.s_add=J.prototype.take;const Q2=rc;J.prototype.s_sub=J.prototype.drop;const q2=ic;J.prototype.s_expand=J.prototype.expand;const $2=sc;J.prototype.s_extend=J.prototype.extend;const tM=ac;J.prototype.s_contract=J.prototype.contract;const eM=cc;J.prototype.s_tour=J.prototype.tour;const nM=lc;J.prototype.s_zip=J.prototype.zip;const rM=$u;J.prototype.steps=J.prototype.pace;const sM=T("chop",function(t,e){const n=Array.from({length:t},(i,a)=>a).map(i=>({begin:i/t,end:(i+1)/t})),r=function(i,a){if("begin"in i&&"end"in i&&i.begin!==void 0&&i.end!==void 0){const o=i.end-i.begin;a={begin:i.begin+a.begin*o,end:i.begin+a.end*o}}return Object.assign({},i,a)},s=function(i){return ln(n.map(a=>r(i,a)))};return e.squeezeBind(s).setSteps(Zn?H(t).mulmaybe(e._steps):void 0)}),iM=T("striate",function(t,e){const n=Array.from({length:t},(s,i)=>i).map(s=>({begin:s/t,end:(s+1)/t})),r=sr(...n);return e.set(r)._fast(t).setSteps(Zn?H(t).mulmaybe(e._steps):void 0)}),aM=function(t,e,n=.5){return e.speed(1/t*n).unit("c").slow(t)},hc=T("slice",function(t,e,n){return t.innerBind(r=>e.outerBind(s=>n.outerBind(i=>{i=i instanceof Object?i:{s:i};const a=Array.isArray(r)?r[s]:s/r,o=Array.isArray(r)?r[s+1]:(s+1)/r;return ie({begin:a,end:o,_slices:r,...i})}))).setSteps(e._steps)},!1);J.prototype.onTriggerTime=function(t){return this.onTrigger((e,n,r,s)=>{const i=s-n;window.setTimeout(()=>{t(e)},i*1e3)},!1)};const oM=T("splice",function(t,e,n){const r=hc(t,e,n);return new J(s=>{const i=s.controls._cps||1;return r.query(s).map(a=>a.withValue(o=>({speed:i/o._slices/a.whole.duration*(o.speed||1),unit:"c",...o})))}).setSteps(e._steps)},!1),{loopAt:uM,loopat:cM}=T(["loopAt","loopat"],function(t,e){const n=e._steps?e._steps.div(t):void 0;return new J(r=>aM(t,e,r.controls._cps).query(r),n)}),lM=T("fit",t=>t.withHaps((e,n)=>e.map(r=>r.withValue(s=>{const i=("end"in s?s.end:1)-("begin"in s?s.begin:0);return{...s,speed:(n.controls._cps||1)/r.whole.duration*i,unit:"c"}})))),{loopAtCps:hM,loopatcps:pM}=T(["loopAtCps","loopatcps"],function(t,e,n){return aM(t,n,e)}),dM=t=>ie(1).withValue(()=>O(t())).innerJoin();let H1=t=>t<.5?1:1-(t-.5)/.5,pc=(t,e,n)=>{e=O(e),t=O(t),n=O(n);let r=e.fmap(i=>({gain:H1(i)})),s=e.fmap(i=>({gain:H1(1-i)}));return jt(t.mul(r),n.mul(s))};J.prototype.xfade=function(t,e){return pc(this,t,e)};const sA=t=>(e,n,r)=>{e=H(e).mod(n),n=H(n);const s=e.div(n),i=e.add(1).div(n);return t(r.fmap(a=>ie(a)._compress(s,i)))},{beat:mM}=T(["beat"],sA(t=>t.innerJoin())),da=(t,e,n)=>{n=H(n);const r=H(1).div(t.length),s=o=>{const u=[];for(const[c,l]of o.entries())l&&u.push([H(c).div(o.length),l]);return u},i=si(([o,u],[c,l])=>{const d=n.mul(c-o).add(o),m=d.add(r);return new te(d,m)},s(t),s(e));function a(o){const u=o.span.begin.sam(),c=o.span.cycleArc(),l=[];for(const d of i){const m=d.intersection(c);m!==void 0&&l.push(new fe(d.withTime(f=>f.add(u)),m.withTime(f=>f.add(u)),!0))}return l}return new J(a).splitQueries()},fM=(t,e,n)=>(t=O(t),e=O(e),n=O(n),t.innerBind(r=>e.innerBind(s=>n.innerBind(i=>da(r,s,i)))));function ui(t){let e=Array.isArray(t);t=e?t:[t];const n=t[0],r=i=>{let a;if(typeof i=="object"&&i.value!==void 0&&(a={...i},i=i.value,delete a.value),e&&Array.isArray(i)){const o=a||{};return i.forEach((u,c)=>{c<t.length&&(o[t[c]]=u)}),o}else return a?(a[n]=i,a):{[n]:i}},s=function(i,a){return a?typeof i>"u"?a.fmap(r):a.set(O(i).withValue(r)):O(i).withValue(r)};return J.prototype[n]=function(i){return s(i,this)},s}const Js=new Map;function dc(t){return Js.has(t)}function S(t,...e){const n=Array.isArray(t)?t[0]:t;let r={};return r[n]=ui(t),Js.set(n,n),e.forEach(s=>{r[s]=r[n],Js.set(s,n),J.prototype[s]=J.prototype[n]}),r}const{s:mc,sound:fc}=S(["s","n","gain"],"sound"),{source:yc,src:bc}=S("source","src"),{n:gc}=S("n"),{note:Mc}=S(["note","n"]),{accelerate:Pc}=S("accelerate"),{velocity:Cc}=S("velocity"),{gain:vc}=S("gain"),{postgain:xc}=S("postgain"),{amp:Ac}=S("amp"),{attack:Dc,att:Fc}=S("attack","att"),{fmh:Zc}=S(["fmh","fmi"],"fmh"),{fmi:wc,fm:Xc}=S(["fmi","fmh"],"fm"),{fmenv:Gc}=S("fmenv"),{fmattack:Sc}=S("fmattack"),{fmwave:Ec}=S("fmwave"),{fmdecay:Vc}=S("fmdecay"),{fmsustain:kc}=S("fmsustain"),{fmrelease:Bc}=S("fmrelease"),{fmvelocity:Lc}=S("fmvelocity"),{bank:Wc}=S("bank"),{analyze:Rc}=S("analyze"),{fft:Tc}=S("fft"),{decay:zc,dec:Ic}=S("decay","dec"),{sustain:Nc,sus:Kc}=S("sustain","sus"),{release:Yc,rel:_c}=S("release","rel"),{hold:Hc}=S("hold"),{bandf:jc,bpf:Jc,bp:Oc}=S(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:Uc,bpq:Qc}=S("bandq","bpq"),{begin:qc}=S("begin"),{end:$c}=S("end"),{loop:tl}=S("loop"),{loopBegin:el,loopb:nl}=S("loopBegin","loopb"),{loopEnd:rl,loope:sl}=S("loopEnd","loope"),{crush:il}=S("crush"),{coarse:al}=S("coarse"),{tremolo:ol}=S(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync:ul}=S(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth:cl}=S("tremolodepth","tremdepth"),{tremoloskew:ll}=S("tremoloskew","tremskew"),{tremolophase:hl}=S("tremolophase","tremphase"),{tremoloshape:pl}=S("tremoloshape","tremshape"),{duck:dl}=S("duckorbit","duck"),{duckdepth:ml}=S("duckdepth"),{duckattack:fl}=S("duckattack","duckatt"),{drive:yl}=S("drive"),{byteBeatExpression:bl,bbexpr:gl}=S("byteBeatExpression","bbexpr"),{byteBeatStartTime:Ml,bbst:Pl}=S("byteBeatStartTime","bbst"),{channels:Cl,ch:vl}=S("channels","ch"),{pw:xl}=S(["pw","pwrate","pwsweep"]),{pwrate:Al}=S("pwrate"),{pwsweep:Dl}=S("pwsweep"),{phaserrate:Fl,ph:Zl,phaser:wl}=S(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:Xl,phs:Gl}=S("phasersweep","phs"),{phasercenter:Sl,phc:El}=S("phasercenter","phc"),{phaserdepth:Vl,phd:kl,phasdp:Bl}=S("phaserdepth","phd","phasdp"),{channel:Ll}=S("channel"),{cut:Wl}=S("cut"),{cutoff:Rl,ctf:Tl,lpf:zl,lp:Il}=S(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:Nl,lpe:Kl}=S("lpenv","lpe"),{hpenv:Yl,hpe:_l}=S("hpenv","hpe"),{bpenv:Hl,bpe:jl}=S("bpenv","bpe"),{lpattack:Jl,lpa:Ol}=S("lpattack","lpa"),{hpattack:Ul,hpa:Ql}=S("hpattack","hpa"),{bpattack:ql,bpa:$l}=S("bpattack","bpa"),{lpdecay:th,lpd:eh}=S("lpdecay","lpd"),{hpdecay:nh,hpd:rh}=S("hpdecay","hpd"),{bpdecay:sh,bpd:ih}=S("bpdecay","bpd"),{lpsustain:ah,lps:oh}=S("lpsustain","lps"),{hpsustain:uh,hps:ch}=S("hpsustain","hps"),{bpsustain:lh,bps:hh}=S("bpsustain","bps"),{lprelease:ph,lpr:dh}=S("lprelease","lpr"),{hprelease:mh,hpr:fh}=S("hprelease","hpr"),{bprelease:yh,bpr:bh}=S("bprelease","bpr"),{ftype:gh}=S("ftype"),{fanchor:Mh}=S("fanchor"),{vib:Ph,vibrato:Ch,v:vh}=S(["vib","vibmod"],"vibrato","v"),{noise:xh}=S("noise"),{vibmod:Ah,vmod:Dh}=S(["vibmod","vib"],"vmod"),{hcutoff:Fh,hpf:Zh,hp:wh}=S(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:Xh,hpq:Gh}=S("hresonance","hpq"),{resonance:Sh,lpq:Eh}=S("resonance","lpq"),{djf:Vh}=S("djf"),{delay:kh}=S(["delay","delaytime","delayfeedback"]),{delayfeedback:Bh,delayfb:Lh,dfb:Wh}=S("delayfeedback","delayfb","dfb"),{delaytime:Rh,delayt:Th,dt:zh}=S("delaytime","delayt","dt"),{delaysync:Ih}=S("delaysync"),{lock:Nh}=S("lock"),{detune:Kh,det:Yh}=S("detune","det"),{unison:_h}=S("unison"),{spread:Hh}=S("spread"),{dry:jh}=S("dry"),{fadeTime:Jh,fadeOutTime:Oh}=S("fadeTime","fadeOutTime"),{fadeInTime:Uh}=S("fadeInTime"),{freq:Qh}=S("freq"),{pattack:qh,patt:$h}=S("pattack","patt"),{pdecay:tp,pdec:ep}=S("pdecay","pdec"),{psustain:np,psus:rp}=S("psustain","psus"),{prelease:sp,prel:ip}=S("prelease","prel"),{penv:ap}=S("penv"),{pcurve:op}=S("pcurve"),{panchor:up}=S("panchor"),{gate:cp,gat:lp}=S("gate","gat"),{leslie:hp}=S("leslie"),{lrate:pp}=S("lrate"),{lsize:dp}=S("lsize"),{activeLabel:mp}=S("activeLabel"),{label:fp}=S(["label","activeLabel"]),{degree:yp}=S("degree"),{mtranspose:bp}=S("mtranspose"),{ctranspose:gp}=S("ctranspose"),{harmonic:Mp}=S("harmonic"),{stepsPerOctave:Pp}=S("stepsPerOctave"),{octaveR:Cp}=S("octaveR"),{nudge:vp}=S("nudge"),{octave:xp}=S("octave"),{orbit:Ap}=S("orbit"),{overgain:Dp}=S("overgain"),{overshape:Fp}=S("overshape"),{pan:Zp}=S("pan"),{panspan:wp}=S("panspan"),{pansplay:Xp}=S("pansplay"),{panwidth:Gp}=S("panwidth"),{panorient:Sp}=S("panorient"),{rate:Ep}=S("rate"),{slide:Vp}=S("slide"),{semitone:kp}=S("semitone"),{voice:Bp}=S("voice"),{chord:Lp}=S("chord"),{dictionary:Wp,dict:Rp}=S("dictionary","dict"),{anchor:Tp}=S("anchor"),{offset:zp}=S("offset"),{octaves:Ip}=S("octaves"),{mode:Np}=S(["mode","anchor"]),{room:Kp}=S(["room","size"]),{roomlp:Yp,rlp:_p}=S("roomlp","rlp"),{roomdim:Hp,rdim:jp}=S("roomdim","rdim"),{roomfade:Jp,rfade:Op}=S("roomfade","rfade"),{ir:Up,iresponse:Qp}=S(["ir","i"],"iresponse"),{irspeed:qp}=S("irspeed"),{irbegin:$p}=S("irbegin"),{roomsize:td,size:ed,sz:nd,rsize:rd}=S("roomsize","size","sz","rsize"),{shape:sd}=S(["shape","shapevol"]),{distort:id,dist:ad}=S(["distort","distortvol"],"dist"),{compressor:od}=S(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:ud}=S("compressorKnee"),{compressorRatio:cd}=S("compressorRatio"),{compressorAttack:ld}=S("compressorAttack"),{compressorRelease:hd}=S("compressorRelease"),{speed:ma}=S("speed"),{stretch:pd}=S("stretch"),{unit:dd}=S("unit"),{squiz:md}=S("squiz"),{vowel:fd}=S("vowel"),{waveloss:yd}=S("waveloss"),{density:iA}=S("density"),{expression:bd}=S("expression"),{sustainpedal:gd}=S("sustainpedal"),{fshift:Md}=S("fshift"),{fshiftnote:Pd}=S("fshiftnote"),{fshiftphase:Cd}=S("fshiftphase"),{triode:vd}=S("triode"),{krush:xd}=S("krush"),{kcutoff:Ad}=S("kcutoff"),{octer:Dd}=S("octer"),{octersub:Fd}=S("octersub"),{octersubsub:Zd}=S("octersubsub"),{ring:wd}=S("ring"),{ringf:Xd}=S("ringf"),{ringdf:Gd}=S("ringdf"),{freeze:Sd}=S("freeze"),{xsdelay:Ed}=S("xsdelay"),{tsdelay:Vd}=S("tsdelay"),{real:kd}=S("real"),{imag:Bd}=S("imag"),{enhance:Ld}=S("enhance"),{partials:Wd}=S("partials"),{comb:Rd}=S("comb"),{smear:Td}=S("smear"),{scram:zd}=S("scram"),{binshift:Id}=S("binshift"),{hbrick:Nd}=S("hbrick"),{lbrick:Kd}=S("lbrick"),{frameRate:Yd}=S("frameRate"),{frames:_d}=S("frames"),{hours:Hd}=S("hours"),{minutes:jd}=S("minutes"),{seconds:Jd}=S("seconds"),{songPtr:Od}=S("songPtr"),{uid:Ud}=S("uid"),{val:Qd}=S("val"),{cps:qd}=S("cps"),{clip:$d,legato:t0}=S("clip","legato"),{duration:e0,dur:n0}=S("duration","dur"),{zrand:r0}=S("zrand"),{curve:s0}=S("curve"),{deltaSlide:i0}=S("deltaSlide"),{pitchJump:a0}=S("pitchJump"),{pitchJumpTime:o0}=S("pitchJumpTime"),{lfo:u0,repeatTime:c0}=S("lfo","repeatTime"),{znoise:l0}=S("znoise"),{zmod:h0}=S("zmod"),{zcrush:p0}=S("zcrush"),{zdelay:d0}=S("zdelay"),{zzfx:m0}=S("zzfx"),{color:f0,colour:y0}=S(["color","colour"]);let fa=(...t)=>t.reduce((e,n)=>Object.assign(e,{[n]:ui(n)}),{});const b0=T("adsr",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,r,s,i]=t;return e.set({attack:n,decay:r,sustain:s,release:i})}),g0=T("ad",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,r=n]=t;return e.attack(n).decay(r)}),M0=T("ds",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,r=0]=t;return e.set({decay:n,sustain:r})}),P0=T("ar",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,r=n]=t;return e.set({attack:n,release:r})}),{midichan:C0}=S("midichan"),{midimap:v0}=S("midimap"),{midiport:x0}=S("midiport"),{midicmd:A0}=S("midicmd"),D0=T("control",(t,e)=>{if(!Array.isArray(t))throw new Error("control expects an array of [ccn, ccv]");const[n,r]=t;return e.ccn(n).ccv(r)}),{ccn:F0}=S("ccn"),{ccv:Z0}=S("ccv"),{ctlNum:w0}=S("ctlNum"),{nrpnn:X0}=S("nrpnn"),{nrpv:G0}=S("nrpv"),{progNum:S0}=S("progNum"),E0=T("sysex",(t,e)=>{if(!Array.isArray(t))throw new Error("sysex expects an array of [id, data]");const[n,r]=t;return e.sysexid(n).sysexdata(r)}),{sysexid:V0}=S("sysexid"),{sysexdata:k0}=S("sysexdata"),{midibend:B0}=S("midibend"),{miditouch:L0}=S("miditouch"),{polyTouch:W0}=S("polyTouch"),ya=t=>Js.has(t)?Js.get(t):t,R0=T("as",(t,e)=>(t=Array.isArray(t)?t:[t],e.fmap(n=>(n=Array.isArray(n)?n:[n],n=Object.fromEntries(t.map((r,s)=>[ya(r),n[s]])),n)))),T0=T("scrub",(t,e)=>t.outerBind(n=>{Array.isArray(n)||(n=[n]);const[r,s=1]=n;return e.begin(r).mul(ma(s)).clip(1)}),!1),yM=Object.freeze(Object.defineProperty({__proto__:null,accelerate:Pc,activeLabel:mp,ad:g0,adsr:b0,amp:Ac,analyze:Rc,anchor:Tp,ar:P0,as:R0,att:Fc,attack:Dc,bandf:jc,bandq:Uc,bank:Wc,bbexpr:gl,bbst:Pl,begin:qc,binshift:Id,bp:Oc,bpa:$l,bpattack:ql,bpd:ih,bpdecay:sh,bpe:jl,bpenv:Hl,bpf:Jc,bpq:Qc,bpr:bh,bprelease:yh,bps:hh,bpsustain:lh,byteBeatExpression:bl,byteBeatStartTime:Ml,ccn:F0,ccv:Z0,ch:vl,channel:Ll,channels:Cl,chord:Lp,clip:$d,coarse:al,color:f0,colour:y0,comb:Rd,compressor:od,compressorAttack:ld,compressorKnee:ud,compressorRatio:cd,compressorRelease:hd,control:D0,cps:qd,createParam:ui,createParams:fa,crush:il,ctf:Tl,ctlNum:w0,ctranspose:gp,curve:s0,cut:Wl,cutoff:Rl,dec:Ic,decay:zc,degree:yp,delay:kh,delayfb:Lh,delayfeedback:Bh,delaysync:Ih,delayt:Th,delaytime:Rh,deltaSlide:i0,density:iA,det:Yh,detune:Kh,dfb:Wh,dict:Rp,dictionary:Wp,dist:ad,distort:id,djf:Vh,drive:yl,dry:jh,ds:M0,dt:zh,duck:dl,duckattack:fl,duckdepth:ml,dur:n0,duration:e0,end:$c,enhance:Ld,expression:bd,fadeInTime:Uh,fadeOutTime:Oh,fadeTime:Jh,fanchor:Mh,fft:Tc,fm:Xc,fmattack:Sc,fmdecay:Vc,fmenv:Gc,fmh:Zc,fmi:wc,fmrelease:Bc,fmsustain:kc,fmvelocity:Lc,fmwave:Ec,frameRate:Yd,frames:_d,freeze:Sd,freq:Qh,fshift:Md,fshiftnote:Pd,fshiftphase:Cd,ftype:gh,gain:vc,gat:lp,gate:cp,getControlName:ya,harmonic:Mp,hbrick:Nd,hcutoff:Fh,hold:Hc,hours:Hd,hp:wh,hpa:Ql,hpattack:Ul,hpd:rh,hpdecay:nh,hpe:_l,hpenv:Yl,hpf:Zh,hpq:Gh,hpr:fh,hprelease:mh,hps:ch,hpsustain:uh,hresonance:Xh,imag:Bd,ir:Up,irbegin:$p,iresponse:Qp,irspeed:qp,isControlName:dc,kcutoff:Ad,krush:xd,label:fp,lbrick:Kd,legato:t0,leslie:hp,lfo:u0,lock:Nh,loop:tl,loopBegin:el,loopEnd:rl,loopb:nl,loope:sl,lp:Il,lpa:Ol,lpattack:Jl,lpd:eh,lpdecay:th,lpe:Kl,lpenv:Nl,lpf:zl,lpq:Eh,lpr:dh,lprelease:ph,lps:oh,lpsustain:ah,lrate:pp,lsize:dp,midibend:B0,midichan:C0,midicmd:A0,midimap:v0,midiport:x0,miditouch:L0,minutes:jd,mode:Np,mtranspose:bp,n:gc,noise:xh,note:Mc,nrpnn:X0,nrpv:G0,nudge:vp,octave:xp,octaveR:Cp,octaves:Ip,octer:Dd,octersub:Fd,octersubsub:Zd,offset:zp,orbit:Ap,overgain:Dp,overshape:Fp,pan:Zp,panchor:up,panorient:Sp,panspan:wp,pansplay:Xp,panwidth:Gp,partials:Wd,patt:$h,pattack:qh,pcurve:op,pdec:ep,pdecay:tp,penv:ap,ph:Zl,phasdp:Bl,phaser:wl,phasercenter:Sl,phaserdepth:Vl,phaserrate:Fl,phasersweep:Xl,phc:El,phd:kl,phs:Gl,pitchJump:a0,pitchJumpTime:o0,polyTouch:W0,postgain:xc,prel:ip,prelease:sp,progNum:S0,psus:rp,psustain:np,pw:xl,pwrate:Al,pwsweep:Dl,rate:Ep,rdim:jp,real:kd,registerControl:S,rel:_c,release:Yc,repeatTime:c0,resonance:Sh,rfade:Op,ring:wd,ringdf:Gd,ringf:Xd,rlp:_p,room:Kp,roomdim:Hp,roomfade:Jp,roomlp:Yp,roomsize:td,rsize:rd,s:mc,scram:zd,scrub:T0,seconds:Jd,semitone:kp,shape:sd,size:ed,slide:Vp,smear:Td,songPtr:Od,sound:fc,source:yc,speed:ma,spread:Hh,squiz:md,src:bc,stepsPerOctave:Pp,stretch:pd,sus:Kc,sustain:Nc,sustainpedal:gd,sysex:E0,sysexdata:k0,sysexid:V0,sz:nd,tremolo:ol,tremolodepth:cl,tremolophase:hl,tremoloshape:pl,tremoloskew:ll,tremolosync:ul,triode:vd,tsdelay:Vd,uid:Ud,unison:_h,unit:dd,v:vh,val:Qd,velocity:Cc,vib:Ph,vibmod:Ah,vibrato:Ch,vmod:Dh,voice:Bp,vowel:fd,waveloss:yd,xsdelay:Ed,zcrush:p0,zdelay:d0,zmod:h0,znoise:l0,zrand:r0,zzfx:m0},Symbol.toStringTag,{value:"Module"})),aA=function(t,e){const[n,r]=t,[s,i]=e,[a,o]=ua(r,s);return[[r,n-r],[si((u,c)=>u.concat(c),a,i),o]]},oA=function(t,e){const[n,r]=t,[s,i]=e,[a,o]=ua(n,i);return[[n,r-n],[si((u,c)=>u.concat(c),s,a),o]]},bM=function(t,e){const[n,r]=t;return Math.min(n,r)<=1?[t,e]:bM(...n>r?aA(t,e):oA(t,e))},ba=function(t,e){const n=t<0,r=Math.abs(t),s=e-r,i=Array(r).fill([1]),a=Array(s).fill([0]),o=bM([r,s],[i,a]),u=Bn(o[1][0]).concat(Bn(o[1][1]));return n?u.map(c=>1-c):u},ga=function(t,e,n){const r=ba(t,e);return n?Zu(r,-n):r},gM=T("euclid",function(t,e,n){return n.struct(ga(t,e,0))}),MM=T("e",function(t,e){Array.isArray(t)||(t=[t]);const[n,r=n,s=0]=t;return e.struct(ga(n,r,s))}),{euclidrot:PM,euclidRot:CM}=T(["euclidrot","euclidRot"],function(t,e,n,r){return r.struct(ga(t,e,n))}),vM=function(t,e,n,r){if(t<1)return Rt;const s=ga(t,e,0).join("").split("1").slice(1).map(i=>[i.length+1,!0]);return r.struct(pa(...s)).late(H(n).div(e))},xM=T(["euclidLegato"],function(t,e,n){return vM(t,e,0,n)}),AM=T(["euclidLegatoRot"],function(t,e,n,r){return vM(t,e,n,r)}),{euclidish:DM,eish:FM}=T(["euclidish","eish"],function(t,e,n,r){const s=da(ba(t,e),new Array(t).fill(1),n);return r.struct(s).setSteps(e)});function z0(t,e,n=.05,r=.1,s=.1,i=globalThis.setInterval,a=globalThis.clearInterval,o=!0){let u=0,c=0,l=10**4,d=.01;const m=D=>n=D(n);s=s||r/2;const f=()=>{const D=t(),G=D+r+s;for(c===0&&(c=D+d);c<G;)c=o?Math.round(c*l)/l:c,e(c,n,u,D),c+=n,u++};let g;const b=()=>{x(),f(),g=i(f,r*1e3)},x=()=>{g!==void 0&&a(g),g=void 0};return{setDuration:m,start:b,stop:()=>{u=0,c=0,x()},pause:()=>x(),duration:n,interval:r,getPhase:()=>c,minLatency:d}}function ZM(t){return new J(e=>[new fe(void 0,e.span,t)])}const Oe=t=>{const e=n=>[new fe(void 0,n.span,t(n.span.begin))];return new J(e)},ms=Oe(t=>t%1),Ma=ms.toBipolar(),ci=Oe(t=>1-t%1),Pa=ci.toBipolar(),Ca=Oe(t=>Math.sin(Math.PI*2*t)),I0=Ca.fromBipolar(),wM=I0._early(H(1).div(4)),XM=Ca._early(H(1).div(4)),N0=Oe(t=>Math.floor(t*2%2)),GM=N0.toBipolar(),SM=xe(ms,ci),EM=xe(Ma,Pa),VM=xe(ci,ms),kM=xe(Pa,Ma),va=Oe(Ar);let K0=0,Y0=0;typeof window<"u"&&document.addEventListener("mousemove",t=>{K0=t.clientY/document.body.clientHeight,Y0=t.clientX/document.body.clientWidth});const BM=Oe(()=>K0),LM=Oe(()=>K0),WM=Oe(()=>Y0),RM=Oe(()=>Y0),TM=t=>{const e=t<<13^t,n=e>>17^e;return n<<5^n},uA=t=>t-Math.trunc(t),zM=t=>TM(Math.trunc(uA(t/300)*536870912)),IM=t=>t%536870912/536870912,Os=t=>Math.abs(IM(zM(t))),cA=(t,e)=>{const n=[];for(let r=0;r<e;++r)n.push(IM(t)),t=TM(t);return n},lA=(t,e)=>cA(zM(t),e),_0=t=>ms.range(0,t).round().segment(t),NM=t=>{const e=O(t).log2(0).floor().add(1);return H0(t,e)},H0=(t,e=16)=>{e=O(e);const n=_0(e).mul(-1).add(e.sub(1));return O(t).segment(e).brshift(n).band(ie(1))},j0=t=>Oe(e=>{const n=lA(e.floor().add(.5),t).map((s,i)=>[s,i]).sort((s,i)=>(s[0]>i[0])-(s[0]<i[0])).map(s=>s[1]),r=e.cyclePos().mul(t).floor()%t;return n[r]})._segment(t),KM=(t,e,n)=>{const r=[...Array(e).keys()].map(s=>n.zoom(H(s).div(e),H(s+1).div(e)));return t.fmap(s=>r[s].repeatCycles(e)._fast(e)).innerJoin()},YM=T("shuffle",(t,e)=>KM(j0(t),t,e)),_M=T("scramble",(t,e)=>KM(Aa(t)._segment(t),t,e)),we=Oe(Os),HM=we.toBipolar(),xa=t=>we.fmap(e=>e<t),jM=t=>O(t).fmap(xa).innerJoin(),JM=xa(.5),Aa=t=>we.fmap(e=>Math.trunc(e*t)),OM=t=>O(t).fmap(Aa).innerJoin(),Da=(t,e)=>(e=e.map(O),e.length==0?Rt:t.range(0,e.length).fmap(n=>{const r=Math.min(Math.max(Math.floor(n),0),e.length-1);return e[r]})),li=(t,e)=>Da(t,e).outerJoin(),hi=(t,e)=>Da(t,e).innerJoin(),J0=(...t)=>li(we,t),UM=(...t)=>hi(we,t),QM=J0;J.prototype.choose=function(...t){return li(this,t)};J.prototype.choose2=function(...t){return li(this.fromBipolar(),t)};const O0=(...t)=>hi(we.segment(1),t),qM=O0,$M=function(t,...e){const n=e.map(o=>O(o[0])),r=[];let s=ie(0);for(const o of e)s=s.add(o[1]),r.push(s);const i=zu(r),a=function(o){const u=s.mul(o);return i.fmap(c=>l=>n[c.findIndex(d=>d>l,c)]).appLeft(u)};return t.bind(a)},hA=(...t)=>$M(...t).outerJoin(),t3=(...t)=>hA(we,...t),U0=(...t)=>$M(we.segment(1),...t).innerJoin(),e3=U0;function pA(t){let e=Math.floor(t),n=e+1;const r=s=>6*s**5-15*s**4+10*s**3;return(s=>i=>a=>i+r(s)*(a-i))(t-e)(Os(e))(Os(n))}const Q0=t=>t.fmap(pA);function dA(t){const e=Math.floor(t),n=e+1,r=Os(e),s=Os(n)+r,i=(t-e)/(n-e);return((a,o,u)=>a+(o-a)*u)(r,s,i)/2}const q0=t=>t.fmap(dA),n3=Q0(va.fmap(t=>Number(t))),r3=q0(va.fmap(t=>Number(t))),s3=T("degradeByWith",(t,e,n)=>n.fmap(r=>s=>r).appLeft(t.filterValues(r=>r>e)),!0,!0),i3=T("degradeBy",function(t,e){return e._degradeByWith(we,t)},!0,!0),a3=T("degrade",t=>t._degradeBy(.5),!0,!0),o3=T("undegradeBy",function(t,e){return e._degradeByWith(we.fmap(n=>1-n),t)},!0,!0),u3=T("undegrade",t=>t._undegradeBy(.5),!0,!0),c3=T("sometimesBy",function(t,e,n){return O(t).fmap(r=>jt(n._degradeBy(r),e(n._undegradeBy(1-r)))).innerJoin()}),l3=T("sometimes",function(t,e){return e._sometimesBy(.5,t)}),h3=T("someCyclesBy",function(t,e,n){return O(t).fmap(r=>jt(n._degradeByWith(we._segment(1),r),e(n._degradeByWith(we.fmap(s=>1-s)._segment(1),1-r)))).innerJoin()}),p3=T("someCycles",function(t,e){return e._someCyclesBy(.5,t)}),d3=T("often",function(t,e){return e.sometimesBy(.75,t)}),m3=T("rarely",function(t,e){return e.sometimesBy(.25,t)}),f3=T("almostNever",function(t,e){return e.sometimesBy(.1,t)}),y3=T("almostAlways",function(t,e){return e.sometimesBy(.9,t)}),b3=T("never",function(t,e){return e}),g3=T("always",function(t,e){return t(e)});function Fa(t){Array.isArray(t)===!1&&(t=[t]);const e=Wu();return t.every(n=>{const r=Lu.get(n)??n;return e[r]})}const M3=T("whenKey",function(t,e,n){return n.when(Fa(t),e)}),P3=T("keyDown",function(t){return t.fmap(Fa)}),Tn=function(t,e,n=!0){const r=Array.isArray(t),s=Object.keys(t).length;return t=ku(t,O),s===0?Rt:e.fmap(i=>{let a=i;return r&&(a=n?Math.round(a)%s:ii(Math.round(a),0,t.length-1)),t[a]})},$0=function(t,e){return Array.isArray(e)&&([e,t]=[t,e]),mA(t,e)},mA=T("pick",function(t,e){return Tn(t,e,!1).innerJoin()}),tm=T("pickmod",function(t,e){return Tn(t,e,!0).innerJoin()}),C3=T("pickF",function(t,e,n){return n.apply($0(t,e))}),v3=T("pickmodF",function(t,e,n){return n.apply(tm(t,e))}),x3=T("pickOut",function(t,e){return Tn(t,e,!1).outerJoin()}),A3=T("pickmodOut",function(t,e){return Tn(t,e,!0).outerJoin()}),D3=T("pickRestart",function(t,e){return Tn(t,e,!1).restartJoin()}),F3=T("pickmodRestart",function(t,e){return Tn(t,e,!0).restartJoin()}),Z3=T("pickReset",function(t,e){return Tn(t,e,!1).resetJoin()}),w3=T("pickmodReset",function(t,e){return Tn(t,e,!0).resetJoin()}),{inhabit:X3,pickSqueeze:G3}=T(["inhabit","pickSqueeze"],function(t,e){return Tn(t,e,!1).squeezeJoin()}),{inhabitmod:S3,pickmodSqueeze:E3}=T(["inhabitmod","pickmodSqueeze"],function(t,e){return Tn(t,e,!0).squeezeJoin()}),V3=(t,e)=>(e=e.map(O),e.length==0?Rt:t.fmap(n=>{const r=Je(Math.round(n),e.length);return e[r]}).squeezeJoin());let ns;try{ns=window==null?void 0:window.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let j1=ns==null?void 0:ns.getVoices();function fA(t,e,n){ns.cancel();const r=new SpeechSynthesisUtterance(t);r.lang=e,j1=ns.getVoices();const s=j1.filter(i=>i.lang.includes(e));typeof n=="number"?r.voice=s[n%s.length]:typeof n=="string"&&(r.voice=s.find(i=>i.name===i)),speechSynthesis.speak(r)}const k3=T("speak",function(t,e,n){return n.onTrigger(r=>{fA(r.value,t,e)})}),em={},Us=async(...t)=>{const e=await Promise.allSettled(t),n=e.filter(r=>r.status==="fulfilled").map(r=>r.value);return e.forEach((r,s)=>{r.status==="rejected"&&console.warn(`evalScope: module with index ${s} could not be loaded:`,r.reason)}),n.forEach(r=>{Object.entries(r).forEach(([s,i])=>{globalThis[s]=i,em[s]=i})}),n};function yA(t,e={}){const{wrapExpression:n=!0,wrapAsync:r=!0}=e;n&&(t=`{${t}}`),r&&(t=`(async ()=>${t})()`);const s=`"use strict";return (${t})`;return Function(s)()}const B3=async(t,e,n)=>{let r={};if(e){const s=e(t,n);t=s.output,r=s}return{mode:"javascript",pattern:await yA(t,{wrapExpression:!!e}),meta:r}};class bA{constructor({onTrigger:e,onToggle:n,getTime:r}){this.started=!1,this.cps=.5,this.getTime=r,this.time_at_last_tick_message=0,this.collator=new Bu({getTargetClockTime:r}),this.onToggle=n,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL(""+new URL("data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEwoKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkqLjAwMX1sZXQgXz0wLHI9MCxvPS41O2NvbnN0IGg9bmV3IE1hcCxtPS4xLE09bmV3IEJyb2FkY2FzdENoYW5uZWwoInN0cnVkZWx0aWNrIiksYj0ocyxlKT0+e00ucG9zdE1lc3NhZ2Uoe3R5cGU6cyxwYXlsb2FkOmV9KX0sQz1FKEwsKHMsZSx0LG4pPT57Y29uc3QgaT1yKmUsZD1zLW4sYz1uK2QsdT1pKm8sbD1fK3UsZz1uLWMtZSxmPWUqbyxwPWwrZix5PWwrZypvO2IoInRpY2siLHtiZWdpbjpsLGVuZDpwLGNwczpvLHRpbWU6bixjeWNsZTp5fSkscisrfSxtKTtsZXQgaz0hMTtjb25zdCBJPXM9PntoLnNldChzLHtzdGFydGVkOiEwfSksIWsmJihDLnN0YXJ0KCksaz0hMCl9LEE9YXN5bmMgcz0+e2guc2V0KHMse3N0YXJ0ZWQ6ITF9KTtjb25zdCBlPUFycmF5LmZyb20oaC52YWx1ZXMoKSkuc29tZSh0PT50LnN0YXJ0ZWQpOyFrfHxlfHwoQy5zdG9wKCksdygwKSxrPSExKX0sdz1zPT57cj0wLF89c30sRD1zPT57Y29uc3R7dHlwZTplLHBheWxvYWQ6dH09cztzd2l0Y2goZSl7Y2FzZSJjcHNjaGFuZ2UiOntpZih0LmNwcyE9PW8pe2NvbnN0IG49ciptO189XytuKm8sbz10LmNwcyxyPTB9YnJlYWt9Y2FzZSJzZXRjeWNsZSI6e3codC5jeWNsZSk7YnJlYWt9Y2FzZSJ0b2dnbGUiOnt0LnN0YXJ0ZWQ/SShzLmlkKTpBKHMuaWQpO2JyZWFrfX19O3NlbGYub25jb25uZWN0PWZ1bmN0aW9uKHMpe2NvbnN0IGU9cy5wb3J0c1swXTtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKHQpe0QodC5kYXRhKX0pLGUuc3RhcnQoKX07ZnVuY3Rpb24gRShzLGUsdD0uMDUsbj0uMSxpPS4xKXtsZXQgZD0wLGM9MCx1PTEwKio0LGw9LjAxO2NvbnN0IGc9YT0+dD1hKHQpO2k9aXx8bi8yO2NvbnN0IGY9KCk9Pntjb25zdCBhPXMoKSxPPWErbitpO2ZvcihjPT09MCYmKGM9YStsKTtjPE87KWM9TWF0aC5yb3VuZChjKnUpL3UsYz49YSYmZShjLHQsZCxhKSxjPGEmJmNvbnNvbGUubG9nKCJUT08gTEFURSIsYyksYys9dCxkKyt9O2xldCBwO2NvbnN0IHk9KCk9PntUKCksZigpLHA9c2V0SW50ZXJ2YWwoZixuKjFlMyl9LFQ9KCk9PnAhPT12b2lkIDAmJmNsZWFySW50ZXJ2YWwocCk7cmV0dXJue3NldER1cmF0aW9uOmcsc3RhcnQ6eSxzdG9wOigpPT57ZD0wLGM9MCxUKCl9LHBhdXNlOigpPT5UKCksZHVyYXRpb246dCxpbnRlcnZhbDpuLGdldFBoYXNlOigpPT5jLG1pbkxhdGVuY3k6bH19fSkoKTsK",import.meta.url).href,import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const s=a=>{const{cps:o,begin:u,end:c,cycle:l,time:d}=a;this.cps=o,this.cycle=l;const m=this.collator.calculateOffset(d)+d;i(u,c,m),this.time_at_last_tick_message=m},i=(a,o,u)=>{this.started!==!1&&this.pattern.queryArc(a,o,{_cps:this.cps}).forEach(c=>{if(c.hasOnset()){const l=Ki(c.whole.begin-this.cycle,this.cps)+u+this.latency,d=Ki(c.duration,this.cps);e==null||e(c,0,d,this.cps,l)}})};this.channel.onmessage=a=>{if(!this.started)return;const{payload:o,type:u}=a.data;switch(u){case"tick":s(o)}}}sendMessage(e,n){this.worker.port.postMessage({type:e,payload:n,id:this.id})}now(){const e=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+e}setCps(e=1){this.sendMessage("cpschange",{cps:e})}setCycle(e){this.sendMessage("setcycle",{cycle:e})}setStarted(e){var n;this.sendMessage("toggle",{started:e}),this.started=e,(n=this.onToggle)==null||n.call(this,e)}start(){le("[cyclist] start"),this.setStarted(!0)}stop(){le("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(e,n=!1){this.pattern=e,n&&!this.started&&this.start()}log(e,n,r){const s=r.filter(i=>i.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(s.length).fill("I").join("")}`)}}class nm{constructor({interval:e,onTrigger:n,onToggle:r,onError:s,getTime:i,latency:a=.1,setInterval:o,clearInterval:u,beforeStart:c}){this.started=!1,this.beforeStart=c,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=i,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=r,this.latency=a,this.clock=z0(i,(l,d,m,f)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=l),this.num_ticks_since_cps_change++;const g=this.num_ticks_since_cps_change*d*this.cps;try{const b=this.lastEnd;this.lastBegin=b;const x=this.num_cycles_at_cps_change+g;if(this.lastEnd=x,this.lastTick=l,l<f){console.log("skip query: too late");return}this.pattern.queryArc(b,x,{_cps:this.cps}).forEach(D=>{if(D.hasOnset()){const G=(D.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+a,k=D.duration/this.cps,Z=G-l;n==null||n(D,Z,k,this.cps,G),D.value.cps!==void 0&&this.cps!=D.value.cps&&(this.cps=D.value.cps,this.num_ticks_since_cps_change=0)}})}catch(b){Cu(b),s==null||s(b)}},e,.1,.1,o,u)}now(){if(!this.started)return 0;const e=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+e*this.cps}setStarted(e){var n;this.started=e,(n=this.onToggle)==null||n.call(this,e)}async start(){var e;if(await((e=this.beforeStart)==null?void 0:e.call(this)),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");le("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){le("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){le("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(e,n=!1){this.pattern=e,n&&!this.started&&await this.start()}setCps(e=.5){this.cps!==e&&(this.cps=e,this.num_ticks_since_cps_change=0)}log(e,n,r){const s=r.filter(i=>i.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(s.length).fill("I").join("")}`)}}let jo;function Hi(){if(!jo)throw new Error("no time set! use setTime to define a time source");return jo()}function Qs(t){jo=t}function L3({defaultOutput:t,onEvalError:e,beforeEval:n,beforeStart:r,afterEval:s,getTime:i,transpiler:a,onToggle:o,editPattern:u,onUpdateState:c,sync:l=!1,setInterval:d,clearInterval:m,id:f,mondo:g=!1}){const b={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},x={id:f},D=$=>{Object.assign(b,$),b.isDirty=b.code!==b.activeCode,b.error=b.evalError||b.schedulerError,c==null||c(b)},G={onTrigger:rm({defaultOutput:t,getTime:i}),getTime:i,onToggle:$=>{D({started:$}),o==null||o($)},setInterval:d,clearInterval:m,beforeStart:r},k=l&&typeof SharedWorker<"u"?new bA(G):new nm(G);let Z={},A=0,V;const E=function(){return Z={},A=0,V=void 0,Rt},B=async($,mt=!0)=>($=(u==null?void 0:u($))||$,await k.setPattern($,mt),$);Qs(()=>k.now());const K=()=>k.stop(),R=()=>k.start(),j=()=>k.pause(),W=()=>k.toggle(),_=$=>k.setCps($),nt=$=>k.setCps($/60);let ut=[];const tt=function($){return ut.push($),Rt},st=function($){return V=$,Rt},q=()=>{J.prototype.p=function(mt){return typeof mt=="string"&&(mt.startsWith("_")||mt.endsWith("_"))?Rt:(mt==="$"&&(mt=`$${A}`,A++),Z[mt]=this,this)},J.prototype.q=function(mt){return Rt};try{for(let mt=1;mt<10;++mt)Object.defineProperty(J.prototype,`d${mt}`,{get(){return this.p(mt)},configurable:!0}),Object.defineProperty(J.prototype,`p${mt}`,{get(){return this.p(mt)},configurable:!0}),J.prototype[`q${mt}`]=Rt}catch(mt){console.warn("injectPatternMethods: error:",mt)}const $=T("cpm",function(mt,Lt){return Lt._fast(mt/60/k.cps)});return Us({all:tt,each:st,hush:E,cpm:$,setCps:_,setcps:_,setCpm:nt,setcpm:nt})};return{scheduler:k,evaluate:async($,mt=!0,Lt=!0)=>{if(!$)throw new Error("no code to evaluate");try{D({code:$,pending:!0}),await q(),Qs(()=>k.now()),await(n==null?void 0:n({code:$})),ut=[],Lt&&E(),g&&($=`mondolang\`${$}\``);let{pattern:Y,meta:St}=await B3($,a,x);if(Object.keys(Z).length){let Kt=Object.values(Z);V&&(Kt=Kt.map(ye=>V(ye))),Y=jt(...Kt)}else V&&(Y=V(Y));if(ut.length)for(let Kt in ut)Y=ut[Kt](Y);if(!la(Y)){const Kt=`got "${typeof evaluated}" instead of pattern`;throw new Error(Kt+(typeof evaluated=="function"?", did you forget to call a function?":"."))}return le("[eval] code updated"),Y=await B(Y,mt),D({miniLocations:(St==null?void 0:St.miniLocations)||[],widgets:(St==null?void 0:St.widgets)||[],activeCode:$,pattern:Y,evalError:void 0,schedulerError:void 0,pending:!1}),s==null||s({code:$,pattern:Y,meta:St}),Y}catch(Y){le(`[eval] error: ${Y.message}`,"error"),console.error(Y),D({evalError:Y,pending:!1}),e==null||e(Y)}},start:R,stop:K,pause:j,setCps:_,setPattern:B,setCode:$=>D({code:$}),toggle:W,state:b}}const rm=({getTime:t,defaultOutput:e})=>async(n,r,s,i,a)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await e(n,r,s,i,a),n.context.onTrigger&&await n.context.onTrigger(n,t(),i,a)}catch(o){Cu(o,"getTrigger")}},W3=function(t,e={}){const n=document.getElementById("code"),r="background-image:url("+t+");background-size:contain;";n.style=r;const{className:s}=n,i=(o,u)=>{({style:()=>n.style=r+";"+u,className:()=>n.className=u+" "+s})[o]()},a=Object.entries(e).filter(([o,u])=>typeof u=="function");Object.entries(e).filter(([o,u])=>typeof u=="string").forEach(([o,u])=>i(o,u)),a.length},R3=()=>{const t=document.getElementById("code");t&&(t.style="")};le("🌀 @strudel/core loaded 🌀");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const T3=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:Bu,Cyclist:nm,Fraction:H,Hap:fe,Pattern:J,State:Gr,TimeSpan:te,__chooseWith:Da,_brandBy:xa,_fitslice:Qu,_irand:Aa,_keyDown:Fa,_match:qu,_mod:Je,_morph:da,_polymeterListSteps:tc,_retime:Yi,_slices:_i,accelerate:Pc,activeLabel:mp,ad:g0,add:Ub,adsr:b0,almostAlways:y3,almostNever:f3,always:g3,amp:Ac,analyze:Rc,anchor:Tp,and:fg,apply:_g,ar:P0,arp:Gb,arpWith:Xb,arrange:Bb,as:R0,att:Fc,attack:Dc,averageArray:Au,backgroundImage:W3,band:ng,bandf:jc,bandq:Uc,bank:Wc,base64ToUnicode:Vu,bbexpr:gl,bbst:Pl,beat:mM,begin:qc,berlin:r3,berlinWith:q0,binary:NM,binaryN:H0,bind:Ib,binshift:Id,bite:Qg,bjork:ba,blshift:ig,bor:rg,bp:Oc,bpa:$l,bpattack:ql,bpd:ih,bpdecay:sh,bpe:jl,bpenv:Hl,bpf:Jc,bpq:Qc,bpr:bh,bprelease:yh,bps:hh,bpsustain:lh,brak:o2,brand:JM,brandBy:jM,brshift:ag,bxor:sg,bypass:B2,byteBeatExpression:bl,byteBeatStartTime:Ml,calculateSteps:wb,cat:_u,ccn:F0,ccv:Z0,ceil:Pg,ch:vl,channel:Ll,channels:Cl,choose:J0,chooseCycles:O0,chooseIn:UM,chooseInWith:hi,chooseOut:QM,chooseWith:li,chop:sM,chord:Lp,chunk:A2,chunkBack:Z2,chunkBackInto:k2,chunkInto:E2,chunkback:w2,chunkbackinto:V2,chunkinto:S2,clamp:ii,cleanupUi:R3,clip:$d,coarse:al,code2hash:Db,color:f0,colour:y0,comb:Rd,compose:Mb,compress:Zg,compressSpan:wg,compressor:od,compressorAttack:ld,compressorKnee:ud,compressorRatio:cd,compressorRelease:hd,compressspan:Xg,constant:Pb,contract:ac,control:D0,controls:yM,cosine:wM,cosine2:XM,cpm:Hg,cps:qd,createClock:z0,createParam:ui,createParams:fa,crush:il,ctf:Tl,ctlNum:w0,ctranspose:gp,curry:Ct,curve:s0,cut:Wl,cutoff:Rl,cycleToSeconds:Ki,dec:Ic,decay:zc,degrade:a3,degradeBy:i3,degradeByWith:s3,degree:yp,delay:kh,delayfb:Lh,delayfeedback:Bh,delaysync:Ih,delayt:Th,delaytime:Rh,deltaSlide:i0,det:Yh,detune:Kh,dfb:Wh,dict:Rp,dictionary:Wp,dist:ad,distort:id,div:$b,djf:Vh,drawLine:Ru,drive:yl,drop:rc,dry:jh,ds:M0,dt:zh,duck:dl,duckattack:fl,duckdepth:ml,dur:n0,duration:e0,e:MM,early:jg,echo:g2,echoWith:m2,echowith:f2,eish:FM,end:$c,enhance:Ld,eq:hg,eqt:pg,errorLogger:Cu,euclid:gM,euclidLegato:xM,euclidLegatoRot:AM,euclidRot:CM,euclidish:DM,euclidrot:PM,evalScope:Us,evaluate:B3,every:Yg,expand:ic,expression:bd,extend:sc,fadeInTime:Uh,fadeOutTime:Oh,fadeTime:Jh,fanchor:Mh,fast:Lg,fastChunk:G2,fastGap:Gg,fastcat:xe,fastchunk:X2,fastgap:Sg,fft:Tc,filter:z2,filterWhen:I2,firstOf:Kg,fit:lM,flatten:Bn,floor:Mg,fm:Xc,fmattack:Sc,fmdecay:Vc,fmenv:Gc,fmh:Zc,fmi:wc,fmrelease:Bc,fmsustain:kc,fmvelocity:Lc,fmwave:Ec,focus:Eg,focusSpan:Vg,focusspan:kg,fractionalArgs:Cb,frameRate:Yd,frames:_d,freeze:Sd,freq:Qh,freqToMidi:sa,fromBipolar:vg,fshift:Md,fshiftnote:Pd,fshiftphase:Cd,ftype:gh,func:bg,gain:vc,gap:kr,gat:lp,gate:cp,getControlName:ya,getCurrentKeyboardState:Wu,getEventOffsetMs:fb,getFreq:xu,getFrequency:Fu,getPerformanceTimeSeconds:Zb,getPlayableNoteValue:gb,getSoundIndex:bb,getTime:Hi,getTrigger:rm,grow:K2,gt:ug,gte:lg,harmonic:Mp,hash2code:Fb,hbrick:Nd,hcutoff:Fh,hold:Hc,hours:Hd,hp:wh,hpa:Ql,hpattack:Ul,hpd:rh,hpdecay:nh,hpe:_l,hpenv:Yl,hpf:Zh,hpq:Gh,hpr:fh,hprelease:mh,hps:ch,hpsustain:uh,hresonance:Xh,hsl:T2,hsla:R2,hurry:Wg,id:Ar,imag:Bd,inhabit:X3,inhabitmod:S3,innerBind:Nb,inside:zg,inv:s2,invert:r2,ir:Up,irand:OM,irbegin:$p,iresponse:Qp,irspeed:qp,isControlName:dc,isNote:gr,isNoteWithOctave:db,isPattern:la,isaw:ci,isaw2:Pa,iter:P2,iterBack:C2,iterback:v2,itri:VM,itri2:kM,jux:d2,juxBy:h2,juxby:p2,kcutoff:Ad,keep:Jb,keepif:Ob,keyAlias:Lu,keyDown:P3,krush:xd,label:fp,lastOf:Ng,late:ju,lbrick:Kd,legato:t0,leslie:hp,lfo:u0,linger:qg,listRange:ia,lock:Nh,logKey:ra,logger:le,loop:tl,loopAt:uM,loopAtCps:hM,loopBegin:el,loopEnd:rl,loopat:cM,loopatcps:pM,loopb:nl,loope:sl,lp:Il,lpa:Ol,lpattack:Jl,lpd:eh,lpdecay:th,lpe:Kl,lpenv:Nl,lpf:zl,lpq:Eh,lpr:dh,lprelease:ph,lps:oh,lpsustain:ah,lrate:pp,lsize:dp,lt:og,lte:cg,mapArgs:oa,mask:Wb,midi2note:yb,midiToFreq:Xr,midibend:B0,midichan:C0,midicmd:A0,midimap:v0,midiport:x0,miditouch:L0,minutes:jd,mod:tg,mode:Np,morph:fM,mouseX:RM,mouseY:LM,mousex:WM,mousey:BM,mtranspose:bp,mul:qb,n:gc,nanFallback:Du,ne:dg,net:mg,never:b3,noise:xh,note:Mc,noteToMidi:rr,nothing:cn,nrpnn:X0,nrpv:G0,nudge:vp,numeralArgs:ze,objectMap:ku,octave:xp,octaveR:Cp,octaves:Ip,octer:Dd,octersub:Fd,octersubsub:Zd,off:a2,offset:zp,often:d3,or:yg,orbit:Ap,outerBind:Kb,outside:Ig,overgain:Dp,overshape:Fp,pace:$u,pairs:Gu,palindrome:l2,pan:Zp,panchor:up,panorient:Sp,panspan:wp,pansplay:Xp,panwidth:Gp,parseFractional:Xu,parseNumeral:aa,partials:Wd,patt:$h,pattack:qh,pcurve:op,pdec:ep,pdecay:tp,penv:ap,perlin:n3,perlinWith:Q0,ph:Zl,phasdp:Bl,phaser:wl,phasercenter:Sl,phaserdepth:Vl,phaserrate:Fl,phasersweep:Xl,phc:El,phd:kl,phs:Gl,pick:$0,pickF:C3,pickOut:x3,pickReset:Z3,pickRestart:D3,pickSqueeze:G3,pickmod:tm,pickmodF:v3,pickmodOut:A3,pickmodReset:w3,pickmodRestart:F3,pickmodSqueeze:E3,pipe:wu,pitchJump:a0,pitchJumpTime:o0,ply:Bg,pm:Vb,polyBind:Hb,polyTouch:W0,polymeter:oi,polyrhythm:Sb,postgain:xc,pow:eg,pr:Eb,prel:ip,prelease:sp,press:c2,pressBy:u2,progNum:S0,psus:rp,psustain:np,pure:ie,pw:xl,pwrate:Al,pwsweep:Dl,rand:we,rand2:HM,randcat:qM,randrun:j0,range:xg,range2:Dg,rangex:Ag,rarely:m3,rate:Ep,ratio:Fg,rdim:jp,real:kd,ref:dM,register:T,registerControl:S,reify:O,rel:_c,release:Yc,removeUndefineds:Vr,repeatCycles:x2,repeatTime:c0,repl:L3,resonance:Sh,rev:Ju,rfade:Op,rib:W2,ribbon:L2,ring:wd,ringdf:Gd,ringf:Xd,rlp:_p,room:Kp,roomdim:Hp,roomfade:Jp,roomlp:Yp,roomsize:td,rotate:Zu,round:gg,rsize:rd,run:_0,s:mc,s_add:U2,s_alt:H2,s_cat:_2,s_contract:tM,s_expand:q2,s_extend:$2,s_polymeter:j2,s_sub:Q2,s_taper:J2,s_taperlist:O2,s_tour:eM,s_zip:nM,saw:ms,saw2:Ma,scram:zd,scramble:_M,scrub:T0,seconds:Jd,seg:t2,segment:$g,semitone:kp,seq:Hu,seqPLoop:Lb,sequence:ln,sequenceP:zu,set:jb,setStringParser:Tu,setTime:Qs,shape:sd,shrink:uc,shrinklist:oc,shuffle:YM,signal:Oe,silence:Rt,sine:I0,sine2:Ca,size:ed,slice:hc,slide:Vp,slow:Rg,slowChunk:F2,slowcat:sr,slowcatPrime:ha,slowchunk:D2,smear:Td,sol2note:vb,someCycles:p3,someCyclesBy:h3,sometimes:l3,sometimesBy:c3,songPtr:Od,sound:fc,source:yc,sparsity:Tg,speak:k3,speed:ma,splice:oM,splitAt:ua,spread:Hh,square:N0,square2:GM,squeeze:V3,squeezeBind:Yb,squiz:md,src:bc,stack:jt,stackBy:kb,stackCentre:Yu,stackLeft:Nu,stackRight:Ku,steady:ZM,stepBind:_b,stepalt:ec,stepcat:Be,steps:rM,stepsPerOctave:Pp,stretch:pd,striate:iM,stringifyValues:ca,struct:Rb,strudelScope:em,stut:M2,stutWith:y2,stutwith:b2,sub:Qb,superimpose:Tb,sus:Kc,sustain:Nc,sustainpedal:gd,swing:n2,swingBy:e2,sysex:E0,sysexdata:k0,sysexid:V0,sz:nd,take:nc,time:va,timeCat:pa,timecat:Y2,toBipolar:Cg,tokenizeNote:vu,tour:cc,tremolo:ol,tremolodepth:cl,tremolophase:hl,tremoloshape:pl,tremoloskew:ll,tremolosync:ul,tri:SM,tri2:EM,triode:vd,tsdelay:Vd,uid:Ud,undegrade:u3,undegradeBy:o3,unicodeToBase64:Eu,uniq:xb,uniqsort:Ab,uniqsortr:Su,unison:_h,unit:dd,v:vh,val:Qd,valueToMidi:mb,velocity:Cc,vib:Ph,vibmod:Ah,vibrato:Ch,vmod:Dh,voice:Bp,vowel:fd,waveloss:yd,wchoose:t3,wchooseCycles:U0,when:i2,whenKey:M3,withValue:zb,within:N2,wrandcat:e3,xfade:pc,xsdelay:Ed,zcrush:p0,zdelay:d0,zip:lc,zipWith:si,zmod:h0,znoise:l0,zoom:Jg,zoomArc:Og,zoomarc:Ug,zrand:r0,zzfx:m0},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class t extends DelayNode{constructor(n,r,s,i){super(n),r=Math.abs(r),this.delayTime.value=s;const a=n.createGain();a.gain.value=Math.min(Math.abs(i),.995),this.feedback=a.gain;const o=n.createGain();return o.gain.value=r,this.delayGain=o,this.connect(a),this.connect(o),a.connect(this),this.connect=u=>o.connect(u),this}start(n){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,n+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(e,n,r){return new t(this,e,n,r)}}var sm={};sm.generateReverb=function(t,e){for(var n=t.audioContext||new AudioContext,r=n.sampleRate,s=t.numChannels||2,i=t.decayTime*1.5,a=Math.round(t.decayTime*r),o=Math.round(i*r),u=Math.round((t.fadeInTime||0)*r),c=Math.pow(1/1e3,1/a),l=n.createBuffer(s,o,r),d=0;d<s;d++){for(var m=l.getChannelData(d),f=0;f<o;f++)m[f]=PA()*Math.pow(c,f);for(var f=0;f<u;f++)m[f]*=f/u}gA(l,t.lpFreqStart||0,t.lpFreqEnd||0,t.decayTime,e)};sm.generateGraph=function(t,e,n,r,s){var i=document.createElement("canvas");i.width=e,i.height=n;var a=i.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,i.width,i.height),a.fillStyle="#fff";for(var o=e/t.length,u=n/(s-r),c=0;c<t.length;c++)a.fillRect(c*o,n-(t[c]-r)*u,1,1);return i};var gA=function(t,e,n,r,s){if(e==0){s(t);return}var i=MA(t),a=new OfflineAudioContext(t.numberOfChannels,i[0].length,t.sampleRate),o=a.createBufferSource();o.buffer=t;var u=a.createBiquadFilter();e=Math.min(e,t.sampleRate/2),n=Math.min(n,t.sampleRate/2),u.type="lowpass",u.Q.value=1e-4,u.frequency.setValueAtTime(e,0),u.frequency.linearRampToValueAtTime(n,r),o.connect(u),u.connect(a.destination),o.start(),a.oncomplete=function(c){s(c.renderedBuffer)},a.startRendering(),window.filterNode=u},MA=function(t){for(var e=[],n=0;n<t.numberOfChannels;n++)e[n]=t.getChannelData(n);return e},PA=function(){return Math.random()*2-1};let z3=t=>console.log(t);function im(t,e="cyclist"){je(`[${e}] error: ${t.message}`)}const je=(...t)=>z3(...t),am=t=>{z3=t},CA=t=>{var s;if(typeof t!="string")return[];const[e,n="",r]=((s=t.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/))==null?void 0:s.slice(1))||[];return e?[e,n,r?Number(r):void 0]:[]},vA={c:0,d:2,e:4,f:5,g:7,a:9,b:11},xA={"#":1,b:-1,s:1,f:-1},Za=(t,e=3)=>{const[n,r,s=e]=CA(t);if(!n)throw new Error('not a note: "'+t+'"');const i=vA[n.toLowerCase()],a=(r==null?void 0:r.split("").reduce((o,u)=>o+xA[u],0))||0;return(Number(s)+1)*12+i+a},I3=t=>Math.pow(2,(t-69)/12)*440,Sr=(t,e,n)=>Math.min(Math.max(t,e),n),AA=t=>12*Math.log(t/440)/Math.LN2+69,DA=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:r}=t;return typeof n=="number"?AA(n):typeof r=="string"?Za(r):typeof r=="number"?r:e};function Qn(t,e=0,n){return isNaN(Number(t))?(!n&&je(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const N3=(t,e)=>(t%e+e)%e,J1=(t,e)=>N3(Math.round(Qn(t,0)),e);function FA(t,e){return t/e}typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(t,e,n=1,r=0){const s=Math.floor(Sr(r,0,1)*e.length),i=e.sampleRate*t,a=this.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let o=0;o<e.numberOfChannels;o++){let u=e.getChannelData(o),c=a.getChannelData(o);for(let l=0;l<i;l++){let d=(s+l*Math.abs(n))%u.length;n<1&&(d=d*-1),c[l]=u.at(d)||0}}return a},AudioContext.prototype.createReverb=function(t,e,n,r,s,i,a){const o=this.createConvolver();return o.generate=(u=2,c=.1,l=15e3,d=1e3,m,f,g)=>{o.duration=u,o.fade=c,o.lp=l,o.dim=d,o.ir=m,o.irspeed=f,o.irbegin=g,m?o.buffer=this.adjustLength(u,m,f,g):sm.generateReverb({audioContext:this,numChannels:2,decayTime:u,fadeInTime:c,lpFreqStart:l,lpFreqEnd:d},b=>{o.buffer=b})},o.generate(t,e,n,r,s,i,a),o});var O1={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class t extends GainNode{constructor(n,r){if(super(n),!O1[r])throw new Error("vowel: unknown vowel "+r);const{gains:s,qs:i,freqs:a}=O1[r],o=n.createGain();for(let u=0;u<5;u++){const c=n.createGain();c.gain.value=s[u];const l=n.createBiquadFilter();l.type="bandpass",l.Q.value=i[u],l.frequency.value=a[u],this.connect(l),l.connect(c),c.connect(o)}return o.gain.value=8,this.connect=u=>o.connect(u),this}}AudioContext.prototype.createVowelFilter=function(e){return new t(this,e)}}const ZA="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIGd0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMoZSwxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGUsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKXtsZXQgcj10W3NdLmxlbmd0aDtyIT10aGlzLmlucHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKHMscil9Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspe2xldCByPWVbc10ubGVuZ3RoO3IhPXRoaXMub3V0cHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhzLHIpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxlKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkoZSk7Zm9yKGxldCBzPTA7czxlO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KGUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtzXT10aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQsZSl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bc109bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dFtlXVtzXTt0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5zZXQocix0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dGhpcy5vdXRwdXRCdWZmZXJzW2VdW3NdLnN1YmFycmF5KDAsMTI4KTt0W2VdW3NdLnNldChyKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IGU9MDtlPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW2VdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspZm9yKGxldCBzPTA7czx0aGlzLmJsb2NrU2l6ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdW3NdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW2VdW3NdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQsZSxzKXtjb25zdCBvPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIW8/ITE6KHRoaXMuc3RhcnRlZD1vLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLHMpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhlKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQsZSxzKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBJdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLnNpemUqMikscz0wO3M8ZS5sZW5ndGg7cys9Mil7Y29uc3QgYT1NYXRoLlBJKnMvdGhpcy5zaXplO2Vbc109TWF0aC5jb3MoYSksZVtzKzFdPS1NYXRoLnNpbihhKX10aGlzLnRhYmxlPWU7Zm9yKHZhciByPTAsbz0xO3RoaXMuc2l6ZT5vO288PD0xKXIrKzt0aGlzLl93aWR0aD1yJTI9PT0wP3ItMTpyLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgaT0wO2k8dGhpcy5fYml0cmV2Lmxlbmd0aDtpKyspe3RoaXMuX2JpdHJldltpXT0wO2Zvcih2YXIgdT0wO3U8dGhpcy5fd2lkdGg7dSs9Mil7dmFyIGM9dGhpcy5fd2lkdGgtdS0yO3RoaXMuX2JpdHJldltpXXw9KGk+Pj51JjMpPDxjfX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxyPTA7cjx0Lmxlbmd0aDtyKz0yKXNbcj4+PjFdPXRbcl07cmV0dXJuIHN9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLHI9MDtyPHMubGVuZ3RoO3IrPTIpc1tyXT10W3I+Pj4xXSxzW3IrMV09MDtyZXR1cm4gc31jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgZT10aGlzLl9jc2l6ZSxzPWU+Pj4xLHI9MjtyPHM7cis9Mil0W2Utcl09dFtyXSx0W2UtcisxXT0tdFtyKzFdfXRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxlKXtpZih0PT09ZSl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9ZSx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLG89ZS9yPDwxLGksdSxjPXRoaXMuX2JpdHJldjtpZihvPT09NClmb3IoaT0wLHU9MDtpPGU7aSs9byx1Kyspe2NvbnN0IGQ9Y1t1XTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKGksZCxyKX1lbHNlIGZvcihpPTAsdT0wO2k8ZTtpKz1vLHUrKyl7Y29uc3QgZD1jW3VdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQoaSxkLHIpfXZhciBhPXRoaXMuX2ludj8tMToxLGg9dGhpcy50YWJsZTtmb3Iocj4+PTI7cj49MjtyPj49Mil7bz1lL3I8PDE7dmFyIG09bz4+PjI7Zm9yKGk9MDtpPGU7aSs9bylmb3IodmFyIHA9aSttLGw9aSxmPTA7bDxwO2wrPTIsZis9cil7Y29uc3QgZD1sLHY9ZCttLGc9dittLEk9ZyttLGI9dFtkXSxCPXRbZCsxXSxfPXRbdl0sdz10W3YrMV0sVD10W2ddLFA9dFtnKzFdLHk9dFtJXSxBPXRbSSsxXSx4PWIsVj1CLEY9aFtmXSxNPWEqaFtmKzFdLE89XypGLXcqTSxOPV8qTSt3KkYsWT1oWzIqZl0sTD1hKmhbMipmKzFdLEg9VCpZLVAqTCxVPVQqTCtQKlksSz1oWzMqZl0sWj1hKmhbMypmKzFdLCQ9eSpLLUEqWixHPXkqWitBKkssaj14K0gsaz1WK1Usej14LUgsSj1WLVUsUT1PKyQsRT1OK0csUj1hKihPLSQpLFg9YSooTi1HKSxzdD1qK1EsaXQ9aytFLG90PWotUSxhdD1rLUUsdXQ9eitYLGh0PUotUixjdD16LVgsbHQ9SitSO3RbZF09c3QsdFtkKzFdPWl0LHRbdl09dXQsdFt2KzFdPWh0LHRbZ109b3QsdFtnKzFdPWF0LHRbSV09Y3QsdFtJKzFdPWx0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPW9bZV0sdT1vW2UrMV0sYz1vW2Urc10sYT1vW2UrcysxXSxoPWkrYyxtPXUrYSxwPWktYyxsPXUtYTtyW3RdPWgsclt0KzFdPW0sclt0KzJdPXAsclt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPXRoaXMuX2ludj8tMToxLHU9cyoyLGM9cyozLGE9b1tlXSxoPW9bZSsxXSxtPW9bZStzXSxwPW9bZStzKzFdLGw9b1tlK3VdLGY9b1tlK3UrMV0sZD1vW2UrY10sdj1vW2UrYysxXSxnPWErbCxJPWgrZixiPWEtbCxCPWgtZixfPW0rZCx3PXArdixUPWkqKG0tZCksUD1pKihwLXYpLHk9ZytfLEE9SSt3LHg9YitQLFY9Qi1ULEY9Zy1fLE09SS13LE89Yi1QLE49QitUO3JbdF09eSxyW3QrMV09QSxyW3QrMl09eCxyW3QrM109VixyW3QrNF09RixyW3QrNV09TSxyW3QrNl09TyxyW3QrN109Tn1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQsZT10aGlzLl9jc2l6ZSxzPXRoaXMuX3dpZHRoLHI9MTw8cyxvPWUvcjw8MSxpLHUsYz10aGlzLl9iaXRyZXY7aWYobz09PTQpZm9yKGk9MCx1PTA7aTxlO2krPW8sdSsrKXtjb25zdCBmdD1jW3VdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKGksZnQ+Pj4xLHI+Pj4xKX1lbHNlIGZvcihpPTAsdT0wO2k8ZTtpKz1vLHUrKyl7Y29uc3QgZnQ9Y1t1XTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChpLGZ0Pj4+MSxyPj4+MSl9dmFyIGE9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtvPWUvcjw8MTt2YXIgbT1vPj4+MSxwPW0+Pj4xLGw9cD4+PjE7Zm9yKGk9MDtpPGU7aSs9bylmb3IodmFyIGY9MCxkPTA7Zjw9bDtmKz0yLGQrPXIpe3ZhciB2PWkrZixnPXYrcCxJPWcrcCxiPUkrcCxCPXRbdl0sXz10W3YrMV0sdz10W2ddLFQ9dFtnKzFdLFA9dFtJXSx5PXRbSSsxXSxBPXRbYl0seD10W2IrMV0sVj1CLEY9XyxNPWhbZF0sTz1hKmhbZCsxXSxOPXcqTS1UKk8sWT13Kk8rVCpNLEw9aFsyKmRdLEg9YSpoWzIqZCsxXSxVPVAqTC15KkgsSz1QKkgreSpMLFo9aFszKmRdLCQ9YSpoWzMqZCsxXSxHPUEqWi14KiQsaj1BKiQreCpaLGs9VitVLHo9RitLLEo9Vi1VLFE9Ri1LLEU9TitHLFI9WStqLFg9YSooTi1HKSxzdD1hKihZLWopLGl0PWsrRSxvdD16K1IsYXQ9SitzdCx1dD1RLVg7aWYodFt2XT1pdCx0W3YrMV09b3QsdFtnXT1hdCx0W2crMV09dXQsZj09PTApe3ZhciBodD1rLUUsY3Q9ei1SO3RbSV09aHQsdFtJKzFdPWN0O2NvbnRpbnVlfWlmKGYhPT1sKXt2YXIgbHQ9SixFdD0tUSxSdD1rLER0PS16LHF0PS1hKnN0LFd0PS1hKlgsWXQ9LWEqUixMdD0tYSpFLEh0PWx0K3F0LFV0PUV0K1d0LEt0PVJ0K0x0LFp0PUR0LVl0LG10PWkrcC1mLHZ0PWkrbS1mO3RbbXRdPUh0LHRbbXQrMV09VXQsdFt2dF09S3QsdFt2dCsxXT1adH19fX1fc2luZ2xlUmVhbFRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPW9bZV0sdT1vW2Urc10sYz1pK3UsYT1pLXU7clt0XT1jLHJbdCsxXT0wLHJbdCsyXT1hLHJbdCszXT0wfV9zaW5nbGVSZWFsVHJhbnNmb3JtNCh0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsbz10aGlzLl9kYXRhLGk9dGhpcy5faW52Py0xOjEsdT1zKjIsYz1zKjMsYT1vW2VdLGg9b1tlK3NdLG09b1tlK3VdLHA9b1tlK2NdLGw9YSttLGY9YS1tLGQ9aCtwLHY9aSooaC1wKSxnPWwrZCxJPWYsYj0tdixCPWwtZCxfPWYsdz12O3JbdF09ZyxyW3QrMV09MCxyW3QrMl09SSxyW3QrM109YixyW3QrNF09QixyW3QrNV09MCxyW3QrNl09XyxyW3QrN109d319Y29uc3QgQz0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLHB0PShuLHQpPT4obiV0K3QpJXQ7ZnVuY3Rpb24gYnQobix0PTEpe3JldHVybiBuPj10P24tPXQ6bjwwJiYobis9dCksbn1jb25zdCBEPTEyODtmdW5jdGlvbiBCdChuLHQpe3JldHVybiB0PU1hdGgubWluKHQsMS10KSxuPHQ/KG4vPXQsbituLW4qbi0xKTpuPjEtdD8obj0obi0xKS90LG4qbituK24rMSk6MH1jb25zdCBydD17dHJpKG4sdD0uNSl7Y29uc3QgZT0xLXQ7cmV0dXJuIG4+PXQ/MS9lLW4vZTpuL3R9LHNpbmUobil7cmV0dXJuIE1hdGguc2luKE1hdGguUEkqMipuKSouNSsuNX0scmFtcChuKXtyZXR1cm4gbn0sc2F3KG4pe3JldHVybiAxLW59LHNxdWFyZShuLHQ9LjUpe3JldHVybiBuPj10PzA6MX0sY3VzdG9tKG4sdD1bMCwxXSl7Y29uc3QgZT10Lmxlbmd0aC0xLHM9TWF0aC5mbG9vcihuKmUpLHI9MS9lLG89Qyh0W3NdLDAsMSksdT1DKHRbcysxXSwwLDEpLGM9byxhPTAsaD1yO3JldHVybih1LWMpLyhoLWEpKihuLXIqcykrb30sc2F3YmxlcChuLHQpe3JldHVybiAyKm4tMS1CdChuLHQpfX07ZnVuY3Rpb24gcShuLHQpe3JldHVybiB0Lmxlbmd0aD4xP3Rbbl06dFswXX1jb25zdCBfdD1PYmplY3Qua2V5cyhydCk7Y2xhc3Mgd3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToidGltZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJza2V3IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJkZXB0aCIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJwaGFzZW9mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJjdXJ2ZSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkY29mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToibWF4IixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlfWluY3JlbWVudFBoYXNlKHQpe3RoaXMucGhhc2UrPXQsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZT10aGlzLnBoYXNlLTEpfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9cy5iZWdpblswXTtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXIpcmV0dXJuITA7Y29uc3Qgbz1lWzBdLGk9cy5mcmVxdWVuY3lbMF0sdT1zLnRpbWVbMF0sYz1zLmRlcHRoWzBdLGE9cy5za2V3WzBdLGg9cy5waGFzZW9mZnNldFswXSxtPXMuY3VydmVbMF0scD1zLmRjb2Zmc2V0WzBdLGw9cy5taW5bMF0sZj1zLm1heFswXSxkPV90W3Muc2hhcGVbMF1dLHY9b1swXS5sZW5ndGg/PzA7dGhpcy5waGFzZT09bnVsbCYmKHRoaXMucGhhc2U9cHQodSppK2gsMSkpO2NvbnN0IGc9aS9zYW1wbGVSYXRlO2ZvcihsZXQgST0wO0k8djtJKyspe2ZvcihsZXQgYj0wO2I8by5sZW5ndGg7YisrKXtsZXQgQj0ocnRbZF0odGhpcy5waGFzZSxhKStwKSpjO0I9TWF0aC5wb3coQixtKSxvW2JdW0ldPUMoQixsLGYpfXRoaXMuaW5jcmVtZW50UGhhc2UoZyl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsZm8tcHJvY2Vzc29yIix3dCk7Y2xhc3MgU3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY29hcnNlIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLG89ZVswXSxpPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhaSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9aTtsZXQgdT1zLmNvYXJzZVswXT8/MDt1PU1hdGgubWF4KDEsdSk7Zm9yKGxldCBjPTA7YzxEO2MrKylmb3IobGV0IGE9MDthPHIubGVuZ3RoO2ErKylvW2FdW2NdPWMldT09PTA/clthXVtjXTpvW2FdW2MtMV07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjb2Fyc2UtcHJvY2Vzc29yIixTdCk7Y2xhc3MgVHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY3J1c2giLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0sbz1lWzBdLGk9clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFpKXJldHVybiExO3RoaXMuc3RhcnRlZD1pO2xldCB1PXMuY3J1c2hbMF0/Pzg7dT1NYXRoLm1heCgxLHUpO2ZvcihsZXQgYz0wO2M8RDtjKyspZm9yKGxldCBhPTA7YTxyLmxlbmd0aDthKyspe2NvbnN0IGg9TWF0aC5wb3coMix1LTEpO29bYV1bY109TWF0aC5yb3VuZChyW2FdW2NdKmgpL2h9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjcnVzaC1wcm9jZXNzb3IiLFR0KTtjbGFzcyBQdCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxvPWVbMF0saT1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWkpcmV0dXJuITE7dGhpcy5zdGFydGVkPWk7bGV0IHU9cy5zaGFwZVswXTt1PXU8MT91OjEtNGUtMTAsdT0yKnUvKDEtdSk7Y29uc3QgYz1NYXRoLm1heCguMDAxLE1hdGgubWluKDEscy5wb3N0Z2FpblswXSkpO2ZvcihsZXQgYT0wO2E8RDthKyspZm9yKGxldCBoPTA7aDxyLmxlbmd0aDtoKyspb1toXVthXT0oMSt1KSpyW2hdW2FdLygxK3UqTWF0aC5hYnMocltoXVthXSkpKmM7cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzaGFwZS1wcm9jZXNzb3IiLFB0KTtmdW5jdGlvbiBTKG4pe2NvbnN0IHQ9bipuO3JldHVybiBuKigyNyt0KS8oMjcrOSp0KX1jb25zdCBkdD0zLjE0MTU5MjY1MzU5O2NsYXNzIHl0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjUwMH0se25hbWU6InEiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZHJpdmUiLGRlZmF1bHRWYWx1ZTouNjl9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMucDA9WzAsMF0sdGhpcy5wMT1bMCwwXSx0aGlzLnAyPVswLDBdLHRoaXMucDM9WzAsMF0sdGhpcy5wMzI9WzAsMF0sdGhpcy5wMzM9WzAsMF0sdGhpcy5wMzQ9WzAsMF19cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLG89ZVswXSxpPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhaSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9aTtjb25zdCB1PXMucVswXSxjPUMoTWF0aC5leHAocy5kcml2ZVswXSksLjEsMmUzKTtsZXQgYT1zLmZyZXF1ZW5jeVswXTthPWEqMipkdC9zYW1wbGVSYXRlLGE9YT4xPzE6YTtjb25zdCBoPU1hdGgubWluKDgsdSouMTMpO2xldCBtPTEvYypNYXRoLm1pbigxLjc1LDEraCk7Zm9yKGxldCBwPTA7cDxEO3ArKylmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKyl7Y29uc3QgZj10aGlzLnAzW2xdKi4zNjA4OTErdGhpcy5wMzJbbF0qLjQxNzI5K3RoaXMucDMzW2xdKi4xNzc4OTYrdGhpcy5wMzRbbF0qLjA0Mzk3MjU7dGhpcy5wMzRbbF09dGhpcy5wMzNbbF0sdGhpcy5wMzNbbF09dGhpcy5wMzJbbF0sdGhpcy5wMzJbbF09dGhpcy5wM1tsXSx0aGlzLnAwW2xdKz0oUyhyW2xdW3BdKmMtaCpmKS1TKHRoaXMucDBbbF0pKSphLHRoaXMucDFbbF0rPShTKHRoaXMucDBbbF0pLVModGhpcy5wMVtsXSkpKmEsdGhpcy5wMltsXSs9KFModGhpcy5wMVtsXSktUyh0aGlzLnAyW2xdKSkqYSx0aGlzLnAzW2xdKz0oUyh0aGlzLnAyW2xdKS1TKHRoaXMucDNbbF0pKSphLG9bbF1bcF09ZiptfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGFkZGVyLXByb2Nlc3NvciIseXQpO2NsYXNzIEF0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImRpc3RvcnQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0sbz1lWzBdLGk9clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFpKXJldHVybiExO3RoaXMuc3RhcnRlZD1pO2NvbnN0IHU9TWF0aC5leHBtMShzLmRpc3RvcnRbMF0pLGM9TWF0aC5tYXgoLjAwMSxNYXRoLm1pbigxLHMucG9zdGdhaW5bMF0pKTtmb3IobGV0IGE9MDthPEQ7YSsrKWZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKW9baF1bYV09KDErdSkqcltoXVthXS8oMSt1Kk1hdGguYWJzKHJbaF1bYV0pKSpjO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGlzdG9ydC1wcm9jZXNzb3IiLEF0KTtmdW5jdGlvbiB4dChuLHQsZSl7cmV0dXJuIGUqKHQtbikrbn1mdW5jdGlvbiBWdChuLHQsZSl7cmV0dXJuIG48Mj8wOnh0KC10Ki41LHQqLjUsZS8obi0xKSl9ZnVuY3Rpb24gdHQobix0KXtyZXR1cm4gbipNYXRoLnBvdygyLHQvMTIpfWNsYXNzIEZ0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlPVtdfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjF9XX1wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdLG89cy52b2ljZXNbMF0saT1zLmZyZXFzcHJlYWRbMF0sdT1zLnBhbnNwcmVhZFswXSouNSsuNSxjPU1hdGguc3FydCgxLXUpLGE9TWF0aC5zcXJ0KHUpO2ZvcihsZXQgaD0wO2g8bztoKyspe2NvbnN0IG09KGgmMSk9PTE7bGV0IHA9YyxsPWE7bSYmKHA9YSxsPWMpO2ZvcihsZXQgZj0wO2Y8clswXS5sZW5ndGg7ZisrKXtsZXQgZD10dChzLmZyZXF1ZW5jeVtmXT8/cy5mcmVxdWVuY3lbMF0scy5kZXR1bmVbMF0vMTAwKTtkPXR0KGQsVnQobyxpLGgpKTtjb25zdCB2PXB0KGQvc2FtcGxlUmF0ZSwxKTt0aGlzLnBoYXNlW2hdPXRoaXMucGhhc2VbaF0/P01hdGgucmFuZG9tKCk7Y29uc3QgZz1ydC5zYXdibGVwKHRoaXMucGhhc2VbaF0sdik7clswXVtmXT1yWzBdW2ZdK2cqcCxyWzFdW2ZdPXJbMV1bZl0rZypsLHRoaXMucGhhc2VbaF09YnQodGhpcy5waGFzZVtoXSt2KX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzdXBlcnNhdy1vc2NpbGxhdG9yIixGdCk7Y29uc3QgTXQ9MjA0ODtmdW5jdGlvbiBPdChuKXtsZXQgdD1uZXcgRmxvYXQzMkFycmF5KG4pO2Zvcih2YXIgZT0wO2U8bjtlKyspdFtlXT0uNSooMS1NYXRoLmNvcygyKk1hdGguUEkqZS9uKSk7cmV0dXJuIHR9Y2xhc3MgTnQgZXh0ZW5kcyBndHtzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJwaXRjaEZhY3RvciIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcih0KXt0LnByb2Nlc3Nvck9wdGlvbnM9e2Jsb2NrU2l6ZTpNdH0sc3VwZXIodCksdGhpcy5mZnRTaXplPXRoaXMuYmxvY2tTaXplLHRoaXMudGltZUN1cnNvcj0wLHRoaXMuaGFubldpbmRvdz1PdCh0aGlzLmJsb2NrU2l6ZSksdGhpcy5mZnQ9bmV3IEl0KHRoaXMuZmZ0U2l6ZSksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZD10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLnRpbWVDb21wbGV4QnVmZmVyPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMubWFnbml0dWRlcz1uZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZS8yKzEpLHRoaXMucGVha0luZGV4ZXM9bmV3IEludDMyQXJyYXkodGhpcy5tYWduaXR1ZGVzLmxlbmd0aCksdGhpcy5uYlBlYWtzPTB9cHJvY2Vzc09MQSh0LGUscyl7bGV0IHI9cy5waXRjaEZhY3RvcltzLnBpdGNoRmFjdG9yLmxlbmd0aC0xXTtyPDAmJihyPXIqLjI1KSxyPU1hdGgubWF4KDAscisxKTtmb3IodmFyIG89MDtvPHRoaXMubmJJbnB1dHM7bysrKWZvcih2YXIgaT0wO2k8dFtvXS5sZW5ndGg7aSsrKXt2YXIgdT10W29dW2ldLGM9ZVtvXVtpXTt0aGlzLmFwcGx5SGFubldpbmRvdyh1KSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsdSksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKHIpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLGMpLHRoaXMuYXBwbHlIYW5uV2luZG93KGMpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IodmFyIGU9MDtlPHRoaXMuYmxvY2tTaXplO2UrKyl0W2VdPXRbZV0qdGhpcy5oYW5uV2luZG93W2VdKjEuNjJ9Y29tcHV0ZU1hZ25pdHVkZXMoKXtmb3IodmFyIHQ9MCxlPTA7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7bGV0IHM9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlXSxyPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbZSsxXTt0aGlzLm1hZ25pdHVkZXNbdF09cyoqMityKioyLHQrPTEsZSs9Mn19ZmluZFBlYWtzKCl7dGhpcy5uYlBlYWtzPTA7dmFyIHQ9MjtsZXQgZT10aGlzLm1hZ25pdHVkZXMubGVuZ3RoLTI7Zm9yKDt0PGU7KXtsZXQgcz10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1zKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1zKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2Zvcih2YXIgZT0wO2U8dGhpcy5uYlBlYWtzO2UrKyl7bGV0IGk9dGhpcy5wZWFrSW5kZXhlc1tlXSx1PU1hdGgucm91bmQoaSp0KTtpZih1PnRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7dmFyIHM9MCxyPXRoaXMuZmZ0U2l6ZTtpZihlPjApe2xldCBoPXRoaXMucGVha0luZGV4ZXNbZS0xXTtzPWktTWF0aC5mbG9vcigoaS1oKS8yKX1pZihlPHRoaXMubmJQZWFrcy0xKXtsZXQgaD10aGlzLnBlYWtJbmRleGVzW2UrMV07cj1pK01hdGguY2VpbCgoaC1pKS8yKX1sZXQgYz1zLWksYT1yLWk7Zm9yKHZhciBvPWM7bzxhO28rKyl7bGV0IGg9aStvLG09dStvO2lmKG0+PXRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7bGV0IHA9MipNYXRoLlBJKihtLWgpL3RoaXMuZmZ0U2l6ZSxsPU1hdGguY29zKHAqdGhpcy50aW1lQ3Vyc29yKSxmPU1hdGguc2luKHAqdGhpcy50aW1lQ3Vyc29yKSxkPWgqMix2PWQrMSxnPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbZF0sST10aGlzLmZyZXFDb21wbGV4QnVmZmVyW3ZdLGI9ZypsLUkqZixCPWcqZitJKmwsXz1tKjIsdz1fKzE7dGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWRbX10rPWIsdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWRbd10rPUJ9fX19cmVnaXN0ZXJQcm9jZXNzb3IoInBoYXNlLXZvY29kZXItcHJvY2Vzc29yIixOdCk7Y2xhc3MgQ3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGk9ZHQsdGhpcy5waGk9LXRoaXMucGksdGhpcy5ZMD0wLHRoaXMuWTE9MCx0aGlzLlBXPXRoaXMucGksdGhpcy5CPTIuMyx0aGlzLmRwaGlmPTAsdGhpcy5lbnZmPTB9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJwdWxzZXdpZHRoIixkZWZhdWx0VmFsdWU6MSxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2NvbnN0IHI9ZVswXTtsZXQgbz0xLGk7Zm9yKGxldCB1PTA7dTwoclswXS5sZW5ndGg/PzApO3UrKyl7Y29uc3QgYz0oMS1DKHEodSxzLnB1bHNld2lkdGgpLC0uOTksLjk5KSkqdGhpcy5waSxhPXEodSxzLmRldHVuZSksaD10dChxKHUscy5mcmVxdWVuY3kpLGEvMTAwKTtpPWgqKHRoaXMucGkvKHNhbXBsZVJhdGUqLjUpKSx0aGlzLmRwaGlmKz0uMSooaS10aGlzLmRwaGlmKSxvKj0uOTk5OCx0aGlzLmVudmYrPS4xKihvLXRoaXMuZW52ZiksdGhpcy5CPTIuMyooMS0xZS00KmgpLHRoaXMuQjwwJiYodGhpcy5CPTApLHRoaXMucGhpKz10aGlzLmRwaGlmLHRoaXMucGhpPj10aGlzLnBpJiYodGhpcy5waGktPTIqdGhpcy5waSk7bGV0IG09TWF0aC5jb3ModGhpcy5waGkrdGhpcy5CKnRoaXMuWTApO3RoaXMuWTA9LjUqKG0rdGhpcy5ZMCk7bGV0IHA9TWF0aC5jb3ModGhpcy5waGkrdGhpcy5CKnRoaXMuWTErYyk7dGhpcy5ZMT0uNSoocCt0aGlzLlkxKTtmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKylyW2xdW3VdPS4xNSoobS1wKSp0aGlzLmVudmZ9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJwdWxzZS1vc2NpbGxhdG9yIixDdCk7Y29uc3QgbnQ9e2JpdEM6ZnVuY3Rpb24obix0LGUpe3JldHVybiBuJnQ/ZTowfSxicjpmdW5jdGlvbihuLHQ9OCl7aWYodD4zMil0aHJvdyBuZXcgRXJyb3IoImJyKCkgU2l6ZSBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIDMyIik7e2xldCBlPTA7Zm9yKGxldCBzPTA7czx0LTA7cysrKWUrPW50LmJpdEMobiwyKipzLDIqKih0LShzKzEpKSk7cmV0dXJuIGV9fSxzaW5mOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLnNpbihuLygxMjgvTWF0aC5QSSkpfSxjb3NmOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLmNvcyhuLygxMjgvTWF0aC5QSSkpfSx0YW5mOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLnRhbihuLygxMjgvTWF0aC5QSSkpfSxyZWdHOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQudGVzdChuLnRvU3RyaW5nKDIpKX19O2xldCBXLGV0O2Z1bmN0aW9uIGt0KG4pe2lmKChXfHxldCk9PW51bGwpe1c9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTWF0aCksZXQ9Vy5tYXAocz0+TWF0aFtzXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhudCksZT10Lm1hcChzPT5udFtzXSk7Vy5wdXNoKCJpbnQiLCJ3aW5kb3ciLC4uLnQpLGV0LnB1c2goTWF0aC5mbG9vcixnbG9iYWxUaGlzLC4uLmUpfXJldHVybiBuZXcgRnVuY3Rpb24oLi4uVywidCIsYHJldHVybiAwLAoke258fDB9O2ApLmJpbmQoZ2xvYmFsVGhpcywuLi5ldCl9Y2xhc3MgenQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dD0+e2xldHtjb2RlVGV4dDplfT10LmRhdGE7Y29uc3R7Ynl0ZUJlYXRTdGFydFRpbWU6c309dC5kYXRhO3MhPW51bGwmJih0aGlzLnQ9MCx0aGlzLmluaXRpYWxPZmZzZXQ9TWF0aC5mbG9vcihzKSksZT1lLnRyaW0oKS5yZXBsYWNlKC9eZXZhbFwodW5lc2NhcGVcKGVzY2FwZSg/OmB8XCgnfFwoInxcKGApKC4qPykoPzpgfCdcKXwiXCl8YFwpKS5yZXBsYWNlXChcL3VcKFwuXC5cKVwvZyxbIidgXVwkMSVbIidgXVwpXClcKSQvLChyLG8pPT51bmVzY2FwZShlc2NhcGUobykucmVwbGFjZSgvdSguLikvZywiJDElIikpKSx0aGlzLmZ1bmM9a3QoZSl9LHRoaXMuaW5pdGlhbE9mZnNldD1udWxsLHRoaXMudD1udWxsLHRoaXMuZnVuYz1udWxsfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjAsbWluOk51bWJlci5ORUdBVElWRV9JTkZJTklUWSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO3RoaXMudD09bnVsbCYmKHRoaXMudD1zLmJlZ2luWzBdKnNhbXBsZVJhdGUpO2NvbnN0IHI9ZVswXTtmb3IobGV0IG89MDtvPHJbMF0ubGVuZ3RoO28rKyl7Y29uc3QgaT1xKG8scy5kZXR1bmUpLHU9dHQocShvLHMuZnJlcXVlbmN5KSxpLzEwMCk7bGV0IGM9dGhpcy50LyhzYW1wbGVSYXRlLzI1NikqdSt0aGlzLmluaXRpYWxPZmZzZXQ7Y29uc3QgbT0oKHRoaXMuZnVuYyhjKSYyNTUpLzEyNy41LTEpKi4yO2ZvcihsZXQgcD0wO3A8ci5sZW5ndGg7cCsrKXJbcF1bb109QyhtLC0uNCwuNCk7dGhpcy50PXRoaXMudCsxfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiYnl0ZS1iZWF0LXByb2Nlc3NvciIsenQpfSkoKTsK";let bo={};function K3(t,e){const n=At();if(bo[t])return bo[t];const r=2*n.sampleRate,s=n.createBuffer(1,r,n.sampleRate),i=s.getChannelData(0);let a=0,o,u,c,l,d,m,f;o=u=c=l=d=m=f=0;for(let g=0;g<r;g++)if(t==="white")i[g]=Math.random()*2-1;else if(t==="brown"){let b=Math.random()*2-1;i[g]=(a+.02*b)/1.02,a=i[g]}else if(t==="pink"){let b=Math.random()*2-1;o=.99886*o+b*.0555179,u=.99332*u+b*.0750759,c=.969*c+b*.153852,l=.8665*l+b*.3104856,d=.55*d+b*.5329522,m=-.7616*m-b*.016898,i[g]=o+u+c+l+d+m+f+b*.5362,i[g]*=.11,f=b*.115926}else if(t==="crackle"){const b=e*.01;Math.random()<b?i[g]=Math.random()*2-1:i[g]=0}return t!=="crackle"&&(bo[t]=s),s}function Jo(t="white",e,n=.02){const r=At().createBufferSource();return r.buffer=K3(t,n),r.loop=!0,r.start(e),{node:r,stop:s=>r.stop(s)}}function wA(t,e,n){const r=Jo("pink",n);return{node:um(t,r.node,e),stop:s=>r==null?void 0:r.stop(s)}}const wa=["pink","white","brown","crackle"];function Ve(t){const e=At().createGain();return e.gain.value=t,e}const U1=(t,e,n,r)=>r-n===0?0:(e-t)/(r-n);function on(t,e,n,r){const s=new AudioWorkletNode(t,e,r);return Object.entries(n).forEach(([i,a])=>{s.parameters.get(i).value=a}),s}const Cn=(t,e,n,r,s,i,a,o,u,c="exponential")=>{e=Qn(e),n=Qn(n),r=Qn(r),s=Qn(s);const l=c==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";c==="exponential"&&(i=i===0?.001:i,a=a===0?.001:a);const d=a-i,m=a,f=i+r*d,g=u-o,b=x=>{let D;if(e>x){let G=U1(i,m,0,e);D=x*G+(i>m?i:0)}else D=(x-e)*U1(m,f,0,n)+m;return c==="exponential"&&(D=D||.001),D};t.setValueAtTime(i,o),e>g?t[l](b(g),u):e+n>g?(t[l](b(e),o+e),t[l](b(g),u)):(t[l](b(e),o+e),t[l](b(e+n),o+e+n),t.setValueAtTime(f,u)),t[l](i,u+s)};function om(t,e,n,r,s,i){const a={threshold:e??-3,ratio:n??10,knee:r??10,attack:s??.005,release:i??.05};return new DynamicsCompressorNode(t,a)}const vn=(t,e="linear",n)=>{const[r,s,i,a]=t;if(r==null&&s==null&&i==null&&a==null)return n??[.001,.001,1,.01];const o=i??(r!=null&&s==null||r==null&&s==null?1:.001);return[Math.max(r??0,.001),Math.max(s??0,.001),Math.min(o,1),Math.max(a??0,.01)]};function Ts(t,e,n,r,s,i,a,o,u,c,l,d,m,f){const g="exponential",[b,x,D,G]=vn([s,i,a,o],g,[.005,.14,0,.1]);let k,Z;if(m==="ladder"?(k=on(t,"ladder-processor",{frequency:n,q:r,drive:f}),Z=k.parameters.get("frequency")):(k=t.createBiquadFilter(),k.type=e,k.Q.value=r,k.frequency.value=n,Z=k.frequency),(s??i??a??o??u)!==void 0){u=Qn(u,1,!0),d=Qn(d,0,!0);const A=Math.abs(u),V=A*d;let E=Sr(2**-V*n,0,2e4),B=Sr(2**(A-V)*n,0,2e4);return u<0&&([E,B]=[B,E]),Cn(Z,b,x,D,G,E,B,c,l,g),k}return k}let Q1=t=>t<.5?1:1-(t-.5)/.5;function um(t,e,n=0){const r=At();if(!n)return t;let s=r.createGain(),i=r.createGain();t.connect(s),e.connect(i),s.gain.value=Q1(n),i.gain.value=Q1(1-n);let a=r.createGain();return s.connect(a),i.connect(a),a}let XA=["linear","exponential"];function us(t,e,n,r){if(!(e.pattack??e.pdecay??e.psustain??e.prelease??e.penv))return;const s=Qn(e.penv,1,!0),i=XA[e.pcurve??0];let[a,o,u,c]=vn([e.pattack,e.pdecay,e.psustain,e.prelease],i,[.2,.001,1,.001]),l=e.panchor??u;const d=s*100,m=0-d*l,f=d-d*l;Cn(t,a,o,u,c,m,f,n,r,i)}function cs(t,e,n){const{vibmod:r=.5,vib:s}=e;let i;if(s>0){i=At().createOscillator(),i.frequency.value=s;const a=At().createGain();return a.gain.value=r*100,i.connect(a),a.connect(t),i.start(n),i}}function rs(t,e,n,r){const s=new ConstantSourceNode(t),i=Ve(0);return i.connect(t.destination),s.connect(i),s.onended=()=>{try{i.disconnect()}catch{}try{s.disconnect()}catch{}e()},s.start(n),s.stop(r),s}const GA=(t,e=1,n="sine")=>{const r=At();let s;wa.includes(n)?(s=r.createBufferSource(),s.buffer=K3(n,2),s.loop=!0):(s=r.createOscillator(),s.type=n,s.frequency.value=t),s.start();const i=new GainNode(r,{gain:e});return s.connect(i),{node:i,stop:a=>s.stop(a)}},SA=(t,e,n,r="sine")=>{const s=t.value*e,i=s*n;return GA(s,i,r)};function qs(t,e,n){const{fmh:r=1,fmi:s,fmenv:i="exp",fmattack:a,fmdecay:o,fmsustain:u,fmrelease:c,fmvelocity:l,fmwave:d="sine",duration:m}=e;let f,g=()=>{};if(s){const b=At().createGain(),x=SA(t,r,s,d);if(f=x.node,g=x.stop,![a,o,u,c,l].some(D=>D!==void 0))f.connect(t);else{const[D,G,k,Z]=vn([a,o,u,c]),A=n+m;Cn(b.gain,D,G,k,Z,0,1,n,A,i==="exp"?"exponential":"linear"),f.connect(b),b.connect(t)}}return{stop:g}}let Mn=[],cr=0;const Xi=4;let EA=t=>{let e=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(r){return n.lc=e.push(r),()=>{for(let i=cr+Xi;i<Mn.length;)Mn[i]===r?Mn.splice(i,Xi):i+=Xi;let s=e.indexOf(r);~s&&(e.splice(s,1),--n.lc||n.off())}},notify(r,s){let i=!Mn.length;for(let a of e)Mn.push(a,n.value,r,s);if(i){for(cr=0;cr<Mn.length;cr+=Xi)Mn[cr](Mn[cr+1],Mn[cr+2],Mn[cr+3]);Mn.length=0}},off(){},set(r){let s=n.value;s!==r&&(n.value=r,n.notify(s))},subscribe(r){let s=n.listen(r);return r(n.value),s},value:t};return n},VA=(t={})=>{let e=EA(t);return e.setKey=function(n,r){let s=e.value;typeof r>"u"&&n in e.value?(e.value={...e.value},delete e.value[n],e.notify(s,n)):e.value[n]!==r&&(e.value={...e.value,[n]:r},e.notify(s,n))},e};const cm={},go={},Y3=t=>cm[t];function kA(t,e){var n=1024;if(t<n)return t+" B";var r=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],s=-1;do t/=n,++s;while(t>=n);return t.toFixed(1)+" "+r[s]}function lm(t,e){const{s:n,n:r=0,speed:s=1}=t;let i=DA(t,36),a=i-36,o,u=0;if(Array.isArray(e))u=J1(r,e.length),o=e[u];else{const d=f=>Za(f)-i,m=Object.keys(e).filter(f=>!f.startsWith("_")).reduce((f,g,b)=>!f||Math.abs(d(g))<Math.abs(d(f))?g:f,null);a=-d(m),u=J1(r,e[m].length),o=e[m][u]}const c=`${n}:${u}`;let l=Math.abs(s)*Math.pow(2,a/12);return{transpose:a,sampleUrl:o,index:u,midi:i,label:c,playbackRate:l}}const hm=async(t,e,n)=>{let{sampleUrl:r,label:s,playbackRate:i}=lm(t,e);n&&(r=await n(r));const a=At(),o=await Xa(r,a,s);return t.unit==="c"&&(i=i*o.duration),{buffer:o,playbackRate:i}},pm=async(t,e,n)=>{let{buffer:r,playbackRate:s}=await hm(t,e,n);t.speed<0&&(r=dm(r));const i=At().createBufferSource();i.buffer=r,i.playbackRate.value=s;const{s:a,loopBegin:o=0,loopEnd:u=1,begin:c=0,end:l=1}=t,d=c*i.buffer.duration;(a.startsWith("wt_")||t.loop)&&(i.loop=!0,i.loopStart=o*i.buffer.duration-d,i.loopEnd=u*i.buffer.duration-d);const m=i.buffer.duration/i.playbackRate.value,f=(l-c)*m;return{bufferSource:i,offset:d,bufferDuration:m,sliceDuration:f}},Xa=(t,e,n,r=0)=>{const s=n?`sound "${n}:${r}"`:"sample";if(t=t.replace("#","%23"),!go[t]){je(`[sampler] load ${s}..`,"load-sample",{url:t});const i=Date.now();go[t]=fetch(t).then(a=>a.arrayBuffer()).then(async a=>{const o=Date.now()-i,u=kA(a.byteLength);je(`[sampler] load ${s}... done! loaded ${u} in ${o}ms`,"loaded-sample",{url:t});const c=await e.decodeAudioData(a);return cm[t]=c,c})}return go[t]};function dm(t){const e=At(),n=e.createBuffer(t.numberOfChannels,t.length,e.sampleRate);for(let r=0;r<t.numberOfChannels;r++)n.copyToChannel(t.getChannelData(r).slice().reverse(),r,r);return n}const _3=t=>cm[t];function H3(t){if(t.startsWith("bubo:")){const[e,n]=t.split(":");t=`github:Bubobubobubobubo/dough-${n}`}return t}function j3(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,r]=t.split("github:");return r=r.endsWith("/")?r.slice(0,-1):r,r.split("/").length===2&&(r+="/main"),`https://raw.githubusercontent.com/${r}/${e}`}const mm=(t,e,n=t._base||"")=>Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&(s=[s]),typeof s!="object")throw new Error("wrong sample map format for "+r);n=s._base||n,n=H3(n),n.startsWith("github:")&&(n=j3(n,""));const i=a=>n+a;Array.isArray(s)?s=s.map(i):s=Object.fromEntries(Object.entries(s).map(([a,o])=>[a,(typeof o=="string"?[o]:o).map(i)])),e(r,s)});let J3={};function O3(t,e){J3[t]=e}function BA(t){const e=Object.entries(J3).find(([n])=>t.startsWith(n));if(e)return e[1]}const fm=async(t,e=t._base||"",n={})=>{if(typeof t=="string"){const i=BA(t);if(i)return i(t);if(t=H3(t),t.startsWith("github:")&&(t=j3(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432"),t.startsWith("shabda:")){let[o,u]=t.split("shabda:");t=`https://shabda.ndre.gr/${u}.json?strudel=1`}if(t.startsWith("shabda/speech")){let[o,u]=t.split("shabda/speech");u=u.startsWith("/")?u.substring(1):u;let[c,l]=u.split(":"),d="f",m="en-GB";c&&([m,d]=c.split("/")),t=`https://shabda.ndre.gr/speech/${l}.json?gender=${d}&language=${m}&strudel=1'`}if(typeof fetch!="function")return;const a=t.split("/").slice(0,-1).join("/");return typeof fetch>"u"?void 0:fetch(t).then(o=>o.json()).then(o=>fm(o,e||o._base||a,n)).catch(o=>{throw console.error(o),new Error(`error loading "${t}"`)})}const{prebake:r,tag:s}=n;mm(t,(i,a)=>kn(i,(o,u,c)=>ym(o,u,c,a),{type:"sample",samples:a,baseUrl:e,prebake:r,tag:s}),e)},q1=[];async function ym(t,e,n,r,s){let{s:i,nudge:a=0,cut:o,loop:u,clip:c=void 0,n:l=0,speed:d=1,duration:m}=e;if(d===0)return;const f=At();let[g,b,x,D]=vn([e.attack,e.decay,e.sustain,e.release]);const{bufferSource:G,sliceDuration:k,offset:Z}=await pm(e,r,s);if(f.currentTime>t){je(`[sampler] still loading sound "${i}:${l}"`,"highlight");return}if(!G){je(`[sampler] could not load "${i}:${l}"`,"error");return}let A=cs(G.detune,e,t);const V=t+a;G.start(V,Z);const E=f.createGain(),B=G.connect(E);c==null&&u==null&&e.release==null&&(m=k);let K=t+m;Cn(B.gain,g,b,x,D,0,1,t,K,"linear"),us(G.detune,e,t,K);const R=f.createGain();B.connect(R),G.onended=function(){G.disconnect(),A==null||A.stop(),B.disconnect(),R.disconnect(),n()};let j=K+D+.01;G.stop(j);const W={node:R,bufferSource:G,stop:_=>{G.stop(_)}};if(o!==void 0){const _=q1[o];_&&(_.node.gain.setValueAtTime(1,V),_.node.gain.linearRampToValueAtTime(0,V+.01)),q1[o]=W}return W}const Ga=128,Oo="System Standard";let U3=Ga;function bm(t){U3=parseInt(t)??Ga}let Q3=!1;function gm(t){Q3=t==!0}function LA(t){return typeof t=="number"?t%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[t]??0}const Dn=VA();function kn(t,e,n={}){t=t.toLowerCase().replace(/\s+/g,"_"),Dn.setKey(t,{onTrigger:e,data:n})}let q3=t=>t;function En(t){return q3(t)}function $3(t){q3=t}function Uo(t){for(const n in t)t[n.toLowerCase()]=t[n];const e=Dn.get();for(const n in e){const[r,s]=n.split("_");if(!s)continue;const i=t[r];if(i){if(typeof i=="string")e[`${i}_${s}`.toLowerCase()]=e[n];else if(Array.isArray(i))for(const a of i)e[`${a}_${s}`.toLowerCase()]=e[n]}}Dn.set({...e})}async function WA(t){const e=await(await fetch(t)).json();Uo(e)}async function t9(...t){switch(t.length){case 1:return typeof t[0]=="string"?WA(t[0]):Uo(t[0]);case 2:return Uo({[t[0]]:t[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+t.length)}}function zs(t){return typeof t!="string"?(console.warn(`getSound: expected string got "${t}". fall back to triangle`),Dn.get().triangle):Dn.get()[t.toLowerCase()]}const Mm=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let t=await navigator.mediaDevices.enumerateDevices();t=t.filter(n=>n.kind==="audiooutput"&&n.deviceId!=="default");const e=new Map;return e.set(Oo,""),t.forEach(n=>{e.set(n.label,n.deviceId)}),e};let pi={s:"triangle",gain:.8,postgain:1,density:".03",ftype:"12db",fanchor:0,resonance:1,hresonance:1,bandq:1,channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const RA=Object.freeze({...pi});function e9(t,e){pi[t]=e}function n9(){pi={...RA}}let Pm=new Map(Object.entries(pi));function Sa(t,e){Pm.set(t,e)}function se(t){return Pm.get(t)}function r9(t){Object.keys(t).forEach(e=>{Sa(e,t[e])})}function Cm(){Pm=new Map(Object.entries(pi))}function s9(t){Cm(),t==="1.0"&&Sa("fanchor",.5)}const i9=()=>Dn.set({});let Qo;const vm=()=>(Qo=new AudioContext,Qo),At=()=>Qo||vm();function a9(){return At().currentTime}let Mo;function TA(){return Mo||(Mo=At().audioWorklet.addModule(ZA)),Mo}async function xm(t={}){const{disableWorklets:e=!1,maxPolyphony:n,audioDeviceName:r=Oo,multiChannelOrbits:s=!1}=t;if(bm(n),gm(s),typeof window>"u")return;const i=At();if(r!=null&&r!=Oo)try{const a=(await Mm()).get(r),o=(a??"").length>0;i.sinkId!==a&&o&&await i.setSinkId(a),je(`[superdough] Audio Device set to ${r}, it might take a few seconds before audio plays on all output channels`)}catch{je("[superdough] failed to set audio interface","warning")}if(await i.resume(),e){je("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await TA(),je("[superdough] AudioWorklets loaded")}catch(a){console.warn("could not load AudioWorklet effects",a)}je("[superdough] ready")}let Po;async function Am(t){return Po||(Po=new Promise(e=>{document.addEventListener("click",async function n(){document.removeEventListener("click",n),await xm(t),e()})})),Po}let ji,ss;function Dm(){const t=At(),e=t.destination.maxChannelCount;t.destination.channelCount=e,ji=new ChannelMergerNode(t,{numberOfInputs:t.destination.channelCount}),ss=new GainNode(t),ji.connect(ss),ss.connect(t.destination)}const Fm=(t,e=[0,1])=>{const n=At();ji==null&&Dm();const r=new StereoPannerNode(n);t.connect(r);const s=new ChannelSplitterNode(n,{numberOfOutputs:r.channelCount});r.connect(s),e.forEach((i,a)=>{s.connect(ji,a%r.channelCount,i%n.destination.channelCount)})},o9=()=>{ss!=null&&(ss.gain.linearRampToValueAtTime(0,At().currentTime+.01),ss=null)};function zA(t,e,n,r){var s;if(n=Sr(n,0,.98),!zt[t].delayNode){const i=At().createFeedbackDelay(1,e,n);(s=i.start)==null||s.call(i,r),Ji(i,t),zt[t].delayNode=i}return zt[t].delayNode.delayTime.value!==e&&zt[t].delayNode.delayTime.setValueAtTime(e,r),zt[t].delayNode.feedback.value!==n&&zt[t].delayNode.feedback.setValueAtTime(n,r),zt[t].delayNode}function di(t,e,n,r={}){const{shape:s=0,...i}=r,{dcoffset:a=-.5,depth:o=1}=r,u={frequency:1,depth:o,skew:.5,phaseoffset:0,time:e,begin:e,end:n,shape:LA(s),dcoffset:a,min:a*o,max:a*o+o,curve:1,...i};return on(t,"lfo-processor",u)}function IA(t,e,n=1,r=.5,s=1e3,i=2e3){const a=At(),o=di(a,t,e,{frequency:n,depth:i*2}),u=2;let c=0;const l=[];for(let d=0;d<u;d++){const m=a.createBiquadFilter();m.type="notch",m.gain.value=1,m.frequency.value=s+c,m.Q.value=2-Math.min(Math.max(r*2,0),1.9),o.connect(m.detune),c+=282,d>0&&l[d-1].connect(m),l.push(m)}return l[l.length-1]}function NA(t){t=t??0;const e=["12db","ladder","24db"];return typeof t=="number"?e[Math.floor(N3(t,e.length))]:t}let zt={};function Ji(t,e){zt[e]==null&&im(new Error("target orbit does not exist"),"superdough"),t.connect(zt[e].gain)}function KA(t,e,n){zt[e]==null&&(zt[e]={gain:new GainNode(t,{gain:1,channelCount:2,channelCountMode:"explicit"})},Fm(zt[e].gain,n))}function YA(t,e,n,r=.1,s=1){[e].flat().forEach(i=>{if(zt[i]==null){im(new Error(`duck target orbit ${i} does not exist`),"superdough");return}rs(t,()=>{zt[i].gain.gain.cancelScheduledValues(n);const a=zt[i].gain.gain.value;zt[i].gain.gain.linearRampToValueAtTime(Sr(1-Math.pow(s,.5),.01,a),n),zt[i].gain.gain.exponentialRampToValueAtTime(1,n+Math.max(.002,r))},0,n-.01)})}let Or=(t,e)=>t!==void 0&&t!==e;function _A(t,e,n,r,s,i,a,o){if(!zt[t].reverbNode){const u=At().createReverb(e,n,r,s,i,a,o);Ji(u,t),zt[t].reverbNode=u}return(Or(e,zt[t].reverbNode.duration)||Or(n,zt[t].reverbNode.fade)||Or(r,zt[t].reverbNode.lp)||Or(s,zt[t].reverbNode.dim)||Or(a,zt[t].reverbNode.irspeed)||Or(o,zt[t].reverbNode.irbegin)||zt[t].reverbNode.ir!==i)&&zt[t].reverbNode.generate(e,n,r,s,i,a,o),zt[t].reverbNode}let Ze={},pr={};function Zm(t,e=1024,n=.5){if(!Ze[t]){const r=At().createAnalyser();r.fftSize=e,r.smoothingTimeConstant=n,Ze[t]=r,pr[t]=new Float32Array(Ze[t].frequencyBinCount)}return Ze[t].fftSize!==e&&(Ze[t].fftSize=e,pr[t]=new Float32Array(Ze[t].frequencyBinCount)),Ze[t]}function mi(t="time",e=1){const n={time:()=>{var r;return(r=Ze[e])==null?void 0:r.getFloatTimeDomainData(pr[e])},frequency:()=>{var r;return(r=Ze[e])==null?void 0:r.getFloatFrequencyData(pr[e])}}[t];if(!n)throw new Error(`getAnalyzerData: ${t} not supported. use one of ${Object.keys(n).join(", ")}`);return n(),pr[e]}function Co(t,e,n){const r=Ve(n);return t.connect(r),r.connect(e),r}function u9(){zt={},Ze={},pr={}}let Xs=new Map;function $1(t){return(Array.isArray(t)?t:[t]).map(e=>e-1)}const Ea=async(t,e,n,r=.5,s=.5)=>{var qe,He,pe;const i=At();let{stretch:a}=t;if(a!=null&&(e=e-.04),typeof t!="object")throw new Error(`expected hap.value to be an object, but got "${t}". Hint: append .note() or .s() to the end`,"error");if(t.duration=n,e<i.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${e.toFixed(2)}, now: ${i.currentTime.toFixed(2)})`);return}let{tremolo:o,tremolosync:u,tremolodepth:c=1,tremoloskew:l,tremolophase:d=0,tremoloshape:m,s:f=se("s"),bank:g,source:b,gain:x=se("gain"),postgain:D=se("postgain"),density:G=se("density"),duckorbit:k,duckattack:Z,duckdepth:A,fanchor:V=se("fanchor"),drive:E=.69,release:B=0,cutoff:K,lpenv:R,lpattack:j,lpdecay:W,lpsustain:_,lprelease:nt,resonance:ut=se("resonance"),hpenv:tt,hcutoff:st,hpattack:q,hpdecay:$,hpsustain:mt,hprelease:Lt,hresonance:Y=se("hresonance"),bpenv:St,bandf:Kt,bpattack:ye,bpdecay:Gt,bpsustain:Yt,bprelease:ct,bandq:xt=se("bandq"),phaserrate:ae,phaserdepth:ee=se("phaserdepth"),phasersweep:Mt,phasercenter:Ye,coarse:Tt,crush:We,dry:oe,shape:ne,shapevol:be=se("shapevol"),distort:Ge,distortvol:Ae=se("distortvol"),pan:De,vowel:Se,delay:Jt=se("delay"),delayfeedback:Ee=se("delayfeedback"),delaysync:Pt=se("delaysync"),delaytime:Vt,orbit:et=se("orbit"),room:It,roomfade:kt,roomlp:dn,roomdim:Gn,roomsize:Fe,ir:Sn,irspeed:Ue,irbegin:Ot,i:Nn=se("i"),velocity:mn=se("velocity"),analyze:_t,fft:ue=se("fft"),compressor:_e,compressorRatio:Qe,compressorKnee:Kn,compressorAttack:Cr,compressorRelease:ar}=t;Vt=Vt??FA(Pt,r);const h=$1(Q3&&et>0?[et*2-1,et*2]:se("channels")),M=t.channels!=null?$1(t.channels):h;KA(i,et,M),k!=null&&YA(i,k,e,Z,A),x=En(Qn(x,1)),D=En(D),be=En(be),Ae=En(Ae),Jt=En(Jt),mn=En(mn),c=En(c),x*=mn;const y=e+n,P=y+B,F=Math.round(Math.random()*1e6);for(let vt=0;vt<=Xs.size-U3;vt++){const de=Xs.entries().next(),ht=de.value[1],Nt=de.value[0],Ht=e+.25;(He=(qe=ht==null?void 0:ht.node)==null?void 0:qe.gain)==null||He.linearRampToValueAtTime(0,Ht),(pe=ht==null?void 0:ht.stop)==null||pe.call(ht,Ht),Xs.delete(Nt)}let L=[];if(["-","~","_"].includes(f))return;g&&f&&(f=`${g}_${f}`,t.s=f);let z;if(b)z=b(e,t,n,r);else if(zs(f)){const{onTrigger:vt}=zs(f),de=await vt(e,t,()=>{L.forEach(ht=>ht==null?void 0:ht.disconnect()),Xs.delete(F)});de&&(z=de.node,Xs.set(F,de))}else throw new Error(`sound ${f} not found! Is it loaded?`);if(!z)return;if(i.currentTime>e){je("[webaudio] skip hap: still loading",i.currentTime-e);return}const I=[];I.push(z),a!==void 0&&I.push(on(i,"phase-vocoder-processor",{pitchFactor:a})),I.push(Ve(x));const Q=NA(t.ftype);if(K!==void 0){let vt=()=>Ts(i,"lowpass",K,ut,j,W,_,nt,R,e,y,V,Q,E);I.push(vt()),Q==="24db"&&I.push(vt())}if(st!==void 0){let vt=()=>Ts(i,"highpass",st,Y,q,$,mt,Lt,tt,e,y,V);I.push(vt()),Q==="24db"&&I.push(vt())}if(Kt!==void 0){let vt=()=>Ts(i,"bandpass",Kt,xt,ye,Gt,Yt,ct,St,e,y,V);I.push(vt()),Q==="24db"&&I.push(vt())}if(Se!==void 0){const vt=i.createVowelFilter(Se);I.push(vt)}if(Tt!==void 0&&I.push(on(i,"coarse-processor",{coarse:Tt})),We!==void 0&&I.push(on(i,"crush-processor",{crush:We})),ne!==void 0&&I.push(on(i,"shape-processor",{shape:ne,postgain:be})),Ge!==void 0&&I.push(on(i,"distort-processor",{distort:Ge,postgain:Ae})),u!=null&&(o=r*u),o!==void 0){const vt=Math.max(1-c,0),de=new GainNode(i,{gain:vt}),ht=s/r;di(i,e,P,{skew:l??(m!=null?.5:1),frequency:o,depth:c,time:ht,dcoffset:0,shape:m,phaseoffset:d,min:0,max:1,curve:1.5}).connect(de.gain),I.push(de)}if(_e!==void 0&&I.push(om(i,_e,Qe,Kn,Cr,ar)),De!==void 0){const vt=i.createStereoPanner();vt.pan.value=2*De-1,I.push(vt)}if(ae!==void 0&&ee>0){const vt=IA(e,P,ae,ee,Ye,Mt);I.push(vt)}const ft=new GainNode(i,{gain:D});I.push(ft);let Wt;if(Jt>0&&Vt>0&&Ee>0){const vt=zA(et,Vt,Ee,e);Wt=Co(ft,vt,Jt),L.push(Wt)}let ge;if(It>0){let vt;if(Sn!==void 0){let ht,Nt=zs(Sn);Array.isArray(Nt)?ht=Nt.data.samples[Nn%Nt.data.samples.length]:typeof Nt=="object"&&(ht=Object.values(Nt.data.samples).flat()[Nn%Object.values(Nt.data.samples).length]),vt=await Xa(ht,i,Sn,0)}const de=_A(et,Fe,kt,dn,Gn,vt,Ue,Ot);ge=Co(ft,de,It),L.push(ge)}let Ft;if(_t){const vt=Zm(_t,2**(ue+5));Ft=Co(ft,vt,1),L.push(Ft)}if(oe!=null){oe=En(oe);const vt=new GainNode(i,{gain:oe});I.push(vt),Ji(vt,et)}else Ji(ft,et);I.slice(1).reduce((vt,de)=>vt.connect(de),I[0]),L=L.concat(I)},c9=(t,e,n,r)=>{Ea(e,t-n,e.duration/r,r)},Rs=(t,e=36)=>{let{note:n,freq:r}=t;return n=n||e,typeof n=="string"&&(n=Za(n)),!r&&typeof n=="number"&&(r=I3(n)),Number(r)};function Gi(t){var e;t!=null&&(t.disconnect(),(e=t.parameters.get("end"))==null||e.setValueAtTime(0,0))}const HA=["triangle","square","sawtooth","sine"],jA=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function JA(t,e){const n=t,r=new Float32Array(e);for(let s=0;s<e;s++){const i=s*2/e-1;r[s]=Math.tanh(i*n)}return r}function wm(){[...HA].forEach(t=>{kn(t,(e,n,r)=>{const[s,i,a,o]=vn([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u=Gm(t,e,n),{node:c,stop:l,triggerRelease:d}=u;const m=Ve(.3),{duration:f}=n;c.onended=()=>{c.disconnect(),m.disconnect(),r()};const g=Ve(1);let b=c.connect(m).connect(g);const x=e+f;Cn(b.gain,s,i,a,o,0,1,e,x,"linear");const D=x+o+.01;return d==null||d(D),l(D),{node:b,stop:G=>{l(G)}}},{type:"synth",prebake:!0})}),kn("sbd",(t,e,n)=>{const{duration:r,decay:s=.5,pdecay:i=.5,penv:a=36,clip:o}=e,u=At(),c=.02,l=1.2,d=.025,m=1,f=u.createOscillator();f.type="triangle",f.frequency.value=Rs(e,29),f.detune.setValueAtTime(a*100,0),f.detune.setValueAtTime(a*100,t),f.detune.exponentialRampToValueAtTime(.001,t+i);const g=Ve(1);g.gain.setValueAtTime(1,t+c),g.gain.exponentialRampToValueAtTime(.001,t+c+s),f.start(t);const b=Jo("brown",t,2),x=Ve(1);x.gain.setValueAtTime(l,t),x.gain.exponentialRampToValueAtTime(.001,t+d);const D=new WaveShaperNode(u);D.curve=JA(2,u.sampleRate);const G=Ve(m);f.onended=()=>{f.disconnect(),g.disconnect(),D.disconnect(),b.node.disconnect(),x.disconnect(),G.disconnect(),n()};const k=f.connect(D).connect(g).connect(G);b.node.connect(x).connect(G);let Z=t+s+.01;return o!=null&&(Z=Math.min(t+o*r,Z)),G.gain.setValueAtTime(m,Z-.01),G.gain.linearRampToValueAtTime(0,Z),f.stop(Z),b.stop(Z),{node:k,stop:A=>{f.stop(A)}}},{type:"synth",prebake:!0}),kn("supersaw",(t,e,n)=>{const r=At();let{duration:s,n:i,unison:a=5,spread:o=.6,detune:u}=e;u=u??i??.18;const c=Rs(e),[l,d,m,f]=vn([e.attack,e.decay,e.sustain,e.release],"linear",[.001,.05,.6,.01]),g=t+s,b=g+f+.01,x=Sr(a,1,100);let D=x>1?Sr(o,0,1):0,G=on(r,"supersaw-oscillator",{frequency:c,begin:t,end:b,freqspread:u,voices:x,panspread:D},{outputChannelCount:[2]});const k=1/Math.sqrt(x);us(G.parameters.get("detune"),e,t,g);const Z=cs(G.parameters.get("detune"),e,t),A=qs(G.parameters.get("frequency"),e,t);let V=Ve(1);V=G.connect(V),Cn(V.gain,l,d,m,f,0,.3*k,t,g,"linear");let E=rs(r,()=>{Gi(G),V.disconnect(),n(),A==null||A.stop(),Z==null||Z.stop()},t,b);return{node:V,stop:B=>{E.stop(B)}}},{prebake:!0,type:"synth"}),kn("bytebeat",(t,e,n)=>{const r=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:s=0}=e,i=Rs(e),{byteBeatExpression:a=r[s%r.length],byteBeatStartTime:o}=e,u=At();let{duration:c}=e;const[l,d,m,f]=vn([e.attack,e.decay,e.sustain,e.release],"linear",[.001,.05,.6,.01]),g=t+c,b=g+f+.01;let x=on(u,"byte-beat-processor",{frequency:i,begin:t,end:b},{outputChannelCount:[2]});x.port.postMessage({codeText:a,byteBeatStartTime:o,frequency:i});let D=Ve(1);D=x.connect(D),Cn(D.gain,l,d,m,f,0,1,t,g,"linear");let G=rs(u,()=>{Gi(x),D.disconnect(),n()},t,b);return{node:D,stop:k=>{G.stop(k)}}},{prebake:!0,type:"synth"}),kn("pulse",(t,e,n)=>{const r=At();let{pwrate:s,pwsweep:i}=e;i==null&&(s!=null?i=.3:i=0),s==null&&i!=null&&(s=1);let{duration:a,pw:o=.5}=e;const u=Rs(e),[c,l,d,m]=vn([e.attack,e.decay,e.sustain,e.release],"linear",[.001,.05,.6,.01]),f=t+a,g=f+m+.01;let b=on(r,"pulse-oscillator",{frequency:u,begin:t,end:g,pulsewidth:o},{outputChannelCount:[2]});us(b.parameters.get("detune"),e,t,f);const x=cs(b.parameters.get("detune"),e,t),D=qs(b.parameters.get("frequency"),e,t);let G=Ve(1);G=b.connect(G),Cn(G.gain,c,l,d,m,0,1,t,f,"linear");let k;i!=0&&(k=di(r,t,g,{frequency:s,depth:i}),k.connect(b.parameters.get("pulsewidth")));let Z=rs(r,()=>{Gi(b),Gi(k),G.disconnect(),n(),D==null||D.stop(),x==null||x.stop()},t,g);return{node:G,stop:A=>{Z.stop(A)}}},{prebake:!0,type:"synth"}),[...wa].forEach(t=>{kn(t,(e,n,r)=>{const[s,i,a,o]=vn([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u,{density:c}=n;u=Jo(t,e,c);let{node:l,stop:d,triggerRelease:m}=u;const f=Ve(.3),{duration:g}=n;l.onended=()=>{l.disconnect(),f.disconnect(),r()};const b=Ve(1);let x=l.connect(f).connect(b);const D=e+g;Cn(x.gain,s,i,a,o,0,1,e,D,"linear");const G=D+o+.01;return m==null||m(G),d(G),{node:x,stop:k=>{d(k)}}},{type:"synth",prebake:!0})}),jA.forEach(([t,e])=>Dn.set({...Dn.get(),[t]:Dn.get()[e]}))}function Xm(t,e){const n=new Float32Array(t+1),r=new Float32Array(t+1),s=At(),i=s.createOscillator(),a={sawtooth:c=>[0,-1/c],square:c=>[0,c%2===0?0:1/c],triangle:c=>[c%2===0?0:1/(c*c),0]};if(!a[e])throw new Error(`unknown wave type ${e}`);n[0]=0,r[0]=0;let o=1;for(;o<=t;){const[c,l]=a[e](o);n[o]=c,r[o]=l,o++}const u=s.createPeriodicWave(n,r);return i.setPeriodicWave(u),i}function Gm(t,e,n){let{n:r,duration:s,noise:i=0}=n,a;!r||t==="sine"?(a=At().createOscillator(),a.type=t||"triangle"):a=Xm(r,t),a.frequency.value=Rs(n),a.start(e);let o=cs(a.detune,n,e);us(a.detune,n,e,e+s);const u=qs(a.frequency,n,e);let c;return i&&(c=wA(a,i,e)),{node:(c==null?void 0:c.node)||a,stop:l=>{u.stop(l),o==null||o.stop(l),c==null||c.stop(l),a.stop(l)},triggerRelease:l=>{}}}function OA(t=1,e=.05,n=220,r=0,s=0,i=.1,a=0,o=1,u=0,c=0,l=0,d=0,m=0,f=0,g=0,b=0,x=0,D=1,G=0,k=0){let Z=Math.PI*2,A=At().sampleRate,V=$=>$>0?1:-1,E=u*=500*Z/A/A,B=n*=(1+e*2*Math.random()-e)*Z/A,K=[],R=0,j=0,W=0,_=1,nt=0,ut=0,tt=0,st,q;for(r=r*A+9,G*=A,s*=A,i*=A,x*=A,c*=500*Z/A**3,g*=Z/A,l*=Z/A,d*=A,m=m*A|0,q=r+G+s+i+x|0;W<q;K[W++]=tt)++ut%(b*100|0)||(tt=a?a>1?a>2?a>3?Math.sin((R%Z)**3):Math.max(Math.min(Math.tan(R),1),-1):1-(2*R/Z%2+2)%2:1-4*Math.abs(Math.round(R/Z)-R/Z):Math.sin(R),tt=(m?1-k+k*Math.sin(Z*W/m):1)*V(tt)*Math.abs(tt)**o*t*1*(W<r?W/r:W<r+G?1-(W-r)/G*(1-D):W<r+G+s?D:W<q-x?(q-W-x)/i*D:0),tt=x?tt/2+(x>W?0:(W<q-x?1:(q-W)/x)*K[W-x|0]/2):tt),st=(n+=u+=c)*Math.cos(g*j++),R+=st-st*f*(1-(Math.sin(W)+1)*1e9%2),_&&++_>d&&(n+=l,B+=l,_=0),m&&!(++nt%m)&&(n=B,u=E,_||(_=1));return K}const Sm=(t,e)=>{let{s:n,note:r=36,freq:s,zrand:i=0,attack:a=0,decay:o=0,sustain:u=.8,release:c=.1,curve:l=1,slide:d=0,deltaSlide:m=0,pitchJump:f=0,pitchJumpTime:g=0,lfo:b=0,znoise:x=0,zmod:D=0,zcrush:G=0,zdelay:k=0,tremolo:Z=0,duration:A=.2,zzfx:V}=t;const E=Math.max(A-a-o,0);typeof r=="string"&&(r=Za(r)),!s&&typeof r=="number"&&(s=I3(r)),n=n.replace("z_","");const B=["sine","triangle","sawtooth","tan","noise"].indexOf(n)||0;l=n==="square"?0:l;const K=OA(...V||[.25,i,s,a,E,c,B,l,d,m,f,g,b,x,D,G,k,u,o,Z]),R=At(),j=R.createBuffer(1,K.length,R.sampleRate);j.getChannelData(0).set(K);const W=At().createBufferSource();return W.buffer=j,W.start(e),{node:W}};function l9(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(t=>{kn(t,(e,n,r)=>{const{node:s}=Sm({s:t,...n},e);return s.onended=()=>{s.disconnect(),r()},{node:s,stop:()=>{}}},{type:"synth",prebake:!0})})}let nn;async function Em(t,e){const n=`dsp-worklet-${Date.now()}`,r=`${e}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${n}', MyProcessor);
`,s=`data:text/javascript;base64,${btoa(r)}`;await t.audioWorklet.addModule(s);const i=new AudioWorkletNode(t,n);return{node:i,stop:()=>i.port.postMessage("stop")}}const h9=()=>{var t;nn&&(nn==null||nn.stop(),(t=nn==null?void 0:nn.node)==null||t.disconnect())};typeof window<"u"&&window.addEventListener("message",t=>{var e;t.data==="strudel-stop"?h9():(e=t.data)!=null&&e.dough&&(nn==null||nn.node.port.postMessage(t.data))});const p9=async t=>{const e=At();h9(),nn=await Em(e,t),nn.node.connect(e.destination)};function Vm(t,e,n,r){window.postMessage({time:r,dough:t.value,currentTime:e,duration:t.duration,cps:n})}const{Pattern:UA,logger:QA,repl:qA}=T3;am(QA);const $A=t=>(t.ensureObjectValue(),t.value),km=(t,e,n,r,s)=>{var i;return Ea($A(t),s,n,r,(i=t.whole)==null?void 0:i.begin.valueOf())};function Bm(t={}){return t={getTime:()=>At().currentTime,defaultOutput:km,...t},qA(t)}UA.prototype.dough=function(){return this.onTrigger(Vm,1)};const Br=(t="test-canvas",e)=>{let{contextType:n="2d",pixelated:r=!1,pixelRatio:s=window.devicePixelRatio}={},i=document.querySelector("#"+t);if(!i){i=document.createElement("canvas"),i.id=t,i.width=window.innerWidth*s,i.height=window.innerHeight*s,i.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",r&&(i.style.imageRendering="pixelated"),document.body.prepend(i);let a;window.addEventListener("resize",()=>{a&&clearTimeout(a),a=setTimeout(()=>{i.width=window.innerWidth*s,i.height=window.innerHeight*s},200)})}return i.getContext(n,{willReadFrequently:!0})};let Is={};function tD(t){Is[t]!==void 0&&(cancelAnimationFrame(Is[t]),delete Is[t])}let jn={};J.prototype.draw=function(t,e){if(typeof window>"u")return this;let{id:n=1,lookbehind:r=0,lookahead:s=0}=e,i=Math.max(Hi(),0);tD(n),r=Math.abs(r),jn[n]=(jn[n]||[]).filter(c=>!c.isInFuture(i));let a=this.queryArc(i,i+s).filter(c=>c.hasOnset());jn[n]=jn[n].concat(a);let o;const u=()=>{const c=Hi(),l=c+s;jn[n]=jn[n].filter(f=>f.isInNearPast(r,c));let d=Math.max(o||l,l-1/10);const m=this.queryArc(d,l).filter(f=>f.hasOnset());jn[n]=jn[n].concat(m),o=l,t(jn[n],c,l,this),Is[n]=requestAnimationFrame(u)};return Is[n]=requestAnimationFrame(u),this};J.prototype.onPaint=function(t){return this.withState(e=>{e.controls.painters||(e.controls.painters=[]),e.controls.painters.push(t)})};J.prototype.getPainters=function(){let t=[];return this.queryArc(0,0,{painters:t}),t};let eD={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function qn(){return eD}let tf="#22222210";J.prototype.animate=function({callback:t,sync:e=!1,smear:n=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const r=Br();let{clientWidth:s,clientHeight:i}=r.canvas;s*=window.devicePixelRatio,i*=window.devicePixelRatio;let a=n===0?"99":Number((1-n)*100).toFixed(0);a=a.length===1?`0${a}`:a,tf=`#200010${a}`;const o=u=>{let c;u=Math.round(u),c=this.slow(1e3).queryArc(u,u),r.fillStyle=tf,r.fillRect(0,0,s,i),c.forEach(l=>{let{x:d,y:m,w:f,h:g,s:b,r:x,angle:D=0,fill:G="darkseagreen"}=l.value;if(f*=s,g*=i,x!==void 0&&D!==void 0){const Z=D*2*Math.PI,[A,V]=[(s-f)/2,(i-g)/2];d=A+Math.cos(Z)*x*A,m=V+Math.sin(Z)*x*V}else d*=s-f,m*=i-g;const k={...l.value,x:d,y:m,w:f,h:g};r.fillStyle=G,b==="rect"?r.fillRect(d,m,f,g):b==="ellipse"&&(r.beginPath(),r.ellipse(d+f/2,m+g/2,f/2,g/2,0,0,2*Math.PI),r.fill()),t&&t(r,k,l)}),window.frame=requestAnimationFrame(o)};return window.frame=requestAnimationFrame(o),Rt};const{x:d9,y:V7,w:k7,h:B7,angle:L7,r:W7,fill:R7,smear:T7}=fa("x","y","w","h","angle","r","fill","smear");T("rescale",function(t,e){return e.mul(d9(t).w(t).y(t).h(t))});T("moveXY",function(t,e,n){return n.add(d9(t).y(e))});T("zoomIn",function(t,e){const n=ie(1).sub(t).div(2);return e.rescale(t).move(n,n)});const Gs=(t,e,n)=>t*(n-e)+e,ef=t=>{let{value:e}=t;typeof t.value!="object"&&(e={value:e});let{note:n,n:r,freq:s,s:i}=e;if(s)return sa(s);if(n=n??r,typeof n=="string")try{return rr(n)}catch{return 0}return typeof n=="number"?n:i?"_"+i:e};J.prototype.pianoroll=function(t={}){let{cycles:e=4,playhead:n=.5,overscan:r=0,hideNegative:s=!1,ctx:i=Br(),id:a=1}=t,o=-e*n,u=e*(1-n);const c=(l,d)=>(!s||l.whole.begin>=0)&&l.isWithinTime(d+o,d+u);return this.draw((l,d)=>{m9({...t,time:d,ctx:i,haps:l.filter(m=>c(m,d))})},{lookbehind:o-r,lookahead:u+r,id:a}),this};function m9({time:t,haps:e,cycles:n=4,playhead:r=.5,flipTime:s=0,flipValues:i=0,hideNegative:a=!1,inactive:o=qn().foreground,active:u=qn().foreground,background:c="transparent",smear:l=0,playheadColor:d=qn().foreground,minMidi:m=10,maxMidi:f=90,autorange:g=0,timeframe:b,fold:x=1,vertical:D=0,labels:G=!1,fill:k=1,fillActive:Z=!1,strokeActive:A=!0,stroke:V,hideInactive:E=0,colorizeInactive:B=1,fontFamily:K,ctx:R,id:j}={}){const W=R.canvas.width,_=R.canvas.height;let nt=-n*r,ut=n*(1-r);j&&(e=e.filter(ct=>ct.hasTag(j))),b&&(console.warn("timeframe is deprecated! use from/to instead"),nt=0,ut=b);const tt=D?_:W,st=D?W:_;let q=D?[tt,0]:[0,tt];const $=ut-nt,mt=D?[0,st]:[st,0];let Lt=f-m+1,Y=st/Lt,St=[];s&&q.reverse(),i&&mt.reverse();const{min:Kt,max:ye,values:Gt}=e.reduce(({min:ct,max:xt,values:ae},ee)=>{const Mt=ef(ee);return{min:Mt<ct?Mt:ct,max:Mt>xt?Mt:xt,values:ae.includes(Mt)?ae:[...ae,Mt]}},{min:1/0,max:-1/0,values:[]});g&&(m=Kt,f=ye,Lt=f-m+1),St=Gt.sort((ct,xt)=>typeof ct=="number"&&typeof xt=="number"?ct-xt:typeof ct=="number"?1:String(ct).localeCompare(String(xt))),Y=x?st/St.length:st/Lt,R.fillStyle=c,R.globalAlpha=1,l||(R.clearRect(0,0,W,_),R.fillRect(0,0,W,_)),e.forEach(ct=>{var Ee;const xt=ct.whole.begin<=t&&ct.endClipped>t;let ae=V??(A&&xt),ee=!xt&&k||xt&&Z;if(E&&!xt)return;let Mt=(Ee=ct.value)==null?void 0:Ee.color;u=Mt||u,o=B&&Mt||o,Mt=xt?u:o,R.fillStyle=ee?Mt:"transparent",R.strokeStyle=Mt;const{velocity:Ye=1,gain:Tt=1}=ct.value||{};R.globalAlpha=Ye*Tt;const We=(ct.whole.begin-(s?ut:nt))/$,oe=Gs(We,...q);let ne=Gs(ct.duration/$,0,tt);const be=ef(ct),Ge=x?St.indexOf(be)/St.length:(Number(be)-m)/Lt,Ae=Gs(Ge,...mt);let De=0;const Se=Gs(t/$,...q);let Jt;if(D?Jt=[Ae+1-(i?Y:0),tt-Se+oe+De+1-(s?0:ne),Y-2,ne-2]:Jt=[oe-Se+De+1-(s?ne:0),Ae+1-(i?0:Y),ne-2,Y-2],ae&&R.strokeRect(...Jt),ee&&R.fillRect(...Jt),G){const Pt=ct.value.note??ct.value.s+(ct.value.n?`:${ct.value.n}`:""),{label:Vt,activeLabel:et}=ct.value,It=(xt&&et||Vt)??Pt;let kt=D?ne:Y*.75;R.font=`${kt}px ${K||"monospace"}`,R.fillStyle=ee?"black":Mt,R.textBaseline="top",R.fillText(It,...Jt)}}),R.globalAlpha=1;const Yt=Gs(-nt/$,...q);return R.strokeStyle=d,R.beginPath(),D?(R.moveTo(0,Yt),R.lineTo(st,Yt)):(R.moveTo(Yt,0),R.lineTo(Yt,st)),R.stroke(),this}function nD(t,e={}){let[n,r]=t;n=Math.abs(n);const s=r+n,i=s!==0?n/s:0;return{fold:1,...e,cycles:s,playhead:i}}const rD=(t={})=>(e,n,r,s)=>m9({ctx:e,time:n,haps:r,...nD(s,t)});J.prototype.punchcard=function(t){return this.onPaint(rD(t))};J.prototype.wordfall=function(t){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...t})};function sD(t,e,n,r){const s=(t-90)*Math.PI/180;return[n+Math.cos(s)*e,r+Math.sin(s)*e]}const nf=(t,e,n,r,s=0)=>sD((t+s)*360,e*t,n,r);function rf(t){let{ctx:e,from:n=0,to:r=3,margin:s=50,cx:i=100,cy:a=100,rotate:o=0,thickness:u=s/2,color:c=qn().foreground,cap:l="round",stretch:d=1,fromOpacity:m=1,toOpacity:f=1}=t;n*=d,r*=d,o*=d,e.lineWidth=u,e.lineCap=l,e.strokeStyle=c,e.globalAlpha=m,e.beginPath();let[g,b]=nf(n,s,i,a,o);e.moveTo(g,b);const x=1/60;let D=n;for(;D<=r;){const[G,k]=nf(D,s,i,a,o);e.globalAlpha=(D-n)/(r-n)*f,e.lineTo(G,k),D+=x}e.stroke()}function iD(t){let{stretch:e=1,size:n=80,thickness:r=n/2,cap:s="butt",inset:i=3,playheadColor:a="#ffffff",playheadLength:o=.02,playheadThickness:u=r,padding:c=0,steady:l=1,activeColor:d=qn().foreground,inactiveColor:m=qn().gutterForeground,colorizeInactive:f=0,fade:g=!0,ctx:b,time:x,haps:D,drawTime:G,id:k}=t;k&&(D=D.filter(W=>W.hasTag(k)));const[Z,A]=[b.canvas.width,b.canvas.height];b.clearRect(0,0,Z*2,A*2);const[V,E]=[Z/2,A/2],B={margin:n/e,cx:V,cy:E,stretch:e,cap:s,thickness:r},K={...B,thickness:u,from:i-o,to:i,color:a},[R]=G,j=l*x;D.forEach(W=>{var $;const _=W.whole.begin<=x&&W.endClipped>x,nt=W.whole.begin-x+i,ut=W.endClipped-x+i-c,tt=(($=W.value)==null?void 0:$.color)||d,st=f||_?tt:m,q=g?1-Math.abs((W.whole.begin-x)/R):1;rf({ctx:b,...B,from:nt,to:ut,rotate:j,color:st,fromOpacity:q,toOpacity:q})}),rf({ctx:b,...K,rotate:j})}J.prototype.spiral=function(t={}){return this.onPaint((e,n,r,s)=>iD({ctx:e,time:n,haps:r,drawTime:s,...t}))};const aD=Xr(36),sf=(t,e,n,r)=>{r=r*Math.PI*2;const s=Math.sin(r)*n+t,i=Math.cos(r)*n+e;return[s,i]},af=(t,e)=>.5-Math.log2(t/e)%1;function oD({haps:t,ctx:e,id:n,hapcircles:r=1,circle:s=0,edo:i=12,root:a=aD,thickness:o=3,hapRadius:u=6,mode:c="flake",margin:l=10}={}){const d=c==="polygon",m=c==="flake",f=e.canvas.width,g=e.canvas.height;e.clearRect(0,0,f,g);const b=qn().foreground,x=Math.min(f,g)/2-o/2-u-l,D=f/2,G=g/2;n&&(t=t.filter(Z=>Z.hasTag(n))),e.strokeStyle=b,e.fillStyle=b,e.globalAlpha=1,e.lineWidth=o,s&&(e.beginPath(),e.arc(D,G,x,0,2*Math.PI),e.stroke()),i&&(Array.from({length:i},(Z,A)=>{const V=af(a*Math.pow(2,A/i),a),[E,B]=sf(D,G,x,V);e.beginPath(),e.arc(E,B,u,0,2*Math.PI),e.fill()}),e.stroke());let k=[];e.lineWidth=u,t.forEach(Z=>{let A;try{A=Fu(Z)}catch{return}const V=af(A,a),[E,B]=sf(D,G,x,V),K=Z.value.color||b;e.strokeStyle=K,e.fillStyle=K;const{velocity:R=1,gain:j=1}=Z.value||{},W=R*j;e.globalAlpha=W,k.push([E,B,V,K,W]),e.beginPath(),r&&(e.moveTo(E+u,B),e.arc(E,B,u,0,2*Math.PI),e.fill()),m&&(e.moveTo(D,G),e.lineTo(E,B)),e.stroke()}),e.strokeStyle=b,e.globalAlpha=1,d&&k.length&&(k=k.sort((Z,A)=>Z[2]-A[2]),e.beginPath(),e.moveTo(k[0][0],k[0][1]),k.forEach(([Z,A,V,E,B])=>{e.strokeStyle=E,e.globalAlpha=B,e.lineTo(Z,A)}),e.lineTo(k[0][0],k[0][1]),e.stroke())}J.prototype.pitchwheel=function(t={}){let{ctx:e=Br(),id:n=1}=t;return this.tag(n).onPaint((r,s,i)=>oD({...t,ctx:e,haps:i.filter(a=>a.isActive(s)),id:n}))};function Lm(t,{align:e=!0,color:n="white",thickness:r=3,scale:s=.25,pos:i=.75,trigger:a=0,ctx:o=Br(),id:u=1}={}){o.lineWidth=r,o.strokeStyle=n;let c=o.canvas;if(!t){o.beginPath();let b=i*c.height;o.moveTo(0,b),o.lineTo(c.width,b),o.stroke();return}const l=mi("time",u);o.beginPath();const d=t.frequencyBinCount;let m=e?Array.from(l).findIndex((b,x,D)=>x&&D[x-1]>-a&&b<=-a):0;m=Math.max(m,0);const f=c.width*1/d;let g=0;for(let b=m;b<d;b++){const x=l[b]+1,D=(i-s*(x-1))*c.height;b===0?o.moveTo(g,D):o.lineTo(g,D),g+=f}o.stroke()}function Wm(t,{color:e="white",scale:n=.25,pos:r=.75,lean:s=.5,min:i=-150,max:a=0,ctx:o=Br(),id:u=1}={}){if(!t){o.beginPath();let g=r*l.height;o.moveTo(0,g),o.lineTo(l.width,g),o.stroke();return}const c=mi("frequency",u),l=o.canvas;o.fillStyle=e;const d=t.frequencyBinCount,m=l.width*1/d;let f=0;for(let g=0;g<d;g++){const b=ii((c[g]-i)/(a-i),0,1)*n,x=b*l.height,D=(r-b*s)*l.height;o.fillRect(f,D,Math.max(m,1),x),f+=m}}function f9(t=0,e="0,0,0",n=Br()){t?(n.fillStyle=`rgba(${e},${1-t})`,n.fillRect(0,0,n.canvas.width,n.canvas.height)):n.clearRect(0,0,n.canvas.width,n.canvas.height)}J.prototype.fscope=function(t={}){let e=t.id??1;return this.analyze(e).draw(()=>{f9(t.smear,"0,0,0",t.ctx),Ze[e]&&Wm(Ze[e],t)},{id:e})};J.prototype.tscope=function(t={}){let e=t.id??1;return this.analyze(e).draw(n=>{var r,s;t.color=((s=(r=n[0])==null?void 0:r.value)==null?void 0:s.color)||qn().foreground,t.color,f9(t.smear,"0,0,0",t.ctx),Lm(Ze[e],t)},{id:e})};J.prototype.scope=J.prototype.tscope;let of={};J.prototype.spectrum=function(t={}){let e=t.id??1;return this.analyze(e).draw(n=>{var r,s;t.color=((s=(r=n[0])==null?void 0:r.value)==null?void 0:s.color)||of[e]||qn().foreground,of[e]=t.color,uD(Ze[e],t)},{id:e})};J.prototype.scope=J.prototype.tscope;const vo=new Map;function uD(t,{thickness:e=3,speed:n=1,min:r=-80,max:s=0,ctx:i=Br(),id:a=1,color:o}={}){if(i.lineWidth=e,i.strokeStyle=o,!t)return;const u=n,c=mi("frequency",a),l=i.canvas;i.fillStyle=o;const d=t.frequencyBinCount;let m=vo.get(a)||i.getImageData(0,0,l.width,l.height);vo.set(a,m),i.clearRect(0,0,i.canvas.width,i.canvas.height),i.putImageData(m,-u,0);let f=l.width-n;for(let g=0;g<d;g++){const b=ii((c[g]-r)/(s-r),0,1);i.globalAlpha=b;const x=Math.log(g+1)/Math.log(d)*l.height;i.fillRect(f,l.height-x,u,2)}vo.set(a,i.getImageData(0,0,l.width,l.height))}const cD=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY:Ga,aliasBank:t9,get analysers(){return Ze},get analysersData(){return pr},applyFM:qs,applyGainCurve:En,connectToDestination:Fm,createFilter:Ts,dough:p9,doughTrigger:Vm,drawFrequencyScope:Wm,drawTimeScope:Lm,drywet:um,dspWorklet:Em,errorLogger:im,gainNode:Ve,getADSRValues:vn,getAnalyserById:Zm,getAnalyzerData:mi,getAudioContext:At,getAudioContextCurrentTime:a9,getAudioDevices:Mm,getCachedBuffer:Y3,getCompressor:om,getDefaultValue:se,getLfo:di,getLoadedBuffer:_3,getOscillator:Gm,getParamADSR:Cn,getPitchEnvelope:us,getSampleBuffer:hm,getSampleBufferSource:pm,getSampleInfo:lm,getSound:zs,getVibratoOscillator:cs,getWorklet:on,getZZFX:Sm,initAudio:xm,initAudioOnFirstClick:Am,initializeAudioOutput:Dm,loadBuffer:Xa,logger:je,noises:wa,onTriggerSample:ym,panic:o9,processSampleMap:mm,registerSamplesPrefix:O3,registerSound:kn,registerSynthSounds:wm,registerZZFXSounds:l9,resetDefaultValues:Cm,resetDefaults:n9,resetGlobalEffects:u9,resetLoadedSounds:i9,reverseBuffer:dm,samples:fm,setDefault:e9,setDefaultAudioContext:vm,setDefaultValue:Sa,setDefaultValues:r9,setGainCurve:$3,setLogger:am,setMaxPolyphony:bm,setMultiChannelOrbits:gm,setVersionDefaults:s9,soundMap:Dn,superdough:Ea,superdoughTrigger:c9,waveformN:Xm,webAudioTimeout:rs,webaudioOutput:km,webaudioRepl:Bm},Symbol.toStringTag,{value:"Module"}));function lD(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function mr(t,e,n,r){var s=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(s,mr.prototype),s.expected=e,s.found=n,s.location=r,s.name="SyntaxError",s}lD(mr,Error);function xo(t,e,n){return n=n||" ",t.length>e?t:(e-=t.length,n+=n.repeat(e),t+n.slice(0,e))}mr.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<t.length;r++)if(t[r].source===this.location.source){n=t[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+i.line+":"+i.column;if(n){var o=this.location.end,u=xo("",i.line.toString().length," "),c=n[s.line-1],l=s.line===o.line?o.column:c.length+1,d=l-s.column||1;e+=`
 --> `+a+`
`+u+` |
`+i.line+" | "+c+`
`+u+" | "+xo("",s.column-1," ")+xo("",d,"^")}else e+=`
 at `+a}return e};mr.buildMessage=function(t,e){var n={literal:function(c){return'"'+s(c.text)+'"'},class:function(c){var l=c.parts.map(function(d){return Array.isArray(d)?i(d[0])+"-"+i(d[1]):i(d)});return"["+(c.inverted?"^":"")+l.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(c){return c.description}};function r(c){return c.charCodeAt(0).toString(16).toUpperCase()}function s(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(l){return"\\x0"+r(l)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(l){return"\\x"+r(l)})}function i(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(l){return"\\x0"+r(l)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(l){return"\\x"+r(l)})}function a(c){return n[c.type](c)}function o(c){var l=c.map(a),d,m;if(l.sort(),l.length>0){for(d=1,m=1;d<l.length;d++)l[d-1]!==l[d]&&(l[m]=l[d],m++);l.length=m}switch(l.length){case 1:return l[0];case 2:return l[0]+" or "+l[1];default:return l.slice(0,-1).join(", ")+", or "+l[l.length-1]}}function u(c){return c?'"'+s(c)+'"':"end of input"}return"Expected "+o(t)+" but "+u(e)+" found."};function Rm(t,e){e=e!==void 0?e:{};var n={},r=e.grammarSource,s={start:F1},i=F1,a=".",o="-",u="0",c=",",l="|",d="[",m="]",f="{",g="}",b="%",x="<",D=">",G="!",k="(",Z=")",A="/",V="*",E="?",B=":",K="..",R="^",j="struct",W="target",_="euclid",nt="slow",ut="rotL",tt="rotR",st="fast",q="scale",$="//",mt="cat",Lt="$",Y="setcps",St="setbpm",Kt="hush",ye=/^[1-9]/,Gt=/^[eE]/,Yt=/^[+\-]/,ct=/^[0-9]/,xt=/^[ \n\r\t\xA0]/,ae=/^["']/,ee=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Mt=/^[@_]/,Ye=/^[^\n]/,Tt=ao("number"),We=Zt(".",!1),oe=Yn([["1","9"]],!1,!1),ne=Yn(["e","E"],!1,!1),be=Yn(["+","-"],!1,!1),Ge=Zt("-",!1),Ae=Zt("0",!1),De=Yn([["0","9"]],!1,!1),Se=ao("whitespace"),Jt=Yn([" ",`
`,"\r","	"," "],!1,!1),Ee=Zt(",",!1),Pt=Zt("|",!1),Vt=Yn(['"',"'"],!1,!1),et=ao('a letter, a number, "-", "#", ".", "^", "_"'),It=Yn(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],["Ͷ","ͷ"],["ͺ","ͽ"],"Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԯ"],["Ա","Ֆ"],"ՙ",["ՠ","ֈ"],["א","ת"],["ׯ","ײ"],["ؠ","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۥ","ۦ"],["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ߴ","ߵ"],"ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๆ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏽ"],["ᏸ","ᏽ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛮ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᲀ","ᲈ"],["Ა","Ჺ"],["Ჽ","Ჿ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ",["Ⅰ","ↈ"],["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],["Ⳳ","ⳳ"],["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ",["々","〇"],["〡","〩"],["〱","〵"],["〸","〼"],["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],["Ꙁ","ꙮ"],["ꙿ","ꚝ"],["ꚠ","ꛯ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞹ"],["ꟷ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꧠ","ꧤ"],["ꧦ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꬰ","ꭚ"],["ꭜ","ꭥ"],["ꭰ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),kt=Zt("[",!1),dn=Zt("]",!1),Gn=Zt("{",!1),Fe=Zt("}",!1),Sn=Zt("%",!1),Ue=Zt("<",!1),Ot=Zt(">",!1),Nn=Yn(["@","_"],!1,!1),mn=Zt("!",!1),_t=Zt("(",!1),ue=Zt(")",!1),_e=Zt("/",!1),Qe=Zt("*",!1),Kn=Zt("?",!1),Cr=Zt(":",!1),ar=Zt("..",!1),h=Zt("^",!1),M=Zt("struct",!1),y=Zt("target",!1),P=Zt("euclid",!1),F=Zt("slow",!1),L=Zt("rotL",!1),z=Zt("rotR",!1),I=Zt("fast",!1),Q=Zt("scale",!1),ft=Zt("//",!1),Wt=Yn([`
`],!0,!1),ge=Zt("cat",!1),Ft=Zt("$",!1),qe=Zt("setcps",!1),He=Zt("setbpm",!1),pe=Zt("hush",!1),vt=function(){return parseFloat(vC())},de=function(p){const v=p.join("");return v==="."||v==="_"},ht=function(p){return new hv(p.join(""))},Nt=function(p){return p},Ht=function(p,v){return p.arguments_.stepsPerCycle=v,p},io=function(p){return p},Pi=function(p){return p.arguments_.alignment="polymeter_slowcat",p},Y5=function(p){return v=>v.options_.weight=(v.options_.weight??1)+(p??2)-1},_5=function(p){return v=>{const X=(v.options_.reps??1)+(p??2)-1;v.options_.reps=X,v.options_.ops=v.options_.ops.filter(N=>N.type_!=="replicate"),v.options_.ops.push({type_:"replicate",arguments_:{amount:X}}),v.options_.weight=X}},H5=function(p,v,X){return N=>N.options_.ops.push({type_:"bjorklund",arguments_:{pulse:p,step:v,rotation:X}})},j5=function(p){return v=>v.options_.ops.push({type_:"stretch",arguments_:{amount:p,type:"slow"}})},J5=function(p){return v=>v.options_.ops.push({type_:"stretch",arguments_:{amount:p,type:"fast"}})},O5=function(p){return v=>v.options_.ops.push({type_:"degradeBy",arguments_:{amount:p,seed:lo++}})},U5=function(p){return v=>v.options_.ops.push({type_:"tail",arguments_:{element:p}})},Q5=function(p){return v=>v.options_.ops.push({type_:"range",arguments_:{element:p}})},q5=function(p,v){const X=new dv(p,{ops:[],weight:1,reps:1});for(const N of v)N(X);return X},$5=function(p,v){return new Ai(v,"fastcat",void 0,!!p)},tC=function(p){return{alignment:"stack",list:p}},eC=function(p){return{alignment:"rand",list:p,seed:lo++}},nC=function(p){return{alignment:"feet",list:p,seed:lo++}},rC=function(p,v){return v&&v.list.length>0?new Ai([p,...v.list],v.alignment,v.seed):p},sC=function(p,v){return new Ai(v?[p,...v.list]:[p],"polymeter")},iC=function(p){return p},aC=function(p){return{name:"struct",args:{mini:p}}},oC=function(p){return{name:"target",args:{name:p}}},uC=function(p,v,X){return{name:"bjorklund",args:{pulse:p,step:parseInt(v)}}},cC=function(p){return{name:"stretch",args:{amount:p}}},lC=function(p){return{name:"shift",args:{amount:"-"+p}}},hC=function(p){return{name:"shift",args:{amount:p}}},pC=function(p){return{name:"stretch",args:{amount:"1/"+p}}},dC=function(p){return{name:"scale",args:{scale:p.join("")}}},x1=function(p,v){return v},mC=function(p,v){return v.unshift(p),new Ai(v,"slowcat")},fC=function(p){return p},yC=function(p,v){return new pv(p.name,p.args,v)},bC=function(p){return p},gC=function(p){return p},MC=function(p){return new co("setcps",{value:p})},PC=function(p){return new co("setcps",{value:p/120/2})},CC=function(){return new co("hush")},w=e.peg$currPos|0,bt=w,zr=[{line:1,column:1}],fn=w,Ci=e.peg$maxFailExpected||[],at=e.peg$silentFails|0,As;if(e.startRule){if(!(e.startRule in s))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');i=s[e.startRule]}function vC(){return t.substring(bt,w)}function A1(){return oo(bt,w)}function Zt(p,v){return{type:"literal",text:p,ignoreCase:v}}function Yn(p,v,X){return{type:"class",parts:p,inverted:v,ignoreCase:X}}function xC(){return{type:"end"}}function ao(p){return{type:"other",description:p}}function D1(p){var v=zr[p],X;if(v)return v;if(p>=zr.length)X=zr.length-1;else for(X=p;!zr[--X];);for(v=zr[X],v={line:v.line,column:v.column};X<p;)t.charCodeAt(X)===10?(v.line++,v.column=1):v.column++,X++;return zr[p]=v,v}function oo(p,v,X){var N=D1(p),ot=D1(v),Qt={source:r,start:{offset:p,line:N.line,column:N.column},end:{offset:v,line:ot.line,column:ot.column}};return Qt}function pt(p){w<fn||(w>fn&&(fn=w,Ci=[]),Ci.push(p))}function AC(p,v,X){return new mr(mr.buildMessage(p,v),p,v,X)}function F1(){var p;return p=lv(),p}function _n(){var p,v;return at++,p=w,GC(),v=vi(),v!==n?(XC(),wC(),bt=p,p=vt()):(w=p,p=n),at--,p===n&&at===0&&pt(Tt),p}function DC(){var p;return t.charCodeAt(w)===46?(p=a,w++):(p=n,at===0&&pt(We)),p}function FC(){var p;return p=t.charAt(w),ye.test(p)?w++:(p=n,at===0&&pt(oe)),p}function ZC(){var p;return p=t.charAt(w),Gt.test(p)?w++:(p=n,at===0&&pt(ne)),p}function wC(){var p,v,X,N,ot;if(p=w,v=ZC(),v!==n){if(X=t.charAt(w),Yt.test(X)?w++:(X=n,at===0&&pt(be)),X===n&&(X=null),N=[],ot=Ir(),ot!==n)for(;ot!==n;)N.push(ot),ot=Ir();else N=n;N!==n?(v=[v,X,N],p=v):(w=p,p=n)}else w=p,p=n;return p}function XC(){var p,v,X,N;if(p=w,v=DC(),v!==n){if(X=[],N=Ir(),N!==n)for(;N!==n;)X.push(N),N=Ir();else X=n;X!==n?(v=[v,X],p=v):(w=p,p=n)}else w=p,p=n;return p}function vi(){var p,v,X,N;if(p=SC(),p===n)if(p=w,v=FC(),v!==n){for(X=[],N=Ir();N!==n;)X.push(N),N=Ir();v=[v,X],p=v}else w=p,p=n;return p}function GC(){var p;return t.charCodeAt(w)===45?(p=o,w++):(p=n,at===0&&pt(Ge)),p}function SC(){var p;return t.charCodeAt(w)===48?(p=u,w++):(p=n,at===0&&pt(Ae)),p}function Ir(){var p;return p=t.charAt(w),ct.test(p)?w++:(p=n,at===0&&pt(De)),p}function dt(){var p,v;for(at++,p=[],v=t.charAt(w),xt.test(v)?w++:(v=n,at===0&&pt(Jt));v!==n;)p.push(v),v=t.charAt(w),xt.test(v)?w++:(v=n,at===0&&pt(Jt));return at--,v=n,at===0&&pt(Se),p}function Nr(){var p,v,X,N;return p=w,v=dt(),t.charCodeAt(w)===44?(X=c,w++):(X=n,at===0&&pt(Ee)),X!==n?(N=dt(),v=[v,X,N],p=v):(w=p,p=n),p}function Z1(){var p,v,X,N;return p=w,v=dt(),t.charCodeAt(w)===124?(X=l,w++):(X=n,at===0&&pt(Pt)),X!==n?(N=dt(),v=[v,X,N],p=v):(w=p,p=n),p}function w1(){var p,v,X,N;return p=w,v=dt(),t.charCodeAt(w)===46?(X=a,w++):(X=n,at===0&&pt(We)),X!==n?(N=dt(),v=[v,X,N],p=v):(w=p,p=n),p}function Kr(){var p;return p=t.charAt(w),ae.test(p)?w++:(p=n,at===0&&pt(Vt)),p}function xi(){var p;return at++,p=t.charAt(w),ee.test(p)?w++:(p=n,at===0&&pt(It)),at--,p===n&&at===0&&pt(et),p}function X1(){var p,v,X,N;if(p=w,dt(),v=[],X=xi(),X!==n)for(;X!==n;)v.push(X),X=xi();else v=n;return v!==n?(X=dt(),bt=w,N=de(v),N?N=n:N=void 0,N!==n?(bt=p,p=ht(v)):(w=p,p=n)):(w=p,p=n),p}function EC(){var p,v,X,N;return p=w,dt(),t.charCodeAt(w)===91?(v=d,w++):(v=n,at===0&&pt(kt)),v!==n?(dt(),X=E1(),X!==n?(dt(),t.charCodeAt(w)===93?(N=m,w++):(N=n,at===0&&pt(dn)),N!==n?(dt(),bt=p,p=Nt(X)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function VC(){var p,v,X,N,ot;return p=w,dt(),t.charCodeAt(w)===123?(v=f,w++):(v=n,at===0&&pt(Gn)),v!==n?(dt(),X=V1(),X!==n?(dt(),t.charCodeAt(w)===125?(N=g,w++):(N=n,at===0&&pt(Fe)),N!==n?(ot=kC(),ot===n&&(ot=null),dt(),bt=p,p=Ht(X,ot)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function kC(){var p,v,X;return p=w,t.charCodeAt(w)===37?(v=b,w++):(v=n,at===0&&pt(Sn)),v!==n?(X=Yr(),X!==n?(bt=p,p=io(X)):(w=p,p=n)):(w=p,p=n),p}function BC(){var p,v,X,N;return p=w,dt(),t.charCodeAt(w)===60?(v=x,w++):(v=n,at===0&&pt(Ue)),v!==n?(dt(),X=V1(),X!==n?(dt(),t.charCodeAt(w)===62?(N=D,w++):(N=n,at===0&&pt(Ot)),N!==n?(dt(),bt=p,p=Pi(X)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function Yr(){var p;return p=X1(),p===n&&(p=EC(),p===n&&(p=VC(),p===n&&(p=BC()))),p}function G1(){var p;return p=LC(),p===n&&(p=RC(),p===n&&(p=TC(),p===n&&(p=zC(),p===n&&(p=WC(),p===n&&(p=IC(),p===n&&(p=NC(),p===n&&(p=KC()))))))),p}function LC(){var p,v,X;return p=w,dt(),v=t.charAt(w),Mt.test(v)?w++:(v=n,at===0&&pt(Nn)),v!==n?(X=_n(),X===n&&(X=null),bt=p,p=Y5(X)):(w=p,p=n),p}function WC(){var p,v,X;return p=w,dt(),t.charCodeAt(w)===33?(v=G,w++):(v=n,at===0&&pt(mn)),v!==n?(X=_n(),X===n&&(X=null),bt=p,p=_5(X)):(w=p,p=n),p}function RC(){var p,v,X,N,ot,Qt,yn;return p=w,t.charCodeAt(w)===40?(v=k,w++):(v=n,at===0&&pt(_t)),v!==n?(dt(),X=Ds(),X!==n?(dt(),N=Nr(),N!==n?(dt(),ot=Ds(),ot!==n?(dt(),Nr(),dt(),Qt=Ds(),Qt===n&&(Qt=null),dt(),t.charCodeAt(w)===41?(yn=Z,w++):(yn=n,at===0&&pt(ue)),yn!==n?(bt=p,p=H5(X,ot,Qt)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function TC(){var p,v,X;return p=w,t.charCodeAt(w)===47?(v=A,w++):(v=n,at===0&&pt(_e)),v!==n?(X=Yr(),X!==n?(bt=p,p=j5(X)):(w=p,p=n)):(w=p,p=n),p}function zC(){var p,v,X;return p=w,t.charCodeAt(w)===42?(v=V,w++):(v=n,at===0&&pt(Qe)),v!==n?(X=Yr(),X!==n?(bt=p,p=J5(X)):(w=p,p=n)):(w=p,p=n),p}function IC(){var p,v,X;return p=w,t.charCodeAt(w)===63?(v=E,w++):(v=n,at===0&&pt(Kn)),v!==n?(X=_n(),X===n&&(X=null),bt=p,p=O5(X)):(w=p,p=n),p}function NC(){var p,v,X;return p=w,t.charCodeAt(w)===58?(v=B,w++):(v=n,at===0&&pt(Cr)),v!==n?(X=Yr(),X!==n?(bt=p,p=U5(X)):(w=p,p=n)):(w=p,p=n),p}function KC(){var p,v,X;return p=w,t.substr(w,2)===K?(v=K,w+=2):(v=n,at===0&&pt(ar)),v!==n?(X=Yr(),X!==n?(bt=p,p=Q5(X)):(w=p,p=n)):(w=p,p=n),p}function Ds(){var p,v,X,N;if(p=w,v=Yr(),v!==n){for(X=[],N=G1();N!==n;)X.push(N),N=G1();bt=p,p=q5(v,X)}else w=p,p=n;return p}function or(){var p,v,X,N;if(p=w,t.charCodeAt(w)===94?(v=R,w++):(v=n,at===0&&pt(h)),v===n&&(v=null),X=[],N=Ds(),N!==n)for(;N!==n;)X.push(N),N=Ds();else X=n;return X!==n?(bt=p,p=$5(v,X)):(w=p,p=n),p}function S1(){var p,v,X,N,ot;if(p=w,v=[],X=w,N=Nr(),N!==n?(ot=or(),ot!==n?X=ot:(w=X,X=n)):(w=X,X=n),X!==n)for(;X!==n;)v.push(X),X=w,N=Nr(),N!==n?(ot=or(),ot!==n?X=ot:(w=X,X=n)):(w=X,X=n);else v=n;return v!==n&&(bt=p,v=tC(v)),p=v,p}function YC(){var p,v,X,N,ot;if(p=w,v=[],X=w,N=Z1(),N!==n?(ot=or(),ot!==n?X=ot:(w=X,X=n)):(w=X,X=n),X!==n)for(;X!==n;)v.push(X),X=w,N=Z1(),N!==n?(ot=or(),ot!==n?X=ot:(w=X,X=n)):(w=X,X=n);else v=n;return v!==n&&(bt=p,v=eC(v)),p=v,p}function _C(){var p,v,X,N,ot;if(p=w,v=[],X=w,N=w1(),N!==n?(ot=or(),ot!==n?X=ot:(w=X,X=n)):(w=X,X=n),X!==n)for(;X!==n;)v.push(X),X=w,N=w1(),N!==n?(ot=or(),ot!==n?X=ot:(w=X,X=n)):(w=X,X=n);else v=n;return v!==n&&(bt=p,v=nC(v)),p=v,p}function E1(){var p,v,X;return p=w,v=or(),v!==n?(X=S1(),X===n&&(X=YC(),X===n&&(X=_C())),X===n&&(X=null),bt=p,p=rC(v,X)):(w=p,p=n),p}function V1(){var p,v,X;return p=w,v=or(),v!==n?(X=S1(),X===n&&(X=null),bt=p,p=sC(v,X)):(w=p,p=n),p}function HC(){var p,v,X,N;return p=w,dt(),v=Kr(),v!==n?(dt(),X=E1(),X!==n?(dt(),N=Kr(),N!==n?(bt=p,p=iC(X)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function jC(){var p;return p=ev(),p===n&&(p=QC(),p===n&&(p=tv(),p===n&&(p=OC(),p===n&&(p=UC(),p===n&&(p=JC(),p===n&&(p=$C(),p===n&&(p=qC()))))))),p}function JC(){var p,v,X;return p=w,t.substr(w,6)===j?(v=j,w+=6):(v=n,at===0&&pt(M)),v!==n?(dt(),X=_r(),X!==n?(bt=p,p=aC(X)):(w=p,p=n)):(w=p,p=n),p}function OC(){var p,v,X,N,ot;return p=w,t.substr(w,6)===W?(v=W,w+=6):(v=n,at===0&&pt(y)),v!==n?(dt(),X=Kr(),X!==n?(N=X1(),N!==n?(ot=Kr(),ot!==n?(bt=p,p=oC(N)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function UC(){var p,v,X,N;return p=w,t.substr(w,6)===_?(v=_,w+=6):(v=n,at===0&&pt(P)),v!==n?(dt(),X=vi(),X!==n?(dt(),N=vi(),N!==n?(dt(),vi(),bt=p,p=uC(X,N)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n),p}function QC(){var p,v,X;return p=w,t.substr(w,4)===nt?(v=nt,w+=4):(v=n,at===0&&pt(F)),v!==n?(dt(),X=_n(),X!==n?(bt=p,p=cC(X)):(w=p,p=n)):(w=p,p=n),p}function qC(){var p,v,X;return p=w,t.substr(w,4)===ut?(v=ut,w+=4):(v=n,at===0&&pt(L)),v!==n?(dt(),X=_n(),X!==n?(bt=p,p=lC(X)):(w=p,p=n)):(w=p,p=n),p}function $C(){var p,v,X;return p=w,t.substr(w,4)===tt?(v=tt,w+=4):(v=n,at===0&&pt(z)),v!==n?(dt(),X=_n(),X!==n?(bt=p,p=hC(X)):(w=p,p=n)):(w=p,p=n),p}function tv(){var p,v,X;return p=w,t.substr(w,4)===st?(v=st,w+=4):(v=n,at===0&&pt(I)),v!==n?(dt(),X=_n(),X!==n?(bt=p,p=pC(X)):(w=p,p=n)):(w=p,p=n),p}function ev(){var p,v,X,N,ot;if(p=w,t.substr(w,5)===q?(v=q,w+=5):(v=n,at===0&&pt(Q)),v!==n)if(dt(),X=Kr(),X!==n){if(N=[],ot=xi(),ot!==n)for(;ot!==n;)N.push(ot),ot=xi();else N=n;N!==n?(ot=Kr(),ot!==n?(bt=p,p=dC(N)):(w=p,p=n)):(w=p,p=n)}else w=p,p=n;else w=p,p=n;return p}function uo(){var p,v,X,N;if(p=w,t.substr(w,2)===$?(v=$,w+=2):(v=n,at===0&&pt(ft)),v!==n){for(X=[],N=t.charAt(w),Ye.test(N)?w++:(N=n,at===0&&pt(Wt));N!==n;)X.push(N),N=t.charAt(w),Ye.test(N)?w++:(N=n,at===0&&pt(Wt));v=[v,X],p=v}else w=p,p=n;return p}function nv(){var p,v,X,N,ot,Qt,yn,Hr;if(p=w,t.substr(w,3)===mt?(v=mt,w+=3):(v=n,at===0&&pt(ge)),v!==n)if(dt(),t.charCodeAt(w)===91?(X=d,w++):(X=n,at===0&&pt(kt)),X!==n)if(dt(),N=_r(),N!==n){for(ot=[],Qt=w,yn=Nr(),yn!==n?(Hr=_r(),Hr!==n?(bt=Qt,Qt=x1(N,Hr)):(w=Qt,Qt=n)):(w=Qt,Qt=n);Qt!==n;)ot.push(Qt),Qt=w,yn=Nr(),yn!==n?(Hr=_r(),Hr!==n?(bt=Qt,Qt=x1(N,Hr)):(w=Qt,Qt=n)):(w=Qt,Qt=n);Qt=dt(),t.charCodeAt(w)===93?(yn=m,w++):(yn=n,at===0&&pt(dn)),yn!==n?(bt=p,p=mC(N,ot)):(w=p,p=n)}else w=p,p=n;else w=p,p=n;else w=p,p=n;return p}function rv(){var p;return p=nv(),p===n&&(p=HC()),p}function _r(){var p,v,X,N,ot;if(p=w,v=rv(),v!==n){for(dt(),X=[],N=uo();N!==n;)X.push(N),N=uo();bt=p,p=fC(v)}else w=p,p=n;return p===n&&(p=w,v=jC(),v!==n?(dt(),t.charCodeAt(w)===36?(X=Lt,w++):(X=n,at===0&&pt(Ft)),X!==n?(N=dt(),ot=_r(),ot!==n?(bt=p,p=yC(v,ot)):(w=p,p=n)):(w=p,p=n)):(w=p,p=n)),p}function sv(){var p,v;return p=w,v=_r(),v!==n&&(bt=p,v=bC(v)),p=v,p===n&&(p=uo()),p}function iv(){var p;return p=sv(),p}function av(){var p,v;return p=w,dt(),v=ov(),v===n&&(v=uv(),v===n&&(v=cv())),v!==n?(dt(),bt=p,p=gC(v)):(w=p,p=n),p}function ov(){var p,v,X;return p=w,t.substr(w,6)===Y?(v=Y,w+=6):(v=n,at===0&&pt(qe)),v!==n?(dt(),X=_n(),X!==n?(bt=p,p=MC(X)):(w=p,p=n)):(w=p,p=n),p}function uv(){var p,v,X;return p=w,t.substr(w,6)===St?(v=St,w+=6):(v=n,at===0&&pt(He)),v!==n?(dt(),X=_n(),X!==n?(bt=p,p=PC(X)):(w=p,p=n)):(w=p,p=n),p}function cv(){var p,v;return p=w,t.substr(w,4)===Kt?(v=Kt,w+=4):(v=n,at===0&&pt(pe)),v!==n&&(bt=p,v=CC()),p=v,p}function lv(){var p;return p=iv(),p===n&&(p=av()),p}var hv=function(p){this.type_="atom",this.source_=p,this.location_=A1()},Ai=function(p,v,X,N){this.type_="pattern",this.arguments_={alignment:v,_steps:N},X!==void 0&&(this.arguments_.seed=X),this.source_=p},pv=function(p,v,X){this.type_=p,this.arguments_=v,this.source_=X},dv=function(p,v){this.type_="element",this.source_=p,this.options_=v,this.location_=A1()},co=function(p,v){this.type_="command",this.name_=p,this.options_=v},lo=0;if(As=i(),e.peg$library)return{peg$result:As,peg$currPos:w,peg$FAILED:n,peg$maxFailExpected:Ci,peg$maxFailPos:fn};if(As!==n&&w===t.length)return As;throw As!==n&&w<t.length&&pt(xC()),AC(Ci,fn<t.length?t.charAt(fn):null,fn<t.length?oo(fn,fn+1):oo(fn,fn))}const y9=["start"],b9=3e-4,hD=(t,e)=>(n,r)=>{var a;const s=(a=t.source_[r].options_)==null?void 0:a.ops,i=n.__steps_source;if(s)for(const o of s)switch(o.type_){case"stretch":{const u=["fast","slow"],{type:c,amount:l}=o.arguments_;if(!u.includes(c))throw new Error(`mini: stretch: type must be one of ${u.join("|")} but got ${c}`);n=O(n)[c](e(l));break}case"replicate":{const{amount:u}=o.arguments_;n=O(n),n=n._repeatCycles(u)._fast(u);break}case"bjorklund":{o.arguments_.rotation?n=n.euclidRot(e(o.arguments_.pulse),e(o.arguments_.step),e(o.arguments_.rotation)):n=n.euclid(e(o.arguments_.pulse),e(o.arguments_.step));break}case"degradeBy":{n=O(n)._degradeByWith(we.early(b9*o.arguments_.seed),o.arguments_.amount??.5);break}case"tail":{const u=e(o.arguments_.element);n=n.fmap(c=>l=>Array.isArray(c)?[...c,l]:[c,l]).appLeft(u);break}case"range":{const u=e(o.arguments_.element);n=O(n);const c=(l,d,m=1)=>Array.from({length:Math.abs(d-l)/m+1},(f,g)=>l<d?l+g*m:l-g*m);n=((l,d)=>l.squeezeBind(m=>d.bind(f=>xe(...c(m,f)))))(n,u);break}default:console.warn(`operator "${o.type_}" not implemented`)}return n.__steps_source=n.__steps_source||i,n};function Lr(t,e,n,r=0){n==null||n(t);const s=i=>Lr(i,e,n,r);switch(t.type_){case"pattern":{const i=t.source_.map(c=>s(c)).map(hD(t,s)),a=t.arguments_.alignment,o=i.filter(c=>c.__steps_source);let u;switch(a){case"stack":{u=jt(...i),o.length&&(u._steps=xn(...o.map(c=>H(c._steps))));break}case"polymeter_slowcat":{u=jt(...i.map(c=>c._slow(c.__weight))),o.length&&(u._steps=xn(...o.map(c=>H(c._steps))));break}case"polymeter":{const c=t.arguments_.stepsPerCycle?s(t.arguments_.stepsPerCycle).fmap(d=>H(d)):ie(H(i.length>0?i[0].__weight:1)),l=i.map(d=>d.fast(c.fmap(m=>m.div(d.__weight))));u=jt(...l);break}case"rand":{u=hi(we.early(b9*t.arguments_.seed).segment(1),i),o.length&&(u._steps=xn(...o.map(c=>H(c._steps))));break}case"feet":{u=xe(...i);break}default:{if(t.source_.some(c=>{var l;return!!((l=c.options_)!=null&&l.weight)})){const c=t.source_.reduce((l,d)=>{var m;return l.add(((m=d.options_)==null?void 0:m.weight)||H(1))},H(0));u=pa(...t.source_.map((l,d)=>{var m;return[((m=l.options_)==null?void 0:m.weight)||H(1),i[d]]})),u.__weight=c,u._steps=c,o.length&&(u._steps=u._steps.mul(xn(...o.map(l=>H(l._steps)))))}else u=ln(...i),u._steps=i.length;t.arguments_._steps&&(u.__steps_source=!0)}}return o.length&&(u.__steps_source=!0),u}case"element":return s(t.source_);case"atom":{if(t.source_==="~"||t.source_==="-")return Rt;if(!t.location_)return console.warn("no location for",t),t.source_;const i=isNaN(Number(t.source_))?t.source_:Number(t.source_);if(r===-1)return ie(i);const[a,o]=Va(e,t,r);return ie(i).withLoc(a,o)}case"stretch":return s(t.source_).slow(s(t.arguments_.amount));default:return console.warn(`node type "${t.type_}" not implemented -> returning silence`),Rt}}const Va=(t,e,n=0)=>{const{start:r,end:s}=e.location_,i=t==null?void 0:t.split("").slice(r.offset,s.offset).join(""),[a=0,o=0]=i?i.split(e.source_).map(u=>u.split("").filter(c=>c===" ").length):[];return[r.offset+a+n,s.offset-o+n]},fs=(t,e=0,n=t)=>{try{return Rm(t)}catch(r){const s=[r.location.start.offset+e,r.location.end.offset+e],i=n.slice(0,s[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${i}: ${r.message}`)}},Tm=(t,e,n)=>{const r=fs(t,e,n);let s=[];return Lr(r,t,i=>{i.type_==="atom"&&s.push(i)},-1),s},ka=(t,e=0,n)=>Tm(t,e,n).map(r=>Va(t,r,e)),Ba=(...t)=>{const e=t.map(n=>{const r=`"${n}"`,s=fs(r);return Lr(s,r)});return ln(...e)},g9=(t,e)=>{const n=`"${t}"`,r=fs(n);return Lr(r,n,null,e)},M9=t=>{const e=fs(t);return Lr(e,t)};function P9(t){return typeof t=="string"?Ba(t):O(t)}function zm(){Tu(Ba)}const pD=Object.freeze(Object.defineProperty({__proto__:null,StartRules:y9,SyntaxError:mr,getLeafLocation:Va,getLeafLocations:ka,getLeaves:Tm,h:M9,m:g9,mini:Ba,mini2ast:fs,miniAllStrings:zm,minify:P9,parse:Rm,patternifyAST:Lr},Symbol.toStringTag,{value:"Module"}));var dD=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],C9=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],mD="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",v9="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ao={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Do="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",fD={5:Do,"5module":Do+" export import",6:Do+" const class extends export import super"},yD=/^in(stanceof)?$/,bD=new RegExp("["+v9+"]"),gD=new RegExp("["+v9+mD+"]");function qo(t,e){for(var n=65536,r=0;r<e.length;r+=2){if(n+=e[r],n>t)return!1;if(n+=e[r+1],n>=t)return!0}return!1}function tr(t,e){return t<65?t===36:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&bD.test(String.fromCharCode(t)):e===!1?!1:qo(t,C9)}function ls(t,e){return t<48?t===36:t<58?!0:t<65?!1:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&gD.test(String.fromCharCode(t)):e===!1?!1:qo(t,C9)||qo(t,dD)}var Et=function(t,e){e===void 0&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function $e(t,e){return new Et(t,{beforeExpr:!0,binop:e})}var tn={beforeExpr:!0},Te={startsExpr:!0},Im={};function wt(t,e){return e===void 0&&(e={}),e.keyword=t,Im[t]=new Et(t,e)}var C={num:new Et("num",Te),regexp:new Et("regexp",Te),string:new Et("string",Te),name:new Et("name",Te),privateId:new Et("privateId",Te),eof:new Et("eof"),bracketL:new Et("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Et("]"),braceL:new Et("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Et("}"),parenL:new Et("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Et(")"),comma:new Et(",",tn),semi:new Et(";",tn),colon:new Et(":",tn),dot:new Et("."),question:new Et("?",tn),questionDot:new Et("?."),arrow:new Et("=>",tn),template:new Et("template"),invalidTemplate:new Et("invalidTemplate"),ellipsis:new Et("...",tn),backQuote:new Et("`",Te),dollarBraceL:new Et("${",{beforeExpr:!0,startsExpr:!0}),eq:new Et("=",{beforeExpr:!0,isAssign:!0}),assign:new Et("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Et("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Et("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:$e("||",1),logicalAND:$e("&&",2),bitwiseOR:$e("|",3),bitwiseXOR:$e("^",4),bitwiseAND:$e("&",5),equality:$e("==/!=/===/!==",6),relational:$e("</>/<=/>=",7),bitShift:$e("<</>>/>>>",8),plusMin:new Et("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:$e("%",10),star:$e("*",10),slash:$e("/",10),starstar:new Et("**",{beforeExpr:!0}),coalesce:$e("??",1),_break:wt("break"),_case:wt("case",tn),_catch:wt("catch"),_continue:wt("continue"),_debugger:wt("debugger"),_default:wt("default",tn),_do:wt("do",{isLoop:!0,beforeExpr:!0}),_else:wt("else",tn),_finally:wt("finally"),_for:wt("for",{isLoop:!0}),_function:wt("function",Te),_if:wt("if"),_return:wt("return",tn),_switch:wt("switch"),_throw:wt("throw",tn),_try:wt("try"),_var:wt("var"),_const:wt("const"),_while:wt("while",{isLoop:!0}),_with:wt("with"),_new:wt("new",{beforeExpr:!0,startsExpr:!0}),_this:wt("this",Te),_super:wt("super",Te),_class:wt("class",Te),_extends:wt("extends",tn),_export:wt("export"),_import:wt("import",Te),_null:wt("null",Te),_true:wt("true",Te),_false:wt("false",Te),_in:wt("in",{beforeExpr:!0,binop:7}),_instanceof:wt("instanceof",{beforeExpr:!0,binop:7}),_typeof:wt("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:wt("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:wt("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},hn=/\r\n?|\n|\u2028|\u2029/,MD=new RegExp(hn.source,"g");function ys(t){return t===10||t===13||t===8232||t===8233}function x9(t,e,n){n===void 0&&(n=t.length);for(var r=e;r<n;r++){var s=t.charCodeAt(r);if(ys(s))return r<n-1&&s===13&&t.charCodeAt(r+1)===10?r+2:r+1}return-1}var A9=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,rn=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,D9=Object.prototype,PD=D9.hasOwnProperty,CD=D9.toString,bs=Object.hasOwn||function(t,e){return PD.call(t,e)},uf=Array.isArray||function(t){return CD.call(t)==="[object Array]"},cf=Object.create(null);function hr(t){return cf[t]||(cf[t]=new RegExp("^(?:"+t.replace(/ /g,"|")+")$"))}function er(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}var vD=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,$s=function(t,e){this.line=t,this.column=e};$s.prototype.offset=function(t){return new $s(this.line,this.column+t)};var La=function(t,e,n){this.start=e,this.end=n,t.sourceFile!==null&&(this.source=t.sourceFile)};function F9(t,e){for(var n=1,r=0;;){var s=x9(t,r,e);if(s<0)return new $s(n,e-r);++n,r=s}}var $o={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},lf=!1;function xD(t){var e={};for(var n in $o)e[n]=t&&bs(t,n)?t[n]:$o[n];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!lf&&typeof console=="object"&&console.warn&&(lf=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!t||t.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),uf(e.onToken)){var r=e.onToken;e.onToken=function(s){return r.push(s)}}return uf(e.onComment)&&(e.onComment=AD(e,e.onComment)),e}function AD(t,e){return function(n,r,s,i,a,o){var u={type:n?"Block":"Line",value:r,start:s,end:i};t.locations&&(u.loc=new La(this,a,o)),t.ranges&&(u.range=[s,i]),e.push(u)}}var ti=1,gs=2,Nm=4,Z9=8,w9=16,X9=32,Km=64,G9=128,fi=256,Ym=ti|gs|fi;function _m(t,e){return gs|(t?Nm:0)|(e?Z9:0)}var Oi=0,Hm=1,ir=2,S9=3,E9=4,V9=5,he=function(t,e,n){this.options=t=xD(t),this.sourceFile=t.sourceFile,this.keywords=hr(fD[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var r="";t.allowReserved!==!0&&(r=Ao[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(r+=" await")),this.reservedWords=hr(r);var s=(r?r+" ":"")+Ao.strict;this.reservedWordsStrict=hr(s),this.reservedWordsStrictBind=hr(s+" "+Ao.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(hn).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=C.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(ti),this.regexpState=null,this.privateNameStack=[]},zn={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};he.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};zn.inFunction.get=function(){return(this.currentVarScope().flags&gs)>0};zn.inGenerator.get=function(){return(this.currentVarScope().flags&Z9)>0&&!this.currentVarScope().inClassFieldInit};zn.inAsync.get=function(){return(this.currentVarScope().flags&Nm)>0&&!this.currentVarScope().inClassFieldInit};zn.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&fi)return!1;if(e.flags&gs)return(e.flags&Nm)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};zn.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(e&Km)>0||n||this.options.allowSuperOutsideMethod};zn.allowDirectSuper.get=function(){return(this.currentThisScope().flags&G9)>0};zn.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zn.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(e&(gs|fi))>0||n};zn.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&fi)>0};he.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++)n=t[r](n);return n};he.parse=function(t,e){return new this(e,t).parse()};he.parseExpressionAt=function(t,e,n){var r=new this(n,t,e);return r.nextToken(),r.parseExpression()};he.tokenizer=function(t,e){return new this(e,t)};Object.defineProperties(he.prototype,zn);var Le=he.prototype,DD=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Le.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){rn.lastIndex=t,t+=rn.exec(this.input)[0].length;var e=DD.exec(this.input.slice(t));if(!e)return!1;if((e[1]||e[2])==="use strict"){rn.lastIndex=t+e[0].length;var n=rn.exec(this.input),r=n.index+n[0].length,s=this.input.charAt(r);return s===";"||s==="}"||hn.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||s==="!"&&this.input.charAt(r+1)==="=")}t+=e[0].length,rn.lastIndex=t,t+=rn.exec(this.input)[0].length,this.input[t]===";"&&t++}};Le.eat=function(t){return this.type===t?(this.next(),!0):!1};Le.isContextual=function(t){return this.type===C.name&&this.value===t&&!this.containsEsc};Le.eatContextual=function(t){return this.isContextual(t)?(this.next(),!0):!1};Le.expectContextual=function(t){this.eatContextual(t)||this.unexpected()};Le.canInsertSemicolon=function(){return this.type===C.eof||this.type===C.braceR||hn.test(this.input.slice(this.lastTokEnd,this.start))};Le.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Le.semicolon=function(){!this.eat(C.semi)&&!this.insertSemicolon()&&this.unexpected()};Le.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};Le.expect=function(t){this.eat(t)||this.unexpected()};Le.unexpected=function(t){this.raise(t??this.start,"Unexpected token")};var Wa=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Le.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}};Le.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Le.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Le.isSimpleAssignTarget=function(t){return t.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(t.expression):t.type==="Identifier"||t.type==="MemberExpression"};var it=he.prototype;it.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==C.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,s=Object.keys(this.undefinedExports);r<s.length;r+=1){var i=s[r];this.raiseRecoverable(this.undefinedExports[i].start,"Export '"+i+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var jm={kind:"loop"},FD={kind:"switch"};it.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;rn.lastIndex=this.pos;var e=rn.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(t)return!1;if(r===123||r>55295&&r<56320)return!0;if(tr(r,!0)){for(var s=n+1;ls(r=this.input.charCodeAt(s),!0);)++s;if(r===92||r>55295&&r<56320)return!0;var i=this.input.slice(n,s);if(!yD.test(i))return!0}return!1};it.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;rn.lastIndex=this.pos;var t=rn.exec(this.input),e=this.pos+t[0].length,n;return!hn.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(ls(n=this.input.charCodeAt(e+8))||n>55295&&n<56320))};it.parseStatement=function(t,e,n){var r=this.type,s=this.startNode(),i;switch(this.isLet(t)&&(r=C._var,i="let"),r){case C._break:case C._continue:return this.parseBreakContinueStatement(s,r.keyword);case C._debugger:return this.parseDebuggerStatement(s);case C._do:return this.parseDoStatement(s);case C._for:return this.parseForStatement(s);case C._function:return t&&(this.strict||t!=="if"&&t!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case C._class:return t&&this.unexpected(),this.parseClass(s,!0);case C._if:return this.parseIfStatement(s);case C._return:return this.parseReturnStatement(s);case C._switch:return this.parseSwitchStatement(s);case C._throw:return this.parseThrowStatement(s);case C._try:return this.parseTryStatement(s);case C._const:case C._var:return i=i||this.value,t&&i!=="var"&&this.unexpected(),this.parseVarStatement(s,i);case C._while:return this.parseWhileStatement(s);case C._with:return this.parseWithStatement(s);case C.braceL:return this.parseBlock(!0,s);case C.semi:return this.parseEmptyStatement(s);case C._export:case C._import:if(this.options.ecmaVersion>10&&r===C._import){rn.lastIndex=this.pos;var a=rn.exec(this.input),o=this.pos+a[0].length,u=this.input.charCodeAt(o);if(u===40||u===46)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===C._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var c=this.value,l=this.parseExpression();return r===C.name&&l.type==="Identifier"&&this.eat(C.colon)?this.parseLabeledStatement(s,c,l,t):this.parseExpressionStatement(s,l)}};it.parseBreakContinueStatement=function(t,e){var n=e==="break";this.next(),this.eat(C.semi)||this.insertSemicolon()?t.label=null:this.type!==C.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var s=this.labels[r];if((t.label==null||s.name===t.label.name)&&(s.kind!=null&&(n||s.kind==="loop")||t.label&&n))break}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")};it.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")};it.parseDoStatement=function(t){return this.next(),this.labels.push(jm),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(C._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(C.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")};it.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(jm),this.enterScope(0),this.expect(C.parenL),this.type===C.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===C._var||this.type===C._const||n){var r=this.startNode(),s=n?"let":this.value;return this.next(),this.parseVar(r,!0,s),this.finishNode(r,"VariableDeclaration"),(this.type===C._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===C._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var i=this.isContextual("let"),a=!1,o=this.containsEsc,u=new Wa,c=this.start,l=e>-1?this.parseExprSubscripts(u,"await"):this.parseExpression(!0,u);return this.type===C._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(e>-1?(this.type===C._in&&this.unexpected(e),t.await=!0):a&&this.options.ecmaVersion>=8&&(l.start===c&&!o&&l.type==="Identifier"&&l.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(t.await=!1)),i&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,u),this.checkLValPattern(l),this.parseForIn(t,l)):(this.checkExpressionErrors(u,!0),e>-1&&this.unexpected(e),this.parseFor(t,l))};it.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,Ns|(n?0:tu),!1,e)};it.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(C._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")};it.parseReturnStatement=function(t){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(C.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")};it.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(C.braceL),this.labels.push(FD),this.enterScope(0);for(var e,n=!1;this.type!==C.braceR;)if(this.type===C._case||this.type===C._default){var r=this.type===C._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(C.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")};it.parseThrowStatement=function(t){return this.next(),hn.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ZD=[];it.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e=t.type==="Identifier";return this.enterScope(e?X9:0),this.checkLValPattern(t,e?E9:ir),this.expect(C.parenR),t};it.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===C._catch){var e=this.startNode();this.next(),this.eat(C.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(C._finally)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")};it.parseVarStatement=function(t,e,n){return this.next(),this.parseVar(t,!1,e,n),this.semicolon(),this.finishNode(t,"VariableDeclaration")};it.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(jm),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")};it.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")};it.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")};it.parseLabeledStatement=function(t,e,n,r){for(var s=0,i=this.labels;s<i.length;s+=1){var a=i[s];a.name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===C._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart===t.start)c.statementStart=this.start,c.kind=o;else break}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")};it.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")};it.parseBlock=function(t,e,n){for(t===void 0&&(t=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(C.braceL),t&&this.enterScope(0);this.type!==C.braceR;){var r=this.parseStatement(null);e.body.push(r)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")};it.parseFor=function(t,e){return t.init=e,this.expect(C.semi),t.test=this.type===C.semi?null:this.parseExpression(),this.expect(C.semi),t.update=this.type===C.parenR?null:this.parseExpression(),this.expect(C.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")};it.parseForIn=function(t,e){var n=this.type===C._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(C.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")};it.parseVar=function(t,e,n,r){for(t.declarations=[],t.kind=n;;){var s=this.startNode();if(this.parseVarId(s,n),this.eat(C.eq)?s.init=this.parseMaybeAssign(e):!r&&n==="const"&&!(this.type===C._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&s.id.type!=="Identifier"&&!(e&&(this.type===C._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):s.init=null,t.declarations.push(this.finishNode(s,"VariableDeclarator")),!this.eat(C.comma))break}return t};it.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,e==="var"?Hm:ir,!1)};var Ns=1,tu=2,k9=4;it.parseFunction=function(t,e,n,r,s){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===C.star&&e&tu&&this.unexpected(),t.generator=this.eat(C.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&Ns&&(t.id=e&k9&&this.type!==C.name?null:this.parseIdent(),t.id&&!(e&tu)&&this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?Hm:ir:S9));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_m(t.async,t.generator)),e&Ns||(t.id=this.type===C.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,s),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&Ns?"FunctionDeclaration":"FunctionExpression")};it.parseFunctionParams=function(t){this.expect(C.parenL),t.params=this.parseBindingList(C.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};it.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.enterClassBody(),s=this.startNode(),i=!1;for(s.body=[],this.expect(C.braceL);this.type!==C.braceR;){var a=this.parseClassElement(t.superClass!==null);a&&(s.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(i&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),i=!0):a.key&&a.key.type==="PrivateIdentifier"&&wD(r,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(s,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")};it.parseClassElement=function(t){if(this.eat(C.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),r="",s=!1,i=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(C.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===C.star?o=!0:r="static"}if(n.static=o,!r&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===C.star)&&!this.canInsertSemicolon()?i=!0:r="async"),!r&&(e>=9||!i)&&this.eat(C.star)&&(s=!0),!r&&!i&&!s){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===C.parenL||a!=="method"||s||i){var c=!n.static&&Ui(n,"constructor"),l=c&&t;c&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":a,this.parseClassMethod(n,s,i,l)}else this.parseClassField(n);return n};it.isClassElementNameStart=function(){return this.type===C.name||this.type===C.privateId||this.type===C.num||this.type===C.string||this.type===C.bracketL||this.type.keyword};it.parseClassElementName=function(t){this.type===C.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};it.parseClassMethod=function(t,e,n,r){var s=t.key;t.kind==="constructor"?(e&&this.raise(s.start,"Constructor can't be a generator"),n&&this.raise(s.start,"Constructor can't be an async method")):t.static&&Ui(t,"prototype")&&this.raise(s.start,"Classes may not have a static property named prototype");var i=t.value=this.parseMethod(e,n,r);return t.kind==="get"&&i.params.length!==0&&this.raiseRecoverable(i.start,"getter should have no params"),t.kind==="set"&&i.params.length!==1&&this.raiseRecoverable(i.start,"setter should have exactly one param"),t.kind==="set"&&i.params[0].type==="RestElement"&&this.raiseRecoverable(i.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")};it.parseClassField=function(t){if(Ui(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&Ui(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(C.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")};it.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(fi|Km);this.type!==C.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")};it.parseClassId=function(t,e){this.type===C.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,ir,!1)):(e===!0&&this.unexpected(),t.id=null)};it.parseClassSuper=function(t){t.superClass=this.eat(C._extends)?this.parseExprSubscripts(null,!1):null};it.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared};it.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,n=t.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,s=r===0?null:this.privateNameStack[r-1],i=0;i<n.length;++i){var a=n[i];bs(e,a.name)||(s?s.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function wD(t,e){var n=e.key.name,r=t[n],s="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(s=(e.static?"s":"i")+e.kind),r==="iget"&&s==="iset"||r==="iset"&&s==="iget"||r==="sget"&&s==="sset"||r==="sset"&&s==="sget"?(t[n]="true",!1):r?!0:(t[n]=s,!1)}function Ui(t,e){var n=t.computed,r=t.key;return!n&&(r.type==="Identifier"&&r.name===e||r.type==="Literal"&&r.value===e)}it.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==C.string&&this.unexpected(),t.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")};it.parseExport=function(t,e){if(this.next(),this.eat(C.star))return this.parseExportAllDeclaration(t,e);if(this.eat(C._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),t.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==C.string&&this.unexpected(),t.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause());else{for(var n=0,r=t.specifiers;n<r.length;n+=1){var s=r[n];this.checkUnreserved(s.local),this.checkLocalExport(s.local),s.local.type==="Literal"&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")};it.parseExportDeclaration=function(t){return this.parseStatement(null)};it.parseExportDefaultDeclaration=function(){var t;if(this.type===C._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,Ns|k9,!1,t)}else if(this.type===C._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};it.checkExport=function(t,e,n){t&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),bs(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)};it.checkPatternExport=function(t,e){var n=e.type;if(n==="Identifier")this.checkExport(t,e,e.start);else if(n==="ObjectPattern")for(var r=0,s=e.properties;r<s.length;r+=1){var i=s[r];this.checkPatternExport(t,i)}else if(n==="ArrayPattern")for(var a=0,o=e.elements;a<o.length;a+=1){var u=o[a];u&&this.checkPatternExport(t,u)}else n==="Property"?this.checkPatternExport(t,e.value):n==="AssignmentPattern"?this.checkPatternExport(t,e.left):n==="RestElement"&&this.checkPatternExport(t,e.argument)};it.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var s=r[n];this.checkPatternExport(t,s.id)}};it.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};it.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")};it.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(C.braceL);!this.eat(C.braceR);){if(n)n=!1;else if(this.expect(C.comma),this.afterTrailingComma(C.braceR))break;e.push(this.parseExportSpecifier(t))}return e};it.parseImport=function(t){return this.next(),this.type===C.string?(t.specifiers=ZD,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===C.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(t,"ImportDeclaration")};it.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,ir),this.finishNode(t,"ImportSpecifier")};it.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,ir),this.finishNode(t,"ImportDefaultSpecifier")};it.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,ir),this.finishNode(t,"ImportNamespaceSpecifier")};it.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===C.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(C.comma)))return t;if(this.type===C.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(C.braceL);!this.eat(C.braceR);){if(e)e=!1;else if(this.expect(C.comma),this.afterTrailingComma(C.braceR))break;t.push(this.parseImportSpecifier())}return t};it.parseWithClause=function(){var t=[];if(!this.eat(C._with))return t;this.expect(C.braceL);for(var e={},n=!0;!this.eat(C.braceR);){if(n)n=!1;else if(this.expect(C.comma),this.afterTrailingComma(C.braceR))break;var r=this.parseImportAttribute(),s=r.key.type==="Identifier"?r.key.name:r.key.value;bs(e,s)&&this.raiseRecoverable(r.key.start,"Duplicate attribute key '"+s+"'"),e[s]=!0,t.push(r)}return t};it.parseImportAttribute=function(){var t=this.startNode();return t.key=this.type===C.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(C.colon),this.type!==C.string&&this.unexpected(),t.value=this.parseExprAtom(),this.finishNode(t,"ImportAttribute")};it.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===C.string){var t=this.parseLiteral(this.value);return vD.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)};it.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)};it.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&(this.input[t.start]==='"'||this.input[t.start]==="'")};var pn=he.prototype;pn.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&t.name==="await"&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,s=t.properties;r<s.length;r+=1){var i=s[r];this.toAssignable(i,e),i.type==="RestElement"&&(i.argument.type==="ArrayPattern"||i.argument.type==="ObjectPattern")&&this.raise(i.argument.start,"Unexpected token")}break;case"Property":t.kind!=="init"&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),t.argument.type==="AssignmentPattern"&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":t.operator!=="="&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t};pn.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var s=t[r];s&&this.toAssignable(s,e)}if(n){var i=t[n-1];this.options.ecmaVersion===6&&e&&i&&i.type==="RestElement"&&i.argument.type!=="Identifier"&&this.unexpected(i.argument.start)}return t};pn.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")};pn.parseRestBinding=function(){var t=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==C.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")};pn.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case C.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(C.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case C.braceL:return this.parseObj(!0)}return this.parseIdent()};pn.parseBindingList=function(t,e,n,r){for(var s=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(C.comma),e&&this.type===C.comma)s.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===C.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),s.push(a),this.type===C.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}else s.push(this.parseAssignableListItem(r))}return s};pn.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e};pn.parseBindingListItem=function(t){return t};pn.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(C.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};pn.checkLValSimple=function(t,e,n){e===void 0&&(e=Oi);var r=e!==Oi;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(r?"Binding ":"Assigning to ")+t.name+" in strict mode"),r&&(e===ir&&t.name==="let"&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(bs(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e!==V9&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(r?"Binding":"Assigning to")+" rvalue")}};pn.checkLValPattern=function(t,e,n){switch(e===void 0&&(e=Oi),t.type){case"ObjectPattern":for(var r=0,s=t.properties;r<s.length;r+=1){var i=s[r];this.checkLValInnerPattern(i,e,n)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var u=o[a];u&&this.checkLValInnerPattern(u,e,n)}break;default:this.checkLValSimple(t,e,n)}};pn.checkLValInnerPattern=function(t,e,n){switch(e===void 0&&(e=Oi),t.type){case"Property":this.checkLValInnerPattern(t.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,n);break;case"RestElement":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var Pn=function(t,e,n,r,s){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r,this.generator=!!s},$t={b_stat:new Pn("{",!1),b_expr:new Pn("{",!0),b_tmpl:new Pn("${",!1),p_stat:new Pn("(",!1),p_expr:new Pn("(",!0),q_tmpl:new Pn("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new Pn("function",!1),f_expr:new Pn("function",!0),f_expr_gen:new Pn("function",!0,!1,null,!0),f_gen:new Pn("function",!1,!1,null,!0)},Ms=he.prototype;Ms.initialContext=function(){return[$t.b_stat]};Ms.curContext=function(){return this.context[this.context.length-1]};Ms.braceIsBlock=function(t){var e=this.curContext();return e===$t.f_expr||e===$t.f_stat?!0:t===C.colon&&(e===$t.b_stat||e===$t.b_expr)?!e.isExpr:t===C._return||t===C.name&&this.exprAllowed?hn.test(this.input.slice(this.lastTokEnd,this.start)):t===C._else||t===C.semi||t===C.eof||t===C.parenR||t===C.arrow?!0:t===C.braceL?e===$t.b_stat:t===C._var||t===C._const||t===C.name?!1:!this.exprAllowed};Ms.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(e.token==="function")return e.generator}return!1};Ms.updateContext=function(t){var e,n=this.type;n.keyword&&t===C.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr};Ms.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)};C.parenR.updateContext=C.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var t=this.context.pop();t===$t.b_stat&&this.curContext().token==="function"&&(t=this.context.pop()),this.exprAllowed=!t.isExpr};C.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?$t.b_stat:$t.b_expr),this.exprAllowed=!0};C.dollarBraceL.updateContext=function(){this.context.push($t.b_tmpl),this.exprAllowed=!0};C.parenL.updateContext=function(t){var e=t===C._if||t===C._for||t===C._with||t===C._while;this.context.push(e?$t.p_stat:$t.p_expr),this.exprAllowed=!0};C.incDec.updateContext=function(){};C._function.updateContext=C._class.updateContext=function(t){t.beforeExpr&&t!==C._else&&!(t===C.semi&&this.curContext()!==$t.p_stat)&&!(t===C._return&&hn.test(this.input.slice(this.lastTokEnd,this.start)))&&!((t===C.colon||t===C.braceL)&&this.curContext()===$t.b_stat)?this.context.push($t.f_expr):this.context.push($t.f_stat),this.exprAllowed=!1};C.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};C.backQuote.updateContext=function(){this.curContext()===$t.q_tmpl?this.context.pop():this.context.push($t.q_tmpl),this.exprAllowed=!1};C.star.updateContext=function(t){if(t===C._function){var e=this.context.length-1;this.context[e]===$t.f_expr?this.context[e]=$t.f_expr_gen:this.context[e]=$t.f_gen}this.exprAllowed=!0};C.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==C.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var yt=he.prototype;yt.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&t.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r=t.key,s;switch(r.type){case"Identifier":s=r.name;break;case"Literal":s=String(r.value);break;default:return}var i=t.kind;if(this.options.ecmaVersion>=6){s==="__proto__"&&i==="init"&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);return}s="$"+s;var a=e[s];if(a){var o;i==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[i],o&&this.raiseRecoverable(r.start,"Redefinition of property")}else a=e[s]={init:!1,get:!1,set:!1};a[i]=!0}};yt.parseExpression=function(t,e){var n=this.start,r=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===C.comma){var i=this.startNodeAt(n,r);for(i.expressions=[s];this.eat(C.comma);)i.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(i,"SequenceExpression")}return s};yt.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,s=-1,i=-1,a=-1;e?(s=e.parenthesizedAssign,i=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new Wa,r=!0);var o=this.start,u=this.startLoc;(this.type===C.parenL||this.type===C.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=t==="await");var c=this.parseMaybeConditional(t,e);if(n&&(c=n.call(this,c,o,u)),this.type.isAssign){var l=this.startNodeAt(o,u);return l.operator=this.value,this.type===C.eq&&(c=this.toAssignable(c,!1,e)),r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===C.eq?this.checkLValPattern(c):this.checkLValSimple(c),l.left=c,this.next(),l.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(l,"AssignmentExpression")}else r&&this.checkExpressionErrors(e,!0);return s>-1&&(e.parenthesizedAssign=s),i>-1&&(e.trailingComma=i),c};yt.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,s=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return s;if(this.eat(C.question)){var i=this.startNodeAt(n,r);return i.test=s,i.consequent=this.parseMaybeAssign(),this.expect(C.colon),i.alternate=this.parseMaybeAssign(t),this.finishNode(i,"ConditionalExpression")}return s};yt.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,s=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||s.start===n&&s.type==="ArrowFunctionExpression"?s:this.parseExprOp(s,n,r,-1,t)};yt.parseExprOp=function(t,e,n,r,s){var i=this.type.binop;if(i!=null&&(!s||this.type!==C._in)&&i>r){var a=this.type===C.logicalOR||this.type===C.logicalAND,o=this.type===C.coalesce;o&&(i=C.logicalAND.binop);var u=this.value;this.next();var c=this.start,l=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,s),c,l,i,s),m=this.buildBinary(e,n,t,d,u,a||o);return(a&&this.type===C.coalesce||o&&(this.type===C.logicalOR||this.type===C.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(m,e,n,r,s)}return t};yt.buildBinary=function(t,e,n,r,s,i){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=n,a.operator=s,a.right=r,this.finishNode(a,i?"LogicalExpression":"BinaryExpression")};yt.parseMaybeUnary=function(t,e,n,r){var s=this.start,i=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(r),e=!0;else if(this.type.prefix){var o=this.startNode(),u=this.type===C.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(t,!0),u?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&B9(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&eu(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,a=this.finishNode(o,u?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===C.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==C._in&&this.unexpected();else{if(a=this.parseExprSubscripts(t,r),this.checkExpressionErrors(t))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(s,i);c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}}if(!n&&this.eat(C.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(s,i,a,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return a};function B9(t){return t.type==="Identifier"||t.type==="ParenthesizedExpression"&&B9(t.expression)}function eu(t){return t.type==="MemberExpression"&&t.property.type==="PrivateIdentifier"||t.type==="ChainExpression"&&eu(t.expression)||t.type==="ParenthesizedExpression"&&eu(t.expression)}yt.parseExprSubscripts=function(t,e){var n=this.start,r=this.startLoc,s=this.parseExprAtom(t,e);if(s.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return s;var i=this.parseSubscripts(s,n,r,!1,e);return t&&i.type==="MemberExpression"&&(t.parenthesizedAssign>=i.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=i.start&&(t.parenthesizedBind=-1),t.trailingComma>=i.start&&(t.trailingComma=-1)),i};yt.parseSubscripts=function(t,e,n,r,s){for(var i=this.options.ecmaVersion>=8&&t.type==="Identifier"&&t.name==="async"&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,n,r,i,a,s);if(o.optional&&(a=!0),o===t||o.type==="ArrowFunctionExpression"){if(a){var u=this.startNodeAt(e,n);u.expression=o,o=this.finishNode(u,"ChainExpression")}return o}t=o}};yt.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(C.arrow)};yt.parseSubscriptAsyncArrow=function(t,e,n,r){return this.parseArrowExpression(this.startNodeAt(t,e),n,!0,r)};yt.parseSubscript=function(t,e,n,r,s,i,a){var o=this.options.ecmaVersion>=11,u=o&&this.eat(C.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(C.bracketL);if(c||u&&this.type!==C.parenL&&this.type!==C.backQuote||this.eat(C.dot)){var l=this.startNodeAt(e,n);l.object=t,c?(l.property=this.parseExpression(),this.expect(C.bracketR)):this.type===C.privateId&&t.type!=="Super"?l.property=this.parsePrivateIdent():l.property=this.parseIdent(this.options.allowReserved!=="never"),l.computed=!!c,o&&(l.optional=u),t=this.finishNode(l,"MemberExpression")}else if(!r&&this.eat(C.parenL)){var d=new Wa,m=this.yieldPos,f=this.awaitPos,g=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var b=this.parseExprList(C.parenR,this.options.ecmaVersion>=8,!1,d);if(s&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=m,this.awaitPos=f,this.awaitIdentPos=g,this.parseSubscriptAsyncArrow(e,n,b,a);this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=f||this.awaitPos,this.awaitIdentPos=g||this.awaitIdentPos;var x=this.startNodeAt(e,n);x.callee=t,x.arguments=b,o&&(x.optional=u),t=this.finishNode(x,"CallExpression")}else if(this.type===C.backQuote){(u||i)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var D=this.startNodeAt(e,n);D.tag=t,D.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(D,"TaggedTemplateExpression")}return t};yt.parseExprAtom=function(t,e,n){this.type===C.slash&&this.readRegexp();var r,s=this.potentialArrowAt===this.start;switch(this.type){case C._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===C.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==C.dot&&this.type!==C.bracketL&&this.type!==C.parenL&&this.unexpected(),this.finishNode(r,"Super");case C._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case C.name:var i=this.start,a=this.startLoc,o=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(C._function))return this.overrideContext($t.f_expr),this.parseFunction(this.startNodeAt(i,a),0,!1,!0,e);if(s&&!this.canInsertSemicolon()){if(this.eat(C.arrow))return this.parseArrowExpression(this.startNodeAt(i,a),[u],!1,e);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===C.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(C.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,a),[u],!0,e)}return u;case C.regexp:var c=this.value;return r=this.parseLiteral(c.value),r.regex={pattern:c.pattern,flags:c.flags},r;case C.num:case C.string:return this.parseLiteral(this.value);case C._null:case C._true:case C._false:return r=this.startNode(),r.value=this.type===C._null?null:this.type===C._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case C.parenL:var l=this.start,d=this.parseParenAndDistinguishExpression(s,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),d;case C.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(C.bracketR,!0,!0,t),this.finishNode(r,"ArrayExpression");case C.braceL:return this.overrideContext($t.b_expr),this.parseObj(!1,t);case C._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case C._class:return this.parseClass(this.startNode(),!1);case C._new:return this.parseNew();case C.backQuote:return this.parseTemplate();case C._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};yt.parseExprAtomDefault=function(){this.unexpected()};yt.parseExprImport=function(t){var e=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===C.parenL&&!t)return this.parseDynamicImport(e);if(this.type===C.dot){var n=this.startNodeAt(e.start,e.loc&&e.loc.start);return n.name="import",e.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(e)}else this.unexpected()};yt.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(C.parenR)?t.options=null:(this.expect(C.comma),this.afterTrailingComma(C.parenR)?t.options=null:(t.options=this.parseMaybeAssign(),this.eat(C.parenR)||(this.expect(C.comma),this.afterTrailingComma(C.parenR)||this.unexpected())));else if(!this.eat(C.parenR)){var e=this.start;this.eat(C.comma)&&this.eat(C.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")};yt.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="meta"&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")};yt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};yt.parseParenExpression=function(){this.expect(C.parenL);var t=this.parseExpression();return this.expect(C.parenR),t};yt.shouldParseArrow=function(t){return!this.canInsertSemicolon()};yt.parseParenAndDistinguishExpression=function(t,e){var n=this.start,r=this.startLoc,s,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,u=[],c=!0,l=!1,d=new Wa,m=this.yieldPos,f=this.awaitPos,g;for(this.yieldPos=0,this.awaitPos=0;this.type!==C.parenR;)if(c?c=!1:this.expect(C.comma),i&&this.afterTrailingComma(C.parenR,!0)){l=!0;break}else if(this.type===C.ellipsis){g=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===C.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var b=this.lastTokEnd,x=this.lastTokEndLoc;if(this.expect(C.parenR),t&&this.shouldParseArrow(u)&&this.eat(C.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=f,this.parseParenArrowList(n,r,u,e);(!u.length||l)&&this.unexpected(this.lastTokStart),g&&this.unexpected(g),this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?(s=this.startNodeAt(a,o),s.expressions=u,this.finishNodeAt(s,"SequenceExpression",b,x)):s=u[0]}else s=this.parseParenExpression();if(this.options.preserveParens){var D=this.startNodeAt(n,r);return D.expression=s,this.finishNode(D,"ParenthesizedExpression")}else return s};yt.parseParenItem=function(t){return t};yt.parseParenArrowList=function(t,e,n,r){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,r)};var XD=[];yt.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===C.dot){var e=this.startNodeAt(t.start,t.loc&&t.loc.start);e.name="new",t.meta=this.finishNode(e,"Identifier"),this.next();var n=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="target"&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var r=this.start,s=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,s,!0,!1),this.eat(C.parenL)?t.arguments=this.parseExprList(C.parenR,this.options.ecmaVersion>=8,!1):t.arguments=XD,this.finishNode(t,"NewExpression")};yt.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===C.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===C.backQuote,this.finishNode(n,"TemplateElement")};yt.parseTemplate=function(t){t===void 0&&(t={});var e=t.isTagged;e===void 0&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===C.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(C.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(C.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")};yt.isAsyncProp=function(t){return!t.computed&&t.key.type==="Identifier"&&t.key.name==="async"&&(this.type===C.name||this.type===C.num||this.type===C.string||this.type===C.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===C.star)&&!hn.test(this.input.slice(this.lastTokEnd,this.start))};yt.parseObj=function(t,e){var n=this.startNode(),r=!0,s={};for(n.properties=[],this.next();!this.eat(C.braceR);){if(r)r=!1;else if(this.expect(C.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(C.braceR))break;var i=this.parseProperty(t,e);t||this.checkPropClash(i,s,e),n.properties.push(i)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")};yt.parseProperty=function(t,e){var n=this.startNode(),r,s,i,a;if(this.options.ecmaVersion>=9&&this.eat(C.ellipsis))return t?(n.argument=this.parseIdent(!1),this.type===C.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,e),this.type===C.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(t||e)&&(i=this.start,a=this.startLoc),t||(r=this.eat(C.star)));var o=this.containsEsc;return this.parsePropertyName(n),!t&&!o&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(s=!0,r=this.options.ecmaVersion>=9&&this.eat(C.star),this.parsePropertyName(n)):s=!1,this.parsePropertyValue(n,t,r,s,i,a,e,o),this.finishNode(n,"Property")};yt.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var e=t.kind==="get"?0:1;if(t.value.params.length!==e){var n=t.value.start;t.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else t.kind==="set"&&t.value.params[0].type==="RestElement"&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")};yt.parsePropertyValue=function(t,e,n,r,s,i,a,o){(n||r)&&this.type===C.colon&&this.unexpected(),this.eat(C.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===C.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r)):!e&&!o&&this.options.ecmaVersion>=5&&!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.type!==C.comma&&this.type!==C.braceR&&this.type!==C.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(t)):this.options.ecmaVersion>=6&&!t.computed&&t.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),t.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=s),t.kind="init",e?t.value=this.parseMaybeDefault(s,i,this.copyNode(t.key)):this.type===C.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(s,i,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected()};yt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(C.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(C.bracketR),t.key;t.computed=!1}return t.key=this.type===C.num||this.type===C.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};yt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};yt.parseMethod=function(t,e,n){var r=this.startNode(),s=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(_m(e,r.generator)|Km|(n?G9:0)),this.expect(C.parenL),r.params=this.parseBindingList(C.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=s,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")};yt.parseArrowExpression=function(t,e,n,r){var s=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(_m(n,!1)|w9),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,r),this.yieldPos=s,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")};yt.parseFunctionBody=function(t,e,n,r){var s=e&&this.type!==C.braceL,i=this.strict,a=!1;if(s)t.body=this.parseMaybeAssign(r),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);(!i||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!i&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,V9),t.body=this.parseBlock(!1,void 0,a&&!i),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=u}this.exitScope()};yt.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(r.type!=="Identifier")return!1}return!0};yt.checkParams=function(t,e){for(var n=Object.create(null),r=0,s=t.params;r<s.length;r+=1){var i=s[r];this.checkLValInnerPattern(i,Hm,e?null:n)}};yt.parseExprList=function(t,e,n,r){for(var s=[],i=!0;!this.eat(t);){if(i)i=!1;else if(this.expect(C.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===C.comma?a=null:this.type===C.ellipsis?(a=this.parseSpread(r),r&&this.type===C.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),s.push(a)}return s};yt.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(e,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,n).indexOf("\\")!==-1)){var s=this.strict?this.reservedWordsStrict:this.reservedWords;s.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))}};yt.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e};yt.parseIdentNode=function(){var t=this.startNode();return this.type===C.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=C.name):this.unexpected(),t};yt.parsePrivateIdent=function(){var t=this.startNode();return this.type===C.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t};yt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===C.semi||this.canInsertSemicolon()||this.type!==C.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(C.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")};yt.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var Qi=he.prototype;Qi.raise=function(t,e){var n=F9(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r};Qi.raiseRecoverable=Qi.raise;Qi.curPosition=function(){if(this.options.locations)return new $s(this.curLine,this.pos-this.lineStart)};var Mr=he.prototype,GD=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Mr.enterScope=function(t){this.scopeStack.push(new GD(t))};Mr.exitScope=function(){this.scopeStack.pop()};Mr.treatFunctionsAsVarInScope=function(t){return t.flags&gs||!this.inModule&&t.flags&ti};Mr.declareName=function(t,e,n){var r=!1;if(e===ir){var s=this.currentScope();r=s.lexical.indexOf(t)>-1||s.functions.indexOf(t)>-1||s.var.indexOf(t)>-1,s.lexical.push(t),this.inModule&&s.flags&ti&&delete this.undefinedExports[t]}else if(e===E9){var i=this.currentScope();i.lexical.push(t)}else if(e===S9){var a=this.currentScope();this.treatFunctionsAsVar?r=a.lexical.indexOf(t)>-1:r=a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var u=this.scopeStack[o];if(u.lexical.indexOf(t)>-1&&!(u.flags&X9&&u.lexical[0]===t)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(t)>-1){r=!0;break}if(u.var.push(t),this.inModule&&u.flags&ti&&delete this.undefinedExports[t],u.flags&Ym)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")};Mr.checkLocalExport=function(t){this.scopeStack[0].lexical.indexOf(t.name)===-1&&this.scopeStack[0].var.indexOf(t.name)===-1&&(this.undefinedExports[t.name]=t)};Mr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Mr.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&Ym)return e}};Mr.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&Ym&&!(e.flags&w9))return e}};var Ra=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new La(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},yi=he.prototype;yi.startNode=function(){return new Ra(this,this.start,this.startLoc)};yi.startNodeAt=function(t,e){return new Ra(this,t,e)};function L9(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}yi.finishNode=function(t,e){return L9.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)};yi.finishNodeAt=function(t,e,n,r){return L9.call(this,t,e,n,r)};yi.copyNode=function(t){var e=new Ra(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var SD="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",W9="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",R9=W9+" Extended_Pictographic",T9=R9,z9=T9+" EBase EComp EMod EPres ExtPict",I9=z9,ED=I9,VD={9:W9,10:R9,11:T9,12:z9,13:I9,14:ED},kD="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",BD={9:"",10:"",11:"",12:"",13:"",14:kD},hf="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",N9="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",K9=N9+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Y9=K9+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",_9=Y9+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",H9=_9+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",LD=H9+" "+SD,WD={9:N9,10:K9,11:Y9,12:_9,13:H9,14:LD},j9={};function RD(t){var e=j9[t]={binary:hr(VD[t]+" "+hf),binaryOfStrings:hr(BD[t]),nonBinary:{General_Category:hr(hf),Script:hr(WD[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var Fo=0,pf=[9,10,11,12,13,14];Fo<pf.length;Fo+=1){var TD=pf[Fo];RD(TD)}var rt=he.prototype,qi=function(t,e){this.parent=t,this.base=e||this};qi.prototype.separatedFrom=function(t){for(var e=this;e;e=e.parent)for(var n=t;n;n=n.parent)if(e.base===n.base&&e!==n)return!0;return!1};qi.prototype.sibling=function(){return new qi(this.parent,this.base)};var In=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=j9[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};In.prototype.reset=function(t,e,n){var r=n.indexOf("v")!==-1,s=n.indexOf("u")!==-1;this.start=t|0,this.source=e+"",this.flags=n,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};In.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};In.prototype.at=function(t,e){e===void 0&&(e=!1);var n=this.source,r=n.length;if(t>=r)return-1;var s=n.charCodeAt(t);if(!(e||this.switchU)||s<=55295||s>=57344||t+1>=r)return s;var i=n.charCodeAt(t+1);return i>=56320&&i<=57343?(s<<10)+i-56613888:s};In.prototype.nextIndex=function(t,e){e===void 0&&(e=!1);var n=this.source,r=n.length;if(t>=r)return r;var s=n.charCodeAt(t),i;return!(e||this.switchU)||s<=55295||s>=57344||t+1>=r||(i=n.charCodeAt(t+1))<56320||i>57343?t+1:t+2};In.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};In.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};In.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};In.prototype.eat=function(t,e){return e===void 0&&(e=!1),this.current(e)===t?(this.advance(e),!0):!1};In.prototype.eatChars=function(t,e){e===void 0&&(e=!1);for(var n=this.pos,r=0,s=t;r<s.length;r+=1){var i=s[r],a=this.at(n,e);if(a===-1||a!==i)return!1;n=this.nextIndex(n,e)}return this.pos=n,!0};rt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=!1,s=!1,i=0;i<n.length;i++){var a=n.charAt(i);e.indexOf(a)===-1&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(a,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),a==="u"&&(r=!0),a==="v"&&(s=!0)}this.options.ecmaVersion>=15&&r&&s&&this.raise(t.start,"Invalid regular expression flag")};function zD(t){for(var e in t)return!0;return!1}rt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&zD(t.groupNames)&&(t.switchN=!0,this.regexp_pattern(t))};rt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames=Object.create(null),t.backReferenceNames.length=0,t.branchID=null,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];t.groupNames[r]||t.raise("Invalid named capture referenced")}};rt.regexp_disjunction=function(t){var e=this.options.ecmaVersion>=16;for(e&&(t.branchID=new qi(t.branchID,null)),this.regexp_alternative(t);t.eat(124);)e&&(t.branchID=t.branchID.sibling()),this.regexp_alternative(t);e&&(t.branchID=t.branchID.parent),this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")};rt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););};rt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))?(this.regexp_eatQuantifier(t),!0):!1};rt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1};rt.regexp_eatQuantifier=function(t,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(t,e)?(t.eat(63),!0):!1};rt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)};rt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,s=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue),t.eat(125)))return s!==-1&&s<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1};rt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)};rt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1};rt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(t),r=t.eat(45);if(n||r){for(var s=0;s<n.length;s++){var i=n.charAt(s);n.indexOf(i,s+1)>-1&&t.raise("Duplicate regular expression modifiers")}if(r){var a=this.regexp_eatModifiers(t);!n&&!a&&t.current()===58&&t.raise("Invalid regular expression modifiers");for(var o=0;o<a.length;o++){var u=a.charAt(o);(a.indexOf(u,o+1)>-1||n.indexOf(u)>-1)&&t.raise("Duplicate regular expression modifiers")}}}}if(t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}}t.pos=e}return!1};rt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):t.current()===63&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1};rt.regexp_eatModifiers=function(t){for(var e="",n=0;(n=t.current())!==-1&&ID(n);)e+=er(n),t.advance();return e};function ID(t){return t===105||t===109||t===115}rt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)};rt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1};rt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return J9(e)?(t.lastIntValue=e,t.advance(),!0):!1};function J9(t){return t===36||t>=40&&t<=43||t===46||t===63||t>=91&&t<=94||t>=123&&t<=125}rt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;(n=t.current())!==-1&&!J9(n);)t.advance();return t.pos!==e};rt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(t.advance(),!0):!1};rt.regexp_groupSpecifier=function(t){if(t.eat(63)){this.regexp_eatGroupName(t)||t.raise("Invalid group");var e=this.options.ecmaVersion>=16,n=t.groupNames[t.lastStringValue];if(n)if(e)for(var r=0,s=n;r<s.length;r+=1){var i=s[r];i.separatedFrom(t.branchID)||t.raise("Duplicate capture group name")}else t.raise("Duplicate capture group name");e?(n||(t.groupNames[t.lastStringValue]=[])).push(t.branchID):t.groupNames[t.lastStringValue]=!0}};rt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1};rt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=er(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=er(t.lastIntValue);return!0}return!1};rt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),ND(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)};function ND(t){return tr(t,!0)||t===36||t===95}rt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),KD(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)};function KD(t){return ls(t,!0)||t===36||t===95||t===8204||t===8205}rt.regexp_eatAtomEscape=function(t){return this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t)?!0:(t.switchU&&(t.current()===99&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)};rt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1};rt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1};rt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)};rt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1};rt.regexp_eatZero=function(t){return t.current()===48&&!Ta(t.lookahead())?(t.lastIntValue=0,t.advance(),!0):!1};rt.regexp_eatControlEscape=function(t){var e=t.current();return e===116?(t.lastIntValue=9,t.advance(),!0):e===110?(t.lastIntValue=10,t.advance(),!0):e===118?(t.lastIntValue=11,t.advance(),!0):e===102?(t.lastIntValue=12,t.advance(),!0):e===114?(t.lastIntValue=13,t.advance(),!0):!1};rt.regexp_eatControlLetter=function(t){var e=t.current();return O9(e)?(t.lastIntValue=e%32,t.advance(),!0):!1};function O9(t){return t>=65&&t<=90||t>=97&&t<=122}rt.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){e===void 0&&(e=!1);var n=t.pos,r=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(r&&s>=55296&&s<=56319){var i=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=(s-55296)*1024+(a-56320)+65536,!0}t.pos=i,t.lastIntValue=s}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&YD(t.lastIntValue))return!0;r&&t.raise("Invalid unicode escape"),t.pos=n}return!1};function YD(t){return t>=0&&t<=1114111}rt.regexp_eatIdentityEscape=function(t){if(t.switchU)return this.regexp_eatSyntaxCharacter(t)?!0:t.eat(47)?(t.lastIntValue=47,!0):!1;var e=t.current();return e!==99&&(!t.switchN||e!==107)?(t.lastIntValue=e,t.advance(),!0):!1};rt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do t.lastIntValue=10*t.lastIntValue+(e-48),t.advance();while((e=t.current())>=48&&e<=57);return!0}return!1};var U9=0,nr=1,un=2;rt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(_D(e))return t.lastIntValue=-1,t.advance(),nr;var n=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((n=e===80)||e===112)){t.lastIntValue=-1,t.advance();var r;if(t.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return n&&r===un&&t.raise("Invalid property name"),r;t.raise("Invalid property name")}return U9};function _D(t){return t===100||t===68||t===115||t===83||t===119||t===87}rt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),nr}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var s=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,s)}return U9};rt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){bs(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")};rt.regexp_validateUnicodePropertyNameOrValue=function(t,e){if(t.unicodeProperties.binary.test(e))return nr;if(t.switchV&&t.unicodeProperties.binaryOfStrings.test(e))return un;t.raise("Invalid property name")};rt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Q9(e=t.current());)t.lastStringValue+=er(e),t.advance();return t.lastStringValue!==""};function Q9(t){return O9(t)||t===95}rt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";HD(e=t.current());)t.lastStringValue+=er(e),t.advance();return t.lastStringValue!==""};function HD(t){return Q9(t)||Ta(t)}rt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)};rt.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),n=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&n===un&&t.raise("Negated character class may contain strings"),!0}return!1};rt.regexp_classContents=function(t){return t.current()===93?nr:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),nr)};rt.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;t.switchU&&(e===-1||n===-1)&&t.raise("Invalid character class"),e!==-1&&n!==-1&&e>n&&t.raise("Range out of order in character class")}}};rt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(n===99||tP(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return r!==93?(t.lastIntValue=r,t.advance(),!0):!1};rt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)};rt.regexp_classSetExpression=function(t){var e=nr,n;if(!this.regexp_eatClassSetRange(t))if(n=this.regexp_eatClassSetOperand(t)){n===un&&(e=un);for(var r=t.pos;t.eatChars([38,38]);){if(t.current()!==38&&(n=this.regexp_eatClassSetOperand(t))){n!==un&&(e=nr);continue}t.raise("Invalid character in character class")}if(r!==t.pos)return e;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(r!==t.pos)return e}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(n=this.regexp_eatClassSetOperand(t),!n)return e;n===un&&(e=un)}};rt.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var n=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var r=t.lastIntValue;return n!==-1&&r!==-1&&n>r&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1};rt.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?nr:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)};rt.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var n=t.eat(94),r=this.regexp_classContents(t);if(t.eat(93))return n&&r===un&&t.raise("Negated character class may contain strings"),r;t.pos=e}if(t.eat(92)){var s=this.regexp_eatCharacterClassEscape(t);if(s)return s;t.pos=e}return null};rt.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var n=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return n}else t.raise("Invalid escape");t.pos=e}return null};rt.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)this.regexp_classString(t)===un&&(e=un);return e};rt.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return e===1?nr:un};rt.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return this.regexp_eatCharacterEscape(t)||this.regexp_eatClassSetReservedPunctuator(t)?!0:t.eat(98)?(t.lastIntValue=8,!0):(t.pos=e,!1);var n=t.current();return n<0||n===t.lookahead()&&jD(n)||JD(n)?!1:(t.advance(),t.lastIntValue=n,!0)};function jD(t){return t===33||t>=35&&t<=38||t>=42&&t<=44||t===46||t>=58&&t<=64||t===94||t===96||t===126}function JD(t){return t===40||t===41||t===45||t===47||t>=91&&t<=93||t>=123&&t<=125}rt.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return OD(e)?(t.lastIntValue=e,t.advance(),!0):!1};function OD(t){return t===33||t===35||t===37||t===38||t===44||t===45||t>=58&&t<=62||t===64||t===96||t===126}rt.regexp_eatClassControlLetter=function(t){var e=t.current();return Ta(e)||e===95?(t.lastIntValue=e%32,t.advance(),!0):!1};rt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1};rt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Ta(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e};function Ta(t){return t>=48&&t<=57}rt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;q9(n=t.current());)t.lastIntValue=16*t.lastIntValue+$9(n),t.advance();return t.pos!==e};function q9(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function $9(t){return t>=65&&t<=70?10+(t-65):t>=97&&t<=102?10+(t-97):t-48}rt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=e*64+n*8+t.lastIntValue:t.lastIntValue=e*8+n}else t.lastIntValue=e;return!0}return!1};rt.regexp_eatOctalDigit=function(t){var e=t.current();return tP(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)};function tP(t){return t>=48&&t<=55}rt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var s=t.current();if(!q9(s))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+$9(s),t.advance()}return!0};var Jm=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new La(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Dt=he.prototype;Dt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Jm(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Dt.getToken=function(){return this.next(),new Jm(this)};typeof Symbol<"u"&&(Dt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===C.eof,value:e}}}});Dt.nextToken=function(){var t=this.curContext();if((!t||!t.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(C.eof);if(t.override)return t.override(this);this.readToken(this.fullCharCodeAtPos())};Dt.readToken=function(t){return tr(t,this.options.ecmaVersion>=6)||t===92?this.readWord():this.getTokenFromCode(t)};Dt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888};Dt.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,s=e;(r=x9(this.input,s,this.pos))>-1;)++this.curLine,s=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())};Dt.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!ys(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())};Dt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(t>8&&t<14||t>=5760&&A9.test(String.fromCharCode(t)))++this.pos;else break t}}};Dt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)};Dt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&t===46&&e===46?(this.pos+=3,this.finishToken(C.ellipsis)):(++this.pos,this.finishToken(C.dot))};Dt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):t===61?this.finishOp(C.assign,2):this.finishOp(C.slash,1)};Dt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=t===42?C.star:C.modulo;return this.options.ecmaVersion>=7&&t===42&&e===42&&(++n,r=C.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(C.assign,n+1):this.finishOp(r,n)};Dt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(C.assign,3)}return this.finishOp(t===124?C.logicalOR:C.logicalAND,2)}return e===61?this.finishOp(C.assign,2):this.finishOp(t===124?C.bitwiseOR:C.bitwiseAND,1)};Dt.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(C.assign,2):this.finishOp(C.bitwiseXOR,1)};Dt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||hn.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(C.incDec,2):e===61?this.finishOp(C.assign,2):this.finishOp(C.plusMin,1)};Dt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=t===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(C.assign,n+1):this.finishOp(C.bitShift,n)):e===33&&t===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(n=2),this.finishOp(C.relational,n))};Dt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(C.equality,this.input.charCodeAt(this.pos+2)===61?3:2):t===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(C.arrow)):this.finishOp(t===61?C.eq:C.prefix,1)};Dt.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(C.questionDot,2)}if(e===63){if(t>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(C.assign,3)}return this.finishOp(C.coalesce,2)}}return this.finishOp(C.question,1)};Dt.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),tr(e,!0)||e===92))return this.finishToken(C.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+er(e)+"'")};Dt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(C.parenL);case 41:return++this.pos,this.finishToken(C.parenR);case 59:return++this.pos,this.finishToken(C.semi);case 44:return++this.pos,this.finishToken(C.comma);case 91:return++this.pos,this.finishToken(C.bracketL);case 93:return++this.pos,this.finishToken(C.bracketR);case 123:return++this.pos,this.finishToken(C.braceL);case 125:return++this.pos,this.finishToken(C.braceR);case 58:return++this.pos,this.finishToken(C.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(C.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(C.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+er(t)+"'")};Dt.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)};Dt.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(hn.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if(r==="[")e=!0;else if(r==="]"&&e)e=!1;else if(r==="/"&&!e)break;t=r==="\\"}++this.pos}var s=this.input.slice(n,this.pos);++this.pos;var i=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(i);var o=this.regexpState||(this.regexpState=new In(this));o.reset(n,s,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(s,a)}catch{}return this.finishToken(C.regexp,{pattern:s,flags:a,value:u})};Dt.readInt=function(t,e,n){for(var r=this.options.ecmaVersion>=12&&e===void 0,s=n&&this.input.charCodeAt(this.pos)===48,i=this.pos,a=0,o=0,u=0,c=e??1/0;u<c;++u,++this.pos){var l=this.input.charCodeAt(this.pos),d=void 0;if(r&&l===95){s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;continue}if(l>=97?d=l-97+10:l>=65?d=l-65+10:l>=48&&l<=57?d=l-48:d=1/0,d>=t)break;o=l,a=a*t+d}return r&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===i||e!=null&&this.pos-i!==e?null:a};function UD(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function eP(t){return typeof BigInt!="function"?null:BigInt(t.replace(/_/g,""))}Dt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return n==null&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=eP(this.input.slice(e,this.pos)),++this.pos):tr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(C.num,n)};Dt.readNumber=function(t){var e=this.pos;!t&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var n=this.pos-e>=2&&this.input.charCodeAt(e)===48;n&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&r===110){var s=eP(this.input.slice(e,this.pos));return++this.pos,tr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(C.num,s)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),tr(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=UD(this.input.slice(e,this.pos),n);return this.finishToken(C.num,i)};Dt.readCodePoint=function(){var t=this.input.charCodeAt(this.pos),e;if(t===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else e=this.readHexChar(4);return e};Dt.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;r===92?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(ys(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(C.string,e)};var nP={};Dt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t===nP)this.readInvalidTemplateToken();else throw t}this.inTemplateElement=!1};Dt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw nP;this.raise(t,e)};Dt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===C.template||this.type===C.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(C.dollarBraceL)):(++this.pos,this.finishToken(C.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(C.template,t));if(n===92)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(ys(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:t+=`
`;break;default:t+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};Dt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(C.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Dt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return er(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(r,8);return s>255&&(r=r.slice(0,-1),s=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),(r!=="0"||e===56||e===57)&&(this.strict||t)&&this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return ys(e)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(e)}};Dt.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return n===null&&this.invalidStringToken(e,"Bad character escape sequence"),n};Dt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(ls(s,r))this.pos+=s<=65535?1:2;else if(s===92){this.containsEsc=!0,t+=this.input.slice(n,this.pos);var i=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?tr:ls)(a,r)||this.invalidStringToken(i,"Invalid Unicode escape"),t+=er(a),n=this.pos}else break;e=!1}return t+this.input.slice(n,this.pos)};Dt.readWord=function(){var t=this.readWord1(),e=C.name;return this.keywords.test(t)&&(e=Im[t]),this.finishToken(e,t)};var QD="8.14.0";he.acorn={Parser:he,version:QD,defaultOptions:$o,Position:$s,SourceLocation:La,getLineInfo:F9,Node:Ra,TokenType:Et,tokTypes:C,keywordTypes:Im,TokContext:Pn,tokContexts:$t,isIdentifierChar:ls,isIdentifierStart:tr,Token:Jm,isNewLine:ys,lineBreak:hn,lineBreakG:MD,nonASCIIwhitespace:A9};function qD(t,e){return he.parse(t,e)}var $D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tF(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var df={},mf={},ff;function eF(){return ff||(ff=1,(function(t){(function e(n){var r,s,i,a,o,u;function c(A){var V={},E,B;for(E in A)A.hasOwnProperty(E)&&(B=A[E],typeof B=="object"&&B!==null?V[E]=c(B):V[E]=B);return V}function l(A,V){var E,B,K,R;for(B=A.length,K=0;B;)E=B>>>1,R=K+E,V(A[R])?B=E:(K=R+1,B-=E+1);return K}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},i={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},a={},o={},u={},s={Break:a,Skip:o,Remove:u};function d(A,V){this.parent=A,this.key=V}d.prototype.replace=function(A){this.parent[this.key]=A},d.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function m(A,V,E,B){this.node=A,this.path=V,this.wrap=E,this.ref=B}function f(){}f.prototype.path=function(){var A,V,E,B,K,R;function j(W,_){if(Array.isArray(_))for(E=0,B=_.length;E<B;++E)W.push(_[E]);else W.push(_)}if(!this.__current.path)return null;for(K=[],A=2,V=this.__leavelist.length;A<V;++A)R=this.__leavelist[A],j(K,R.path);return j(K,this.__current.path),K},f.prototype.type=function(){var A=this.current();return A.type||this.__current.wrap},f.prototype.parents=function(){var A,V,E;for(E=[],A=1,V=this.__leavelist.length;A<V;++A)E.push(this.__leavelist[A].node);return E},f.prototype.current=function(){return this.__current.node},f.prototype.__execute=function(A,V){var E,B;return B=void 0,E=this.__current,this.__current=V,this.__state=null,A&&(B=A.call(this,V.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=E,B},f.prototype.notify=function(A){this.__state=A},f.prototype.skip=function(){this.notify(o)},f.prototype.break=function(){this.notify(a)},f.prototype.remove=function(){this.notify(u)},f.prototype.__initialize=function(A,V){this.visitor=V,this.root=A,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,V.fallback==="iteration"?this.__fallback=Object.keys:typeof V.fallback=="function"&&(this.__fallback=V.fallback),this.__keys=i,V.keys&&(this.__keys=Object.assign(Object.create(this.__keys),V.keys))};function g(A){return A==null?!1:typeof A=="object"&&typeof A.type=="string"}function b(A,V){return(A===r.ObjectExpression||A===r.ObjectPattern)&&V==="properties"}function x(A,V){for(var E=A.length-1;E>=0;--E)if(A[E].node===V)return!0;return!1}f.prototype.traverse=function(A,V){var E,B,K,R,j,W,_,nt,ut,tt,st,q;for(this.__initialize(A,V),q={},E=this.__worklist,B=this.__leavelist,E.push(new m(A,null,null,null)),B.push(new m(null,null,null,null));E.length;){if(K=E.pop(),K===q){if(K=B.pop(),W=this.__execute(V.leave,K),this.__state===a||W===a)return;continue}if(K.node){if(W=this.__execute(V.enter,K),this.__state===a||W===a)return;if(E.push(q),B.push(K),this.__state===o||W===o)continue;if(R=K.node,j=R.type||K.wrap,tt=this.__keys[j],!tt)if(this.__fallback)tt=this.__fallback(R);else throw new Error("Unknown node type "+j+".");for(nt=tt.length;(nt-=1)>=0;)if(_=tt[nt],st=R[_],!!st){if(Array.isArray(st)){for(ut=st.length;(ut-=1)>=0;)if(st[ut]&&!x(B,st[ut])){if(b(j,tt[nt]))K=new m(st[ut],[_,ut],"Property",null);else if(g(st[ut]))K=new m(st[ut],[_,ut],null,null);else continue;E.push(K)}}else if(g(st)){if(x(B,st))continue;E.push(new m(st,_,null,null))}}}}},f.prototype.replace=function(A,V){var E,B,K,R,j,W,_,nt,ut,tt,st,q,$;function mt(Lt){var Y,St,Kt,ye;if(Lt.ref.remove()){for(St=Lt.ref.key,ye=Lt.ref.parent,Y=E.length;Y--;)if(Kt=E[Y],Kt.ref&&Kt.ref.parent===ye){if(Kt.ref.key<St)break;--Kt.ref.key}}}for(this.__initialize(A,V),st={},E=this.__worklist,B=this.__leavelist,q={root:A},W=new m(A,null,null,new d(q,"root")),E.push(W),B.push(W);E.length;){if(W=E.pop(),W===st){if(W=B.pop(),j=this.__execute(V.leave,W),j!==void 0&&j!==a&&j!==o&&j!==u&&W.ref.replace(j),(this.__state===u||j===u)&&mt(W),this.__state===a||j===a)return q.root;continue}if(j=this.__execute(V.enter,W),j!==void 0&&j!==a&&j!==o&&j!==u&&(W.ref.replace(j),W.node=j),(this.__state===u||j===u)&&(mt(W),W.node=null),this.__state===a||j===a)return q.root;if(K=W.node,!!K&&(E.push(st),B.push(W),!(this.__state===o||j===o))){if(R=K.type||W.wrap,ut=this.__keys[R],!ut)if(this.__fallback)ut=this.__fallback(K);else throw new Error("Unknown node type "+R+".");for(_=ut.length;(_-=1)>=0;)if($=ut[_],tt=K[$],!!tt)if(Array.isArray(tt)){for(nt=tt.length;(nt-=1)>=0;)if(tt[nt]){if(b(R,ut[_]))W=new m(tt[nt],[$,nt],"Property",new d(tt,nt));else if(g(tt[nt]))W=new m(tt[nt],[$,nt],null,new d(tt,nt));else continue;E.push(W)}}else g(tt)&&E.push(new m(tt,$,null,new d(K,$)))}}return q.root};function D(A,V){var E=new f;return E.traverse(A,V)}function G(A,V){var E=new f;return E.replace(A,V)}function k(A,V){var E;return E=l(V,function(B){return B.range[0]>A.range[0]}),A.extendedRange=[A.range[0],A.range[1]],E!==V.length&&(A.extendedRange[1]=V[E].range[0]),E-=1,E>=0&&(A.extendedRange[0]=V[E].range[1]),A}function Z(A,V,E){var B=[],K,R,j,W;if(!A.range)throw new Error("attachComments needs range information");if(!E.length){if(V.length){for(j=0,R=V.length;j<R;j+=1)K=c(V[j]),K.extendedRange=[0,A.range[0]],B.push(K);A.leadingComments=B}return A}for(j=0,R=V.length;j<R;j+=1)B.push(k(c(V[j]),E));return W=0,D(A,{enter:function(_){for(var nt;W<B.length&&(nt=B[W],!(nt.extendedRange[1]>_.range[0]));)nt.extendedRange[1]===_.range[0]?(_.leadingComments||(_.leadingComments=[]),_.leadingComments.push(nt),B.splice(W,1)):W+=1;if(W===B.length)return s.Break;if(B[W].extendedRange[0]>_.range[1])return s.Skip}}),W=0,D(A,{leave:function(_){for(var nt;W<B.length&&(nt=B[W],!(_.range[1]<nt.extendedRange[0]));)_.range[1]===nt.extendedRange[0]?(_.trailingComments||(_.trailingComments=[]),_.trailingComments.push(nt),B.splice(W,1)):W+=1;if(W===B.length)return s.Break;if(B[W].extendedRange[0]>_.range[1])return s.Skip}}),A}return n.Syntax=r,n.traverse=D,n.replace=G,n.attachComments=Z,n.VisitorKeys=i,n.VisitorOption=s,n.Controller=f,n.cloneEnvironment=function(){return e({})},n})(t)})(mf)),mf}var Si={},yf={exports:{}},bf;function nF(){return bf||(bf=1,(function(){function t(a){if(a==null)return!1;switch(a.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(a){if(a==null)return!1;switch(a.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function n(a){if(a==null)return!1;switch(a.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function r(a){return n(a)||a!=null&&a.type==="FunctionDeclaration"}function s(a){switch(a.type){case"IfStatement":return a.alternate!=null?a.alternate:a.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return a.body}return null}function i(a){var o;if(a.type!=="IfStatement"||a.alternate==null)return!1;o=a.consequent;do{if(o.type==="IfStatement"&&o.alternate==null)return!0;o=s(o)}while(o);return!1}yf.exports={isExpression:t,isStatement:n,isIterationStatement:e,isSourceElement:r,isProblematicIfStatement:i,trailingStatement:s}})()),yf.exports}var gf={exports:{}},Mf;function sP(){return Mf||(Mf=1,(function(){var t,e,n,r,s,i;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function a(x){return 48<=x&&x<=57}function o(x){return 48<=x&&x<=57||97<=x&&x<=102||65<=x&&x<=70}function u(x){return x>=48&&x<=55}n=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(x){return x===32||x===9||x===11||x===12||x===160||x>=5760&&n.indexOf(x)>=0}function l(x){return x===10||x===13||x===8232||x===8233}function d(x){if(x<=65535)return String.fromCharCode(x);var D=String.fromCharCode(Math.floor((x-65536)/1024)+55296),G=String.fromCharCode((x-65536)%1024+56320);return D+G}for(r=new Array(128),i=0;i<128;++i)r[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function m(x){return x<128?r[x]:e.NonAsciiIdentifierStart.test(d(x))}function f(x){return x<128?s[x]:e.NonAsciiIdentifierPart.test(d(x))}function g(x){return x<128?r[x]:t.NonAsciiIdentifierStart.test(d(x))}function b(x){return x<128?s[x]:t.NonAsciiIdentifierPart.test(d(x))}gf.exports={isDecimalDigit:a,isHexDigit:o,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:l,isIdentifierStartES5:m,isIdentifierPartES5:f,isIdentifierStartES6:g,isIdentifierPartES6:b}})()),gf.exports}var Pf={exports:{}},Cf;function rF(){return Cf||(Cf=1,(function(){var t=sP();function e(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function n(m,f){return!f&&m==="yield"?!1:r(m,f)}function r(m,f){if(f&&e(m))return!0;switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}}function s(m,f){return m==="null"||m==="true"||m==="false"||n(m,f)}function i(m,f){return m==="null"||m==="true"||m==="false"||r(m,f)}function a(m){return m==="eval"||m==="arguments"}function o(m){var f,g,b;if(m.length===0||(b=m.charCodeAt(0),!t.isIdentifierStartES5(b)))return!1;for(f=1,g=m.length;f<g;++f)if(b=m.charCodeAt(f),!t.isIdentifierPartES5(b))return!1;return!0}function u(m,f){return(m-55296)*1024+(f-56320)+65536}function c(m){var f,g,b,x,D;if(m.length===0)return!1;for(D=t.isIdentifierStartES6,f=0,g=m.length;f<g;++f){if(b=m.charCodeAt(f),55296<=b&&b<=56319){if(++f,f>=g||(x=m.charCodeAt(f),!(56320<=x&&x<=57343)))return!1;b=u(b,x)}if(!D(b))return!1;D=t.isIdentifierPartES6}return!0}function l(m,f){return o(m)&&!s(m,f)}function d(m,f){return c(m)&&!i(m,f)}Pf.exports={isKeywordES5:n,isKeywordES6:r,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:a,isIdentifierNameES5:o,isIdentifierNameES6:c,isIdentifierES5:l,isIdentifierES6:d}})()),Pf.exports}var vf;function sF(){return vf||(vf=1,(function(){Si.ast=nF(),Si.code=sP(),Si.keyword=rF()})()),Si}var Ei={},Zo={},Vi={},ki={},xf;function iF(){if(xf)return ki;xf=1;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return ki.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},ki.decode=function(e){var n=65,r=90,s=97,i=122,a=48,o=57,u=43,c=47,l=26,d=52;return n<=e&&e<=r?e-n:s<=e&&e<=i?e-s+l:a<=e&&e<=o?e-a+d:e==u?62:e==c?63:-1},ki}var Af;function iP(){if(Af)return Vi;Af=1;var t=iF(),e=5,n=1<<e,r=n-1,s=n;function i(o){return o<0?(-o<<1)+1:(o<<1)+0}function a(o){var u=(o&1)===1,c=o>>1;return u?-c:c}return Vi.encode=function(o){var u="",c,l=i(o);do c=l&r,l>>>=e,l>0&&(c|=s),u+=t.encode(c);while(l>0);return u},Vi.decode=function(o,u,c){var l=o.length,d=0,m=0,f,g;do{if(u>=l)throw new Error("Expected more digits in base 64 VLQ value.");if(g=t.decode(o.charCodeAt(u++)),g===-1)throw new Error("Invalid base64 digit: "+o.charAt(u-1));f=!!(g&s),g&=r,d=d+(g<<m),m+=e}while(f);c.value=a(d),c.rest=u},Vi}var Df={},Ff;function bi(){return Ff||(Ff=1,(function(t){function e(Z,A,V){if(A in Z)return Z[A];if(arguments.length===3)return V;throw new Error('"'+A+'" is a required argument.')}t.getArg=e;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function s(Z){var A=Z.match(n);return A?{scheme:A[1],auth:A[2],host:A[3],port:A[4],path:A[5]}:null}t.urlParse=s;function i(Z){var A="";return Z.scheme&&(A+=Z.scheme+":"),A+="//",Z.auth&&(A+=Z.auth+"@"),Z.host&&(A+=Z.host),Z.port&&(A+=":"+Z.port),Z.path&&(A+=Z.path),A}t.urlGenerate=i;function a(Z){var A=Z,V=s(Z);if(V){if(!V.path)return Z;A=V.path}for(var E=t.isAbsolute(A),B=A.split(/\/+/),K,R=0,j=B.length-1;j>=0;j--)K=B[j],K==="."?B.splice(j,1):K===".."?R++:R>0&&(K===""?(B.splice(j+1,R),R=0):(B.splice(j,2),R--));return A=B.join("/"),A===""&&(A=E?"/":"."),V?(V.path=A,i(V)):A}t.normalize=a;function o(Z,A){Z===""&&(Z="."),A===""&&(A=".");var V=s(A),E=s(Z);if(E&&(Z=E.path||"/"),V&&!V.scheme)return E&&(V.scheme=E.scheme),i(V);if(V||A.match(r))return A;if(E&&!E.host&&!E.path)return E.host=A,i(E);var B=A.charAt(0)==="/"?A:a(Z.replace(/\/+$/,"")+"/"+A);return E?(E.path=B,i(E)):B}t.join=o,t.isAbsolute=function(Z){return Z.charAt(0)==="/"||n.test(Z)};function u(Z,A){Z===""&&(Z="."),Z=Z.replace(/\/$/,"");for(var V=0;A.indexOf(Z+"/")!==0;){var E=Z.lastIndexOf("/");if(E<0||(Z=Z.slice(0,E),Z.match(/^([^\/]+:\/)?\/*$/)))return A;++V}return Array(V+1).join("../")+A.substr(Z.length+1)}t.relative=u;var c=(function(){var Z=Object.create(null);return!("__proto__"in Z)})();function l(Z){return Z}function d(Z){return f(Z)?"$"+Z:Z}t.toSetString=c?l:d;function m(Z){return f(Z)?Z.slice(1):Z}t.fromSetString=c?l:m;function f(Z){if(!Z)return!1;var A=Z.length;if(A<9||Z.charCodeAt(A-1)!==95||Z.charCodeAt(A-2)!==95||Z.charCodeAt(A-3)!==111||Z.charCodeAt(A-4)!==116||Z.charCodeAt(A-5)!==111||Z.charCodeAt(A-6)!==114||Z.charCodeAt(A-7)!==112||Z.charCodeAt(A-8)!==95||Z.charCodeAt(A-9)!==95)return!1;for(var V=A-10;V>=0;V--)if(Z.charCodeAt(V)!==36)return!1;return!0}function g(Z,A,V){var E=x(Z.source,A.source);return E!==0||(E=Z.originalLine-A.originalLine,E!==0)||(E=Z.originalColumn-A.originalColumn,E!==0||V)||(E=Z.generatedColumn-A.generatedColumn,E!==0)||(E=Z.generatedLine-A.generatedLine,E!==0)?E:x(Z.name,A.name)}t.compareByOriginalPositions=g;function b(Z,A,V){var E=Z.generatedLine-A.generatedLine;return E!==0||(E=Z.generatedColumn-A.generatedColumn,E!==0||V)||(E=x(Z.source,A.source),E!==0)||(E=Z.originalLine-A.originalLine,E!==0)||(E=Z.originalColumn-A.originalColumn,E!==0)?E:x(Z.name,A.name)}t.compareByGeneratedPositionsDeflated=b;function x(Z,A){return Z===A?0:Z===null?1:A===null?-1:Z>A?1:-1}function D(Z,A){var V=Z.generatedLine-A.generatedLine;return V!==0||(V=Z.generatedColumn-A.generatedColumn,V!==0)||(V=x(Z.source,A.source),V!==0)||(V=Z.originalLine-A.originalLine,V!==0)||(V=Z.originalColumn-A.originalColumn,V!==0)?V:x(Z.name,A.name)}t.compareByGeneratedPositionsInflated=D;function G(Z){return JSON.parse(Z.replace(/^\)]}'[^\n]*\n/,""))}t.parseSourceMapInput=G;function k(Z,A,V){if(A=A||"",Z&&(Z[Z.length-1]!=="/"&&A[0]!=="/"&&(Z+="/"),A=Z+A),V){var E=s(V);if(!E)throw new Error("sourceMapURL could not be parsed");if(E.path){var B=E.path.lastIndexOf("/");B>=0&&(E.path=E.path.substring(0,B+1))}A=o(i(E),A)}return a(A)}t.computeSourceURL=k})(Df)),Df}var wo={},Zf;function aP(){if(Zf)return wo;Zf=1;var t=bi(),e=Object.prototype.hasOwnProperty,n=typeof Map<"u";function r(){this._array=[],this._set=n?new Map:Object.create(null)}return r.fromArray=function(s,i){for(var a=new r,o=0,u=s.length;o<u;o++)a.add(s[o],i);return a},r.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},r.prototype.add=function(s,i){var a=n?s:t.toSetString(s),o=n?this.has(s):e.call(this._set,a),u=this._array.length;(!o||i)&&this._array.push(s),o||(n?this._set.set(s,u):this._set[a]=u)},r.prototype.has=function(s){if(n)return this._set.has(s);var i=t.toSetString(s);return e.call(this._set,i)},r.prototype.indexOf=function(s){if(n){var i=this._set.get(s);if(i>=0)return i}else{var a=t.toSetString(s);if(e.call(this._set,a))return this._set[a]}throw new Error('"'+s+'" is not in the set.')},r.prototype.at=function(s){if(s>=0&&s<this._array.length)return this._array[s];throw new Error("No element indexed by "+s)},r.prototype.toArray=function(){return this._array.slice()},wo.ArraySet=r,wo}var Xo={},wf;function aF(){if(wf)return Xo;wf=1;var t=bi();function e(r,s){var i=r.generatedLine,a=s.generatedLine,o=r.generatedColumn,u=s.generatedColumn;return a>i||a==i&&u>=o||t.compareByGeneratedPositionsInflated(r,s)<=0}function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return n.prototype.unsortedForEach=function(r,s){this._array.forEach(r,s)},n.prototype.add=function(r){e(this._last,r)?(this._last=r,this._array.push(r)):(this._sorted=!1,this._array.push(r))},n.prototype.toArray=function(){return this._sorted||(this._array.sort(t.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},Xo.MappingList=n,Xo}var Xf;function oP(){if(Xf)return Zo;Xf=1;var t=iP(),e=bi(),n=aP().ArraySet,r=aF().MappingList;function s(i){i||(i={}),this._file=e.getArg(i,"file",null),this._sourceRoot=e.getArg(i,"sourceRoot",null),this._skipValidation=e.getArg(i,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new r,this._sourcesContents=null}return s.prototype._version=3,s.fromSourceMap=function(i){var a=i.sourceRoot,o=new s({file:i.file,sourceRoot:a});return i.eachMapping(function(u){var c={generated:{line:u.generatedLine,column:u.generatedColumn}};u.source!=null&&(c.source=u.source,a!=null&&(c.source=e.relative(a,c.source)),c.original={line:u.originalLine,column:u.originalColumn},u.name!=null&&(c.name=u.name)),o.addMapping(c)}),i.sources.forEach(function(u){var c=u;a!==null&&(c=e.relative(a,u)),o._sources.has(c)||o._sources.add(c);var l=i.sourceContentFor(u);l!=null&&o.setSourceContent(u,l)}),o},s.prototype.addMapping=function(i){var a=e.getArg(i,"generated"),o=e.getArg(i,"original",null),u=e.getArg(i,"source",null),c=e.getArg(i,"name",null);this._skipValidation||this._validateMapping(a,o,u,c),u!=null&&(u=String(u),this._sources.has(u)||this._sources.add(u)),c!=null&&(c=String(c),this._names.has(c)||this._names.add(c)),this._mappings.add({generatedLine:a.line,generatedColumn:a.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:u,name:c})},s.prototype.setSourceContent=function(i,a){var o=i;this._sourceRoot!=null&&(o=e.relative(this._sourceRoot,o)),a!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[e.toSetString(o)]=a):this._sourcesContents&&(delete this._sourcesContents[e.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(i,a,o){var u=a;if(a==null){if(i.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);u=i.file}var c=this._sourceRoot;c!=null&&(u=e.relative(c,u));var l=new n,d=new n;this._mappings.unsortedForEach(function(m){if(m.source===u&&m.originalLine!=null){var f=i.originalPositionFor({line:m.originalLine,column:m.originalColumn});f.source!=null&&(m.source=f.source,o!=null&&(m.source=e.join(o,m.source)),c!=null&&(m.source=e.relative(c,m.source)),m.originalLine=f.line,m.originalColumn=f.column,f.name!=null&&(m.name=f.name))}var g=m.source;g!=null&&!l.has(g)&&l.add(g);var b=m.name;b!=null&&!d.has(b)&&d.add(b)},this),this._sources=l,this._names=d,i.sources.forEach(function(m){var f=i.sourceContentFor(m);f!=null&&(o!=null&&(m=e.join(o,m)),c!=null&&(m=e.relative(c,m)),this.setSourceContent(m,f))},this)},s.prototype._validateMapping=function(i,a,o,u){if(a&&typeof a.line!="number"&&typeof a.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(i&&"line"in i&&"column"in i&&i.line>0&&i.column>=0&&!a&&!o&&!u)){if(i&&"line"in i&&"column"in i&&a&&"line"in a&&"column"in a&&i.line>0&&i.column>=0&&a.line>0&&a.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:i,source:o,original:a,name:u}))}},s.prototype._serializeMappings=function(){for(var i=0,a=1,o=0,u=0,c=0,l=0,d="",m,f,g,b,x=this._mappings.toArray(),D=0,G=x.length;D<G;D++){if(f=x[D],m="",f.generatedLine!==a)for(i=0;f.generatedLine!==a;)m+=";",a++;else if(D>0){if(!e.compareByGeneratedPositionsInflated(f,x[D-1]))continue;m+=","}m+=t.encode(f.generatedColumn-i),i=f.generatedColumn,f.source!=null&&(b=this._sources.indexOf(f.source),m+=t.encode(b-l),l=b,m+=t.encode(f.originalLine-1-u),u=f.originalLine-1,m+=t.encode(f.originalColumn-o),o=f.originalColumn,f.name!=null&&(g=this._names.indexOf(f.name),m+=t.encode(g-c),c=g)),d+=m}return d},s.prototype._generateSourcesContent=function(i,a){return i.map(function(o){if(!this._sourcesContents)return null;a!=null&&(o=e.relative(a,o));var u=e.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)},s.prototype.toJSON=function(){var i={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(i.file=this._file),this._sourceRoot!=null&&(i.sourceRoot=this._sourceRoot),this._sourcesContents&&(i.sourcesContent=this._generateSourcesContent(i.sources,i.sourceRoot)),i},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},Zo.SourceMapGenerator=s,Zo}var Ss={},Gf={},Sf;function oF(){return Sf||(Sf=1,(function(t){t.GREATEST_LOWER_BOUND=1,t.LEAST_UPPER_BOUND=2;function e(n,r,s,i,a,o){var u=Math.floor((r-n)/2)+n,c=a(s,i[u],!0);return c===0?u:c>0?r-u>1?e(u,r,s,i,a,o):o==t.LEAST_UPPER_BOUND?r<i.length?r:-1:u:u-n>1?e(n,u,s,i,a,o):o==t.LEAST_UPPER_BOUND?u:n<0?-1:n}t.search=function(n,r,s,i){if(r.length===0)return-1;var a=e(-1,r.length,n,r,s,i||t.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&s(r[a],r[a-1],!0)===0;)--a;return a}})(Gf)),Gf}var Go={},Ef;function uF(){if(Ef)return Go;Ef=1;function t(r,s,i){var a=r[s];r[s]=r[i],r[i]=a}function e(r,s){return Math.round(r+Math.random()*(s-r))}function n(r,s,i,a){if(i<a){var o=e(i,a),u=i-1;t(r,o,a);for(var c=r[a],l=i;l<a;l++)s(r[l],c)<=0&&(u+=1,t(r,u,l));t(r,u+1,l);var d=u+1;n(r,s,i,d-1),n(r,s,d+1,a)}}return Go.quickSort=function(r,s){n(r,s,0,r.length-1)},Go}var Vf;function cF(){if(Vf)return Ss;Vf=1;var t=bi(),e=oF(),n=aP().ArraySet,r=iP(),s=uF().quickSort;function i(c,l){var d=c;return typeof c=="string"&&(d=t.parseSourceMapInput(c)),d.sections!=null?new u(d,l):new a(d,l)}i.fromSourceMap=function(c,l){return a.fromSourceMap(c,l)},i.prototype._version=3,i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),i.prototype._charIsMappingSeparator=function(c,l){var d=c.charAt(l);return d===";"||d===","},i.prototype._parseMappings=function(c,l){throw new Error("Subclasses must implement _parseMappings")},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,i.prototype.eachMapping=function(c,l,d){var m=l||null,f=d||i.GENERATED_ORDER,g;switch(f){case i.GENERATED_ORDER:g=this._generatedMappings;break;case i.ORIGINAL_ORDER:g=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var b=this.sourceRoot;g.map(function(x){var D=x.source===null?null:this._sources.at(x.source);return D=t.computeSourceURL(b,D,this._sourceMapURL),{source:D,generatedLine:x.generatedLine,generatedColumn:x.generatedColumn,originalLine:x.originalLine,originalColumn:x.originalColumn,name:x.name===null?null:this._names.at(x.name)}},this).forEach(c,m)},i.prototype.allGeneratedPositionsFor=function(c){var l=t.getArg(c,"line"),d={source:t.getArg(c,"source"),originalLine:l,originalColumn:t.getArg(c,"column",0)};if(d.source=this._findSourceIndex(d.source),d.source<0)return[];var m=[],f=this._findMapping(d,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,e.LEAST_UPPER_BOUND);if(f>=0){var g=this._originalMappings[f];if(c.column===void 0)for(var b=g.originalLine;g&&g.originalLine===b;)m.push({line:t.getArg(g,"generatedLine",null),column:t.getArg(g,"generatedColumn",null),lastColumn:t.getArg(g,"lastGeneratedColumn",null)}),g=this._originalMappings[++f];else for(var x=g.originalColumn;g&&g.originalLine===l&&g.originalColumn==x;)m.push({line:t.getArg(g,"generatedLine",null),column:t.getArg(g,"generatedColumn",null),lastColumn:t.getArg(g,"lastGeneratedColumn",null)}),g=this._originalMappings[++f]}return m},Ss.SourceMapConsumer=i;function a(c,l){var d=c;typeof c=="string"&&(d=t.parseSourceMapInput(c));var m=t.getArg(d,"version"),f=t.getArg(d,"sources"),g=t.getArg(d,"names",[]),b=t.getArg(d,"sourceRoot",null),x=t.getArg(d,"sourcesContent",null),D=t.getArg(d,"mappings"),G=t.getArg(d,"file",null);if(m!=this._version)throw new Error("Unsupported version: "+m);b&&(b=t.normalize(b)),f=f.map(String).map(t.normalize).map(function(k){return b&&t.isAbsolute(b)&&t.isAbsolute(k)?t.relative(b,k):k}),this._names=n.fromArray(g.map(String),!0),this._sources=n.fromArray(f,!0),this._absoluteSources=this._sources.toArray().map(function(k){return t.computeSourceURL(b,k,l)}),this.sourceRoot=b,this.sourcesContent=x,this._mappings=D,this._sourceMapURL=l,this.file=G}a.prototype=Object.create(i.prototype),a.prototype.consumer=i,a.prototype._findSourceIndex=function(c){var l=c;if(this.sourceRoot!=null&&(l=t.relative(this.sourceRoot,l)),this._sources.has(l))return this._sources.indexOf(l);var d;for(d=0;d<this._absoluteSources.length;++d)if(this._absoluteSources[d]==c)return d;return-1},a.fromSourceMap=function(c,l){var d=Object.create(a.prototype),m=d._names=n.fromArray(c._names.toArray(),!0),f=d._sources=n.fromArray(c._sources.toArray(),!0);d.sourceRoot=c._sourceRoot,d.sourcesContent=c._generateSourcesContent(d._sources.toArray(),d.sourceRoot),d.file=c._file,d._sourceMapURL=l,d._absoluteSources=d._sources.toArray().map(function(A){return t.computeSourceURL(d.sourceRoot,A,l)});for(var g=c._mappings.toArray().slice(),b=d.__generatedMappings=[],x=d.__originalMappings=[],D=0,G=g.length;D<G;D++){var k=g[D],Z=new o;Z.generatedLine=k.generatedLine,Z.generatedColumn=k.generatedColumn,k.source&&(Z.source=f.indexOf(k.source),Z.originalLine=k.originalLine,Z.originalColumn=k.originalColumn,k.name&&(Z.name=m.indexOf(k.name)),x.push(Z)),b.push(Z)}return s(d.__originalMappings,t.compareByOriginalPositions),d},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function o(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}a.prototype._parseMappings=function(c,l){for(var d=1,m=0,f=0,g=0,b=0,x=0,D=c.length,G=0,k={},Z={},A=[],V=[],E,B,K,R,j;G<D;)if(c.charAt(G)===";")d++,G++,m=0;else if(c.charAt(G)===",")G++;else{for(E=new o,E.generatedLine=d,R=G;R<D&&!this._charIsMappingSeparator(c,R);R++);if(B=c.slice(G,R),K=k[B],K)G+=B.length;else{for(K=[];G<R;)r.decode(c,G,Z),j=Z.value,G=Z.rest,K.push(j);if(K.length===2)throw new Error("Found a source, but no line and column");if(K.length===3)throw new Error("Found a source and line, but no column");k[B]=K}E.generatedColumn=m+K[0],m=E.generatedColumn,K.length>1&&(E.source=b+K[1],b+=K[1],E.originalLine=f+K[2],f=E.originalLine,E.originalLine+=1,E.originalColumn=g+K[3],g=E.originalColumn,K.length>4&&(E.name=x+K[4],x+=K[4])),V.push(E),typeof E.originalLine=="number"&&A.push(E)}s(V,t.compareByGeneratedPositionsDeflated),this.__generatedMappings=V,s(A,t.compareByOriginalPositions),this.__originalMappings=A},a.prototype._findMapping=function(c,l,d,m,f,g){if(c[d]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+c[d]);if(c[m]<0)throw new TypeError("Column must be greater than or equal to 0, got "+c[m]);return e.search(c,l,f,g)},a.prototype.computeColumnSpans=function(){for(var c=0;c<this._generatedMappings.length;++c){var l=this._generatedMappings[c];if(c+1<this._generatedMappings.length){var d=this._generatedMappings[c+1];if(l.generatedLine===d.generatedLine){l.lastGeneratedColumn=d.generatedColumn-1;continue}}l.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(c){var l={generatedLine:t.getArg(c,"line"),generatedColumn:t.getArg(c,"column")},d=this._findMapping(l,this._generatedMappings,"generatedLine","generatedColumn",t.compareByGeneratedPositionsDeflated,t.getArg(c,"bias",i.GREATEST_LOWER_BOUND));if(d>=0){var m=this._generatedMappings[d];if(m.generatedLine===l.generatedLine){var f=t.getArg(m,"source",null);f!==null&&(f=this._sources.at(f),f=t.computeSourceURL(this.sourceRoot,f,this._sourceMapURL));var g=t.getArg(m,"name",null);return g!==null&&(g=this._names.at(g)),{source:f,line:t.getArg(m,"originalLine",null),column:t.getArg(m,"originalColumn",null),name:g}}}return{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(c){return c==null}):!1},a.prototype.sourceContentFor=function(c,l){if(!this.sourcesContent)return null;var d=this._findSourceIndex(c);if(d>=0)return this.sourcesContent[d];var m=c;this.sourceRoot!=null&&(m=t.relative(this.sourceRoot,m));var f;if(this.sourceRoot!=null&&(f=t.urlParse(this.sourceRoot))){var g=m.replace(/^file:\/\//,"");if(f.scheme=="file"&&this._sources.has(g))return this.sourcesContent[this._sources.indexOf(g)];if((!f.path||f.path=="/")&&this._sources.has("/"+m))return this.sourcesContent[this._sources.indexOf("/"+m)]}if(l)return null;throw new Error('"'+m+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(c){var l=t.getArg(c,"source");if(l=this._findSourceIndex(l),l<0)return{line:null,column:null,lastColumn:null};var d={source:l,originalLine:t.getArg(c,"line"),originalColumn:t.getArg(c,"column")},m=this._findMapping(d,this._originalMappings,"originalLine","originalColumn",t.compareByOriginalPositions,t.getArg(c,"bias",i.GREATEST_LOWER_BOUND));if(m>=0){var f=this._originalMappings[m];if(f.source===d.source)return{line:t.getArg(f,"generatedLine",null),column:t.getArg(f,"generatedColumn",null),lastColumn:t.getArg(f,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},Ss.BasicSourceMapConsumer=a;function u(c,l){var d=c;typeof c=="string"&&(d=t.parseSourceMapInput(c));var m=t.getArg(d,"version"),f=t.getArg(d,"sections");if(m!=this._version)throw new Error("Unsupported version: "+m);this._sources=new n,this._names=new n;var g={line:-1,column:0};this._sections=f.map(function(b){if(b.url)throw new Error("Support for url field in sections not implemented.");var x=t.getArg(b,"offset"),D=t.getArg(x,"line"),G=t.getArg(x,"column");if(D<g.line||D===g.line&&G<g.column)throw new Error("Section offsets must be ordered and non-overlapping.");return g=x,{generatedOffset:{generatedLine:D+1,generatedColumn:G+1},consumer:new i(t.getArg(b,"map"),l)}})}return u.prototype=Object.create(i.prototype),u.prototype.constructor=i,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var c=[],l=0;l<this._sections.length;l++)for(var d=0;d<this._sections[l].consumer.sources.length;d++)c.push(this._sections[l].consumer.sources[d]);return c}}),u.prototype.originalPositionFor=function(c){var l={generatedLine:t.getArg(c,"line"),generatedColumn:t.getArg(c,"column")},d=e.search(l,this._sections,function(f,g){var b=f.generatedLine-g.generatedOffset.generatedLine;return b||f.generatedColumn-g.generatedOffset.generatedColumn}),m=this._sections[d];return m?m.consumer.originalPositionFor({line:l.generatedLine-(m.generatedOffset.generatedLine-1),column:l.generatedColumn-(m.generatedOffset.generatedLine===l.generatedLine?m.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(c,l){for(var d=0;d<this._sections.length;d++){var m=this._sections[d],f=m.consumer.sourceContentFor(c,!0);if(f)return f}if(l)return null;throw new Error('"'+c+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(c){for(var l=0;l<this._sections.length;l++){var d=this._sections[l];if(d.consumer._findSourceIndex(t.getArg(c,"source"))!==-1){var m=d.consumer.generatedPositionFor(c);if(m){var f={line:m.line+(d.generatedOffset.generatedLine-1),column:m.column+(d.generatedOffset.generatedLine===m.line?d.generatedOffset.generatedColumn-1:0)};return f}}}return{line:null,column:null}},u.prototype._parseMappings=function(c,l){this.__generatedMappings=[],this.__originalMappings=[];for(var d=0;d<this._sections.length;d++)for(var m=this._sections[d],f=m.consumer._generatedMappings,g=0;g<f.length;g++){var b=f[g],x=m.consumer._sources.at(b.source);x=t.computeSourceURL(m.consumer.sourceRoot,x,this._sourceMapURL),this._sources.add(x),x=this._sources.indexOf(x);var D=null;b.name&&(D=m.consumer._names.at(b.name),this._names.add(D),D=this._names.indexOf(D));var G={source:x,generatedLine:b.generatedLine+(m.generatedOffset.generatedLine-1),generatedColumn:b.generatedColumn+(m.generatedOffset.generatedLine===b.generatedLine?m.generatedOffset.generatedColumn-1:0),originalLine:b.originalLine,originalColumn:b.originalColumn,name:D};this.__generatedMappings.push(G),typeof G.originalLine=="number"&&this.__originalMappings.push(G)}s(this.__generatedMappings,t.compareByGeneratedPositionsDeflated),s(this.__originalMappings,t.compareByOriginalPositions)},Ss.IndexedSourceMapConsumer=u,Ss}var So={},kf;function lF(){if(kf)return So;kf=1;var t=oP().SourceMapGenerator,e=bi(),n=/(\r?\n)/,r=10,s="$$$isSourceNode$$$";function i(a,o,u,c,l){this.children=[],this.sourceContents={},this.line=a??null,this.column=o??null,this.source=u??null,this.name=l??null,this[s]=!0,c!=null&&this.add(c)}return i.fromStringWithSourceMap=function(a,o,u){var c=new i,l=a.split(n),d=0,m=function(){var D=k(),G=k()||"";return D+G;function k(){return d<l.length?l[d++]:void 0}},f=1,g=0,b=null;return o.eachMapping(function(D){if(b!==null)if(f<D.generatedLine)x(b,m()),f++,g=0;else{var G=l[d]||"",k=G.substr(0,D.generatedColumn-g);l[d]=G.substr(D.generatedColumn-g),g=D.generatedColumn,x(b,k),b=D;return}for(;f<D.generatedLine;)c.add(m()),f++;if(g<D.generatedColumn){var G=l[d]||"";c.add(G.substr(0,D.generatedColumn)),l[d]=G.substr(D.generatedColumn),g=D.generatedColumn}b=D},this),d<l.length&&(b&&x(b,m()),c.add(l.splice(d).join(""))),o.sources.forEach(function(D){var G=o.sourceContentFor(D);G!=null&&(u!=null&&(D=e.join(u,D)),c.setSourceContent(D,G))}),c;function x(D,G){if(D===null||D.source===void 0)c.add(G);else{var k=u?e.join(u,D.source):D.source;c.add(new i(D.originalLine,D.originalColumn,k,G,D.name))}}},i.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(o){this.add(o)},this);else if(a[s]||typeof a=="string")a&&this.children.push(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.prepend=function(a){if(Array.isArray(a))for(var o=a.length-1;o>=0;o--)this.prepend(a[o]);else if(a[s]||typeof a=="string")this.children.unshift(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.walk=function(a){for(var o,u=0,c=this.children.length;u<c;u++)o=this.children[u],o[s]?o.walk(a):o!==""&&a(o,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(a){var o,u,c=this.children.length;if(c>0){for(o=[],u=0;u<c-1;u++)o.push(this.children[u]),o.push(a);o.push(this.children[u]),this.children=o}return this},i.prototype.replaceRight=function(a,o){var u=this.children[this.children.length-1];return u[s]?u.replaceRight(a,o):typeof u=="string"?this.children[this.children.length-1]=u.replace(a,o):this.children.push("".replace(a,o)),this},i.prototype.setSourceContent=function(a,o){this.sourceContents[e.toSetString(a)]=o},i.prototype.walkSourceContents=function(a){for(var o=0,u=this.children.length;o<u;o++)this.children[o][s]&&this.children[o].walkSourceContents(a);for(var c=Object.keys(this.sourceContents),o=0,u=c.length;o<u;o++)a(e.fromSetString(c[o]),this.sourceContents[c[o]])},i.prototype.toString=function(){var a="";return this.walk(function(o){a+=o}),a},i.prototype.toStringWithSourceMap=function(a){var o={code:"",line:1,column:0},u=new t(a),c=!1,l=null,d=null,m=null,f=null;return this.walk(function(g,b){o.code+=g,b.source!==null&&b.line!==null&&b.column!==null?((l!==b.source||d!==b.line||m!==b.column||f!==b.name)&&u.addMapping({source:b.source,original:{line:b.line,column:b.column},generated:{line:o.line,column:o.column},name:b.name}),l=b.source,d=b.line,m=b.column,f=b.name,c=!0):c&&(u.addMapping({generated:{line:o.line,column:o.column}}),l=null,c=!1);for(var x=0,D=g.length;x<D;x++)g.charCodeAt(x)===r?(o.line++,o.column=0,x+1===D?(l=null,c=!1):c&&u.addMapping({source:b.source,original:{line:b.line,column:b.column},generated:{line:o.line,column:o.column},name:b.name})):o.column++}),this.walkSourceContents(function(g,b){u.setSourceContent(g,b)}),{code:o.code,map:u}},So.SourceNode=i,So}var Bf;function hF(){return Bf||(Bf=1,Ei.SourceMapGenerator=oP().SourceMapGenerator,Ei.SourceMapConsumer=cF().SourceMapConsumer,Ei.SourceNode=lF().SourceNode),Ei}const pF="2.1.0",dF={version:pF};var Lf;function mF(){return Lf||(Lf=1,(function(t){(function(){var e,n,r,s,i,a,o,u,c,l,d,m,f,g,b,x,D,G,k,Z,A,V,E,B,K,R;i=eF(),a=sF(),e=i.Syntax;function j(h){return _t.Expression.hasOwnProperty(h.type)}function W(h){return _t.Statement.hasOwnProperty(h.type)}n={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},r={"??":n.Coalesce,"||":n.LogicalOR,"&&":n.LogicalAND,"|":n.BitwiseOR,"^":n.BitwiseXOR,"&":n.BitwiseAND,"==":n.Equality,"!=":n.Equality,"===":n.Equality,"!==":n.Equality,is:n.Equality,isnt:n.Equality,"<":n.Relational,">":n.Relational,"<=":n.Relational,">=":n.Relational,in:n.Relational,instanceof:n.Relational,"<<":n.BitwiseSHIFT,">>":n.BitwiseSHIFT,">>>":n.BitwiseSHIFT,"+":n.Additive,"-":n.Additive,"*":n.Multiplicative,"%":n.Multiplicative,"/":n.Multiplicative,"**":n.Exponentiation};var _=1,nt=2,ut=4,tt=8,st=16,q=32,$=64,mt=nt|ut,Lt=_|nt,Y=_|nt|ut,St=_,Kt=ut,ye=_|ut,Gt=_,Yt=_|q,ct=0,xt=_|st,ae=_|tt;function ee(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Mt(h,M){var y="";for(M|=0;M>0;M>>>=1,h+=h)M&1&&(y+=h);return y}function Ye(h){return/[\r\n]/g.test(h)}function Tt(h){var M=h.length;return M&&a.code.isLineTerminator(h.charCodeAt(M-1))}function We(h,M){var y;for(y in M)M.hasOwnProperty(y)&&(h[y]=M[y]);return h}function oe(h,M){var y,P;function F(L){return typeof L=="object"&&L instanceof Object&&!(L instanceof RegExp)}for(y in M)M.hasOwnProperty(y)&&(P=M[y],F(P)?F(h[y])?oe(h[y],P):h[y]=oe({},P):h[y]=P);return h}function ne(h){var M,y,P,F,L;if(h!==h)throw new Error("Numeric literal whose value is NaN");if(h<0||h===0&&1/h<0)throw new Error("Numeric literal whose value is negative");if(h===1/0)return c?"null":l?"1e400":"1e+400";if(M=""+h,!l||M.length<3)return M;for(y=M.indexOf("."),!c&&M.charCodeAt(0)===48&&y===1&&(y=0,M=M.slice(1)),P=M,M=M.replace("e+","e"),F=0,(L=P.indexOf("e"))>0&&(F=+P.slice(L+1),P=P.slice(0,L)),y>=0&&(F-=P.length-y-1,P=+(P.slice(0,y)+P.slice(y+1))+""),L=0;P.charCodeAt(P.length+L-1)===48;)--L;return L!==0&&(F-=L,P=P.slice(0,L)),F!==0&&(P+="e"+F),(P.length<M.length||d&&h>1e12&&Math.floor(h)===h&&(P="0x"+h.toString(16)).length<M.length)&&+P===h&&(M=P),M}function be(h,M){return(h&-2)===8232?(M?"u":"\\u")+(h===8232?"2028":"2029"):h===10||h===13?(M?"":"\\")+(h===10?"n":"r"):String.fromCharCode(h)}function Ge(h){var M,y,P,F,L,z,I,Q;if(y=h.toString(),h.source){if(M=y.match(/\/([^/]*)$/),!M)return y;for(P=M[1],y="",I=!1,Q=!1,F=0,L=h.source.length;F<L;++F)z=h.source.charCodeAt(F),Q?(y+=be(z,Q),Q=!1):(I?z===93&&(I=!1):z===47?y+="\\":z===91&&(I=!0),y+=be(z,Q),Q=z===92);return"/"+y+"/"+P}return y}function Ae(h,M){var y;return h===8?"\\b":h===12?"\\f":h===9?"\\t":(y=h.toString(16).toUpperCase(),c||h>255?"\\u"+"0000".slice(y.length)+y:h===0&&!a.code.isDecimalDigit(M)?"\\0":h===11?"\\x0B":"\\x"+"00".slice(y.length)+y)}function De(h){if(h===92)return"\\\\";if(h===10)return"\\n";if(h===13)return"\\r";if(h===8232)return"\\u2028";if(h===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function Se(h){var M,y,P,F;for(F=m==="double"?'"':"'",M=0,y=h.length;M<y;++M)if(P=h.charCodeAt(M),P===39){F='"';break}else if(P===34){F="'";break}else P===92&&++M;return F+h+F}function Jt(h){var M="",y,P,F,L=0,z=0,I,Q;for(y=0,P=h.length;y<P;++y){if(F=h.charCodeAt(y),F===39)++L;else if(F===34)++z;else if(F===47&&c)M+="\\";else if(a.code.isLineTerminator(F)||F===92){M+=De(F);continue}else if(!a.code.isIdentifierPartES5(F)&&(c&&F<32||!c&&!f&&(F<32||F>126))){M+=Ae(F,h.charCodeAt(y+1));continue}M+=String.fromCharCode(F)}if(I=!(m==="double"||m==="auto"&&z<L),Q=I?"'":'"',!(I?L:z))return Q+M+Q;for(h=M,M=Q,y=0,P=h.length;y<P;++y)F=h.charCodeAt(y),(F===39&&I||F===34&&!I)&&(M+="\\"),M+=String.fromCharCode(F);return M+Q}function Ee(h){var M,y,P,F="";for(M=0,y=h.length;M<y;++M)P=h[M],F+=Array.isArray(P)?Ee(P):P;return F}function Pt(h,M){if(!V)return Array.isArray(h)?Ee(h):h;if(M==null){if(h instanceof s)return h;M={}}return M.loc==null?new s(null,null,V,h,M.name||null):new s(M.loc.start.line,M.loc.start.column,V===!0?M.loc.source||null:V,h,M.name||null)}function Vt(){return b||" "}function et(h,M){var y,P,F,L;return y=Pt(h).toString(),y.length===0?[M]:(P=Pt(M).toString(),P.length===0?[h]:(F=y.charCodeAt(y.length-1),L=P.charCodeAt(0),(F===43||F===45)&&F===L||a.code.isIdentifierPartES5(F)&&a.code.isIdentifierPartES5(L)||F===47&&L===105?[h,Vt(),M]:a.code.isWhiteSpace(F)||a.code.isLineTerminator(F)||a.code.isWhiteSpace(L)||a.code.isLineTerminator(L)?[h,M]:[h,b,M]))}function It(h){return[o,h]}function kt(h){var M;M=o,o+=u,h(o),o=M}function dn(h){var M;for(M=h.length-1;M>=0&&!a.code.isLineTerminator(h.charCodeAt(M));--M);return h.length-1-M}function Gn(h,M){var y,P,F,L,z,I,Q,ft;for(y=h.split(/\r\n|[\r\n]/),I=Number.MAX_VALUE,P=1,F=y.length;P<F;++P){for(L=y[P],z=0;z<L.length&&a.code.isWhiteSpace(L.charCodeAt(z));)++z;I>z&&(I=z)}for(typeof M<"u"?(Q=o,y[1][I]==="*"&&(M+=" "),o=M):(I&1&&--I,Q=o),P=1,F=y.length;P<F;++P)ft=Pt(It(y[P].slice(I))),y[P]=V?ft.join(""):ft;return o=Q,y.join(`
`)}function Fe(h,M){if(h.type==="Line"){if(Tt(h.value))return"//"+h.value;var y="//"+h.value;return B||(y+=`
`),y}return Z.format.indent.adjustMultilineComment&&/[\n\r]/.test(h.value)?Gn("/*"+h.value+"*/",M):"/*"+h.value+"*/"}function Sn(h,M){var y,P,F,L,z,I,Q,ft,Wt,ge,Ft,qe,He,pe;if(h.leadingComments&&h.leadingComments.length>0){if(L=M,B){for(F=h.leadingComments[0],M=[],ft=F.extendedRange,Wt=F.range,Ft=E.substring(ft[0],Wt[0]),pe=(Ft.match(/\n/g)||[]).length,pe>0?(M.push(Mt(`
`,pe)),M.push(It(Fe(F)))):(M.push(Ft),M.push(Fe(F))),ge=Wt,y=1,P=h.leadingComments.length;y<P;y++)F=h.leadingComments[y],Wt=F.range,qe=E.substring(ge[1],Wt[0]),pe=(qe.match(/\n/g)||[]).length,M.push(Mt(`
`,pe)),M.push(It(Fe(F))),ge=Wt;He=E.substring(Wt[1],ft[1]),pe=(He.match(/\n/g)||[]).length,M.push(Mt(`
`,pe))}else for(F=h.leadingComments[0],M=[],G&&h.type===e.Program&&h.body.length===0&&M.push(`
`),M.push(Fe(F)),Tt(Pt(M).toString())||M.push(`
`),y=1,P=h.leadingComments.length;y<P;++y)F=h.leadingComments[y],Q=[Fe(F)],Tt(Pt(Q).toString())||Q.push(`
`),M.push(It(Q));M.push(It(L))}if(h.trailingComments)if(B)F=h.trailingComments[0],ft=F.extendedRange,Wt=F.range,Ft=E.substring(ft[0],Wt[0]),pe=(Ft.match(/\n/g)||[]).length,pe>0?(M.push(Mt(`
`,pe)),M.push(It(Fe(F)))):(M.push(Ft),M.push(Fe(F)));else for(z=!Tt(Pt(M).toString()),I=Mt(" ",dn(Pt([o,M,u]).toString())),y=0,P=h.trailingComments.length;y<P;++y)F=h.trailingComments[y],z?(y===0?M=[M,u]:M=[M,I],M.push(Fe(F,I))):M=[M,It(Fe(F))],y!==P-1&&!Tt(Pt(M).toString())&&(M=[M,`
`]);return M}function Ue(h,M,y){var P,F=0;for(P=h;P<M;P++)E[P]===`
`&&F++;for(P=1;P<F;P++)y.push(g)}function Ot(h,M,y){return M<y?["(",h,")"]:h}function Nn(h){var M,y,P;for(P=h.split(/\r\n|\n/),M=1,y=P.length;M<y;M++)P[M]=g+o+P[M];return P}function mn(h,M){var y,P,F;return y=h[Z.verbatim],typeof y=="string"?P=Ot(Nn(y),n.Sequence,M):(P=Nn(y.content),F=y.precedence!=null?y.precedence:n.Sequence,P=Ot(P,F,M)),Pt(P,h)}function _t(){}_t.prototype.maybeBlock=function(h,M){var y,P,F=this;return P=!Z.comment||!h.leadingComments,h.type===e.BlockStatement&&P?[b,this.generateStatement(h,M)]:h.type===e.EmptyStatement&&P?";":(kt(function(){y=[g,It(F.generateStatement(h,M))]}),y)},_t.prototype.maybeBlockSuffix=function(h,M){var y=Tt(Pt(M).toString());return h.type===e.BlockStatement&&(!Z.comment||!h.leadingComments)&&!y?[M,b]:y?[M,o]:[M,g,o]};function ue(h){return Pt(h.name,h)}function _e(h,M){return h.async?"async"+(M?Vt():b):""}function Qe(h){var M=h.generator&&!Z.moz.starlessGenerator;return M?"*"+b:""}function Kn(h){var M=h.value,y="";return M.async&&(y+=_e(M,!h.computed)),M.generator&&(y+=Qe(M)?"*":""),y}_t.prototype.generatePattern=function(h,M,y){return h.type===e.Identifier?ue(h):this.generateExpression(h,M,y)},_t.prototype.generateFunctionParams=function(h){var M,y,P,F;if(F=!1,h.type===e.ArrowFunctionExpression&&!h.rest&&(!h.defaults||h.defaults.length===0)&&h.params.length===1&&h.params[0].type===e.Identifier)P=[_e(h,!0),ue(h.params[0])];else{for(P=h.type===e.ArrowFunctionExpression?[_e(h,!1)]:[],P.push("("),h.defaults&&(F=!0),M=0,y=h.params.length;M<y;++M)F&&h.defaults[M]?P.push(this.generateAssignment(h.params[M],h.defaults[M],"=",n.Assignment,Y)):P.push(this.generatePattern(h.params[M],n.Assignment,Y)),M+1<y&&P.push(","+b);h.rest&&(h.params.length&&P.push(","+b),P.push("..."),P.push(ue(h.rest))),P.push(")")}return P},_t.prototype.generateFunctionBody=function(h){var M,y;return M=this.generateFunctionParams(h),h.type===e.ArrowFunctionExpression&&(M.push(b),M.push("=>")),h.expression?(M.push(b),y=this.generateExpression(h.body,n.Assignment,Y),y.toString().charAt(0)==="{"&&(y=["(",y,")"]),M.push(y)):M.push(this.maybeBlock(h.body,ae)),M},_t.prototype.generateIterationForStatement=function(h,M,y){var P=["for"+(M.await?Vt()+"await":"")+b+"("],F=this;return kt(function(){M.left.type===e.VariableDeclaration?kt(function(){P.push(M.left.kind+Vt()),P.push(F.generateStatement(M.left.declarations[0],ct))}):P.push(F.generateExpression(M.left,n.Call,Y)),P=et(P,h),P=[et(P,F.generateExpression(M.right,n.Assignment,Y)),")"]}),P.push(this.maybeBlock(M.body,y)),P},_t.prototype.generatePropertyKey=function(h,M){var y=[];return M&&y.push("["),y.push(this.generateExpression(h,n.Assignment,Y)),M&&y.push("]"),y},_t.prototype.generateAssignment=function(h,M,y,P,F){return n.Assignment<P&&(F|=_),Ot([this.generateExpression(h,n.Call,F),b+y+b,this.generateExpression(M,n.Assignment,F)],n.Assignment,P)},_t.prototype.semicolon=function(h){return!D&&h&q?"":";"},_t.Statement={BlockStatement:function(h,M){var y,P,F=["{",g],L=this;return kt(function(){h.body.length===0&&B&&(y=h.range,y[1]-y[0]>2&&(P=E.substring(y[0]+1,y[1]-1),P[0]===`
`&&(F=["{"]),F.push(P)));var z,I,Q,ft;for(ft=Gt,M&tt&&(ft|=st),z=0,I=h.body.length;z<I;++z)B&&(z===0&&(h.body[0].leadingComments&&(y=h.body[0].leadingComments[0].extendedRange,P=E.substring(y[0],y[1]),P[0]===`
`&&(F=["{"])),h.body[0].leadingComments||Ue(h.range[0],h.body[0].range[0],F)),z>0&&!h.body[z-1].trailingComments&&!h.body[z].leadingComments&&Ue(h.body[z-1].range[1],h.body[z].range[0],F)),z===I-1&&(ft|=q),h.body[z].leadingComments&&B?Q=L.generateStatement(h.body[z],ft):Q=It(L.generateStatement(h.body[z],ft)),F.push(Q),Tt(Pt(Q).toString())||B&&z<I-1&&h.body[z+1].leadingComments||F.push(g),B&&z===I-1&&(h.body[z].trailingComments||Ue(h.body[z].range[1],h.range[1],F))}),F.push(It("}")),F},BreakStatement:function(h,M){return h.label?"break "+h.label.name+this.semicolon(M):"break"+this.semicolon(M)},ContinueStatement:function(h,M){return h.label?"continue "+h.label.name+this.semicolon(M):"continue"+this.semicolon(M)},ClassBody:function(h,M){var y=["{",g],P=this;return kt(function(F){var L,z;for(L=0,z=h.body.length;L<z;++L)y.push(F),y.push(P.generateExpression(h.body[L],n.Sequence,Y)),L+1<z&&y.push(g)}),Tt(Pt(y).toString())||y.push(g),y.push(o),y.push("}"),y},ClassDeclaration:function(h,M){var y,P;return y=["class"],h.id&&(y=et(y,this.generateExpression(h.id,n.Sequence,Y))),h.superClass&&(P=et("extends",this.generateExpression(h.superClass,n.Unary,Y)),y=et(y,P)),y.push(b),y.push(this.generateStatement(h.body,Yt)),y},DirectiveStatement:function(h,M){return Z.raw&&h.raw?h.raw+this.semicolon(M):Se(h.directive)+this.semicolon(M)},DoWhileStatement:function(h,M){var y=et("do",this.maybeBlock(h.body,Gt));return y=this.maybeBlockSuffix(h.body,y),et(y,["while"+b+"(",this.generateExpression(h.test,n.Sequence,Y),")"+this.semicolon(M)])},CatchClause:function(h,M){var y,P=this;return kt(function(){var F;h.param?(y=["catch"+b+"(",P.generateExpression(h.param,n.Sequence,Y),")"],h.guard&&(F=P.generateExpression(h.guard,n.Sequence,Y),y.splice(2,0," if ",F))):y=["catch"]}),y.push(this.maybeBlock(h.body,Gt)),y},DebuggerStatement:function(h,M){return"debugger"+this.semicolon(M)},EmptyStatement:function(h,M){return";"},ExportDefaultDeclaration:function(h,M){var y=["export"],P;return P=M&q?Yt:Gt,y=et(y,"default"),W(h.declaration)?y=et(y,this.generateStatement(h.declaration,P)):y=et(y,this.generateExpression(h.declaration,n.Assignment,Y)+this.semicolon(M)),y},ExportNamedDeclaration:function(h,M){var y=["export"],P,F=this;return P=M&q?Yt:Gt,h.declaration?et(y,this.generateStatement(h.declaration,P)):(h.specifiers&&(h.specifiers.length===0?y=et(y,"{"+b+"}"):h.specifiers[0].type===e.ExportBatchSpecifier?y=et(y,this.generateExpression(h.specifiers[0],n.Sequence,Y)):(y=et(y,"{"),kt(function(L){var z,I;for(y.push(g),z=0,I=h.specifiers.length;z<I;++z)y.push(L),y.push(F.generateExpression(h.specifiers[z],n.Sequence,Y)),z+1<I&&y.push(","+g)}),Tt(Pt(y).toString())||y.push(g),y.push(o+"}")),h.source?y=et(y,["from"+b,this.generateExpression(h.source,n.Sequence,Y),this.semicolon(M)]):y.push(this.semicolon(M))),y)},ExportAllDeclaration:function(h,M){return["export"+b,"*"+b,"from"+b,this.generateExpression(h.source,n.Sequence,Y),this.semicolon(M)]},ExpressionStatement:function(h,M){var y,P;function F(I){var Q;return I.slice(0,5)!=="class"?!1:(Q=I.charCodeAt(5),Q===123||a.code.isWhiteSpace(Q)||a.code.isLineTerminator(Q))}function L(I){var Q;return I.slice(0,8)!=="function"?!1:(Q=I.charCodeAt(8),Q===40||a.code.isWhiteSpace(Q)||Q===42||a.code.isLineTerminator(Q))}function z(I){var Q,ft,Wt;if(I.slice(0,5)!=="async"||!a.code.isWhiteSpace(I.charCodeAt(5)))return!1;for(ft=6,Wt=I.length;ft<Wt&&a.code.isWhiteSpace(I.charCodeAt(ft));++ft);return ft===Wt||I.slice(ft,ft+8)!=="function"?!1:(Q=I.charCodeAt(ft+8),Q===40||a.code.isWhiteSpace(Q)||Q===42||a.code.isLineTerminator(Q))}return y=[this.generateExpression(h.expression,n.Sequence,Y)],P=Pt(y).toString(),P.charCodeAt(0)===123||F(P)||L(P)||z(P)||k&&M&st&&h.expression.type===e.Literal&&typeof h.expression.value=="string"?y=["(",y,")"+this.semicolon(M)]:y.push(this.semicolon(M)),y},ImportDeclaration:function(h,M){var y,P,F=this;return h.specifiers.length===0?["import",b,this.generateExpression(h.source,n.Sequence,Y),this.semicolon(M)]:(y=["import"],P=0,h.specifiers[P].type===e.ImportDefaultSpecifier&&(y=et(y,[this.generateExpression(h.specifiers[P],n.Sequence,Y)]),++P),h.specifiers[P]&&(P!==0&&y.push(","),h.specifiers[P].type===e.ImportNamespaceSpecifier?y=et(y,[b,this.generateExpression(h.specifiers[P],n.Sequence,Y)]):(y.push(b+"{"),h.specifiers.length-P===1?(y.push(b),y.push(this.generateExpression(h.specifiers[P],n.Sequence,Y)),y.push(b+"}"+b)):(kt(function(L){var z,I;for(y.push(g),z=P,I=h.specifiers.length;z<I;++z)y.push(L),y.push(F.generateExpression(h.specifiers[z],n.Sequence,Y)),z+1<I&&y.push(","+g)}),Tt(Pt(y).toString())||y.push(g),y.push(o+"}"+b)))),y=et(y,["from"+b,this.generateExpression(h.source,n.Sequence,Y),this.semicolon(M)]),y)},VariableDeclarator:function(h,M){var y=M&_?Y:mt;return h.init?[this.generateExpression(h.id,n.Assignment,y),b,"=",b,this.generateExpression(h.init,n.Assignment,y)]:this.generatePattern(h.id,n.Assignment,y)},VariableDeclaration:function(h,M){var y,P,F,L,z,I=this;y=[h.kind],z=M&_?Gt:ct;function Q(){for(L=h.declarations[0],Z.comment&&L.leadingComments?(y.push(`
`),y.push(It(I.generateStatement(L,z)))):(y.push(Vt()),y.push(I.generateStatement(L,z))),P=1,F=h.declarations.length;P<F;++P)L=h.declarations[P],Z.comment&&L.leadingComments?(y.push(","+g),y.push(It(I.generateStatement(L,z)))):(y.push(","+b),y.push(I.generateStatement(L,z)))}return h.declarations.length>1?kt(Q):Q(),y.push(this.semicolon(M)),y},ThrowStatement:function(h,M){return[et("throw",this.generateExpression(h.argument,n.Sequence,Y)),this.semicolon(M)]},TryStatement:function(h,M){var y,P,F,L;if(y=["try",this.maybeBlock(h.block,Gt)],y=this.maybeBlockSuffix(h.block,y),h.handlers)for(P=0,F=h.handlers.length;P<F;++P)y=et(y,this.generateStatement(h.handlers[P],Gt)),(h.finalizer||P+1!==F)&&(y=this.maybeBlockSuffix(h.handlers[P].body,y));else{for(L=h.guardedHandlers||[],P=0,F=L.length;P<F;++P)y=et(y,this.generateStatement(L[P],Gt)),(h.finalizer||P+1!==F)&&(y=this.maybeBlockSuffix(L[P].body,y));if(h.handler)if(Array.isArray(h.handler))for(P=0,F=h.handler.length;P<F;++P)y=et(y,this.generateStatement(h.handler[P],Gt)),(h.finalizer||P+1!==F)&&(y=this.maybeBlockSuffix(h.handler[P].body,y));else y=et(y,this.generateStatement(h.handler,Gt)),h.finalizer&&(y=this.maybeBlockSuffix(h.handler.body,y))}return h.finalizer&&(y=et(y,["finally",this.maybeBlock(h.finalizer,Gt)])),y},SwitchStatement:function(h,M){var y,P,F,L,z,I=this;if(kt(function(){y=["switch"+b+"(",I.generateExpression(h.discriminant,n.Sequence,Y),")"+b+"{"+g]}),h.cases)for(z=Gt,F=0,L=h.cases.length;F<L;++F)F===L-1&&(z|=q),P=It(this.generateStatement(h.cases[F],z)),y.push(P),Tt(Pt(P).toString())||y.push(g);return y.push(It("}")),y},SwitchCase:function(h,M){var y,P,F,L,z,I=this;return kt(function(){for(h.test?y=[et("case",I.generateExpression(h.test,n.Sequence,Y)),":"]:y=["default:"],F=0,L=h.consequent.length,L&&h.consequent[0].type===e.BlockStatement&&(P=I.maybeBlock(h.consequent[0],Gt),y.push(P),F=1),F!==L&&!Tt(Pt(y).toString())&&y.push(g),z=Gt;F<L;++F)F===L-1&&M&q&&(z|=q),P=It(I.generateStatement(h.consequent[F],z)),y.push(P),F+1!==L&&!Tt(Pt(P).toString())&&y.push(g)}),y},IfStatement:function(h,M){var y,P,F,L=this;return kt(function(){y=["if"+b+"(",L.generateExpression(h.test,n.Sequence,Y),")"]}),F=M&q,P=Gt,F&&(P|=q),h.alternate?(y.push(this.maybeBlock(h.consequent,Gt)),y=this.maybeBlockSuffix(h.consequent,y),h.alternate.type===e.IfStatement?y=et(y,["else ",this.generateStatement(h.alternate,P)]):y=et(y,et("else",this.maybeBlock(h.alternate,P)))):y.push(this.maybeBlock(h.consequent,P)),y},ForStatement:function(h,M){var y,P=this;return kt(function(){y=["for"+b+"("],h.init?h.init.type===e.VariableDeclaration?y.push(P.generateStatement(h.init,ct)):(y.push(P.generateExpression(h.init,n.Sequence,mt)),y.push(";")):y.push(";"),h.test&&(y.push(b),y.push(P.generateExpression(h.test,n.Sequence,Y))),y.push(";"),h.update&&(y.push(b),y.push(P.generateExpression(h.update,n.Sequence,Y))),y.push(")")}),y.push(this.maybeBlock(h.body,M&q?Yt:Gt)),y},ForInStatement:function(h,M){return this.generateIterationForStatement("in",h,M&q?Yt:Gt)},ForOfStatement:function(h,M){return this.generateIterationForStatement("of",h,M&q?Yt:Gt)},LabeledStatement:function(h,M){return[h.label.name+":",this.maybeBlock(h.body,M&q?Yt:Gt)]},Program:function(h,M){var y,P,F,L,z;for(L=h.body.length,y=[G&&L>0?`
`:""],z=xt,F=0;F<L;++F)!G&&F===L-1&&(z|=q),B&&(F===0&&(h.body[0].leadingComments||Ue(h.range[0],h.body[F].range[0],y)),F>0&&!h.body[F-1].trailingComments&&!h.body[F].leadingComments&&Ue(h.body[F-1].range[1],h.body[F].range[0],y)),P=It(this.generateStatement(h.body[F],z)),y.push(P),F+1<L&&!Tt(Pt(P).toString())&&(B&&h.body[F+1].leadingComments||y.push(g)),B&&F===L-1&&(h.body[F].trailingComments||Ue(h.body[F].range[1],h.range[1],y));return y},FunctionDeclaration:function(h,M){return[_e(h,!0),"function",Qe(h)||Vt(),h.id?ue(h.id):"",this.generateFunctionBody(h)]},ReturnStatement:function(h,M){return h.argument?[et("return",this.generateExpression(h.argument,n.Sequence,Y)),this.semicolon(M)]:["return"+this.semicolon(M)]},WhileStatement:function(h,M){var y,P=this;return kt(function(){y=["while"+b+"(",P.generateExpression(h.test,n.Sequence,Y),")"]}),y.push(this.maybeBlock(h.body,M&q?Yt:Gt)),y},WithStatement:function(h,M){var y,P=this;return kt(function(){y=["with"+b+"(",P.generateExpression(h.object,n.Sequence,Y),")"]}),y.push(this.maybeBlock(h.body,M&q?Yt:Gt)),y}},We(_t.prototype,_t.Statement),_t.Expression={SequenceExpression:function(h,M,y){var P,F,L;for(n.Sequence<M&&(y|=_),P=[],F=0,L=h.expressions.length;F<L;++F)P.push(this.generateExpression(h.expressions[F],n.Assignment,y)),F+1<L&&P.push(","+b);return Ot(P,n.Sequence,M)},AssignmentExpression:function(h,M,y){return this.generateAssignment(h.left,h.right,h.operator,M,y)},ArrowFunctionExpression:function(h,M,y){return Ot(this.generateFunctionBody(h),n.ArrowFunction,M)},ConditionalExpression:function(h,M,y){return n.Conditional<M&&(y|=_),Ot([this.generateExpression(h.test,n.Coalesce,y),b+"?"+b,this.generateExpression(h.consequent,n.Assignment,y),b+":"+b,this.generateExpression(h.alternate,n.Assignment,y)],n.Conditional,M)},LogicalExpression:function(h,M,y){return h.operator==="??"&&(y|=$),this.BinaryExpression(h,M,y)},BinaryExpression:function(h,M,y){var P,F,L,z,I,Q;return z=r[h.operator],F=h.operator==="**"?n.Postfix:z,L=h.operator==="**"?z:z+1,z<M&&(y|=_),I=this.generateExpression(h.left,F,y),Q=I.toString(),Q.charCodeAt(Q.length-1)===47&&a.code.isIdentifierPartES5(h.operator.charCodeAt(0))?P=[I,Vt(),h.operator]:P=et(I,h.operator),I=this.generateExpression(h.right,L,y),h.operator==="/"&&I.toString().charAt(0)==="/"||h.operator.slice(-1)==="<"&&I.toString().slice(0,3)==="!--"?(P.push(Vt()),P.push(I)):P=et(P,I),h.operator==="in"&&!(y&_)?["(",P,")"]:(h.operator==="||"||h.operator==="&&")&&y&$?["(",P,")"]:Ot(P,z,M)},CallExpression:function(h,M,y){var P,F,L;for(P=[this.generateExpression(h.callee,n.Call,Lt)],h.optional&&P.push("?."),P.push("("),F=0,L=h.arguments.length;F<L;++F)P.push(this.generateExpression(h.arguments[F],n.Assignment,Y)),F+1<L&&P.push(","+b);return P.push(")"),y&nt?Ot(P,n.Call,M):["(",P,")"]},ChainExpression:function(h,M,y){n.OptionalChaining<M&&(y|=nt);var P=this.generateExpression(h.expression,n.OptionalChaining,y);return Ot(P,n.OptionalChaining,M)},NewExpression:function(h,M,y){var P,F,L,z,I;if(F=h.arguments.length,I=y&ut&&!x&&F===0?ye:St,P=et("new",this.generateExpression(h.callee,n.New,I)),!(y&ut)||x||F>0){for(P.push("("),L=0,z=F;L<z;++L)P.push(this.generateExpression(h.arguments[L],n.Assignment,Y)),L+1<z&&P.push(","+b);P.push(")")}return Ot(P,n.New,M)},MemberExpression:function(h,M,y){var P,F;return P=[this.generateExpression(h.object,n.Call,y&nt?Lt:St)],h.computed?(h.optional&&P.push("?."),P.push("["),P.push(this.generateExpression(h.property,n.Sequence,y&nt?Y:ye)),P.push("]")):(!h.optional&&h.object.type===e.Literal&&typeof h.object.value=="number"&&(F=Pt(P).toString(),F.indexOf(".")<0&&!/[eExX]/.test(F)&&a.code.isDecimalDigit(F.charCodeAt(F.length-1))&&!(F.length>=2&&F.charCodeAt(0)===48)&&P.push(" ")),P.push(h.optional?"?.":"."),P.push(ue(h.property))),Ot(P,n.Member,M)},MetaProperty:function(h,M,y){var P;return P=[],P.push(typeof h.meta=="string"?h.meta:ue(h.meta)),P.push("."),P.push(typeof h.property=="string"?h.property:ue(h.property)),Ot(P,n.Member,M)},UnaryExpression:function(h,M,y){var P,F,L,z,I;return F=this.generateExpression(h.argument,n.Unary,Y),b===""?P=et(h.operator,F):(P=[h.operator],h.operator.length>2?P=et(P,F):(z=Pt(P).toString(),I=z.charCodeAt(z.length-1),L=F.toString().charCodeAt(0),((I===43||I===45)&&I===L||a.code.isIdentifierPartES5(I)&&a.code.isIdentifierPartES5(L))&&P.push(Vt()),P.push(F))),Ot(P,n.Unary,M)},YieldExpression:function(h,M,y){var P;return h.delegate?P="yield*":P="yield",h.argument&&(P=et(P,this.generateExpression(h.argument,n.Yield,Y))),Ot(P,n.Yield,M)},AwaitExpression:function(h,M,y){var P=et(h.all?"await*":"await",this.generateExpression(h.argument,n.Await,Y));return Ot(P,n.Await,M)},UpdateExpression:function(h,M,y){return h.prefix?Ot([h.operator,this.generateExpression(h.argument,n.Unary,Y)],n.Unary,M):Ot([this.generateExpression(h.argument,n.Postfix,Y),h.operator],n.Postfix,M)},FunctionExpression:function(h,M,y){var P=[_e(h,!0),"function"];return h.id?(P.push(Qe(h)||Vt()),P.push(ue(h.id))):P.push(Qe(h)||b),P.push(this.generateFunctionBody(h)),P},ArrayPattern:function(h,M,y){return this.ArrayExpression(h,M,y,!0)},ArrayExpression:function(h,M,y,P){var F,L,z=this;return h.elements.length?(L=P?!1:h.elements.length>1,F=["[",L?g:""],kt(function(I){var Q,ft;for(Q=0,ft=h.elements.length;Q<ft;++Q)h.elements[Q]?(F.push(L?I:""),F.push(z.generateExpression(h.elements[Q],n.Assignment,Y))):(L&&F.push(I),Q+1===ft&&F.push(",")),Q+1<ft&&F.push(","+(L?g:b))}),L&&!Tt(Pt(F).toString())&&F.push(g),F.push(L?o:""),F.push("]"),F):"[]"},RestElement:function(h,M,y){return"..."+this.generatePattern(h.argument)},ClassExpression:function(h,M,y){var P,F;return P=["class"],h.id&&(P=et(P,this.generateExpression(h.id,n.Sequence,Y))),h.superClass&&(F=et("extends",this.generateExpression(h.superClass,n.Unary,Y)),P=et(P,F)),P.push(b),P.push(this.generateStatement(h.body,Yt)),P},MethodDefinition:function(h,M,y){var P,F;return h.static?P=["static"+b]:P=[],h.kind==="get"||h.kind==="set"?F=[et(h.kind,this.generatePropertyKey(h.key,h.computed)),this.generateFunctionBody(h.value)]:F=[Kn(h),this.generatePropertyKey(h.key,h.computed),this.generateFunctionBody(h.value)],et(P,F)},Property:function(h,M,y){return h.kind==="get"||h.kind==="set"?[h.kind,Vt(),this.generatePropertyKey(h.key,h.computed),this.generateFunctionBody(h.value)]:h.shorthand?h.value.type==="AssignmentPattern"?this.AssignmentPattern(h.value,n.Sequence,Y):this.generatePropertyKey(h.key,h.computed):h.method?[Kn(h),this.generatePropertyKey(h.key,h.computed),this.generateFunctionBody(h.value)]:[this.generatePropertyKey(h.key,h.computed),":"+b,this.generateExpression(h.value,n.Assignment,Y)]},ObjectExpression:function(h,M,y){var P,F,L,z=this;return h.properties.length?(P=h.properties.length>1,kt(function(){L=z.generateExpression(h.properties[0],n.Sequence,Y)}),!P&&!Ye(Pt(L).toString())?["{",b,L,b,"}"]:(kt(function(I){var Q,ft;if(F=["{",g,I,L],P)for(F.push(","+g),Q=1,ft=h.properties.length;Q<ft;++Q)F.push(I),F.push(z.generateExpression(h.properties[Q],n.Sequence,Y)),Q+1<ft&&F.push(","+g)}),Tt(Pt(F).toString())||F.push(g),F.push(o),F.push("}"),F)):"{}"},AssignmentPattern:function(h,M,y){return this.generateAssignment(h.left,h.right,"=",M,y)},ObjectPattern:function(h,M,y){var P,F,L,z,I,Q=this;if(!h.properties.length)return"{}";if(z=!1,h.properties.length===1)I=h.properties[0],I.type===e.Property&&I.value.type!==e.Identifier&&(z=!0);else for(F=0,L=h.properties.length;F<L;++F)if(I=h.properties[F],I.type===e.Property&&!I.shorthand){z=!0;break}return P=["{",z?g:""],kt(function(ft){var Wt,ge;for(Wt=0,ge=h.properties.length;Wt<ge;++Wt)P.push(z?ft:""),P.push(Q.generateExpression(h.properties[Wt],n.Sequence,Y)),Wt+1<ge&&P.push(","+(z?g:b))}),z&&!Tt(Pt(P).toString())&&P.push(g),P.push(z?o:""),P.push("}"),P},ThisExpression:function(h,M,y){return"this"},Super:function(h,M,y){return"super"},Identifier:function(h,M,y){return ue(h)},ImportDefaultSpecifier:function(h,M,y){return ue(h.id||h.local)},ImportNamespaceSpecifier:function(h,M,y){var P=["*"],F=h.id||h.local;return F&&P.push(b+"as"+Vt()+ue(F)),P},ImportSpecifier:function(h,M,y){var P=h.imported,F=[P.name],L=h.local;return L&&L.name!==P.name&&F.push(Vt()+"as"+Vt()+ue(L)),F},ExportSpecifier:function(h,M,y){var P=h.local,F=[P.name],L=h.exported;return L&&L.name!==P.name&&F.push(Vt()+"as"+Vt()+ue(L)),F},Literal:function(h,M,y){var P;if(h.hasOwnProperty("raw")&&A&&Z.raw)try{if(P=A(h.raw).body[0].expression,P.type===e.Literal&&P.value===h.value)return h.raw}catch{}return h.regex?"/"+h.regex.pattern+"/"+h.regex.flags:typeof h.value=="bigint"?h.value.toString()+"n":h.bigint?h.bigint+"n":h.value===null?"null":typeof h.value=="string"?Jt(h.value):typeof h.value=="number"?ne(h.value):typeof h.value=="boolean"?h.value?"true":"false":Ge(h.value)},GeneratorExpression:function(h,M,y){return this.ComprehensionExpression(h,M,y)},ComprehensionExpression:function(h,M,y){var P,F,L,z,I=this;return P=h.type===e.GeneratorExpression?["("]:["["],Z.moz.comprehensionExpressionStartsWithAssignment&&(z=this.generateExpression(h.body,n.Assignment,Y),P.push(z)),h.blocks&&kt(function(){for(F=0,L=h.blocks.length;F<L;++F)z=I.generateExpression(h.blocks[F],n.Sequence,Y),F>0||Z.moz.comprehensionExpressionStartsWithAssignment?P=et(P,z):P.push(z)}),h.filter&&(P=et(P,"if"+b),z=this.generateExpression(h.filter,n.Sequence,Y),P=et(P,["(",z,")"])),Z.moz.comprehensionExpressionStartsWithAssignment||(z=this.generateExpression(h.body,n.Assignment,Y),P=et(P,z)),P.push(h.type===e.GeneratorExpression?")":"]"),P},ComprehensionBlock:function(h,M,y){var P;return h.left.type===e.VariableDeclaration?P=[h.left.kind,Vt(),this.generateStatement(h.left.declarations[0],ct)]:P=this.generateExpression(h.left,n.Call,Y),P=et(P,h.of?"of":"in"),P=et(P,this.generateExpression(h.right,n.Sequence,Y)),["for"+b+"(",P,")"]},SpreadElement:function(h,M,y){return["...",this.generateExpression(h.argument,n.Assignment,Y)]},TaggedTemplateExpression:function(h,M,y){var P=Lt;y&nt||(P=St);var F=[this.generateExpression(h.tag,n.Call,P),this.generateExpression(h.quasi,n.Primary,Kt)];return Ot(F,n.TaggedTemplate,M)},TemplateElement:function(h,M,y){return h.value.raw},TemplateLiteral:function(h,M,y){var P,F,L;for(P=["`"],F=0,L=h.quasis.length;F<L;++F)P.push(this.generateExpression(h.quasis[F],n.Primary,Y)),F+1<L&&(P.push("${"+b),P.push(this.generateExpression(h.expressions[F],n.Sequence,Y)),P.push(b+"}"));return P.push("`"),P},ModuleSpecifier:function(h,M,y){return this.Literal(h,M,y)},ImportExpression:function(h,M,y){return Ot(["import(",this.generateExpression(h.source,n.Assignment,Y),")"],n.Call,M)}},We(_t.prototype,_t.Expression),_t.prototype.generateExpression=function(h,M,y){var P,F;return F=h.type||e.Property,Z.verbatim&&h.hasOwnProperty(Z.verbatim)?mn(h,M):(P=this[F](h,M,y),Z.comment&&(P=Sn(h,P)),Pt(P,h))},_t.prototype.generateStatement=function(h,M){var y,P;return y=this[h.type](h,M),Z.comment&&(y=Sn(h,y)),P=Pt(y).toString(),h.type===e.Program&&!G&&g===""&&P.charAt(P.length-1)===`
`&&(y=V?Pt(y).replaceRight(/\s+$/,""):P.replace(/\s+$/,"")),Pt(y,h)};function Cr(h){var M;if(M=new _t,W(h))return M.generateStatement(h,Gt);if(j(h))return M.generateExpression(h,n.Sequence,Y);throw new Error("Unknown node type: "+h.type)}function ar(h,M){var y=ee(),P,F;return M!=null?(typeof M.indent=="string"&&(y.format.indent.style=M.indent),typeof M.base=="number"&&(y.format.indent.base=M.base),M=oe(y,M),u=M.format.indent.style,typeof M.base=="string"?o=M.base:o=Mt(u,M.format.indent.base)):(M=y,u=M.format.indent.style,o=Mt(u,M.format.indent.base)),c=M.format.json,l=M.format.renumber,d=c?!1:M.format.hexadecimal,m=c?"double":M.format.quotes,f=M.format.escapeless,g=M.format.newline,b=M.format.space,M.format.compact&&(g=b=u=o=""),x=M.format.parentheses,D=M.format.semicolons,G=M.format.safeConcatenation,k=M.directive,A=c?null:M.parse,V=M.sourceMap,E=M.sourceCode,B=M.format.preserveBlankLines&&E!==null,Z=M,V&&(t.browser?s=$D.sourceMap.SourceNode:s=hF().SourceNode),P=Cr(h),V?(F=P.toStringWithSourceMap({file:M.file,sourceRoot:M.sourceMapRoot}),M.sourceContent&&F.map.setSourceContent(M.sourceMap,M.sourceContent),M.sourceMapWithCode?F:F.map.toString()):(F={code:P.toString(),map:null},M.sourceMapWithCode?F:F.code)}K={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},R=ee().format,t.version=dF.version,t.generate=ar,t.attachComments=i.attachComments,t.Precedence=oe({},n),t.browser=!1,t.FORMAT_MINIFY=K,t.FORMAT_DEFAULTS=R})()})(df)),df}var fF=mF();const yF=rP(fF);class bF{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:e=>this.replacement=e}}replace(e,n,r,s){e&&n&&(r!=null?e[n][r]=s:e[n]=s)}remove(e,n,r){e&&n&&(r!=null?e[n].splice(r,1):delete e[n])}}class gF extends bF{constructor(e,n){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:r=>this.replacement=r},this.enter=e,this.leave=n}visit(e,n,r,s){if(e){if(this.enter){const a=this.should_skip,o=this.should_remove,u=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,e,n,r,s),this.replacement&&(e=this.replacement,this.replace(n,r,s,e)),this.should_remove&&this.remove(n,r,s);const c=this.should_skip,l=this.should_remove;if(this.should_skip=a,this.should_remove=o,this.replacement=u,c)return e;if(l)return null}let i;for(i in e){const a=e[i];if(a&&typeof a=="object")if(Array.isArray(a)){const o=a;for(let u=0;u<o.length;u+=1){const c=o[u];Wf(c)&&(this.visit(c,e,i,u)||u--)}}else Wf(a)&&this.visit(a,e,i,null)}if(this.leave){const a=this.replacement,o=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,e,n,r,s),this.replacement&&(e=this.replacement,this.replace(n,r,s,e)),this.should_remove&&this.remove(n,r,s);const u=this.should_remove;if(this.replacement=a,this.should_remove=o,u)return null}}return e}}function Wf(t){return t!==null&&typeof t=="object"&&"type"in t&&typeof t.type=="string"}function MF(t,{enter:e,leave:n}){return new gF(e,n).visit(t,null)}let uP=[];function PF(t){uP.push(t)}let ei=new Map;function CF(t,e){ei.set(t,e)}function cP(t,e={}){var m;const{wrapAsync:n=!1,addReturn:r=!0,emitMiniLocations:s=!0,emitWidgets:i=!0}=e;let a=qD(t,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0}),o=[];const u=(f,g)=>{const b=ei.get("minilang");if(b){const x=`[${f}]`,D=b.getLocations(x,g.start);o=o.concat(D)}else{const x=ka(`"${f}"`,g.start,t);o=o.concat(x)}};let c=[];MF(a,{enter(f,g){var b,x,D;if(EF(f)){const{name:G}=f.tag,k=ei.get(G),Z=f.quasi.quasis[0].value.raw,A=f.quasi.start+1;if(s){const V=k.getLocations(Z,A);o=o.concat(V)}return this.skip(),this.replace(LF(G,Z,A))}if(VF(f,"tidal")){const G=f.quasi.quasis[0].value.raw,k=f.quasi.start+1;if(s){const Z=kF(G,k);o=o.concat(Z)}return this.skip(),this.replace(BF(G,k))}if(xF(f,g)){const{quasis:G}=f,{raw:k}=G[0].value;return this.skip(),s&&u(k,f),this.replace(Rf(k,f))}if(vF(f)){const{value:G}=f;return this.skip(),s&&u(G,f),this.replace(Rf(G,f))}if(AF(f))return i&&c.push({from:f.arguments[0].start,to:f.arguments[0].end,value:f.arguments[0].raw,min:((b=f.arguments[1])==null?void 0:b.value)??0,max:((x=f.arguments[2])==null?void 0:x.value)??1,step:(D=f.arguments[3])==null?void 0:D.value,type:"slider"}),this.replace(FF(f));if(DF(f)){const G=f.callee.property.name,k=c.filter(A=>A.type===G).length,Z={to:f.end,index:k,type:G,id:e.id};return i&&c.push(Z),this.replace(ZF(f,Z))}if(wF(f,g))return this.replace(XF(f));if(GF(f))return this.replace(SF(f))},leave(f,g,b,x){}});let{body:l}=a;if(!l.length)console.warn("empty body -> fallback to silence"),l.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!((m=l==null?void 0:l[l.length-1])!=null&&m.expression))throw new Error("unexpected ast format without body expression");if(r){const{expression:f}=l[l.length-1];l[l.length-1]={type:"ReturnStatement",argument:f}}let d=yF.generate(a);return n&&(d=`(async ()=>{${d}})()`),s?{output:d,miniLocations:o,widgets:c}:{output:d}}function vF(t,e,n){return t.type!=="Literal"?!1:t.raw[0]==='"'}function xF(t,e){return t.type==="TemplateLiteral"&&e.type!=="TaggedTemplateExpression"}function Rf(t,e){const{start:n}=e,r=ei.get("minilang");let s="m";return r&&r.name&&(s=r.name),{type:"CallExpression",callee:{type:"Identifier",name:s},arguments:[{type:"Literal",value:t},{type:"Literal",value:n}],optional:!1}}function AF(t){return t.type==="CallExpression"&&t.callee.name==="slider"}function DF(t){var e;return t.type==="CallExpression"&&uP.includes((e=t.callee.property)==null?void 0:e.name)}function FF(t){const e="slider_"+t.arguments[0].start;return t.arguments.unshift({type:"Literal",value:e,raw:e}),t.callee.name="sliderWithID",t}function lP(t){return`${t.id||""}_widget_${t.type}_${t.index}`}function ZF(t,e){const n=lP(e);return t.arguments.unshift({type:"Literal",value:n,raw:n}),t}function wF(t,e){return t.type==="CallExpression"&&t.callee.name==="samples"&&e.type!=="AwaitExpression"}function XF(t){return{type:"AwaitExpression",argument:t}}function GF(t){return t.type==="LabeledStatement"}function SF(t){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:t.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:t.label.name,raw:`'${t.label.name}'`}]}}}function EF(t){return t.type==="TaggedTemplateExpression"&&ei.has(t.tag.name)}function VF(t,e){return t.type==="TaggedTemplateExpression"&&t.tag.name===e}function kF(t,e){return t.split("").reduce((n,r,s)=>(r!=='"'||(!n.length||n[n.length-1].length>1?n.push([s+1]):n[n.length-1].push(s)),n),[]).map(([n,r])=>{const s=t.slice(n,r);return ka(`"${s}"`,e+n-1)}).flat()}function BF(t,e){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:t},{type:"Literal",value:e}],optional:!1}}function LF(t,e,n){return{type:"CallExpression",callee:{type:"Identifier",name:t},arguments:[{type:"Literal",value:e},{type:"Literal",value:n}],optional:!1}}function Om(t){return t!==null&&typeof t=="object"&&"name"in t&&typeof t.name=="string"}function Um(t){return t!==null&&typeof t=="object"&&"step"in t&&typeof t.step=="number"&&"alt"in t&&typeof t.alt=="number"&&!isNaN(t.step)&&!isNaN(t.alt)}var hP=[0,2,4,-1,1,3,5],pP=hP.map(t=>Math.floor(t*7/12));function dP(t){const{step:e,alt:n,oct:r,dir:s=1}=t,i=hP[e]+7*n;if(r===void 0)return[s*i];const a=r-pP[e]-4*n;return[s*i,s*a]}var WF=[3,0,4,1,5,2,6];function mP(t){const[e,n,r]=t,s=WF[RF(e)],i=Math.floor((e+1)/7);if(n===void 0)return{step:s,alt:i,dir:r};const a=n+4*i+pP[s];return{step:s,alt:i,oct:a,dir:r}}function RF(t){const e=(t+1)%7;return e<0?7+e:e}var Tf=(t,e)=>Array(Math.abs(e)+1).join(t),nu=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),TF="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",zF="(AA|A|P|M|m|d|dd)([-+]?\\d+)",IF=new RegExp("^"+TF+"|"+zF+"$");function NF(t){const e=IF.exec(`${t}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var zf={};function Ln(t){return typeof t=="string"?zf[t]||(zf[t]=KF(t)):Um(t)?Ln(_F(t)):Om(t)?Ln(t.name):nu}var If=[0,2,4,5,7,9,11],fP="PMMPPMM";function KF(t){const e=NF(t);if(e[0]==="")return nu;const n=+e[0],r=e[1],s=(Math.abs(n)-1)%7,i=fP[s];if(i==="M"&&r==="P")return nu;const a=i==="M"?"majorable":"perfectable",o=""+n+r,u=n<0?-1:1,c=n===8||n===-8?n:u*(s+1),l=YF(a,r),d=Math.floor((Math.abs(n)-1)/7),m=u*(If[s]+l+12*d),f=(u*(If[s]+l)%12+12)%12,g=dP({step:s,alt:l,oct:d,dir:u});return{empty:!1,name:o,num:n,q:r,step:s,alt:l,dir:u,type:a,simple:c,semitones:m,chroma:f,coord:g,oct:d}}function yP(t,e){const[n,r=0]=t,s=n*7+r*12<0,i=e||s?[-n,-r,-1]:[n,r,1];return Ln(mP(i))}function YF(t,e){return e==="M"&&t==="majorable"||e==="P"&&t==="perfectable"?0:e==="m"&&t==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(t==="perfectable"?e.length:e.length+1):0}function _F(t){const{step:e,alt:n,oct:r=0,dir:s}=t;if(!s)return"";const i=e+1+7*r,a=i===0?e+1:i,o=s<0?"-":"",u=fP[e]==="M"?"majorable":"perfectable";return o+a+HF(u,n)}function HF(t,e){return e===0?t==="majorable"?"M":"P":e===-1&&t==="majorable"?"m":e>0?Tf("A",e):Tf("d",t==="perfectable"?e:e+1)}var Nf=(t,e)=>Array(Math.abs(e)+1).join(t),bP=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Kf=new Map,jF=t=>"CDEFGAB".charAt(t),za=t=>t<0?Nf("b",-t):Nf("#",t),Qm=t=>t[0]==="b"?-t.length:t.length;function Bt(t){const e=JSON.stringify(t),n=Kf.get(e);if(n)return n;const r=typeof t=="string"?QF(t):Um(t)?Bt(qF(t)):Om(t)?Bt(t.name):bP;return Kf.set(e,r),r}var JF=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function qm(t){const e=JF.exec(t);return e?[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]:["","","",""]}function OF(t){return Bt(mP(t))}var UF=(t,e)=>(t%e+e)%e,Eo=[0,2,4,5,7,9,11];function QF(t){const e=qm(t);if(e[0]===""||e[3]!=="")return bP;const n=e[0],r=e[1],s=e[2],i=(n.charCodeAt(0)+3)%7,a=Qm(r),o=s.length?+s:void 0,u=dP({step:i,alt:a,oct:o}),c=n+r+s,l=n+r,d=(Eo[i]+a+120)%12,m=o===void 0?UF(Eo[i]+a,12)-1188:Eo[i]+a+12*(o+1),f=m>=0&&m<=127?m:null,g=o===void 0?null:Math.pow(2,(m-69)/12)*440;return{empty:!1,acc:r,alt:a,chroma:d,coord:u,freq:g,height:m,letter:n,midi:f,name:c,oct:o,pc:l,step:i}}function qF(t){const{step:e,alt:n,oct:r}=t,s=jF(e);if(!s)return"";const i=s+za(n);return r||r===0?i+r:i}function wn(t,e){const n=Bt(t),r=Array.isArray(e)?e:Ln(e).coord;if(n.empty||!r||r.length<2)return"";const s=n.coord,i=s.length===1?[s[0]+r[0]]:[s[0]+r[0],s[1]+r[1]];return OF(i).name}function gP(t,e){const n=t.length;return r=>{if(!e)return"";const s=r<0?(n- -r%n)%n:r%n,i=Math.floor(r/n),a=wn(e,[0,i]);return wn(a,t[s])}}function Ia(t,e){const n=Bt(t),r=Bt(e);if(n.empty||r.empty)return"";const s=n.coord,i=r.coord,a=i[0]-s[0],o=s.length===2&&i.length===2?i[1]-s[1]:-Math.floor(a*7/12),u=r.height===n.height&&r.midi!==null&&n.oct===r.oct&&n.step>r.step;return yP([a,o],u).name}var Yf=(t,e)=>Array(e+1).join(t),$F=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function MP(t){const e=$F.exec(t);return e?[e[1],e[2],e[3]]:["","",""]}function $i(t){const[e,n,r]=MP(t);if(n==="")return"";let s=4;for(let a=0;a<r.length;a++)s+=r.charAt(a)===","?-1:1;const i=e[0]==="_"?e.replace(/_/g,"b"):e[0]==="^"?e.replace(/\^/g,"#"):"";return n.charCodeAt(0)>96?n.toUpperCase()+i+(s+1):n+i+s}function PP(t){const e=Bt(t);if(e.empty||!e.oct&&e.oct!==0)return"";const{letter:n,acc:r,oct:s}=e,i=r[0]==="b"?r.replace(/b/g,"_"):r.replace(/#/g,"^"),a=s>4?n.toLowerCase():n,o=s===5?"":s>4?Yf("'",s-5):Yf(",",4-s);return i+a+o}function tZ(t,e){return PP(wn($i(t),e))}function eZ(t,e){return Ia($i(t),$i(e))}var nZ={abcToScientificNotation:$i,scientificToAbcNotation:PP,tokenize:MP,transpose:tZ,distance:eZ};function rZ(t,e){const n=[];for(;e--;n[e]=e+t);return n}function sZ(t,e){const n=[];for(;e--;n[e]=t-e);return n}function iZ(t,e){return t<e?rZ(t,e-t+1):sZ(t,t-e+1)}function aZ(t,e){const n=e.length,r=(t%n+n)%n;return e.slice(r,n).concat(e.slice(0,r))}function oZ(t){return t.filter(e=>e===0||e)}function CP(t){return t.map(e=>Bt(e)).filter(e=>!e.empty).sort((e,n)=>e.height-n.height).map(e=>e.name)}function uZ(t){return CP(t).filter((e,n,r)=>n===0||e!==r[n-1])}function cZ(t,e=Math.random){let n,r,s=t.length;for(;s;)n=Math.floor(e()*s--),r=t[s],t[s]=t[n],t[n]=r;return t}function vP(t){return t.length===0?[[]]:vP(t.slice(1)).reduce((e,n)=>e.concat(t.map((r,s)=>{const i=n.slice();return i.splice(s,0,t[0]),i})),[])}const lZ=Object.freeze(Object.defineProperty({__proto__:null,compact:oZ,permutations:vP,range:iZ,rotate:aZ,shuffle:cZ,sortedNoteNames:CP,sortedUniqNoteNames:uZ},Symbol.toStringTag,{value:"Module"}));function hZ(t,e){const n=[];for(;e--;n[e]=e+t);return n}function pZ(t,e){const n=[];for(;e--;n[e]=t-e);return n}function Na(t,e){return t<e?hZ(t,e-t+1):pZ(t,t-e+1)}function Ps(t,e){const n=e.length,r=(t%n+n)%n;return e.slice(r,n).concat(e.slice(0,r))}function $m(t){return t.filter(e=>e===0||e)}function dZ(t,e=Math.random){let n,r,s=t.length;for(;s;)n=Math.floor(e()*s--),r=t[s],t[s]=t[n],t[n]=r;return t}function xP(t){return t.length===0?[[]]:xP(t.slice(1)).reduce((e,n)=>e.concat(t.map((r,s)=>{const i=n.slice();return i.splice(s,0,t[0]),i})),[])}var mZ={compact:$m,permutations:xP,range:Na,rotate:Ps,shuffle:dZ},fr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},t1=t=>Number(t).toString(2).padStart(12,"0"),_f=t=>parseInt(t,2),fZ=/^[01]{12}$/;function e1(t){return fZ.test(t)}var yZ=t=>typeof t=="number"&&t>=0&&t<=4095,bZ=t=>t&&e1(t.chroma),Hf={[fr.chroma]:fr};function ve(t){const e=e1(t)?t:yZ(t)?t1(t):Array.isArray(t)?XZ(t):bZ(t)?t.chroma:fr.chroma;return Hf[e]=Hf[e]||wZ(e)}var gZ=ve,AP=t=>ve(t).chroma,MZ=t=>ve(t).intervals,PZ=t=>ve(t).setNum,CZ=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function vZ(t){const e=[];for(let n=0;n<12;n++)t.charAt(n)==="1"&&e.push(CZ[n]);return e}function xZ(t){return ve(t).intervals.map(e=>wn("C",e))}function AZ(){return Na(2048,4095).map(t1)}function n1(t,e=!0){const n=ve(t).chroma.split("");return $m(n.map((r,s)=>{const i=Ps(s,n);return e&&i[0]==="0"?null:i.join("")}))}function DZ(t,e){return ve(t).setNum===ve(e).setNum}function Ka(t){const e=ve(t).setNum;return n=>{const r=ve(n).setNum;return e&&e!==r&&(r&e)===r}}function Ya(t){const e=ve(t).setNum;return n=>{const r=ve(n).setNum;return e&&e!==r&&(r|e)===r}}function DP(t){const e=ve(t);return n=>{const r=Bt(n);return e&&!r.empty&&e.chroma.charAt(r.chroma)==="1"}}function FZ(t){const e=DP(t);return n=>n.filter(e)}var FP={get:ve,chroma:AP,num:PZ,intervals:MZ,chromas:AZ,isSupersetOf:Ya,isSubsetOf:Ka,isNoteIncludedIn:DP,isEqual:DZ,filter:FZ,modes:n1,notes:xZ,pcset:gZ};function ZZ(t){const e=t.split("");return e.map((n,r)=>Ps(r,e).join(""))}function wZ(t){const e=_f(t),n=ZZ(t).map(_f).filter(i=>i>=2048).sort()[0],r=t1(n),s=vZ(t);return{empty:!1,name:"",setNum:e,chroma:t,normalized:r,intervals:s}}function XZ(t){if(t.length===0)return fr.chroma;let e;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<t.length;r++)e=Bt(t[r]),e.empty&&(e=Ln(t[r])),e.empty||(n[e.chroma]=1);return n.join("")}var GZ=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],SZ=GZ;({...fr});var r1=[],Wi={};function ZP(){return r1.slice()}function EZ(t,e,n){const r=kZ(t),s={...ve(t),name:n||"",quality:r,intervals:t,aliases:e};r1.push(s),s.name&&(Wi[s.name]=s),Wi[s.setNum]=s,Wi[s.chroma]=s,s.aliases.forEach(i=>VZ(s,i))}function VZ(t,e){Wi[e]=t}function kZ(t){const e=n=>t.indexOf(n)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}SZ.forEach(([t,e,n])=>EZ(t.split(" "),n.split(" "),e));r1.sort((t,e)=>t.setNum-e.setNum);var BZ=t=>{const e=t.reduce((n,r)=>{const s=Bt(r).chroma;return s!==void 0&&(n[s]=n[s]||Bt(r).name),n},{});return n=>e[n]};function LZ(t,e={}){const n=t.map(r=>Bt(r).pc).filter(r=>r);return Bt.length===0?[]:KZ(n,1,e).filter(r=>r.weight).sort((r,s)=>s.weight-r.weight).map(r=>r.name)}var _a={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Ha=t=>e=>!!(e&t),WZ=Ha(_a.anyThirds),RZ=Ha(_a.perfectFifth),TZ=Ha(_a.anySeventh),zZ=Ha(_a.nonPerfectFifths);function IZ(t){const e=parseInt(t.chroma,2);return WZ(e)&&RZ(e)&&TZ(e)}function NZ(t){const e=parseInt(t,2);return zZ(e)?t:(e|16).toString(2)}function KZ(t,e,n){const r=t[0],s=Bt(r).chroma,i=BZ(t),a=n1(t,!1),o=[];return a.forEach((u,c)=>{const l=n.assumePerfectFifth&&NZ(u);ZP().filter(d=>n.assumePerfectFifth&&IZ(d)?d.chroma===l:d.chroma===u).forEach(d=>{const m=d.aliases[0],f=i(c);c!==s?o.push({weight:.5*e,name:`${f}${m}/${r}`}):o.push({weight:1*e,name:`${f}${m}`})})}),o}function gi(t){return t!==null&&typeof t=="object"&&"name"in t&&typeof t.name=="string"}var wP=[0,2,4,5,7,9,11],XP=({step:t,alt:e})=>(wP[t]+e+120)%12,s1=({step:t,alt:e,oct:n,dir:r=1})=>r*(wP[t]+e+12*(n===void 0?-100:n)),GP=t=>{const e=s1(t);return t.oct!==void 0&&e>=-12&&e<=115?e+12:null};function ja(t){return t!==null&&typeof t=="object"&&"step"in t&&typeof t.step=="number"&&"alt"in t&&typeof t.alt=="number"}var SP=[0,2,4,-1,1,3,5],EP=SP.map(t=>Math.floor(t*7/12));function Ja(t){const{step:e,alt:n,oct:r,dir:s=1}=t,i=SP[e]+7*n;if(r===void 0)return[s*i];const a=r-EP[e]-4*n;return[s*i,s*a]}var YZ=[3,0,4,1,5,2,6];function Oa(t){const[e,n,r]=t,s=YZ[_Z(e)],i=Math.floor((e+1)/7);if(n===void 0)return{step:s,alt:i,dir:r};const a=n+4*i+EP[s];return{step:s,alt:i,oct:a,dir:r}}function _Z(t){const e=(t+1)%7;return e<0?7+e:e}var jf=(t,e)=>Array(Math.abs(e)+1).join(t),ru={empty:!0,name:"",acc:""},HZ="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",jZ="(AA|A|P|M|m|d|dd)([-+]?\\d+)",JZ=new RegExp("^"+HZ+"|"+jZ+"$");function i1(t){const e=JZ.exec(`${t}`);return e===null?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}var Jf={};function Xe(t){return typeof t=="string"?Jf[t]||(Jf[t]=OZ(t)):ja(t)?Xe(QZ(t)):gi(t)?Xe(t.name):ru}var Of=[0,2,4,5,7,9,11],VP="PMMPPMM";function OZ(t){const e=i1(t);if(e[0]==="")return ru;const n=+e[0],r=e[1],s=(Math.abs(n)-1)%7,i=VP[s];if(i==="M"&&r==="P")return ru;const a=i==="M"?"majorable":"perfectable",o=""+n+r,u=n<0?-1:1,c=n===8||n===-8?n:u*(s+1),l=UZ(a,r),d=Math.floor((Math.abs(n)-1)/7),m=u*(Of[s]+l+12*d),f=(u*(Of[s]+l)%12+12)%12,g=Ja({step:s,alt:l,oct:d,dir:u});return{empty:!1,name:o,num:n,q:r,step:s,alt:l,dir:u,type:a,simple:c,semitones:m,chroma:f,coord:g,oct:d}}function Mi(t,e){const[n,r=0]=t,s=n*7+r*12<0,i=e||s?[-n,-r,-1]:[n,r,1];return Xe(Oa(i))}function UZ(t,e){return e==="M"&&t==="majorable"||e==="P"&&t==="perfectable"?0:e==="m"&&t==="majorable"?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*(t==="perfectable"?e.length:e.length+1):0}function QZ(t){const{step:e,alt:n,oct:r=0,dir:s}=t;if(!s)return"";const i=e+1+7*r,a=i===0?e+1:i,o=s<0?"-":"",u=VP[e]==="M"?"majorable":"perfectable";return o+a+qZ(u,n)}function qZ(t,e){return e===0?t==="majorable"?"M":"P":e===-1&&t==="majorable"?"m":e>0?jf("A",e):jf("d",t==="perfectable"?e:e+1)}var Uf=(t,e)=>Array(Math.abs(e)+1).join(t),kP={empty:!0,name:"",pc:"",acc:""},Qf=new Map,a1=t=>"CDEFGAB".charAt(t),o1=t=>t<0?Uf("b",-t):Uf("#",t),u1=t=>t[0]==="b"?-t.length:t.length;function Wn(t){const e=JSON.stringify(t),n=Qf.get(e);if(n)return n;const r=typeof t=="string"?ew(t):ja(t)?Wn(nw(t)):gi(t)?Wn(t.name):kP;return Qf.set(e,r),r}var $Z=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Ua(t){const e=$Z.exec(t);return e?[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]:["","","",""]}function c1(t){return Wn(Oa(t))}var tw=(t,e)=>(t%e+e)%e,Vo=[0,2,4,5,7,9,11];function ew(t){const e=Ua(t);if(e[0]===""||e[3]!=="")return kP;const n=e[0],r=e[1],s=e[2],i=(n.charCodeAt(0)+3)%7,a=u1(r),o=s.length?+s:void 0,u=Ja({step:i,alt:a,oct:o}),c=n+r+s,l=n+r,d=(Vo[i]+a+120)%12,m=o===void 0?tw(Vo[i]+a,12)-1188:Vo[i]+a+12*(o+1),f=m>=0&&m<=127?m:null,g=o===void 0?null:Math.pow(2,(m-69)/12)*440;return{empty:!1,acc:r,alt:a,chroma:d,coord:u,freq:g,height:m,letter:n,midi:f,name:c,oct:o,pc:l,step:i}}function nw(t){const{step:e,alt:n,oct:r}=t,s=a1(e);if(!s)return"";const i=s+o1(n);return r||r===0?i+r:i}function hs(t,e){const n=Wn(t),r=Array.isArray(e)?e:Xe(e).coord;if(n.empty||!r||r.length<2)return"";const s=n.coord,i=s.length===1?[s[0]+r[0]]:[s[0]+r[0],s[1]+r[1]];return c1(i).name}function Qa(t,e){const n=t.length;return r=>{if(!e)return"";const s=r<0?(n- -r%n)%n:r%n,i=Math.floor(r/n),a=hs(e,[0,i]);return hs(a,t[s])}}function l1(t,e){const n=Wn(t),r=Wn(e);if(n.empty||r.empty)return"";const s=n.coord,i=r.coord,a=i[0]-s[0],o=s.length===2&&i.length===2?i[1]-s[1]:-Math.floor(a*7/12),u=r.height===n.height&&r.midi!==null&&n.midi!==null&&n.step>r.step;return Mi([a,o],u).name}var BP=(t,e)=>Array(Math.abs(e)+1).join(t);function Cs(t,e,n){return function(...r){return console.warn(`${t} is deprecated. Use ${e}.`),n.apply(this,r)}}var LP=Cs("isNamed","isNamedPitch",gi);const WP=Object.freeze(Object.defineProperty({__proto__:null,accToAlt:u1,altToAcc:o1,chroma:XP,coordToInterval:Mi,coordToNote:c1,coordinates:Ja,deprecate:Cs,distance:l1,fillStr:BP,height:s1,interval:Xe,isNamed:LP,isNamedPitch:gi,isPitch:ja,midi:GP,note:Wn,pitch:Oa,stepToLetter:a1,tokenizeInterval:i1,tokenizeNote:Ua,tonicIntervalsTransposer:Qa,transpose:hs},Symbol.toStringTag,{value:"Module"}));var rw=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],sw=rw,iw={...fr,name:"",quality:"Unknown",intervals:[],aliases:[]},vs=[],Fr={};function h1(t){return Fr[t]||iw}var aw=Cs("ChordType.chordType","ChordType.get",h1);function ow(){return vs.map(t=>t.name).filter(t=>t)}function uw(){return vs.map(t=>t.aliases[0]).filter(t=>t)}function cw(){return Object.keys(Fr)}function qa(){return vs.slice()}var lw=Cs("ChordType.entries","ChordType.all",qa);function hw(){vs=[],Fr={}}function RP(t,e,n){const r=dw(t),s={...ve(t),name:n||"",quality:r,intervals:t,aliases:e};vs.push(s),s.name&&(Fr[s.name]=s),Fr[s.setNum]=s,Fr[s.chroma]=s,s.aliases.forEach(i=>pw(s,i))}function pw(t,e){Fr[e]=t}function dw(t){const e=n=>t.indexOf(n)!==-1;return e("5A")?"Augmented":e("3M")?"Major":e("5d")?"Diminished":e("3m")?"Minor":"Unknown"}sw.forEach(([t,e,n])=>RP(t.split(" "),n.split(" "),e));vs.sort((t,e)=>t.setNum-e.setNum);var TP={names:ow,symbols:uw,get:h1,all:qa,add:RP,removeAll:hw,keys:cw,entries:lw,chordType:aw},mw=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],fw=mw,yw={...fr,intervals:[],aliases:[]},$a=[],Zr={};function zP(){return $a.map(t=>t.name)}function to(t){return Zr[t]||yw}var bw=to;function xs(){return $a.slice()}var gw=xs;function Mw(){return Object.keys(Zr)}function Pw(){$a=[],Zr={}}function IP(t,e,n=[]){const r={...ve(t),name:e,intervals:t,aliases:n};return $a.push(r),Zr[r.name]=r,Zr[r.setNum]=r,Zr[r.chroma]=r,r.aliases.forEach(s=>Cw(r,s)),r}function Cw(t,e){Zr[e]=t}fw.forEach(([t,e,...n])=>IP(t.split(" "),e,n));var NP={names:zP,get:to,all:xs,add:IP,removeAll:Pw,keys:Mw,entries:gw,scaleType:bw},su={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function p1(t){const[e,n,r,s]=Ua(t);return e===""?["",t]:e==="A"&&s==="ug"?["","aug"]:[e+n,r+s]}function Wr(t){if(t==="")return su;if(Array.isArray(t)&&t.length===2)return Ri(t[1],t[0]);{const[e,n]=p1(t),r=Ri(n,e);return r.empty?Ri(t):r}}function Ri(t,e,n){const r=h1(t),s=Wn(e||""),i=Wn(n||"");if(r.empty||e&&s.empty||n&&i.empty)return su;const a=l1(s.pc,i.pc),o=r.intervals.indexOf(a)+1;if(!i.empty&&!o)return su;const u=Array.from(r.intervals);for(let m=1;m<o;m++){const f=u[0][0],g=u[0][1],b=parseInt(f,10)+7;u.push(`${b}${g}`),u.shift()}const c=s.empty?[]:u.map(m=>hs(s,m));t=r.aliases.indexOf(t)!==-1?t:r.aliases[0];const l=`${s.empty?"":s.pc}${t}${i.empty||o<=1?"":"/"+i.pc}`,d=`${e?s.pc+" ":""}${r.name}${o>1&&n?" over "+i.pc:""}`;return{...r,name:d,symbol:l,type:r.name,root:i.name,intervals:u,rootDegree:o,tonic:s.name,notes:c}}var vw=Cs("Chord.chord","Chord.get",Wr);function xw(t,e){const[n,r]=p1(t);return n?hs(n,e)+r:t}function Aw(t){const e=Wr(t),n=Ya(e.chroma);return xs().filter(r=>n(r.chroma)).map(r=>r.name)}function Dw(t){const e=Wr(t),n=Ya(e.chroma);return qa().filter(r=>n(r.chroma)).map(r=>e.tonic+r.aliases[0])}function Fw(t){const e=Wr(t),n=Ka(e.chroma);return qa().filter(r=>n(r.chroma)).map(r=>e.tonic+r.aliases[0])}function Zw(t){const{intervals:e,tonic:n}=Wr(t),r=Qa(e,n);return s=>s?r(s>0?s-1:s):""}function ww(t){const{intervals:e,tonic:n}=Wr(t);return Qa(e,n)}var Xw={getChord:Ri,get:Wr,detect:LZ,chordScales:Aw,extended:Dw,reduced:Fw,tokenize:p1,transpose:xw,degrees:Zw,steps:ww,chord:vw},Gw=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],Sw=Gw,eo=[];Sw.forEach(([t,e,n])=>Tw(t,e,n));var Ew={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function Vw(){return eo.reduce((t,e)=>(e.names.forEach(n=>t.push(n)),t),[])}function kw(){return eo.map(t=>t.shorthand)}var Bw=/^([^.]+)(\.*)$/;function d1(t){const[e,n,r]=Bw.exec(t)||[],s=eo.find(o=>o.shorthand===n||o.names.includes(n));if(!s)return Ew;const i=zw(s.fraction,r.length),a=i[0]/i[1];return{...s,name:t,dots:r,value:a,fraction:i}}var Lw=t=>d1(t).value,Ww=t=>d1(t).fraction,Rw={names:Vw,shorthands:kw,get:d1,value:Lw,fraction:Ww};function Tw(t,e,n){eo.push({empty:!1,dots:"",name:"",value:1/t,fraction:t<1?[1/t,1]:[1,t],shorthand:e,names:n})}function zw(t,e){const n=Math.pow(2,e);let r=t[0]*n,s=t[1]*n;const i=r;for(let a=0;a<e;a++)r+=i/Math.pow(2,a+1);for(;r%2===0&&s%2===0;)r/=2,s/=2;return[r,s]}function Iw(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var KP=Xe,Nw=t=>Xe(t).name,Kw=t=>Xe(t).semitones,Yw=t=>Xe(t).q,_w=t=>Xe(t).num;function Hw(t){const e=Xe(t);return e.empty?"":e.simple+e.q}function jw(t){const e=Xe(t);if(e.empty)return"";const n=(7-e.step)%7,r=e.type==="perfectable"?-e.alt:-(e.alt+1);return Xe({step:n,alt:r,oct:e.oct,dir:e.dir}).name}var Jw=[1,2,2,3,3,4,5,5,6,6,7,7],Ow="P m M m M P d P m M m M".split(" ");function Uw(t){const e=t<0?-1:1,n=Math.abs(t),r=n%12,s=Math.floor(n/12);return e*(Jw[r]+7*s)+Ow[r]}var Qw=Ia,YP=_P((t,e)=>[t[0]+e[0],t[1]+e[1]]),qw=t=>e=>YP(t,e),$w=_P((t,e)=>[t[0]-e[0],t[1]-e[1]]);function tX(t,e){const n=KP(t);if(n.empty)return"";const[r,s,i]=n.coord;return Mi([r+e,s,i]).name}var ps={names:Iw,get:KP,name:Nw,num:_w,semitones:Kw,quality:Yw,fromSemitones:Uw,distance:Qw,invert:jw,simplify:Hw,add:YP,addTo:qw,substract:$w,transposeFifths:tX};function _P(t){return(e,n)=>{const r=Xe(e).coord,s=Xe(n).coord;if(r&&s){const i=t(r,s);return Mi(i).name}}}function HP(t){return+t>=0&&+t<=127}function jP(t){if(HP(t))return+t;const e=Bt(t);return e.empty?null:e.midi}function eX(t,e=440){return Math.pow(2,(t-69)/12)*e}var nX=Math.log(2),rX=Math.log(440);function m1(t){const e=12*(Math.log(t)-rX)/nX+69;return Math.round(e*100)/100}var sX="C C# D D# E F F# G G# A A# B".split(" "),iX="C Db D Eb E F Gb G Ab A Bb B".split(" ");function Pr(t,e={}){if(isNaN(t)||t===-1/0||t===1/0)return"";t=Math.round(t);const n=(e.sharps===!0?sX:iX)[t%12];if(e.pitchClass)return n;const r=Math.floor(t/12)-1;return n+r}function f1(t){return t%12}function aX(t){return t.split("").reduce((e,n,r)=>(r<12&&n==="1"&&e.push(r),e),[])}function oX(t){return t.map(f1).sort((e,n)=>e-n).filter((e,n,r)=>n===0||e!==r[n-1])}function y1(t){return Array.isArray(t)?oX(t):aX(t)}function uX(t){const e=y1(t);return n=>{const r=f1(n);for(let s=0;s<12;s++){if(e.includes(r+s))return n+s;if(e.includes(r-s))return n-s}}}function JP(t,e){const n=y1(t),r=n.length;return s=>{const i=s<0?(r- -s%r)%r:s%r,a=Math.floor(s/r);return n[i]+a*12+e}}function cX(t,e){const n=JP(t,e);return r=>{if(r!==0)return n(r>0?r-1:r)}}var lX={chroma:f1,freqToMidi:m1,isMidi:HP,midiToFreq:eX,midiToNoteName:Pr,pcsetNearest:uX,pcset:y1,pcsetDegrees:cX,pcsetSteps:JP,toMidi:jP},hX=["C","D","E","F","G","A","B"],OP=t=>t.name,UP=t=>t.map(Bt).filter(e=>!e.empty);function pX(t){return t===void 0?hX.slice():Array.isArray(t)?UP(t).map(OP):[]}var Xn=Bt,dX=t=>Xn(t).name,mX=t=>Xn(t).pc,fX=t=>Xn(t).acc,yX=t=>Xn(t).oct,bX=t=>Xn(t).midi,gX=t=>Xn(t).freq,MX=t=>Xn(t).chroma;function QP(t){return Pr(t)}function PX(t){return Pr(m1(t))}function CX(t){return Pr(m1(t),{sharps:!0})}function vX(t){return Pr(t,{sharps:!0})}var xX=Ia,Fn=wn,AX=wn,qP=t=>e=>Fn(e,t),DX=qP,$P=t=>e=>Fn(t,e),FX=$P;function ta(t,e){return Fn(t,[e,0])}var ZX=ta;function wX(t,e){return Fn(t,[0,e])}var b1=(t,e)=>t.height-e.height,XX=(t,e)=>e.height-t.height;function t5(t,e){return e=e||b1,UP(t).sort(e).map(OP)}function e5(t){return t5(t,b1).filter((e,n,r)=>n===0||e!==r[n-1])}var GX=t=>{const e=Xn(t);return e.empty?"":Pr(e.midi||e.chroma,{sharps:e.alt>0,pitchClass:e.midi===null})};function n5(t,e){const n=Xn(t);if(n.empty)return"";const r=Xn(e||Pr(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;const s=n.chroma-n.alt,i=r.chroma-r.alt,a=s>11||i<0?-1:s<0||i>11?1:0,o=n.oct+a;return r.pc+o}var yr={names:pX,get:Xn,name:dX,pitchClass:mX,accidentals:fX,octave:yX,midi:bX,ascending:b1,descending:XX,distance:xX,sortedNames:t5,sortedUniqNames:e5,fromMidi:QP,fromMidiSharps:vX,freq:gX,fromFreq:PX,fromFreqSharps:CX,chroma:MX,transpose:Fn,tr:AX,transposeBy:qP,trBy:DX,transposeFrom:$P,trFrom:FX,transposeFifths:ta,transposeOctaves:wX,trFifths:ZX,simplify:GX,enharmonic:n5},r5={empty:!0,name:"",chordType:""},qf={};function br(t){return typeof t=="string"?qf[t]||(qf[t]=WX(t)):typeof t=="number"?br(no[t]||""):Um(t)?VX(t):Om(t)?br(t.name):r5}var SX=br;function EX(t=!0){return(t?no:LX).slice()}function VX(t){return br(za(t.alt)+no[t.step])}var kX=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function BX(t){return kX.exec(t)||["","","",""]}var s5="I II III IV V VI VII",no=s5.split(" "),LX=s5.toLowerCase().split(" ");function WX(t){const[e,n,r,s]=BX(t);if(!r)return r5;const i=r.toUpperCase(),a=no.indexOf(i),o=Qm(n),u=1;return{empty:!1,name:e,roman:r,interval:Ln({step:a,alt:o,dir:u}).name,acc:n,chordType:s,alt:o,step:a,major:r===i,oct:0,dir:u}}var RX={names:EX,get:br,romanNumeral:SX},Pe=Object.freeze([]),i5={type:"major",tonic:"",alteration:0,keySignature:""},Ti={tonic:"",grades:Pe,intervals:Pe,scale:Pe,triads:Pe,chords:Pe,chordsHarmonicFunction:Pe,chordScales:Pe,secondaryDominants:Pe,secondaryDominantSupertonics:Pe,substituteDominantsMinorRelative:Pe,substituteDominants:Pe,substituteDominantSupertonics:Pe,secondaryDominantsMinorRelative:Pe},TX={...i5,...Ti,type:"major",minorRelative:"",scale:Pe,substituteDominants:Pe,secondaryDominantSupertonics:Pe,substituteDominantsMinorRelative:Pe},zX={...i5,type:"minor",relativeMajor:"",natural:Ti,harmonic:Ti,melodic:Ti},ko=(t,e,n="")=>e.map((r,s)=>`${t[s]}${n}${r}`);function ro(t,e,n,r,s){return i=>{const a=t.map(f=>br(f).interval||""),o=a.map(f=>Fn(i,f)),u=ko(o,n),c=o.map(f=>Fn(f,"5P")).map(f=>o.includes(f)&&!u.includes(f+"7")?f+"7":""),l=$f(c,e),d=c.map(f=>{if(!f)return"";const g=f.slice(0,-1);return Fn(g,"5d")+"7"}),m=$f(d,e);return{tonic:i,grades:t,intervals:a,scale:o,triads:ko(o,e),chords:u,chordsHarmonicFunction:r.slice(),chordScales:ko(o,s," "),secondaryDominants:c,secondaryDominantSupertonics:l,substituteDominants:d,substituteDominantSupertonics:m,secondaryDominantsMinorRelative:l,substituteDominantsMinorRelative:m}}}var $f=(t,e)=>t.map((n,r)=>{if(!n)return"";const s=n.slice(0,-1),i=Fn(s,"5P");return e[r].endsWith("m")?i+"m7":i+"m7b5"}),a5=(t,e)=>{const n=Bt(t),r=Bt(e);return n.empty||r.empty?0:r.coord[0]-n.coord[0]},IX=ro("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),NX=ro("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),KX=ro("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),YX=ro("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function _X(t){const e=Bt(t).pc;if(!e)return TX;const n=IX(e),r=a5("C",e);return{...n,type:"major",minorRelative:Fn(e,"-3m"),alteration:r,keySignature:za(r)}}function HX(t){const e=Bt(t).pc;if(!e)return zX;const n=a5("C",e)-3;return{type:"minor",tonic:e,relativeMajor:Fn(e,"3m"),alteration:n,keySignature:za(n),natural:NX(e),harmonic:KX(e),melodic:YX(e)}}function jX(t){return typeof t=="number"?ta("C",t):typeof t=="string"&&/^b+|#+$/.test(t)?ta("C",Qm(t)):null}var JX={majorKey:_X,majorTonicFromKeySignature:jX,minorKey:HX},OX=Ln;function UX(t){const e=Ln(t);return e.empty?"":e.simple+e.q}function QX(t,e){const n=OX(t);if(n.empty)return"";const[r,s,i]=n.coord;return yP([r+e,s,i]).name}var g1=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],ty={...fr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},M1=g1.map(eG),iu={};M1.forEach(t=>{iu[t.name]=t,t.aliases.forEach(e=>{iu[e]=t})});function Er(t){return typeof t=="string"?iu[t.toLowerCase()]||ty:t&&t.name?Er(t.name):ty}var qX=Er;function o5(){return M1.slice()}var $X=o5;function tG(){return M1.map(t=>t.name)}function eG(t){const[e,n,r,s,i,a,o]=t,u=o?[o]:[],c=Number(n).toString(2);return{empty:!1,intervals:to(s).intervals,modeNum:e,chroma:c,normalized:c,name:s,setNum:n,alt:r,triad:i,seventh:a,aliases:u}}function nG(t,e){return Er(t).intervals.map(n=>wn(e,n))}function u5(t){return(e,n)=>{const r=Er(e);if(r.empty)return[];const s=Ps(r.modeNum,t),i=r.intervals.map(a=>wn(n,a));return s.map((a,o)=>i[o]+a)}}var rG=u5(g1.map(t=>t[4])),sG=u5(g1.map(t=>t[5]));function c5(t,e){const n=Er(e),r=Er(t);return n.empty||r.empty?"":UX(QX("1P",r.alt-n.alt))}function iG(t,e,n){return wn(n,c5(t,e))}var aG={get:Er,names:tG,all:o5,distance:c5,relativeTonic:iG,notes:nG,triads:rG,seventhChords:sG,entries:$X,mode:qX};function oG(t){const[e,n,r,s]=qm(t);return e===""?Bo("",t):e==="A"&&s==="ug"?Bo("","aug"):Bo(e+n,r+s)}function Bo(t,e){const n=e.split("/");if(n.length===1)return[t,n[0],""];const[r,s,i,a]=qm(n[1]);return r!==""&&i===""&&a===""?[t,n[0],r+s]:[t,e,""]}function uG(t,e){return e.map(br).map(n=>wn(t,Ln(n))+n.chordType)}function cG(t,e){return e.map(n=>{const[r,s]=oG(n),i=Ia(t,r);return br(Ln(i)).name+s})}var lG={fromRomanNumerals:uG,toRomanNumerals:cG};function l5(t){const e=$m(t.map(n=>typeof n=="number"?n:jP(n)));return!t.length||e.length!==t.length?[]:e.reduce((n,r)=>{const s=n[n.length-1];return n.concat(Na(s,r).slice(1))},[e[0]])}function hG(t,e){return l5(t).map(n=>Pr(n,e))}var pG={numeric:l5,chromatic:hG},dG={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function h5(t){if(typeof t!="string")return["",""];const e=t.indexOf(" "),n=Bt(t.substring(0,e));if(n.empty){const s=Bt(t);return s.empty?["",t]:[s.name,""]}const r=t.substring(n.name.length+1).toLowerCase();return[n.name,r.length?r:""]}var mG=zP;function Rn(t){const e=Array.isArray(t)?t:h5(t),n=Bt(e[0]).name,r=to(e[1]);if(r.empty)return dG;const s=r.name,i=n?r.intervals.map(o=>wn(n,o)):[],a=n?n+" "+s:s;return{...r,name:a,type:s,tonic:n,notes:i}}var fG=Rn;function yG(t,e={}){const n=AP(t),r=Bt(e.tonic??t[0]??""),s=r.chroma;if(s===void 0)return[];const i=n.split("");i[s]="1";const a=Ps(s,i).join(""),o=xs().find(c=>c.chroma===a),u=[];return o&&u.push(r.name+" "+o.name),e.match==="exact"||p5(a).forEach(c=>{u.push(r.name+" "+c)}),u}function bG(t){const e=Rn(t),n=Ka(e.chroma);return ZP().filter(r=>n(r.chroma)).map(r=>r.aliases[0])}function p5(t){const e=e1(t)?t:Rn(t).chroma,n=Ya(e);return xs().filter(r=>n(r.chroma)).map(r=>r.name)}function gG(t){const e=Ka(Rn(t).chroma);return xs().filter(n=>e(n.chroma)).map(n=>n.name)}function d5(t){const e=t.map(s=>Bt(s).pc).filter(s=>s),n=e[0],r=e5(e);return Ps(r.indexOf(n),r)}function MG(t){const e=Rn(t);if(e.empty)return[];const n=e.tonic?e.notes:e.intervals;return n1(e.chroma).map((r,s)=>{const i=Rn(r).name;return i?[n[s],i]:["",""]}).filter(r=>r[0])}function PG(t){const e=Array.isArray(t)?d5(t):Rn(t).notes,n=e.map(r=>Bt(r).chroma);return r=>{const s=Bt(typeof r=="number"?QP(r):r),i=s.height;if(i===void 0)return;const a=i%12,o=n.indexOf(a);if(o!==-1)return n5(s.name,e[o])}}function CG(t){const e=PG(t);return(n,r)=>{const s=Bt(n).height,i=Bt(r).height;return s===void 0||i===void 0?[]:Na(s,i).map(e).filter(a=>a)}}function vG(t){const{intervals:e,tonic:n}=Rn(t),r=gP(e,n);return s=>s?r(s>0?s-1:s):""}function xG(t){const{intervals:e,tonic:n}=Rn(t);return gP(e,n)}var ds={degrees:vG,detect:yG,extended:p5,get:Rn,modeNames:MG,names:mG,rangeOf:CG,reduced:gG,scaleChords:bG,scaleNotes:d5,steps:xG,tokenize:h5,scale:fG},AG={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},DG=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function FG(){return DG.slice()}var ZG=/^(\d*\d(?:\+\d)*)\/(\d+)$/,ey=new Map;function wG(t){const e=JSON.stringify(t),n=ey.get(e);if(n)return n;const r=SG(P1(t));return ey.set(e,r),r}function P1(t){if(typeof t=="string"){const[i,a,o]=ZG.exec(t)||[];return P1([a,o])}const[e,n]=t,r=+n;if(typeof e=="number")return[e,r];const s=e.split("+").map(i=>+i);return s.length===1?[s[0],r]:[s,r]}var XG={names:FG,parse:P1,get:wG},GG=t=>Math.log(t)/Math.log(2)%1===0;function SG([t,e]){const n=Array.isArray(t)?t.reduce((o,u)=>o+u,0):t,r=e;if(n===0||r===0)return AG;const s=Array.isArray(t)?`${t.join("+")}/${e}`:`${t}/${e}`,i=Array.isArray(t)?t:[],a=r===4||r===2?"simple":r===8&&n%3===0?"compound":GG(r)?"irregular":"irrational";return{empty:!1,name:s,type:a,upper:n,lower:r,additive:i}}var EG=WP,VG=FP,kG=TP,BG=NP;const LG=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:nZ,Array:lZ,Chord:Xw,ChordDictionary:kG,ChordType:TP,Collection:mZ,Core:WP,DurationValue:Rw,Interval:ps,Key:JX,Midi:lX,Mode:aG,Note:yr,PcSet:VG,Pcset:FP,Progression:lG,Range:pG,RomanNumeral:RX,Scale:ds,ScaleDictionary:BG,ScaleType:NP,TimeSignature:XG,Tonal:EG,accToAlt:u1,altToAcc:o1,chroma:XP,coordToInterval:Mi,coordToNote:c1,coordinates:Ja,deprecate:Cs,distance:l1,fillStr:BP,height:s1,interval:Xe,isNamed:LP,isNamedPitch:gi,isPitch:ja,midi:GP,note:Wn,pitch:Oa,stepToLetter:a1,tokenizeInterval:i1,tokenizeNote:Ua,tonicIntervalsTransposer:Qa,transpose:hs},Symbol.toStringTag,{value:"Module"})),WG=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],RG=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],TG=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],zG={b:-1,"#":1},IG=t=>{const[e,...n]=t.split("");return RG.indexOf(e.toLowerCase())+n.reduce((r,s)=>r+zG[s],0)};function NG(t){const e=(t||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return e?e.slice(1):[]}const au=t=>t%12,m5=t=>{let e=Number(t);return isNaN(e)?ps.semitones(t):e},ou=(t,e)=>{if(typeof t=="number")return t;if(typeof t=="string")return rr(t,e)},KG=(t,e=!1)=>{const n=Math.floor(t/12)-1;return(e?TG:WG)[t%12]+n};function YG(t,e,n=1){t=t.map(s=>typeof s=="string"?rr(s):s);const r=Math.floor(e/t.length)*n*12;return e=Je(e,t.length),t[e]+r}function _G(t,e,n){let r=0,s=1/0;return e.forEach((i,a)=>{const o=Math.abs(i-t);(o<s||n)&&(r=a,s=o)}),r}let Lo={};function HG(t,e,n,r){let[s,i]=ds.tokenize(e);const a=ou(s),o=au(a);if(!Lo[i]){let{intervals:d}=ds.get(`C ${i}`);Lo[i]=d.map(m5)}const u=Lo[i];if(!u)return null;let c=a;if(n){n=ou(n,3);const d=au(n),m=Je(d-o,12),f=_G(m,u,r);t=t+f,c=n-m}const l=Math.floor(t/u.length)*12;return t=Je(t,u.length),u[t]+c+l}let ny={below:t=>t.slice(-1)[0],duck:t=>t.slice(-1)[0],above:t=>t[0],root:t=>t[0]};function jG({chord:t,dictionary:e,offset:n=0,n:r,mode:s="below",anchor:i="c5",octaves:a=1}){const[o,u]=NG(t),c=IG(o);i=ou((i==null?void 0:i.note)||i,4);const l=au(i),d=e[u].map(V=>(typeof V=="string"?V.split(" "):V).map(m5));let m,f,g=d.map((V,E)=>{const B=ny[s](V),K=Je(l-B-c,12);return(m===void 0||K<m)&&(m=K,f=E),K});s==="root"&&(f=0);const b=Math.ceil(n/d.length)*12,x=Je(f+n,d.length),D=d[x],G=ny[s](D),k=i-g[x]+b,Z=D.map(V=>k-G+V);let A=Z.map(V=>KG(V));return s==="duck"&&(A=A.filter((V,E)=>Z[E]!==i)),r!==void 0?[YG(A,r,a)]:A}const JG=t=>(t<=0?-1:1)+t*7+"P";function OG(t,e){e=e.replaceAll(":"," "),t=Math.ceil(t);let{intervals:n,tonic:r,empty:s}=ds.get(e);if(s&&gr(e)||s&&!r)throw new Error('incomplete scale. Make sure to use ":" instead of spaces, example: .scale("C:major")');if(s)throw new Error(`invalid scale "${e}"`);r=r||"C";const{pc:i,oct:a=3}=yr.get(r),o=Math.floor(t/n.length),u=Je(t,n.length),c=ps.add(n[u],JG(o));return yr.transpose(i+a,c)}function ry(t,e,n){let[r,s]=ds.tokenize(t),{notes:i}=ds.get(`${r} ${s}`);if(i=i.map(f=>yr.get(f).pc),e=Number(e),isNaN(e))throw new Error(`scale offset "${e}" not a number`);const{pc:a,oct:o=3}=yr.get(n),u=i.indexOf(a);if(u===-1)throw new Error(`note "${n}" is not in scale "${t}"`);let c=u,l=o,d=a;const m=Math.sign(e);for(;Math.abs(c-u)<Math.abs(e);){c+=m;const f=Je(c,i.length);m<0&&d[0]==="C"&&(l+=m),d=i[f],m>0&&d[0]==="C"&&(l+=m)}return d+l}const{transpose:f5,trans:y5}=T(["transpose","trans"],function(t,e){return e.withHap(n=>{const r=n.value.note??n.value;if(typeof r=="number"){let a;typeof t=="number"?a=t:typeof t=="string"&&(a=ps.semitones(t)||0);const o=r+a;return typeof n.value=="object"?n.withValue(()=>({...n.value,note:o})):n.withValue(()=>o)}if(typeof r!="string"||!gr(r))return le(`[tonal] transpose: not a note "${r}"`,"warning"),n;const s=isNaN(Number(t))?String(t):ps.fromSemitones(t),i=yr.simplify(yr.transpose(r,s));return typeof n.value=="object"?n.withValue(()=>({...n.value,note:i})):n.withValue(()=>i)})}),{scaleTranspose:b5,scaleTrans:g5,strans:M5}=T(["scaleTranspose","scaleTrans","strans"],function(t,e){return e.withHap(n=>{if(!n.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof n.value=="object")return n.withValue(()=>({...n.value,note:ry(n.context.scale,Number(t),n.value.note)}));if(typeof n.value!="string")throw new Error("can only use scaleTranspose with notes");return n.withValue(()=>ry(n.context.scale,Number(t),n.value))})}),P5=T("scale",function(t,e){return Array.isArray(t)&&(t=t.flat().join(" ")),e.fmap(n=>{const r=typeof n=="object";let s=r?n.n:n;if(r&&delete n.n,gr(s))return ie(s);let i=Number(s),a=0;if(isNaN(i)){if(s=String(s),!/^[-+]?\d+(#*|b*){1}$/.test(s))return le(`[tonal] invalid scale step "${s}", expected number or integer with optional # b suffixes`,"error"),Rt;const o=s.indexOf("#");if(o>=0)i=Number(s.substring(0,o)),a=s.length-o;else{const u=s.indexOf("b");i=Number(s.substring(0,u)),a=u-s.length}}try{let o;r&&n.anchor?o=HG(i,t,n.anchor):o=OG(i,t),a!=0&&(o=yr.transpose(o,ps.fromSemitones(a))),n=ie(r?{...n,note:o}:o)}catch(o){le(`[tonal] ${o.message}`,"error"),n=Rt}return n}).outerJoin().withHap(n=>n.setContext({...n.context,scale:t}))},!0,!0);var sy={},Bi={},Es={},iy;function C5(){if(iy)return Es;iy=1,Es.__esModule=!0,Es.getBestVoicing=void 0;function t(e){var n=e.chord,r=e.range,s=e.finder,i=e.picker,a=e.lastVoicing,o=s(n,r);return o.length?i(o,a):[]}return Es.getBestVoicing=t,Es}var Vs={};const v5=tF(LG);var ks={},ay;function x5(){if(ay)return ks;ay=1,ks.__esModule=!0,ks.tokenizeChord=void 0;function t(e){var n=(e||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return n?n.slice(1):[]}return ks.tokenizeChord=t,ks}var oy;function UG(){if(oy)return Vs;oy=1,Vs.__esModule=!0,Vs.voicingsInRange=void 0;var t=v5,e=A5(),n=x5();function r(s,i,a){i===void 0&&(i=e.lefthand),a===void 0&&(a=["D3","A4"]);var o=(0,n.tokenizeChord)(s),u=o[0],c=o[1];if(!i[c])return[];var l=i[c].map(function(m){return m.split(" ")}),d=t.Range.chromatic(a);return l.reduce(function(m,f){var g=f.map(function(G){return t.Interval.substract(G,f[0])}),b=t.Note.transpose(u,f[0]),x=d.filter(function(G){return t.Note.chroma(G)===t.Note.chroma(b)}).filter(function(G){return t.Note.midi(t.Note.transpose(G,g[g.length-1]))<=t.Note.midi(a[1])}).map(function(G){return t.Note.enharmonic(G,b)}),D=x.map(function(G){return g.map(function(k){return t.Note.transpose(G,k)})});return m.concat(D)},[])}return Vs.voicingsInRange=r,Vs}var uy;function A5(){return uy||(uy=1,(function(t){var e=Bi.__assign||function(){return e=Object.assign||function(o){for(var u,c=1,l=arguments.length;c<l;c++){u=arguments[c];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])}return o},e.apply(this,arguments)},n=Bi.__rest||function(o,u){var c={};for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&u.indexOf(l)<0&&(c[l]=o[l]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(o);d<l.length;d++)u.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(o,l[d])&&(c[l[d]]=o[l[d]]);return c};t.__esModule=!0,t.dictionaryVoicing=t.dictionaryVoicingFinder=t.triads=t.guidetones=t.lefthand=void 0;var r=C5(),s=UG();t.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},t.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},t.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var i=function(o){return function(u,c){return(0,s.voicingsInRange)(u,o,c)}};t.dictionaryVoicingFinder=i;var a=function(o){var u=o.dictionary,c=o.range,l=n(o,["dictionary","range"]);return(0,r.getBestVoicing)(e(e({},l),{range:c,finder:(0,t.dictionaryVoicingFinder)(u)}))};t.dictionaryVoicing=a})(Bi)),Bi}var Bs={},cy;function QG(){if(cy)return Bs;cy=1,Bs.__esModule=!0,Bs.minTopNoteDiff=void 0;var t=v5;function e(n,r){if(!r)return n[0];var s=function(i){return Math.abs(t.Note.midi(r[r.length-1])-t.Note.midi(i[i.length-1]))};return n.reduce(function(i,a){return s(a)<s(i)?a:i},n[0])}return Bs.minTopNoteDiff=e,Bs}var ly;function qG(){return ly||(ly=1,(function(t){t.__esModule=!0;var e=A5(),n=QG(),r=C5(),s=x5();t.default={tokenizeChord:s.tokenizeChord,getBestVoicing:r.getBestVoicing,dictionaryVoicing:e.dictionaryVoicing,dictionaryVoicingFinder:e.dictionaryVoicingFinder,lefthand:e.lefthand,guidetones:e.guidetones,triads:e.triads,minTopNoteDiff:n.minTopNoteDiff}})(sy)),sy}var $G=qG();const hy=rP($G),Qr={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},Ks={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing:t7,minTopNoteDiff:e7}=hy.default||hy,n7={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},r7={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},s7={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},i7={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},Rr={lefthand:{dictionary:n7,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:s7,mode:"below",anchor:"a4"},guidetones:{dictionary:r7,mode:"above",anchor:"a4"},legacy:{dictionary:i7,mode:"below",anchor:"a4"}};let D5="ireal";const C1=t=>D5=t,F5=(t,e)=>v1(t,Rr[t].dictionary,e),v1=(t,e,n=["F3","A4"])=>{Object.assign(Rr,{[t]:{dictionary:e,range:n}})},so=(t,e,n={})=>{Object.assign(Rr,{[t]:{dictionary:e,...n}})},a7=(t,e,n)=>{const{dictionary:r,range:s}=Rr[e];return t7({chord:t,dictionary:r,range:s,picker:e7,lastVoicing:n})};let zi;const Z5=T("voicings",function(t,e){return e.fmap(n=>(zi=a7(n,t,zi),jt(...zi))).outerJoin()}),w5=T("rootNotes",function(t,e){return e.fmap(n=>{const r=(n.chord||n).match(/^([a-gA-G][b#]?).*$/)[1]+t;return n.chord?{note:r}:r})}),X5=T("voicing",function(t){return t.fmap(e=>{e=typeof e=="string"?{chord:e}:e;let{dictionary:n=D5,chord:r,anchor:s,offset:i,mode:a,n:o,octaves:u,...c}=e;n=typeof n=="string"?Rr[n]:{dictionary:n,mode:"below",anchor:"c5"};try{let l=jG({...n,chord:r,anchor:s,offset:i,mode:a,n:o,octaves:u});return jt(...l).note().set(c)}catch{return le(`[voicing]: unknown chord "${r}"`),Rt}}).outerJoin()});function is(t,e,n){n=Array.isArray(n)?n:[n],n.forEach(r=>{r[e]=r[t]})}is("^","",[Qr,Ks]);Object.keys(Qr).forEach(t=>{if(t.includes("-")){let e=t.replace("-","m");is(t,e,[Ks,Qr])}if(t.includes("^")){let e=t.replace("^","M");is(t,e,[Ks,Qr])}if(t.includes("+")){let e=t.replace("+","aug");is(t,e,[Ks,Qr])}});so("ireal",Qr);so("ireal-ext",Ks);function G5(){zi=void 0,C1("ireal")}const S5="@strudel/tonal",o7=Object.freeze(Object.defineProperty({__proto__:null,addVoicings:v1,packageName:S5,registerVoicings:so,resetVoicings:G5,rootNotes:w5,scale:P5,scaleTrans:g5,scaleTranspose:b5,setDefaultVoicings:C1,setVoicingRange:F5,strans:M5,trans:y5,transpose:f5,voicing:X5,voicingAlias:is,voicingRegistry:Rr,voicings:Z5},Symbol.toStringTag,{value:"Module"}));async function E5(){const t=Us(Us,Promise.resolve().then(()=>T3),Promise.resolve().then(()=>pD),Promise.resolve().then(()=>o7),Promise.resolve().then(()=>cD),{hush:k5,evaluate:B5});await Promise.all([t,wm()])}let uu,wr;function V5(t={}){Am(),t.miniAllStrings!==!1&&zm();const{prebake:e,...n}=t;return wr=Bm({...n,transpiler:cP}),uu=(async()=>(await E5(),await(e==null?void 0:e()),wr))(),Qs(()=>wr.scheduler.now()),uu}window.initStrudel=V5;J.prototype.play=function(){if(!wr)throw new Error(".play: no repl found. Have you called initStrudel?");return uu.then(()=>{wr.setPattern(this,!0)}),this};function k5(){wr.stop()}async function B5(t,e=!0){return wr.evaluate(t,e)}const z7=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:Bu,Cyclist:nm,DEFAULT_MAX_POLYPHONY:Ga,Fraction:H,Hap:fe,Pattern:J,StartRules:y9,State:Gr,SyntaxError:mr,TimeSpan:te,__chooseWith:Da,_brandBy:xa,_fitslice:Qu,_irand:Aa,_keyDown:Fa,_match:qu,_mod:Je,_morph:da,_polymeterListSteps:tc,_retime:Yi,_slices:_i,accelerate:Pc,activeLabel:mp,ad:g0,add:Ub,addVoicings:v1,adsr:b0,aliasBank:t9,almostAlways:y3,almostNever:f3,always:g3,amp:Ac,get analysers(){return Ze},get analysersData(){return pr},analyze:Rc,anchor:Tp,and:fg,apply:_g,applyFM:qs,applyGainCurve:En,ar:P0,arp:Gb,arpWith:Xb,arrange:Bb,as:R0,att:Fc,attack:Dc,averageArray:Au,backgroundImage:W3,band:ng,bandf:jc,bandq:Uc,bank:Wc,base64ToUnicode:Vu,bbexpr:gl,bbst:Pl,beat:mM,begin:qc,berlin:r3,berlinWith:q0,binary:NM,binaryN:H0,bind:Ib,binshift:Id,bite:Qg,bjork:ba,blshift:ig,bor:rg,bp:Oc,bpa:$l,bpattack:ql,bpd:ih,bpdecay:sh,bpe:jl,bpenv:Hl,bpf:Jc,bpq:Qc,bpr:bh,bprelease:yh,bps:hh,bpsustain:lh,brak:o2,brand:JM,brandBy:jM,brshift:ag,bxor:sg,bypass:B2,byteBeatExpression:bl,byteBeatStartTime:Ml,calculateSteps:wb,cat:_u,ccn:F0,ccv:Z0,ceil:Pg,ch:vl,channel:Ll,channels:Cl,choose:J0,chooseCycles:O0,chooseIn:UM,chooseInWith:hi,chooseOut:QM,chooseWith:li,chop:sM,chord:Lp,chunk:A2,chunkBack:Z2,chunkBackInto:k2,chunkInto:E2,chunkback:w2,chunkbackinto:V2,chunkinto:S2,clamp:ii,cleanupUi:R3,clip:$d,coarse:al,code2hash:Db,color:f0,colour:y0,comb:Rd,compose:Mb,compress:Zg,compressSpan:wg,compressor:od,compressorAttack:ld,compressorKnee:ud,compressorRatio:cd,compressorRelease:hd,compressspan:Xg,connectToDestination:Fm,constant:Pb,contract:ac,control:D0,controls:yM,cosine:wM,cosine2:XM,cpm:Hg,cps:qd,createClock:z0,createFilter:Ts,createParam:ui,createParams:fa,crush:il,ctf:Tl,ctlNum:w0,ctranspose:gp,curry:Ct,curve:s0,cut:Wl,cutoff:Rl,cycleToSeconds:Ki,dec:Ic,decay:zc,defaultPrebake:E5,degrade:a3,degradeBy:i3,degradeByWith:s3,degree:yp,delay:kh,delayfb:Lh,delayfeedback:Bh,delaysync:Ih,delayt:Th,delaytime:Rh,deltaSlide:i0,det:Yh,detune:Kh,dfb:Wh,dict:Rp,dictionary:Wp,dist:ad,distort:id,div:$b,djf:Vh,dough:p9,doughTrigger:Vm,drawFrequencyScope:Wm,drawLine:Ru,drawTimeScope:Lm,drive:yl,drop:rc,dry:jh,drywet:um,ds:M0,dspWorklet:Em,dt:zh,duck:dl,duckattack:fl,duckdepth:ml,dur:n0,duration:e0,e:MM,early:jg,echo:g2,echoWith:m2,echowith:f2,eish:FM,end:$c,enhance:Ld,eq:hg,eqt:pg,euclid:gM,euclidLegato:xM,euclidLegatoRot:AM,euclidRot:CM,euclidish:DM,euclidrot:PM,evalScope:Us,evaluate:B5,every:Yg,expand:ic,expression:bd,extend:sc,fadeInTime:Uh,fadeOutTime:Oh,fadeTime:Jh,fanchor:Mh,fast:Lg,fastChunk:G2,fastGap:Gg,fastcat:xe,fastchunk:X2,fastgap:Sg,fft:Tc,filter:z2,filterWhen:I2,firstOf:Kg,fit:lM,flatten:Bn,floor:Mg,fm:Xc,fmattack:Sc,fmdecay:Vc,fmenv:Gc,fmh:Zc,fmi:wc,fmrelease:Bc,fmsustain:kc,fmvelocity:Lc,fmwave:Ec,focus:Eg,focusSpan:Vg,focusspan:kg,fractionalArgs:Cb,frameRate:Yd,frames:_d,freeze:Sd,freq:Qh,freqToMidi:sa,fromBipolar:vg,fshift:Md,fshiftnote:Pd,fshiftphase:Cd,ftype:gh,func:bg,gain:vc,gainNode:Ve,gap:kr,gat:lp,gate:cp,getADSRValues:vn,getAnalyserById:Zm,getAnalyzerData:mi,getAudioContext:At,getAudioContextCurrentTime:a9,getAudioDevices:Mm,getCachedBuffer:Y3,getCompressor:om,getControlName:ya,getCurrentKeyboardState:Wu,getDefaultValue:se,getEventOffsetMs:fb,getFreq:xu,getFrequency:Fu,getLeafLocation:Va,getLeafLocations:ka,getLeaves:Tm,getLfo:di,getLoadedBuffer:_3,getOscillator:Gm,getParamADSR:Cn,getPerformanceTimeSeconds:Zb,getPitchEnvelope:us,getPlayableNoteValue:gb,getSampleBuffer:hm,getSampleBufferSource:pm,getSampleInfo:lm,getSound:zs,getSoundIndex:bb,getTime:Hi,getTrigger:rm,getVibratoOscillator:cs,getWidgetID:lP,getWorklet:on,getZZFX:Sm,grow:K2,gt:ug,gte:lg,h:M9,harmonic:Mp,hash2code:Fb,hbrick:Nd,hcutoff:Fh,hold:Hc,hours:Hd,hp:wh,hpa:Ql,hpattack:Ul,hpd:rh,hpdecay:nh,hpe:_l,hpenv:Yl,hpf:Zh,hpq:Gh,hpr:fh,hprelease:mh,hps:ch,hpsustain:uh,hresonance:Xh,hsl:T2,hsla:R2,hurry:Wg,hush:k5,id:Ar,imag:Bd,inhabit:X3,inhabitmod:S3,initAudio:xm,initAudioOnFirstClick:Am,initStrudel:V5,initializeAudioOutput:Dm,innerBind:Nb,inside:zg,inv:s2,invert:r2,ir:Up,irand:OM,irbegin:$p,iresponse:Qp,irspeed:qp,isControlName:dc,isNote:gr,isNoteWithOctave:db,isPattern:la,isaw:ci,isaw2:Pa,iter:P2,iterBack:C2,iterback:v2,itri:VM,itri2:kM,jux:d2,juxBy:h2,juxby:p2,kcutoff:Ad,keep:Jb,keepif:Ob,keyAlias:Lu,keyDown:P3,krush:xd,label:fp,lastOf:Ng,late:ju,lbrick:Kd,legato:t0,leslie:hp,lfo:u0,linger:qg,listRange:ia,loadBuffer:Xa,lock:Nh,logKey:ra,loop:tl,loopAt:uM,loopAtCps:hM,loopBegin:el,loopEnd:rl,loopat:cM,loopatcps:pM,loopb:nl,loope:sl,lp:Il,lpa:Ol,lpattack:Jl,lpd:eh,lpdecay:th,lpe:Kl,lpenv:Nl,lpf:zl,lpq:Eh,lpr:dh,lprelease:ph,lps:oh,lpsustain:ah,lrate:pp,lsize:dp,lt:og,lte:cg,m:g9,mapArgs:oa,mask:Wb,midi2note:yb,midiToFreq:Xr,midibend:B0,midichan:C0,midicmd:A0,midimap:v0,midiport:x0,miditouch:L0,mini:Ba,mini2ast:fs,miniAllStrings:zm,minify:P9,minutes:jd,mod:tg,mode:Np,morph:fM,mouseX:RM,mouseY:LM,mousex:WM,mousey:BM,mtranspose:bp,mul:qb,n:gc,nanFallback:Du,ne:dg,net:mg,never:b3,noise:xh,noises:wa,note:Mc,noteToMidi:rr,nothing:cn,nrpnn:X0,nrpv:G0,nudge:vp,numeralArgs:ze,objectMap:ku,octave:xp,octaveR:Cp,octaves:Ip,octer:Dd,octersub:Fd,octersubsub:Zd,off:a2,offset:zp,often:d3,onTriggerSample:ym,or:yg,orbit:Ap,outerBind:Kb,outside:Ig,overgain:Dp,overshape:Fp,pace:$u,packageName:S5,pairs:Gu,palindrome:l2,pan:Zp,panchor:up,panic:o9,panorient:Sp,panspan:wp,pansplay:Xp,panwidth:Gp,parse:Rm,parseFractional:Xu,parseNumeral:aa,partials:Wd,patt:$h,pattack:qh,patternifyAST:Lr,pcurve:op,pdec:ep,pdecay:tp,penv:ap,perlin:n3,perlinWith:Q0,ph:Zl,phasdp:Bl,phaser:wl,phasercenter:Sl,phaserdepth:Vl,phaserrate:Fl,phasersweep:Xl,phc:El,phd:kl,phs:Gl,pick:$0,pickF:C3,pickOut:x3,pickReset:Z3,pickRestart:D3,pickSqueeze:G3,pickmod:tm,pickmodF:v3,pickmodOut:A3,pickmodReset:w3,pickmodRestart:F3,pickmodSqueeze:E3,pipe:wu,pitchJump:a0,pitchJumpTime:o0,ply:Bg,pm:Vb,polyBind:Hb,polyTouch:W0,polymeter:oi,polyrhythm:Sb,postgain:xc,pow:eg,pr:Eb,prel:ip,prelease:sp,press:c2,pressBy:u2,processSampleMap:mm,progNum:S0,psus:rp,psustain:np,pure:ie,pw:xl,pwrate:Al,pwsweep:Dl,rand:we,rand2:HM,randcat:qM,randrun:j0,range:xg,range2:Dg,rangex:Ag,rarely:m3,rate:Ep,ratio:Fg,rdim:jp,real:kd,ref:dM,register:T,registerControl:S,registerLanguage:CF,registerSamplesPrefix:O3,registerSound:kn,registerSynthSounds:wm,registerVoicings:so,registerWidgetType:PF,registerZZFXSounds:l9,reify:O,rel:_c,release:Yc,removeUndefineds:Vr,repeatCycles:x2,repeatTime:c0,repl:L3,resetDefaultValues:Cm,resetDefaults:n9,resetGlobalEffects:u9,resetLoadedSounds:i9,resetVoicings:G5,resonance:Sh,rev:Ju,reverseBuffer:dm,rfade:Op,rib:W2,ribbon:L2,ring:wd,ringdf:Gd,ringf:Xd,rlp:_p,room:Kp,roomdim:Hp,roomfade:Jp,roomlp:Yp,roomsize:td,rootNotes:w5,rotate:Zu,round:gg,rsize:rd,run:_0,s:mc,s_add:U2,s_alt:H2,s_cat:_2,s_contract:tM,s_expand:q2,s_extend:$2,s_polymeter:j2,s_sub:Q2,s_taper:J2,s_taperlist:O2,s_tour:eM,s_zip:nM,samples:fm,saw:ms,saw2:Ma,scale:P5,scaleTrans:g5,scaleTranspose:b5,scram:zd,scramble:_M,scrub:T0,seconds:Jd,seg:t2,segment:$g,semitone:kp,seq:Hu,seqPLoop:Lb,sequence:ln,sequenceP:zu,set:jb,setDefault:e9,setDefaultAudioContext:vm,setDefaultValue:Sa,setDefaultValues:r9,setDefaultVoicings:C1,setGainCurve:$3,setLogger:am,setMaxPolyphony:bm,setMultiChannelOrbits:gm,setStringParser:Tu,setTime:Qs,setVersionDefaults:s9,setVoicingRange:F5,shape:sd,shrink:uc,shrinklist:oc,shuffle:YM,signal:Oe,silence:Rt,sine:I0,sine2:Ca,size:ed,slice:hc,slide:Vp,slow:Rg,slowChunk:F2,slowcat:sr,slowcatPrime:ha,slowchunk:D2,smear:Td,sol2note:vb,someCycles:p3,someCyclesBy:h3,sometimes:l3,sometimesBy:c3,songPtr:Od,sound:fc,soundMap:Dn,source:yc,sparsity:Tg,speak:k3,speed:ma,splice:oM,splitAt:ua,spread:Hh,square:N0,square2:GM,squeeze:V3,squeezeBind:Yb,squiz:md,src:bc,stack:jt,stackBy:kb,stackCentre:Yu,stackLeft:Nu,stackRight:Ku,steady:ZM,stepBind:_b,stepalt:ec,stepcat:Be,steps:rM,stepsPerOctave:Pp,strans:M5,stretch:pd,striate:iM,stringifyValues:ca,struct:Rb,strudelScope:em,stut:M2,stutWith:y2,stutwith:b2,sub:Qb,superdough:Ea,superdoughTrigger:c9,superimpose:Tb,sus:Kc,sustain:Nc,sustainpedal:gd,swing:n2,swingBy:e2,sysex:E0,sysexdata:k0,sysexid:V0,sz:nd,take:nc,time:va,timeCat:pa,timecat:Y2,toBipolar:Cg,tokenizeNote:vu,tour:cc,trans:y5,transpiler:cP,transpose:f5,tremolo:ol,tremolodepth:cl,tremolophase:hl,tremoloshape:pl,tremoloskew:ll,tremolosync:ul,tri:SM,tri2:EM,triode:vd,tsdelay:Vd,uid:Ud,undegrade:u3,undegradeBy:o3,unicodeToBase64:Eu,uniq:xb,uniqsort:Ab,uniqsortr:Su,unison:_h,unit:dd,v:vh,val:Qd,valueToMidi:mb,velocity:Cc,vib:Ph,vibmod:Ah,vibrato:Ch,vmod:Dh,voice:Bp,voicing:X5,voicingAlias:is,voicingRegistry:Rr,voicings:Z5,vowel:fd,waveformN:Xm,waveloss:yd,wchoose:t3,wchooseCycles:U0,webAudioTimeout:rs,webaudioOutput:km,webaudioRepl:Bm,when:i2,whenKey:M3,withValue:zb,within:N2,wrandcat:e3,xfade:pc,xsdelay:Ed,zcrush:p0,zdelay:d0,zip:lc,zipWith:si,zmod:h0,znoise:l0,zoom:Jg,zoomArc:Og,zoomarc:Ug,zrand:r0,zzfx:m0},Symbol.toStringTag,{value:"Module"})),u7="data:text/javascript;base64,dmFyIGF0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgaHQ9KHUsbSxmKT0+bSBpbiB1P2F0KHUsbSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Zn0pOnVbbV09Zjt2YXIgZT0odSxtLGYpPT5odCh1LHR5cGVvZiBtIT0ic3ltYm9sIj9tKyIiOm0sZik7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxtPU1hdGguUEkvdSxmPTEvdTtsZXQgVj1oPT5NYXRoLnBvdyhoLDIpO2Z1bmN0aW9uIF8oaCl7cmV0dXJuIFYoaCl9ZnVuY3Rpb24gTyhoLHMsdCl7Y29uc3QgaT1NYXRoLnNpbigoMS10KSouNSpNYXRoLlBJKSxuPU1hdGguc2luKHQqLjUqTWF0aC5QSSk7cmV0dXJuIGgqaStzKm59Y2xhc3MgZ3tjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDApfXVwZGF0ZShzKXtjb25zdCB0PU1hdGguc2luKHRoaXMucGhhc2UqMipNYXRoLlBJKTtyZXR1cm4gdGhpcy5waGFzZT0odGhpcy5waGFzZStzL3UpJTEsdH19Y2xhc3MgSXtjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDApfXVwZGF0ZShzKXtyZXR1cm4gdGhpcy5waGFzZSs9ZipzLHRoaXMucGhhc2UlMSoyLTF9fWZ1bmN0aW9uIE0oaCxzKXtyZXR1cm4gaDxzPyhoLz1zLGgraC1oKmgtMSk6aD4xLXM/KGg9KGgtMSkvcyxoKmgraCtoKzEpOjB9Y2xhc3MgU3tjb25zdHJ1Y3RvcihzPXt9KXt0aGlzLnBoYXNlPXMucGhhc2U/PzB9dXBkYXRlKHMpe2NvbnN0IHQ9cy91O2xldCBpPU0odGhpcy5waGFzZSx0KSxuPTIqdGhpcy5waGFzZS0xLWk7cmV0dXJuIHRoaXMucGhhc2UrPXQsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZS09MSksbn19ZnVuY3Rpb24gVChoLHMsdCl7cmV0dXJuIGg8Mj8wOigobixsLHIpPT5yKihsLW4pK24pKC1zKi41LHMqLjUsdC8oaC0xKSl9ZnVuY3Rpb24geihoLHMpe3JldHVybiBoKk1hdGgucG93KDIscy8xMil9Y2xhc3MgRntjb25zdHJ1Y3RvcihzPXt9KXt0aGlzLnZvaWNlcz1zLnZvaWNlcz8/NSx0aGlzLmZyZXFzcHJlYWQ9cy5mcmVxc3ByZWFkPz8uMix0aGlzLnBhbnNwcmVhZD1zLnBhbnNwcmVhZD8/LjQsdGhpcy5waGFzZT1uZXcgRmxvYXQzMkFycmF5KHRoaXMudm9pY2VzKS5tYXAoKCk9Pk1hdGgucmFuZG9tKCkpfXVwZGF0ZShzKXtjb25zdCB0PU1hdGguc3FydCgxLXRoaXMucGFuc3ByZWFkKSxpPU1hdGguc3FydCh0aGlzLnBhbnNwcmVhZCk7bGV0IG49MCxsPTA7Zm9yKGxldCByPTA7cjx0aGlzLnZvaWNlcztyKyspe2NvbnN0IGE9eihzLFQodGhpcy52b2ljZXMsdGhpcy5mcmVxc3ByZWFkLHIpKS91LGM9KHImMSk9PTE7bGV0IGQ9dDtjJiYoZD1pKTtsZXQgYj1NKHRoaXMucGhhc2Vbcl0sYSksRT0yKnRoaXMucGhhc2Vbcl0tMS1iO249bitFKmQsbD1sK0UqZCx0aGlzLnBoYXNlW3JdKz1hLHRoaXMucGhhc2Vbcl0+MSYmKHRoaXMucGhhc2Vbcl0tPTEpfXJldHVybiBuK2x9fWNsYXNzIGt7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7dGhpcy5waGFzZSs9ZipzO2xldCB0PXRoaXMucGhhc2UlMTtyZXR1cm4odDwuNT8yKnQ6MS0yKih0LS41KSkqMi0xfX1jbGFzcyBxe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJzMCIsMCk7ZSh0aGlzLCJzMSIsMCl9dXBkYXRlKHMsdCxpPTApe2k9TWF0aC5tYXgoaSwwKSx0PU1hdGgubWluKHQsMmU0KTtjb25zdCBuPTIqTWF0aC5zaW4odCptKSxyPTEtTWF0aC5wb3coLjUsKGkrLjEyNSkvLjEyNSkqbjtyZXR1cm4gdGhpcy5zMD1yKnRoaXMuczAtbip0aGlzLnMxK24qcyx0aGlzLnMxPXIqdGhpcy5zMStuKnRoaXMuczAsdGhpcy5zMX19Y2xhc3MgQ3tjb25zdHJ1Y3RvcihzPTApe3RoaXMucGhhc2U9c31zYXcocyx0KXtsZXQgaT0odGhpcy5waGFzZStzKSUxLG49TShpLHQpO3JldHVybiAyKmktMS1ufXVwZGF0ZShzLHQ9LjUpe2NvbnN0IGk9cy91O2xldCBuPXRoaXMuc2F3KDAsaSktdGhpcy5zYXcodCxpKTtyZXR1cm4gdGhpcy5waGFzZT0odGhpcy5waGFzZStpKSUxLG4rdCoyLTF9fWNsYXNzIEx7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyx0PS41KXtyZXR1cm4gdGhpcy5waGFzZSs9ZipzLHRoaXMucGhhc2UlMTx0PzE6LTF9fWNsYXNzIFB7Y29uc3RydWN0b3IoKXtlKHRoaXMsInVwZGF0ZSIscz0+TWF0aC5yYW5kb20oKTxzKmY/TWF0aC5yYW5kb20oKTowKX19Y2xhc3MgTnt1cGRhdGUoKXtyZXR1cm4gTWF0aC5yYW5kb20oKSoyLTF9fWNsYXNzIEd7Y29uc3RydWN0b3IoKXt0aGlzLm91dD0wfXVwZGF0ZSgpe2xldCBzPU1hdGgucmFuZG9tKCkqMi0xO3JldHVybiB0aGlzLm91dD0odGhpcy5vdXQrLjAyKnMpLzEuMDIsdGhpcy5vdXR9fWNsYXNzIGp7Y29uc3RydWN0b3IoKXt0aGlzLmIwPTAsdGhpcy5iMT0wLHRoaXMuYjI9MCx0aGlzLmIzPTAsdGhpcy5iND0wLHRoaXMuYjU9MCx0aGlzLmI2PTB9dXBkYXRlKCl7Y29uc3Qgcz1NYXRoLnJhbmRvbSgpKjItMTt0aGlzLmIwPS45OTg4Nip0aGlzLmIwK3MqLjA1NTUxNzksdGhpcy5iMT0uOTkzMzIqdGhpcy5iMStzKi4wNzUwNzU5LHRoaXMuYjI9Ljk2OSp0aGlzLmIyK3MqLjE1Mzg1Mix0aGlzLmIzPS44NjY1KnRoaXMuYjMrcyouMzEwNDg1Nix0aGlzLmI0PS41NSp0aGlzLmI0K3MqLjUzMjk1MjIsdGhpcy5iNT0tLjc2MTYqdGhpcy5iNS1zKi4wMTY4OTg7Y29uc3QgdD10aGlzLmIwK3RoaXMuYjErdGhpcy5iMit0aGlzLmIzK3RoaXMuYjQrdGhpcy5iNSt0aGlzLmI2K3MqLjUzNjI7cmV0dXJuIHRoaXMuYjY9cyouMTE1OTI2LHQqLjExfX1jbGFzcyBCe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMSl9dXBkYXRlKHMpe3RoaXMucGhhc2UrPWYqcztsZXQgdD10aGlzLnBoYXNlPj0xPzE6MDtyZXR1cm4gdGhpcy5waGFzZT10aGlzLnBoYXNlJTEsdH19ZnVuY3Rpb24gUihoLHMsdCxpPTEpe2lmKGg8PTApcmV0dXJuIHM7aWYoaD49MSlyZXR1cm4gdDtsZXQgbjtyZXR1cm4gaT09PTA/bj1oOmk+MD9uPU1hdGgucG93KGgsaSk6bj0xLU1hdGgucG93KDEtaCwtaSkscysodC1zKSpufWNsYXNzIHZ7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5zdGF0ZT0ib2ZmIix0aGlzLnN0YXJ0VGltZT0wLHRoaXMuc3RhcnRWYWw9MCx0aGlzLmRlY2F5Q3VydmU9cy5kZWNheUN1cnZlPz8xfXVwZGF0ZShzLHQsaSxuLGwscil7c3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2Uib2ZmIjpyZXR1cm4gdD4wJiYodGhpcy5zdGF0ZT0iYXR0YWNrIix0aGlzLnN0YXJ0VGltZT1zLHRoaXMuc3RhcnRWYWw9MCksMDtjYXNlImF0dGFjayI6e2xldCBwPXMtdGhpcy5zdGFydFRpbWU7cmV0dXJuIHA+aT8odGhpcy5zdGF0ZT0iZGVjYXkiLHRoaXMuc3RhcnRUaW1lPXMsMSk6UihwL2ksdGhpcy5zdGFydFZhbCwxLDEpfWNhc2UiZGVjYXkiOntsZXQgcD1zLXRoaXMuc3RhcnRUaW1lLGE9UihwL24sMSxsLC10aGlzLmRlY2F5Q3VydmUpO3JldHVybiB0PD0wPyh0aGlzLnN0YXRlPSJyZWxlYXNlIix0aGlzLnN0YXJ0VGltZT1zLHRoaXMuc3RhcnRWYWw9YSxhKTpwPm4/KHRoaXMuc3RhdGU9InN1c3RhaW4iLHRoaXMuc3RhcnRUaW1lPXMsbCk6YX1jYXNlInN1c3RhaW4iOnJldHVybiB0PD0wJiYodGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWwpLGw7Y2FzZSJyZWxlYXNlIjp7bGV0IHA9cy10aGlzLnN0YXJ0VGltZTtpZihwPnIpcmV0dXJuIHRoaXMuc3RhdGU9Im9mZiIsMDtsZXQgYT1SKHAvcix0aGlzLnN0YXJ0VmFsLDAsLXRoaXMuZGVjYXlDdXJ2ZSk7cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWEpLGF9fXRocm93ImludmFsaWQgZW52ZWxvcGUgc3RhdGUifX1jb25zdCBXPTEwO2NsYXNzIHh7Y29uc3RydWN0b3IoKXtlKHRoaXMsIndyaXRlSWR4IiwwKTtlKHRoaXMsInJlYWRJZHgiLDApO2UodGhpcywiYnVmZmVyIixuZXcgRmxvYXQzMkFycmF5KFcqdSkpfXdyaXRlKHMsdCl7dGhpcy53cml0ZUlkeD0odGhpcy53cml0ZUlkeCsxKSV0aGlzLmJ1ZmZlci5sZW5ndGgsdGhpcy5idWZmZXJbdGhpcy53cml0ZUlkeF09cztsZXQgaT1NYXRoLm1pbihNYXRoLmZsb29yKHUqdCksdGhpcy5idWZmZXIubGVuZ3RoLTEpO3RoaXMucmVhZElkeD10aGlzLndyaXRlSWR4LWksdGhpcy5yZWFkSWR4PDAmJih0aGlzLnJlYWRJZHgrPXRoaXMuYnVmZmVyLmxlbmd0aCl9dXBkYXRlKHMsdCl7cmV0dXJuIHRoaXMud3JpdGUocyx0KSx0aGlzLmJ1ZmZlclt0aGlzLnJlYWRJZHhdfX1jbGFzcyBYe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJkZWxheSIsbmV3IHgpO2UodGhpcywibW9kdWxhdG9yIixuZXcgayl9dXBkYXRlKHMsdCxpLG4sbCl7Y29uc3Qgcj10aGlzLm1vZHVsYXRvci51cGRhdGUobikqbCxwPXRoaXMuZGVsYXkudXBkYXRlKHMsaSooMStyKSk7cmV0dXJuIE8ocyxwLHQpfX1jbGFzcyAke2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJob2xkIiwwKTtlKHRoaXMsInQiLDApfXVwZGF0ZShzLHQpe3JldHVybiB0aGlzLnQrKyV0PT09MCYmKHRoaXMudD0wLHRoaXMuaG9sZD1zKSx0aGlzLmhvbGR9fWNsYXNzIFV7dXBkYXRlKHMsdCl7dD1NYXRoLm1heCgxLHQpO2NvbnN0IGk9TWF0aC5wb3coMix0LTEpO3JldHVybiBNYXRoLnJvdW5kKHMqaSkvaX19Y2xhc3MgWXt1cGRhdGUocyx0PTAsaT0xKXtpPU1hdGgubWF4KC4wMDEsTWF0aC5taW4oMSxpKSk7Y29uc3Qgbj1NYXRoLmV4cG0xKHQpO3JldHVybigxK24pKnMvKDErbipNYXRoLmFicyhzKSkqaX19Y2xhc3Mgd3tjb25zdHJ1Y3RvcihzLHQsaSl7ZSh0aGlzLCJidWZmZXIiKTtlKHRoaXMsInNhbXBsZVJhdGUiKTtlKHRoaXMsInBvcyIsMCk7ZSh0aGlzLCJzYW1wbGVGcmVxIixBKCkpO3RoaXMuYnVmZmVyPXMsdGhpcy5zYW1wbGVSYXRlPXQsdGhpcy5kdXJhdGlvbj10aGlzLmJ1ZmZlci5sZW5ndGgvdGhpcy5zYW1wbGVSYXRlLHRoaXMuc3BlZWQ9dS90aGlzLnNhbXBsZVJhdGUsaSYmKHRoaXMuc3BlZWQqPXRoaXMuZHVyYXRpb24pfXVwZGF0ZShzKXtpZih0aGlzLnBvcz49dGhpcy5idWZmZXIubGVuZ3RoKXJldHVybiAwO2NvbnN0IHQ9cy90aGlzLnNhbXBsZUZyZXEqdGhpcy5zcGVlZDtsZXQgaT10aGlzLmJ1ZmZlcltNYXRoLmZsb29yKHRoaXMucG9zKV07cmV0dXJuIHRoaXMucG9zPXRoaXMucG9zK3QsaX19ZSh3LCJzYW1wbGVzIixuZXcgTWFwKTtjb25zdCB5PShoLHM9ImxpbmVhciIsdCk9Pntjb25zdFtyLHAsYSxjXT1oO2lmKHI9PW51bGwmJnA9PW51bGwmJmE9PW51bGwmJmM9PW51bGwpcmV0dXJuIHQ/P1suMDAxLC4wMDEsMSwuMDFdO2NvbnN0IGQ9YT8/KHIhPW51bGwmJnA9PW51bGx8fHI9PW51bGwmJnA9PW51bGw/MTouMDAxKTtyZXR1cm5bTWF0aC5tYXgocj8/MCwuMDAxKSxNYXRoLm1heChwPz8wLC4wMDEpLE1hdGgubWluKGQsMSksTWF0aC5tYXgoYz8/MCwuMDEpXX07bGV0IEQ9e3NpbmU6ZyxzYXc6Uyx6YXc6SSxzYXd0b290aDpTLHphd3Rvb3RoOkksc3VwZXJzYXc6Rix0cmk6ayx0cmlhbmdsZTprLHB1bHNlOkMsc3F1YXJlOkMscHVsemU6TCxkdXN0OlAsY3JhY2tsZTpQLGltcHVsc2U6Qix3aGl0ZTpOLGJyb3duOkcscGluazpqfTtjb25zdCBaPXtjaG9ydXM6MCxub3RlOjQ4LHM6InRyaWFuZ2xlIixiYW5rOiIiLGdhaW46MSxwb3N0Z2FpbjoxLHZlbG9jaXR5OjEsZGVuc2l0eToiLjAzIixmdHlwZToiMTJkYiIsZmFuY2hvcjowLHJlc29uYW5jZTowLGhyZXNvbmFuY2U6MCxiYW5kcTowLGNoYW5uZWxzOlsxLDJdLHBoYXNlcmRlcHRoOi43NSxzaGFwZXZvbDoxLGRpc3RvcnR2b2w6MSxkZWxheTowLGJ5dGVCZWF0RXhwcmVzc2lvbjoiMCIsZGVsYXlmZWVkYmFjazouNSxkZWxheXNwZWVkOjEsZGVsYXl0aW1lOi4yNSxvcmJpdDoxLGk6MSxmZnQ6OCx6OiJ0cmlhbmdsZSIscGFuOi41LGZtaDoxLGZtZW52OjAsc3BlZWQ6MSxwdzouNX07bGV0IG89aD0+WltoXTtjb25zdCBIPXtjOjAsZDoyLGU6NCxmOjUsZzo3LGE6OSxiOjExfSxKPXsiIyI6MSxiOi0xLHM6MSxmOi0xfSxLPShoLHM9Myk9Pnt2YXIgYTtsZXRbdCxpPSIiLG49IiJdPSgoYT1TdHJpbmcoaCkubWF0Y2goL14oW2EtZ0EtR10pKFsjYnNmXSopKFswLTldKikkLykpPT1udWxsP3ZvaWQgMDphLnNsaWNlKDEpKXx8W107aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdub3QgYSBub3RlOiAiJytoKyciJyk7Y29uc3QgbD1IW3QudG9Mb3dlckNhc2UoKV0scj0oaT09bnVsbD92b2lkIDA6aS5zcGxpdCgiIikucmVkdWNlKChjLGQpPT5jK0pbZF0sMCkpfHwwO3JldHVybihOdW1iZXIobnx8cykrMSkqMTIrbCtyfSxRPWg9Pk1hdGgucG93KDIsKGgtNjkpLzEyKSo0NDAsQT1oPT4oaD1ofHxvKCJub3RlIiksdHlwZW9mIGg9PSJzdHJpbmciJiYoaD1LKGgsMykpLFEoaCkpO2NsYXNzIHR0e2NvbnN0cnVjdG9yKHMpe2UodGhpcywiaWQiLDApO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJhdHRhY2siKTtlKHRoaXMsImRlY2F5Iik7ZSh0aGlzLCJzdXN0YWluIik7ZSh0aGlzLCJyZWxlYXNlIik7ZSh0aGlzLCJfYmVnaW4iKTtlKHRoaXMsIl9kdXJhdGlvbiIpO2UodGhpcywiX3NvdW5kIik7ZSh0aGlzLCJfY2hhbm5lbHMiLDEpO2UodGhpcywiX2J1ZmZlcnMiKTtlKHRoaXMsInVuaXQiKTtlKHRoaXMsIl9wZW52Iik7ZSh0aGlzLCJwZW52Iik7ZSh0aGlzLCJwYXR0YWNrIik7ZSh0aGlzLCJwZGVjYXkiKTtlKHRoaXMsInBzdXN0YWluIik7ZSh0aGlzLCJwcmVsZWFzZSIpO2UodGhpcywidmliIik7ZSh0aGlzLCJfdmliIik7ZSh0aGlzLCJ2aWJtb2QiKTtlKHRoaXMsIl9mbSIpO2UodGhpcywiZm1oIik7ZSh0aGlzLCJmbWkiKTtlKHRoaXMsIl9mbWVudiIpO2UodGhpcywiZm1hdHRhY2siKTtlKHRoaXMsImZtZGVjYXkiKTtlKHRoaXMsImZtc3VzdGFpbiIpO2UodGhpcywiZm1yZWxlYXNlIik7ZSh0aGlzLCJfbHBlbnYiKTtlKHRoaXMsImxwZW52Iik7ZSh0aGlzLCJscGF0dGFjayIpO2UodGhpcywibHBkZWNheSIpO2UodGhpcywibHBzdXN0YWluIik7ZSh0aGlzLCJscHJlbGVhc2UiKTtlKHRoaXMsIl9ocGVudiIpO2UodGhpcywiaHBlbnYiKTtlKHRoaXMsImhwYXR0YWNrIik7ZSh0aGlzLCJocGRlY2F5Iik7ZSh0aGlzLCJocHN1c3RhaW4iKTtlKHRoaXMsImhwcmVsZWFzZSIpO2UodGhpcywiX2JwZW52Iik7ZSh0aGlzLCJicGVudiIpO2UodGhpcywiYnBhdHRhY2siKTtlKHRoaXMsImJwZGVjYXkiKTtlKHRoaXMsImJwc3VzdGFpbiIpO2UodGhpcywiYnByZWxlYXNlIik7ZSh0aGlzLCJjdXRvZmYiKTtlKHRoaXMsImhjdXRvZmYiKTtlKHRoaXMsImJhbmRmIik7ZSh0aGlzLCJjb2Fyc2UiKTtlKHRoaXMsImNydXNoIik7ZSh0aGlzLCJkaXN0b3J0Iik7ZSh0aGlzLCJmcmVxIik7ZSh0aGlzLCJub3RlIik7ZSh0aGlzLCJfbHBmIik7ZSh0aGlzLCJfaHBmIik7ZSh0aGlzLCJfYnBmIik7ZSh0aGlzLCJfY2hvcnVzIik7ZSh0aGlzLCJfY29hcnNlIik7ZSh0aGlzLCJfY3J1c2giKTtlKHRoaXMsIl9kaXN0b3J0Iik7dmFyIGksbixsLHIscCxhLGM7dGhpcy5mcmVxPz8odGhpcy5mcmVxPUEocy5ub3RlKSksdGhpcy5fYmVnaW49cy5fYmVnaW4sdGhpcy5fZHVyYXRpb249cy5fZHVyYXRpb24sdGhpcy5yZWxlYXNlPXMucmVsZWFzZT8/MDtsZXQgdD10aGlzO2lmKE9iamVjdC5hc3NpZ24odCxzKSx0LnM9dC5zPz9vKCJzIiksdC5nYWluPV8odC5nYWluPz9vKCJnYWluIikpLHQudmVsb2NpdHk9Xyh0LnZlbG9jaXR5Pz9vKCJ2ZWxvY2l0eSIpKSx0LnBvc3RnYWluPV8odC5wb3N0Z2Fpbj8/bygicG9zdGdhaW4iKSksdC5kZW5zaXR5PXQuZGVuc2l0eT8/bygiZGVuc2l0eSIpLHQuZmFuY2hvcj10LmZhbmNob3I/P28oImZhbmNob3IiKSx0LmRyaXZlPXQuZHJpdmU/Py42OSx0LnBoYXNlcmRlcHRoPXQucGhhc2VyZGVwdGg/P28oInBoYXNlcmRlcHRoIiksdC5zaGFwZXZvbD1fKHQuc2hhcGV2b2w/P28oInNoYXBldm9sIikpLHQuZGlzdG9ydHZvbD1fKHQuZGlzdG9ydHZvbD8/bygiZGlzdG9ydHZvbCIpKSx0Lmk9dC5pPz9vKCJpIiksdC5jaG9ydXM9dC5jaG9ydXM/P28oImNob3J1cyIpLHQuZmZ0PXQuZmZ0Pz9vKCJmZnQiKSx0LnBhbj10LnBhbj8/bygicGFuIiksdC5vcmJpdD10Lm9yYml0Pz9vKCJvcmJpdCIpLHQuZm1lbnY9dC5mbWVudj8/bygiZm1lbnYiKSx0LnJlc29uYW5jZT10LnJlc29uYW5jZT8/bygicmVzb25hbmNlIiksdC5ocmVzb25hbmNlPXQuaHJlc29uYW5jZT8/bygiaHJlc29uYW5jZSIpLHQuYmFuZHE9dC5iYW5kcT8/bygiYmFuZHEiKSx0LnNwZWVkPXQuc3BlZWQ/P28oInNwZWVkIiksdC5wdz10LnB3Pz9vKCJwdyIpLFt0LmF0dGFjayx0LmRlY2F5LHQuc3VzdGFpbix0LnJlbGVhc2VdPXkoW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV0pLHQuX2hvbGRFbmQ9dC5fYmVnaW4rdC5fZHVyYXRpb24sdC5fZW5kPXQuX2hvbGRFbmQrdC5yZWxlYXNlKy4wMSx0LmZtaSYmKHQucz09PSJzYXcifHx0LnM9PT0ic2F3dG9vdGgiKSYmKHQucz0iemF3IiksRFt0LnNdKXtjb25zdCBkPURbdC5zXTt0Ll9zb3VuZD1uZXcgZCx0Ll9jaGFubmVscz0xfWVsc2UgaWYody5zYW1wbGVzLmhhcyh0LnMpKXtjb25zdCBkPXcuc2FtcGxlcy5nZXQodC5zKTt0Ll9idWZmZXJzPVtdLHQuX2NoYW5uZWxzPWQuY2hhbm5lbHMubGVuZ3RoO2ZvcihsZXQgYj0wO2I8dC5fY2hhbm5lbHM7YisrKXQuX2J1ZmZlcnMucHVzaChuZXcgdyhkLmNoYW5uZWxzW2JdLGQuc2FtcGxlUmF0ZSx0LnVuaXQ9PT0iYyIpKX1lbHNlIGNvbnNvbGUud2Fybigic291bmQgbm90IGxvYWRlZCIsdC5zKTt0LnBlbnYmJih0Ll9wZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV09eShbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV0pKSx0LnZpYiYmKHQuX3ZpYj1uZXcgZyx0LnZpYm1vZD10LnZpYm1vZD8/bygidmlibW9kIikpLHQuZm1pJiYodC5fZm09bmV3IGcsdC5mbWg9dC5mbWg/P28oImZtaCIpLHQuZm1lbnYmJih0Ll9mbWVudj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXT15KFt0LmZtYXR0YWNrLHQuZm1kZWNheSx0LmZtc3VzdGFpbix0LmZtcmVsZWFzZV0pKSksdC5fYWRzcj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksdC5kZWxheT1fKHQuZGVsYXk/P28oImRlbGF5IikpLHQuZGVsYXlmZWVkYmFjaz10LmRlbGF5ZmVlZGJhY2s/P28oImRlbGF5ZmVlZGJhY2siKSx0LmRlbGF5c3BlZWQ9dC5kZWxheXNwZWVkPz9vKCJkZWxheXNwZWVkIiksdC5kZWxheXRpbWU9dC5kZWxheXRpbWU/P28oImRlbGF5dGltZSIpLHQubHBlbnYmJih0Ll9scGVudj1uZXcgdih7ZGVjYXlDdXJ2ZTo0fSksW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXT15KFt0LmxwYXR0YWNrLHQubHBkZWNheSx0Lmxwc3VzdGFpbix0LmxwcmVsZWFzZV0pKSx0LmhwZW52JiYodC5faHBlbnY9bmV3IHYoe2RlY2F5Q3VydmU6NH0pLFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV09eShbdC5ocGF0dGFjayx0LmhwZGVjYXksdC5ocHN1c3RhaW4sdC5ocHJlbGVhc2VdKSksdC5icGVudiYmKHQuX2JwZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdPXkoW3QuYnBhdHRhY2ssdC5icGRlY2F5LHQuYnBzdXN0YWluLHQuYnByZWxlYXNlXSkpLHQuX2Nob3J1cz10LmNob3J1cz9bXTpudWxsLHQuX2xwZj10LmN1dG9mZj9bXTpudWxsLHQuX2hwZj10LmhjdXRvZmY/W106bnVsbCx0Ll9icGY9dC5iYW5kZj9bXTpudWxsLHQuX2NvYXJzZT10LmNvYXJzZT9bXTpudWxsLHQuX2NydXNoPXQuY3J1c2g/W106bnVsbCx0Ll9kaXN0b3J0PXQuZGlzdG9ydD9bXTpudWxsO2ZvcihsZXQgZD0wO2Q8dGhpcy5fY2hhbm5lbHM7ZCsrKShpPXQuX2xwZik9PW51bGx8fGkucHVzaChuZXcgcSksKG49dC5faHBmKT09bnVsbHx8bi5wdXNoKG5ldyBxKSwobD10Ll9icGYpPT1udWxsfHxsLnB1c2gobmV3IHEpLChyPXQuX2Nob3J1cyk9PW51bGx8fHIucHVzaChuZXcgWCksKHA9dC5fY29hcnNlKT09bnVsbHx8cC5wdXNoKG5ldyAkKSwoYT10Ll9jcnVzaCk9PW51bGx8fGEucHVzaChuZXcgVSksKGM9dC5fZGlzdG9ydCk9PW51bGx8fGMucHVzaChuZXcgWSl9dXBkYXRlKHMpe2lmKCF0aGlzLl9zb3VuZCYmIXRoaXMuX2J1ZmZlcnMpcmV0dXJuIDA7bGV0IHQ9KyhzPj10aGlzLl9iZWdpbiYmczw9dGhpcy5faG9sZEVuZCksaT10aGlzLmZyZXEqdGhpcy5zcGVlZDtpZih0aGlzLl9mbSYmdGhpcy5mbWghPT12b2lkIDAmJnRoaXMuZm1pIT09dm9pZCAwKXtsZXQgYT10aGlzLmZtaTtpZih0aGlzLl9mbWVudil7Y29uc3QgYj10aGlzLl9mbWVudi51cGRhdGUocyx0LHRoaXMuZm1hdHRhY2ssdGhpcy5mbWRlY2F5LHRoaXMuZm1zdXN0YWluLHRoaXMuZm1yZWxlYXNlKTthPXRoaXMuZm1lbnYqYiphfWNvbnN0IGM9aSp0aGlzLmZtaCxkPWMqYTtpPWkrdGhpcy5fZm0udXBkYXRlKGMpKmR9aWYodGhpcy5fdmliJiZ0aGlzLnZpYm1vZCE9PXZvaWQgMCYmKGk9aSoyKioodGhpcy5fdmliLnVwZGF0ZSh0aGlzLnZpYikqdGhpcy52aWJtb2QvMTIpKSx0aGlzLl9wZW52JiZ0aGlzLnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fcGVudi51cGRhdGUocyx0LHRoaXMucGF0dGFjayx0aGlzLnBkZWNheSx0aGlzLnBzdXN0YWluLHRoaXMucHJlbGVhc2UpO2k9aSthKnRoaXMucGVudn1sZXQgbj10aGlzLmN1dG9mZjtpZihuIT09dm9pZCAwJiZ0aGlzLl9scGVudil7Y29uc3QgYT10aGlzLl9scGVudi51cGRhdGUocyx0LHRoaXMubHBhdHRhY2ssdGhpcy5scGRlY2F5LHRoaXMubHBzdXN0YWluLHRoaXMubHByZWxlYXNlKTtuPXRoaXMubHBlbnYqYSpuK259bGV0IGw9dGhpcy5oY3V0b2ZmO2lmKGwhPT12b2lkIDAmJnRoaXMuX2hwZW52JiZ0aGlzLmhwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2hwZW52LnVwZGF0ZShzLHQsdGhpcy5ocGF0dGFjayx0aGlzLmhwZGVjYXksdGhpcy5ocHN1c3RhaW4sdGhpcy5ocHJlbGVhc2UpO2w9MioqdGhpcy5ocGVudiphKmwrbH1sZXQgcj10aGlzLmJhbmRmO2lmKHIhPT12b2lkIDAmJnRoaXMuX2JwZW52JiZ0aGlzLmJwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2JwZW52LnVwZGF0ZShzLHQsdGhpcy5icGF0dGFjayx0aGlzLmJwZGVjYXksdGhpcy5icHN1c3RhaW4sdGhpcy5icHJlbGVhc2UpO3I9MioqdGhpcy5icGVudiphKnIrcn1jb25zdCBwPXRoaXMuX2Fkc3IudXBkYXRlKHMsdCx0aGlzLmF0dGFjayx0aGlzLmRlY2F5LHRoaXMuc3VzdGFpbix0aGlzLnJlbGVhc2UpO2ZvcihsZXQgYT0wO2E8dGhpcy5fY2hhbm5lbHM7YSsrKXtpZih0aGlzLl9zb3VuZCYmdGhpcy5zPT09InB1bHNlIj90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSx0aGlzLnB3KTp0aGlzLl9zb3VuZD90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSk6dGhpcy5fYnVmZmVycyYmKHRoaXMub3V0W2FdPXRoaXMuX2J1ZmZlcnNbYV0udXBkYXRlKGkpKSx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLmdhaW4qdGhpcy52ZWxvY2l0eSx0aGlzLl9jaG9ydXMpe2NvbnN0IGM9dGhpcy5fY2hvcnVzW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNob3J1cywuMDMrLjA1KmEsMSwuMTEpO3RoaXMub3V0W2FdPWMrdGhpcy5vdXRbYV19dGhpcy5fbHBmJiYodGhpcy5fbHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxuLHRoaXMucmVzb25hbmNlKSx0aGlzLm91dFthXT10aGlzLl9scGZbYV0uczEpLHRoaXMuX2hwZiYmKHRoaXMuX2hwZlthXS51cGRhdGUodGhpcy5vdXRbYV0sbCx0aGlzLmhyZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdLXRoaXMuX2hwZlthXS5zMSksdGhpcy5fYnBmJiYodGhpcy5fYnBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxyLHRoaXMuYmFuZHEpLHRoaXMub3V0W2FdPXRoaXMuX2JwZlthXS5zMCksdGhpcy5fY29hcnNlJiYodGhpcy5vdXRbYV09dGhpcy5fY29hcnNlW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNvYXJzZSkpLHRoaXMuX2NydXNoJiYodGhpcy5vdXRbYV09dGhpcy5fY3J1c2hbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY3J1c2gpKSx0aGlzLl9kaXN0b3J0JiYodGhpcy5vdXRbYV09dGhpcy5fZGlzdG9ydFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5kaXN0b3J0LHRoaXMuZGlzdG9ydHZvbCkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnAsdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qdGhpcy5wb3N0Z2Fpbix0aGlzLl9idWZmZXJzfHwodGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qLjIpfWlmKHRoaXMuX2NoYW5uZWxzPT09MSYmKHRoaXMub3V0WzFdPXRoaXMub3V0WzBdKSx0aGlzLnBhbiE9PS41KXtjb25zdCBhPXRoaXMucGFuKk1hdGguUEkvMjt0aGlzLm91dFswXT10aGlzLm91dFswXSpNYXRoLmNvcyhhKSx0aGlzLm91dFsxXT10aGlzLm91dFsxXSpNYXRoLnNpbihhKX19fWNsYXNzIHN0e2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe2UodGhpcywidm9pY2VzIixbXSk7ZSh0aGlzLCJ2aWQiLDApO2UodGhpcywicSIsW10pO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJkZWxheXNlbmQiLFswLDBdKTtlKHRoaXMsImRlbGF5dGltZSIsbygiZGVsYXl0aW1lIikpO2UodGhpcywiZGVsYXlmZWVkYmFjayIsbygiZGVsYXlmZWVkYmFjayIpKTtlKHRoaXMsImRlbGF5c3BlZWQiLG8oImRlbGF5c3BlZWQiKSk7ZSh0aGlzLCJ0IiwwKTt0aGlzLnNhbXBsZVJhdGU9cyx0aGlzLnQ9TWF0aC5mbG9vcih0KnMpLHRoaXMuX2RlbGF5TD1uZXcgeCx0aGlzLl9kZWxheVI9bmV3IHh9bG9hZFNhbXBsZShzLHQsaSl7dy5zYW1wbGVzLnNldChzLHtjaGFubmVsczp0LHNhbXBsZVJhdGU6aX0pfXNjaGVkdWxlU3Bhd24ocyl7aWYocy5fYmVnaW49PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJbZG91Z2hdOiBzY2hlZHVsZVNwYXduIGV4cGVjdGVkIF9iZWdpbiB0byBiZSBzZXQiKTtpZihzLl9kdXJhdGlvbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2R1cmF0aW9uIHRvIGJlIHNldCIpO3Muc2FtcGxlUmF0ZT10aGlzLnNhbXBsZVJhdGU7Y29uc3QgdD1NYXRoLmZsb29yKHMuX2JlZ2luKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTp0LHR5cGU6InNwYXduIixhcmc6c30pfXNwYXduKHMpe3MuaWQ9dGhpcy52aWQrKztjb25zdCB0PW5ldyB0dChzKTt0aGlzLnZvaWNlcy5wdXNoKHQpO2NvbnN0IGk9TWF0aC5jZWlsKHQuX2VuZCp0aGlzLnNhbXBsZVJhdGUpO3RoaXMuc2NoZWR1bGUoe3RpbWU6aSx0eXBlOiJkZXNwYXduIixhcmc6dC5pZH0pfWRlc3Bhd24ocyl7dGhpcy52b2ljZXM9dGhpcy52b2ljZXMuZmlsdGVyKHQ9PnQuaWQhPT1zKX1zY2hlZHVsZShzKXtpZighdGhpcy5xLmxlbmd0aCl7dGhpcy5xLnB1c2gocyk7cmV0dXJufWxldCB0PTA7Zm9yKDt0PHRoaXMucS5sZW5ndGgmJnRoaXMucVt0XS50aW1lPHMudGltZTspdCsrO3RoaXMucS5zcGxpY2UodCwwLHMpfXVwZGF0ZSgpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy50Oyl0aGlzW3RoaXMucVswXS50eXBlXSh0aGlzLnFbMF0uYXJnKSx0aGlzLnEuc2hpZnQoKTt0aGlzLm91dFswXT0wLHRoaXMub3V0WzFdPTA7Zm9yKGxldCBpPTA7aTx0aGlzLnZvaWNlcy5sZW5ndGg7aSsrKXRoaXMudm9pY2VzW2ldLnVwZGF0ZSh0aGlzLnQvdGhpcy5zYW1wbGVSYXRlKSx0aGlzLm91dFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdLHRoaXMub3V0WzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0sdGhpcy52b2ljZXNbaV0uZGVsYXkmJih0aGlzLmRlbGF5c2VuZFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdKnRoaXMudm9pY2VzW2ldLmRlbGF5LHRoaXMuZGVsYXlzZW5kWzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0qdGhpcy52b2ljZXNbaV0uZGVsYXksdGhpcy5kZWxheXRpbWU9dGhpcy52b2ljZXNbaV0uZGVsYXl0aW1lLHRoaXMuZGVsYXlzcGVlZD10aGlzLnZvaWNlc1tpXS5kZWxheXNwZWVkLHRoaXMuZGVsYXlmZWVkYmFjaz10aGlzLnZvaWNlc1tpXS5kZWxheWZlZWRiYWNrKTtjb25zdCBzPXRoaXMuX2RlbGF5TC51cGRhdGUodGhpcy5kZWxheXNlbmRbMF0sdGhpcy5kZWxheXRpbWUpLHQ9dGhpcy5fZGVsYXlSLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFsxXSx0aGlzLmRlbGF5dGltZSk7dGhpcy5kZWxheXNlbmRbMF09cyp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5kZWxheXNlbmRbMV09dCp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5vdXRbMF0rPXMsdGhpcy5vdXRbMV0rPXQsdGhpcy50Kyt9fWNvbnN0IGV0PShoLHMsdCk9Pk1hdGgubWluKE1hdGgubWF4KGgscyksdCk7Y2xhc3MgaXQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZG91Z2g9bmV3IHN0KHNhbXBsZVJhdGUsY3VycmVudFRpbWUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3MuZGF0YS5zcGF3bj90aGlzLmRvdWdoLnNjaGVkdWxlU3Bhd24ocy5kYXRhLnNwYXduKTpzLmRhdGEuc2FtcGxlP3RoaXMuZG91Z2gubG9hZFNhbXBsZShzLmRhdGEuc2FtcGxlLHMuZGF0YS5jaGFubmVscyxzLmRhdGEuc2FtcGxlUmF0ZSk6cy5kYXRhLnNhbXBsZXM/cy5kYXRhLnNhbXBsZXMuZm9yRWFjaCgoW3QsaSxuXSk9Pnt0aGlzLmRvdWdoLmxvYWRTYW1wbGUodCxpLG4pfSk6Y29uc29sZS5sb2coInVucmVjb2duaXplZCBldmVudCB0eXBlIixzLmRhdGEpfX1wcm9jZXNzKHMsdCxpKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtjb25zdCBuPXRbMF07Zm9yKGxldCBsPTA7bDxuWzBdLmxlbmd0aDtsKyspe3RoaXMuZG91Z2gudXBkYXRlKCk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspbltyXVtsXT1ldCh0aGlzLmRvdWdoLm91dFtyXSwtMSwxKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRvdWdoLXByb2Nlc3NvciIsaXQpfSkoKTsK";const c7=u7,Tr=(t="test-canvas",e)=>{let{contextType:n="2d",pixelated:r=!1,pixelRatio:s=window.devicePixelRatio}={},i=document.querySelector("#"+t);if(!i){i=document.createElement("canvas"),i.id=t,i.width=window.innerWidth*s,i.height=window.innerHeight*s,i.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",r&&(i.style.imageRendering="pixelated"),document.body.prepend(i);let a;window.addEventListener("resize",()=>{a&&clearTimeout(a),a=setTimeout(()=>{i.width=window.innerWidth*s,i.height=window.innerHeight*s},200)})}return i.getContext(n,{willReadFrequently:!0})};let Ys={};function l7(t){Ys[t]!==void 0&&(cancelAnimationFrame(Ys[t]),delete Ys[t])}let Jn={};Ce.prototype.draw=function(t,e){if(typeof window>"u")return this;let{id:n=1,lookbehind:r=0,lookahead:s=0}=e,i=Math.max(k1(),0);l7(n),r=Math.abs(r),Jn[n]=(Jn[n]||[]).filter(c=>!c.isInFuture(i));let a=this.queryArc(i,i+s).filter(c=>c.hasOnset());Jn[n]=Jn[n].concat(a);let o;const u=()=>{const c=k1(),l=c+s;Jn[n]=Jn[n].filter(f=>f.isInNearPast(r,c));let d=Math.max(o||l,l-1/10);const m=this.queryArc(d,l).filter(f=>f.hasOnset());Jn[n]=Jn[n].concat(m),o=l,t(Jn[n],c,l,this),Ys[n]=requestAnimationFrame(u)};return Ys[n]=requestAnimationFrame(u),this};Ce.prototype.onPaint=function(t){return this.withState(e=>(e.controls.painters||(e.controls.painters=[]),e.controls.painters.push(t),e))};Ce.prototype.getPainters=function(){let t=[];return this.queryArc(0,0,{painters:t}),t};let h7={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function $n(){return h7}let py="#22222210";Ce.prototype.animate=function({callback:t,sync:e=!1,smear:n=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const r=Tr();let{clientWidth:s,clientHeight:i}=r.canvas;s*=window.devicePixelRatio,i*=window.devicePixelRatio;let a=n===0?"99":Number((1-n)*100).toFixed(0);a=a.length===1?`0${a}`:a,py=`#200010${a}`;const o=u=>{let c;u=Math.round(u),c=this.slow(1e3).queryArc(u,u),r.fillStyle=py,r.fillRect(0,0,s,i),c.forEach(l=>{let{x:d,y:m,w:f,h:g,s:b,r:x,angle:D=0,fill:G="darkseagreen"}=l.value;if(f*=s,g*=i,x!==void 0&&D!==void 0){const Z=D*2*Math.PI,[A,V]=[(s-f)/2,(i-g)/2];d=A+Math.cos(Z)*x*A,m=V+Math.sin(Z)*x*V}else d*=s-f,m*=i-g;const k={...l.value,x:d,y:m,w:f,h:g};r.fillStyle=G,b==="rect"?r.fillRect(d,m,f,g):b==="ellipse"&&(r.beginPath(),r.ellipse(d+f/2,m+g/2,f/2,g/2,0,0,2*Math.PI),r.fill()),t&&t(r,k,l)}),window.frame=requestAnimationFrame(o)};return window.frame=requestAnimationFrame(o),yv};const{x:L5,y:I7,w:N7,h:K7,angle:Y7,r:_7,fill:H7,smear:j7}=bv("x","y","w","h","angle","r","fill","smear");cu("rescale",function(t,e){return e.mul(L5(t).w(t).y(t).h(t))});cu("moveXY",function(t,e,n){return n.add(L5(t).y(e))});cu("zoomIn",function(t,e){const n=gv(1).sub(t).div(2);return e.rescale(t).move(n,n)});const Ls=(t,e,n)=>t*(n-e)+e,dy=t=>{let{value:e}=t;typeof t.value!="object"&&(e={value:e});let{note:n,n:r,freq:s,s:i}=e;if(s)return Mv(s);if(n=n??r,typeof n=="string")try{return Pv(n)}catch{return 0}return typeof n=="number"?n:i?"_"+i:e};Ce.prototype.pianoroll=function(t={}){let{cycles:e=4,playhead:n=.5,overscan:r=0,hideNegative:s=!1,ctx:i=Tr(),id:a=1}=t,o=-e*n,u=e*(1-n);const c=(l,d)=>(!s||l.whole.begin>=0)&&l.isWithinTime(d+o,d+u);return this.draw((l,d)=>{W5({...t,time:d,ctx:i,haps:l.filter(m=>c(m,d))})},{lookbehind:o-r,lookahead:u+r,id:a}),this};function W5({time:t,haps:e,cycles:n=4,playhead:r=.5,flipTime:s=0,flipValues:i=0,hideNegative:a=!1,inactive:o=$n().foreground,active:u=$n().foreground,background:c="transparent",smear:l=0,playheadColor:d=$n().foreground,minMidi:m=10,maxMidi:f=90,autorange:g=0,timeframe:b,fold:x=1,vertical:D=0,labels:G=!1,fill:k=1,fillActive:Z=!1,strokeActive:A=!0,stroke:V,hideInactive:E=0,colorizeInactive:B=1,fontFamily:K,ctx:R,id:j}={}){const W=R.canvas.width,_=R.canvas.height;let nt=-n*r,ut=n*(1-r);j&&(e=e.filter(ct=>ct.hasTag(j))),b&&(console.warn("timeframe is deprecated! use from/to instead"),nt=0,ut=b);const tt=D?_:W,st=D?W:_;let q=D?[tt,0]:[0,tt];const $=ut-nt,mt=D?[0,st]:[st,0];let Lt=f-m+1,Y=st/Lt,St=[];s&&q.reverse(),i&&mt.reverse();const{min:Kt,max:ye,values:Gt}=e.reduce(({min:ct,max:xt,values:ae},ee)=>{const Mt=dy(ee);return{min:Mt<ct?Mt:ct,max:Mt>xt?Mt:xt,values:ae.includes(Mt)?ae:[...ae,Mt]}},{min:1/0,max:-1/0,values:[]});g&&(m=Kt,f=ye,Lt=f-m+1),St=Gt.sort((ct,xt)=>typeof ct=="number"&&typeof xt=="number"?ct-xt:typeof ct=="number"?1:String(ct).localeCompare(String(xt))),Y=x?st/St.length:st/Lt,R.fillStyle=c,R.globalAlpha=1,l||(R.clearRect(0,0,W,_),R.fillRect(0,0,W,_)),e.forEach(ct=>{var Ee;const xt=ct.whole.begin<=t&&ct.endClipped>t;let ae=V??(A&&xt),ee=!xt&&k||xt&&Z;if(E&&!xt)return;let Mt=(Ee=ct.value)==null?void 0:Ee.color;u=Mt||u,o=B&&Mt||o,Mt=xt?u:o,R.fillStyle=ee?Mt:"transparent",R.strokeStyle=Mt;const{velocity:Ye=1,gain:Tt=1}=ct.value||{};R.globalAlpha=Ye*Tt;const We=(ct.whole.begin-(s?ut:nt))/$,oe=Ls(We,...q);let ne=Ls(ct.duration/$,0,tt);const be=dy(ct),Ge=x?St.indexOf(be)/St.length:(Number(be)-m)/Lt,Ae=Ls(Ge,...mt);let De=0;const Se=Ls(t/$,...q);let Jt;if(D?Jt=[Ae+1-(i?Y:0),tt-Se+oe+De+1-(s?0:ne),Y-2,ne-2]:Jt=[oe-Se+De+1-(s?ne:0),Ae+1-(i?0:Y),ne-2,Y-2],ae&&R.strokeRect(...Jt),ee&&R.fillRect(...Jt),G){const Pt=ct.value.note??ct.value.s+(ct.value.n?`:${ct.value.n}`:""),{label:Vt,activeLabel:et}=ct.value,It=(xt&&et||Vt)??Pt;let kt=D?ne:Y*.75;R.font=`${kt}px ${K||"monospace"}`,R.fillStyle=ee?"black":Mt,R.textBaseline="top",R.fillText(It,...Jt)}}),R.globalAlpha=1;const Yt=Ls(-nt/$,...q);return R.strokeStyle=d,R.beginPath(),D?(R.moveTo(0,Yt),R.lineTo(st,Yt)):(R.moveTo(Yt,0),R.lineTo(Yt,st)),R.stroke(),this}function p7(t,e={}){let[n,r]=t;n=Math.abs(n);const s=r+n,i=s!==0?n/s:0;return{fold:1,...e,cycles:s,playhead:i}}const d7=(t={})=>(e,n,r,s)=>W5({ctx:e,time:n,haps:r,...p7(s,t)});Ce.prototype.punchcard=function(t){return this.onPaint(d7(t))};Ce.prototype.wordfall=function(t){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...t})};function m7(t,e,n,r){const s=(t-90)*Math.PI/180;return[n+Math.cos(s)*e,r+Math.sin(s)*e]}const my=(t,e,n,r,s=0)=>m7((t+s)*360,e*t,n,r);function fy(t){let{ctx:e,from:n=0,to:r=3,margin:s=50,cx:i=100,cy:a=100,rotate:o=0,thickness:u=s/2,color:c=$n().foreground,cap:l="round",stretch:d=1,fromOpacity:m=1,toOpacity:f=1}=t;n*=d,r*=d,o*=d,e.lineWidth=u,e.lineCap=l,e.strokeStyle=c,e.globalAlpha=m,e.beginPath();let[g,b]=my(n,s,i,a,o);e.moveTo(g,b);const x=1/60;let D=n;for(;D<=r;){const[G,k]=my(D,s,i,a,o);e.globalAlpha=(D-n)/(r-n)*f,e.lineTo(G,k),D+=x}e.stroke()}function f7(t){let{stretch:e=1,size:n=80,thickness:r=n/2,cap:s="butt",inset:i=3,playheadColor:a="#ffffff",playheadLength:o=.02,playheadThickness:u=r,padding:c=0,steady:l=1,activeColor:d=$n().foreground,inactiveColor:m=$n().gutterForeground,colorizeInactive:f=0,fade:g=!0,ctx:b,time:x,haps:D,drawTime:G,id:k}=t;k&&(D=D.filter(W=>W.hasTag(k)));const[Z,A]=[b.canvas.width,b.canvas.height];b.clearRect(0,0,Z*2,A*2);const[V,E]=[Z/2,A/2],B={margin:n/e,cx:V,cy:E,stretch:e,cap:s,thickness:r},K={...B,thickness:u,from:i-o,to:i,color:a},[R]=G,j=l*x;D.forEach(W=>{var $;const _=W.whole.begin<=x&&W.endClipped>x,nt=W.whole.begin-x+i,ut=W.endClipped-x+i-c,tt=(($=W.value)==null?void 0:$.color)||d,st=f||_?tt:m,q=g?1-Math.abs((W.whole.begin-x)/R):1;fy({ctx:b,...B,from:nt,to:ut,rotate:j,color:st,fromOpacity:q,toOpacity:q})}),fy({ctx:b,...K,rotate:j})}Ce.prototype.spiral=function(t={}){return this.onPaint((e,n,r,s)=>f7({ctx:e,time:n,haps:r,drawTime:s,...t}))};const y7=vv(36),yy=(t,e,n,r)=>{r=r*Math.PI*2;const s=Math.sin(r)*n+t,i=Math.cos(r)*n+e;return[s,i]},by=(t,e)=>.5-Math.log2(t/e)%1;function b7({haps:t,ctx:e,id:n,hapcircles:r=1,circle:s=0,edo:i=12,root:a=y7,thickness:o=3,hapRadius:u=6,mode:c="flake",margin:l=10}={}){const d=c==="polygon",m=c==="flake",f=e.canvas.width,g=e.canvas.height;e.clearRect(0,0,f,g);const b=$n().foreground,x=Math.min(f,g)/2-o/2-u-l,D=f/2,G=g/2;n&&(t=t.filter(Z=>Z.hasTag(n))),e.strokeStyle=b,e.fillStyle=b,e.globalAlpha=1,e.lineWidth=o,s&&(e.beginPath(),e.arc(D,G,x,0,2*Math.PI),e.stroke()),i&&(Array.from({length:i},(Z,A)=>{const V=by(a*Math.pow(2,A/i),a),[E,B]=yy(D,G,x,V);e.beginPath(),e.arc(E,B,u,0,2*Math.PI),e.fill()}),e.stroke());let k=[];e.lineWidth=u,t.forEach(Z=>{let A;try{A=Cv(Z)}catch{return}const V=by(A,a),[E,B]=yy(D,G,x,V),K=Z.value.color||b;e.strokeStyle=K,e.fillStyle=K;const{velocity:R=1,gain:j=1}=Z.value||{},W=R*j;e.globalAlpha=W,k.push([E,B,V,K,W]),e.beginPath(),r&&(e.moveTo(E+u,B),e.arc(E,B,u,0,2*Math.PI),e.fill()),m&&(e.moveTo(D,G),e.lineTo(E,B)),e.stroke()}),e.strokeStyle=b,e.globalAlpha=1,d&&k.length&&(k=k.sort((Z,A)=>Z[2]-A[2]),e.beginPath(),e.moveTo(k[0][0],k[0][1]),k.forEach(([Z,A,V,E,B])=>{e.strokeStyle=E,e.globalAlpha=B,e.lineTo(Z,A)}),e.lineTo(k[0][0],k[0][1]),e.stroke())}Ce.prototype.pitchwheel=function(t={}){let{ctx:e=Tr(),id:n=1}=t;return this.tag(n).onPaint((r,s,i)=>b7({...t,ctx:e,haps:i.filter(a=>a.isActive(s)),id:n}))};let _s;function g7(){const t=Xt();_s=Ke(t,"dough-processor",{},{outputChannelCount:[2]}),rb(_s)}const Ii=new Map,gy=new Map;Ce.prototype.supradough=function(){return this.onTrigger((t,e,n,r)=>{t.value._begin=r,t.value._duration=t.duration/n,!_s&&g7();const s=(t.value.bank?t.value.bank+"_":"")+t.value.s,i=t.value.n??0,a=`${s}:${i}`;if(Ii.has(s)&&(t.value.s=a),Ii.has(s)&&!gy.has(a)){const o=Ii.get(s),u=o[i%o.length];console.log(`load ${a} from ${u}`);const c=P7(u);gy.set(a,c),c.then(({channels:l,sampleRate:d})=>_s.port.postMessage({sample:a,channels:l,sampleRate:d}))}_s.port.postMessage({spawn:t.value})},1)};function M7(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,r]=t.split("github:");return r=r.endsWith("/")?r.slice(0,-1):r,r.split("/").length===2&&(r+="/main"),`https://raw.githubusercontent.com/${r}/${e}`}async function R5(t){if(t.startsWith("github:")&&(t=M7(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432"),t.startsWith("shabda:")){let[r,s]=t.split("shabda:");t=`https://shabda.ndre.gr/${s}.json?strudel=1`}if(t.startsWith("shabda/speech")){let[r,s]=t.split("shabda/speech");s=s.startsWith("/")?s.substring(1):s;let[i,a]=s.split(":"),o="f",u="en-GB";i&&([u,o]=i.split("/")),t=`https://shabda.ndre.gr/speech/${a}.json?gender=${o}&language=${u}&strudel=1'`}if(typeof fetch!="function")return;const e=t.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const n=await fetch(t).then(r=>r.json()).catch(r=>{throw console.error(r),new Error(`error loading "${t}"`)});return[n,n._base||e]}async function P7(t){const e=await fetch(t).then(r=>r.arrayBuffer()).then(r=>Xt().decodeAudioData(r));let n=[];for(let r=0;r<e.numberOfChannels;r++)n.push(e.getChannelData(r));return{channels:n,sampleRate:e.sampleRate}}async function T5(t,e){if(typeof t=="string"){const[n,r]=await R5(t);return T5(n,r)}Object.entries(t).map(async([n,r])=>{n!=="_base"&&(r=r.map(s=>e+s),Ii.set(n,r))})}tb(c7);const{Pattern:C7,logger:v7,repl:x7}=xv;xy(v7);const A7=t=>(t.ensureObjectValue(),t.value),z5=(t,e,n,r,s)=>{var i;return gu(A7(t),s,n,r,(i=t.whole)==null?void 0:i.begin.valueOf())};function D7(t={}){return t={getTime:()=>Xt().currentTime,defaultOutput:z5,...t},x7(t)}C7.prototype.dough=function(){return this.onTrigger(lb,1)};function I5(t,{align:e=!0,color:n="white",thickness:r=3,scale:s=.25,pos:i=.75,trigger:a=0,ctx:o=Tr(),id:u=1}={}){o.lineWidth=r,o.strokeStyle=n;let c=o.canvas;if(!t){o.beginPath();let b=i*c.height;o.moveTo(0,b),o.lineTo(c.width,b),o.stroke();return}const l=na("time",u);o.beginPath();const d=t.frequencyBinCount;let m=e?Array.from(l).findIndex((b,x,D)=>x&&D[x-1]>-a&&b<=-a):0;m=Math.max(m,0);const f=c.width*1/d;let g=0;for(let b=m;b<d;b++){const x=l[b]+1,D=(i-s*(x-1))*c.height;b===0?o.moveTo(g,D):o.lineTo(g,D),g+=f}o.stroke()}function N5(t,{color:e="white",scale:n=.25,pos:r=.75,lean:s=.5,min:i=-150,max:a=0,ctx:o=Tr(),id:u=1}={}){if(!t){o.beginPath();let g=r*l.height;o.moveTo(0,g),o.lineTo(l.width,g),o.stroke();return}const c=na("frequency",u),l=o.canvas;o.fillStyle=e;const d=t.frequencyBinCount,m=l.width*1/d;let f=0;for(let g=0;g<d;g++){const b=Py((c[g]-i)/(a-i),0,1)*n,x=b*l.height,D=(r-b*s)*l.height;o.fillRect(f,D,Math.max(m,1),x),f+=m}}function K5(t=0,e="0,0,0",n=Tr()){t?(n.fillStyle=`rgba(${e},${1-t})`,n.fillRect(0,0,n.canvas.width,n.canvas.height)):n.clearRect(0,0,n.canvas.width,n.canvas.height)}Ce.prototype.fscope=function(t={}){let e=t.id??1;return this.analyze(e).draw(()=>{K5(t.smear,"0,0,0",t.ctx),ke[e]&&N5(ke[e],t)},{id:e})};Ce.prototype.tscope=function(t={}){let e=t.id??1;return this.analyze(e).draw(n=>{var r,s;t.color=((s=(r=n[0])==null?void 0:r.value)==null?void 0:s.color)||$n().foreground,t.color,K5(t.smear,"0,0,0",t.ctx),I5(ke[e],t)},{id:e})};Ce.prototype.scope=Ce.prototype.tscope;let My={};Ce.prototype.spectrum=function(t={}){let e=t.id??1;return this.analyze(e).draw(n=>{var r,s;t.color=((s=(r=n[0])==null?void 0:r.value)==null?void 0:s.color)||My[e]||$n().foreground,My[e]=t.color,F7(ke[e],t)},{id:e})};Ce.prototype.scope=Ce.prototype.tscope;const Wo=new Map;function F7(t,{thickness:e=3,speed:n=1,min:r=-80,max:s=0,ctx:i=Tr(),id:a=1,color:o}={}){if(i.lineWidth=e,i.strokeStyle=o,!t)return;const u=n,c=na("frequency",a),l=i.canvas;i.fillStyle=o;const d=t.frequencyBinCount;let m=Wo.get(a)||i.getImageData(0,0,l.width,l.height);Wo.set(a,m),i.clearRect(0,0,i.canvas.width,i.canvas.height),i.putImageData(m,-u,0);let f=l.width-n;for(let g=0;g<d;g++){const b=Py((c[g]-r)/(s-r),0,1);i.globalAlpha=b;const x=Math.log(g+1)/Math.log(d)*l.height;i.fillRect(f,l.height-x,u,2)}Wo.set(a,i.getImageData(0,0,l.width,l.height))}const J7=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY:fu,Warpmode:Ko,aliasBank:hx,get analysers(){return ke},get analysersData(){return Dr},applyFM:Hs,applyGainCurve:On,applyParameterModulators:zo,connectToDestination:rb,createFilter:Li,destroyAudioWorkletNode:Ur,distortionAlgorithms:pu,dough:Sx,doughTrigger:lb,doughsamples:T5,drawFrequencyScope:N5,drawTimeScope:I5,drywet:Gy,dspWorklet:ub,effectSend:Ni,errorLogger:vy,fetchSampleMap:R5,gainNode:Ie,getADSRValues:an,getAnalyserById:sb,getAnalyzerData:na,getAudioContext:Xt,getAudioContextCurrentTime:Tv,getAudioDevices:Qy,getCachedBuffer:$v,getCompressor:Xy,getDefaultValue:re,getDistortion:ky,getDistortionAlgorithm:qv,getFrequencyFromValue:xr,getLfo:ni,getLoadedBuffer:ex,getOscillator:ab,getParamADSR:sn,getPitchEnvelope:as,getSampleBuffer:Ly,getSampleBufferSource:Wy,getSampleInfo:By,getSound:ts,getVibratoOscillator:os,getWorklet:Ke,getZZFX:ob,initAudio:eb,initAudioOnFirstClick:Px,loadBuffer:mu,logger:ce,noises:hu,onTriggerSample:Yy,onTriggerSynth:pb,processSampleMap:Iy,registerSampleSource:_y,registerSamplesPrefix:nx,registerSound:Vn,registerSynthSounds:wx,registerWaveTable:Mu,registerWorklet:tb,registerZZFXSounds:Gx,resetDefaultValues:qy,resetDefaults:fx,resetGlobalEffects:xx,resetLoadedSounds:gx,reverseBuffer:Ry,samples:Ky,setDefault:mx,setDefaultAudioContext:Zy,setDefaultValue:bu,setDefaultValues:yx,setGainCurve:cx,setLogger:xy,setMaxPolyphony:jy,setMultiChannelOrbits:Oy,setVersionDefaults:bx,soundAlias:px,soundMap:An,superdough:gu,superdoughTrigger:Ax,tables:Wx,waveformN:ib,webAudioTimeout:qr,webaudioOutput:z5,webaudioRepl:D7},Symbol.toStringTag,{value:"Module"}));export{An as B,Av as a,J7 as b,z7 as i,X7 as o};
