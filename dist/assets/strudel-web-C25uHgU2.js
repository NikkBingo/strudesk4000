var $5=Object.defineProperty;var eC=(e,t,n)=>t in e?$5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S1=(e,t,n)=>eC(e,typeof t!="symbol"?t+"":t,n);import{P as tC,l as ru,Y as nC,F as rC,n as sC,z as iC,a as aC,p as oC,f as At,i as B1,v as uC,H as dg,b as cC}from"./strudel-core-DenOJOif.js";typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const le=BigInt(0),be=BigInt(1),Rs=BigInt(2),ko=BigInt(5),Rt=BigInt(10),lC=2e3,q={s:be,n:le,d:be};function Nn(e,t){try{e=BigInt(e)}catch{throw ur()}return e*t}function ln(e){return typeof e=="bigint"?e:Math.floor(e)}function qe(e,t){if(t===le)throw su();const n=Object.create(Je.prototype);n.s=e<le?-be:be,e=e<le?-e:e;const r=Cr(e,t);return n.n=e/r,n.d=t/r,n}function Kr(e){const t={};let n=e,r=Rs,s=ko-be;for(;s<=n;){for(;n%r===le;)n/=r,t[r]=(t[r]||le)+be;s+=be+Rs*r++}return n!==e?n>1&&(t[n]=(t[n]||le)+be):t[e]=(t[e]||le)+be,t}const dt=function(e,t){let n=le,r=be,s=be;if(e!=null)if(t!==void 0){if(typeof e=="bigint")n=e;else{if(isNaN(e))throw ur();if(e%1!==0)throw Z1();n=BigInt(e)}if(typeof t=="bigint")r=t;else{if(isNaN(t))throw ur();if(t%1!==0)throw Z1();r=BigInt(t)}s=n*r}else if(typeof e=="object"){if("d"in e&&"n"in e)n=BigInt(e.n),r=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(r=BigInt(e[1]));else if(typeof e=="bigint")n=e;else throw ur();s=n*r}else if(typeof e=="number"){if(isNaN(e))throw ur();if(e<0&&(s=-be,e=-e),e%1===0)n=BigInt(e);else if(e>0){let i=1,a=0,o=1,u=1,c=1,p=1e7;for(e>=1&&(i=10**Math.floor(1+Math.log10(e)),e/=i);o<=p&&c<=p;){let d=(a+u)/(o+c);if(e===d){o+c<=p?(n=a+u,r=o+c):c>o?(n=u,r=c):(n=a,r=o);break}else e>d?(a+=u,o+=c):(u+=a,c+=o),o>p?(n=u,r=c):(n=a,r=o)}n=BigInt(n)*BigInt(i),r=BigInt(r)}}else if(typeof e=="string"){let i=0,a=le,o=le,u=le,c=be,p=be,d=e.replace(/_/g,"").match(/\d+|./g);if(d===null)throw ur();if(d[i]==="-"?(s=-be,i++):d[i]==="+"&&i++,d.length===i+1?o=Nn(d[i++],s):d[i+1]==="."||d[i]==="."?(d[i]!=="."&&(a=Nn(d[i++],s)),i++,(i+1===d.length||d[i+1]==="("&&d[i+3]===")"||d[i+1]==="'"&&d[i+3]==="'")&&(o=Nn(d[i],s),c=Rt**BigInt(d[i].length),i++),(d[i]==="("&&d[i+2]===")"||d[i]==="'"&&d[i+2]==="'")&&(u=Nn(d[i+1],s),p=Rt**BigInt(d[i+1].length)-be,i+=3)):d[i+1]==="/"||d[i+1]===":"?(o=Nn(d[i],s),c=Nn(d[i+2],be),i+=3):d[i+3]==="/"&&d[i+1]===" "&&(a=Nn(d[i],s),o=Nn(d[i+2],s),c=Nn(d[i+4],be),i+=5),d.length<=i)r=c*p,s=n=u+r*a+p*o;else throw ur()}else if(typeof e=="bigint")n=e,s=e,r=be;else throw ur();if(r===le)throw su();q.s=s<le?-be:be,q.n=n<le?-n:n,q.d=r<le?-r:r};function pC(e,t,n){let r=be;for(;t>le;e=e*e%n,t>>=be)t&be&&(r=r*e%n);return r}function hC(e,t){for(;t%Rs===le;t/=Rs);for(;t%ko===le;t/=ko);if(t===be)return le;let n=Rt%t,r=1;for(;n!==be;r++)if(n=n*Rt%t,r>lC)return le;return BigInt(r)}function dC(e,t,n){let r=be,s=pC(Rt,n,t);for(let i=0;i<300;i++){if(r===s)return BigInt(i);r=r*Rt%t,s=s*Rt%t}return 0}function Cr(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function Je(e,t){if(dt(e,t),this instanceof Je)e=Cr(q.d,q.n),this.s=q.s,this.n=q.n/e,this.d=q.d/e;else return qe(q.s*q.n,q.d)}var su=function(){return new Error("Division by Zero")},ur=function(){return new Error("Invalid argument")},Z1=function(){return new Error("Parameters must be integer")};Je.prototype={s:be,n:le,d:be,abs:function(){return qe(this.n,this.d)},neg:function(){return qe(-this.s*this.n,this.d)},add:function(e,t){return dt(e,t),qe(this.s*this.n*q.d+q.s*this.d*q.n,this.d*q.d)},sub:function(e,t){return dt(e,t),qe(this.s*this.n*q.d-q.s*this.d*q.n,this.d*q.d)},mul:function(e,t){return dt(e,t),qe(this.s*q.s*this.n*q.n,this.d*q.d)},div:function(e,t){return dt(e,t),qe(this.s*q.s*this.n*q.d,this.d*q.n)},clone:function(){return qe(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return qe(this.s*this.n%this.d,be);if(dt(e,t),le===q.n*this.d)throw su();return qe(this.s*(q.d*this.n)%(q.n*this.d),q.d*this.d)},gcd:function(e,t){return dt(e,t),qe(Cr(q.n,this.n)*Cr(q.d,this.d),q.d*this.d)},lcm:function(e,t){return dt(e,t),q.n===le&&this.n===le?qe(le,be):qe(q.n*this.n,Cr(q.n,this.n)*Cr(q.d,this.d))},inverse:function(){return qe(this.s*this.d,this.n)},pow:function(e,t){if(dt(e,t),q.d===be)return q.s<le?qe((this.s*this.d)**q.n,this.n**q.n):qe((this.s*this.n)**q.n,this.d**q.n);if(this.s<le)return null;let n=Kr(this.n),r=Kr(this.d),s=be,i=be;for(let a in n)if(a!=="1"){if(a==="0"){s=le;break}if(n[a]*=q.n,n[a]%q.d===le)n[a]/=q.d;else return null;s*=BigInt(a)**n[a]}for(let a in r)if(a!=="1"){if(r[a]*=q.n,r[a]%q.d===le)r[a]/=q.d;else return null;i*=BigInt(a)**r[a]}return q.s<le?qe(i,s):qe(s,i)},log:function(e,t){if(dt(e,t),this.s<=le||q.s<=le)return null;const n={},r=Kr(q.n),s=Kr(q.d),i=Kr(this.n),a=Kr(this.d);for(const c in s)r[c]=(r[c]||le)-s[c];for(const c in a)i[c]=(i[c]||le)-a[c];for(const c in r)c!=="1"&&(n[c]=!0);for(const c in i)c!=="1"&&(n[c]=!0);let o=null,u=null;for(const c in n){const p=r[c]||le,d=i[c]||le;if(p===le){if(d!==le)return null;continue}let m=d,f=p;const P=Cr(m,f);if(m/=P,f/=P,o===null&&u===null)o=m,u=f;else if(m*u!==o*f)return null}return o!==null&&u!==null?qe(o,u):null},equals:function(e,t){return dt(e,t),this.s*this.n*q.d===q.s*q.n*this.d},lt:function(e,t){return dt(e,t),this.s*this.n*q.d<q.s*q.n*this.d},lte:function(e,t){return dt(e,t),this.s*this.n*q.d<=q.s*q.n*this.d},gt:function(e,t){return dt(e,t),this.s*this.n*q.d>q.s*q.n*this.d},gte:function(e,t){return dt(e,t),this.s*this.n*q.d>=q.s*q.n*this.d},compare:function(e,t){dt(e,t);let n=this.s*this.n*q.d-q.s*q.n*this.d;return(le<n)-(n<le)},ceil:function(e){return e=Rt**BigInt(e||0),qe(ln(this.s*e*this.n/this.d)+(e*this.n%this.d>le&&this.s>=le?be:le),e)},floor:function(e){return e=Rt**BigInt(e||0),qe(ln(this.s*e*this.n/this.d)-(e*this.n%this.d>le&&this.s<le?be:le),e)},round:function(e){return e=Rt**BigInt(e||0),qe(ln(this.s*e*this.n/this.d)+this.s*((this.s>=le?be:le)+Rs*(e*this.n%this.d)>this.d?be:le),e)},roundTo:function(e,t){dt(e,t);const n=this.n*q.d,r=this.d*q.n,s=n%r;let i=ln(n/r);return s+s>=r&&i++,qe(this.s*i*q.n,q.d)},divisible:function(e,t){return dt(e,t),!(!(q.n*this.d)||this.n*q.d%(q.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,n=this.d;e=e||15;let r=hC(t,n),s=dC(t,n,r),i=this.s<le?"-":"";if(i+=ln(t/n),t%=n,t*=Rt,t&&(i+="."),r){for(let a=s;a--;)i+=ln(t/n),t%=n,t*=Rt;i+="(";for(let a=r;a--;)i+=ln(t/n),t%=n,t*=Rt;i+=")"}else for(let a=e;t&&a--;)i+=ln(t/n),t%=n,t*=Rt;return i},toFraction:function(e){let t=this.n,n=this.d,r=this.s<le?"-":"";if(n===be)r+=t;else{let s=ln(t/n);e&&s>le&&(r+=s,r+=" ",t%=n),r+=t,r+="/",r+=n}return r},toLatex:function(e){let t=this.n,n=this.d,r=this.s<le?"-":"";if(n===be)r+=t;else{let s=ln(t/n);e&&s>le&&(r+=s,t%=n),r+="\\frac{",r+=t,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let e=this.n,t=this.d,n=[];do{n.push(ln(e/t));let r=e%t;e=t,t=r}while(e!==be);return n},simplify:function(e){const t=BigInt(1/(e||.001)|0),n=this.abs(),r=n.toContinued();for(let s=1;s<r.length;s++){let i=qe(r[s-1],be);for(let o=s-2;o>=0;o--)i=i.inverse().add(r[o]);let a=i.sub(n);if(a.n*t<a.d)return i.mul(this.s)}return this}};const ji="strudel.log";let mC=1e3,k1,V1;function iu(e,t="cyclist"){ct(`[${t}] error: ${e.message}`)}function ct(e,t,n={}){let r=performance.now();k1===e&&r-V1<mC||(k1=e,V1=r,console.log(`%c${e}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(ji,{detail:{message:e,type:t,data:n}})))}ct.key=ji;const mg=e=>/^[a-gA-G][#bs]*[0-9]$/.test(e),fr=e=>/^[a-gA-G][#bsf]*[0-9]?$/.test(e),au=e=>{var s;if(typeof e!="string")return[];const[t,n="",r]=((s=e.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/))==null?void 0:s.slice(1))||[];return t?[t,n,r?Number(r):void 0]:[]},fC={c:0,d:2,e:4,f:5,g:7,a:9,b:11},gC={"#":1,b:-1,s:1,f:-1},$n=(e,t=3)=>{const[n,r,s=t]=au(e);if(!n)throw new Error('not a note: "'+e+'"');const i=fC[n.toLowerCase()],a=(r==null?void 0:r.split("").reduce((o,u)=>o+gC[u],0))||0;return(Number(s)+1)*12+i+a},Er=e=>Math.pow(2,(e-69)/12)*440,Ji=e=>12*Math.log(e/440)/Math.LN2+69,fg=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:r}=e;if(typeof n=="number")return Ji(n);if(typeof r=="string")return $n(r);if(typeof r=="number")return r;if(!t)throw new Error("valueToMidi: expected freq or note to be set");return t},gg=(e,t)=>(e-t)*1e3,ou=e=>Er(typeof e=="number"?e:$n(e)),yC=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],yg=e=>{const t=Math.floor(e/12)-1;return yC[e%12]+t},Yt=(e,t)=>(e%t+t)%t,uu=e=>e.reduce((t,n)=>t+n)/e.length;function cu(e,t=0){return isNaN(Number(e))?(ct(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const bg=(e,t)=>Yt(Math.round(cu(e??0,0)),t),Mg=e=>{let{value:t,context:n}=e,r=t;if(typeof r=="object"&&!Array.isArray(r)&&(r=r.note||r.n||r.value,r===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(t)}`);if(typeof r=="number"&&n.type!=="frequency")r=Er(e.value);else if(typeof r=="number"&&n.type==="frequency")r=e.value;else if(typeof r!="string"||!fr(r))throw new Error("not a note: "+JSON.stringify(r));return r},lu=e=>{let{value:t,context:n}=e;if(typeof t=="object")return t.freq?t.freq:ou(t.note||t.n||t.value);if(typeof t=="number"&&n.type!=="frequency")t=Er(e.value);else if(typeof t=="string"&&fr(t))t=Er($n(e.value));else if(typeof t!="number")throw new Error("not a note or frequency: "+t);return t},pu=(e,t)=>e.slice(t).concat(e.slice(0,t)),hu=(...e)=>e.reduce((t,n)=>(...r)=>t(n(...r)),t=>t),Pg=(...e)=>hu(...e.reverse()),Vr=e=>e.filter(t=>t!=null),Zn=e=>[].concat(...e),Ar=e=>e,vg=(e,t)=>e,Ui=(e,t)=>Array.from({length:t-e+1},(n,r)=>r+e);function Pe(e,t,n=e.length){const r=function s(...i){if(i.length>=n)return e.apply(this,i);{const a=function(...o){return s.apply(this,i.concat(o))};return t&&t(a,i),a}};return t&&t(r,[]),r}function qi(e){const t=Number(e);if(!isNaN(t))return t;if(fr(e))return $n(e);throw new Error(`cannot parse as numeral: "${e}"`)}function Qi(e,t){return(...n)=>e(...n.map(t))}function Wt(e){return Qi(e,qi)}function du(e){const t=Number(e);if(!isNaN(t))return t;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[e];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${e}"`)}const Cg=e=>Qi(e,du),$i=function(e,t){return[t.slice(0,e),t.slice(e)]},Us=(e,t,n)=>t.map((r,s)=>e(r,n[s])),mu=function(e){const t=[];for(let n=0;n<e.length-1;++n)t.push([e[n],e[n+1]]);return t},qs=(e,t,n)=>Math.min(Math.max(e,t),n),bC=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],MC=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],PC=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],vC=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],CC=["I","Ro","Ha","Ni","Ho","He","To"],AC=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Ag=(e,t="letters")=>{const n=(t==="solfeggio"?bC:t==="indian"?MC:t==="german"?PC:t==="byzantine"?vC:t==="japanese"?CC:AC)[e%12],r=Math.floor(e/12)-1;return n+r};function Dg(e){var t={};return e.filter(function(n){return t.hasOwn(n)?!1:t[n]=!0})}function xg(e){return e.sort().filter(function(t,n,r){return!n||t!=r[n-1]})}function fu(e){return e.sort((t,n)=>t.compare(n)).filter(function(t,n,r){return!n||t.ne(r[n-1])})}function gu(e){const t=new TextEncoder().encode(e);return btoa(String.fromCharCode(...t))}function yu(e){const t=new Uint8Array(atob(e).split("").map(n=>n.charCodeAt(0)));return new TextDecoder().decode(t)}function Fg(e){return encodeURIComponent(gu(e))}function wg(e){return yu(decodeURIComponent(e))}function bu(e,t){return Array.isArray(e)?e.map(t):Object.fromEntries(Object.entries(e).map(([n,r],s)=>[n,t(r,n,s)]))}function Vi(e,t){return e/t}class Mu{constructor({getTargetClockTime:t=DC,weight:n=16,offsetDelta:r=.005,checkAfterTime:s=2,resetAfterTime:i=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=t,this.weight=n,this.offsetDelta=r,this.checkAfterTime=s,this.resetAfterTime=i,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(t){const n=this.getTargetClockTime(),r=n-this.timeAtPrevOffsetSample,s=n-t;if(r>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=s),this.prevOffsetTimes.push(s),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||r>this.checkAfterTime){this.timeAtPrevOffsetSample=n;const i=uu(this.prevOffsetTimes);Math.abs(i-this.offsetTime)>this.offsetDelta&&(this.offsetTime=i)}return this.offsetTime}calculateTimestamp(t,n){return this.calculateOffset(t)+n}}function Eg(){return performance.now()*.001}function DC(){return Date.now()*.001}const Pu=new Map([["control","Control"],["ctrl","Control"],["alt","Alt"],["shift","Shift"],["down","ArrowDown"],["up","ArrowUp"],["left","ArrowLeft"],["right","ArrowRight"]]);let Ps;function vu(){if(Ps==null){if(typeof window>"u")return;Ps={},window.addEventListener("keydown",e=>{Ps[e.key]=!0}),window.addEventListener("keyup",e=>{Ps[e.key]=!1})}return{...Ps}}function ea(e,t=!1){return typeof e=="object"?t?JSON.stringify(e).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(e):e}Je.prototype.sam=function(){return this.floor()};Je.prototype.nextSam=function(){return this.sam().add(1)};Je.prototype.wholeCycle=function(){return new tt(this.sam(),this.nextSam())};Je.prototype.cyclePos=function(){return this.sub(this.sam())};Je.prototype.lt=function(e){return this.compare(e)<0};Je.prototype.gt=function(e){return this.compare(e)>0};Je.prototype.lte=function(e){return this.compare(e)<=0};Je.prototype.gte=function(e){return this.compare(e)>=0};Je.prototype.eq=function(e){return this.compare(e)==0};Je.prototype.ne=function(e){return this.compare(e)!=0};Je.prototype.max=function(e){return this.gt(e)?this:e};Je.prototype.maximum=function(...e){return e=e.map(t=>new Je(t)),e.reduce((t,n)=>n.max(t),this)};Je.prototype.min=function(e){return this.lt(e)?this:e};Je.prototype.mulmaybe=function(e){return e!==void 0?this.mul(e):void 0};Je.prototype.divmaybe=function(e){return e!==void 0?this.div(e):void 0};Je.prototype.addmaybe=function(e){return e!==void 0?this.add(e):void 0};Je.prototype.submaybe=function(e){return e!==void 0?this.sub(e):void 0};Je.prototype.show=function(){return this.s*this.n+"/"+this.d};Je.prototype.or=function(e){return this.eq(0)?e:this};const K=e=>Je(e),xC=(...e)=>{if(e=Vr(e),e.length!==0)return e.reduce((t,n)=>t.gcd(n),K(1))},yn=(...e)=>{if(e=Vr(e),e.length===0)return;const t=e.pop();return e.reduce((n,r)=>n===void 0||r===void 0?void 0:n.lcm(r),t)};K._original=Je;class tt{constructor(t,n){this.begin=K(t),this.end=K(n)}get spanCycles(){const t=[];var n=this.begin;const r=this.end,s=r.sam();if(n.equals(r))return[new tt(n,r)];for(;r.gt(n);){if(n.sam().equals(s)){t.push(new tt(n,this.end));break}const i=n.nextSam();t.push(new tt(n,i)),n=i}return t}get duration(){return this.end.sub(this.begin)}cycleArc(){const t=this.begin.cyclePos(),n=t.add(this.duration);return new tt(t,n)}withTime(t){return new tt(t(this.begin),t(this.end))}withEnd(t){return new tt(this.begin,t(this.end))}withCycle(t){const n=this.begin.sam(),r=n.add(t(this.begin.sub(n))),s=n.add(t(this.end.sub(n)));return new tt(r,s)}intersection(t){const n=this.begin.max(t.begin),r=this.end.min(t.end);if(!n.gt(r)&&!(n.equals(r)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(t.end)&&t.begin.lt(t.end))))return new tt(n,r)}intersection_e(t){const n=this.intersection(t);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(K(2)))}equals(t){return this.begin.equals(t.begin)&&this.end.equals(t.end)}show(){return this.begin.show()+" → "+this.end.show()}}let mt=class Bs{constructor(t,n,r,s={},i=!1){this.whole=t,this.part=n,this.value=r,this.context=s,this.stateful=i,i&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){var n,r;let t;return typeof((n=this.value)==null?void 0:n.duration)=="number"?t=K(this.value.duration):t=this.whole.end.sub(this.whole.begin),typeof((r=this.value)==null?void 0:r.clip)=="number"?t.mul(this.value.clip):t}get endClipped(){return this.whole.begin.add(this.duration)}isActive(t){return this.whole.begin<=t&&this.endClipped>=t}isInPast(t){return t>this.endClipped}isInNearPast(t,n){return n-t<=this.endClipped}isInFuture(t){return t<this.whole.begin}isInNearFuture(t,n){return n<this.whole.begin&&n>this.whole.begin-t}isWithinTime(t,n){return this.whole.begin<=n&&this.endClipped>=t}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(t){const n=this.whole?t(this.whole):void 0;return new Bs(n,t(this.part),this.value,this.context)}withValue(t){return new Bs(this.whole,this.part,t(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(t){var n;return(n=this.context.tags)==null?void 0:n.includes(t)}resolveState(t){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[r,s]=n(t);return[r,new Bs(this.whole,this.part,s,this.context,!1)]}return[t,this]}spanEquals(t){return this.whole==null&&t.whole==null||this.whole.equals(t.whole)}equals(t){return this.spanEquals(t)&&this.part.equals(t.part)&&this.value===t.value}show(t=!1){const n=typeof this.value=="object"?t?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var r="";if(this.whole==null)r="~"+this.part.show;else{var s=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(r=this.whole.begin.show()+" ⇜ "),s||(r+="("),r+=this.part.show(),s||(r+=")"),this.whole.end.equals(this.part.end)||(r+=" ⇝ "+this.whole.end.show())}return"[ "+r+" | "+n+" ]"}showWhole(t=!1){return`${this.whole==null?"~":this.whole.show()}: ${ea(this.value,t)}`}combineContext(t){const n=this;return{...n.context,...t.context,locations:(n.context.locations||[]).concat(t.context.locations||[])}}setContext(t){return new Bs(this.whole,this.part,this.value,t)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}};class Sr{constructor(t,n={}){this.span=t,this.controls=n}setSpan(t){return new Sr(t,this.controls)}withSpan(t){return this.setSpan(t(this.span))}setControls(t){return new Sr(this.span,t)}}function FC(e,t,n){if((t==null?void 0:t.value)!==void 0&&Object.keys(t).length===1)return ct("[warn]: Can't do arithmetic on control pattern."),e;const r=Object.keys(e).filter(s=>Object.keys(t).includes(s));return Object.assign({},e,t,Object.fromEntries(r.map(s=>[s,n(e[s],t[s])])))}Pe((e,t)=>e*t);Pe((e,t)=>t.map(e));function Cu(e,t=60){let n=0,r=K(0),s=[""],i="";for(;s[0].length<t;){const a=e.queryArc(n,n+1),o=a.filter(p=>p.hasOnset()).map(p=>p.duration),u=xC(...o),c=u.inverse();s=s.map(p=>p+"|"),i+="|";for(let p=0;p<c;p++){const[d,m]=[r,r.add(u)],f=a.filter(y=>y.whole.begin.lte(d)&&y.whole.end.gte(m)),P=f.length-s.length;P>0&&(s=s.concat(Array(P).fill(i))),s=s.map((y,A)=>{const F=f[A];if(F){const Z=F.whole.begin.eq(d)?""+F.value:"-";return y+Z}return y+"."}),i+=".",r=r.add(u)}n++}return s.join(`
`)}let Vo,Pn=!0;const Sg=function(e){Pn=!!e},Au=e=>Vo=e;let O=class yt{constructor(t,n=void 0){S1(this,"polyJoin",function(){const t=this;return t.fmap(n=>n.extend(t._steps.div(n._steps))).outerJoin()});this.query=t,this._Pattern=!0,this._steps=n}get _steps(){return this.__steps}set _steps(t){this.__steps=t===void 0?void 0:K(t)}setSteps(t){return this._steps=t,this}withSteps(t){return Pn?new yt(this.query,this._steps===void 0?void 0:t(this._steps)):this}get hasSteps(){return this._steps!==void 0}withValue(t){const n=new yt(r=>this.query(r).map(s=>s.withValue(t)));return n._steps=this._steps,n}withState(t){return this.withHaps((n,r)=>(t(r),n))}fmap(t){return this.withValue(t)}appWhole(t,n){const r=this,s=function(i){const a=r.query(i),o=n.query(i),u=function(c,p){const d=c.part.intersection(p.part);if(d!=null)return new mt(t(c.whole,p.whole),d,c.value(p.value),p.combineContext(c))};return Zn(a.map(c=>Vr(o.map(p=>u(c,p)))))};return new yt(s)}appBoth(t){const n=this,r=function(i,a){if(!(i==null||a==null))return i.intersection_e(a)},s=n.appWhole(r,t);return Pn&&(s._steps=yn(t._steps,n._steps)),s}appLeft(t){const n=this,r=function(i){const a=[];for(const o of n.query(i)){const u=t.query(i.setSpan(o.wholeOrPart()));for(const c of u){const p=o.whole,d=o.part.intersection(c.part);if(d){const m=o.value(c.value),f=c.combineContext(o),P=new mt(p,d,m,f);a.push(P)}}}return a},s=new yt(r);return s._steps=this._steps,s}appRight(t){const n=this,r=function(i){const a=[];for(const o of t.query(i)){const u=n.query(i.setSpan(o.wholeOrPart()));for(const c of u){const p=o.whole,d=c.part.intersection(o.part);if(d){const m=c.value(o.value),f=o.combineContext(c),P=new mt(p,d,m,f);a.push(P)}}}return a},s=new yt(r);return s._steps=t._steps,s}bindWhole(t,n){const r=this,s=function(i){const a=function(u,c){return new mt(t(u.whole,c.whole),c.part,c.value,Object.assign({},u.context,c.context,{locations:(u.context.locations||[]).concat(c.context.locations||[])}))},o=function(u){return n(u.value).query(i.setSpan(u.part)).map(c=>a(u,c))};return Zn(r.query(i).map(u=>o(u)))};return new yt(s)}bind(t){const n=function(r,s){if(!(r==null||s==null))return r.intersection_e(s)};return this.bindWhole(n,t)}join(){return this.bind(Ar)}outerBind(t){return this.bindWhole(n=>n,t).setSteps(this._steps)}outerJoin(){return this.outerBind(Ar)}innerBind(t){return this.bindWhole((n,r)=>r,t)}innerJoin(){return this.innerBind(Ar)}resetJoin(t=!1){const n=this;return new yt(r=>n.discreteOnly().query(r).map(s=>s.value.late(t?s.whole.begin:s.whole.begin.cyclePos()).query(r).map(i=>new mt(i.whole?i.whole.intersection(s.whole):void 0,i.part.intersection(s.part),i.value).setContext(s.combineContext(i))).filter(i=>i.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const t=this;function n(r){const s=t.discreteOnly().query(r);function i(a){const o=a.value._focusSpan(a.wholeOrPart()).query(r.setSpan(a.part));function u(c,p){let d;if(p.whole&&c.whole&&(d=p.whole.intersection(c.whole),!d))return;const m=p.part.intersection(c.part);if(!m)return;const f=p.combineContext(c);return new mt(d,m,p.value,f)}return o.map(c=>u(a,c))}return Zn(s.map(i)).filter(a=>a)}return new yt(n)}squeezeBind(t){return this.fmap(t).squeezeJoin()}polyBind(t){return this.fmap(t).polyJoin()}queryArc(t,n,r={}){try{return this.query(new Sr(new tt(t,n),r))}catch(s){return ct(`[query]: ${s.message}`,"error"),[]}}splitQueries(){const t=this,n=r=>Zn(r.span.spanCycles.map(s=>t.query(r.setSpan(s))));return new yt(n)}withQuerySpan(t){return new yt(n=>this.query(n.withSpan(t)))}withQuerySpanMaybe(t){const n=this;return new yt(r=>{const s=r.withSpan(t);return s.span?n.query(s):[]})}withQueryTime(t){return new yt(n=>this.query(n.withSpan(r=>r.withTime(t))))}withHapSpan(t){return new yt(n=>this.query(n).map(r=>r.withSpan(t)))}withHapTime(t){return this.withHapSpan(n=>n.withTime(t))}withHaps(t){const n=new yt(r=>t(this.query(r),r));return n._steps=this._steps,n}withHap(t){return this.withHaps(n=>n.map(t))}setContext(t){return this.withHap(n=>n.setContext(t))}withContext(t){const n=this.withHap(r=>r.setContext(t(r.context)));return this.__pure!==void 0&&(n.__pure=this.__pure,n.__pure_loc=this.__pure_loc),n}stripContext(){return this.withHap(t=>t.setContext({}))}withLoc(t,n){const r={start:t,end:n},s=this.withContext(i=>{const a=(i.locations||[]).concat([r]);return{...i,locations:a}});return this.__pure&&(s.__pure=this.__pure,s.__pure_loc=r),s}filterHaps(t){return new yt(n=>this.query(n).filter(t))}filterValues(t){return new yt(n=>this.query(n).filter(r=>t(r.value))).setSteps(this._steps)}removeUndefineds(){return this.filterValues(t=>t!=null)}onsetsOnly(){return this.filterHaps(t=>t.hasOnset())}discreteOnly(){return this.filterHaps(t=>t.whole)}defragmentHaps(){return this.discreteOnly().withHaps(t=>{const n=[];for(var r=0;r<t.length;++r){for(var s=!0,i=t[r];s;){const u=JSON.stringify(t[r].value);for(var a=!1,o=r+1;o<t.length;o++){const c=t[o];if(i.whole.equals(c.whole)){if(i.part.begin.eq(c.part.end)){if(u===JSON.stringify(c.value)){i=new mt(i.whole,new tt(c.part.begin,i.part.end),i.value),t.splice(o,1),a=!0;break}}else if(c.part.begin.eq(i.part.end)&&u==JSON.stringify(c.value)){i=new mt(i.whole,new tt(i.part.begin,c.part.end),i.value),t.splice(o,1),a=!0;break}}}s=a}n.push(i)}return n})}firstCycle(t=!1){var n=this;return t||(n=n.stripContext()),n.query(new Sr(new tt(K(0),K(1))))}get firstCycleValues(){return this.firstCycle().map(t=>t.value)}get showFirstCycle(){return this.firstCycle().map(t=>`${t.value}: ${t.whole.begin.toFraction()} - ${t.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(t=>t.sort((n,r)=>n.part.begin.sub(r.part.begin).or(n.part.end.sub(r.part.end)).or(n.whole.begin.sub(r.whole.begin).or(n.whole.end.sub(r.whole.end)))))}asNumber(){return this.fmap(qi)}_opIn(t,n){return this.fmap(n).appLeft(J(t))}_opOut(t,n){return this.fmap(n).appRight(J(t))}_opMix(t,n){return this.fmap(n).appBoth(J(t))}_opSqueeze(t,n){const r=J(t);return this.fmap(s=>r.fmap(i=>n(s)(i))).squeezeJoin()}_opSqueezeOut(t,n){const r=this;return J(t).fmap(s=>r.fmap(i=>n(i)(s))).squeezeJoin()}_opReset(t,n){return J(t).fmap(r=>this.fmap(s=>n(s)(r))).resetJoin()}_opRestart(t,n){return J(t).fmap(r=>this.fmap(s=>n(s)(r))).restartJoin()}_opPoly(t,n){const r=J(t);return this.fmap(s=>r.fmap(i=>n(i)(s))).polyJoin()}layer(...t){return Oe(...t.map(n=>n(this)))}superimpose(...t){return this.stack(...t.map(n=>n(this)))}stack(...t){return Oe(this,...t)}sequence(...t){return rn(this,...t)}seq(...t){return rn(this,...t)}cat(...t){return Su(this,...t)}fastcat(...t){return Pt(this,...t)}slowcat(...t){return er(this,...t)}onTrigger(t,n=!0){return this.withHap(r=>r.setContext({...r.context,onTrigger:(...s)=>{var i,a;(a=(i=r.context).onTrigger)==null||a.call(i,...s),t(...s)},dominantTrigger:r.context.dominantTrigger||n}))}log(t=r=>`[hap] ${r.showWhole(!0)}`,n=r=>({hap:r})){return this.onTrigger((...r)=>{ct(t(...r),void 0,n(...r))},!1)}logValues(t=n=>`[hap] ${ea(n,!0)}`){return this.log(n=>t(n.value))}drawLine(){return console.log(Cu(this)),this}unjoin(t,n=Ar){return t.withHap(r=>r.withValue(s=>s?n(this.ribbon(r.whole.begin,r.whole.duration)):this))}into(t,n){return this.unjoin(t,n).innerJoin()}};function wC(e,t){let n=[];return t.forEach(r=>{const s=n.findIndex(([i])=>e(r,i));s===-1?n.push([r]):n[s].push(r)}),n}const EC=(e,t)=>e.spanEquals(t);O.prototype.collect=function(){return this.withHaps(e=>wC(EC,e).map(t=>new mt(t[0].whole,t[0].part,t,{})))};const Bg=R("arpWith",(e,t)=>t.collect().fmap(n=>J(e(n))).innerJoin().withHap(n=>new mt(n.whole,n.part,n.value.value,n.combineContext(n.value)))),Zg=R("arp",(e,t)=>t.arpWith(n=>J(e).fmap(r=>n[r%n.length])),!1);function yi(e){return!Array.isArray(e)&&typeof e=="object"}function SC(e,t,n){return yi(e)||yi(t)?(yi(e)||(e={value:e}),yi(t)||(t={value:t}),FC(e,t,n)):n(e,t)}(function(){const e={set:[(n,r)=>r],keep:[n=>n],keepif:[(n,r)=>r?n:void 0],add:[Wt((n,r)=>n+r)],sub:[Wt((n,r)=>n-r)],mul:[Wt((n,r)=>n*r)],div:[Wt((n,r)=>n/r)],mod:[Wt(Yt)],pow:[Wt(Math.pow)],log2:[Wt(Math.log2)],band:[Wt((n,r)=>n&r)],bor:[Wt((n,r)=>n|r)],bxor:[Wt((n,r)=>n^r)],blshift:[Wt((n,r)=>n<<r)],brshift:[Wt((n,r)=>n>>r)],lt:[(n,r)=>n<r],gt:[(n,r)=>n>r],lte:[(n,r)=>n<=r],gte:[(n,r)=>n>=r],eq:[(n,r)=>n==r],eqt:[(n,r)=>n===r],ne:[(n,r)=>n!=r],net:[(n,r)=>n!==r],and:[(n,r)=>n&&r],or:[(n,r)=>n||r],func:[(n,r)=>r(n)]},t=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[n,[r,s]]of Object.entries(e)){O.prototype["_"+n]=function(i){return this.fmap(a=>r(a,i))},Object.defineProperty(O.prototype,n,{get:function(){const i=this,a=(...o)=>i[n].in(...o);for(const o of t)a[o.toLowerCase()]=function(...u){var c=i;u=rn(u),s&&(c=s(c),u=s(u));var p;return n==="keepif"?(p=c["_op"+o](u,d=>m=>r(d,m)),p=p.removeUndefineds()):p=c["_op"+o](u,d=>m=>SC(d,m,r)),p};return a.squeezein=a.squeeze,a}});for(const i of t)O.prototype[i.toLowerCase()]=function(...a){return this.set[i.toLowerCase()](a)}}O.prototype.struct=function(...n){return this.keepif.out(...n)},O.prototype.structAll=function(...n){return this.keep.out(...n)},O.prototype.mask=function(...n){return this.keepif.in(...n)},O.prototype.maskAll=function(...n){return this.keep.in(...n)},O.prototype.reset=function(...n){return this.keepif.reset(...n)},O.prototype.resetAll=function(...n){return this.keep.reset(...n)},O.prototype.restart=function(...n){return this.keepif.restart(...n)},O.prototype.restartAll=function(...n){return this.keep.restart(...n)}})();const kg=Oe,Vg=Oe,Xg=$s,Xr=e=>new O(()=>[],e),Ge=Xr(1),nn=Xr(0);function it(e){function t(r){return r.span.spanCycles.map(s=>new mt(K(s.begin).wholeCycle(),s,e))}const n=new O(t,1);return n.__pure=e,n}function ta(e){return e instanceof O||(e==null?void 0:e._Pattern)}function J(e){return ta(e)?e:Vo&&typeof e=="string"?Vo(e):it(e)}function Du(e){let t=it([]);for(const n of e)t=t.bind(r=>n.fmap(s=>r.concat([s])));return t}function Oe(...e){e=e.map(r=>Array.isArray(r)?rn(...r):J(r));const t=r=>Zn(e.map(s=>s.query(r))),n=new O(t);return Pn&&(n._steps=yn(...e.map(r=>r._steps))),n}function xu(e,t){if(t=t.map(i=>Array.isArray(i)?rn(...i):J(i)),t.length===0)return Ge;if(t.length===1)return t[0];const[n,...r]=t.map(i=>i._steps),s=Pn?n.maximum(...r):void 0;return Oe(...e(s,t))}function Fu(...e){return xu((t,n)=>n.map(r=>r._steps.eq(t)?r:Vt(r,Xr(t.sub(r._steps)))),e)}function wu(...e){return xu((t,n)=>n.map(r=>r._steps.eq(t)?r:Vt(Xr(t.sub(r._steps)),r)),e)}function Eu(...e){return xu((t,n)=>n.map(r=>{if(r._steps.eq(t))return r;const s=Xr(t.sub(r._steps).div(2));return Vt(s,r,s)}),e)}function Gg(e,...t){const[n,...r]=t.map(a=>a._steps),s=n.maximum(...r),i={centre:Eu,left:Fu,right:wu,expand:Oe,repeat:(...a)=>$s(...a).steps(s)};return e.inhabit(i).fmap(a=>a(...t)).innerJoin().setSteps(s)}function er(...e){if(e=e.map(r=>Array.isArray(r)?Pt(...r):J(r)),e.length==1)return e[0];const t=function(r){const s=r.span,i=Yt(s.begin.sam(),e.length),a=e[i];if(!a)return[];const o=s.begin.floor().sub(s.begin.div(e.length).floor());return a.withHapTime(u=>u.add(o)).query(r.setSpan(s.withTime(u=>u.sub(o))))},n=Pn?yn(...e.map(r=>r._steps)):void 0;return new O(t).splitQueries().setSteps(n)}function na(...e){e=e.map(J);const t=function(n){var s;const r=Math.floor(n.span.begin)%e.length;return((s=e[r])==null?void 0:s.query(n))||[]};return new O(t).splitQueries()}function Su(...e){return er(...e)}function Tg(...e){const t=e.reduce((n,[r])=>n+r,0);return e=e.map(([n,r])=>[n,r.fast(n)]),Vt(...e).slow(t)}function Wg(...e){let t=K(0);for(let n of e)n.length==2&&n.unshift(t),t=n[1];return Oe(...e.map(([n,r,s])=>it(J(s)).compress(K(n).div(t),K(r).div(t)))).slow(t).innerJoin()}function Pt(...e){let t=er(...e);return e.length>1&&(t=t._fast(e.length),t._steps=e.length),e.length==1&&e[0].__steps_source&&(e._steps=e[0]._steps),t}function rn(...e){return Pt(...e)}function Bu(...e){return Pt(...e)}function Xo(e){return Array.isArray(e)?e.length==0?[Ge,0]:e.length==1?Xo(e[0]):[Pt(...e.map(t=>Xo(t)[0])),e.length]:[J(e),1]}const Lg=Pe((e,t)=>J(t).mask(e)),Rg=Pe((e,t)=>J(t).struct(e)),_g=Pe((e,t)=>J(t).superimpose(...e)),Ig=Pe((e,t)=>J(t).withValue(e)),Ng=Pe((e,t)=>J(t).bind(e)),zg=Pe((e,t)=>J(t).innerBind(e)),Yg=Pe((e,t)=>J(t).outerBind(e)),Hg=Pe((e,t)=>J(t).squeezeBind(e)),Kg=Pe((e,t)=>J(t).stepBind(e)),Og=Pe((e,t)=>J(t).polyBind(e)),jg=Pe((e,t)=>J(t).set(e)),Jg=Pe((e,t)=>J(t).keep(e)),Ug=Pe((e,t)=>J(t).keepif(e)),qg=Pe((e,t)=>J(t).add(e)),Qg=Pe((e,t)=>J(t).sub(e)),$g=Pe((e,t)=>J(t).mul(e)),ey=Pe((e,t)=>J(t).div(e)),ty=Pe((e,t)=>J(t).mod(e)),ny=Pe((e,t)=>J(t).pow(e)),ry=Pe((e,t)=>J(t).band(e)),sy=Pe((e,t)=>J(t).bor(e)),iy=Pe((e,t)=>J(t).bxor(e)),ay=Pe((e,t)=>J(t).blshift(e)),oy=Pe((e,t)=>J(t).brshift(e)),uy=Pe((e,t)=>J(t).lt(e)),cy=Pe((e,t)=>J(t).gt(e)),ly=Pe((e,t)=>J(t).lte(e)),py=Pe((e,t)=>J(t).gte(e)),hy=Pe((e,t)=>J(t).eq(e)),dy=Pe((e,t)=>J(t).eqt(e)),my=Pe((e,t)=>J(t).ne(e)),fy=Pe((e,t)=>J(t).net(e)),gy=Pe((e,t)=>J(t).and(e)),yy=Pe((e,t)=>J(t).or(e)),by=Pe((e,t)=>J(t).func(e));function R(e,t,n=!0,r=!1,s=i=>i.innerJoin()){if(Array.isArray(e)){const o={};for(const u of e)o[u]=R(u,t,n,r,s);return o}const i=t.length;var a;return n?a=function(...o){o=o.map(J);const u=o[o.length-1];let c;if(i===1)c=t(u);else{const p=o.slice(0,-1);if(p.every(d=>d.__pure!=null)){const d=p.map(f=>f.__pure),m=p.filter(f=>f.__pure_loc).map(f=>f.__pure_loc);c=t(...d,u),c=c.withContext(f=>{const P=(f.locations||[]).concat(m);return{...f,locations:P}})}else{const[d,...m]=p;let f=(...P)=>t(...P,u);f=Pe(f,null,i-1),c=s(m.reduce((P,y)=>P.appLeft(y),d.fmap(f)))}}return r&&(c._steps=u._steps),c}:a=function(...o){o=o.map(J);const u=t(...o);return r&&(u._steps=o[o.length-1]._steps),u},O.prototype[e]=function(...o){if(i===2&&o.length!==1)o=[rn(...o)];else if(i!==o.length+1)throw new Error(`.${e}() expects ${i-1} inputs but got ${o.length}.`);return o=o.map(J),a(...o,this)},i>1&&(O.prototype["_"+e]=function(...o){const u=t(...o,this);return r&&u.setSteps(this._steps),u}),Pe(a,null,i)}function Qs(e,t,n=!0,r=!1,s=i=>i.stepJoin()){return R(e,t,n,r,s)}const My=R("round",function(e){return e.asNumber().fmap(t=>Math.round(t))}),Py=R("floor",function(e){return e.asNumber().fmap(t=>Math.floor(t))}),vy=R("ceil",function(e){return e.asNumber().fmap(t=>Math.ceil(t))}),Cy=R("toBipolar",function(e){return e.fmap(t=>t*2-1)}),Ay=R("fromBipolar",function(e){return e.fmap(t=>(t+1)/2)}),Dy=R("range",function(e,t,n){return n.mul(t-e).add(e)}),xy=R("rangex",function(e,t,n){return n._range(Math.log(e),Math.log(t)).fmap(Math.exp)}),Fy=R("range2",function(e,t,n){return n.fromBipolar()._range(e,t)}),wy=R("ratio",e=>e.fmap(t=>Array.isArray(t)?t.slice(1).reduce((n,r)=>n/r,t[0]):t)),Ey=R("compress",function(e,t,n){return e=K(e),t=K(t),e.gt(t)||e.gt(1)||t.gt(1)||e.lt(0)||t.lt(0)?Ge:n._fastGap(K(1).div(t.sub(e)))._late(e)}),{compressSpan:Sy,compressspan:By}=R(["compressSpan","compressspan"],function(e,t){return t._compress(e.begin,e.end)}),{fastGap:Zy,fastgap:ky}=R(["fastGap","fastgap"],function(e,t){const n=function(s){const i=s.begin.sam(),a=s.begin.sub(i).mul(e).min(1),o=s.end.sub(i).mul(e).min(1);if(!(a>=1))return new tt(i.add(a),i.add(o))},r=function(s){const i=s.part.begin,a=s.part.end,o=i.sam(),u=i.sub(o).div(e).min(1),c=a.sub(o).div(e).min(1),p=new tt(o.add(u),o.add(c)),d=s.whole?new tt(p.begin.sub(i.sub(s.whole.begin).div(e)),p.end.add(s.whole.end.sub(a).div(e))):void 0;return new mt(d,p,s.value,s.context)};return t.withQuerySpanMaybe(n).withHap(r).splitQueries()}),Vy=R("focus",function(e,t,n){return e=K(e),t=K(t),n._early(e.sam())._fast(K(1).div(t.sub(e)))._late(e)}),{focusSpan:Xy,focusspan:Gy}=R(["focusSpan","focusspan"],function(e,t){return t._focus(e.begin,e.end)}),Ty=R("ply",function(e,t){const n=t.fmap(r=>it(r)._fast(e)).squeezeJoin();return Pn&&(n._steps=K(e).mulmaybe(t._steps)),n}),{fast:Wy,density:iB}=R(["fast","density"],function(e,t){return e===0?Ge:(e=K(e),t.withQueryTime(n=>n.mul(e)).withHapTime(n=>n.div(e)).setSteps(t._steps))},!0,!0),Ly=R("hurry",function(e,t){return t._fast(e).mul(it({speed:e}))}),{slow:Ry,sparsity:_y}=R(["slow","sparsity"],function(e,t){return e===0?Ge:t._fast(K(1).div(e))}),Iy=R("inside",function(e,t,n){return t(n._slow(e))._fast(e)}),Ny=R("outside",function(e,t,n){return t(n._fast(e))._slow(e)}),zy=R("lastOf",function(e,t,n){const r=Array(e-1).fill(n);return r.push(t(n)),na(...r)}),{firstOf:Yy,every:Hy}=R(["firstOf","every"],function(e,t,n){const r=Array(e-1).fill(n);return r.unshift(t(n)),na(...r)}),Ky=R("apply",function(e,t){return e(t)}),Oy=R("cpm",function(e,t){return t._fast(e/60/1)}),jy=R("early",function(e,t){return e=K(e),t.withQueryTime(n=>n.add(e)).withHapTime(n=>n.sub(e))},!0,!0),Zu=R("late",function(e,t){return e=K(e),t._early(K(0).sub(e))},!0,!0),Jy=R("zoom",function(e,t,n){var i;if(t=K(t),e=K(e),e.gte(t))return nn;const r=t.sub(e),s=Pn?(i=n._steps)==null?void 0:i.mulmaybe(r):void 0;return n.withQuerySpan(a=>a.withCycle(o=>o.mul(r).add(e))).withHapSpan(a=>a.withCycle(o=>o.sub(e).div(r))).splitQueries().setSteps(s)}),{zoomArc:Uy,zoomarc:qy}=R(["zoomArc","zoomarc"],function(e,t){return t.zoom(e.begin,e.end)}),Qy=R("bite",(e,t,n)=>t.fmap(r=>s=>{const i=K(r).div(s).mod(1),a=i.add(K(1).div(s));return n.zoom(i,a)}).appLeft(e).squeezeJoin(),!1),$y=R("linger",function(e,t){return e==0?Ge:e<0?t._zoom(e.add(1),1)._slow(e):t._zoom(0,e)._slow(e)},!0,!0),{segment:eb,seg:tb}=R(["segment","seg"],function(e,t){return t.struct(it(!0)._fast(e)).setSteps(e)}),nb=R("swingBy",(e,t,n)=>n.inside(t,Zu(Bu(0,e/2)))),rb=R("swing",(e,t)=>t.swingBy(1/3,e)),{invert:sb,inv:ib}=R(["invert","inv"],function(e){return e.fmap(t=>!t)},!0,!0),ab=R("when",function(e,t,n){return e?t(n):n}),ob=R("off",function(e,t,n){return Oe(n,t(n.late(e)))}),ub=R("brak",function(e){return e.when(er(!1,!0),t=>Pt(t,Ge)._late(.25))}),ku=R("rev",function(e){const t=function(n){const r=n.span,s=r.begin.sam(),i=r.begin.nextSam(),a=function(o){const u=o.withTime(p=>s.add(i.sub(p))),c=u.begin;return u.begin=u.end,u.end=c,u};return e.query(n.setSpan(a(r))).map(o=>o.withSpan(a))};return new O(t).splitQueries()},!1,!0),cb=R("pressBy",function(e,t){return t.fmap(n=>it(n).compress(e,1)).squeezeJoin()}),lb=R("press",function(e){return e._pressBy(.5)});O.prototype.hush=function(){return Ge};const pb=R("palindrome",function(e){return e.lastOf(2,ku)},!0,!0),{juxBy:hb,juxby:db}=R(["juxBy","juxby"],function(e,t,n){e/=2;const r=function(a,o,u){return o in a?a[o]:u},s=n.withValue(a=>Object.assign({},a,{pan:r(a,"pan",.5)-e})),i=t(n.withValue(a=>Object.assign({},a,{pan:r(a,"pan",.5)+e})));return Oe(s,i).setSteps(Pn?yn(s._steps,i._steps):void 0)}),mb=R("jux",function(e,t){return t._juxBy(1,e,t)}),{echoWith:fb,echowith:gb,stutWith:yb,stutwith:bb}=R(["echoWith","echowith","stutWith","stutwith"],function(e,t,n,r){return Oe(...Ui(0,e-1).map(s=>n(r.late(K(t).mul(s)),s)))}),Mb=R("echo",function(e,t,n,r){return r._echoWith(e,t,(s,i)=>s.gain(Math.pow(n,i)))}),Pb=R("stut",function(e,t,n,r){return r._echoWith(e,n,(s,i)=>s.gain(Math.pow(t,i)))}),Vu=function(e,t,n=!1){return e=K(e),er(...Ui(0,e.sub(1)).map(r=>n?t.late(K(r).div(e)):t.early(K(r).div(e))))},vb=R("iter",function(e,t){return Vu(e,t,!1)},!0,!0),{iterBack:Cb,iterback:Ab}=R(["iterBack","iterback"],function(e,t){return Vu(e,t,!0)},!0,!0),{repeatCycles:Db}=R("repeatCycles",function(e,t){return new O(function(n){const r=n.span.begin.sam(),s=r.div(e).sam(),i=r.sub(s);return n=n.withSpan(a=>a.withTime(o=>o.sub(i))),t.query(n).map(a=>a.withSpan(o=>o.withTime(u=>u.add(i))))}).splitQueries()},!0,!0),Xu=function(e,t,n,r=!1,s=!1){const i=Array(e-1).fill(!1);i.unshift(!0);const a=Vu(e,rn(...i),!r);return s||(n=n.repeatCycles(e)),n.when(a,t)},{chunk:xb,slowchunk:Fb,slowChunk:wb}=R(["chunk","slowchunk","slowChunk"],function(e,t,n){return Xu(e,t,n,!1,!1)},!0,!0),{chunkBack:Eb,chunkback:Sb}=R(["chunkBack","chunkback"],function(e,t,n){return Xu(e,t,n,!0)},!0,!0),{fastchunk:Bb,fastChunk:Zb}=R(["fastchunk","fastChunk"],function(e,t,n){return Xu(e,t,n,!1,!0)},!0,!0),{chunkinto:kb,chunkInto:Vb}=R(["chunkinto","chunkInto"],function(e,t,n){return n.into(Pt(!0,...Array(e-1).fill(!1))._iterback(e),t)}),{chunkbackinto:Xb,chunkBackInto:Gb}=R(["chunkbackinto","chunkBackInto"],function(e,t,n){return n.into(Pt(!0,...Array(e-1).fill(!1))._iter(e)._early(1),t)}),Tb=R("bypass",function(e,t){return e=!!parseInt(e),e?Ge:t},!0,!0),{ribbon:Wb,rib:Lb}=R(["ribbon","rib"],(e,t,n)=>n.early(e).restart(it(1).slow(t))),Rb=R("hsla",(e,t,n,r,s)=>s.color(`hsla(${e}turn,${t*100}%,${n*100}%,${r})`)),_b=R("hsl",(e,t,n,r)=>r.color(`hsl(${e}turn,${t*100}%,${n*100}%)`));O.prototype.tag=function(e){return this.withContext(t=>({...t,tags:(t.tags||[]).concat([e])}))};const Ib=R("filter",(e,t)=>t.withHaps(n=>n.filter(e))),Nb=R("filterWhen",(e,t)=>t.filter(n=>e(n.whole.begin))),zb=R("within",(e,t,n,r)=>Oe(n(r.filterWhen(s=>s.cyclePos()>=e&&s.cyclePos()<=t)),r.filterWhen(s=>s.cyclePos()<e||s.cyclePos()>t)));O.prototype.stepJoin=function(){const e=this,t=Vt(...Xi(Gi(e.queryArc(0,1))))._steps,n=function(r){const s=e.early(r.span.begin.sam()).query(r.setSpan(new tt(K(0),K(1))));return Vt(...Xi(Gi(s))).query(r)};return new O(n,t)};O.prototype.stepBind=function(e){return this.fmap(e).stepJoin()};function Xi(e){const t=e.filter((i,a)=>a.hasSteps).reduce((i,a)=>i.add(a),K(0)),n=Vr(e.map((i,a)=>a._steps)).reduce((i,a)=>i.add(a),K(0)),r=t.eq(0)?void 0:n.div(t);function s(i,a){return a._steps===void 0?[i.mulmaybe(r),a]:[a._steps,a]}return e.map(i=>s(...i))}function Gi(e){const t=Zn(e.map(r=>[r.part.begin,r.part.end])),n=fu([K(0),K(1),...t]);return mu(n).map(r=>[r[1].sub(r[0]),Oe(...Gu(new tt(...r),e).map(s=>s.value.withHap(i=>i.setContext(i.combineContext(s)))))])}function Gu(e,t){return Vr(t.map(n=>Tu(e,n)))}function Tu(e,t){const n=e.intersection(t.part);if(n!=null)return new mt(t.whole,n,t.value,t.context)}const Wu=R("pace",function(e,t){return t._steps===void 0?t:t._steps.eq(K(0))?nn:t._fast(K(e).div(t._steps)).setSteps(e)});function Lu(e,...t){const n=t.map(s=>Xo(s));if(n.length==0)return Ge;e==0&&(e=n[0][1]);const r=[];for(const s of n)s[1]!=0&&(e==s[1]?r.push(s[0]):r.push(s[0]._fast(K(e).div(K(s[1])))));return Oe(...r)}function $s(...e){if(Array.isArray(e[0]))return Lu(0,...e);if(e=e.filter(r=>r.hasSteps),e.length==0)return Ge;const t=yn(...e.map(r=>r._steps));if(t.eq(K(0)))return nn;const n=Oe(...e.map(r=>r.pace(t)));return n._steps=t,n}function Vt(...e){if(e.length===0)return nn;const t=a=>Array.isArray(a)?a:[a._steps??1,a];if(e=e.map(t),e.find(a=>a[0]===void 0)){const a=e.map(u=>u[0]).filter(u=>u!==void 0);if(a.length===0)return Pt(...e.map(u=>u[1]));if(a.length===e.length)return nn;const o=a.reduce((u,c)=>u.add(c),K(0)).div(a.length);for(let u of e)u[0]===void 0&&(u[0]=o)}if(e.length==1)return J(e[0][1]).withSteps(a=>e[0][0]);const n=e.map(a=>a[0]).reduce((a,o)=>a.add(o),K(0));let r=K(0);const s=[];for(const[a,o]of e){if(K(a).eq(0))continue;const u=r.add(a);s.push(J(o)._compress(r.div(n),u.div(n))),r=u}const i=Oe(...s);return i._steps=n,i}function Ru(...e){e=e.map(s=>Array.isArray(s)?s.map(J):[J(s)]);const t=yn(...e.map(s=>K(s.length)));let n=[];for(let s=0;s<t;++s)n.push(...e.map(i=>i.length==0?Ge:i[s%i.length]));n=n.filter(s=>s.hasSteps&&s._steps>0);const r=n.reduce((s,i)=>s.add(i._steps),K(0));return n=Vt(...n),n._steps=r,n}const _u=Qs("take",function(e,t){if(!t.hasSteps||t._steps.lte(0)||(e=K(e),e.eq(0)))return nn;const n=e<0;n&&(e=e.abs());const r=e.div(t._steps);return r.lte(0)?nn:r.gte(1)?t:n?t.zoom(K(1).sub(r),1):t.zoom(0,r)}),Iu=Qs("drop",function(e,t){return t.hasSteps?(e=K(e),e.lt(0)?t.take(t._steps.add(e)):t.take(K(0).sub(t._steps.sub(e)))):nn}),Nu=Qs("extend",function(e,t){return t.fast(e).expand(e)}),zu=Qs("expand",function(e,t){return t.withSteps(n=>n.mul(K(e)))}),Yu=Qs("contract",function(e,t){return t.withSteps(n=>n.div(K(e)))});O.prototype.shrinklist=function(e){const t=this;if(!t.hasSteps)return[t];let[n,r]=Array.isArray(e)?e:[e,t._steps];if(n=K(n),r===0||n===0)return[t];const s=n>0,i=[];if(s){const a=K(1).div(t._steps).mul(n);for(let o=0;o<r;++o){const u=a.mul(o);if(u.gt(1))break;i.push([u,1])}}else{n=K(0).sub(n);const a=K(1).div(t._steps).mul(n);for(let o=0;o<r;++o){const u=K(1).sub(a.mul(o));if(u.lt(0))break;i.push([K(0),u])}}return i.map(a=>t.zoom(...a))};const Hu=(e,t)=>t.shrinklist(e),Ku=R("shrink",function(e,t){if(!t.hasSteps)return nn;const n=t.shrinklist(e),r=Vt(...n);return r._steps=n.reduce((s,i)=>s.add(i._steps),K(0)),r},!0,!1,e=>e.stepJoin()),Yb=R("grow",function(e,t){if(!t.hasSteps)return nn;const n=t.shrinklist(K(0).sub(e));n.reverse();const r=Vt(...n);return r._steps=n.reduce((s,i)=>s.add(i._steps),K(0)),r},!0,!1,e=>e.stepJoin()),Ou=function(e,...t){return e.tour(...t)};O.prototype.tour=function(...e){return Vt(...[].concat(...e.map((t,n)=>[...e.slice(0,e.length-n),this,...e.slice(e.length-n)]),this,...e))};const ju=function(...e){e=e.filter(r=>r.hasSteps);const t=er(...e.map(r=>r._slow(r._steps))),n=yn(...e.map(r=>r._steps));return t._fast(n).setSteps(n)},Hb=Vt,ra=Vt,Kb=Vt,Ob=Ru,jb=$s;O.prototype.s_polymeter=O.prototype.polymeter;const Jb=Ku;O.prototype.s_taper=O.prototype.shrink;const Ub=Hu;O.prototype.s_taperlist=O.prototype.shrinklist;const qb=_u;O.prototype.s_add=O.prototype.take;const Qb=Iu;O.prototype.s_sub=O.prototype.drop;const $b=zu;O.prototype.s_expand=O.prototype.expand;const e2=Nu;O.prototype.s_extend=O.prototype.extend;const t2=Yu;O.prototype.s_contract=O.prototype.contract;const n2=Ou;O.prototype.s_tour=O.prototype.tour;const r2=ju;O.prototype.s_zip=O.prototype.zip;const s2=Wu;O.prototype.steps=O.prototype.pace;const i2=R("chop",function(e,t){const n=Array.from({length:e},(i,a)=>a).map(i=>({begin:i/e,end:(i+1)/e})),r=function(i,a){if("begin"in i&&"end"in i&&i.begin!==void 0&&i.end!==void 0){const o=i.end-i.begin;a={begin:i.begin+a.begin*o,end:i.begin+a.end*o}}return Object.assign({},i,a)},s=function(i){return rn(n.map(a=>r(i,a)))};return t.squeezeBind(s).setSteps(Pn?K(e).mulmaybe(t._steps):void 0)}),a2=R("striate",function(e,t){const n=Array.from({length:e},(s,i)=>i).map(s=>({begin:s/e,end:(s+1)/e})),r=er(...n);return t.set(r)._fast(e).setSteps(Pn?K(e).mulmaybe(t._steps):void 0)}),o2=function(e,t,n=.5){return t.speed(1/e*n).unit("c").slow(e)},Ju=R("slice",function(e,t,n){return e.innerBind(r=>t.outerBind(s=>n.outerBind(i=>{i=i instanceof Object?i:{s:i};const a=Array.isArray(r)?r[s]:s/r,o=Array.isArray(r)?r[s+1]:(s+1)/r;return it({begin:a,end:o,_slices:r,...i})}))).setSteps(t._steps)},!1);O.prototype.onTriggerTime=function(e){return this.onTrigger((t,n,r,s)=>{const i=s-n;window.setTimeout(()=>{e(t)},i*1e3)},!1)};const u2=R("splice",function(e,t,n){const r=Ju(e,t,n);return new O(s=>{const i=s.controls._cps||1;return r.query(s).map(a=>a.withValue(o=>({speed:i/o._slices/a.whole.duration*(o.speed||1),unit:"c",...o})))}).setSteps(t._steps)},!1),{loopAt:c2,loopat:l2}=R(["loopAt","loopat"],function(e,t){const n=t._steps?t._steps.div(e):void 0;return new O(r=>o2(e,t,r.controls._cps).query(r),n)}),p2=R("fit",e=>e.withHaps((t,n)=>t.map(r=>r.withValue(s=>{const i=("end"in s?s.end:1)-("begin"in s?s.begin:0);return{...s,speed:(n.controls._cps||1)/r.whole.duration*i,unit:"c"}})))),{loopAtCps:h2,loopatcps:d2}=R(["loopAtCps","loopatcps"],function(e,t,n){return o2(e,n,t)}),m2=e=>it(1).withValue(()=>J(e())).innerJoin();let X1=e=>e<.5?1:1-(e-.5)/.5,Uu=(e,t,n)=>{t=J(t),e=J(e),n=J(n);let r=t.fmap(i=>({gain:X1(i)})),s=t.fmap(i=>({gain:X1(1-i)}));return Oe(e.mul(r),n.mul(s))};O.prototype.xfade=function(e,t){return Uu(this,e,t)};const BC=e=>(t,n,r)=>{t=K(t).mod(n),n=K(n);const s=t.div(n),i=t.add(1).div(n);return e(r.fmap(a=>it(a)._compress(s,i)))},{beat:f2}=R(["beat"],BC(e=>e.innerJoin())),sa=(e,t,n)=>{n=K(n);const r=K(1).div(e.length),s=o=>{const u=[];for(const[c,p]of o.entries())p&&u.push([K(c).div(o.length),p]);return u},i=Us(([o,u],[c,p])=>{const d=n.mul(c-o).add(o),m=d.add(r);return new tt(d,m)},s(e),s(t));function a(o){const u=o.span.begin.sam(),c=o.span.cycleArc(),p=[];for(const d of i){const m=d.intersection(c);m!==void 0&&p.push(new mt(d.withTime(f=>f.add(u)),m.withTime(f=>f.add(u)),!0))}return p}return new O(a).splitQueries()},g2=(e,t,n)=>(e=J(e),t=J(t),n=J(n),e.innerBind(r=>t.innerBind(s=>n.innerBind(i=>sa(r,s,i)))));function ei(e){let t=Array.isArray(e);e=t?e:[e];const n=e[0],r=i=>{let a;if(typeof i=="object"&&i.value!==void 0&&(a={...i},i=i.value,delete a.value),t&&Array.isArray(i)){const o=a||{};return i.forEach((u,c)=>{c<e.length&&(o[e[c]]=u)}),o}else return a?(a[n]=i,a):{[n]:i}},s=function(i,a){return a?typeof i>"u"?a.fmap(r):a.set(J(i).withValue(r)):J(i).withValue(r)};return O.prototype[n]=function(i){return s(i,this)},s}const _s=new Map;function qu(e){return _s.has(e)}function B(e,...t){const n=Array.isArray(e)?e[0]:e;let r={};return r[n]=ei(e),_s.set(n,n),t.forEach(s=>{r[s]=r[n],_s.set(s,n),O.prototype[s]=O.prototype[n]}),r}const{s:Qu,sound:$u}=B(["s","n","gain"],"sound"),{source:ec,src:tc}=B("source","src"),{n:nc}=B("n"),{note:rc}=B(["note","n"]),{accelerate:sc}=B("accelerate"),{velocity:ic}=B("velocity"),{gain:ac}=B("gain"),{postgain:oc}=B("postgain"),{amp:uc}=B("amp"),{attack:cc,att:lc}=B("attack","att"),{fmh:pc}=B(["fmh","fmi"],"fmh"),{fmi:hc,fm:dc}=B(["fmi","fmh"],"fm"),{fmenv:mc}=B("fmenv"),{fmattack:fc}=B("fmattack"),{fmwave:gc}=B("fmwave"),{fmdecay:yc}=B("fmdecay"),{fmsustain:bc}=B("fmsustain"),{fmrelease:Mc}=B("fmrelease"),{fmvelocity:Pc}=B("fmvelocity"),{bank:vc}=B("bank"),{analyze:Cc}=B("analyze"),{fft:Ac}=B("fft"),{decay:Dc,dec:xc}=B("decay","dec"),{sustain:Fc,sus:wc}=B("sustain","sus"),{release:Ec,rel:Sc}=B("release","rel"),{hold:Bc}=B("hold"),{bandf:Zc,bpf:kc,bp:Vc}=B(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:Xc,bpq:Gc}=B("bandq","bpq"),{begin:Tc}=B("begin"),{end:Wc}=B("end"),{loop:Lc}=B("loop"),{loopBegin:Rc,loopb:_c}=B("loopBegin","loopb"),{loopEnd:Ic,loope:Nc}=B("loopEnd","loope"),{crush:zc}=B("crush"),{coarse:Yc}=B("coarse"),{tremolo:Hc}=B(["tremolo","tremolodepth","tremoloskew","tremolophase"],"trem"),{tremolosync:Kc}=B(["tremolosync","tremolodepth","tremoloskew","tremolophase"],"tremsync"),{tremolodepth:Oc}=B("tremolodepth","tremdepth"),{tremoloskew:jc}=B("tremoloskew","tremskew"),{tremolophase:Jc}=B("tremolophase","tremphase"),{tremoloshape:Uc}=B("tremoloshape","tremshape"),{duck:qc}=B("duckorbit","duck"),{duckdepth:Qc}=B("duckdepth"),{duckattack:$c}=B("duckattack","duckatt"),{drive:el}=B("drive"),{byteBeatExpression:tl,bbexpr:nl}=B("byteBeatExpression","bbexpr"),{byteBeatStartTime:rl,bbst:sl}=B("byteBeatStartTime","bbst"),{channels:il,ch:al}=B("channels","ch"),{pw:ol}=B(["pw","pwrate","pwsweep"]),{pwrate:ul}=B("pwrate"),{pwsweep:cl}=B("pwsweep"),{phaserrate:ll,ph:pl,phaser:hl}=B(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:dl,phs:ml}=B("phasersweep","phs"),{phasercenter:fl,phc:gl}=B("phasercenter","phc"),{phaserdepth:yl,phd:bl,phasdp:Ml}=B("phaserdepth","phd","phasdp"),{channel:Pl}=B("channel"),{cut:vl}=B("cut"),{cutoff:Cl,ctf:Al,lpf:Dl,lp:xl}=B(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:Fl,lpe:wl}=B("lpenv","lpe"),{hpenv:El,hpe:Sl}=B("hpenv","hpe"),{bpenv:Bl,bpe:Zl}=B("bpenv","bpe"),{lpattack:kl,lpa:Vl}=B("lpattack","lpa"),{hpattack:Xl,hpa:Gl}=B("hpattack","hpa"),{bpattack:Tl,bpa:Wl}=B("bpattack","bpa"),{lpdecay:Ll,lpd:Rl}=B("lpdecay","lpd"),{hpdecay:_l,hpd:Il}=B("hpdecay","hpd"),{bpdecay:Nl,bpd:zl}=B("bpdecay","bpd"),{lpsustain:Yl,lps:Hl}=B("lpsustain","lps"),{hpsustain:Kl,hps:Ol}=B("hpsustain","hps"),{bpsustain:jl,bps:Jl}=B("bpsustain","bps"),{lprelease:Ul,lpr:ql}=B("lprelease","lpr"),{hprelease:Ql,hpr:$l}=B("hprelease","hpr"),{bprelease:ep,bpr:tp}=B("bprelease","bpr"),{ftype:np}=B("ftype"),{fanchor:rp}=B("fanchor"),{vib:sp,vibrato:ip,v:ap}=B(["vib","vibmod"],"vibrato","v"),{noise:op}=B("noise"),{vibmod:up,vmod:cp}=B(["vibmod","vib"],"vmod"),{hcutoff:lp,hpf:pp,hp}=B(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:dp,hpq:mp}=B("hresonance","hpq"),{resonance:fp,lpq:gp}=B("resonance","lpq"),{djf:yp}=B("djf"),{delay:bp}=B(["delay","delaytime","delayfeedback"]),{delayfeedback:Mp,delayfb:Pp,dfb:vp}=B("delayfeedback","delayfb","dfb"),{delaytime:Cp,delayt:Ap,dt:Dp}=B("delaytime","delayt","dt"),{delaysync:xp}=B("delaysync"),{lock:Fp}=B("lock"),{detune:wp,det:Ep}=B("detune","det"),{unison:Sp}=B("unison"),{spread:Bp}=B("spread"),{dry:Zp}=B("dry"),{fadeTime:kp,fadeOutTime:Vp}=B("fadeTime","fadeOutTime"),{fadeInTime:Xp}=B("fadeInTime"),{freq:Gp}=B("freq"),{pattack:Tp,patt:Wp}=B("pattack","patt"),{pdecay:Lp,pdec:Rp}=B("pdecay","pdec"),{psustain:_p,psus:Ip}=B("psustain","psus"),{prelease:Np,prel:zp}=B("prelease","prel"),{penv:Yp}=B("penv"),{pcurve:Hp}=B("pcurve"),{panchor:Kp}=B("panchor"),{gate:Op,gat:jp}=B("gate","gat"),{leslie:Jp}=B("leslie"),{lrate:Up}=B("lrate"),{lsize:qp}=B("lsize"),{activeLabel:Qp}=B("activeLabel"),{label:$p}=B(["label","activeLabel"]),{degree:eh}=B("degree"),{mtranspose:th}=B("mtranspose"),{ctranspose:nh}=B("ctranspose"),{harmonic:rh}=B("harmonic"),{stepsPerOctave:sh}=B("stepsPerOctave"),{octaveR:ih}=B("octaveR"),{nudge:ah}=B("nudge"),{octave:oh}=B("octave"),{orbit:uh}=B("orbit"),{overgain:ch}=B("overgain"),{overshape:lh}=B("overshape"),{pan:ph}=B("pan"),{panspan:hh}=B("panspan"),{pansplay:dh}=B("pansplay"),{panwidth:mh}=B("panwidth"),{panorient:fh}=B("panorient"),{rate:gh}=B("rate"),{slide:yh}=B("slide"),{semitone:bh}=B("semitone"),{voice:Mh}=B("voice"),{chord:Ph}=B("chord"),{dictionary:vh,dict:Ch}=B("dictionary","dict"),{anchor:Ah}=B("anchor"),{offset:Dh}=B("offset"),{octaves:xh}=B("octaves"),{mode:Fh}=B(["mode","anchor"]),{room:wh}=B(["room","size"]),{roomlp:Eh,rlp:Sh}=B("roomlp","rlp"),{roomdim:Bh,rdim:Zh}=B("roomdim","rdim"),{roomfade:kh,rfade:Vh}=B("roomfade","rfade"),{ir:Xh,iresponse:Gh}=B(["ir","i"],"iresponse"),{irspeed:Th}=B("irspeed"),{irbegin:Wh}=B("irbegin"),{roomsize:Lh,size:Rh,sz:_h,rsize:Ih}=B("roomsize","size","sz","rsize"),{shape:Nh}=B(["shape","shapevol"]),{distort:zh,dist:Yh}=B(["distort","distortvol"],"dist"),{compressor:Hh}=B(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:Kh}=B("compressorKnee"),{compressorRatio:Oh}=B("compressorRatio"),{compressorAttack:jh}=B("compressorAttack"),{compressorRelease:Jh}=B("compressorRelease"),{speed:ia}=B("speed"),{stretch:Uh}=B("stretch"),{unit:qh}=B("unit"),{squiz:Qh}=B("squiz"),{vowel:$h}=B("vowel"),{waveloss:e0}=B("waveloss"),{density:ZC}=B("density"),{expression:t0}=B("expression"),{sustainpedal:n0}=B("sustainpedal"),{fshift:r0}=B("fshift"),{fshiftnote:s0}=B("fshiftnote"),{fshiftphase:i0}=B("fshiftphase"),{triode:a0}=B("triode"),{krush:o0}=B("krush"),{kcutoff:u0}=B("kcutoff"),{octer:c0}=B("octer"),{octersub:l0}=B("octersub"),{octersubsub:p0}=B("octersubsub"),{ring:h0}=B("ring"),{ringf:d0}=B("ringf"),{ringdf:m0}=B("ringdf"),{freeze:f0}=B("freeze"),{xsdelay:g0}=B("xsdelay"),{tsdelay:y0}=B("tsdelay"),{real:b0}=B("real"),{imag:M0}=B("imag"),{enhance:P0}=B("enhance"),{partials:v0}=B("partials"),{comb:C0}=B("comb"),{smear:A0}=B("smear"),{scram:D0}=B("scram"),{binshift:x0}=B("binshift"),{hbrick:F0}=B("hbrick"),{lbrick:w0}=B("lbrick"),{frameRate:E0}=B("frameRate"),{frames:S0}=B("frames"),{hours:B0}=B("hours"),{minutes:Z0}=B("minutes"),{seconds:k0}=B("seconds"),{songPtr:V0}=B("songPtr"),{uid:X0}=B("uid"),{val:G0}=B("val"),{cps:T0}=B("cps"),{clip:W0,legato:L0}=B("clip","legato"),{duration:R0,dur:_0}=B("duration","dur"),{zrand:I0}=B("zrand"),{curve:N0}=B("curve"),{deltaSlide:z0}=B("deltaSlide"),{pitchJump:Y0}=B("pitchJump"),{pitchJumpTime:H0}=B("pitchJumpTime"),{lfo:K0,repeatTime:O0}=B("lfo","repeatTime"),{znoise:j0}=B("znoise"),{zmod:J0}=B("zmod"),{zcrush:U0}=B("zcrush"),{zdelay:q0}=B("zdelay"),{zzfx:Q0}=B("zzfx"),{color:$0,colour:ed}=B(["color","colour"]);let aa=(...e)=>e.reduce((t,n)=>Object.assign(t,{[n]:ei(n)}),{});const td=R("adsr",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,r,s,i]=e;return t.set({attack:n,decay:r,sustain:s,release:i})}),nd=R("ad",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,r=n]=e;return t.attack(n).decay(r)}),rd=R("ds",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,r=0]=e;return t.set({decay:n,sustain:r})}),sd=R("ar",(e,t)=>{e=Array.isArray(e)?e:[e];const[n,r=n]=e;return t.set({attack:n,release:r})}),{midichan:id}=B("midichan"),{midimap:ad}=B("midimap"),{midiport:od}=B("midiport"),{midicmd:ud}=B("midicmd"),cd=R("control",(e,t)=>{if(!Array.isArray(e))throw new Error("control expects an array of [ccn, ccv]");const[n,r]=e;return t.ccn(n).ccv(r)}),{ccn:ld}=B("ccn"),{ccv:pd}=B("ccv"),{ctlNum:hd}=B("ctlNum"),{nrpnn:dd}=B("nrpnn"),{nrpv:md}=B("nrpv"),{progNum:fd}=B("progNum"),gd=R("sysex",(e,t)=>{if(!Array.isArray(e))throw new Error("sysex expects an array of [id, data]");const[n,r]=e;return t.sysexid(n).sysexdata(r)}),{sysexid:yd}=B("sysexid"),{sysexdata:bd}=B("sysexdata"),{midibend:Md}=B("midibend"),{miditouch:Pd}=B("miditouch"),{polyTouch:vd}=B("polyTouch"),oa=e=>_s.has(e)?_s.get(e):e,Cd=R("as",(e,t)=>(e=Array.isArray(e)?e:[e],t.fmap(n=>(n=Array.isArray(n)?n:[n],n=Object.fromEntries(e.map((r,s)=>[oa(r),n[s]])),n)))),Ad=R("scrub",(e,t)=>e.outerBind(n=>{Array.isArray(n)||(n=[n]);const[r,s=1]=n;return t.begin(r).mul(ia(s)).clip(1)}),!1),y2=Object.freeze(Object.defineProperty({__proto__:null,accelerate:sc,activeLabel:Qp,ad:nd,adsr:td,amp:uc,analyze:Cc,anchor:Ah,ar:sd,as:Cd,att:lc,attack:cc,bandf:Zc,bandq:Xc,bank:vc,bbexpr:nl,bbst:sl,begin:Tc,binshift:x0,bp:Vc,bpa:Wl,bpattack:Tl,bpd:zl,bpdecay:Nl,bpe:Zl,bpenv:Bl,bpf:kc,bpq:Gc,bpr:tp,bprelease:ep,bps:Jl,bpsustain:jl,byteBeatExpression:tl,byteBeatStartTime:rl,ccn:ld,ccv:pd,ch:al,channel:Pl,channels:il,chord:Ph,clip:W0,coarse:Yc,color:$0,colour:ed,comb:C0,compressor:Hh,compressorAttack:jh,compressorKnee:Kh,compressorRatio:Oh,compressorRelease:Jh,control:cd,cps:T0,createParam:ei,createParams:aa,crush:zc,ctf:Al,ctlNum:hd,ctranspose:nh,curve:N0,cut:vl,cutoff:Cl,dec:xc,decay:Dc,degree:eh,delay:bp,delayfb:Pp,delayfeedback:Mp,delaysync:xp,delayt:Ap,delaytime:Cp,deltaSlide:z0,density:ZC,det:Ep,detune:wp,dfb:vp,dict:Ch,dictionary:vh,dist:Yh,distort:zh,djf:yp,drive:el,dry:Zp,ds:rd,dt:Dp,duck:qc,duckattack:$c,duckdepth:Qc,dur:_0,duration:R0,end:Wc,enhance:P0,expression:t0,fadeInTime:Xp,fadeOutTime:Vp,fadeTime:kp,fanchor:rp,fft:Ac,fm:dc,fmattack:fc,fmdecay:yc,fmenv:mc,fmh:pc,fmi:hc,fmrelease:Mc,fmsustain:bc,fmvelocity:Pc,fmwave:gc,frameRate:E0,frames:S0,freeze:f0,freq:Gp,fshift:r0,fshiftnote:s0,fshiftphase:i0,ftype:np,gain:ac,gat:jp,gate:Op,getControlName:oa,harmonic:rh,hbrick:F0,hcutoff:lp,hold:Bc,hours:B0,hp,hpa:Gl,hpattack:Xl,hpd:Il,hpdecay:_l,hpe:Sl,hpenv:El,hpf:pp,hpq:mp,hpr:$l,hprelease:Ql,hps:Ol,hpsustain:Kl,hresonance:dp,imag:M0,ir:Xh,irbegin:Wh,iresponse:Gh,irspeed:Th,isControlName:qu,kcutoff:u0,krush:o0,label:$p,lbrick:w0,legato:L0,leslie:Jp,lfo:K0,lock:Fp,loop:Lc,loopBegin:Rc,loopEnd:Ic,loopb:_c,loope:Nc,lp:xl,lpa:Vl,lpattack:kl,lpd:Rl,lpdecay:Ll,lpe:wl,lpenv:Fl,lpf:Dl,lpq:gp,lpr:ql,lprelease:Ul,lps:Hl,lpsustain:Yl,lrate:Up,lsize:qp,midibend:Md,midichan:id,midicmd:ud,midimap:ad,midiport:od,miditouch:Pd,minutes:Z0,mode:Fh,mtranspose:th,n:nc,noise:op,note:rc,nrpnn:dd,nrpv:md,nudge:ah,octave:oh,octaveR:ih,octaves:xh,octer:c0,octersub:l0,octersubsub:p0,offset:Dh,orbit:uh,overgain:ch,overshape:lh,pan:ph,panchor:Kp,panorient:fh,panspan:hh,pansplay:dh,panwidth:mh,partials:v0,patt:Wp,pattack:Tp,pcurve:Hp,pdec:Rp,pdecay:Lp,penv:Yp,ph:pl,phasdp:Ml,phaser:hl,phasercenter:fl,phaserdepth:yl,phaserrate:ll,phasersweep:dl,phc:gl,phd:bl,phs:ml,pitchJump:Y0,pitchJumpTime:H0,polyTouch:vd,postgain:oc,prel:zp,prelease:Np,progNum:fd,psus:Ip,psustain:_p,pw:ol,pwrate:ul,pwsweep:cl,rate:gh,rdim:Zh,real:b0,registerControl:B,rel:Sc,release:Ec,repeatTime:O0,resonance:fp,rfade:Vh,ring:h0,ringdf:m0,ringf:d0,rlp:Sh,room:wh,roomdim:Bh,roomfade:kh,roomlp:Eh,roomsize:Lh,rsize:Ih,s:Qu,scram:D0,scrub:Ad,seconds:k0,semitone:bh,shape:Nh,size:Rh,slide:yh,smear:A0,songPtr:V0,sound:$u,source:ec,speed:ia,spread:Bp,squiz:Qh,src:tc,stepsPerOctave:sh,stretch:Uh,sus:wc,sustain:Fc,sustainpedal:n0,sysex:gd,sysexdata:bd,sysexid:yd,sz:_h,tremolo:Hc,tremolodepth:Oc,tremolophase:Jc,tremoloshape:Uc,tremoloskew:jc,tremolosync:Kc,triode:a0,tsdelay:y0,uid:X0,unison:Sp,unit:qh,v:ap,val:G0,velocity:ic,vib:sp,vibmod:up,vibrato:ip,vmod:cp,voice:Mh,vowel:$h,waveloss:e0,xsdelay:g0,zcrush:U0,zdelay:q0,zmod:J0,znoise:j0,zrand:I0,zzfx:Q0},Symbol.toStringTag,{value:"Module"})),kC=function(e,t){const[n,r]=e,[s,i]=t,[a,o]=$i(r,s);return[[r,n-r],[Us((u,c)=>u.concat(c),a,i),o]]},VC=function(e,t){const[n,r]=e,[s,i]=t,[a,o]=$i(n,i);return[[n,r-n],[Us((u,c)=>u.concat(c),s,a),o]]},b2=function(e,t){const[n,r]=e;return Math.min(n,r)<=1?[e,t]:b2(...n>r?kC(e,t):VC(e,t))},ua=function(e,t){const n=e<0,r=Math.abs(e),s=t-r,i=Array(r).fill([1]),a=Array(s).fill([0]),o=b2([r,s],[i,a]),u=Zn(o[1][0]).concat(Zn(o[1][1]));return n?u.map(c=>1-c):u},ca=function(e,t,n){const r=ua(e,t);return n?pu(r,-n):r},M2=R("euclid",function(e,t,n){return n.struct(ca(e,t,0))}),P2=R("e",function(e,t){Array.isArray(e)||(e=[e]);const[n,r=n,s=0]=e;return t.struct(ca(n,r,s))}),{euclidrot:v2,euclidRot:C2}=R(["euclidrot","euclidRot"],function(e,t,n,r){return r.struct(ca(e,t,n))}),A2=function(e,t,n,r){if(e<1)return Ge;const s=ca(e,t,0).join("").split("1").slice(1).map(i=>[i.length+1,!0]);return r.struct(ra(...s)).late(K(n).div(t))},D2=R(["euclidLegato"],function(e,t,n){return A2(e,t,0,n)}),x2=R(["euclidLegatoRot"],function(e,t,n,r){return A2(e,t,n,r)}),{euclidish:F2,eish:w2}=R(["euclidish","eish"],function(e,t,n,r){const s=sa(ua(e,t),new Array(e).fill(1),n);return r.struct(s).setSteps(t)});function Dd(e,t,n=.05,r=.1,s=.1,i=globalThis.setInterval,a=globalThis.clearInterval,o=!0){let u=0,c=0,p=10**4,d=.01;const m=F=>n=F(n);s=s||r/2;const f=()=>{const F=e(),Z=F+r+s;for(c===0&&(c=F+d);c<Z;)c=o?Math.round(c*p)/p:c,t(c,n,u,F),c+=n,u++};let P;const y=()=>{A(),f(),P=i(f,r*1e3)},A=()=>{P!==void 0&&a(P),P=void 0};return{setDuration:m,start:y,stop:()=>{u=0,c=0,A()},pause:()=>A(),duration:n,interval:r,getPhase:()=>c,minLatency:d}}function E2(e){return new O(t=>[new mt(void 0,t.span,e)])}const Ht=e=>{const t=n=>[new mt(void 0,n.span,e(n.span.begin))];return new O(t)},us=Ht(e=>e%1),la=us.toBipolar(),ti=Ht(e=>1-e%1),pa=ti.toBipolar(),ha=Ht(e=>Math.sin(Math.PI*2*e)),xd=ha.fromBipolar(),S2=xd._early(K(1).div(4)),B2=ha._early(K(1).div(4)),Fd=Ht(e=>Math.floor(e*2%2)),Z2=Fd.toBipolar(),k2=Pt(us,ti),V2=Pt(la,pa),X2=Pt(ti,us),G2=Pt(pa,la),da=Ht(Ar);let wd=0,Ed=0;typeof window<"u"&&document.addEventListener("mousemove",e=>{wd=e.clientY/document.body.clientHeight,Ed=e.clientX/document.body.clientWidth});const T2=Ht(()=>wd),W2=Ht(()=>wd),L2=Ht(()=>Ed),R2=Ht(()=>Ed),_2=e=>{const t=e<<13^e,n=t>>17^t;return n<<5^n},XC=e=>e-Math.trunc(e),I2=e=>_2(Math.trunc(XC(e/300)*536870912)),N2=e=>e%536870912/536870912,Is=e=>Math.abs(N2(I2(e))),GC=(e,t)=>{const n=[];for(let r=0;r<t;++r)n.push(N2(e)),e=_2(e);return n},TC=(e,t)=>GC(I2(e),t),Sd=e=>us.range(0,e).round().segment(e),z2=e=>{const t=J(e).log2(0).floor().add(1);return Bd(e,t)},Bd=(e,t=16)=>{t=J(t);const n=Sd(t).mul(-1).add(t.sub(1));return J(e).segment(t).brshift(n).band(it(1))},Zd=e=>Ht(t=>{const n=TC(t.floor().add(.5),e).map((s,i)=>[s,i]).sort((s,i)=>(s[0]>i[0])-(s[0]<i[0])).map(s=>s[1]),r=t.cyclePos().mul(e).floor()%e;return n[r]})._segment(e),Y2=(e,t,n)=>{const r=[...Array(t).keys()].map(s=>n.zoom(K(s).div(t),K(s+1).div(t)));return e.fmap(s=>r[s].repeatCycles(t)._fast(t)).innerJoin()},H2=R("shuffle",(e,t)=>Y2(Zd(e),e,t)),K2=R("scramble",(e,t)=>Y2(fa(e)._segment(e),e,t)),Dt=Ht(Is),O2=Dt.toBipolar(),ma=e=>Dt.fmap(t=>t<e),j2=e=>J(e).fmap(ma).innerJoin(),J2=ma(.5),fa=e=>Dt.fmap(t=>Math.trunc(t*e)),U2=e=>J(e).fmap(fa).innerJoin(),ga=(e,t)=>(t=t.map(J),t.length==0?Ge:e.range(0,t.length).fmap(n=>{const r=Math.min(Math.max(Math.floor(n),0),t.length-1);return t[r]})),ni=(e,t)=>ga(e,t).outerJoin(),ri=(e,t)=>ga(e,t).innerJoin(),kd=(...e)=>ni(Dt,e),q2=(...e)=>ri(Dt,e),Q2=kd;O.prototype.choose=function(...e){return ni(this,e)};O.prototype.choose2=function(...e){return ni(this.fromBipolar(),e)};const Vd=(...e)=>ri(Dt.segment(1),e),$2=Vd,eM=function(e,...t){const n=t.map(o=>J(o[0])),r=[];let s=it(0);for(const o of t)s=s.add(o[1]),r.push(s);const i=Du(r),a=function(o){const u=s.mul(o);return i.fmap(c=>p=>n[c.findIndex(d=>d>p,c)]).appLeft(u)};return e.bind(a)},WC=(...e)=>eM(...e).outerJoin(),tM=(...e)=>WC(Dt,...e),Xd=(...e)=>eM(Dt.segment(1),...e).innerJoin(),nM=Xd;function LC(e){let t=Math.floor(e),n=t+1;const r=s=>6*s**5-15*s**4+10*s**3;return(s=>i=>a=>i+r(s)*(a-i))(e-t)(Is(t))(Is(n))}const Gd=e=>e.fmap(LC);function RC(e){const t=Math.floor(e),n=t+1,r=Is(t),s=Is(n)+r,i=(e-t)/(n-t);return((a,o,u)=>a+(o-a)*u)(r,s,i)/2}const Td=e=>e.fmap(RC),rM=Gd(da.fmap(e=>Number(e))),sM=Td(da.fmap(e=>Number(e))),iM=R("degradeByWith",(e,t,n)=>n.fmap(r=>s=>r).appLeft(e.filterValues(r=>r>t)),!0,!0),aM=R("degradeBy",function(e,t){return t._degradeByWith(Dt,e)},!0,!0),oM=R("degrade",e=>e._degradeBy(.5),!0,!0),uM=R("undegradeBy",function(e,t){return t._degradeByWith(Dt.fmap(n=>1-n),e)},!0,!0),cM=R("undegrade",e=>e._undegradeBy(.5),!0,!0),lM=R("sometimesBy",function(e,t,n){return J(e).fmap(r=>Oe(n._degradeBy(r),t(n._undegradeBy(1-r)))).innerJoin()}),pM=R("sometimes",function(e,t){return t._sometimesBy(.5,e)}),hM=R("someCyclesBy",function(e,t,n){return J(e).fmap(r=>Oe(n._degradeByWith(Dt._segment(1),r),t(n._degradeByWith(Dt.fmap(s=>1-s)._segment(1),1-r)))).innerJoin()}),dM=R("someCycles",function(e,t){return t._someCyclesBy(.5,e)}),mM=R("often",function(e,t){return t.sometimesBy(.75,e)}),fM=R("rarely",function(e,t){return t.sometimesBy(.25,e)}),gM=R("almostNever",function(e,t){return t.sometimesBy(.1,e)}),yM=R("almostAlways",function(e,t){return t.sometimesBy(.9,e)}),bM=R("never",function(e,t){return t}),MM=R("always",function(e,t){return e(t)});function ya(e){Array.isArray(e)===!1&&(e=[e]);const t=vu();return e.every(n=>{const r=Pu.get(n)??n;return t[r]})}const PM=R("whenKey",function(e,t,n){return n.when(ya(e),t)}),vM=R("keyDown",function(e){return e.fmap(ya)}),Wn=function(e,t,n=!0){const r=Array.isArray(e),s=Object.keys(e).length;return e=bu(e,J),s===0?Ge:t.fmap(i=>{let a=i;return r&&(a=n?Math.round(a)%s:qs(Math.round(a),0,e.length-1)),e[a]})},Wd=function(e,t){return Array.isArray(t)&&([t,e]=[e,t]),_C(e,t)},_C=R("pick",function(e,t){return Wn(e,t,!1).innerJoin()}),Ld=R("pickmod",function(e,t){return Wn(e,t,!0).innerJoin()}),CM=R("pickF",function(e,t,n){return n.apply(Wd(e,t))}),AM=R("pickmodF",function(e,t,n){return n.apply(Ld(e,t))}),DM=R("pickOut",function(e,t){return Wn(e,t,!1).outerJoin()}),xM=R("pickmodOut",function(e,t){return Wn(e,t,!0).outerJoin()}),FM=R("pickRestart",function(e,t){return Wn(e,t,!1).restartJoin()}),wM=R("pickmodRestart",function(e,t){return Wn(e,t,!0).restartJoin()}),EM=R("pickReset",function(e,t){return Wn(e,t,!1).resetJoin()}),SM=R("pickmodReset",function(e,t){return Wn(e,t,!0).resetJoin()}),{inhabit:BM,pickSqueeze:ZM}=R(["inhabit","pickSqueeze"],function(e,t){return Wn(e,t,!1).squeezeJoin()}),{inhabitmod:kM,pickmodSqueeze:VM}=R(["inhabitmod","pickmodSqueeze"],function(e,t){return Wn(e,t,!0).squeezeJoin()}),XM=(e,t)=>(t=t.map(J),t.length==0?Ge:e.fmap(n=>{const r=Yt(Math.round(n),t.length);return t[r]}).squeezeJoin());let Ur;try{Ur=window==null?void 0:window.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let G1=Ur==null?void 0:Ur.getVoices();function IC(e,t,n){Ur.cancel();const r=new SpeechSynthesisUtterance(e);r.lang=t,G1=Ur.getVoices();const s=G1.filter(i=>i.lang.includes(t));typeof n=="number"?r.voice=s[n%s.length]:typeof n=="string"&&(r.voice=s.find(i=>i.name===i)),speechSynthesis.speak(r)}const GM=R("speak",function(e,t,n){return n.onTrigger(r=>{IC(r.value,e,t)})}),Rd={},Ns=async(...e)=>{const t=await Promise.allSettled(e),n=t.filter(r=>r.status==="fulfilled").map(r=>r.value);return t.forEach((r,s)=>{r.status==="rejected"&&console.warn(`evalScope: module with index ${s} could not be loaded:`,r.reason)}),n.forEach(r=>{Object.entries(r).forEach(([s,i])=>{globalThis[s]=i,Rd[s]=i})}),n};function NC(e,t={}){const{wrapExpression:n=!0,wrapAsync:r=!0}=t;n&&(e=`{${e}}`),r&&(e=`(async ()=>${e})()`);const s=`"use strict";return (${e})`;return Function(s)()}const TM=async(e,t,n)=>{let r={};if(t){const s=t(e,n);e=s.output,r=s}return{mode:"javascript",pattern:await NC(e,{wrapExpression:!!t}),meta:r}};class zC{constructor({onTrigger:t,onToggle:n,getTime:r}){this.started=!1,this.cps=.5,this.getTime=r,this.time_at_last_tick_message=0,this.collator=new Mu({getTargetClockTime:r}),this.onToggle=n,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL(""+new URL("data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIEwoKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCkqLjAwMX1sZXQgXz0wLHI9MCxvPS41O2NvbnN0IGg9bmV3IE1hcCxtPS4xLE09bmV3IEJyb2FkY2FzdENoYW5uZWwoInN0cnVkZWx0aWNrIiksYj0ocyxlKT0+e00ucG9zdE1lc3NhZ2Uoe3R5cGU6cyxwYXlsb2FkOmV9KX0sQz1FKEwsKHMsZSx0LG4pPT57Y29uc3QgaT1yKmUsZD1zLW4sYz1uK2QsdT1pKm8sbD1fK3UsZz1uLWMtZSxmPWUqbyxwPWwrZix5PWwrZypvO2IoInRpY2siLHtiZWdpbjpsLGVuZDpwLGNwczpvLHRpbWU6bixjeWNsZTp5fSkscisrfSxtKTtsZXQgaz0hMTtjb25zdCBJPXM9PntoLnNldChzLHtzdGFydGVkOiEwfSksIWsmJihDLnN0YXJ0KCksaz0hMCl9LEE9YXN5bmMgcz0+e2guc2V0KHMse3N0YXJ0ZWQ6ITF9KTtjb25zdCBlPUFycmF5LmZyb20oaC52YWx1ZXMoKSkuc29tZSh0PT50LnN0YXJ0ZWQpOyFrfHxlfHwoQy5zdG9wKCksdygwKSxrPSExKX0sdz1zPT57cj0wLF89c30sRD1zPT57Y29uc3R7dHlwZTplLHBheWxvYWQ6dH09cztzd2l0Y2goZSl7Y2FzZSJjcHNjaGFuZ2UiOntpZih0LmNwcyE9PW8pe2NvbnN0IG49ciptO189XytuKm8sbz10LmNwcyxyPTB9YnJlYWt9Y2FzZSJzZXRjeWNsZSI6e3codC5jeWNsZSk7YnJlYWt9Y2FzZSJ0b2dnbGUiOnt0LnN0YXJ0ZWQ/SShzLmlkKTpBKHMuaWQpO2JyZWFrfX19O3NlbGYub25jb25uZWN0PWZ1bmN0aW9uKHMpe2NvbnN0IGU9cy5wb3J0c1swXTtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLGZ1bmN0aW9uKHQpe0QodC5kYXRhKX0pLGUuc3RhcnQoKX07ZnVuY3Rpb24gRShzLGUsdD0uMDUsbj0uMSxpPS4xKXtsZXQgZD0wLGM9MCx1PTEwKio0LGw9LjAxO2NvbnN0IGc9YT0+dD1hKHQpO2k9aXx8bi8yO2NvbnN0IGY9KCk9Pntjb25zdCBhPXMoKSxPPWErbitpO2ZvcihjPT09MCYmKGM9YStsKTtjPE87KWM9TWF0aC5yb3VuZChjKnUpL3UsYz49YSYmZShjLHQsZCxhKSxjPGEmJmNvbnNvbGUubG9nKCJUT08gTEFURSIsYyksYys9dCxkKyt9O2xldCBwO2NvbnN0IHk9KCk9PntUKCksZigpLHA9c2V0SW50ZXJ2YWwoZixuKjFlMyl9LFQ9KCk9PnAhPT12b2lkIDAmJmNsZWFySW50ZXJ2YWwocCk7cmV0dXJue3NldER1cmF0aW9uOmcsc3RhcnQ6eSxzdG9wOigpPT57ZD0wLGM9MCxUKCl9LHBhdXNlOigpPT5UKCksZHVyYXRpb246dCxpbnRlcnZhbDpuLGdldFBoYXNlOigpPT5jLG1pbkxhdGVuY3k6bH19fSkoKTsK",import.meta.url).href,import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const s=a=>{const{cps:o,begin:u,end:c,cycle:p,time:d}=a;this.cps=o,this.cycle=p;const m=this.collator.calculateOffset(d)+d;i(u,c,m),this.time_at_last_tick_message=m},i=(a,o,u)=>{this.started!==!1&&this.pattern.queryArc(a,o,{_cps:this.cps}).forEach(c=>{if(c.hasOnset()){const p=Vi(c.whole.begin-this.cycle,this.cps)+u+this.latency,d=Vi(c.duration,this.cps);t==null||t(c,0,d,this.cps,p)}})};this.channel.onmessage=a=>{if(!this.started)return;const{payload:o,type:u}=a.data;switch(u){case"tick":s(o)}}}sendMessage(t,n){this.worker.port.postMessage({type:t,payload:n,id:this.id})}now(){const t=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+t}setCps(t=1){this.sendMessage("cpschange",{cps:t})}setCycle(t){this.sendMessage("setcycle",{cycle:t})}setStarted(t){var n;this.sendMessage("toggle",{started:t}),this.started=t,(n=this.onToggle)==null||n.call(this,t)}start(){ct("[cyclist] start"),this.setStarted(!0)}stop(){ct("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(t,n=!1){this.pattern=t,n&&!this.started&&this.start()}log(t,n,r){const s=r.filter(i=>i.hasOnset());console.log(`${t.toFixed(4)} - ${n.toFixed(4)} ${Array(s.length).fill("I").join("")}`)}}class _d{constructor({interval:t,onTrigger:n,onToggle:r,onError:s,getTime:i,latency:a=.1,setInterval:o,clearInterval:u,beforeStart:c}){this.started=!1,this.beforeStart=c,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=i,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=r,this.latency=a,this.clock=Dd(i,(p,d,m,f)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=p),this.num_ticks_since_cps_change++;const P=this.num_ticks_since_cps_change*d*this.cps;try{const y=this.lastEnd;this.lastBegin=y;const A=this.num_cycles_at_cps_change+P;if(this.lastEnd=A,this.lastTick=p,p<f){console.log("skip query: too late");return}this.pattern.queryArc(y,A,{_cps:this.cps}).forEach(F=>{if(F.hasOnset()){const Z=(F.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+a,X=F.duration/this.cps,w=Z-p;n==null||n(F,w,X,this.cps,Z),F.value.cps!==void 0&&this.cps!=F.value.cps&&(this.cps=F.value.cps,this.num_ticks_since_cps_change=0)}})}catch(y){iu(y),s==null||s(y)}},t,.1,.1,o,u)}now(){if(!this.started)return 0;const t=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+t*this.cps}setStarted(t){var n;this.started=t,(n=this.onToggle)==null||n.call(this,t)}async start(){var t;if(await((t=this.beforeStart)==null?void 0:t.call(this)),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");ct("[cyclist] start"),this.clock.start(),this.setStarted(!0)}pause(){ct("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){ct("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(t,n=!1){this.pattern=t,n&&!this.started&&await this.start()}setCps(t=.5){this.cps!==t&&(this.cps=t,this.num_ticks_since_cps_change=0)}log(t,n,r){const s=r.filter(i=>i.hasOnset());console.log(`${t.toFixed(4)} - ${n.toFixed(4)} ${Array(s.length).fill("I").join("")}`)}}let Go;function Ti(){if(!Go)throw new Error("no time set! use setTime to define a time source");return Go()}function zs(e){Go=e}function WM({defaultOutput:e,onEvalError:t,beforeEval:n,beforeStart:r,afterEval:s,getTime:i,transpiler:a,onToggle:o,editPattern:u,onUpdateState:c,sync:p=!1,setInterval:d,clearInterval:m,id:f,mondo:P=!1}){const y={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},A={id:f},F=ee=>{Object.assign(y,ee),y.isDirty=y.code!==y.activeCode,y.error=y.evalError||y.schedulerError,c==null||c(y)},Z={onTrigger:Id({defaultOutput:e,getTime:i}),getTime:i,onToggle:ee=>{F({started:ee}),o==null||o(ee)},setInterval:d,clearInterval:m,beforeStart:r},X=p&&typeof SharedWorker<"u"?new zC(Z):new _d(Z);let w={},D=0,k;const V=function(){return w={},D=0,k=void 0,Ge},T=async(ee,ye=!0)=>(ee=(u==null?void 0:u(ee))||ee,await X.setPattern(ee,ye),ee);zs(()=>X.now());const z=()=>X.stop(),_=()=>X.start(),j=()=>X.pause(),L=()=>X.toggle(),H=ee=>X.setCps(ee),se=ee=>X.setCps(ee/60);let he=[];const re=function(ee){return he.push(ee),Ge},ie=function(ee){return k=ee,Ge},te=()=>{O.prototype.p=function(ye){return typeof ye=="string"&&(ye.startsWith("_")||ye.endsWith("_"))?Ge:(ye==="$"&&(ye=`$${D}`,D++),w[ye]=this,this)},O.prototype.q=function(ye){return Ge};try{for(let ye=1;ye<10;++ye)Object.defineProperty(O.prototype,`d${ye}`,{get(){return this.p(ye)},configurable:!0}),Object.defineProperty(O.prototype,`p${ye}`,{get(){return this.p(ye)},configurable:!0}),O.prototype[`q${ye}`]=Ge}catch(ye){console.warn("injectPatternMethods: error:",ye)}const ee=R("cpm",function(ye,Ye){return Ye._fast(ye/60/X.cps)});return Ns({all:re,each:ie,hush:V,cpm:ee,setCps:H,setcps:H,setCpm:se,setcpm:se})};return{scheduler:X,evaluate:async(ee,ye=!0,Ye=!0)=>{if(!ee)throw new Error("no code to evaluate");try{F({code:ee,pending:!0}),await te(),zs(()=>X.now()),await(n==null?void 0:n({code:ee})),he=[],Ye&&V(),P&&(ee=`mondolang\`${ee}\``);let{pattern:Y,meta:ke}=await TM(ee,a,A);if(Object.keys(w).length){let _e=Object.values(w);k&&(_e=_e.map(ft=>k(ft))),Y=Oe(..._e)}else k&&(Y=k(Y));if(he.length)for(let _e in he)Y=he[_e](Y);if(!ta(Y)){const _e=`got "${typeof evaluated}" instead of pattern`;throw new Error(_e+(typeof evaluated=="function"?", did you forget to call a function?":"."))}return ct("[eval] code updated"),Y=await T(Y,ye),F({miniLocations:(ke==null?void 0:ke.miniLocations)||[],widgets:(ke==null?void 0:ke.widgets)||[],activeCode:ee,pattern:Y,evalError:void 0,schedulerError:void 0,pending:!1}),s==null||s({code:ee,pattern:Y,meta:ke}),Y}catch(Y){ct(`[eval] error: ${Y.message}`,"error"),console.error(Y),F({evalError:Y,pending:!1}),t==null||t(Y)}},start:_,stop:z,pause:j,setCps:H,setPattern:T,setCode:ee=>F({code:ee}),toggle:L,state:y}}const Id=({getTime:e,defaultOutput:t})=>async(n,r,s,i,a)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await t(n,r,s,i,a),n.context.onTrigger&&await n.context.onTrigger(n,e(),i,a)}catch(o){iu(o,"getTrigger")}},LM=function(e,t={}){const n=document.getElementById("code"),r="background-image:url("+e+");background-size:contain;";n.style=r;const{className:s}=n,i=(o,u)=>{({style:()=>n.style=r+";"+u,className:()=>n.className=u+" "+s})[o]()},a=Object.entries(t).filter(([o,u])=>typeof u=="function");Object.entries(t).filter(([o,u])=>typeof u=="string").forEach(([o,u])=>i(o,u)),a.length},RM=()=>{const e=document.getElementById("code");e&&(e.style="")};ct("🌀 @strudel/core loaded 🌀");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const _M=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:Mu,Cyclist:_d,Fraction:K,Hap:mt,Pattern:O,State:Sr,TimeSpan:tt,__chooseWith:ga,_brandBy:ma,_fitslice:Gu,_irand:fa,_keyDown:ya,_match:Tu,_mod:Yt,_morph:sa,_polymeterListSteps:Lu,_retime:Xi,_slices:Gi,accelerate:sc,activeLabel:Qp,ad:nd,add:qg,adsr:td,almostAlways:yM,almostNever:gM,always:MM,amp:uc,analyze:Cc,anchor:Ah,and:gy,apply:Ky,ar:sd,arp:Zg,arpWith:Bg,arrange:Tg,as:Cd,att:lc,attack:cc,averageArray:uu,backgroundImage:LM,band:ry,bandf:Zc,bandq:Xc,bank:vc,base64ToUnicode:yu,bbexpr:nl,bbst:sl,beat:f2,begin:Tc,berlin:sM,berlinWith:Td,binary:z2,binaryN:Bd,bind:Ng,binshift:x0,bite:Qy,bjork:ua,blshift:ay,bor:sy,bp:Vc,bpa:Wl,bpattack:Tl,bpd:zl,bpdecay:Nl,bpe:Zl,bpenv:Bl,bpf:kc,bpq:Gc,bpr:tp,bprelease:ep,bps:Jl,bpsustain:jl,brak:ub,brand:J2,brandBy:j2,brshift:oy,bxor:iy,bypass:Tb,byteBeatExpression:tl,byteBeatStartTime:rl,calculateSteps:Sg,cat:Su,ccn:ld,ccv:pd,ceil:vy,ch:al,channel:Pl,channels:il,choose:kd,chooseCycles:Vd,chooseIn:q2,chooseInWith:ri,chooseOut:Q2,chooseWith:ni,chop:i2,chord:Ph,chunk:xb,chunkBack:Eb,chunkBackInto:Gb,chunkInto:Vb,chunkback:Sb,chunkbackinto:Xb,chunkinto:kb,clamp:qs,cleanupUi:RM,clip:W0,coarse:Yc,code2hash:Fg,color:$0,colour:ed,comb:C0,compose:Pg,compress:Ey,compressSpan:Sy,compressor:Hh,compressorAttack:jh,compressorKnee:Kh,compressorRatio:Oh,compressorRelease:Jh,compressspan:By,constant:vg,contract:Yu,control:cd,controls:y2,cosine:S2,cosine2:B2,cpm:Oy,cps:T0,createClock:Dd,createParam:ei,createParams:aa,crush:zc,ctf:Al,ctlNum:hd,ctranspose:nh,curry:Pe,curve:N0,cut:vl,cutoff:Cl,cycleToSeconds:Vi,dec:xc,decay:Dc,degrade:oM,degradeBy:aM,degradeByWith:iM,degree:eh,delay:bp,delayfb:Pp,delayfeedback:Mp,delaysync:xp,delayt:Ap,delaytime:Cp,deltaSlide:z0,det:Ep,detune:wp,dfb:vp,dict:Ch,dictionary:vh,dist:Yh,distort:zh,div:ey,djf:yp,drawLine:Cu,drive:el,drop:Iu,dry:Zp,ds:rd,dt:Dp,duck:qc,duckattack:$c,duckdepth:Qc,dur:_0,duration:R0,e:P2,early:jy,echo:Mb,echoWith:fb,echowith:gb,eish:w2,end:Wc,enhance:P0,eq:hy,eqt:dy,errorLogger:iu,euclid:M2,euclidLegato:D2,euclidLegatoRot:x2,euclidRot:C2,euclidish:F2,euclidrot:v2,evalScope:Ns,evaluate:TM,every:Hy,expand:zu,expression:t0,extend:Nu,fadeInTime:Xp,fadeOutTime:Vp,fadeTime:kp,fanchor:rp,fast:Wy,fastChunk:Zb,fastGap:Zy,fastcat:Pt,fastchunk:Bb,fastgap:ky,fft:Ac,filter:Ib,filterWhen:Nb,firstOf:Yy,fit:p2,flatten:Zn,floor:Py,fm:dc,fmattack:fc,fmdecay:yc,fmenv:mc,fmh:pc,fmi:hc,fmrelease:Mc,fmsustain:bc,fmvelocity:Pc,fmwave:gc,focus:Vy,focusSpan:Xy,focusspan:Gy,fractionalArgs:Cg,frameRate:E0,frames:S0,freeze:f0,freq:Gp,freqToMidi:Ji,fromBipolar:Ay,fshift:r0,fshiftnote:s0,fshiftphase:i0,ftype:np,func:by,gain:ac,gap:Xr,gat:jp,gate:Op,getControlName:oa,getCurrentKeyboardState:vu,getEventOffsetMs:gg,getFreq:ou,getFrequency:lu,getPerformanceTimeSeconds:Eg,getPlayableNoteValue:Mg,getSoundIndex:bg,getTime:Ti,getTrigger:Id,grow:Yb,gt:cy,gte:py,harmonic:rh,hash2code:wg,hbrick:F0,hcutoff:lp,hold:Bc,hours:B0,hp,hpa:Gl,hpattack:Xl,hpd:Il,hpdecay:_l,hpe:Sl,hpenv:El,hpf:pp,hpq:mp,hpr:$l,hprelease:Ql,hps:Ol,hpsustain:Kl,hresonance:dp,hsl:_b,hsla:Rb,hurry:Ly,id:Ar,imag:M0,inhabit:BM,inhabitmod:kM,innerBind:zg,inside:Iy,inv:ib,invert:sb,ir:Xh,irand:U2,irbegin:Wh,iresponse:Gh,irspeed:Th,isControlName:qu,isNote:fr,isNoteWithOctave:mg,isPattern:ta,isaw:ti,isaw2:pa,iter:vb,iterBack:Cb,iterback:Ab,itri:X2,itri2:G2,jux:mb,juxBy:hb,juxby:db,kcutoff:u0,keep:Jg,keepif:Ug,keyAlias:Pu,keyDown:vM,krush:o0,label:$p,lastOf:zy,late:Zu,lbrick:w0,legato:L0,leslie:Jp,lfo:K0,linger:$y,listRange:Ui,lock:Fp,logKey:ji,logger:ct,loop:Lc,loopAt:c2,loopAtCps:h2,loopBegin:Rc,loopEnd:Ic,loopat:l2,loopatcps:d2,loopb:_c,loope:Nc,lp:xl,lpa:Vl,lpattack:kl,lpd:Rl,lpdecay:Ll,lpe:wl,lpenv:Fl,lpf:Dl,lpq:gp,lpr:ql,lprelease:Ul,lps:Hl,lpsustain:Yl,lrate:Up,lsize:qp,lt:uy,lte:ly,mapArgs:Qi,mask:Lg,midi2note:yg,midiToFreq:Er,midibend:Md,midichan:id,midicmd:ud,midimap:ad,midiport:od,miditouch:Pd,minutes:Z0,mod:ty,mode:Fh,morph:g2,mouseX:R2,mouseY:W2,mousex:L2,mousey:T2,mtranspose:th,mul:$g,n:nc,nanFallback:cu,ne:my,net:fy,never:bM,noise:op,note:rc,noteToMidi:$n,nothing:nn,nrpnn:dd,nrpv:md,nudge:ah,numeralArgs:Wt,objectMap:bu,octave:oh,octaveR:ih,octaves:xh,octer:c0,octersub:l0,octersubsub:p0,off:ob,offset:Dh,often:mM,or:yy,orbit:uh,outerBind:Yg,outside:Ny,overgain:ch,overshape:lh,pace:Wu,pairs:mu,palindrome:pb,pan:ph,panchor:Kp,panorient:fh,panspan:hh,pansplay:dh,panwidth:mh,parseFractional:du,parseNumeral:qi,partials:v0,patt:Wp,pattack:Tp,pcurve:Hp,pdec:Rp,pdecay:Lp,penv:Yp,perlin:rM,perlinWith:Gd,ph:pl,phasdp:Ml,phaser:hl,phasercenter:fl,phaserdepth:yl,phaserrate:ll,phasersweep:dl,phc:gl,phd:bl,phs:ml,pick:Wd,pickF:CM,pickOut:DM,pickReset:EM,pickRestart:FM,pickSqueeze:ZM,pickmod:Ld,pickmodF:AM,pickmodOut:xM,pickmodReset:SM,pickmodRestart:wM,pickmodSqueeze:VM,pipe:hu,pitchJump:Y0,pitchJumpTime:H0,ply:Ty,pm:Xg,polyBind:Og,polyTouch:vd,polymeter:$s,polyrhythm:kg,postgain:oc,pow:ny,pr:Vg,prel:zp,prelease:Np,press:lb,pressBy:cb,progNum:fd,psus:Ip,psustain:_p,pure:it,pw:ol,pwrate:ul,pwsweep:cl,rand:Dt,rand2:O2,randcat:$2,randrun:Zd,range:Dy,range2:Fy,rangex:xy,rarely:fM,rate:gh,ratio:wy,rdim:Zh,real:b0,ref:m2,register:R,registerControl:B,reify:J,rel:Sc,release:Ec,removeUndefineds:Vr,repeatCycles:Db,repeatTime:O0,repl:WM,resonance:fp,rev:ku,rfade:Vh,rib:Lb,ribbon:Wb,ring:h0,ringdf:m0,ringf:d0,rlp:Sh,room:wh,roomdim:Bh,roomfade:kh,roomlp:Eh,roomsize:Lh,rotate:pu,round:My,rsize:Ih,run:Sd,s:Qu,s_add:qb,s_alt:Ob,s_cat:Kb,s_contract:t2,s_expand:$b,s_extend:e2,s_polymeter:jb,s_sub:Qb,s_taper:Jb,s_taperlist:Ub,s_tour:n2,s_zip:r2,saw:us,saw2:la,scram:D0,scramble:K2,scrub:Ad,seconds:k0,seg:tb,segment:eb,semitone:bh,seq:Bu,seqPLoop:Wg,sequence:rn,sequenceP:Du,set:jg,setStringParser:Au,setTime:zs,shape:Nh,shrink:Ku,shrinklist:Hu,shuffle:H2,signal:Ht,silence:Ge,sine:xd,sine2:ha,size:Rh,slice:Ju,slide:yh,slow:Ry,slowChunk:wb,slowcat:er,slowcatPrime:na,slowchunk:Fb,smear:A0,sol2note:Ag,someCycles:dM,someCyclesBy:hM,sometimes:pM,sometimesBy:lM,songPtr:V0,sound:$u,source:ec,sparsity:_y,speak:GM,speed:ia,splice:u2,splitAt:$i,spread:Bp,square:Fd,square2:Z2,squeeze:XM,squeezeBind:Hg,squiz:Qh,src:tc,stack:Oe,stackBy:Gg,stackCentre:Eu,stackLeft:Fu,stackRight:wu,steady:E2,stepBind:Kg,stepalt:Ru,stepcat:Vt,steps:s2,stepsPerOctave:sh,stretch:Uh,striate:a2,stringifyValues:ea,struct:Rg,strudelScope:Rd,stut:Pb,stutWith:yb,stutwith:bb,sub:Qg,superimpose:_g,sus:wc,sustain:Fc,sustainpedal:n0,swing:rb,swingBy:nb,sysex:gd,sysexdata:bd,sysexid:yd,sz:_h,take:_u,time:da,timeCat:ra,timecat:Hb,toBipolar:Cy,tokenizeNote:au,tour:Ou,tremolo:Hc,tremolodepth:Oc,tremolophase:Jc,tremoloshape:Uc,tremoloskew:jc,tremolosync:Kc,tri:k2,tri2:V2,triode:a0,tsdelay:y0,uid:X0,undegrade:cM,undegradeBy:uM,unicodeToBase64:gu,uniq:Dg,uniqsort:xg,uniqsortr:fu,unison:Sp,unit:qh,v:ap,val:G0,valueToMidi:fg,velocity:ic,vib:sp,vibmod:up,vibrato:ip,vmod:cp,voice:Mh,vowel:$h,waveloss:e0,wchoose:tM,wchooseCycles:Xd,when:ab,whenKey:PM,withValue:Ig,within:zb,wrandcat:nM,xfade:Uu,xsdelay:g0,zcrush:U0,zdelay:q0,zip:ju,zipWith:Us,zmod:J0,znoise:j0,zoom:Jy,zoomArc:Uy,zoomarc:qy,zrand:I0,zzfx:Q0},Symbol.toStringTag,{value:"Module"}));if(typeof DelayNode<"u"){class e extends DelayNode{constructor(n,r,s,i){super(n),r=Math.abs(r),this.delayTime.value=s;const a=n.createGain();a.gain.value=Math.min(Math.abs(i),.995),this.feedback=a.gain;const o=n.createGain();return o.gain.value=r,this.delayGain=o,this.connect(a),this.connect(o),a.connect(this),this.connect=u=>o.connect(u),this}start(n){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,n+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(t,n,r){return new e(this,t,n,r)}}var Nd={};Nd.generateReverb=function(e,t){for(var n=e.audioContext||new AudioContext,r=n.sampleRate,s=e.numChannels||2,i=e.decayTime*1.5,a=Math.round(e.decayTime*r),o=Math.round(i*r),u=Math.round((e.fadeInTime||0)*r),c=Math.pow(1/1e3,1/a),p=n.createBuffer(s,o,r),d=0;d<s;d++){for(var m=p.getChannelData(d),f=0;f<o;f++)m[f]=KC()*Math.pow(c,f);for(var f=0;f<u;f++)m[f]*=f/u}YC(p,e.lpFreqStart||0,e.lpFreqEnd||0,e.decayTime,t)};Nd.generateGraph=function(e,t,n,r,s){var i=document.createElement("canvas");i.width=t,i.height=n;var a=i.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,i.width,i.height),a.fillStyle="#fff";for(var o=t/e.length,u=n/(s-r),c=0;c<e.length;c++)a.fillRect(c*o,n-(e[c]-r)*u,1,1);return i};var YC=function(e,t,n,r,s){if(t==0){s(e);return}var i=HC(e),a=new OfflineAudioContext(e.numberOfChannels,i[0].length,e.sampleRate),o=a.createBufferSource();o.buffer=e;var u=a.createBiquadFilter();t=Math.min(t,e.sampleRate/2),n=Math.min(n,e.sampleRate/2),u.type="lowpass",u.Q.value=1e-4,u.frequency.setValueAtTime(t,0),u.frequency.linearRampToValueAtTime(n,r),o.connect(u),u.connect(a.destination),o.start(),a.oncomplete=function(c){s(c.renderedBuffer)},a.startRendering(),window.filterNode=u},HC=function(e){for(var t=[],n=0;n<e.numberOfChannels;n++)t[n]=e.getChannelData(n);return t},KC=function(){return Math.random()*2-1};let IM=e=>console.log(e);function zd(e,t="cyclist"){Nt(`[${t}] error: ${e.message}`)}const Nt=(...e)=>IM(...e),Yd=e=>{IM=e},OC=e=>{var s;if(typeof e!="string")return[];const[t,n="",r]=((s=e.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/))==null?void 0:s.slice(1))||[];return t?[t,n,r?Number(r):void 0]:[]},jC={c:0,d:2,e:4,f:5,g:7,a:9,b:11},JC={"#":1,b:-1,s:1,f:-1},ba=(e,t=3)=>{const[n,r,s=t]=OC(e);if(!n)throw new Error('not a note: "'+e+'"');const i=jC[n.toLowerCase()],a=(r==null?void 0:r.split("").reduce((o,u)=>o+JC[u],0))||0;return(Number(s)+1)*12+i+a},NM=e=>Math.pow(2,(e-69)/12)*440,Br=(e,t,n)=>Math.min(Math.max(e,t),n),UC=e=>12*Math.log(e/440)/Math.LN2+69,qC=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:r}=e;return typeof n=="number"?UC(n):typeof r=="string"?ba(r):typeof r=="number"?r:t};function On(e,t=0,n){return isNaN(Number(e))?(!n&&Nt(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const zM=(e,t)=>(e%t+t)%t,T1=(e,t)=>zM(Math.round(On(e,0)),t);function QC(e,t){return e/t}typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(e,t,n=1,r=0){const s=Math.floor(Br(r,0,1)*t.length),i=t.sampleRate*e,a=this.createBuffer(t.numberOfChannels,t.length,t.sampleRate);for(let o=0;o<t.numberOfChannels;o++){let u=t.getChannelData(o),c=a.getChannelData(o);for(let p=0;p<i;p++){let d=(s+p*Math.abs(n))%u.length;n<1&&(d=d*-1),c[p]=u.at(d)||0}}return a},AudioContext.prototype.createReverb=function(e,t,n,r,s,i,a){const o=this.createConvolver();return o.generate=(u=2,c=.1,p=15e3,d=1e3,m,f,P)=>{o.duration=u,o.fade=c,o.lp=p,o.dim=d,o.ir=m,o.irspeed=f,o.irbegin=P,m?o.buffer=this.adjustLength(u,m,f,P):Nd.generateReverb({audioContext:this,numChannels:2,decayTime:u,fadeInTime:c,lpFreqStart:p,lpFreqEnd:d},y=>{o.buffer=y})},o.generate(e,t,n,r,s,i,a),o});var W1={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class e extends GainNode{constructor(n,r){if(super(n),!W1[r])throw new Error("vowel: unknown vowel "+r);const{gains:s,qs:i,freqs:a}=W1[r],o=n.createGain();for(let u=0;u<5;u++){const c=n.createGain();c.gain.value=s[u];const p=n.createBiquadFilter();p.type="bandpass",p.Q.value=i[u],p.frequency.value=a[u],this.connect(p),p.connect(c),c.connect(o)}return o.gain.value=8,this.connect=u=>o.connect(u),this}}AudioContext.prototype.createVowelFilter=function(t){return new e(this,t)}}const $C="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIGd0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMoZSwxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGUsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKXtsZXQgcj10W3NdLmxlbmd0aDtyIT10aGlzLmlucHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKHMscil9Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspe2xldCByPWVbc10ubGVuZ3RoO3IhPXRoaXMub3V0cHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhzLHIpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxlKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkoZSk7Zm9yKGxldCBzPTA7czxlO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KGUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtzXT10aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQsZSl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bc109bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dFtlXVtzXTt0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5zZXQocix0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dGhpcy5vdXRwdXRCdWZmZXJzW2VdW3NdLnN1YmFycmF5KDAsMTI4KTt0W2VdW3NdLnNldChyKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IGU9MDtlPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW2VdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspZm9yKGxldCBzPTA7czx0aGlzLmJsb2NrU2l6ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdW3NdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW2VdW3NdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQsZSxzKXtjb25zdCBvPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIW8/ITE6KHRoaXMuc3RhcnRlZD1vLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLHMpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhlKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQsZSxzKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBJdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLnNpemUqMikscz0wO3M8ZS5sZW5ndGg7cys9Mil7Y29uc3QgYT1NYXRoLlBJKnMvdGhpcy5zaXplO2Vbc109TWF0aC5jb3MoYSksZVtzKzFdPS1NYXRoLnNpbihhKX10aGlzLnRhYmxlPWU7Zm9yKHZhciByPTAsbz0xO3RoaXMuc2l6ZT5vO288PD0xKXIrKzt0aGlzLl93aWR0aD1yJTI9PT0wP3ItMTpyLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgaT0wO2k8dGhpcy5fYml0cmV2Lmxlbmd0aDtpKyspe3RoaXMuX2JpdHJldltpXT0wO2Zvcih2YXIgdT0wO3U8dGhpcy5fd2lkdGg7dSs9Mil7dmFyIGM9dGhpcy5fd2lkdGgtdS0yO3RoaXMuX2JpdHJldltpXXw9KGk+Pj51JjMpPDxjfX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxyPTA7cjx0Lmxlbmd0aDtyKz0yKXNbcj4+PjFdPXRbcl07cmV0dXJuIHN9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLHI9MDtyPHMubGVuZ3RoO3IrPTIpc1tyXT10W3I+Pj4xXSxzW3IrMV09MDtyZXR1cm4gc31jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgZT10aGlzLl9jc2l6ZSxzPWU+Pj4xLHI9MjtyPHM7cis9Mil0W2Utcl09dFtyXSx0W2UtcisxXT0tdFtyKzFdfXRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxlKXtpZih0PT09ZSl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9ZSx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLG89ZS9yPDwxLGksdSxjPXRoaXMuX2JpdHJldjtpZihvPT09NClmb3IoaT0wLHU9MDtpPGU7aSs9byx1Kyspe2NvbnN0IGQ9Y1t1XTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKGksZCxyKX1lbHNlIGZvcihpPTAsdT0wO2k8ZTtpKz1vLHUrKyl7Y29uc3QgZD1jW3VdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQoaSxkLHIpfXZhciBhPXRoaXMuX2ludj8tMToxLGg9dGhpcy50YWJsZTtmb3Iocj4+PTI7cj49MjtyPj49Mil7bz1lL3I8PDE7dmFyIG09bz4+PjI7Zm9yKGk9MDtpPGU7aSs9bylmb3IodmFyIHA9aSttLGw9aSxmPTA7bDxwO2wrPTIsZis9cil7Y29uc3QgZD1sLHY9ZCttLGc9dittLEk9ZyttLGI9dFtkXSxCPXRbZCsxXSxfPXRbdl0sdz10W3YrMV0sVD10W2ddLFA9dFtnKzFdLHk9dFtJXSxBPXRbSSsxXSx4PWIsVj1CLEY9aFtmXSxNPWEqaFtmKzFdLE89XypGLXcqTSxOPV8qTSt3KkYsWT1oWzIqZl0sTD1hKmhbMipmKzFdLEg9VCpZLVAqTCxVPVQqTCtQKlksSz1oWzMqZl0sWj1hKmhbMypmKzFdLCQ9eSpLLUEqWixHPXkqWitBKkssaj14K0gsaz1WK1Usej14LUgsSj1WLVUsUT1PKyQsRT1OK0csUj1hKihPLSQpLFg9YSooTi1HKSxzdD1qK1EsaXQ9aytFLG90PWotUSxhdD1rLUUsdXQ9eitYLGh0PUotUixjdD16LVgsbHQ9SitSO3RbZF09c3QsdFtkKzFdPWl0LHRbdl09dXQsdFt2KzFdPWh0LHRbZ109b3QsdFtnKzFdPWF0LHRbSV09Y3QsdFtJKzFdPWx0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPW9bZV0sdT1vW2UrMV0sYz1vW2Urc10sYT1vW2UrcysxXSxoPWkrYyxtPXUrYSxwPWktYyxsPXUtYTtyW3RdPWgsclt0KzFdPW0sclt0KzJdPXAsclt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPXRoaXMuX2ludj8tMToxLHU9cyoyLGM9cyozLGE9b1tlXSxoPW9bZSsxXSxtPW9bZStzXSxwPW9bZStzKzFdLGw9b1tlK3VdLGY9b1tlK3UrMV0sZD1vW2UrY10sdj1vW2UrYysxXSxnPWErbCxJPWgrZixiPWEtbCxCPWgtZixfPW0rZCx3PXArdixUPWkqKG0tZCksUD1pKihwLXYpLHk9ZytfLEE9SSt3LHg9YitQLFY9Qi1ULEY9Zy1fLE09SS13LE89Yi1QLE49QitUO3JbdF09eSxyW3QrMV09QSxyW3QrMl09eCxyW3QrM109VixyW3QrNF09RixyW3QrNV09TSxyW3QrNl09TyxyW3QrN109Tn1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQsZT10aGlzLl9jc2l6ZSxzPXRoaXMuX3dpZHRoLHI9MTw8cyxvPWUvcjw8MSxpLHUsYz10aGlzLl9iaXRyZXY7aWYobz09PTQpZm9yKGk9MCx1PTA7aTxlO2krPW8sdSsrKXtjb25zdCBmdD1jW3VdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKGksZnQ+Pj4xLHI+Pj4xKX1lbHNlIGZvcihpPTAsdT0wO2k8ZTtpKz1vLHUrKyl7Y29uc3QgZnQ9Y1t1XTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChpLGZ0Pj4+MSxyPj4+MSl9dmFyIGE9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtvPWUvcjw8MTt2YXIgbT1vPj4+MSxwPW0+Pj4xLGw9cD4+PjE7Zm9yKGk9MDtpPGU7aSs9bylmb3IodmFyIGY9MCxkPTA7Zjw9bDtmKz0yLGQrPXIpe3ZhciB2PWkrZixnPXYrcCxJPWcrcCxiPUkrcCxCPXRbdl0sXz10W3YrMV0sdz10W2ddLFQ9dFtnKzFdLFA9dFtJXSx5PXRbSSsxXSxBPXRbYl0seD10W2IrMV0sVj1CLEY9XyxNPWhbZF0sTz1hKmhbZCsxXSxOPXcqTS1UKk8sWT13Kk8rVCpNLEw9aFsyKmRdLEg9YSpoWzIqZCsxXSxVPVAqTC15KkgsSz1QKkgreSpMLFo9aFszKmRdLCQ9YSpoWzMqZCsxXSxHPUEqWi14KiQsaj1BKiQreCpaLGs9VitVLHo9RitLLEo9Vi1VLFE9Ri1LLEU9TitHLFI9WStqLFg9YSooTi1HKSxzdD1hKihZLWopLGl0PWsrRSxvdD16K1IsYXQ9SitzdCx1dD1RLVg7aWYodFt2XT1pdCx0W3YrMV09b3QsdFtnXT1hdCx0W2crMV09dXQsZj09PTApe3ZhciBodD1rLUUsY3Q9ei1SO3RbSV09aHQsdFtJKzFdPWN0O2NvbnRpbnVlfWlmKGYhPT1sKXt2YXIgbHQ9SixFdD0tUSxSdD1rLER0PS16LHF0PS1hKnN0LFd0PS1hKlgsWXQ9LWEqUixMdD0tYSpFLEh0PWx0K3F0LFV0PUV0K1d0LEt0PVJ0K0x0LFp0PUR0LVl0LG10PWkrcC1mLHZ0PWkrbS1mO3RbbXRdPUh0LHRbbXQrMV09VXQsdFt2dF09S3QsdFt2dCsxXT1adH19fX1fc2luZ2xlUmVhbFRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPW9bZV0sdT1vW2Urc10sYz1pK3UsYT1pLXU7clt0XT1jLHJbdCsxXT0wLHJbdCsyXT1hLHJbdCszXT0wfV9zaW5nbGVSZWFsVHJhbnNmb3JtNCh0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsbz10aGlzLl9kYXRhLGk9dGhpcy5faW52Py0xOjEsdT1zKjIsYz1zKjMsYT1vW2VdLGg9b1tlK3NdLG09b1tlK3VdLHA9b1tlK2NdLGw9YSttLGY9YS1tLGQ9aCtwLHY9aSooaC1wKSxnPWwrZCxJPWYsYj0tdixCPWwtZCxfPWYsdz12O3JbdF09ZyxyW3QrMV09MCxyW3QrMl09SSxyW3QrM109YixyW3QrNF09QixyW3QrNV09MCxyW3QrNl09XyxyW3QrN109d319Y29uc3QgQz0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLHB0PShuLHQpPT4obiV0K3QpJXQ7ZnVuY3Rpb24gYnQobix0PTEpe3JldHVybiBuPj10P24tPXQ6bjwwJiYobis9dCksbn1jb25zdCBEPTEyODtmdW5jdGlvbiBCdChuLHQpe3JldHVybiB0PU1hdGgubWluKHQsMS10KSxuPHQ/KG4vPXQsbituLW4qbi0xKTpuPjEtdD8obj0obi0xKS90LG4qbituK24rMSk6MH1jb25zdCBydD17dHJpKG4sdD0uNSl7Y29uc3QgZT0xLXQ7cmV0dXJuIG4+PXQ/MS9lLW4vZTpuL3R9LHNpbmUobil7cmV0dXJuIE1hdGguc2luKE1hdGguUEkqMipuKSouNSsuNX0scmFtcChuKXtyZXR1cm4gbn0sc2F3KG4pe3JldHVybiAxLW59LHNxdWFyZShuLHQ9LjUpe3JldHVybiBuPj10PzA6MX0sY3VzdG9tKG4sdD1bMCwxXSl7Y29uc3QgZT10Lmxlbmd0aC0xLHM9TWF0aC5mbG9vcihuKmUpLHI9MS9lLG89Qyh0W3NdLDAsMSksdT1DKHRbcysxXSwwLDEpLGM9byxhPTAsaD1yO3JldHVybih1LWMpLyhoLWEpKihuLXIqcykrb30sc2F3YmxlcChuLHQpe3JldHVybiAyKm4tMS1CdChuLHQpfX07ZnVuY3Rpb24gcShuLHQpe3JldHVybiB0Lmxlbmd0aD4xP3Rbbl06dFswXX1jb25zdCBfdD1PYmplY3Qua2V5cyhydCk7Y2xhc3Mgd3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToidGltZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJza2V3IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJkZXB0aCIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJwaGFzZW9mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJjdXJ2ZSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkY29mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToibWF4IixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlfWluY3JlbWVudFBoYXNlKHQpe3RoaXMucGhhc2UrPXQsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZT10aGlzLnBoYXNlLTEpfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9cy5iZWdpblswXTtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXIpcmV0dXJuITA7Y29uc3Qgbz1lWzBdLGk9cy5mcmVxdWVuY3lbMF0sdT1zLnRpbWVbMF0sYz1zLmRlcHRoWzBdLGE9cy5za2V3WzBdLGg9cy5waGFzZW9mZnNldFswXSxtPXMuY3VydmVbMF0scD1zLmRjb2Zmc2V0WzBdLGw9cy5taW5bMF0sZj1zLm1heFswXSxkPV90W3Muc2hhcGVbMF1dLHY9b1swXS5sZW5ndGg/PzA7dGhpcy5waGFzZT09bnVsbCYmKHRoaXMucGhhc2U9cHQodSppK2gsMSkpO2NvbnN0IGc9aS9zYW1wbGVSYXRlO2ZvcihsZXQgST0wO0k8djtJKyspe2ZvcihsZXQgYj0wO2I8by5sZW5ndGg7YisrKXtsZXQgQj0ocnRbZF0odGhpcy5waGFzZSxhKStwKSpjO0I9TWF0aC5wb3coQixtKSxvW2JdW0ldPUMoQixsLGYpfXRoaXMuaW5jcmVtZW50UGhhc2UoZyl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsZm8tcHJvY2Vzc29yIix3dCk7Y2xhc3MgU3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY29hcnNlIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLG89ZVswXSxpPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhaSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9aTtsZXQgdT1zLmNvYXJzZVswXT8/MDt1PU1hdGgubWF4KDEsdSk7Zm9yKGxldCBjPTA7YzxEO2MrKylmb3IobGV0IGE9MDthPHIubGVuZ3RoO2ErKylvW2FdW2NdPWMldT09PTA/clthXVtjXTpvW2FdW2MtMV07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjb2Fyc2UtcHJvY2Vzc29yIixTdCk7Y2xhc3MgVHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY3J1c2giLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0sbz1lWzBdLGk9clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFpKXJldHVybiExO3RoaXMuc3RhcnRlZD1pO2xldCB1PXMuY3J1c2hbMF0/Pzg7dT1NYXRoLm1heCgxLHUpO2ZvcihsZXQgYz0wO2M8RDtjKyspZm9yKGxldCBhPTA7YTxyLmxlbmd0aDthKyspe2NvbnN0IGg9TWF0aC5wb3coMix1LTEpO29bYV1bY109TWF0aC5yb3VuZChyW2FdW2NdKmgpL2h9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjcnVzaC1wcm9jZXNzb3IiLFR0KTtjbGFzcyBQdCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxvPWVbMF0saT1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWkpcmV0dXJuITE7dGhpcy5zdGFydGVkPWk7bGV0IHU9cy5zaGFwZVswXTt1PXU8MT91OjEtNGUtMTAsdT0yKnUvKDEtdSk7Y29uc3QgYz1NYXRoLm1heCguMDAxLE1hdGgubWluKDEscy5wb3N0Z2FpblswXSkpO2ZvcihsZXQgYT0wO2E8RDthKyspZm9yKGxldCBoPTA7aDxyLmxlbmd0aDtoKyspb1toXVthXT0oMSt1KSpyW2hdW2FdLygxK3UqTWF0aC5hYnMocltoXVthXSkpKmM7cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzaGFwZS1wcm9jZXNzb3IiLFB0KTtmdW5jdGlvbiBTKG4pe2NvbnN0IHQ9bipuO3JldHVybiBuKigyNyt0KS8oMjcrOSp0KX1jb25zdCBkdD0zLjE0MTU5MjY1MzU5O2NsYXNzIHl0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjUwMH0se25hbWU6InEiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZHJpdmUiLGRlZmF1bHRWYWx1ZTouNjl9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMucDA9WzAsMF0sdGhpcy5wMT1bMCwwXSx0aGlzLnAyPVswLDBdLHRoaXMucDM9WzAsMF0sdGhpcy5wMzI9WzAsMF0sdGhpcy5wMzM9WzAsMF0sdGhpcy5wMzQ9WzAsMF19cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLG89ZVswXSxpPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhaSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9aTtjb25zdCB1PXMucVswXSxjPUMoTWF0aC5leHAocy5kcml2ZVswXSksLjEsMmUzKTtsZXQgYT1zLmZyZXF1ZW5jeVswXTthPWEqMipkdC9zYW1wbGVSYXRlLGE9YT4xPzE6YTtjb25zdCBoPU1hdGgubWluKDgsdSouMTMpO2xldCBtPTEvYypNYXRoLm1pbigxLjc1LDEraCk7Zm9yKGxldCBwPTA7cDxEO3ArKylmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKyl7Y29uc3QgZj10aGlzLnAzW2xdKi4zNjA4OTErdGhpcy5wMzJbbF0qLjQxNzI5K3RoaXMucDMzW2xdKi4xNzc4OTYrdGhpcy5wMzRbbF0qLjA0Mzk3MjU7dGhpcy5wMzRbbF09dGhpcy5wMzNbbF0sdGhpcy5wMzNbbF09dGhpcy5wMzJbbF0sdGhpcy5wMzJbbF09dGhpcy5wM1tsXSx0aGlzLnAwW2xdKz0oUyhyW2xdW3BdKmMtaCpmKS1TKHRoaXMucDBbbF0pKSphLHRoaXMucDFbbF0rPShTKHRoaXMucDBbbF0pLVModGhpcy5wMVtsXSkpKmEsdGhpcy5wMltsXSs9KFModGhpcy5wMVtsXSktUyh0aGlzLnAyW2xdKSkqYSx0aGlzLnAzW2xdKz0oUyh0aGlzLnAyW2xdKS1TKHRoaXMucDNbbF0pKSphLG9bbF1bcF09ZiptfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGFkZGVyLXByb2Nlc3NvciIseXQpO2NsYXNzIEF0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImRpc3RvcnQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0sbz1lWzBdLGk9clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFpKXJldHVybiExO3RoaXMuc3RhcnRlZD1pO2NvbnN0IHU9TWF0aC5leHBtMShzLmRpc3RvcnRbMF0pLGM9TWF0aC5tYXgoLjAwMSxNYXRoLm1pbigxLHMucG9zdGdhaW5bMF0pKTtmb3IobGV0IGE9MDthPEQ7YSsrKWZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKW9baF1bYV09KDErdSkqcltoXVthXS8oMSt1Kk1hdGguYWJzKHJbaF1bYV0pKSpjO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGlzdG9ydC1wcm9jZXNzb3IiLEF0KTtmdW5jdGlvbiB4dChuLHQsZSl7cmV0dXJuIGUqKHQtbikrbn1mdW5jdGlvbiBWdChuLHQsZSl7cmV0dXJuIG48Mj8wOnh0KC10Ki41LHQqLjUsZS8obi0xKSl9ZnVuY3Rpb24gdHQobix0KXtyZXR1cm4gbipNYXRoLnBvdygyLHQvMTIpfWNsYXNzIEZ0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlPVtdfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjF9XX1wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdLG89cy52b2ljZXNbMF0saT1zLmZyZXFzcHJlYWRbMF0sdT1zLnBhbnNwcmVhZFswXSouNSsuNSxjPU1hdGguc3FydCgxLXUpLGE9TWF0aC5zcXJ0KHUpO2ZvcihsZXQgaD0wO2g8bztoKyspe2NvbnN0IG09KGgmMSk9PTE7bGV0IHA9YyxsPWE7bSYmKHA9YSxsPWMpO2ZvcihsZXQgZj0wO2Y8clswXS5sZW5ndGg7ZisrKXtsZXQgZD10dChzLmZyZXF1ZW5jeVtmXT8/cy5mcmVxdWVuY3lbMF0scy5kZXR1bmVbMF0vMTAwKTtkPXR0KGQsVnQobyxpLGgpKTtjb25zdCB2PXB0KGQvc2FtcGxlUmF0ZSwxKTt0aGlzLnBoYXNlW2hdPXRoaXMucGhhc2VbaF0/P01hdGgucmFuZG9tKCk7Y29uc3QgZz1ydC5zYXdibGVwKHRoaXMucGhhc2VbaF0sdik7clswXVtmXT1yWzBdW2ZdK2cqcCxyWzFdW2ZdPXJbMV1bZl0rZypsLHRoaXMucGhhc2VbaF09YnQodGhpcy5waGFzZVtoXSt2KX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzdXBlcnNhdy1vc2NpbGxhdG9yIixGdCk7Y29uc3QgTXQ9MjA0ODtmdW5jdGlvbiBPdChuKXtsZXQgdD1uZXcgRmxvYXQzMkFycmF5KG4pO2Zvcih2YXIgZT0wO2U8bjtlKyspdFtlXT0uNSooMS1NYXRoLmNvcygyKk1hdGguUEkqZS9uKSk7cmV0dXJuIHR9Y2xhc3MgTnQgZXh0ZW5kcyBndHtzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJwaXRjaEZhY3RvciIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcih0KXt0LnByb2Nlc3Nvck9wdGlvbnM9e2Jsb2NrU2l6ZTpNdH0sc3VwZXIodCksdGhpcy5mZnRTaXplPXRoaXMuYmxvY2tTaXplLHRoaXMudGltZUN1cnNvcj0wLHRoaXMuaGFubldpbmRvdz1PdCh0aGlzLmJsb2NrU2l6ZSksdGhpcy5mZnQ9bmV3IEl0KHRoaXMuZmZ0U2l6ZSksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZD10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLnRpbWVDb21wbGV4QnVmZmVyPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMubWFnbml0dWRlcz1uZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZS8yKzEpLHRoaXMucGVha0luZGV4ZXM9bmV3IEludDMyQXJyYXkodGhpcy5tYWduaXR1ZGVzLmxlbmd0aCksdGhpcy5uYlBlYWtzPTB9cHJvY2Vzc09MQSh0LGUscyl7bGV0IHI9cy5waXRjaEZhY3RvcltzLnBpdGNoRmFjdG9yLmxlbmd0aC0xXTtyPDAmJihyPXIqLjI1KSxyPU1hdGgubWF4KDAscisxKTtmb3IodmFyIG89MDtvPHRoaXMubmJJbnB1dHM7bysrKWZvcih2YXIgaT0wO2k8dFtvXS5sZW5ndGg7aSsrKXt2YXIgdT10W29dW2ldLGM9ZVtvXVtpXTt0aGlzLmFwcGx5SGFubldpbmRvdyh1KSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsdSksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKHIpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLGMpLHRoaXMuYXBwbHlIYW5uV2luZG93KGMpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IodmFyIGU9MDtlPHRoaXMuYmxvY2tTaXplO2UrKyl0W2VdPXRbZV0qdGhpcy5oYW5uV2luZG93W2VdKjEuNjJ9Y29tcHV0ZU1hZ25pdHVkZXMoKXtmb3IodmFyIHQ9MCxlPTA7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7bGV0IHM9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlXSxyPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbZSsxXTt0aGlzLm1hZ25pdHVkZXNbdF09cyoqMityKioyLHQrPTEsZSs9Mn19ZmluZFBlYWtzKCl7dGhpcy5uYlBlYWtzPTA7dmFyIHQ9MjtsZXQgZT10aGlzLm1hZ25pdHVkZXMubGVuZ3RoLTI7Zm9yKDt0PGU7KXtsZXQgcz10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1zKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1zKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2Zvcih2YXIgZT0wO2U8dGhpcy5uYlBlYWtzO2UrKyl7bGV0IGk9dGhpcy5wZWFrSW5kZXhlc1tlXSx1PU1hdGgucm91bmQoaSp0KTtpZih1PnRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7dmFyIHM9MCxyPXRoaXMuZmZ0U2l6ZTtpZihlPjApe2xldCBoPXRoaXMucGVha0luZGV4ZXNbZS0xXTtzPWktTWF0aC5mbG9vcigoaS1oKS8yKX1pZihlPHRoaXMubmJQZWFrcy0xKXtsZXQgaD10aGlzLnBlYWtJbmRleGVzW2UrMV07cj1pK01hdGguY2VpbCgoaC1pKS8yKX1sZXQgYz1zLWksYT1yLWk7Zm9yKHZhciBvPWM7bzxhO28rKyl7bGV0IGg9aStvLG09dStvO2lmKG0+PXRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7bGV0IHA9MipNYXRoLlBJKihtLWgpL3RoaXMuZmZ0U2l6ZSxsPU1hdGguY29zKHAqdGhpcy50aW1lQ3Vyc29yKSxmPU1hdGguc2luKHAqdGhpcy50aW1lQ3Vyc29yKSxkPWgqMix2PWQrMSxnPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbZF0sST10aGlzLmZyZXFDb21wbGV4QnVmZmVyW3ZdLGI9ZypsLUkqZixCPWcqZitJKmwsXz1tKjIsdz1fKzE7dGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWRbX10rPWIsdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWRbd10rPUJ9fX19cmVnaXN0ZXJQcm9jZXNzb3IoInBoYXNlLXZvY29kZXItcHJvY2Vzc29yIixOdCk7Y2xhc3MgQ3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGk9ZHQsdGhpcy5waGk9LXRoaXMucGksdGhpcy5ZMD0wLHRoaXMuWTE9MCx0aGlzLlBXPXRoaXMucGksdGhpcy5CPTIuMyx0aGlzLmRwaGlmPTAsdGhpcy5lbnZmPTB9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJwdWxzZXdpZHRoIixkZWZhdWx0VmFsdWU6MSxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2NvbnN0IHI9ZVswXTtsZXQgbz0xLGk7Zm9yKGxldCB1PTA7dTwoclswXS5sZW5ndGg/PzApO3UrKyl7Y29uc3QgYz0oMS1DKHEodSxzLnB1bHNld2lkdGgpLC0uOTksLjk5KSkqdGhpcy5waSxhPXEodSxzLmRldHVuZSksaD10dChxKHUscy5mcmVxdWVuY3kpLGEvMTAwKTtpPWgqKHRoaXMucGkvKHNhbXBsZVJhdGUqLjUpKSx0aGlzLmRwaGlmKz0uMSooaS10aGlzLmRwaGlmKSxvKj0uOTk5OCx0aGlzLmVudmYrPS4xKihvLXRoaXMuZW52ZiksdGhpcy5CPTIuMyooMS0xZS00KmgpLHRoaXMuQjwwJiYodGhpcy5CPTApLHRoaXMucGhpKz10aGlzLmRwaGlmLHRoaXMucGhpPj10aGlzLnBpJiYodGhpcy5waGktPTIqdGhpcy5waSk7bGV0IG09TWF0aC5jb3ModGhpcy5waGkrdGhpcy5CKnRoaXMuWTApO3RoaXMuWTA9LjUqKG0rdGhpcy5ZMCk7bGV0IHA9TWF0aC5jb3ModGhpcy5waGkrdGhpcy5CKnRoaXMuWTErYyk7dGhpcy5ZMT0uNSoocCt0aGlzLlkxKTtmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKylyW2xdW3VdPS4xNSoobS1wKSp0aGlzLmVudmZ9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJwdWxzZS1vc2NpbGxhdG9yIixDdCk7Y29uc3QgbnQ9e2JpdEM6ZnVuY3Rpb24obix0LGUpe3JldHVybiBuJnQ/ZTowfSxicjpmdW5jdGlvbihuLHQ9OCl7aWYodD4zMil0aHJvdyBuZXcgRXJyb3IoImJyKCkgU2l6ZSBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIDMyIik7e2xldCBlPTA7Zm9yKGxldCBzPTA7czx0LTA7cysrKWUrPW50LmJpdEMobiwyKipzLDIqKih0LShzKzEpKSk7cmV0dXJuIGV9fSxzaW5mOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLnNpbihuLygxMjgvTWF0aC5QSSkpfSxjb3NmOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLmNvcyhuLygxMjgvTWF0aC5QSSkpfSx0YW5mOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLnRhbihuLygxMjgvTWF0aC5QSSkpfSxyZWdHOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQudGVzdChuLnRvU3RyaW5nKDIpKX19O2xldCBXLGV0O2Z1bmN0aW9uIGt0KG4pe2lmKChXfHxldCk9PW51bGwpe1c9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTWF0aCksZXQ9Vy5tYXAocz0+TWF0aFtzXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhudCksZT10Lm1hcChzPT5udFtzXSk7Vy5wdXNoKCJpbnQiLCJ3aW5kb3ciLC4uLnQpLGV0LnB1c2goTWF0aC5mbG9vcixnbG9iYWxUaGlzLC4uLmUpfXJldHVybiBuZXcgRnVuY3Rpb24oLi4uVywidCIsYHJldHVybiAwLAoke258fDB9O2ApLmJpbmQoZ2xvYmFsVGhpcywuLi5ldCl9Y2xhc3MgenQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dD0+e2xldHtjb2RlVGV4dDplfT10LmRhdGE7Y29uc3R7Ynl0ZUJlYXRTdGFydFRpbWU6c309dC5kYXRhO3MhPW51bGwmJih0aGlzLnQ9MCx0aGlzLmluaXRpYWxPZmZzZXQ9TWF0aC5mbG9vcihzKSksZT1lLnRyaW0oKS5yZXBsYWNlKC9eZXZhbFwodW5lc2NhcGVcKGVzY2FwZSg/OmB8XCgnfFwoInxcKGApKC4qPykoPzpgfCdcKXwiXCl8YFwpKS5yZXBsYWNlXChcL3VcKFwuXC5cKVwvZyxbIidgXVwkMSVbIidgXVwpXClcKSQvLChyLG8pPT51bmVzY2FwZShlc2NhcGUobykucmVwbGFjZSgvdSguLikvZywiJDElIikpKSx0aGlzLmZ1bmM9a3QoZSl9LHRoaXMuaW5pdGlhbE9mZnNldD1udWxsLHRoaXMudD1udWxsLHRoaXMuZnVuYz1udWxsfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjAsbWluOk51bWJlci5ORUdBVElWRV9JTkZJTklUWSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO3RoaXMudD09bnVsbCYmKHRoaXMudD1zLmJlZ2luWzBdKnNhbXBsZVJhdGUpO2NvbnN0IHI9ZVswXTtmb3IobGV0IG89MDtvPHJbMF0ubGVuZ3RoO28rKyl7Y29uc3QgaT1xKG8scy5kZXR1bmUpLHU9dHQocShvLHMuZnJlcXVlbmN5KSxpLzEwMCk7bGV0IGM9dGhpcy50LyhzYW1wbGVSYXRlLzI1NikqdSt0aGlzLmluaXRpYWxPZmZzZXQ7Y29uc3QgbT0oKHRoaXMuZnVuYyhjKSYyNTUpLzEyNy41LTEpKi4yO2ZvcihsZXQgcD0wO3A8ci5sZW5ndGg7cCsrKXJbcF1bb109QyhtLC0uNCwuNCk7dGhpcy50PXRoaXMudCsxfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiYnl0ZS1iZWF0LXByb2Nlc3NvciIsenQpfSkoKTsK";let io={};function YM(e,t){const n=De();if(io[e])return io[e];const r=2*n.sampleRate,s=n.createBuffer(1,r,n.sampleRate),i=s.getChannelData(0);let a=0,o,u,c,p,d,m,f;o=u=c=p=d=m=f=0;for(let P=0;P<r;P++)if(e==="white")i[P]=Math.random()*2-1;else if(e==="brown"){let y=Math.random()*2-1;i[P]=(a+.02*y)/1.02,a=i[P]}else if(e==="pink"){let y=Math.random()*2-1;o=.99886*o+y*.0555179,u=.99332*u+y*.0750759,c=.969*c+y*.153852,p=.8665*p+y*.3104856,d=.55*d+y*.5329522,m=-.7616*m-y*.016898,i[P]=o+u+c+p+d+m+f+y*.5362,i[P]*=.11,f=y*.115926}else if(e==="crackle"){const y=t*.01;Math.random()<y?i[P]=Math.random()*2-1:i[P]=0}return e!=="crackle"&&(io[e]=s),s}function To(e="white",t,n=.02){const r=De().createBufferSource();return r.buffer=YM(e,n),r.loop=!0,r.start(t),{node:r,stop:s=>r.stop(s)}}function eA(e,t,n){const r=To("pink",n);return{node:Kd(e,r.node,t),stop:s=>r==null?void 0:r.stop(s)}}const Ma=["pink","white","brown","crackle"];function Zt(e){const t=De().createGain();return t.gain.value=e,t}const L1=(e,t,n,r)=>r-n===0?0:(t-e)/(r-n);function en(e,t,n,r){const s=new AudioWorkletNode(e,t,r);return Object.entries(n).forEach(([i,a])=>{s.parameters.get(i).value=a}),s}const mn=(e,t,n,r,s,i,a,o,u,c="exponential")=>{t=On(t),n=On(n),r=On(r),s=On(s);const p=c==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";c==="exponential"&&(i=i===0?.001:i,a=a===0?.001:a);const d=a-i,m=a,f=i+r*d,P=u-o,y=A=>{let F;if(t>A){let Z=L1(i,m,0,t);F=A*Z+(i>m?i:0)}else F=(A-t)*L1(m,f,0,n)+m;return c==="exponential"&&(F=F||.001),F};e.setValueAtTime(i,o),t>P?e[p](y(P),u):t+n>P?(e[p](y(t),o+t),e[p](y(P),u)):(e[p](y(t),o+t),e[p](y(t+n),o+t+n),e.setValueAtTime(f,u)),e[p](i,u+s)};function Hd(e,t,n,r,s,i){const a={threshold:t??-3,ratio:n??10,knee:r??10,attack:s??.005,release:i??.05};return new DynamicsCompressorNode(e,a)}const fn=(e,t="linear",n)=>{const[r,s,i,a]=e;if(r==null&&s==null&&i==null&&a==null)return n??[.001,.001,1,.01];const o=i??(r!=null&&s==null||r==null&&s==null?1:.001);return[Math.max(r??0,.001),Math.max(s??0,.001),Math.min(o,1),Math.max(a??0,.01)]};function Vs(e,t,n,r,s,i,a,o,u,c,p,d,m,f){const P="exponential",[y,A,F,Z]=fn([s,i,a,o],P,[.005,.14,0,.1]);let X,w;if(m==="ladder"?(X=en(e,"ladder-processor",{frequency:n,q:r,drive:f}),w=X.parameters.get("frequency")):(X=e.createBiquadFilter(),X.type=t,X.Q.value=r,X.frequency.value=n,w=X.frequency),(s??i??a??o??u)!==void 0){u=On(u,1,!0),d=On(d,0,!0);const D=Math.abs(u),k=D*d;let V=Br(2**-k*n,0,2e4),T=Br(2**(D-k)*n,0,2e4);return u<0&&([V,T]=[T,V]),mn(w,y,A,F,Z,V,T,c,p,P),X}return X}let R1=e=>e<.5?1:1-(e-.5)/.5;function Kd(e,t,n=0){const r=De();if(!n)return e;let s=r.createGain(),i=r.createGain();e.connect(s),t.connect(i),s.gain.value=R1(n),i.gain.value=R1(1-n);let a=r.createGain();return s.connect(a),i.connect(a),a}let tA=["linear","exponential"];function ns(e,t,n,r){if(!(t.pattack??t.pdecay??t.psustain??t.prelease??t.penv))return;const s=On(t.penv,1,!0),i=tA[t.pcurve??0];let[a,o,u,c]=fn([t.pattack,t.pdecay,t.psustain,t.prelease],i,[.2,.001,1,.001]),p=t.panchor??u;const d=s*100,m=0-d*p,f=d-d*p;mn(e,a,o,u,c,m,f,n,r,i)}function rs(e,t,n){const{vibmod:r=.5,vib:s}=t;let i;if(s>0){i=De().createOscillator(),i.frequency.value=s;const a=De().createGain();return a.gain.value=r*100,i.connect(a),a.connect(e),i.start(n),i}}function qr(e,t,n,r){const s=new ConstantSourceNode(e),i=Zt(0);return i.connect(e.destination),s.connect(i),s.onended=()=>{try{i.disconnect()}catch{}try{s.disconnect()}catch{}t()},s.start(n),s.stop(r),s}const nA=(e,t=1,n="sine")=>{const r=De();let s;Ma.includes(n)?(s=r.createBufferSource(),s.buffer=YM(n,2),s.loop=!0):(s=r.createOscillator(),s.type=n,s.frequency.value=e),s.start();const i=new GainNode(r,{gain:t});return s.connect(i),{node:i,stop:a=>s.stop(a)}},rA=(e,t,n,r="sine")=>{const s=e.value*t,i=s*n;return nA(s,i,r)};function Ys(e,t,n){const{fmh:r=1,fmi:s,fmenv:i="exp",fmattack:a,fmdecay:o,fmsustain:u,fmrelease:c,fmvelocity:p,fmwave:d="sine",duration:m}=t;let f,P=()=>{};if(s){const y=De().createGain(),A=rA(e,r,s,d);if(f=A.node,P=A.stop,![a,o,u,c,p].some(F=>F!==void 0))f.connect(e);else{const[F,Z,X,w]=fn([a,o,u,c]),D=n+m;mn(y.gain,F,Z,X,w,0,1,n,D,i==="exp"?"exponential":"linear"),f.connect(y),y.connect(e)}}return{stop:P}}let pn=[],ar=0;const bi=4;let sA=e=>{let t=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(r){return n.lc=t.push(r),()=>{for(let i=ar+bi;i<pn.length;)pn[i]===r?pn.splice(i,bi):i+=bi;let s=t.indexOf(r);~s&&(t.splice(s,1),--n.lc||n.off())}},notify(r,s){let i=!pn.length;for(let a of t)pn.push(a,n.value,r,s);if(i){for(ar=0;ar<pn.length;ar+=bi)pn[ar](pn[ar+1],pn[ar+2],pn[ar+3]);pn.length=0}},off(){},set(r){let s=n.value;s!==r&&(n.value=r,n.notify(s))},subscribe(r){let s=n.listen(r);return r(n.value),s},value:e};return n},iA=(e={})=>{let t=sA(e);return t.setKey=function(n,r){let s=t.value;typeof r>"u"&&n in t.value?(t.value={...t.value},delete t.value[n],t.notify(s,n)):t.value[n]!==r&&(t.value={...t.value,[n]:r},t.notify(s,n))},t};const Od={},ao={},HM=e=>Od[e];function aA(e,t){var n=1024;if(e<n)return e+" B";var r=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],s=-1;do e/=n,++s;while(e>=n);return e.toFixed(1)+" "+r[s]}function jd(e,t){const{s:n,n:r=0,speed:s=1}=e;let i=qC(e,36),a=i-36,o,u=0;if(Array.isArray(t))u=T1(r,t.length),o=t[u];else{const d=f=>ba(f)-i,m=Object.keys(t).filter(f=>!f.startsWith("_")).reduce((f,P,y)=>!f||Math.abs(d(P))<Math.abs(d(f))?P:f,null);a=-d(m),u=T1(r,t[m].length),o=t[m][u]}const c=`${n}:${u}`;let p=Math.abs(s)*Math.pow(2,a/12);return{transpose:a,sampleUrl:o,index:u,midi:i,label:c,playbackRate:p}}const Jd=async(e,t,n)=>{let{sampleUrl:r,label:s,playbackRate:i}=jd(e,t);n&&(r=await n(r));const a=De(),o=await Pa(r,a,s);return e.unit==="c"&&(i=i*o.duration),{buffer:o,playbackRate:i}},Ud=async(e,t,n)=>{let{buffer:r,playbackRate:s}=await Jd(e,t,n);e.speed<0&&(r=qd(r));const i=De().createBufferSource();i.buffer=r,i.playbackRate.value=s;const{s:a,loopBegin:o=0,loopEnd:u=1,begin:c=0,end:p=1}=e,d=c*i.buffer.duration;(a.startsWith("wt_")||e.loop)&&(i.loop=!0,i.loopStart=o*i.buffer.duration-d,i.loopEnd=u*i.buffer.duration-d);const m=i.buffer.duration/i.playbackRate.value,f=(p-c)*m;return{bufferSource:i,offset:d,bufferDuration:m,sliceDuration:f}},Pa=(e,t,n,r=0)=>{const s=n?`sound "${n}:${r}"`:"sample";if(e=e.replace("#","%23"),!ao[e]){Nt(`[sampler] load ${s}..`,"load-sample",{url:e});const i=Date.now();ao[e]=fetch(e).then(a=>a.arrayBuffer()).then(async a=>{const o=Date.now()-i,u=aA(a.byteLength);Nt(`[sampler] load ${s}... done! loaded ${u} in ${o}ms`,"loaded-sample",{url:e});const c=await t.decodeAudioData(a);return Od[e]=c,c})}return ao[e]};function qd(e){const t=De(),n=t.createBuffer(e.numberOfChannels,e.length,t.sampleRate);for(let r=0;r<e.numberOfChannels;r++)n.copyToChannel(e.getChannelData(r).slice().reverse(),r,r);return n}const KM=e=>Od[e];function OM(e){if(e.startsWith("bubo:")){const[t,n]=e.split(":");e=`github:Bubobubobubobubo/dough-${n}`}return e}function jM(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,r]=e.split("github:");return r=r.endsWith("/")?r.slice(0,-1):r,r.split("/").length===2&&(r+="/main"),`https://raw.githubusercontent.com/${r}/${t}`}const Qd=(e,t,n=e._base||"")=>Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&(s=[s]),typeof s!="object")throw new Error("wrong sample map format for "+r);n=s._base||n,n=OM(n),n.startsWith("github:")&&(n=jM(n,""));const i=a=>n+a;Array.isArray(s)?s=s.map(i):s=Object.fromEntries(Object.entries(s).map(([a,o])=>[a,(typeof o=="string"?[o]:o).map(i)])),t(r,s)});let JM={};function UM(e,t){JM[e]=t}function oA(e){const t=Object.entries(JM).find(([n])=>e.startsWith(n));if(t)return t[1]}const $d=async(e,t=e._base||"",n={})=>{if(typeof e=="string"){const i=oA(e);if(i)return i(e);if(e=OM(e),e.startsWith("github:")&&(e=jM(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[o,u]=e.split("shabda:");e=`https://shabda.ndre.gr/${u}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[o,u]=e.split("shabda/speech");u=u.startsWith("/")?u.substring(1):u;let[c,p]=u.split(":"),d="f",m="en-GB";c&&([m,d]=c.split("/")),e=`https://shabda.ndre.gr/speech/${p}.json?gender=${d}&language=${m}&strudel=1'`}if(typeof fetch!="function")return;const a=e.split("/").slice(0,-1).join("/");return typeof fetch>"u"?void 0:fetch(e).then(o=>o.json()).then(o=>$d(o,t||o._base||a,n)).catch(o=>{throw console.error(o),new Error(`error loading "${e}"`)})}const{prebake:r,tag:s}=n;Qd(e,(i,a)=>En(i,(o,u,c)=>em(o,u,c,a),{type:"sample",samples:a,baseUrl:t,prebake:r,tag:s}),t)},_1=[];async function em(e,t,n,r,s){let{s:i,nudge:a=0,cut:o,loop:u,clip:c=void 0,n:p=0,speed:d=1,duration:m}=t;if(d===0)return;const f=De();let[P,y,A,F]=fn([t.attack,t.decay,t.sustain,t.release]);const{bufferSource:Z,sliceDuration:X,offset:w}=await Ud(t,r,s);if(f.currentTime>e){Nt(`[sampler] still loading sound "${i}:${p}"`,"highlight");return}if(!Z){Nt(`[sampler] could not load "${i}:${p}"`,"error");return}let D=rs(Z.detune,t,e);const k=e+a;Z.start(k,w);const V=f.createGain(),T=Z.connect(V);c==null&&u==null&&t.release==null&&(m=X);let z=e+m;mn(T.gain,P,y,A,F,0,1,e,z,"linear"),ns(Z.detune,t,e,z);const _=f.createGain();T.connect(_),Z.onended=function(){Z.disconnect(),D==null||D.stop(),T.disconnect(),_.disconnect(),n()};let j=z+F+.01;Z.stop(j);const L={node:_,bufferSource:Z,stop:H=>{Z.stop(H)}};if(o!==void 0){const H=_1[o];H&&(H.node.gain.setValueAtTime(1,k),H.node.gain.linearRampToValueAtTime(0,k+.01)),_1[o]=L}return L}const va=128,Wo="System Standard";let qM=va;function tm(e){qM=parseInt(e)??va}let QM=!1;function nm(e){QM=e==!0}function uA(e){return typeof e=="number"?e%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[e]??0}const bn=iA();function En(e,t,n={}){e=e.toLowerCase().replace(/\s+/g,"_"),bn.setKey(e,{onTrigger:t,data:n})}let $M=e=>e;function wn(e){return $M(e)}function e3(e){$M=e}function Lo(e){for(const n in e)e[n.toLowerCase()]=e[n];const t=bn.get();for(const n in t){const[r,s]=n.split("_");if(!s)continue;const i=e[r];if(i){if(typeof i=="string")t[`${i}_${s}`.toLowerCase()]=t[n];else if(Array.isArray(i))for(const a of i)t[`${a}_${s}`.toLowerCase()]=t[n]}}bn.set({...t})}async function cA(e){const t=await(await fetch(e)).json();Lo(t)}async function t3(...e){switch(e.length){case 1:return typeof e[0]=="string"?cA(e[0]):Lo(e[0]);case 2:return Lo({[e[0]]:e[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+e.length)}}function Xs(e){return typeof e!="string"?(console.warn(`getSound: expected string got "${e}". fall back to triangle`),bn.get().triangle):bn.get()[e.toLowerCase()]}const rm=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await navigator.mediaDevices.enumerateDevices();e=e.filter(n=>n.kind==="audiooutput"&&n.deviceId!=="default");const t=new Map;return t.set(Wo,""),e.forEach(n=>{t.set(n.label,n.deviceId)}),t};let si={s:"triangle",gain:.8,postgain:1,density:".03",ftype:"12db",fanchor:0,resonance:1,hresonance:1,bandq:1,channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const lA=Object.freeze({...si});function n3(e,t){si[e]=t}function r3(){si={...lA}}let sm=new Map(Object.entries(si));function Ca(e,t){sm.set(e,t)}function st(e){return sm.get(e)}function s3(e){Object.keys(e).forEach(t=>{Ca(t,e[t])})}function im(){sm=new Map(Object.entries(si))}function i3(e){im(),e==="1.0"&&Ca("fanchor",.5)}const a3=()=>bn.set({});let Ro;const am=()=>(Ro=new AudioContext,Ro),De=()=>Ro||am();function o3(){return De().currentTime}let oo;function pA(){return oo||(oo=De().audioWorklet.addModule($C)),oo}async function om(e={}){const{disableWorklets:t=!1,maxPolyphony:n,audioDeviceName:r=Wo,multiChannelOrbits:s=!1}=e;if(tm(n),nm(s),typeof window>"u")return;const i=De();if(r!=null&&r!=Wo)try{const a=(await rm()).get(r),o=(a??"").length>0;i.sinkId!==a&&o&&await i.setSinkId(a),Nt(`[superdough] Audio Device set to ${r}, it might take a few seconds before audio plays on all output channels`)}catch{Nt("[superdough] failed to set audio interface","warning")}if(await i.resume(),t){Nt("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await pA(),Nt("[superdough] AudioWorklets loaded")}catch(a){console.warn("could not load AudioWorklet effects",a)}Nt("[superdough] ready")}let uo;async function um(e){return uo||(uo=new Promise(t=>{document.addEventListener("click",async function n(){document.removeEventListener("click",n),await om(e),t()})})),uo}let Wi,Qr;function cm(){const e=De(),t=e.destination.maxChannelCount;e.destination.channelCount=t,Wi=new ChannelMergerNode(e,{numberOfInputs:e.destination.channelCount}),Qr=new GainNode(e),Wi.connect(Qr),Qr.connect(e.destination)}const lm=(e,t=[0,1])=>{const n=De();Wi==null&&cm();const r=new StereoPannerNode(n);e.connect(r);const s=new ChannelSplitterNode(n,{numberOfOutputs:r.channelCount});r.connect(s),t.forEach((i,a)=>{s.connect(Wi,a%r.channelCount,i%n.destination.channelCount)})},u3=()=>{Qr!=null&&(Qr.gain.linearRampToValueAtTime(0,De().currentTime+.01),Qr=null)};function hA(e,t,n,r){var s;if(n=Br(n,0,.98),!Le[e].delayNode){const i=De().createFeedbackDelay(1,t,n);(s=i.start)==null||s.call(i,r),Li(i,e),Le[e].delayNode=i}return Le[e].delayNode.delayTime.value!==t&&Le[e].delayNode.delayTime.setValueAtTime(t,r),Le[e].delayNode.feedback.value!==n&&Le[e].delayNode.feedback.setValueAtTime(n,r),Le[e].delayNode}function ii(e,t,n,r={}){const{shape:s=0,...i}=r,{dcoffset:a=-.5,depth:o=1}=r,u={frequency:1,depth:o,skew:.5,phaseoffset:0,time:t,begin:t,end:n,shape:uA(s),dcoffset:a,min:a*o,max:a*o+o,curve:1,...i};return en(e,"lfo-processor",u)}function dA(e,t,n=1,r=.5,s=1e3,i=2e3){const a=De(),o=ii(a,e,t,{frequency:n,depth:i*2}),u=2;let c=0;const p=[];for(let d=0;d<u;d++){const m=a.createBiquadFilter();m.type="notch",m.gain.value=1,m.frequency.value=s+c,m.Q.value=2-Math.min(Math.max(r*2,0),1.9),o.connect(m.detune),c+=282,d>0&&p[d-1].connect(m),p.push(m)}return p[p.length-1]}function mA(e){e=e??0;const t=["12db","ladder","24db"];return typeof e=="number"?t[Math.floor(zM(e,t.length))]:e}let Le={};function Li(e,t){Le[t]==null&&zd(new Error("target orbit does not exist"),"superdough"),e.connect(Le[t].gain)}function fA(e,t,n){Le[t]==null&&(Le[t]={gain:new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"})},lm(Le[t].gain,n))}function gA(e,t,n,r=.1,s=1){[t].flat().forEach(i=>{if(Le[i]==null){zd(new Error(`duck target orbit ${i} does not exist`),"superdough");return}qr(e,()=>{Le[i].gain.gain.cancelScheduledValues(n);const a=Le[i].gain.gain.value;Le[i].gain.gain.linearRampToValueAtTime(Br(1-Math.pow(s,.5),.01,a),n),Le[i].gain.gain.exponentialRampToValueAtTime(1,n+Math.max(.002,r))},0,n-.01)})}let Or=(e,t)=>e!==void 0&&e!==t;function yA(e,t,n,r,s,i,a,o){if(!Le[e].reverbNode){const u=De().createReverb(t,n,r,s,i,a,o);Li(u,e),Le[e].reverbNode=u}return(Or(t,Le[e].reverbNode.duration)||Or(n,Le[e].reverbNode.fade)||Or(r,Le[e].reverbNode.lp)||Or(s,Le[e].reverbNode.dim)||Or(a,Le[e].reverbNode.irspeed)||Or(o,Le[e].reverbNode.irbegin)||Le[e].reverbNode.ir!==i)&&Le[e].reverbNode.generate(t,n,r,s,i,a,o),Le[e].reverbNode}let Ct={},lr={};function pm(e,t=1024,n=.5){if(!Ct[e]){const r=De().createAnalyser();r.fftSize=t,r.smoothingTimeConstant=n,Ct[e]=r,lr[e]=new Float32Array(Ct[e].frequencyBinCount)}return Ct[e].fftSize!==t&&(Ct[e].fftSize=t,lr[e]=new Float32Array(Ct[e].frequencyBinCount)),Ct[e]}function ai(e="time",t=1){const n={time:()=>{var r;return(r=Ct[t])==null?void 0:r.getFloatTimeDomainData(lr[t])},frequency:()=>{var r;return(r=Ct[t])==null?void 0:r.getFloatFrequencyData(lr[t])}}[e];if(!n)throw new Error(`getAnalyzerData: ${e} not supported. use one of ${Object.keys(n).join(", ")}`);return n(),lr[t]}function co(e,t,n){const r=Zt(n);return e.connect(r),r.connect(t),r}function c3(){Le={},Ct={},lr={}}let vs=new Map;function I1(e){return(Array.isArray(e)?e:[e]).map(t=>t-1)}const Aa=async(e,t,n,r=.5,s=.5)=>{var xn,Fn,ht;const i=De();let{stretch:a}=e;if(a!=null&&(t=t-.04),typeof e!="object")throw new Error(`expected hap.value to be an object, but got "${e}". Hint: append .note() or .s() to the end`,"error");if(e.duration=n,t<i.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${t.toFixed(2)}, now: ${i.currentTime.toFixed(2)})`);return}let{tremolo:o,tremolosync:u,tremolodepth:c=1,tremoloskew:p,tremolophase:d=0,tremoloshape:m,s:f=st("s"),bank:P,source:y,gain:A=st("gain"),postgain:F=st("postgain"),density:Z=st("density"),duckorbit:X,duckattack:w,duckdepth:D,fanchor:k=st("fanchor"),drive:V=.69,release:T=0,cutoff:z,lpenv:_,lpattack:j,lpdecay:L,lpsustain:H,lprelease:se,resonance:he=st("resonance"),hpenv:re,hcutoff:ie,hpattack:te,hpdecay:ee,hpsustain:ye,hprelease:Ye,hresonance:Y=st("hresonance"),bpenv:ke,bandf:_e,bpattack:ft,bpdecay:Se,bpsustain:He,bprelease:ce,bandq:Ae=st("bandq"),phaserrate:nt,phaserdepth:$e=st("phaserdepth"),phasersweep:Me,phasercenter:Kt,coarse:Te,crush:Ft,dry:et,shape:rt,shapevol:pt=st("shapevol"),distort:_t,distortvol:gt=st("distortvol"),pan:wt,vowel:Et,delay:Ke=st("delay"),delayfeedback:vt=st("delayfeedback"),delaysync:ve=st("delaysync"),delaytime:Be,orbit:Q=st("orbit"),room:Ie,roomfade:Ve,roomlp:rr,roomdim:br,roomsize:St,ir:Ot,irspeed:jt,irbegin:je,i:An=st("i"),velocity:on=st("velocity"),analyze:Ne,fft:ot=st("fft"),compressor:It,compressorRatio:Dn,compressorKnee:sr,compressorAttack:Mr,compressorRelease:Pr}=e;Be=Be??QC(ve,r);const l=I1(QM&&Q>0?[Q*2-1,Q*2]:st("channels")),b=e.channels!=null?I1(e.channels):l;fA(i,Q,b),X!=null&&gA(i,X,t,w,D),A=wn(On(A,1)),F=wn(F),pt=wn(pt),gt=wn(gt),Ke=wn(Ke),on=wn(on),c=wn(c),A*=on;const g=t+n,M=g+T,x=Math.round(Math.random()*1e6);for(let $=0;$<=vs.size-qM;$++){const We=vs.entries().next(),Ce=We.value[1],ut=We.value[0],vr=t+.25;(Fn=(xn=Ce==null?void 0:Ce.node)==null?void 0:xn.gain)==null||Fn.linearRampToValueAtTime(0,vr),(ht=Ce==null?void 0:Ce.stop)==null||ht.call(Ce,vr),vs.delete(ut)}let G=[];if(["-","~","_"].includes(f))return;P&&f&&(f=`${P}_${f}`,e.s=f);let I;if(y)I=y(t,e,n,r);else if(Xs(f)){const{onTrigger:$}=Xs(f),We=await $(t,e,()=>{G.forEach(Ce=>Ce==null?void 0:Ce.disconnect()),vs.delete(x)});We&&(I=We.node,vs.set(x,We))}else throw new Error(`sound ${f} not found! Is it loaded?`);if(!I)return;if(i.currentTime>t){Nt("[webaudio] skip hap: still loading",i.currentTime-t);return}const W=[];W.push(I),a!==void 0&&W.push(en(i,"phase-vocoder-processor",{pitchFactor:a})),W.push(Zt(A));const U=mA(e.ftype);if(z!==void 0){let $=()=>Vs(i,"lowpass",z,he,j,L,H,se,_,t,g,k,U,V);W.push($()),U==="24db"&&W.push($())}if(ie!==void 0){let $=()=>Vs(i,"highpass",ie,Y,te,ee,ye,Ye,re,t,g,k);W.push($()),U==="24db"&&W.push($())}if(_e!==void 0){let $=()=>Vs(i,"bandpass",_e,Ae,ft,Se,He,ce,ke,t,g,k);W.push($()),U==="24db"&&W.push($())}if(Et!==void 0){const $=i.createVowelFilter(Et);W.push($)}if(Te!==void 0&&W.push(en(i,"coarse-processor",{coarse:Te})),Ft!==void 0&&W.push(en(i,"crush-processor",{crush:Ft})),rt!==void 0&&W.push(en(i,"shape-processor",{shape:rt,postgain:pt})),_t!==void 0&&W.push(en(i,"distort-processor",{distort:_t,postgain:gt})),u!=null&&(o=r*u),o!==void 0){const $=Math.max(1-c,0),We=new GainNode(i,{gain:$}),Ce=s/r;ii(i,t,M,{skew:p??(m!=null?.5:1),frequency:o,depth:c,time:Ce,dcoffset:0,shape:m,phaseoffset:d,min:0,max:1,curve:1.5}).connect(We.gain),W.push(We)}if(It!==void 0&&W.push(Hd(i,It,Dn,sr,Mr,Pr)),wt!==void 0){const $=i.createStereoPanner();$.pan.value=2*wt-1,W.push($)}if(nt!==void 0&&$e>0){const $=dA(t,M,nt,$e,Kt,Me);W.push($)}const me=new GainNode(i,{gain:F});W.push(me);let ze;if(Ke>0&&Be>0&&vt>0){const $=hA(Q,Be,vt,t);ze=co(me,$,Ke),G.push(ze)}let Bt;if(Ie>0){let $;if(Ot!==void 0){let Ce,ut=Xs(Ot);Array.isArray(ut)?Ce=ut.data.samples[An%ut.data.samples.length]:typeof ut=="object"&&(Ce=Object.values(ut.data.samples).flat()[An%Object.values(ut.data.samples).length]),$=await Pa(Ce,i,Ot,0)}const We=yA(Q,St,Ve,rr,br,$,jt,je);Bt=co(me,We,Ie),G.push(Bt)}let Gt;if(Ne){const $=pm(Ne,2**(ot+5));Gt=co(me,$,1),G.push(Gt)}if(et!=null){et=wn(et);const $=new GainNode(i,{gain:et});W.push($),Li($,Q)}else Li(me,Q);W.slice(1).reduce(($,We)=>$.connect(We),W[0]),G=G.concat(W)},l3=(e,t,n,r)=>{Aa(t,e-n,t.duration/r,r)},Zs=(e,t=36)=>{let{note:n,freq:r}=e;return n=n||t,typeof n=="string"&&(n=ba(n)),!r&&typeof n=="number"&&(r=NM(n)),Number(r)};function Mi(e){var t;e!=null&&(e.disconnect(),(t=e.parameters.get("end"))==null||t.setValueAtTime(0,0))}const bA=["triangle","square","sawtooth","sine"],MA=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function PA(e,t){const n=e,r=new Float32Array(t);for(let s=0;s<t;s++){const i=s*2/t-1;r[s]=Math.tanh(i*n)}return r}function hm(){[...bA].forEach(e=>{En(e,(t,n,r)=>{const[s,i,a,o]=fn([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u=mm(e,t,n),{node:c,stop:p,triggerRelease:d}=u;const m=Zt(.3),{duration:f}=n;c.onended=()=>{c.disconnect(),m.disconnect(),r()};const P=Zt(1);let y=c.connect(m).connect(P);const A=t+f;mn(y.gain,s,i,a,o,0,1,t,A,"linear");const F=A+o+.01;return d==null||d(F),p(F),{node:y,stop:Z=>{p(Z)}}},{type:"synth",prebake:!0})}),En("sbd",(e,t,n)=>{const{duration:r,decay:s=.5,pdecay:i=.5,penv:a=36,clip:o}=t,u=De(),c=.02,p=1.2,d=.025,m=1,f=u.createOscillator();f.type="triangle",f.frequency.value=Zs(t,29),f.detune.setValueAtTime(a*100,0),f.detune.setValueAtTime(a*100,e),f.detune.exponentialRampToValueAtTime(.001,e+i);const P=Zt(1);P.gain.setValueAtTime(1,e+c),P.gain.exponentialRampToValueAtTime(.001,e+c+s),f.start(e);const y=To("brown",e,2),A=Zt(1);A.gain.setValueAtTime(p,e),A.gain.exponentialRampToValueAtTime(.001,e+d);const F=new WaveShaperNode(u);F.curve=PA(2,u.sampleRate);const Z=Zt(m);f.onended=()=>{f.disconnect(),P.disconnect(),F.disconnect(),y.node.disconnect(),A.disconnect(),Z.disconnect(),n()};const X=f.connect(F).connect(P).connect(Z);y.node.connect(A).connect(Z);let w=e+s+.01;return o!=null&&(w=Math.min(e+o*r,w)),Z.gain.setValueAtTime(m,w-.01),Z.gain.linearRampToValueAtTime(0,w),f.stop(w),y.stop(w),{node:X,stop:D=>{f.stop(D)}}},{type:"synth",prebake:!0}),En("supersaw",(e,t,n)=>{const r=De();let{duration:s,n:i,unison:a=5,spread:o=.6,detune:u}=t;u=u??i??.18;const c=Zs(t),[p,d,m,f]=fn([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),P=e+s,y=P+f+.01,A=Br(a,1,100);let F=A>1?Br(o,0,1):0,Z=en(r,"supersaw-oscillator",{frequency:c,begin:e,end:y,freqspread:u,voices:A,panspread:F},{outputChannelCount:[2]});const X=1/Math.sqrt(A);ns(Z.parameters.get("detune"),t,e,P);const w=rs(Z.parameters.get("detune"),t,e),D=Ys(Z.parameters.get("frequency"),t,e);let k=Zt(1);k=Z.connect(k),mn(k.gain,p,d,m,f,0,.3*X,e,P,"linear");let V=qr(r,()=>{Mi(Z),k.disconnect(),n(),D==null||D.stop(),w==null||w.stop()},e,y);return{node:k,stop:T=>{V.stop(T)}}},{prebake:!0,type:"synth"}),En("bytebeat",(e,t,n)=>{const r=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:s=0}=t,i=Zs(t),{byteBeatExpression:a=r[s%r.length],byteBeatStartTime:o}=t,u=De();let{duration:c}=t;const[p,d,m,f]=fn([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),P=e+c,y=P+f+.01;let A=en(u,"byte-beat-processor",{frequency:i,begin:e,end:y},{outputChannelCount:[2]});A.port.postMessage({codeText:a,byteBeatStartTime:o,frequency:i});let F=Zt(1);F=A.connect(F),mn(F.gain,p,d,m,f,0,1,e,P,"linear");let Z=qr(u,()=>{Mi(A),F.disconnect(),n()},e,y);return{node:F,stop:X=>{Z.stop(X)}}},{prebake:!0,type:"synth"}),En("pulse",(e,t,n)=>{const r=De();let{pwrate:s,pwsweep:i}=t;i==null&&(s!=null?i=.3:i=0),s==null&&i!=null&&(s=1);let{duration:a,pw:o=.5}=t;const u=Zs(t),[c,p,d,m]=fn([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),f=e+a,P=f+m+.01;let y=en(r,"pulse-oscillator",{frequency:u,begin:e,end:P,pulsewidth:o},{outputChannelCount:[2]});ns(y.parameters.get("detune"),t,e,f);const A=rs(y.parameters.get("detune"),t,e),F=Ys(y.parameters.get("frequency"),t,e);let Z=Zt(1);Z=y.connect(Z),mn(Z.gain,c,p,d,m,0,1,e,f,"linear");let X;i!=0&&(X=ii(r,e,P,{frequency:s,depth:i}),X.connect(y.parameters.get("pulsewidth")));let w=qr(r,()=>{Mi(y),Mi(X),Z.disconnect(),n(),F==null||F.stop(),A==null||A.stop()},e,P);return{node:Z,stop:D=>{w.stop(D)}}},{prebake:!0,type:"synth"}),[...Ma].forEach(e=>{En(e,(t,n,r)=>{const[s,i,a,o]=fn([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u,{density:c}=n;u=To(e,t,c);let{node:p,stop:d,triggerRelease:m}=u;const f=Zt(.3),{duration:P}=n;p.onended=()=>{p.disconnect(),f.disconnect(),r()};const y=Zt(1);let A=p.connect(f).connect(y);const F=t+P;mn(A.gain,s,i,a,o,0,1,t,F,"linear");const Z=F+o+.01;return m==null||m(Z),d(Z),{node:A,stop:X=>{d(X)}}},{type:"synth",prebake:!0})}),MA.forEach(([e,t])=>bn.set({...bn.get(),[e]:bn.get()[t]}))}function dm(e,t){const n=new Float32Array(e+1),r=new Float32Array(e+1),s=De(),i=s.createOscillator(),a={sawtooth:c=>[0,-1/c],square:c=>[0,c%2===0?0:1/c],triangle:c=>[c%2===0?0:1/(c*c),0]};if(!a[t])throw new Error(`unknown wave type ${t}`);n[0]=0,r[0]=0;let o=1;for(;o<=e;){const[c,p]=a[t](o);n[o]=c,r[o]=p,o++}const u=s.createPeriodicWave(n,r);return i.setPeriodicWave(u),i}function mm(e,t,n){let{n:r,duration:s,noise:i=0}=n,a;!r||e==="sine"?(a=De().createOscillator(),a.type=e||"triangle"):a=dm(r,e),a.frequency.value=Zs(n),a.start(t);let o=rs(a.detune,n,t);ns(a.detune,n,t,t+s);const u=Ys(a.frequency,n,t);let c;return i&&(c=eA(a,i,t)),{node:(c==null?void 0:c.node)||a,stop:p=>{u.stop(p),o==null||o.stop(p),c==null||c.stop(p),a.stop(p)},triggerRelease:p=>{}}}function vA(e=1,t=.05,n=220,r=0,s=0,i=.1,a=0,o=1,u=0,c=0,p=0,d=0,m=0,f=0,P=0,y=0,A=0,F=1,Z=0,X=0){let w=Math.PI*2,D=De().sampleRate,k=ee=>ee>0?1:-1,V=u*=500*w/D/D,T=n*=(1+t*2*Math.random()-t)*w/D,z=[],_=0,j=0,L=0,H=1,se=0,he=0,re=0,ie,te;for(r=r*D+9,Z*=D,s*=D,i*=D,A*=D,c*=500*w/D**3,P*=w/D,p*=w/D,d*=D,m=m*D|0,te=r+Z+s+i+A|0;L<te;z[L++]=re)++he%(y*100|0)||(re=a?a>1?a>2?a>3?Math.sin((_%w)**3):Math.max(Math.min(Math.tan(_),1),-1):1-(2*_/w%2+2)%2:1-4*Math.abs(Math.round(_/w)-_/w):Math.sin(_),re=(m?1-X+X*Math.sin(w*L/m):1)*k(re)*Math.abs(re)**o*e*1*(L<r?L/r:L<r+Z?1-(L-r)/Z*(1-F):L<r+Z+s?F:L<te-A?(te-L-A)/i*F:0),re=A?re/2+(A>L?0:(L<te-A?1:(te-L)/A)*z[L-A|0]/2):re),ie=(n+=u+=c)*Math.cos(P*j++),_+=ie-ie*f*(1-(Math.sin(L)+1)*1e9%2),H&&++H>d&&(n+=p,T+=p,H=0),m&&!(++se%m)&&(n=T,u=V,H||(H=1));return z}const fm=(e,t)=>{let{s:n,note:r=36,freq:s,zrand:i=0,attack:a=0,decay:o=0,sustain:u=.8,release:c=.1,curve:p=1,slide:d=0,deltaSlide:m=0,pitchJump:f=0,pitchJumpTime:P=0,lfo:y=0,znoise:A=0,zmod:F=0,zcrush:Z=0,zdelay:X=0,tremolo:w=0,duration:D=.2,zzfx:k}=e;const V=Math.max(D-a-o,0);typeof r=="string"&&(r=ba(r)),!s&&typeof r=="number"&&(s=NM(r)),n=n.replace("z_","");const T=["sine","triangle","sawtooth","tan","noise"].indexOf(n)||0;p=n==="square"?0:p;const z=vA(...k||[.25,i,s,a,V,c,T,p,d,m,f,P,y,A,F,Z,X,u,o,w]),_=De(),j=_.createBuffer(1,z.length,_.sampleRate);j.getChannelData(0).set(z);const L=De().createBufferSource();return L.buffer=j,L.start(t),{node:L}};function p3(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(e=>{En(e,(t,n,r)=>{const{node:s}=fm({s:e,...n},t);return s.onended=()=>{s.disconnect(),r()},{node:s,stop:()=>{}}},{type:"synth",prebake:!0})})}let qt;async function gm(e,t){const n=`dsp-worklet-${Date.now()}`,r=`${t}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${n}', MyProcessor);
`,s=`data:text/javascript;base64,${btoa(r)}`;await e.audioWorklet.addModule(s);const i=new AudioWorkletNode(e,n);return{node:i,stop:()=>i.port.postMessage("stop")}}const h3=()=>{var e;qt&&(qt==null||qt.stop(),(e=qt==null?void 0:qt.node)==null||e.disconnect())};typeof window<"u"&&window.addEventListener("message",e=>{var t;e.data==="strudel-stop"?h3():(t=e.data)!=null&&t.dough&&(qt==null||qt.node.port.postMessage(e.data))});const d3=async e=>{const t=De();h3(),qt=await gm(t,e),qt.node.connect(t.destination)};function ym(e,t,n,r){window.postMessage({time:r,dough:e.value,currentTime:t,duration:e.duration,cps:n})}const{Pattern:CA,logger:AA,repl:DA}=_M;Yd(AA);const xA=e=>(e.ensureObjectValue(),e.value),bm=(e,t,n,r,s)=>{var i;return Aa(xA(e),s,n,r,(i=e.whole)==null?void 0:i.begin.valueOf())};function Mm(e={}){return e={getTime:()=>De().currentTime,defaultOutput:bm,...e},DA(e)}CA.prototype.dough=function(){return this.onTrigger(ym,1)};const Gr=(e="test-canvas",t)=>{let{contextType:n="2d",pixelated:r=!1,pixelRatio:s=window.devicePixelRatio}={},i=document.querySelector("#"+e);if(!i){i=document.createElement("canvas"),i.id=e,i.width=window.innerWidth*s,i.height=window.innerHeight*s,i.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",r&&(i.style.imageRendering="pixelated"),document.body.prepend(i);let a;window.addEventListener("resize",()=>{a&&clearTimeout(a),a=setTimeout(()=>{i.width=window.innerWidth*s,i.height=window.innerHeight*s},200)})}return i.getContext(n,{willReadFrequently:!0})};let Gs={};function FA(e){Gs[e]!==void 0&&(cancelAnimationFrame(Gs[e]),delete Gs[e])}let zn={};O.prototype.draw=function(e,t){if(typeof window>"u")return this;let{id:n=1,lookbehind:r=0,lookahead:s=0}=t,i=Math.max(Ti(),0);FA(n),r=Math.abs(r),zn[n]=(zn[n]||[]).filter(c=>!c.isInFuture(i));let a=this.queryArc(i,i+s).filter(c=>c.hasOnset());zn[n]=zn[n].concat(a);let o;const u=()=>{const c=Ti(),p=c+s;zn[n]=zn[n].filter(f=>f.isInNearPast(r,c));let d=Math.max(o||p,p-1/10);const m=this.queryArc(d,p).filter(f=>f.hasOnset());zn[n]=zn[n].concat(m),o=p,e(zn[n],c,p,this),Gs[n]=requestAnimationFrame(u)};return Gs[n]=requestAnimationFrame(u),this};O.prototype.onPaint=function(e){return this.withState(t=>{t.controls.painters||(t.controls.painters=[]),t.controls.painters.push(e)})};O.prototype.getPainters=function(){let e=[];return this.queryArc(0,0,{painters:e}),e};let wA={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function Jn(){return wA}let N1="#22222210";O.prototype.animate=function({callback:e,sync:t=!1,smear:n=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const r=Gr();let{clientWidth:s,clientHeight:i}=r.canvas;s*=window.devicePixelRatio,i*=window.devicePixelRatio;let a=n===0?"99":Number((1-n)*100).toFixed(0);a=a.length===1?`0${a}`:a,N1=`#200010${a}`;const o=u=>{let c;u=Math.round(u),c=this.slow(1e3).queryArc(u,u),r.fillStyle=N1,r.fillRect(0,0,s,i),c.forEach(p=>{let{x:d,y:m,w:f,h:P,s:y,r:A,angle:F=0,fill:Z="darkseagreen"}=p.value;if(f*=s,P*=i,A!==void 0&&F!==void 0){const w=F*2*Math.PI,[D,k]=[(s-f)/2,(i-P)/2];d=D+Math.cos(w)*A*D,m=k+Math.sin(w)*A*k}else d*=s-f,m*=i-P;const X={...p.value,x:d,y:m,w:f,h:P};r.fillStyle=Z,y==="rect"?r.fillRect(d,m,f,P):y==="ellipse"&&(r.beginPath(),r.ellipse(d+f/2,m+P/2,f/2,P/2,0,0,2*Math.PI),r.fill()),e&&e(r,X,p)}),window.frame=requestAnimationFrame(o)};return window.frame=requestAnimationFrame(o),Ge};const{x:m3,y:aB,w:oB,h:uB,angle:cB,r:lB,fill:pB,smear:hB}=aa("x","y","w","h","angle","r","fill","smear");R("rescale",function(e,t){return t.mul(m3(e).w(e).y(e).h(e))});R("moveXY",function(e,t,n){return n.add(m3(e).y(t))});R("zoomIn",function(e,t){const n=it(1).sub(e).div(2);return t.rescale(e).move(n,n)});const Cs=(e,t,n)=>e*(n-t)+t,z1=e=>{let{value:t}=e;typeof e.value!="object"&&(t={value:t});let{note:n,n:r,freq:s,s:i}=t;if(s)return Ji(s);if(n=n??r,typeof n=="string")try{return $n(n)}catch{return 0}return typeof n=="number"?n:i?"_"+i:t};O.prototype.pianoroll=function(e={}){let{cycles:t=4,playhead:n=.5,overscan:r=0,hideNegative:s=!1,ctx:i=Gr(),id:a=1}=e,o=-t*n,u=t*(1-n);const c=(p,d)=>(!s||p.whole.begin>=0)&&p.isWithinTime(d+o,d+u);return this.draw((p,d)=>{f3({...e,time:d,ctx:i,haps:p.filter(m=>c(m,d))})},{lookbehind:o-r,lookahead:u+r,id:a}),this};function f3({time:e,haps:t,cycles:n=4,playhead:r=.5,flipTime:s=0,flipValues:i=0,hideNegative:a=!1,inactive:o=Jn().foreground,active:u=Jn().foreground,background:c="transparent",smear:p=0,playheadColor:d=Jn().foreground,minMidi:m=10,maxMidi:f=90,autorange:P=0,timeframe:y,fold:A=1,vertical:F=0,labels:Z=!1,fill:X=1,fillActive:w=!1,strokeActive:D=!0,stroke:k,hideInactive:V=0,colorizeInactive:T=1,fontFamily:z,ctx:_,id:j}={}){const L=_.canvas.width,H=_.canvas.height;let se=-n*r,he=n*(1-r);j&&(t=t.filter(ce=>ce.hasTag(j))),y&&(console.warn("timeframe is deprecated! use from/to instead"),se=0,he=y);const re=F?H:L,ie=F?L:H;let te=F?[re,0]:[0,re];const ee=he-se,ye=F?[0,ie]:[ie,0];let Ye=f-m+1,Y=ie/Ye,ke=[];s&&te.reverse(),i&&ye.reverse();const{min:_e,max:ft,values:Se}=t.reduce(({min:ce,max:Ae,values:nt},$e)=>{const Me=z1($e);return{min:Me<ce?Me:ce,max:Me>Ae?Me:Ae,values:nt.includes(Me)?nt:[...nt,Me]}},{min:1/0,max:-1/0,values:[]});P&&(m=_e,f=ft,Ye=f-m+1),ke=Se.sort((ce,Ae)=>typeof ce=="number"&&typeof Ae=="number"?ce-Ae:typeof ce=="number"?1:String(ce).localeCompare(String(Ae))),Y=A?ie/ke.length:ie/Ye,_.fillStyle=c,_.globalAlpha=1,p||(_.clearRect(0,0,L,H),_.fillRect(0,0,L,H)),t.forEach(ce=>{var vt;const Ae=ce.whole.begin<=e&&ce.endClipped>e;let nt=k??(D&&Ae),$e=!Ae&&X||Ae&&w;if(V&&!Ae)return;let Me=(vt=ce.value)==null?void 0:vt.color;u=Me||u,o=T&&Me||o,Me=Ae?u:o,_.fillStyle=$e?Me:"transparent",_.strokeStyle=Me;const{velocity:Kt=1,gain:Te=1}=ce.value||{};_.globalAlpha=Kt*Te;const Ft=(ce.whole.begin-(s?he:se))/ee,et=Cs(Ft,...te);let rt=Cs(ce.duration/ee,0,re);const pt=z1(ce),_t=A?ke.indexOf(pt)/ke.length:(Number(pt)-m)/Ye,gt=Cs(_t,...ye);let wt=0;const Et=Cs(e/ee,...te);let Ke;if(F?Ke=[gt+1-(i?Y:0),re-Et+et+wt+1-(s?0:rt),Y-2,rt-2]:Ke=[et-Et+wt+1-(s?rt:0),gt+1-(i?0:Y),rt-2,Y-2],nt&&_.strokeRect(...Ke),$e&&_.fillRect(...Ke),Z){const ve=ce.value.note??ce.value.s+(ce.value.n?`:${ce.value.n}`:""),{label:Be,activeLabel:Q}=ce.value,Ie=(Ae&&Q||Be)??ve;let Ve=F?rt:Y*.75;_.font=`${Ve}px ${z||"monospace"}`,_.fillStyle=$e?"black":Me,_.textBaseline="top",_.fillText(Ie,...Ke)}}),_.globalAlpha=1;const He=Cs(-se/ee,...te);return _.strokeStyle=d,_.beginPath(),F?(_.moveTo(0,He),_.lineTo(ie,He)):(_.moveTo(He,0),_.lineTo(He,ie)),_.stroke(),this}function EA(e,t={}){let[n,r]=e;n=Math.abs(n);const s=r+n,i=s!==0?n/s:0;return{fold:1,...t,cycles:s,playhead:i}}const SA=(e={})=>(t,n,r,s)=>f3({ctx:t,time:n,haps:r,...EA(s,e)});O.prototype.punchcard=function(e){return this.onPaint(SA(e))};O.prototype.wordfall=function(e){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...e})};function BA(e,t,n,r){const s=(e-90)*Math.PI/180;return[n+Math.cos(s)*t,r+Math.sin(s)*t]}const Y1=(e,t,n,r,s=0)=>BA((e+s)*360,t*e,n,r);function H1(e){let{ctx:t,from:n=0,to:r=3,margin:s=50,cx:i=100,cy:a=100,rotate:o=0,thickness:u=s/2,color:c=Jn().foreground,cap:p="round",stretch:d=1,fromOpacity:m=1,toOpacity:f=1}=e;n*=d,r*=d,o*=d,t.lineWidth=u,t.lineCap=p,t.strokeStyle=c,t.globalAlpha=m,t.beginPath();let[P,y]=Y1(n,s,i,a,o);t.moveTo(P,y);const A=1/60;let F=n;for(;F<=r;){const[Z,X]=Y1(F,s,i,a,o);t.globalAlpha=(F-n)/(r-n)*f,t.lineTo(Z,X),F+=A}t.stroke()}function ZA(e){let{stretch:t=1,size:n=80,thickness:r=n/2,cap:s="butt",inset:i=3,playheadColor:a="#ffffff",playheadLength:o=.02,playheadThickness:u=r,padding:c=0,steady:p=1,activeColor:d=Jn().foreground,inactiveColor:m=Jn().gutterForeground,colorizeInactive:f=0,fade:P=!0,ctx:y,time:A,haps:F,drawTime:Z,id:X}=e;X&&(F=F.filter(L=>L.hasTag(X)));const[w,D]=[y.canvas.width,y.canvas.height];y.clearRect(0,0,w*2,D*2);const[k,V]=[w/2,D/2],T={margin:n/t,cx:k,cy:V,stretch:t,cap:s,thickness:r},z={...T,thickness:u,from:i-o,to:i,color:a},[_]=Z,j=p*A;F.forEach(L=>{var ee;const H=L.whole.begin<=A&&L.endClipped>A,se=L.whole.begin-A+i,he=L.endClipped-A+i-c,re=((ee=L.value)==null?void 0:ee.color)||d,ie=f||H?re:m,te=P?1-Math.abs((L.whole.begin-A)/_):1;H1({ctx:y,...T,from:se,to:he,rotate:j,color:ie,fromOpacity:te,toOpacity:te})}),H1({ctx:y,...z,rotate:j})}O.prototype.spiral=function(e={}){return this.onPaint((t,n,r,s)=>ZA({ctx:t,time:n,haps:r,drawTime:s,...e}))};const kA=Er(36),K1=(e,t,n,r)=>{r=r*Math.PI*2;const s=Math.sin(r)*n+e,i=Math.cos(r)*n+t;return[s,i]},O1=(e,t)=>.5-Math.log2(e/t)%1;function VA({haps:e,ctx:t,id:n,hapcircles:r=1,circle:s=0,edo:i=12,root:a=kA,thickness:o=3,hapRadius:u=6,mode:c="flake",margin:p=10}={}){const d=c==="polygon",m=c==="flake",f=t.canvas.width,P=t.canvas.height;t.clearRect(0,0,f,P);const y=Jn().foreground,A=Math.min(f,P)/2-o/2-u-p,F=f/2,Z=P/2;n&&(e=e.filter(w=>w.hasTag(n))),t.strokeStyle=y,t.fillStyle=y,t.globalAlpha=1,t.lineWidth=o,s&&(t.beginPath(),t.arc(F,Z,A,0,2*Math.PI),t.stroke()),i&&(Array.from({length:i},(w,D)=>{const k=O1(a*Math.pow(2,D/i),a),[V,T]=K1(F,Z,A,k);t.beginPath(),t.arc(V,T,u,0,2*Math.PI),t.fill()}),t.stroke());let X=[];t.lineWidth=u,e.forEach(w=>{let D;try{D=lu(w)}catch{return}const k=O1(D,a),[V,T]=K1(F,Z,A,k),z=w.value.color||y;t.strokeStyle=z,t.fillStyle=z;const{velocity:_=1,gain:j=1}=w.value||{},L=_*j;t.globalAlpha=L,X.push([V,T,k,z,L]),t.beginPath(),r&&(t.moveTo(V+u,T),t.arc(V,T,u,0,2*Math.PI),t.fill()),m&&(t.moveTo(F,Z),t.lineTo(V,T)),t.stroke()}),t.strokeStyle=y,t.globalAlpha=1,d&&X.length&&(X=X.sort((w,D)=>w[2]-D[2]),t.beginPath(),t.moveTo(X[0][0],X[0][1]),X.forEach(([w,D,k,V,T])=>{t.strokeStyle=V,t.globalAlpha=T,t.lineTo(w,D)}),t.lineTo(X[0][0],X[0][1]),t.stroke())}O.prototype.pitchwheel=function(e={}){let{ctx:t=Gr(),id:n=1}=e;return this.tag(n).onPaint((r,s,i)=>VA({...e,ctx:t,haps:i.filter(a=>a.isActive(s)),id:n}))};function Pm(e,{align:t=!0,color:n="white",thickness:r=3,scale:s=.25,pos:i=.75,trigger:a=0,ctx:o=Gr(),id:u=1}={}){o.lineWidth=r,o.strokeStyle=n;let c=o.canvas;if(!e){o.beginPath();let y=i*c.height;o.moveTo(0,y),o.lineTo(c.width,y),o.stroke();return}const p=ai("time",u);o.beginPath();const d=e.frequencyBinCount;let m=t?Array.from(p).findIndex((y,A,F)=>A&&F[A-1]>-a&&y<=-a):0;m=Math.max(m,0);const f=c.width*1/d;let P=0;for(let y=m;y<d;y++){const A=p[y]+1,F=(i-s*(A-1))*c.height;y===0?o.moveTo(P,F):o.lineTo(P,F),P+=f}o.stroke()}function vm(e,{color:t="white",scale:n=.25,pos:r=.75,lean:s=.5,min:i=-150,max:a=0,ctx:o=Gr(),id:u=1}={}){if(!e){o.beginPath();let P=r*p.height;o.moveTo(0,P),o.lineTo(p.width,P),o.stroke();return}const c=ai("frequency",u),p=o.canvas;o.fillStyle=t;const d=e.frequencyBinCount,m=p.width*1/d;let f=0;for(let P=0;P<d;P++){const y=qs((c[P]-i)/(a-i),0,1)*n,A=y*p.height,F=(r-y*s)*p.height;o.fillRect(f,F,Math.max(m,1),A),f+=m}}function g3(e=0,t="0,0,0",n=Gr()){e?(n.fillStyle=`rgba(${t},${1-e})`,n.fillRect(0,0,n.canvas.width,n.canvas.height)):n.clearRect(0,0,n.canvas.width,n.canvas.height)}O.prototype.fscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(()=>{g3(e.smear,"0,0,0",e.ctx),Ct[t]&&vm(Ct[t],e)},{id:t})};O.prototype.tscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(n=>{var r,s;e.color=((s=(r=n[0])==null?void 0:r.value)==null?void 0:s.color)||Jn().foreground,e.color,g3(e.smear,"0,0,0",e.ctx),Pm(Ct[t],e)},{id:t})};O.prototype.scope=O.prototype.tscope;let j1={};O.prototype.spectrum=function(e={}){let t=e.id??1;return this.analyze(t).draw(n=>{var r,s;e.color=((s=(r=n[0])==null?void 0:r.value)==null?void 0:s.color)||j1[t]||Jn().foreground,j1[t]=e.color,XA(Ct[t],e)},{id:t})};O.prototype.scope=O.prototype.tscope;const lo=new Map;function XA(e,{thickness:t=3,speed:n=1,min:r=-80,max:s=0,ctx:i=Gr(),id:a=1,color:o}={}){if(i.lineWidth=t,i.strokeStyle=o,!e)return;const u=n,c=ai("frequency",a),p=i.canvas;i.fillStyle=o;const d=e.frequencyBinCount;let m=lo.get(a)||i.getImageData(0,0,p.width,p.height);lo.set(a,m),i.clearRect(0,0,i.canvas.width,i.canvas.height),i.putImageData(m,-u,0);let f=p.width-n;for(let P=0;P<d;P++){const y=qs((c[P]-r)/(s-r),0,1);i.globalAlpha=y;const A=Math.log(P+1)/Math.log(d)*p.height;i.fillRect(f,p.height-A,u,2)}lo.set(a,i.getImageData(0,0,p.width,p.height))}const GA=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY:va,aliasBank:t3,get analysers(){return Ct},get analysersData(){return lr},applyFM:Ys,applyGainCurve:wn,connectToDestination:lm,createFilter:Vs,dough:d3,doughTrigger:ym,drawFrequencyScope:vm,drawTimeScope:Pm,drywet:Kd,dspWorklet:gm,errorLogger:zd,gainNode:Zt,getADSRValues:fn,getAnalyserById:pm,getAnalyzerData:ai,getAudioContext:De,getAudioContextCurrentTime:o3,getAudioDevices:rm,getCachedBuffer:HM,getCompressor:Hd,getDefaultValue:st,getLfo:ii,getLoadedBuffer:KM,getOscillator:mm,getParamADSR:mn,getPitchEnvelope:ns,getSampleBuffer:Jd,getSampleBufferSource:Ud,getSampleInfo:jd,getSound:Xs,getVibratoOscillator:rs,getWorklet:en,getZZFX:fm,initAudio:om,initAudioOnFirstClick:um,initializeAudioOutput:cm,loadBuffer:Pa,logger:Nt,noises:Ma,onTriggerSample:em,panic:u3,processSampleMap:Qd,registerSamplesPrefix:UM,registerSound:En,registerSynthSounds:hm,registerZZFXSounds:p3,resetDefaultValues:im,resetDefaults:r3,resetGlobalEffects:c3,resetLoadedSounds:a3,reverseBuffer:qd,samples:$d,setDefault:n3,setDefaultAudioContext:am,setDefaultValue:Ca,setDefaultValues:s3,setGainCurve:e3,setLogger:Yd,setMaxPolyphony:tm,setMultiChannelOrbits:nm,setVersionDefaults:i3,soundMap:bn,superdough:Aa,superdoughTrigger:l3,waveformN:dm,webAudioTimeout:qr,webaudioOutput:bm,webaudioRepl:Mm},Symbol.toStringTag,{value:"Module"}));function TA(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function pr(e,t,n,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,pr.prototype),s.expected=t,s.found=n,s.location=r,s.name="SyntaxError",s}TA(pr,Error);function po(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,n+=n.repeat(t),e+n.slice(0,t))}pr.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,a=this.location.source+":"+i.line+":"+i.column;if(n){var o=this.location.end,u=po("",i.line.toString().length," "),c=n[s.line-1],p=s.line===o.line?o.column:c.length+1,d=p-s.column||1;t+=`
 --> `+a+`
`+u+` |
`+i.line+" | "+c+`
`+u+" | "+po("",s.column-1," ")+po("",d,"^")}else t+=`
 at `+a}return t};pr.buildMessage=function(e,t){var n={literal:function(c){return'"'+s(c.text)+'"'},class:function(c){var p=c.parts.map(function(d){return Array.isArray(d)?i(d[0])+"-"+i(d[1]):i(d)});return"["+(c.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(c){return c.description}};function r(c){return c.charCodeAt(0).toString(16).toUpperCase()}function s(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+r(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+r(p)})}function i(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+r(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+r(p)})}function a(c){return n[c.type](c)}function o(c){var p=c.map(a),d,m;if(p.sort(),p.length>0){for(d=1,m=1;d<p.length;d++)p[d-1]!==p[d]&&(p[m]=p[d],m++);p.length=m}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function u(c){return c?'"'+s(c)+'"':"end of input"}return"Expected "+o(e)+" but "+u(t)+" found."};function Cm(e,t){t=t!==void 0?t:{};var n={},r=t.grammarSource,s={start:v1},i=v1,a=".",o="-",u="0",c=",",p="|",d="[",m="]",f="{",P="}",y="%",A="<",F=">",Z="!",X="(",w=")",D="/",k="*",V="?",T=":",z="..",_="^",j="struct",L="target",H="euclid",se="slow",he="rotL",re="rotR",ie="fast",te="scale",ee="//",ye="cat",Ye="$",Y="setcps",ke="setbpm",_e="hush",ft=/^[1-9]/,Se=/^[eE]/,He=/^[+\-]/,ce=/^[0-9]/,Ae=/^[ \n\r\t\xA0]/,nt=/^["']/,$e=/^[#\--.0-9A-Z\^-_a-z~\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376-\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4-\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u09FC\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD-\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,Me=/^[@_]/,Kt=/^[^\n]/,Te=eo("number"),Ft=Fe(".",!1),et=_n([["1","9"]],!1,!1),rt=_n(["e","E"],!1,!1),pt=_n(["+","-"],!1,!1),_t=Fe("-",!1),gt=Fe("0",!1),wt=_n([["0","9"]],!1,!1),Et=eo("whitespace"),Ke=_n([" ",`
`,"\r","	"," "],!1,!1),vt=Fe(",",!1),ve=Fe("|",!1),Be=_n(['"',"'"],!1,!1),Q=eo('a letter, a number, "-", "#", ".", "^", "_"'),Ie=_n(["#",["-","."],["0","9"],["A","Z"],["^","_"],["a","z"],"~","ª","µ","º",["À","Ö"],["Ø","ö"],["ø","ˁ"],["ˆ","ˑ"],["ˠ","ˤ"],"ˬ","ˮ",["Ͱ","ʹ"],["Ͷ","ͷ"],["ͺ","ͽ"],"Ϳ","Ά",["Έ","Ί"],"Ό",["Ύ","Ρ"],["Σ","ϵ"],["Ϸ","ҁ"],["Ҋ","ԯ"],["Ա","Ֆ"],"ՙ",["ՠ","ֈ"],["א","ת"],["ׯ","ײ"],["ؠ","ي"],["ٮ","ٯ"],["ٱ","ۓ"],"ە",["ۥ","ۦ"],["ۮ","ۯ"],["ۺ","ۼ"],"ۿ","ܐ",["ܒ","ܯ"],["ݍ","ޥ"],"ޱ",["ߊ","ߪ"],["ߴ","ߵ"],"ߺ",["ࠀ","ࠕ"],"ࠚ","ࠤ","ࠨ",["ࡀ","ࡘ"],["ࡠ","ࡪ"],["ࢠ","ࢴ"],["ࢶ","ࢽ"],["ऄ","ह"],"ऽ","ॐ",["क़","ॡ"],["ॱ","ঀ"],["অ","ঌ"],["এ","ঐ"],["ও","ন"],["প","র"],"ল",["শ","হ"],"ঽ","ৎ",["ড়","ঢ়"],["য়","ৡ"],["ৰ","ৱ"],"ৼ",["ਅ","ਊ"],["ਏ","ਐ"],["ਓ","ਨ"],["ਪ","ਰ"],["ਲ","ਲ਼"],["ਵ","ਸ਼"],["ਸ","ਹ"],["ਖ਼","ੜ"],"ਫ਼",["ੲ","ੴ"],["અ","ઍ"],["એ","ઑ"],["ઓ","ન"],["પ","ર"],["લ","ળ"],["વ","હ"],"ઽ","ૐ",["ૠ","ૡ"],"ૹ",["ଅ","ଌ"],["ଏ","ଐ"],["ଓ","ନ"],["ପ","ର"],["ଲ","ଳ"],["ଵ","ହ"],"ଽ",["ଡ଼","ଢ଼"],["ୟ","ୡ"],"ୱ","ஃ",["அ","ஊ"],["எ","ஐ"],["ஒ","க"],["ங","ச"],"ஜ",["ஞ","ட"],["ண","த"],["ந","ப"],["ம","ஹ"],"ௐ",["అ","ఌ"],["ఎ","ఐ"],["ఒ","న"],["ప","హ"],"ఽ",["ౘ","ౚ"],["ౠ","ౡ"],"ಀ",["ಅ","ಌ"],["ಎ","ಐ"],["ಒ","ನ"],["ಪ","ಳ"],["ವ","ಹ"],"ಽ","ೞ",["ೠ","ೡ"],["ೱ","ೲ"],["അ","ഌ"],["എ","ഐ"],["ഒ","ഺ"],"ഽ","ൎ",["ൔ","ൖ"],["ൟ","ൡ"],["ൺ","ൿ"],["අ","ඖ"],["ක","න"],["ඳ","ර"],"ල",["ව","ෆ"],["ก","ะ"],["า","ำ"],["เ","ๆ"],["ກ","ຂ"],"ຄ",["ງ","ຈ"],"ຊ","ຍ",["ດ","ທ"],["ນ","ຟ"],["ມ","ຣ"],"ລ","ວ",["ສ","ຫ"],["ອ","ະ"],["າ","ຳ"],"ຽ",["ເ","ໄ"],"ໆ",["ໜ","ໟ"],"ༀ",["ཀ","ཇ"],["ཉ","ཬ"],["ྈ","ྌ"],["က","ဪ"],"ဿ",["ၐ","ၕ"],["ၚ","ၝ"],"ၡ",["ၥ","ၦ"],["ၮ","ၰ"],["ၵ","ႁ"],"ႎ",["Ⴀ","Ⴥ"],"Ⴧ","Ⴭ",["ა","ჺ"],["ჼ","ቈ"],["ቊ","ቍ"],["ቐ","ቖ"],"ቘ",["ቚ","ቝ"],["በ","ኈ"],["ኊ","ኍ"],["ነ","ኰ"],["ኲ","ኵ"],["ኸ","ኾ"],"ዀ",["ዂ","ዅ"],["ወ","ዖ"],["ዘ","ጐ"],["ጒ","ጕ"],["ጘ","ፚ"],["ᎀ","ᎏ"],["Ꭰ","Ᏽ"],["ᏸ","ᏽ"],["ᐁ","ᙬ"],["ᙯ","ᙿ"],["ᚁ","ᚚ"],["ᚠ","ᛪ"],["ᛮ","ᛸ"],["ᜀ","ᜌ"],["ᜎ","ᜑ"],["ᜠ","ᜱ"],["ᝀ","ᝑ"],["ᝠ","ᝬ"],["ᝮ","ᝰ"],["ក","ឳ"],"ៗ","ៜ",["ᠠ","ᡸ"],["ᢀ","ᢄ"],["ᢇ","ᢨ"],"ᢪ",["ᢰ","ᣵ"],["ᤀ","ᤞ"],["ᥐ","ᥭ"],["ᥰ","ᥴ"],["ᦀ","ᦫ"],["ᦰ","ᧉ"],["ᨀ","ᨖ"],["ᨠ","ᩔ"],"ᪧ",["ᬅ","ᬳ"],["ᭅ","ᭋ"],["ᮃ","ᮠ"],["ᮮ","ᮯ"],["ᮺ","ᯥ"],["ᰀ","ᰣ"],["ᱍ","ᱏ"],["ᱚ","ᱽ"],["ᲀ","ᲈ"],["Ა","Ჺ"],["Ჽ","Ჿ"],["ᳩ","ᳬ"],["ᳮ","ᳱ"],["ᳵ","ᳶ"],["ᴀ","ᶿ"],["Ḁ","ἕ"],["Ἐ","Ἕ"],["ἠ","ὅ"],["Ὀ","Ὅ"],["ὐ","ὗ"],"Ὑ","Ὓ","Ὕ",["Ὗ","ώ"],["ᾀ","ᾴ"],["ᾶ","ᾼ"],"ι",["ῂ","ῄ"],["ῆ","ῌ"],["ῐ","ΐ"],["ῖ","Ί"],["ῠ","Ῥ"],["ῲ","ῴ"],["ῶ","ῼ"],"ⁱ","ⁿ",["ₐ","ₜ"],"ℂ","ℇ",["ℊ","ℓ"],"ℕ",["ℙ","ℝ"],"ℤ","Ω","ℨ",["K","ℭ"],["ℯ","ℹ"],["ℼ","ℿ"],["ⅅ","ⅉ"],"ⅎ",["Ⅰ","ↈ"],["Ⰰ","Ⱞ"],["ⰰ","ⱞ"],["Ⱡ","ⳤ"],["Ⳬ","ⳮ"],["Ⳳ","ⳳ"],["ⴀ","ⴥ"],"ⴧ","ⴭ",["ⴰ","ⵧ"],"ⵯ",["ⶀ","ⶖ"],["ⶠ","ⶦ"],["ⶨ","ⶮ"],["ⶰ","ⶶ"],["ⶸ","ⶾ"],["ⷀ","ⷆ"],["ⷈ","ⷎ"],["ⷐ","ⷖ"],["ⷘ","ⷞ"],"ⸯ",["々","〇"],["〡","〩"],["〱","〵"],["〸","〼"],["ぁ","ゖ"],["ゝ","ゟ"],["ァ","ヺ"],["ー","ヿ"],["ㄅ","ㄯ"],["ㄱ","ㆎ"],["ㆠ","ㆺ"],["ㇰ","ㇿ"],["㐀","䶵"],["一","鿯"],["ꀀ","ꒌ"],["ꓐ","ꓽ"],["ꔀ","ꘌ"],["ꘐ","ꘟ"],["ꘪ","ꘫ"],["Ꙁ","ꙮ"],["ꙿ","ꚝ"],["ꚠ","ꛯ"],["ꜗ","ꜟ"],["Ꜣ","ꞈ"],["Ꞌ","ꞹ"],["ꟷ","ꠁ"],["ꠃ","ꠅ"],["ꠇ","ꠊ"],["ꠌ","ꠢ"],["ꡀ","ꡳ"],["ꢂ","ꢳ"],["ꣲ","ꣷ"],"ꣻ",["ꣽ","ꣾ"],["ꤊ","ꤥ"],["ꤰ","ꥆ"],["ꥠ","ꥼ"],["ꦄ","ꦲ"],"ꧏ",["ꧠ","ꧤ"],["ꧦ","ꧯ"],["ꧺ","ꧾ"],["ꨀ","ꨨ"],["ꩀ","ꩂ"],["ꩄ","ꩋ"],["ꩠ","ꩶ"],"ꩺ",["ꩾ","ꪯ"],"ꪱ",["ꪵ","ꪶ"],["ꪹ","ꪽ"],"ꫀ","ꫂ",["ꫛ","ꫝ"],["ꫠ","ꫪ"],["ꫲ","ꫴ"],["ꬁ","ꬆ"],["ꬉ","ꬎ"],["ꬑ","ꬖ"],["ꬠ","ꬦ"],["ꬨ","ꬮ"],["ꬰ","ꭚ"],["ꭜ","ꭥ"],["ꭰ","ꯢ"],["가","힣"],["ힰ","ퟆ"],["ퟋ","ퟻ"],["豈","舘"],["並","龎"],["ﬀ","ﬆ"],["ﬓ","ﬗ"],"יִ",["ײַ","ﬨ"],["שׁ","זּ"],["טּ","לּ"],"מּ",["נּ","סּ"],["ףּ","פּ"],["צּ","ﮱ"],["ﯓ","ﴽ"],["ﵐ","ﶏ"],["ﶒ","ﷇ"],["ﷰ","ﷻ"],["ﹰ","ﹴ"],["ﹶ","ﻼ"],["Ａ","Ｚ"],["ａ","ｚ"],["ｦ","ﾾ"],["ￂ","ￇ"],["ￊ","ￏ"],["ￒ","ￗ"],["ￚ","ￜ"]],!1,!1),Ve=Fe("[",!1),rr=Fe("]",!1),br=Fe("{",!1),St=Fe("}",!1),Ot=Fe("%",!1),jt=Fe("<",!1),je=Fe(">",!1),An=_n(["@","_"],!1,!1),on=Fe("!",!1),Ne=Fe("(",!1),ot=Fe(")",!1),It=Fe("/",!1),Dn=Fe("*",!1),sr=Fe("?",!1),Mr=Fe(":",!1),Pr=Fe("..",!1),l=Fe("^",!1),b=Fe("struct",!1),g=Fe("target",!1),M=Fe("euclid",!1),x=Fe("slow",!1),G=Fe("rotL",!1),I=Fe("rotR",!1),W=Fe("fast",!1),U=Fe("scale",!1),me=Fe("//",!1),ze=_n([`
`],!0,!1),Bt=Fe("cat",!1),Gt=Fe("$",!1),xn=Fe("setcps",!1),Fn=Fe("setbpm",!1),ht=Fe("hush",!1),$=function(){return parseFloat(o5())},We=function(h){const C=h.join("");return C==="."||C==="_"},Ce=function(h){return new U5(h.join(""))},ut=function(h){return h},vr=function(h,C){return h.arguments_.stepsPerCycle=C,h},w9=function(h){return h},E9=function(h){return h.arguments_.alignment="polymeter_slowcat",h},S9=function(h){return C=>C.options_.weight=(C.options_.weight??1)+(h??2)-1},B9=function(h){return C=>{const S=(C.options_.reps??1)+(h??2)-1;C.options_.reps=S,C.options_.ops=C.options_.ops.filter(N=>N.type_!=="replicate"),C.options_.ops.push({type_:"replicate",arguments_:{amount:S}}),C.options_.weight=S}},Z9=function(h,C,S){return N=>N.options_.ops.push({type_:"bjorklund",arguments_:{pulse:h,step:C,rotation:S}})},k9=function(h){return C=>C.options_.ops.push({type_:"stretch",arguments_:{amount:h,type:"slow"}})},V9=function(h){return C=>C.options_.ops.push({type_:"stretch",arguments_:{amount:h,type:"fast"}})},X9=function(h){return C=>C.options_.ops.push({type_:"degradeBy",arguments_:{amount:h,seed:so++}})},G9=function(h){return C=>C.options_.ops.push({type_:"tail",arguments_:{element:h}})},T9=function(h){return C=>C.options_.ops.push({type_:"range",arguments_:{element:h}})},W9=function(h,C){const S=new Q5(h,{ops:[],weight:1,reps:1});for(const N of C)N(S);return S},L9=function(h,C){return new gi(C,"fastcat",void 0,!!h)},R9=function(h){return{alignment:"stack",list:h}},_9=function(h){return{alignment:"rand",list:h,seed:so++}},I9=function(h){return{alignment:"feet",list:h,seed:so++}},N9=function(h,C){return C&&C.list.length>0?new gi([h,...C.list],C.alignment,C.seed):h},z9=function(h,C){return new gi(C?[h,...C.list]:[h],"polymeter")},Y9=function(h){return h},H9=function(h){return{name:"struct",args:{mini:h}}},K9=function(h){return{name:"target",args:{name:h}}},O9=function(h,C,S){return{name:"bjorklund",args:{pulse:h,step:parseInt(C)}}},j9=function(h){return{name:"stretch",args:{amount:h}}},J9=function(h){return{name:"shift",args:{amount:"-"+h}}},U9=function(h){return{name:"shift",args:{amount:h}}},q9=function(h){return{name:"stretch",args:{amount:"1/"+h}}},Q9=function(h){return{name:"scale",args:{scale:h.join("")}}},b1=function(h,C){return C},$9=function(h,C){return C.unshift(h),new gi(C,"slowcat")},e5=function(h){return h},t5=function(h,C){return new q5(h.name,h.args,C)},n5=function(h){return h},r5=function(h){return h},s5=function(h){return new ro("setcps",{value:h})},i5=function(h){return new ro("setcps",{value:h/120/2})},a5=function(){return new ro("hush")},E=t.peg$currPos|0,ge=E,Rr=[{line:1,column:1}],un=E,di=t.peg$maxFailExpected||[],oe=t.peg$silentFails|0,bs;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=s[t.startRule]}function o5(){return e.substring(ge,E)}function M1(){return to(ge,E)}function Fe(h,C){return{type:"literal",text:h,ignoreCase:C}}function _n(h,C,S){return{type:"class",parts:h,inverted:C,ignoreCase:S}}function u5(){return{type:"end"}}function eo(h){return{type:"other",description:h}}function P1(h){var C=Rr[h],S;if(C)return C;if(h>=Rr.length)S=Rr.length-1;else for(S=h;!Rr[--S];);for(C=Rr[S],C={line:C.line,column:C.column};S<h;)e.charCodeAt(S)===10?(C.line++,C.column=1):C.column++,S++;return Rr[h]=C,C}function to(h,C,S){var N=P1(h),ue=P1(C),Ue={source:r,start:{offset:h,line:N.line,column:N.column},end:{offset:C,line:ue.line,column:ue.column}};return Ue}function pe(h){E<un||(E>un&&(un=E,di=[]),di.push(h))}function c5(h,C,S){return new pr(pr.buildMessage(h,C),h,C,S)}function v1(){var h;return h=J5(),h}function In(){var h,C;return oe++,h=E,f5(),C=mi(),C!==n?(m5(),d5(),ge=h,h=$()):(E=h,h=n),oe--,h===n&&oe===0&&pe(Te),h}function l5(){var h;return e.charCodeAt(E)===46?(h=a,E++):(h=n,oe===0&&pe(Ft)),h}function p5(){var h;return h=e.charAt(E),ft.test(h)?E++:(h=n,oe===0&&pe(et)),h}function h5(){var h;return h=e.charAt(E),Se.test(h)?E++:(h=n,oe===0&&pe(rt)),h}function d5(){var h,C,S,N,ue;if(h=E,C=h5(),C!==n){if(S=e.charAt(E),He.test(S)?E++:(S=n,oe===0&&pe(pt)),S===n&&(S=null),N=[],ue=_r(),ue!==n)for(;ue!==n;)N.push(ue),ue=_r();else N=n;N!==n?(C=[C,S,N],h=C):(E=h,h=n)}else E=h,h=n;return h}function m5(){var h,C,S,N;if(h=E,C=l5(),C!==n){if(S=[],N=_r(),N!==n)for(;N!==n;)S.push(N),N=_r();else S=n;S!==n?(C=[C,S],h=C):(E=h,h=n)}else E=h,h=n;return h}function mi(){var h,C,S,N;if(h=g5(),h===n)if(h=E,C=p5(),C!==n){for(S=[],N=_r();N!==n;)S.push(N),N=_r();C=[C,S],h=C}else E=h,h=n;return h}function f5(){var h;return e.charCodeAt(E)===45?(h=o,E++):(h=n,oe===0&&pe(_t)),h}function g5(){var h;return e.charCodeAt(E)===48?(h=u,E++):(h=n,oe===0&&pe(gt)),h}function _r(){var h;return h=e.charAt(E),ce.test(h)?E++:(h=n,oe===0&&pe(wt)),h}function de(){var h,C;for(oe++,h=[],C=e.charAt(E),Ae.test(C)?E++:(C=n,oe===0&&pe(Ke));C!==n;)h.push(C),C=e.charAt(E),Ae.test(C)?E++:(C=n,oe===0&&pe(Ke));return oe--,C=n,oe===0&&pe(Et),h}function Ir(){var h,C,S,N;return h=E,C=de(),e.charCodeAt(E)===44?(S=c,E++):(S=n,oe===0&&pe(vt)),S!==n?(N=de(),C=[C,S,N],h=C):(E=h,h=n),h}function C1(){var h,C,S,N;return h=E,C=de(),e.charCodeAt(E)===124?(S=p,E++):(S=n,oe===0&&pe(ve)),S!==n?(N=de(),C=[C,S,N],h=C):(E=h,h=n),h}function A1(){var h,C,S,N;return h=E,C=de(),e.charCodeAt(E)===46?(S=a,E++):(S=n,oe===0&&pe(Ft)),S!==n?(N=de(),C=[C,S,N],h=C):(E=h,h=n),h}function Nr(){var h;return h=e.charAt(E),nt.test(h)?E++:(h=n,oe===0&&pe(Be)),h}function fi(){var h;return oe++,h=e.charAt(E),$e.test(h)?E++:(h=n,oe===0&&pe(Ie)),oe--,h===n&&oe===0&&pe(Q),h}function D1(){var h,C,S,N;if(h=E,de(),C=[],S=fi(),S!==n)for(;S!==n;)C.push(S),S=fi();else C=n;return C!==n?(S=de(),ge=E,N=We(C),N?N=n:N=void 0,N!==n?(ge=h,h=Ce(C)):(E=h,h=n)):(E=h,h=n),h}function y5(){var h,C,S,N;return h=E,de(),e.charCodeAt(E)===91?(C=d,E++):(C=n,oe===0&&pe(Ve)),C!==n?(de(),S=w1(),S!==n?(de(),e.charCodeAt(E)===93?(N=m,E++):(N=n,oe===0&&pe(rr)),N!==n?(de(),ge=h,h=ut(S)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n),h}function b5(){var h,C,S,N,ue;return h=E,de(),e.charCodeAt(E)===123?(C=f,E++):(C=n,oe===0&&pe(br)),C!==n?(de(),S=E1(),S!==n?(de(),e.charCodeAt(E)===125?(N=P,E++):(N=n,oe===0&&pe(St)),N!==n?(ue=M5(),ue===n&&(ue=null),de(),ge=h,h=vr(S,ue)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n),h}function M5(){var h,C,S;return h=E,e.charCodeAt(E)===37?(C=y,E++):(C=n,oe===0&&pe(Ot)),C!==n?(S=zr(),S!==n?(ge=h,h=w9(S)):(E=h,h=n)):(E=h,h=n),h}function P5(){var h,C,S,N;return h=E,de(),e.charCodeAt(E)===60?(C=A,E++):(C=n,oe===0&&pe(jt)),C!==n?(de(),S=E1(),S!==n?(de(),e.charCodeAt(E)===62?(N=F,E++):(N=n,oe===0&&pe(je)),N!==n?(de(),ge=h,h=E9(S)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n),h}function zr(){var h;return h=D1(),h===n&&(h=y5(),h===n&&(h=b5(),h===n&&(h=P5()))),h}function x1(){var h;return h=v5(),h===n&&(h=A5(),h===n&&(h=D5(),h===n&&(h=x5(),h===n&&(h=C5(),h===n&&(h=F5(),h===n&&(h=w5(),h===n&&(h=E5()))))))),h}function v5(){var h,C,S;return h=E,de(),C=e.charAt(E),Me.test(C)?E++:(C=n,oe===0&&pe(An)),C!==n?(S=In(),S===n&&(S=null),ge=h,h=S9(S)):(E=h,h=n),h}function C5(){var h,C,S;return h=E,de(),e.charCodeAt(E)===33?(C=Z,E++):(C=n,oe===0&&pe(on)),C!==n?(S=In(),S===n&&(S=null),ge=h,h=B9(S)):(E=h,h=n),h}function A5(){var h,C,S,N,ue,Ue,cn;return h=E,e.charCodeAt(E)===40?(C=X,E++):(C=n,oe===0&&pe(Ne)),C!==n?(de(),S=Ms(),S!==n?(de(),N=Ir(),N!==n?(de(),ue=Ms(),ue!==n?(de(),Ir(),de(),Ue=Ms(),Ue===n&&(Ue=null),de(),e.charCodeAt(E)===41?(cn=w,E++):(cn=n,oe===0&&pe(ot)),cn!==n?(ge=h,h=Z9(S,ue,Ue)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n),h}function D5(){var h,C,S;return h=E,e.charCodeAt(E)===47?(C=D,E++):(C=n,oe===0&&pe(It)),C!==n?(S=zr(),S!==n?(ge=h,h=k9(S)):(E=h,h=n)):(E=h,h=n),h}function x5(){var h,C,S;return h=E,e.charCodeAt(E)===42?(C=k,E++):(C=n,oe===0&&pe(Dn)),C!==n?(S=zr(),S!==n?(ge=h,h=V9(S)):(E=h,h=n)):(E=h,h=n),h}function F5(){var h,C,S;return h=E,e.charCodeAt(E)===63?(C=V,E++):(C=n,oe===0&&pe(sr)),C!==n?(S=In(),S===n&&(S=null),ge=h,h=X9(S)):(E=h,h=n),h}function w5(){var h,C,S;return h=E,e.charCodeAt(E)===58?(C=T,E++):(C=n,oe===0&&pe(Mr)),C!==n?(S=zr(),S!==n?(ge=h,h=G9(S)):(E=h,h=n)):(E=h,h=n),h}function E5(){var h,C,S;return h=E,e.substr(E,2)===z?(C=z,E+=2):(C=n,oe===0&&pe(Pr)),C!==n?(S=zr(),S!==n?(ge=h,h=T9(S)):(E=h,h=n)):(E=h,h=n),h}function Ms(){var h,C,S,N;if(h=E,C=zr(),C!==n){for(S=[],N=x1();N!==n;)S.push(N),N=x1();ge=h,h=W9(C,S)}else E=h,h=n;return h}function ir(){var h,C,S,N;if(h=E,e.charCodeAt(E)===94?(C=_,E++):(C=n,oe===0&&pe(l)),C===n&&(C=null),S=[],N=Ms(),N!==n)for(;N!==n;)S.push(N),N=Ms();else S=n;return S!==n?(ge=h,h=L9(C,S)):(E=h,h=n),h}function F1(){var h,C,S,N,ue;if(h=E,C=[],S=E,N=Ir(),N!==n?(ue=ir(),ue!==n?S=ue:(E=S,S=n)):(E=S,S=n),S!==n)for(;S!==n;)C.push(S),S=E,N=Ir(),N!==n?(ue=ir(),ue!==n?S=ue:(E=S,S=n)):(E=S,S=n);else C=n;return C!==n&&(ge=h,C=R9(C)),h=C,h}function S5(){var h,C,S,N,ue;if(h=E,C=[],S=E,N=C1(),N!==n?(ue=ir(),ue!==n?S=ue:(E=S,S=n)):(E=S,S=n),S!==n)for(;S!==n;)C.push(S),S=E,N=C1(),N!==n?(ue=ir(),ue!==n?S=ue:(E=S,S=n)):(E=S,S=n);else C=n;return C!==n&&(ge=h,C=_9(C)),h=C,h}function B5(){var h,C,S,N,ue;if(h=E,C=[],S=E,N=A1(),N!==n?(ue=ir(),ue!==n?S=ue:(E=S,S=n)):(E=S,S=n),S!==n)for(;S!==n;)C.push(S),S=E,N=A1(),N!==n?(ue=ir(),ue!==n?S=ue:(E=S,S=n)):(E=S,S=n);else C=n;return C!==n&&(ge=h,C=I9(C)),h=C,h}function w1(){var h,C,S;return h=E,C=ir(),C!==n?(S=F1(),S===n&&(S=S5(),S===n&&(S=B5())),S===n&&(S=null),ge=h,h=N9(C,S)):(E=h,h=n),h}function E1(){var h,C,S;return h=E,C=ir(),C!==n?(S=F1(),S===n&&(S=null),ge=h,h=z9(C,S)):(E=h,h=n),h}function Z5(){var h,C,S,N;return h=E,de(),C=Nr(),C!==n?(de(),S=w1(),S!==n?(de(),N=Nr(),N!==n?(ge=h,h=Y9(S)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n),h}function k5(){var h;return h=_5(),h===n&&(h=T5(),h===n&&(h=R5(),h===n&&(h=X5(),h===n&&(h=G5(),h===n&&(h=V5(),h===n&&(h=L5(),h===n&&(h=W5()))))))),h}function V5(){var h,C,S;return h=E,e.substr(E,6)===j?(C=j,E+=6):(C=n,oe===0&&pe(b)),C!==n?(de(),S=Yr(),S!==n?(ge=h,h=H9(S)):(E=h,h=n)):(E=h,h=n),h}function X5(){var h,C,S,N,ue;return h=E,e.substr(E,6)===L?(C=L,E+=6):(C=n,oe===0&&pe(g)),C!==n?(de(),S=Nr(),S!==n?(N=D1(),N!==n?(ue=Nr(),ue!==n?(ge=h,h=K9(N)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n),h}function G5(){var h,C,S,N;return h=E,e.substr(E,6)===H?(C=H,E+=6):(C=n,oe===0&&pe(M)),C!==n?(de(),S=mi(),S!==n?(de(),N=mi(),N!==n?(de(),mi(),ge=h,h=O9(S,N)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n),h}function T5(){var h,C,S;return h=E,e.substr(E,4)===se?(C=se,E+=4):(C=n,oe===0&&pe(x)),C!==n?(de(),S=In(),S!==n?(ge=h,h=j9(S)):(E=h,h=n)):(E=h,h=n),h}function W5(){var h,C,S;return h=E,e.substr(E,4)===he?(C=he,E+=4):(C=n,oe===0&&pe(G)),C!==n?(de(),S=In(),S!==n?(ge=h,h=J9(S)):(E=h,h=n)):(E=h,h=n),h}function L5(){var h,C,S;return h=E,e.substr(E,4)===re?(C=re,E+=4):(C=n,oe===0&&pe(I)),C!==n?(de(),S=In(),S!==n?(ge=h,h=U9(S)):(E=h,h=n)):(E=h,h=n),h}function R5(){var h,C,S;return h=E,e.substr(E,4)===ie?(C=ie,E+=4):(C=n,oe===0&&pe(W)),C!==n?(de(),S=In(),S!==n?(ge=h,h=q9(S)):(E=h,h=n)):(E=h,h=n),h}function _5(){var h,C,S,N,ue;if(h=E,e.substr(E,5)===te?(C=te,E+=5):(C=n,oe===0&&pe(U)),C!==n)if(de(),S=Nr(),S!==n){if(N=[],ue=fi(),ue!==n)for(;ue!==n;)N.push(ue),ue=fi();else N=n;N!==n?(ue=Nr(),ue!==n?(ge=h,h=Q9(N)):(E=h,h=n)):(E=h,h=n)}else E=h,h=n;else E=h,h=n;return h}function no(){var h,C,S,N;if(h=E,e.substr(E,2)===ee?(C=ee,E+=2):(C=n,oe===0&&pe(me)),C!==n){for(S=[],N=e.charAt(E),Kt.test(N)?E++:(N=n,oe===0&&pe(ze));N!==n;)S.push(N),N=e.charAt(E),Kt.test(N)?E++:(N=n,oe===0&&pe(ze));C=[C,S],h=C}else E=h,h=n;return h}function I5(){var h,C,S,N,ue,Ue,cn,Hr;if(h=E,e.substr(E,3)===ye?(C=ye,E+=3):(C=n,oe===0&&pe(Bt)),C!==n)if(de(),e.charCodeAt(E)===91?(S=d,E++):(S=n,oe===0&&pe(Ve)),S!==n)if(de(),N=Yr(),N!==n){for(ue=[],Ue=E,cn=Ir(),cn!==n?(Hr=Yr(),Hr!==n?(ge=Ue,Ue=b1(N,Hr)):(E=Ue,Ue=n)):(E=Ue,Ue=n);Ue!==n;)ue.push(Ue),Ue=E,cn=Ir(),cn!==n?(Hr=Yr(),Hr!==n?(ge=Ue,Ue=b1(N,Hr)):(E=Ue,Ue=n)):(E=Ue,Ue=n);Ue=de(),e.charCodeAt(E)===93?(cn=m,E++):(cn=n,oe===0&&pe(rr)),cn!==n?(ge=h,h=$9(N,ue)):(E=h,h=n)}else E=h,h=n;else E=h,h=n;else E=h,h=n;return h}function N5(){var h;return h=I5(),h===n&&(h=Z5()),h}function Yr(){var h,C,S,N,ue;if(h=E,C=N5(),C!==n){for(de(),S=[],N=no();N!==n;)S.push(N),N=no();ge=h,h=e5(C)}else E=h,h=n;return h===n&&(h=E,C=k5(),C!==n?(de(),e.charCodeAt(E)===36?(S=Ye,E++):(S=n,oe===0&&pe(Gt)),S!==n?(N=de(),ue=Yr(),ue!==n?(ge=h,h=t5(C,ue)):(E=h,h=n)):(E=h,h=n)):(E=h,h=n)),h}function z5(){var h,C;return h=E,C=Yr(),C!==n&&(ge=h,C=n5(C)),h=C,h===n&&(h=no()),h}function Y5(){var h;return h=z5(),h}function H5(){var h,C;return h=E,de(),C=K5(),C===n&&(C=O5(),C===n&&(C=j5())),C!==n?(de(),ge=h,h=r5(C)):(E=h,h=n),h}function K5(){var h,C,S;return h=E,e.substr(E,6)===Y?(C=Y,E+=6):(C=n,oe===0&&pe(xn)),C!==n?(de(),S=In(),S!==n?(ge=h,h=s5(S)):(E=h,h=n)):(E=h,h=n),h}function O5(){var h,C,S;return h=E,e.substr(E,6)===ke?(C=ke,E+=6):(C=n,oe===0&&pe(Fn)),C!==n?(de(),S=In(),S!==n?(ge=h,h=i5(S)):(E=h,h=n)):(E=h,h=n),h}function j5(){var h,C;return h=E,e.substr(E,4)===_e?(C=_e,E+=4):(C=n,oe===0&&pe(ht)),C!==n&&(ge=h,C=a5()),h=C,h}function J5(){var h;return h=Y5(),h===n&&(h=H5()),h}var U5=function(h){this.type_="atom",this.source_=h,this.location_=M1()},gi=function(h,C,S,N){this.type_="pattern",this.arguments_={alignment:C,_steps:N},S!==void 0&&(this.arguments_.seed=S),this.source_=h},q5=function(h,C,S){this.type_=h,this.arguments_=C,this.source_=S},Q5=function(h,C){this.type_="element",this.source_=h,this.options_=C,this.location_=M1()},ro=function(h,C){this.type_="command",this.name_=h,this.options_=C},so=0;if(bs=i(),t.peg$library)return{peg$result:bs,peg$currPos:E,peg$FAILED:n,peg$maxFailExpected:di,peg$maxFailPos:un};if(bs!==n&&E===e.length)return bs;throw bs!==n&&E<e.length&&pe(u5()),c5(di,un<e.length?e.charAt(un):null,un<e.length?to(un,un+1):to(un,un))}const y3=["start"],b3=3e-4,WA=(e,t)=>(n,r)=>{var a;const s=(a=e.source_[r].options_)==null?void 0:a.ops,i=n.__steps_source;if(s)for(const o of s)switch(o.type_){case"stretch":{const u=["fast","slow"],{type:c,amount:p}=o.arguments_;if(!u.includes(c))throw new Error(`mini: stretch: type must be one of ${u.join("|")} but got ${c}`);n=J(n)[c](t(p));break}case"replicate":{const{amount:u}=o.arguments_;n=J(n),n=n._repeatCycles(u)._fast(u);break}case"bjorklund":{o.arguments_.rotation?n=n.euclidRot(t(o.arguments_.pulse),t(o.arguments_.step),t(o.arguments_.rotation)):n=n.euclid(t(o.arguments_.pulse),t(o.arguments_.step));break}case"degradeBy":{n=J(n)._degradeByWith(Dt.early(b3*o.arguments_.seed),o.arguments_.amount??.5);break}case"tail":{const u=t(o.arguments_.element);n=n.fmap(c=>p=>Array.isArray(c)?[...c,p]:[c,p]).appLeft(u);break}case"range":{const u=t(o.arguments_.element);n=J(n);const c=(p,d,m=1)=>Array.from({length:Math.abs(d-p)/m+1},(f,P)=>p<d?p+P*m:p-P*m);n=((p,d)=>p.squeezeBind(m=>d.bind(f=>Pt(...c(m,f)))))(n,u);break}default:console.warn(`operator "${o.type_}" not implemented`)}return n.__steps_source=n.__steps_source||i,n};function Tr(e,t,n,r=0){n==null||n(e);const s=i=>Tr(i,t,n,r);switch(e.type_){case"pattern":{const i=e.source_.map(c=>s(c)).map(WA(e,s)),a=e.arguments_.alignment,o=i.filter(c=>c.__steps_source);let u;switch(a){case"stack":{u=Oe(...i),o.length&&(u._steps=yn(...o.map(c=>K(c._steps))));break}case"polymeter_slowcat":{u=Oe(...i.map(c=>c._slow(c.__weight))),o.length&&(u._steps=yn(...o.map(c=>K(c._steps))));break}case"polymeter":{const c=e.arguments_.stepsPerCycle?s(e.arguments_.stepsPerCycle).fmap(d=>K(d)):it(K(i.length>0?i[0].__weight:1)),p=i.map(d=>d.fast(c.fmap(m=>m.div(d.__weight))));u=Oe(...p);break}case"rand":{u=ri(Dt.early(b3*e.arguments_.seed).segment(1),i),o.length&&(u._steps=yn(...o.map(c=>K(c._steps))));break}case"feet":{u=Pt(...i);break}default:{if(e.source_.some(c=>{var p;return!!((p=c.options_)!=null&&p.weight)})){const c=e.source_.reduce((p,d)=>{var m;return p.add(((m=d.options_)==null?void 0:m.weight)||K(1))},K(0));u=ra(...e.source_.map((p,d)=>{var m;return[((m=p.options_)==null?void 0:m.weight)||K(1),i[d]]})),u.__weight=c,u._steps=c,o.length&&(u._steps=u._steps.mul(yn(...o.map(p=>K(p._steps)))))}else u=rn(...i),u._steps=i.length;e.arguments_._steps&&(u.__steps_source=!0)}}return o.length&&(u.__steps_source=!0),u}case"element":return s(e.source_);case"atom":{if(e.source_==="~"||e.source_==="-")return Ge;if(!e.location_)return console.warn("no location for",e),e.source_;const i=isNaN(Number(e.source_))?e.source_:Number(e.source_);if(r===-1)return it(i);const[a,o]=Da(t,e,r);return it(i).withLoc(a,o)}case"stretch":return s(e.source_).slow(s(e.arguments_.amount));default:return console.warn(`node type "${e.type_}" not implemented -> returning silence`),Ge}}const Da=(e,t,n=0)=>{const{start:r,end:s}=t.location_,i=e==null?void 0:e.split("").slice(r.offset,s.offset).join(""),[a=0,o=0]=i?i.split(t.source_).map(u=>u.split("").filter(c=>c===" ").length):[];return[r.offset+a+n,s.offset-o+n]},cs=(e,t=0,n=e)=>{try{return Cm(e)}catch(r){const s=[r.location.start.offset+t,r.location.end.offset+t],i=n.slice(0,s[0]).split(`
`).length;throw new Error(`[mini] parse error at line ${i}: ${r.message}`)}},Am=(e,t,n)=>{const r=cs(e,t,n);let s=[];return Tr(r,e,i=>{i.type_==="atom"&&s.push(i)},-1),s},xa=(e,t=0,n)=>Am(e,t,n).map(r=>Da(e,r,t)),Fa=(...e)=>{const t=e.map(n=>{const r=`"${n}"`,s=cs(r);return Tr(s,r)});return rn(...t)},M3=(e,t)=>{const n=`"${e}"`,r=cs(n);return Tr(r,n,null,t)},P3=e=>{const t=cs(e);return Tr(t,e)};function v3(e){return typeof e=="string"?Fa(e):J(e)}function Dm(){Au(Fa)}const LA=Object.freeze(Object.defineProperty({__proto__:null,StartRules:y3,SyntaxError:pr,getLeafLocation:Da,getLeafLocations:xa,getLeaves:Am,h:P3,m:M3,mini:Fa,mini2ast:cs,miniAllStrings:Dm,minify:v3,parse:Cm,patternifyAST:Tr},Symbol.toStringTag,{value:"Module"}));var RA=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],C3=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],_A="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",A3="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",ho={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},mo="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",IA={5:mo,"5module":mo+" export import",6:mo+" const class extends export import super"},NA=/^in(stanceof)?$/,zA=new RegExp("["+A3+"]"),YA=new RegExp("["+A3+_A+"]");function _o(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Un(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&zA.test(String.fromCharCode(e)):t===!1?!1:_o(e,C3)}function ss(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&YA.test(String.fromCharCode(e)):t===!1?!1:_o(e,C3)||_o(e,RA)}var Ze=function(e,t){t===void 0&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function Jt(e,t){return new Ze(e,{beforeExpr:!0,binop:t})}var Ut={beforeExpr:!0},Tt={startsExpr:!0},xm={};function we(e,t){return t===void 0&&(t={}),t.keyword=e,xm[e]=new Ze(e,t)}var v={num:new Ze("num",Tt),regexp:new Ze("regexp",Tt),string:new Ze("string",Tt),name:new Ze("name",Tt),privateId:new Ze("privateId",Tt),eof:new Ze("eof"),bracketL:new Ze("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ze("]"),braceL:new Ze("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ze("}"),parenL:new Ze("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ze(")"),comma:new Ze(",",Ut),semi:new Ze(";",Ut),colon:new Ze(":",Ut),dot:new Ze("."),question:new Ze("?",Ut),questionDot:new Ze("?."),arrow:new Ze("=>",Ut),template:new Ze("template"),invalidTemplate:new Ze("invalidTemplate"),ellipsis:new Ze("...",Ut),backQuote:new Ze("`",Tt),dollarBraceL:new Ze("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ze("=",{beforeExpr:!0,isAssign:!0}),assign:new Ze("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ze("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ze("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Jt("||",1),logicalAND:Jt("&&",2),bitwiseOR:Jt("|",3),bitwiseXOR:Jt("^",4),bitwiseAND:Jt("&",5),equality:Jt("==/!=/===/!==",6),relational:Jt("</>/<=/>=",7),bitShift:Jt("<</>>/>>>",8),plusMin:new Ze("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Jt("%",10),star:Jt("*",10),slash:Jt("/",10),starstar:new Ze("**",{beforeExpr:!0}),coalesce:Jt("??",1),_break:we("break"),_case:we("case",Ut),_catch:we("catch"),_continue:we("continue"),_debugger:we("debugger"),_default:we("default",Ut),_do:we("do",{isLoop:!0,beforeExpr:!0}),_else:we("else",Ut),_finally:we("finally"),_for:we("for",{isLoop:!0}),_function:we("function",Tt),_if:we("if"),_return:we("return",Ut),_switch:we("switch"),_throw:we("throw",Ut),_try:we("try"),_var:we("var"),_const:we("const"),_while:we("while",{isLoop:!0}),_with:we("with"),_new:we("new",{beforeExpr:!0,startsExpr:!0}),_this:we("this",Tt),_super:we("super",Tt),_class:we("class",Tt),_extends:we("extends",Ut),_export:we("export"),_import:we("import",Tt),_null:we("null",Tt),_true:we("true",Tt),_false:we("false",Tt),_in:we("in",{beforeExpr:!0,binop:7}),_instanceof:we("instanceof",{beforeExpr:!0,binop:7}),_typeof:we("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:we("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:we("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},sn=/\r\n?|\n|\u2028|\u2029/,HA=new RegExp(sn.source,"g");function ls(e){return e===10||e===13||e===8232||e===8233}function D3(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var s=e.charCodeAt(r);if(ls(s))return r<n-1&&s===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var x3=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,$t=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,F3=Object.prototype,KA=F3.hasOwnProperty,OA=F3.toString,ps=Object.hasOwn||function(e,t){return KA.call(e,t)},J1=Array.isArray||function(e){return OA.call(e)==="[object Array]"},U1=Object.create(null);function cr(e){return U1[e]||(U1[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function qn(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var jA=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Hs=function(e,t){this.line=e,this.column=t};Hs.prototype.offset=function(e){return new Hs(this.line,this.column+e)};var wa=function(e,t,n){this.start=t,this.end=n,e.sourceFile!==null&&(this.source=e.sourceFile)};function w3(e,t){for(var n=1,r=0;;){var s=D3(e,r,t);if(s<0)return new Hs(n,t-r);++n,r=s}}var Io={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},q1=!1;function JA(e){var t={};for(var n in Io)t[n]=e&&ps(e,n)?e[n]:Io[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!q1&&typeof console=="object"&&console.warn&&(q1=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),J1(t.onToken)){var r=t.onToken;t.onToken=function(s){return r.push(s)}}return J1(t.onComment)&&(t.onComment=UA(t,t.onComment)),t}function UA(e,t){return function(n,r,s,i,a,o){var u={type:n?"Block":"Line",value:r,start:s,end:i};e.locations&&(u.loc=new wa(this,a,o)),e.ranges&&(u.range=[s,i]),t.push(u)}}var Ks=1,hs=2,Fm=4,E3=8,S3=16,B3=32,wm=64,Z3=128,oi=256,Em=Ks|hs|oi;function Sm(e,t){return hs|(e?Fm:0)|(t?E3:0)}var Ri=0,Bm=1,tr=2,k3=3,V3=4,X3=5,lt=function(e,t,n){this.options=e=JA(e),this.sourceFile=e.sourceFile,this.keywords=cr(IA[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var r="";e.allowReserved!==!0&&(r=ho[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(r+=" await")),this.reservedWords=cr(r);var s=(r?r+" ":"")+ho.strict;this.reservedWordsStrict=cr(s),this.reservedWordsStrictBind=cr(s+" "+ho.strictBind),this.input=String(t),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(sn).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=v.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Ks),this.regexpState=null,this.privateNameStack=[]},Ln={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};lt.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};Ln.inFunction.get=function(){return(this.currentVarScope().flags&hs)>0};Ln.inGenerator.get=function(){return(this.currentVarScope().flags&E3)>0&&!this.currentVarScope().inClassFieldInit};Ln.inAsync.get=function(){return(this.currentVarScope().flags&Fm)>0&&!this.currentVarScope().inClassFieldInit};Ln.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&oi)return!1;if(t.flags&hs)return(t.flags&Fm)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Ln.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&wm)>0||n||this.options.allowSuperOutsideMethod};Ln.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Z3)>0};Ln.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Ln.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(hs|oi))>0||n};Ln.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&oi)>0};lt.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this,r=0;r<e.length;r++)n=e[r](n);return n};lt.parse=function(e,t){return new this(t,e).parse()};lt.parseExpressionAt=function(e,t,n){var r=new this(n,e,t);return r.nextToken(),r.parseExpression()};lt.tokenizer=function(e,t){return new this(t,e)};Object.defineProperties(lt.prototype,Ln);var Xt=lt.prototype,qA=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Xt.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){$t.lastIndex=e,e+=$t.exec(this.input)[0].length;var t=qA.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){$t.lastIndex=e+t[0].length;var n=$t.exec(this.input),r=n.index+n[0].length,s=this.input.charAt(r);return s===";"||s==="}"||sn.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||s==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,$t.lastIndex=e,e+=$t.exec(this.input)[0].length,this.input[e]===";"&&e++}};Xt.eat=function(e){return this.type===e?(this.next(),!0):!1};Xt.isContextual=function(e){return this.type===v.name&&this.value===e&&!this.containsEsc};Xt.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Xt.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Xt.canInsertSemicolon=function(){return this.type===v.eof||this.type===v.braceR||sn.test(this.input.slice(this.lastTokEnd,this.start))};Xt.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Xt.semicolon=function(){!this.eat(v.semi)&&!this.insertSemicolon()&&this.unexpected()};Xt.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Xt.expect=function(e){this.eat(e)||this.unexpected()};Xt.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Ea=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Xt.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Xt.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Xt.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Xt.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var ae=lt.prototype;ae.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==v.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,s=Object.keys(this.undefinedExports);r<s.length;r+=1){var i=s[r];this.raiseRecoverable(this.undefinedExports[i].start,"Export '"+i+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Zm={kind:"loop"},QA={kind:"switch"};ae.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;$t.lastIndex=this.pos;var t=$t.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Un(r,!0)){for(var s=n+1;ss(r=this.input.charCodeAt(s),!0);)++s;if(r===92||r>55295&&r<56320)return!0;var i=this.input.slice(n,s);if(!NA.test(i))return!0}return!1};ae.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;$t.lastIndex=this.pos;var e=$t.exec(this.input),t=this.pos+e[0].length,n;return!sn.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(ss(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};ae.parseStatement=function(e,t,n){var r=this.type,s=this.startNode(),i;switch(this.isLet(e)&&(r=v._var,i="let"),r){case v._break:case v._continue:return this.parseBreakContinueStatement(s,r.keyword);case v._debugger:return this.parseDebuggerStatement(s);case v._do:return this.parseDoStatement(s);case v._for:return this.parseForStatement(s);case v._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case v._class:return e&&this.unexpected(),this.parseClass(s,!0);case v._if:return this.parseIfStatement(s);case v._return:return this.parseReturnStatement(s);case v._switch:return this.parseSwitchStatement(s);case v._throw:return this.parseThrowStatement(s);case v._try:return this.parseTryStatement(s);case v._const:case v._var:return i=i||this.value,e&&i!=="var"&&this.unexpected(),this.parseVarStatement(s,i);case v._while:return this.parseWhileStatement(s);case v._with:return this.parseWithStatement(s);case v.braceL:return this.parseBlock(!0,s);case v.semi:return this.parseEmptyStatement(s);case v._export:case v._import:if(this.options.ecmaVersion>10&&r===v._import){$t.lastIndex=this.pos;var a=$t.exec(this.input),o=this.pos+a[0].length,u=this.input.charCodeAt(o);if(u===40||u===46)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===v._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var c=this.value,p=this.parseExpression();return r===v.name&&p.type==="Identifier"&&this.eat(v.colon)?this.parseLabeledStatement(s,c,p,e):this.parseExpressionStatement(s,p)}};ae.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(v.semi)||this.insertSemicolon()?e.label=null:this.type!==v.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var s=this.labels[r];if((e.label==null||s.name===e.label.name)&&(s.kind!=null&&(n||s.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};ae.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};ae.parseDoStatement=function(e){return this.next(),this.labels.push(Zm),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(v._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(v.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};ae.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Zm),this.enterScope(0),this.expect(v.parenL),this.type===v.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===v._var||this.type===v._const||n){var r=this.startNode(),s=n?"let":this.value;return this.next(),this.parseVar(r,!0,s),this.finishNode(r,"VariableDeclaration"),(this.type===v._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===v._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var i=this.isContextual("let"),a=!1,o=this.containsEsc,u=new Ea,c=this.start,p=t>-1?this.parseExprSubscripts(u,"await"):this.parseExpression(!0,u);return this.type===v._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===v._in&&this.unexpected(t),e.await=!0):a&&this.options.ecmaVersion>=8&&(p.start===c&&!o&&p.type==="Identifier"&&p.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),i&&a&&this.raise(p.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(p,!1,u),this.checkLValPattern(p),this.parseForIn(e,p)):(this.checkExpressionErrors(u,!0),t>-1&&this.unexpected(t),this.parseFor(e,p))};ae.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Ts|(n?0:No),!1,t)};ae.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(v._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};ae.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(v.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};ae.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(v.braceL),this.labels.push(QA),this.enterScope(0);for(var t,n=!1;this.type!==v.braceR;)if(this.type===v._case||this.type===v._default){var r=this.type===v._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(v.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};ae.parseThrowStatement=function(e){return this.next(),sn.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var $A=[];ae.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?B3:0),this.checkLValPattern(e,t?V3:tr),this.expect(v.parenR),e};ae.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===v._catch){var t=this.startNode();this.next(),this.eat(v.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(v._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};ae.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};ae.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Zm),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};ae.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};ae.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};ae.parseLabeledStatement=function(e,t,n,r){for(var s=0,i=this.labels;s<i.length;s+=1){var a=i[s];a.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===v._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var c=this.labels[u];if(c.statementStart===e.start)c.statementStart=this.start,c.kind=o;else break}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};ae.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};ae.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(v.braceL),e&&this.enterScope(0);this.type!==v.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};ae.parseFor=function(e,t){return e.init=t,this.expect(v.semi),e.test=this.type===v.semi?null:this.parseExpression(),this.expect(v.semi),e.update=this.type===v.parenR?null:this.parseExpression(),this.expect(v.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};ae.parseForIn=function(e,t){var n=this.type===v._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(v.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};ae.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var s=this.startNode();if(this.parseVarId(s,n),this.eat(v.eq)?s.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===v._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&s.id.type!=="Identifier"&&!(t&&(this.type===v._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):s.init=null,e.declarations.push(this.finishNode(s,"VariableDeclarator")),!this.eat(v.comma))break}return e};ae.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Bm:tr,!1)};var Ts=1,No=2,G3=4;ae.parseFunction=function(e,t,n,r,s){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===v.star&&t&No&&this.unexpected(),e.generator=this.eat(v.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Ts&&(e.id=t&G3&&this.type!==v.name?null:this.parseIdent(),e.id&&!(t&No)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Bm:tr:k3));var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Sm(e.async,e.generator)),t&Ts||(e.id=this.type===v.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,s),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,t&Ts?"FunctionDeclaration":"FunctionExpression")};ae.parseFunctionParams=function(e){this.expect(v.parenL),e.params=this.parseBindingList(v.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};ae.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),s=this.startNode(),i=!1;for(s.body=[],this.expect(v.braceL);this.type!==v.braceR;){var a=this.parseClassElement(e.superClass!==null);a&&(s.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(i&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),i=!0):a.key&&a.key.type==="PrivateIdentifier"&&eD(r,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(s,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};ae.parseClassElement=function(e){if(this.eat(v.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",s=!1,i=!1,a="method",o=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(v.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===v.star?o=!0:r="static"}if(n.static=o,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===v.star)&&!this.canInsertSemicolon()?i=!0:r="async"),!r&&(t>=9||!i)&&this.eat(v.star)&&(s=!0),!r&&!i&&!s){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===v.parenL||a!=="method"||s||i){var c=!n.static&&_i(n,"constructor"),p=c&&e;c&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":a,this.parseClassMethod(n,s,i,p)}else this.parseClassField(n);return n};ae.isClassElementNameStart=function(){return this.type===v.name||this.type===v.privateId||this.type===v.num||this.type===v.string||this.type===v.bracketL||this.type.keyword};ae.parseClassElementName=function(e){this.type===v.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};ae.parseClassMethod=function(e,t,n,r){var s=e.key;e.kind==="constructor"?(t&&this.raise(s.start,"Constructor can't be a generator"),n&&this.raise(s.start,"Constructor can't be an async method")):e.static&&_i(e,"prototype")&&this.raise(s.start,"Classes may not have a static property named prototype");var i=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&i.params.length!==0&&this.raiseRecoverable(i.start,"getter should have no params"),e.kind==="set"&&i.params.length!==1&&this.raiseRecoverable(i.start,"setter should have exactly one param"),e.kind==="set"&&i.params[0].type==="RestElement"&&this.raiseRecoverable(i.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};ae.parseClassField=function(e){if(_i(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&_i(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(v.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};ae.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(oi|wm);this.type!==v.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};ae.parseClassId=function(e,t){this.type===v.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,tr,!1)):(t===!0&&this.unexpected(),e.id=null)};ae.parseClassSuper=function(e){e.superClass=this.eat(v._extends)?this.parseExprSubscripts(null,!1):null};ae.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};ae.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,s=r===0?null:this.privateNameStack[r-1],i=0;i<n.length;++i){var a=n[i];ps(t,a.name)||(s?s.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function eD(e,t){var n=t.key.name,r=e[n],s="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(s=(t.static?"s":"i")+t.kind),r==="iget"&&s==="iset"||r==="iset"&&s==="iget"||r==="sget"&&s==="sset"||r==="sset"&&s==="sget"?(e[n]="true",!1):r?!0:(e[n]=s,!1)}function _i(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}ae.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==v.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};ae.parseExport=function(e,t){if(this.next(),this.eat(v.star))return this.parseExportAllDeclaration(e,t);if(this.eat(v._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==v.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var s=r[n];this.checkUnreserved(s.local),this.checkLocalExport(s.local),s.local.type==="Literal"&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};ae.parseExportDeclaration=function(e){return this.parseStatement(null)};ae.parseExportDefaultDeclaration=function(){var e;if(this.type===v._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,Ts|G3,!1,e)}else if(this.type===v._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};ae.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),ps(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};ae.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,s=t.properties;r<s.length;r+=1){var i=s[r];this.checkPatternExport(e,i)}else if(n==="ArrayPattern")for(var a=0,o=t.elements;a<o.length;a+=1){var u=o[a];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};ae.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var s=r[n];this.checkPatternExport(e,s.id)}};ae.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};ae.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};ae.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(v.braceL);!this.eat(v.braceR);){if(n)n=!1;else if(this.expect(v.comma),this.afterTrailingComma(v.braceR))break;t.push(this.parseExportSpecifier(e))}return t};ae.parseImport=function(e){return this.next(),this.type===v.string?(e.specifiers=$A,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===v.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};ae.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,tr),this.finishNode(e,"ImportSpecifier")};ae.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,tr),this.finishNode(e,"ImportDefaultSpecifier")};ae.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,tr),this.finishNode(e,"ImportNamespaceSpecifier")};ae.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===v.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(v.comma)))return e;if(this.type===v.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(v.braceL);!this.eat(v.braceR);){if(t)t=!1;else if(this.expect(v.comma),this.afterTrailingComma(v.braceR))break;e.push(this.parseImportSpecifier())}return e};ae.parseWithClause=function(){var e=[];if(!this.eat(v._with))return e;this.expect(v.braceL);for(var t={},n=!0;!this.eat(v.braceR);){if(n)n=!1;else if(this.expect(v.comma),this.afterTrailingComma(v.braceR))break;var r=this.parseImportAttribute(),s=r.key.type==="Identifier"?r.key.name:r.key.value;ps(t,s)&&this.raiseRecoverable(r.key.start,"Duplicate attribute key '"+s+"'"),t[s]=!0,e.push(r)}return e};ae.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===v.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(v.colon),this.type!==v.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")};ae.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===v.string){var e=this.parseLiteral(this.value);return jA.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};ae.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};ae.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var an=lt.prototype;an.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,s=e.properties;r<s.length;r+=1){var i=s[r];this.toAssignable(i,t),i.type==="RestElement"&&(i.argument.type==="ArrayPattern"||i.argument.type==="ObjectPattern")&&this.raise(i.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};an.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var s=e[r];s&&this.toAssignable(s,t)}if(n){var i=e[n-1];this.options.ecmaVersion===6&&t&&i&&i.type==="RestElement"&&i.argument.type!=="Identifier"&&this.unexpected(i.argument.start)}return e};an.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};an.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==v.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};an.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case v.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(v.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case v.braceL:return this.parseObj(!0)}return this.parseIdent()};an.parseBindingList=function(e,t,n,r){for(var s=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(v.comma),t&&this.type===v.comma)s.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===v.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),s.push(a),this.type===v.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else s.push(this.parseAssignableListItem(r))}return s};an.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};an.parseBindingListItem=function(e){return e};an.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(v.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};an.checkLValSimple=function(e,t,n){t===void 0&&(t=Ri);var r=t!==Ri;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===tr&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(ps(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==X3&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};an.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Ri),e.type){case"ObjectPattern":for(var r=0,s=e.properties;r<s.length;r+=1){var i=s[r];this.checkLValInnerPattern(i,t,n)}break;case"ArrayPattern":for(var a=0,o=e.elements;a<o.length;a+=1){var u=o[a];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};an.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Ri),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var dn=function(e,t,n,r,s){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!s},Qe={b_stat:new dn("{",!1),b_expr:new dn("{",!0),b_tmpl:new dn("${",!1),p_stat:new dn("(",!1),p_expr:new dn("(",!0),q_tmpl:new dn("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new dn("function",!1),f_expr:new dn("function",!0),f_expr_gen:new dn("function",!0,!1,null,!0),f_gen:new dn("function",!1,!1,null,!0)},ds=lt.prototype;ds.initialContext=function(){return[Qe.b_stat]};ds.curContext=function(){return this.context[this.context.length-1]};ds.braceIsBlock=function(e){var t=this.curContext();return t===Qe.f_expr||t===Qe.f_stat?!0:e===v.colon&&(t===Qe.b_stat||t===Qe.b_expr)?!t.isExpr:e===v._return||e===v.name&&this.exprAllowed?sn.test(this.input.slice(this.lastTokEnd,this.start)):e===v._else||e===v.semi||e===v.eof||e===v.parenR||e===v.arrow?!0:e===v.braceL?t===Qe.b_stat:e===v._var||e===v._const||e===v.name?!1:!this.exprAllowed};ds.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};ds.updateContext=function(e){var t,n=this.type;n.keyword&&e===v.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};ds.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};v.parenR.updateContext=v.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Qe.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};v.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Qe.b_stat:Qe.b_expr),this.exprAllowed=!0};v.dollarBraceL.updateContext=function(){this.context.push(Qe.b_tmpl),this.exprAllowed=!0};v.parenL.updateContext=function(e){var t=e===v._if||e===v._for||e===v._with||e===v._while;this.context.push(t?Qe.p_stat:Qe.p_expr),this.exprAllowed=!0};v.incDec.updateContext=function(){};v._function.updateContext=v._class.updateContext=function(e){e.beforeExpr&&e!==v._else&&!(e===v.semi&&this.curContext()!==Qe.p_stat)&&!(e===v._return&&sn.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===v.colon||e===v.braceL)&&this.curContext()===Qe.b_stat)?this.context.push(Qe.f_expr):this.context.push(Qe.f_stat),this.exprAllowed=!1};v.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};v.backQuote.updateContext=function(){this.curContext()===Qe.q_tmpl?this.context.pop():this.context.push(Qe.q_tmpl),this.exprAllowed=!1};v.star.updateContext=function(e){if(e===v._function){var t=this.context.length-1;this.context[t]===Qe.f_expr?this.context[t]=Qe.f_expr_gen:this.context[t]=Qe.f_gen}this.exprAllowed=!0};v.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==v.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var fe=lt.prototype;fe.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,s;switch(r.type){case"Identifier":s=r.name;break;case"Literal":s=String(r.value);break;default:return}var i=e.kind;if(this.options.ecmaVersion>=6){s==="__proto__"&&i==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}s="$"+s;var a=t[s];if(a){var o;i==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[i],o&&this.raiseRecoverable(r.start,"Redefinition of property")}else a=t[s]={init:!1,get:!1,set:!1};a[i]=!0}};fe.parseExpression=function(e,t){var n=this.start,r=this.startLoc,s=this.parseMaybeAssign(e,t);if(this.type===v.comma){var i=this.startNodeAt(n,r);for(i.expressions=[s];this.eat(v.comma);)i.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(i,"SequenceExpression")}return s};fe.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,s=-1,i=-1,a=-1;t?(s=t.parenthesizedAssign,i=t.trailingComma,a=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Ea,r=!0);var o=this.start,u=this.startLoc;(this.type===v.parenL||this.type===v.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var c=this.parseMaybeConditional(e,t);if(n&&(c=n.call(this,c,o,u)),this.type.isAssign){var p=this.startNodeAt(o,u);return p.operator=this.value,this.type===v.eq&&(c=this.toAssignable(c,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=c.start&&(t.shorthandAssign=-1),this.type===v.eq?this.checkLValPattern(c):this.checkLValSimple(c),p.left=c,this.next(),p.right=this.parseMaybeAssign(e),a>-1&&(t.doubleProto=a),this.finishNode(p,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return s>-1&&(t.parenthesizedAssign=s),i>-1&&(t.trailingComma=i),c};fe.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,s=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return s;if(this.eat(v.question)){var i=this.startNodeAt(n,r);return i.test=s,i.consequent=this.parseMaybeAssign(),this.expect(v.colon),i.alternate=this.parseMaybeAssign(e),this.finishNode(i,"ConditionalExpression")}return s};fe.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,s=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||s.start===n&&s.type==="ArrowFunctionExpression"?s:this.parseExprOp(s,n,r,-1,e)};fe.parseExprOp=function(e,t,n,r,s){var i=this.type.binop;if(i!=null&&(!s||this.type!==v._in)&&i>r){var a=this.type===v.logicalOR||this.type===v.logicalAND,o=this.type===v.coalesce;o&&(i=v.logicalAND.binop);var u=this.value;this.next();var c=this.start,p=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,s),c,p,i,s),m=this.buildBinary(t,n,e,d,u,a||o);return(a&&this.type===v.coalesce||o&&(this.type===v.logicalOR||this.type===v.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(m,t,n,r,s)}return e};fe.buildBinary=function(e,t,n,r,s,i){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(e,t);return a.left=n,a.operator=s,a.right=r,this.finishNode(a,i?"LogicalExpression":"BinaryExpression")};fe.parseMaybeUnary=function(e,t,n,r){var s=this.start,i=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(r),t=!0;else if(this.type.prefix){var o=this.startNode(),u=this.type===v.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&T3(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&zo(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):t=!0,a=this.finishNode(o,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===v.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==v._in&&this.unexpected();else{if(a=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(s,i);c.operator=this.value,c.prefix=!1,c.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(c,"UpdateExpression")}}if(!n&&this.eat(v.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(s,i,a,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return a};function T3(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&T3(e.expression)}function zo(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&zo(e.expression)||e.type==="ParenthesizedExpression"&&zo(e.expression)}fe.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,s=this.parseExprAtom(e,t);if(s.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return s;var i=this.parseSubscripts(s,n,r,!1,t);return e&&i.type==="MemberExpression"&&(e.parenthesizedAssign>=i.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=i.start&&(e.parenthesizedBind=-1),e.trailingComma>=i.start&&(e.trailingComma=-1)),i};fe.parseSubscripts=function(e,t,n,r,s){for(var i=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,a=!1;;){var o=this.parseSubscript(e,t,n,r,i,a,s);if(o.optional&&(a=!0),o===e||o.type==="ArrowFunctionExpression"){if(a){var u=this.startNodeAt(t,n);u.expression=o,o=this.finishNode(u,"ChainExpression")}return o}e=o}};fe.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(v.arrow)};fe.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};fe.parseSubscript=function(e,t,n,r,s,i,a){var o=this.options.ecmaVersion>=11,u=o&&this.eat(v.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(v.bracketL);if(c||u&&this.type!==v.parenL&&this.type!==v.backQuote||this.eat(v.dot)){var p=this.startNodeAt(t,n);p.object=e,c?(p.property=this.parseExpression(),this.expect(v.bracketR)):this.type===v.privateId&&e.type!=="Super"?p.property=this.parsePrivateIdent():p.property=this.parseIdent(this.options.allowReserved!=="never"),p.computed=!!c,o&&(p.optional=u),e=this.finishNode(p,"MemberExpression")}else if(!r&&this.eat(v.parenL)){var d=new Ea,m=this.yieldPos,f=this.awaitPos,P=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var y=this.parseExprList(v.parenR,this.options.ecmaVersion>=8,!1,d);if(s&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=m,this.awaitPos=f,this.awaitIdentPos=P,this.parseSubscriptAsyncArrow(t,n,y,a);this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=f||this.awaitPos,this.awaitIdentPos=P||this.awaitIdentPos;var A=this.startNodeAt(t,n);A.callee=e,A.arguments=y,o&&(A.optional=u),e=this.finishNode(A,"CallExpression")}else if(this.type===v.backQuote){(u||i)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var F=this.startNodeAt(t,n);F.tag=e,F.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(F,"TaggedTemplateExpression")}return e};fe.parseExprAtom=function(e,t,n){this.type===v.slash&&this.readRegexp();var r,s=this.potentialArrowAt===this.start;switch(this.type){case v._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===v.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==v.dot&&this.type!==v.bracketL&&this.type!==v.parenL&&this.unexpected(),this.finishNode(r,"Super");case v._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case v.name:var i=this.start,a=this.startLoc,o=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(v._function))return this.overrideContext(Qe.f_expr),this.parseFunction(this.startNodeAt(i,a),0,!1,!0,t);if(s&&!this.canInsertSemicolon()){if(this.eat(v.arrow))return this.parseArrowExpression(this.startNodeAt(i,a),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===v.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(v.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,a),[u],!0,t)}return u;case v.regexp:var c=this.value;return r=this.parseLiteral(c.value),r.regex={pattern:c.pattern,flags:c.flags},r;case v.num:case v.string:return this.parseLiteral(this.value);case v._null:case v._true:case v._false:return r=this.startNode(),r.value=this.type===v._null?null:this.type===v._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case v.parenL:var p=this.start,d=this.parseParenAndDistinguishExpression(s,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=p),e.parenthesizedBind<0&&(e.parenthesizedBind=p)),d;case v.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(v.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case v.braceL:return this.overrideContext(Qe.b_expr),this.parseObj(!1,e);case v._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case v._class:return this.parseClass(this.startNode(),!1);case v._new:return this.parseNew();case v.backQuote:return this.parseTemplate();case v._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};fe.parseExprAtomDefault=function(){this.unexpected()};fe.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===v.parenL&&!e)return this.parseDynamicImport(t);if(this.type===v.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};fe.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(v.parenR)?e.options=null:(this.expect(v.comma),this.afterTrailingComma(v.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(v.parenR)||(this.expect(v.comma),this.afterTrailingComma(v.parenR)||this.unexpected())));else if(!this.eat(v.parenR)){var t=this.start;this.eat(v.comma)&&this.eat(v.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};fe.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};fe.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};fe.parseParenExpression=function(){this.expect(v.parenL);var e=this.parseExpression();return this.expect(v.parenR),e};fe.shouldParseArrow=function(e){return!this.canInsertSemicolon()};fe.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,s,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,u=[],c=!0,p=!1,d=new Ea,m=this.yieldPos,f=this.awaitPos,P;for(this.yieldPos=0,this.awaitPos=0;this.type!==v.parenR;)if(c?c=!1:this.expect(v.comma),i&&this.afterTrailingComma(v.parenR,!0)){p=!0;break}else if(this.type===v.ellipsis){P=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===v.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var y=this.lastTokEnd,A=this.lastTokEndLoc;if(this.expect(v.parenR),e&&this.shouldParseArrow(u)&&this.eat(v.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=m,this.awaitPos=f,this.parseParenArrowList(n,r,u,t);(!u.length||p)&&this.unexpected(this.lastTokStart),P&&this.unexpected(P),this.checkExpressionErrors(d,!0),this.yieldPos=m||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?(s=this.startNodeAt(a,o),s.expressions=u,this.finishNodeAt(s,"SequenceExpression",y,A)):s=u[0]}else s=this.parseParenExpression();if(this.options.preserveParens){var F=this.startNodeAt(n,r);return F.expression=s,this.finishNode(F,"ParenthesizedExpression")}else return s};fe.parseParenItem=function(e){return e};fe.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var tD=[];fe.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===v.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,s=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,s,!0,!1),this.eat(v.parenL)?e.arguments=this.parseExprList(v.parenR,this.options.ecmaVersion>=8,!1):e.arguments=tD,this.finishNode(e,"NewExpression")};fe.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===v.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===v.backQuote,this.finishNode(n,"TemplateElement")};fe.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===v.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(v.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(v.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};fe.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===v.name||this.type===v.num||this.type===v.string||this.type===v.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===v.star)&&!sn.test(this.input.slice(this.lastTokEnd,this.start))};fe.parseObj=function(e,t){var n=this.startNode(),r=!0,s={};for(n.properties=[],this.next();!this.eat(v.braceR);){if(r)r=!1;else if(this.expect(v.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(v.braceR))break;var i=this.parseProperty(e,t);e||this.checkPropClash(i,s,t),n.properties.push(i)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};fe.parseProperty=function(e,t){var n=this.startNode(),r,s,i,a;if(this.options.ecmaVersion>=9&&this.eat(v.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===v.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===v.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(i=this.start,a=this.startLoc),e||(r=this.eat(v.star)));var o=this.containsEsc;return this.parsePropertyName(n),!e&&!o&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(s=!0,r=this.options.ecmaVersion>=9&&this.eat(v.star),this.parsePropertyName(n)):s=!1,this.parsePropertyValue(n,e,r,s,i,a,t,o),this.finishNode(n,"Property")};fe.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};fe.parsePropertyValue=function(e,t,n,r,s,i,a,o){(n||r)&&this.type===v.colon&&this.unexpected(),this.eat(v.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init"):this.options.ecmaVersion>=6&&this.type===v.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!o&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==v.comma&&this.type!==v.braceR&&this.type!==v.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=s),e.kind="init",t?e.value=this.parseMaybeDefault(s,i,this.copyNode(e.key)):this.type===v.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(s,i,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};fe.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(v.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(v.bracketR),e.key;e.computed=!1}return e.key=this.type===v.num||this.type===v.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};fe.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};fe.parseMethod=function(e,t,n){var r=this.startNode(),s=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Sm(t,r.generator)|wm|(n?Z3:0)),this.expect(v.parenL),r.params=this.parseBindingList(v.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=s,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")};fe.parseArrowExpression=function(e,t,n,r){var s=this.yieldPos,i=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Sm(n,!1)|S3),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=s,this.awaitPos=i,this.awaitIdentPos=a,this.finishNode(e,"ArrowFunctionExpression")};fe.parseFunctionBody=function(e,t,n,r){var s=t&&this.type!==v.braceL,i=this.strict,a=!1;if(s)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!i||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!i&&!a&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,X3),e.body=this.parseBlock(!1,void 0,a&&!i),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};fe.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};fe.checkParams=function(e,t){for(var n=Object.create(null),r=0,s=e.params;r<s.length;r+=1){var i=s[r];this.checkLValInnerPattern(i,Bm,t?null:n)}};fe.parseExprList=function(e,t,n,r){for(var s=[],i=!0;!this.eat(e);){if(i)i=!1;else if(this.expect(v.comma),t&&this.afterTrailingComma(e))break;var a=void 0;n&&this.type===v.comma?a=null:this.type===v.ellipsis?(a=this.parseSpread(r),r&&this.type===v.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),s.push(a)}return s};fe.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var s=this.strict?this.reservedWordsStrict:this.reservedWords;s.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};fe.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};fe.parseIdentNode=function(){var e=this.startNode();return this.type===v.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=v.name):this.unexpected(),e};fe.parsePrivateIdent=function(){var e=this.startNode();return this.type===v.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};fe.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===v.semi||this.canInsertSemicolon()||this.type!==v.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(v.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};fe.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Ii=lt.prototype;Ii.raise=function(e,t){var n=w3(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};Ii.raiseRecoverable=Ii.raise;Ii.curPosition=function(){if(this.options.locations)return new Hs(this.curLine,this.pos-this.lineStart)};var gr=lt.prototype,nD=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};gr.enterScope=function(e){this.scopeStack.push(new nD(e))};gr.exitScope=function(){this.scopeStack.pop()};gr.treatFunctionsAsVarInScope=function(e){return e.flags&hs||!this.inModule&&e.flags&Ks};gr.declareName=function(e,t,n){var r=!1;if(t===tr){var s=this.currentScope();r=s.lexical.indexOf(e)>-1||s.functions.indexOf(e)>-1||s.var.indexOf(e)>-1,s.lexical.push(e),this.inModule&&s.flags&Ks&&delete this.undefinedExports[e]}else if(t===V3){var i=this.currentScope();i.lexical.push(e)}else if(t===k3){var a=this.currentScope();this.treatFunctionsAsVar?r=a.lexical.indexOf(e)>-1:r=a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var u=this.scopeStack[o];if(u.lexical.indexOf(e)>-1&&!(u.flags&B3&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&Ks&&delete this.undefinedExports[e],u.flags&Em)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};gr.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};gr.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};gr.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Em)return t}};gr.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Em&&!(t.flags&S3))return t}};var Sa=function(e,t,n){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new wa(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},ui=lt.prototype;ui.startNode=function(){return new Sa(this,this.start,this.startLoc)};ui.startNodeAt=function(e,t){return new Sa(this,e,t)};function W3(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}ui.finishNode=function(e,t){return W3.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};ui.finishNodeAt=function(e,t,n,r){return W3.call(this,e,t,n,r)};ui.copyNode=function(e){var t=new Sa(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var rD="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",L3="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",R3=L3+" Extended_Pictographic",_3=R3,I3=_3+" EBase EComp EMod EPres ExtPict",N3=I3,sD=N3,iD={9:L3,10:R3,11:_3,12:I3,13:N3,14:sD},aD="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",oD={9:"",10:"",11:"",12:"",13:"",14:aD},Q1="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",z3="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Y3=z3+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",H3=Y3+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",K3=H3+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",O3=K3+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",uD=O3+" "+rD,cD={9:z3,10:Y3,11:H3,12:K3,13:O3,14:uD},j3={};function lD(e){var t=j3[e]={binary:cr(iD[e]+" "+Q1),binaryOfStrings:cr(oD[e]),nonBinary:{General_Category:cr(Q1),Script:cr(cD[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var fo=0,$1=[9,10,11,12,13,14];fo<$1.length;fo+=1){var pD=$1[fo];lD(pD)}var ne=lt.prototype,Ni=function(e,t){this.parent=e,this.base=t||this};Ni.prototype.separatedFrom=function(e){for(var t=this;t;t=t.parent)for(var n=e;n;n=n.parent)if(t.base===n.base&&t!==n)return!0;return!1};Ni.prototype.sibling=function(){return new Ni(this.parent,this.base)};var Rn=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=j3[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Rn.prototype.reset=function(e,t,n){var r=n.indexOf("v")!==-1,s=n.indexOf("u")!==-1;this.start=e|0,this.source=t+"",this.flags=n,r&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Rn.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};Rn.prototype.at=function(e,t){t===void 0&&(t=!1);var n=this.source,r=n.length;if(e>=r)return-1;var s=n.charCodeAt(e);if(!(t||this.switchU)||s<=55295||s>=57344||e+1>=r)return s;var i=n.charCodeAt(e+1);return i>=56320&&i<=57343?(s<<10)+i-56613888:s};Rn.prototype.nextIndex=function(e,t){t===void 0&&(t=!1);var n=this.source,r=n.length;if(e>=r)return r;var s=n.charCodeAt(e),i;return!(t||this.switchU)||s<=55295||s>=57344||e+1>=r||(i=n.charCodeAt(e+1))<56320||i>57343?e+1:e+2};Rn.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};Rn.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};Rn.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};Rn.prototype.eat=function(e,t){return t===void 0&&(t=!1),this.current(t)===e?(this.advance(t),!0):!1};Rn.prototype.eatChars=function(e,t){t===void 0&&(t=!1);for(var n=this.pos,r=0,s=e;r<s.length;r+=1){var i=s[r],a=this.at(n,t);if(a===-1||a!==i)return!1;n=this.nextIndex(n,t)}return this.pos=n,!0};ne.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,s=!1,i=0;i<n.length;i++){var a=n.charAt(i);t.indexOf(a)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,i+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),a==="u"&&(r=!0),a==="v"&&(s=!0)}this.options.ecmaVersion>=15&&r&&s&&this.raise(e.start,"Invalid regular expression flag")};function hD(e){for(var t in e)return!0;return!1}ne.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&hD(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};ne.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};ne.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new Ni(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};ne.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};ne.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};ne.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};ne.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};ne.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};ne.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,s=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(s=e.lastIntValue),e.eat(125)))return s!==-1&&s<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};ne.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};ne.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};ne.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(e),r=e.eat(45);if(n||r){for(var s=0;s<n.length;s++){var i=n.charAt(s);n.indexOf(i,s+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(r){var a=this.regexp_eatModifiers(e);!n&&!a&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var o=0;o<a.length;o++){var u=a.charAt(o);(a.indexOf(u,o+1)>-1||n.indexOf(u)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1};ne.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};ne.regexp_eatModifiers=function(e){for(var t="",n=0;(n=e.current())!==-1&&dD(n);)t+=qn(n),e.advance();return t};function dD(e){return e===105||e===109||e===115}ne.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};ne.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};ne.regexp_eatSyntaxCharacter=function(e){var t=e.current();return J3(t)?(e.lastIntValue=t,e.advance(),!0):!1};function J3(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}ne.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!J3(n);)e.advance();return e.pos!==t};ne.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};ne.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,s=n;r<s.length;r+=1){var i=s[r];i.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};ne.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};ne.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=qn(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=qn(e.lastIntValue);return!0}return!1};ne.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),mD(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function mD(e){return Un(e,!0)||e===36||e===95}ne.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),fD(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function fD(e){return ss(e,!0)||e===36||e===95||e===8204||e===8205}ne.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};ne.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};ne.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};ne.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};ne.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};ne.regexp_eatZero=function(e){return e.current()===48&&!Ba(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};ne.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};ne.regexp_eatControlLetter=function(e){var t=e.current();return U3(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function U3(e){return e>=65&&e<=90||e>=97&&e<=122}ne.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(r&&s>=55296&&s<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(a>=56320&&a<=57343)return e.lastIntValue=(s-55296)*1024+(a-56320)+65536,!0}e.pos=i,e.lastIntValue=s}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&gD(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function gD(e){return e>=0&&e<=1114111}ne.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};ne.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var q3=0,Qn=1,tn=2;ne.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(yD(t))return e.lastIntValue=-1,e.advance(),Qn;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===tn&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return q3};function yD(e){return e===100||e===68||e===115||e===83||e===119||e===87}ne.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Qn}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var s=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,s)}return q3};ne.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){ps(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};ne.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Qn;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return tn;e.raise("Invalid property name")};ne.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Q3(t=e.current());)e.lastStringValue+=qn(t),e.advance();return e.lastStringValue!==""};function Q3(e){return U3(e)||e===95}ne.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";bD(t=e.current());)e.lastStringValue+=qn(t),e.advance();return e.lastStringValue!==""};function bD(e){return Q3(e)||Ba(e)}ne.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};ne.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===tn&&e.raise("Negated character class may contain strings"),!0}return!1};ne.regexp_classContents=function(e){return e.current()===93?Qn:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Qn)};ne.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};ne.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||tP(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};ne.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};ne.regexp_classSetExpression=function(e){var t=Qn,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===tn&&(t=tn);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==tn&&(t=Qn);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===tn&&(t=tn)}};ne.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};ne.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Qn:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};ne.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===tn&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var s=this.regexp_eatCharacterClassEscape(e);if(s)return s;e.pos=t}return null};ne.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};ne.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===tn&&(t=tn);return t};ne.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Qn:tn};ne.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&MD(n)||PD(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function MD(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function PD(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}ne.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return vD(t)?(e.lastIntValue=t,e.advance(),!0):!1};function vD(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}ne.regexp_eatClassControlLetter=function(e){var t=e.current();return Ba(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};ne.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};ne.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Ba(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Ba(e){return e>=48&&e<=57}ne.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;$3(n=e.current());)e.lastIntValue=16*e.lastIntValue+eP(n),e.advance();return e.pos!==t};function $3(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function eP(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}ne.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};ne.regexp_eatOctalDigit=function(e){var t=e.current();return tP(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function tP(e){return e>=48&&e<=55}ne.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var s=e.current();if(!$3(s))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+eP(s),e.advance()}return!0};var km=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new wa(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},xe=lt.prototype;xe.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new km(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};xe.getToken=function(){return this.next(),new km(this)};typeof Symbol<"u"&&(xe[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===v.eof,value:t}}}});xe.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(v.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};xe.readToken=function(e){return Un(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};xe.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};xe.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,s=t;(r=D3(this.input,s,this.pos))>-1;)++this.curLine,s=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};xe.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!ls(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};xe.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&x3.test(String.fromCharCode(e)))++this.pos;else break e}}};xe.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};xe.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(v.ellipsis)):(++this.pos,this.finishToken(v.dot))};xe.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(v.assign,2):this.finishOp(v.slash,1)};xe.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?v.star:v.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=v.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(v.assign,n+1):this.finishOp(r,n)};xe.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(v.assign,3)}return this.finishOp(e===124?v.logicalOR:v.logicalAND,2)}return t===61?this.finishOp(v.assign,2):this.finishOp(e===124?v.bitwiseOR:v.bitwiseAND,1)};xe.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(v.assign,2):this.finishOp(v.bitwiseXOR,1)};xe.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||sn.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(v.incDec,2):t===61?this.finishOp(v.assign,2):this.finishOp(v.plusMin,1)};xe.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(v.assign,n+1):this.finishOp(v.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(v.relational,n))};xe.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(v.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(v.arrow)):this.finishOp(e===61?v.eq:v.prefix,1)};xe.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(v.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(v.assign,3)}return this.finishOp(v.coalesce,2)}}return this.finishOp(v.question,1)};xe.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Un(t,!0)||t===92))return this.finishToken(v.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+qn(t)+"'")};xe.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(v.parenL);case 41:return++this.pos,this.finishToken(v.parenR);case 59:return++this.pos,this.finishToken(v.semi);case 44:return++this.pos,this.finishToken(v.comma);case 91:return++this.pos,this.finishToken(v.bracketL);case 93:return++this.pos,this.finishToken(v.bracketR);case 123:return++this.pos,this.finishToken(v.braceL);case 125:return++this.pos,this.finishToken(v.braceR);case 58:return++this.pos,this.finishToken(v.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(v.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(v.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+qn(e)+"'")};xe.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};xe.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(sn.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var s=this.input.slice(n,this.pos);++this.pos;var i=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(i);var o=this.regexpState||(this.regexpState=new Rn(this));o.reset(n,s,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=new RegExp(s,a)}catch{}return this.finishToken(v.regexp,{pattern:s,flags:a,value:u})};xe.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,s=n&&this.input.charCodeAt(this.pos)===48,i=this.pos,a=0,o=0,u=0,c=t??1/0;u<c;++u,++this.pos){var p=this.input.charCodeAt(this.pos),d=void 0;if(r&&p===95){s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=p;continue}if(p>=97?d=p-97+10:p>=65?d=p-65+10:p>=48&&p<=57?d=p-48:d=1/0,d>=e)break;o=p,a=a*e+d}return r&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===i||t!=null&&this.pos-i!==t?null:a};function CD(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function nP(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}xe.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=nP(this.input.slice(t,this.pos)),++this.pos):Un(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(v.num,n)};xe.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var s=nP(this.input.slice(t,this.pos));return++this.pos,Un(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(v.num,s)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Un(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=CD(this.input.slice(t,this.pos),n);return this.finishToken(v.num,i)};xe.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};xe.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(ls(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(v.string,t)};var rP={};xe.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===rP)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};xe.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw rP;this.raise(e,t)};xe.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===v.template||this.type===v.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(v.dollarBraceL)):(++this.pos,this.finishToken(v.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(v.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(ls(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};xe.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(v.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};xe.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return qn(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(r,8);return s>255&&(r=r.slice(0,-1),s=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return ls(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};xe.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};xe.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(ss(s,r))this.pos+=s<=65535?1:2;else if(s===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var i=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?Un:ss)(a,r)||this.invalidStringToken(i,"Invalid Unicode escape"),e+=qn(a),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};xe.readWord=function(){var e=this.readWord1(),t=v.name;return this.keywords.test(e)&&(t=xm[e]),this.finishToken(t,e)};var AD="8.14.0";lt.acorn={Parser:lt,version:AD,defaultOptions:Io,Position:Hs,SourceLocation:wa,getLineInfo:w3,Node:Sa,TokenType:Ze,tokTypes:v,keywordTypes:xm,TokContext:dn,tokContexts:Qe,isIdentifierChar:ss,isIdentifierStart:Un,Token:km,isNewLine:ls,lineBreak:sn,lineBreakG:HA,nonASCIIwhitespace:x3};function DD(e,t){return lt.parse(e,t)}var xD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sP(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function FD(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var ef={},tf={},nf;function wD(){return nf||(nf=1,(function(e){(function t(n){var r,s,i,a,o,u;function c(D){var k={},V,T;for(V in D)D.hasOwnProperty(V)&&(T=D[V],typeof T=="object"&&T!==null?k[V]=c(T):k[V]=T);return k}function p(D,k){var V,T,z,_;for(T=D.length,z=0;T;)V=T>>>1,_=z+V,k(D[_])?T=V:(z=_+1,T-=V+1);return z}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ChainExpression:"ChainExpression",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",PrivateIdentifier:"PrivateIdentifier",Program:"Program",Property:"Property",PropertyDefinition:"PropertyDefinition",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},i={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ChainExpression:["expression"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],PrivateIdentifier:[],Program:["body"],Property:["key","value"],PropertyDefinition:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},a={},o={},u={},s={Break:a,Skip:o,Remove:u};function d(D,k){this.parent=D,this.key=k}d.prototype.replace=function(D){this.parent[this.key]=D},d.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function m(D,k,V,T){this.node=D,this.path=k,this.wrap=V,this.ref=T}function f(){}f.prototype.path=function(){var D,k,V,T,z,_;function j(L,H){if(Array.isArray(H))for(V=0,T=H.length;V<T;++V)L.push(H[V]);else L.push(H)}if(!this.__current.path)return null;for(z=[],D=2,k=this.__leavelist.length;D<k;++D)_=this.__leavelist[D],j(z,_.path);return j(z,this.__current.path),z},f.prototype.type=function(){var D=this.current();return D.type||this.__current.wrap},f.prototype.parents=function(){var D,k,V;for(V=[],D=1,k=this.__leavelist.length;D<k;++D)V.push(this.__leavelist[D].node);return V},f.prototype.current=function(){return this.__current.node},f.prototype.__execute=function(D,k){var V,T;return T=void 0,V=this.__current,this.__current=k,this.__state=null,D&&(T=D.call(this,k.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=V,T},f.prototype.notify=function(D){this.__state=D},f.prototype.skip=function(){this.notify(o)},f.prototype.break=function(){this.notify(a)},f.prototype.remove=function(){this.notify(u)},f.prototype.__initialize=function(D,k){this.visitor=k,this.root=D,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,k.fallback==="iteration"?this.__fallback=Object.keys:typeof k.fallback=="function"&&(this.__fallback=k.fallback),this.__keys=i,k.keys&&(this.__keys=Object.assign(Object.create(this.__keys),k.keys))};function P(D){return D==null?!1:typeof D=="object"&&typeof D.type=="string"}function y(D,k){return(D===r.ObjectExpression||D===r.ObjectPattern)&&k==="properties"}function A(D,k){for(var V=D.length-1;V>=0;--V)if(D[V].node===k)return!0;return!1}f.prototype.traverse=function(D,k){var V,T,z,_,j,L,H,se,he,re,ie,te;for(this.__initialize(D,k),te={},V=this.__worklist,T=this.__leavelist,V.push(new m(D,null,null,null)),T.push(new m(null,null,null,null));V.length;){if(z=V.pop(),z===te){if(z=T.pop(),L=this.__execute(k.leave,z),this.__state===a||L===a)return;continue}if(z.node){if(L=this.__execute(k.enter,z),this.__state===a||L===a)return;if(V.push(te),T.push(z),this.__state===o||L===o)continue;if(_=z.node,j=_.type||z.wrap,re=this.__keys[j],!re)if(this.__fallback)re=this.__fallback(_);else throw new Error("Unknown node type "+j+".");for(se=re.length;(se-=1)>=0;)if(H=re[se],ie=_[H],!!ie){if(Array.isArray(ie)){for(he=ie.length;(he-=1)>=0;)if(ie[he]&&!A(T,ie[he])){if(y(j,re[se]))z=new m(ie[he],[H,he],"Property",null);else if(P(ie[he]))z=new m(ie[he],[H,he],null,null);else continue;V.push(z)}}else if(P(ie)){if(A(T,ie))continue;V.push(new m(ie,H,null,null))}}}}},f.prototype.replace=function(D,k){var V,T,z,_,j,L,H,se,he,re,ie,te,ee;function ye(Ye){var Y,ke,_e,ft;if(Ye.ref.remove()){for(ke=Ye.ref.key,ft=Ye.ref.parent,Y=V.length;Y--;)if(_e=V[Y],_e.ref&&_e.ref.parent===ft){if(_e.ref.key<ke)break;--_e.ref.key}}}for(this.__initialize(D,k),ie={},V=this.__worklist,T=this.__leavelist,te={root:D},L=new m(D,null,null,new d(te,"root")),V.push(L),T.push(L);V.length;){if(L=V.pop(),L===ie){if(L=T.pop(),j=this.__execute(k.leave,L),j!==void 0&&j!==a&&j!==o&&j!==u&&L.ref.replace(j),(this.__state===u||j===u)&&ye(L),this.__state===a||j===a)return te.root;continue}if(j=this.__execute(k.enter,L),j!==void 0&&j!==a&&j!==o&&j!==u&&(L.ref.replace(j),L.node=j),(this.__state===u||j===u)&&(ye(L),L.node=null),this.__state===a||j===a)return te.root;if(z=L.node,!!z&&(V.push(ie),T.push(L),!(this.__state===o||j===o))){if(_=z.type||L.wrap,he=this.__keys[_],!he)if(this.__fallback)he=this.__fallback(z);else throw new Error("Unknown node type "+_+".");for(H=he.length;(H-=1)>=0;)if(ee=he[H],re=z[ee],!!re)if(Array.isArray(re)){for(se=re.length;(se-=1)>=0;)if(re[se]){if(y(_,he[H]))L=new m(re[se],[ee,se],"Property",new d(re,se));else if(P(re[se]))L=new m(re[se],[ee,se],null,new d(re,se));else continue;V.push(L)}}else P(re)&&V.push(new m(re,ee,null,new d(z,ee)))}}return te.root};function F(D,k){var V=new f;return V.traverse(D,k)}function Z(D,k){var V=new f;return V.replace(D,k)}function X(D,k){var V;return V=p(k,function(T){return T.range[0]>D.range[0]}),D.extendedRange=[D.range[0],D.range[1]],V!==k.length&&(D.extendedRange[1]=k[V].range[0]),V-=1,V>=0&&(D.extendedRange[0]=k[V].range[1]),D}function w(D,k,V){var T=[],z,_,j,L;if(!D.range)throw new Error("attachComments needs range information");if(!V.length){if(k.length){for(j=0,_=k.length;j<_;j+=1)z=c(k[j]),z.extendedRange=[0,D.range[0]],T.push(z);D.leadingComments=T}return D}for(j=0,_=k.length;j<_;j+=1)T.push(X(c(k[j]),V));return L=0,F(D,{enter:function(H){for(var se;L<T.length&&(se=T[L],!(se.extendedRange[1]>H.range[0]));)se.extendedRange[1]===H.range[0]?(H.leadingComments||(H.leadingComments=[]),H.leadingComments.push(se),T.splice(L,1)):L+=1;if(L===T.length)return s.Break;if(T[L].extendedRange[0]>H.range[1])return s.Skip}}),L=0,F(D,{leave:function(H){for(var se;L<T.length&&(se=T[L],!(H.range[1]<se.extendedRange[0]));)H.range[1]===se.extendedRange[0]?(H.trailingComments||(H.trailingComments=[]),H.trailingComments.push(se),T.splice(L,1)):L+=1;if(L===T.length)return s.Break;if(T[L].extendedRange[0]>H.range[1])return s.Skip}}),D}return n.Syntax=r,n.traverse=F,n.replace=Z,n.attachComments=w,n.VisitorKeys=i,n.VisitorOption=s,n.Controller=f,n.cloneEnvironment=function(){return t({})},n})(e)})(tf)),tf}var Pi={},rf={exports:{}},sf;function ED(){return sf||(sf=1,(function(){function e(a){if(a==null)return!1;switch(a.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function t(a){if(a==null)return!1;switch(a.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function n(a){if(a==null)return!1;switch(a.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function r(a){return n(a)||a!=null&&a.type==="FunctionDeclaration"}function s(a){switch(a.type){case"IfStatement":return a.alternate!=null?a.alternate:a.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return a.body}return null}function i(a){var o;if(a.type!=="IfStatement"||a.alternate==null)return!1;o=a.consequent;do{if(o.type==="IfStatement"&&o.alternate==null)return!0;o=s(o)}while(o);return!1}rf.exports={isExpression:e,isStatement:n,isIterationStatement:t,isSourceElement:r,isProblematicIfStatement:i,trailingStatement:s}})()),rf.exports}var af={exports:{}},of;function iP(){return of||(of=1,(function(){var e,t,n,r,s,i;t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function a(A){return 48<=A&&A<=57}function o(A){return 48<=A&&A<=57||97<=A&&A<=102||65<=A&&A<=70}function u(A){return A>=48&&A<=55}n=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(A){return A===32||A===9||A===11||A===12||A===160||A>=5760&&n.indexOf(A)>=0}function p(A){return A===10||A===13||A===8232||A===8233}function d(A){if(A<=65535)return String.fromCharCode(A);var F=String.fromCharCode(Math.floor((A-65536)/1024)+55296),Z=String.fromCharCode((A-65536)%1024+56320);return F+Z}for(r=new Array(128),i=0;i<128;++i)r[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function m(A){return A<128?r[A]:t.NonAsciiIdentifierStart.test(d(A))}function f(A){return A<128?s[A]:t.NonAsciiIdentifierPart.test(d(A))}function P(A){return A<128?r[A]:e.NonAsciiIdentifierStart.test(d(A))}function y(A){return A<128?s[A]:e.NonAsciiIdentifierPart.test(d(A))}af.exports={isDecimalDigit:a,isHexDigit:o,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:p,isIdentifierStartES5:m,isIdentifierPartES5:f,isIdentifierStartES6:P,isIdentifierPartES6:y}})()),af.exports}var uf={exports:{}},cf;function SD(){return cf||(cf=1,(function(){var e=iP();function t(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function n(m,f){return!f&&m==="yield"?!1:r(m,f)}function r(m,f){if(f&&t(m))return!0;switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}}function s(m,f){return m==="null"||m==="true"||m==="false"||n(m,f)}function i(m,f){return m==="null"||m==="true"||m==="false"||r(m,f)}function a(m){return m==="eval"||m==="arguments"}function o(m){var f,P,y;if(m.length===0||(y=m.charCodeAt(0),!e.isIdentifierStartES5(y)))return!1;for(f=1,P=m.length;f<P;++f)if(y=m.charCodeAt(f),!e.isIdentifierPartES5(y))return!1;return!0}function u(m,f){return(m-55296)*1024+(f-56320)+65536}function c(m){var f,P,y,A,F;if(m.length===0)return!1;for(F=e.isIdentifierStartES6,f=0,P=m.length;f<P;++f){if(y=m.charCodeAt(f),55296<=y&&y<=56319){if(++f,f>=P||(A=m.charCodeAt(f),!(56320<=A&&A<=57343)))return!1;y=u(y,A)}if(!F(y))return!1;F=e.isIdentifierPartES6}return!0}function p(m,f){return o(m)&&!s(m,f)}function d(m,f){return c(m)&&!i(m,f)}uf.exports={isKeywordES5:n,isKeywordES6:r,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:a,isIdentifierNameES5:o,isIdentifierNameES6:c,isIdentifierES5:p,isIdentifierES6:d}})()),uf.exports}var lf;function BD(){return lf||(lf=1,(function(){Pi.ast=ED(),Pi.code=iP(),Pi.keyword=SD()})()),Pi}var vi={},go={},Ci={},Ai={},pf;function ZD(){if(pf)return Ai;pf=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");return Ai.encode=function(t){if(0<=t&&t<e.length)return e[t];throw new TypeError("Must be between 0 and 63: "+t)},Ai.decode=function(t){var n=65,r=90,s=97,i=122,a=48,o=57,u=43,c=47,p=26,d=52;return n<=t&&t<=r?t-n:s<=t&&t<=i?t-s+p:a<=t&&t<=o?t-a+d:t==u?62:t==c?63:-1},Ai}var hf;function aP(){if(hf)return Ci;hf=1;var e=ZD(),t=5,n=1<<t,r=n-1,s=n;function i(o){return o<0?(-o<<1)+1:(o<<1)+0}function a(o){var u=(o&1)===1,c=o>>1;return u?-c:c}return Ci.encode=function(o){var u="",c,p=i(o);do c=p&r,p>>>=t,p>0&&(c|=s),u+=e.encode(c);while(p>0);return u},Ci.decode=function(o,u,c){var p=o.length,d=0,m=0,f,P;do{if(u>=p)throw new Error("Expected more digits in base 64 VLQ value.");if(P=e.decode(o.charCodeAt(u++)),P===-1)throw new Error("Invalid base64 digit: "+o.charAt(u-1));f=!!(P&s),P&=r,d=d+(P<<m),m+=t}while(f);c.value=a(d),c.rest=u},Ci}var df={},mf;function ci(){return mf||(mf=1,(function(e){function t(w,D,k){if(D in w)return w[D];if(arguments.length===3)return k;throw new Error('"'+D+'" is a required argument.')}e.getArg=t;var n=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,r=/^data:.+\,.+$/;function s(w){var D=w.match(n);return D?{scheme:D[1],auth:D[2],host:D[3],port:D[4],path:D[5]}:null}e.urlParse=s;function i(w){var D="";return w.scheme&&(D+=w.scheme+":"),D+="//",w.auth&&(D+=w.auth+"@"),w.host&&(D+=w.host),w.port&&(D+=":"+w.port),w.path&&(D+=w.path),D}e.urlGenerate=i;function a(w){var D=w,k=s(w);if(k){if(!k.path)return w;D=k.path}for(var V=e.isAbsolute(D),T=D.split(/\/+/),z,_=0,j=T.length-1;j>=0;j--)z=T[j],z==="."?T.splice(j,1):z===".."?_++:_>0&&(z===""?(T.splice(j+1,_),_=0):(T.splice(j,2),_--));return D=T.join("/"),D===""&&(D=V?"/":"."),k?(k.path=D,i(k)):D}e.normalize=a;function o(w,D){w===""&&(w="."),D===""&&(D=".");var k=s(D),V=s(w);if(V&&(w=V.path||"/"),k&&!k.scheme)return V&&(k.scheme=V.scheme),i(k);if(k||D.match(r))return D;if(V&&!V.host&&!V.path)return V.host=D,i(V);var T=D.charAt(0)==="/"?D:a(w.replace(/\/+$/,"")+"/"+D);return V?(V.path=T,i(V)):T}e.join=o,e.isAbsolute=function(w){return w.charAt(0)==="/"||n.test(w)};function u(w,D){w===""&&(w="."),w=w.replace(/\/$/,"");for(var k=0;D.indexOf(w+"/")!==0;){var V=w.lastIndexOf("/");if(V<0||(w=w.slice(0,V),w.match(/^([^\/]+:\/)?\/*$/)))return D;++k}return Array(k+1).join("../")+D.substr(w.length+1)}e.relative=u;var c=(function(){var w=Object.create(null);return!("__proto__"in w)})();function p(w){return w}function d(w){return f(w)?"$"+w:w}e.toSetString=c?p:d;function m(w){return f(w)?w.slice(1):w}e.fromSetString=c?p:m;function f(w){if(!w)return!1;var D=w.length;if(D<9||w.charCodeAt(D-1)!==95||w.charCodeAt(D-2)!==95||w.charCodeAt(D-3)!==111||w.charCodeAt(D-4)!==116||w.charCodeAt(D-5)!==111||w.charCodeAt(D-6)!==114||w.charCodeAt(D-7)!==112||w.charCodeAt(D-8)!==95||w.charCodeAt(D-9)!==95)return!1;for(var k=D-10;k>=0;k--)if(w.charCodeAt(k)!==36)return!1;return!0}function P(w,D,k){var V=A(w.source,D.source);return V!==0||(V=w.originalLine-D.originalLine,V!==0)||(V=w.originalColumn-D.originalColumn,V!==0||k)||(V=w.generatedColumn-D.generatedColumn,V!==0)||(V=w.generatedLine-D.generatedLine,V!==0)?V:A(w.name,D.name)}e.compareByOriginalPositions=P;function y(w,D,k){var V=w.generatedLine-D.generatedLine;return V!==0||(V=w.generatedColumn-D.generatedColumn,V!==0||k)||(V=A(w.source,D.source),V!==0)||(V=w.originalLine-D.originalLine,V!==0)||(V=w.originalColumn-D.originalColumn,V!==0)?V:A(w.name,D.name)}e.compareByGeneratedPositionsDeflated=y;function A(w,D){return w===D?0:w===null?1:D===null?-1:w>D?1:-1}function F(w,D){var k=w.generatedLine-D.generatedLine;return k!==0||(k=w.generatedColumn-D.generatedColumn,k!==0)||(k=A(w.source,D.source),k!==0)||(k=w.originalLine-D.originalLine,k!==0)||(k=w.originalColumn-D.originalColumn,k!==0)?k:A(w.name,D.name)}e.compareByGeneratedPositionsInflated=F;function Z(w){return JSON.parse(w.replace(/^\)]}'[^\n]*\n/,""))}e.parseSourceMapInput=Z;function X(w,D,k){if(D=D||"",w&&(w[w.length-1]!=="/"&&D[0]!=="/"&&(w+="/"),D=w+D),k){var V=s(k);if(!V)throw new Error("sourceMapURL could not be parsed");if(V.path){var T=V.path.lastIndexOf("/");T>=0&&(V.path=V.path.substring(0,T+1))}D=o(i(V),D)}return a(D)}e.computeSourceURL=X})(df)),df}var yo={},ff;function oP(){if(ff)return yo;ff=1;var e=ci(),t=Object.prototype.hasOwnProperty,n=typeof Map<"u";function r(){this._array=[],this._set=n?new Map:Object.create(null)}return r.fromArray=function(s,i){for(var a=new r,o=0,u=s.length;o<u;o++)a.add(s[o],i);return a},r.prototype.size=function(){return n?this._set.size:Object.getOwnPropertyNames(this._set).length},r.prototype.add=function(s,i){var a=n?s:e.toSetString(s),o=n?this.has(s):t.call(this._set,a),u=this._array.length;(!o||i)&&this._array.push(s),o||(n?this._set.set(s,u):this._set[a]=u)},r.prototype.has=function(s){if(n)return this._set.has(s);var i=e.toSetString(s);return t.call(this._set,i)},r.prototype.indexOf=function(s){if(n){var i=this._set.get(s);if(i>=0)return i}else{var a=e.toSetString(s);if(t.call(this._set,a))return this._set[a]}throw new Error('"'+s+'" is not in the set.')},r.prototype.at=function(s){if(s>=0&&s<this._array.length)return this._array[s];throw new Error("No element indexed by "+s)},r.prototype.toArray=function(){return this._array.slice()},yo.ArraySet=r,yo}var bo={},gf;function kD(){if(gf)return bo;gf=1;var e=ci();function t(r,s){var i=r.generatedLine,a=s.generatedLine,o=r.generatedColumn,u=s.generatedColumn;return a>i||a==i&&u>=o||e.compareByGeneratedPositionsInflated(r,s)<=0}function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}return n.prototype.unsortedForEach=function(r,s){this._array.forEach(r,s)},n.prototype.add=function(r){t(this._last,r)?(this._last=r,this._array.push(r)):(this._sorted=!1,this._array.push(r))},n.prototype.toArray=function(){return this._sorted||(this._array.sort(e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},bo.MappingList=n,bo}var yf;function uP(){if(yf)return go;yf=1;var e=aP(),t=ci(),n=oP().ArraySet,r=kD().MappingList;function s(i){i||(i={}),this._file=t.getArg(i,"file",null),this._sourceRoot=t.getArg(i,"sourceRoot",null),this._skipValidation=t.getArg(i,"skipValidation",!1),this._sources=new n,this._names=new n,this._mappings=new r,this._sourcesContents=null}return s.prototype._version=3,s.fromSourceMap=function(i){var a=i.sourceRoot,o=new s({file:i.file,sourceRoot:a});return i.eachMapping(function(u){var c={generated:{line:u.generatedLine,column:u.generatedColumn}};u.source!=null&&(c.source=u.source,a!=null&&(c.source=t.relative(a,c.source)),c.original={line:u.originalLine,column:u.originalColumn},u.name!=null&&(c.name=u.name)),o.addMapping(c)}),i.sources.forEach(function(u){var c=u;a!==null&&(c=t.relative(a,u)),o._sources.has(c)||o._sources.add(c);var p=i.sourceContentFor(u);p!=null&&o.setSourceContent(u,p)}),o},s.prototype.addMapping=function(i){var a=t.getArg(i,"generated"),o=t.getArg(i,"original",null),u=t.getArg(i,"source",null),c=t.getArg(i,"name",null);this._skipValidation||this._validateMapping(a,o,u,c),u!=null&&(u=String(u),this._sources.has(u)||this._sources.add(u)),c!=null&&(c=String(c),this._names.has(c)||this._names.add(c)),this._mappings.add({generatedLine:a.line,generatedColumn:a.column,originalLine:o!=null&&o.line,originalColumn:o!=null&&o.column,source:u,name:c})},s.prototype.setSourceContent=function(i,a){var o=i;this._sourceRoot!=null&&(o=t.relative(this._sourceRoot,o)),a!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[t.toSetString(o)]=a):this._sourcesContents&&(delete this._sourcesContents[t.toSetString(o)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},s.prototype.applySourceMap=function(i,a,o){var u=a;if(a==null){if(i.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);u=i.file}var c=this._sourceRoot;c!=null&&(u=t.relative(c,u));var p=new n,d=new n;this._mappings.unsortedForEach(function(m){if(m.source===u&&m.originalLine!=null){var f=i.originalPositionFor({line:m.originalLine,column:m.originalColumn});f.source!=null&&(m.source=f.source,o!=null&&(m.source=t.join(o,m.source)),c!=null&&(m.source=t.relative(c,m.source)),m.originalLine=f.line,m.originalColumn=f.column,f.name!=null&&(m.name=f.name))}var P=m.source;P!=null&&!p.has(P)&&p.add(P);var y=m.name;y!=null&&!d.has(y)&&d.add(y)},this),this._sources=p,this._names=d,i.sources.forEach(function(m){var f=i.sourceContentFor(m);f!=null&&(o!=null&&(m=t.join(o,m)),c!=null&&(m=t.relative(c,m)),this.setSourceContent(m,f))},this)},s.prototype._validateMapping=function(i,a,o,u){if(a&&typeof a.line!="number"&&typeof a.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(i&&"line"in i&&"column"in i&&i.line>0&&i.column>=0&&!a&&!o&&!u)){if(i&&"line"in i&&"column"in i&&a&&"line"in a&&"column"in a&&i.line>0&&i.column>=0&&a.line>0&&a.column>=0&&o)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:i,source:o,original:a,name:u}))}},s.prototype._serializeMappings=function(){for(var i=0,a=1,o=0,u=0,c=0,p=0,d="",m,f,P,y,A=this._mappings.toArray(),F=0,Z=A.length;F<Z;F++){if(f=A[F],m="",f.generatedLine!==a)for(i=0;f.generatedLine!==a;)m+=";",a++;else if(F>0){if(!t.compareByGeneratedPositionsInflated(f,A[F-1]))continue;m+=","}m+=e.encode(f.generatedColumn-i),i=f.generatedColumn,f.source!=null&&(y=this._sources.indexOf(f.source),m+=e.encode(y-p),p=y,m+=e.encode(f.originalLine-1-u),u=f.originalLine-1,m+=e.encode(f.originalColumn-o),o=f.originalColumn,f.name!=null&&(P=this._names.indexOf(f.name),m+=e.encode(P-c),c=P)),d+=m}return d},s.prototype._generateSourcesContent=function(i,a){return i.map(function(o){if(!this._sourcesContents)return null;a!=null&&(o=t.relative(a,o));var u=t.toSetString(o);return Object.prototype.hasOwnProperty.call(this._sourcesContents,u)?this._sourcesContents[u]:null},this)},s.prototype.toJSON=function(){var i={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(i.file=this._file),this._sourceRoot!=null&&(i.sourceRoot=this._sourceRoot),this._sourcesContents&&(i.sourcesContent=this._generateSourcesContent(i.sources,i.sourceRoot)),i},s.prototype.toString=function(){return JSON.stringify(this.toJSON())},go.SourceMapGenerator=s,go}var As={},bf={},Mf;function VD(){return Mf||(Mf=1,(function(e){e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=2;function t(n,r,s,i,a,o){var u=Math.floor((r-n)/2)+n,c=a(s,i[u],!0);return c===0?u:c>0?r-u>1?t(u,r,s,i,a,o):o==e.LEAST_UPPER_BOUND?r<i.length?r:-1:u:u-n>1?t(n,u,s,i,a,o):o==e.LEAST_UPPER_BOUND?u:n<0?-1:n}e.search=function(n,r,s,i){if(r.length===0)return-1;var a=t(-1,r.length,n,r,s,i||e.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;a-1>=0&&s(r[a],r[a-1],!0)===0;)--a;return a}})(bf)),bf}var Mo={},Pf;function XD(){if(Pf)return Mo;Pf=1;function e(r,s,i){var a=r[s];r[s]=r[i],r[i]=a}function t(r,s){return Math.round(r+Math.random()*(s-r))}function n(r,s,i,a){if(i<a){var o=t(i,a),u=i-1;e(r,o,a);for(var c=r[a],p=i;p<a;p++)s(r[p],c)<=0&&(u+=1,e(r,u,p));e(r,u+1,p);var d=u+1;n(r,s,i,d-1),n(r,s,d+1,a)}}return Mo.quickSort=function(r,s){n(r,s,0,r.length-1)},Mo}var vf;function GD(){if(vf)return As;vf=1;var e=ci(),t=VD(),n=oP().ArraySet,r=aP(),s=XD().quickSort;function i(c,p){var d=c;return typeof c=="string"&&(d=e.parseSourceMapInput(c)),d.sections!=null?new u(d,p):new a(d,p)}i.fromSourceMap=function(c,p){return a.fromSourceMap(c,p)},i.prototype._version=3,i.prototype.__generatedMappings=null,Object.defineProperty(i.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),i.prototype.__originalMappings=null,Object.defineProperty(i.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),i.prototype._charIsMappingSeparator=function(c,p){var d=c.charAt(p);return d===";"||d===","},i.prototype._parseMappings=function(c,p){throw new Error("Subclasses must implement _parseMappings")},i.GENERATED_ORDER=1,i.ORIGINAL_ORDER=2,i.GREATEST_LOWER_BOUND=1,i.LEAST_UPPER_BOUND=2,i.prototype.eachMapping=function(c,p,d){var m=p||null,f=d||i.GENERATED_ORDER,P;switch(f){case i.GENERATED_ORDER:P=this._generatedMappings;break;case i.ORIGINAL_ORDER:P=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var y=this.sourceRoot;P.map(function(A){var F=A.source===null?null:this._sources.at(A.source);return F=e.computeSourceURL(y,F,this._sourceMapURL),{source:F,generatedLine:A.generatedLine,generatedColumn:A.generatedColumn,originalLine:A.originalLine,originalColumn:A.originalColumn,name:A.name===null?null:this._names.at(A.name)}},this).forEach(c,m)},i.prototype.allGeneratedPositionsFor=function(c){var p=e.getArg(c,"line"),d={source:e.getArg(c,"source"),originalLine:p,originalColumn:e.getArg(c,"column",0)};if(d.source=this._findSourceIndex(d.source),d.source<0)return[];var m=[],f=this._findMapping(d,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,t.LEAST_UPPER_BOUND);if(f>=0){var P=this._originalMappings[f];if(c.column===void 0)for(var y=P.originalLine;P&&P.originalLine===y;)m.push({line:e.getArg(P,"generatedLine",null),column:e.getArg(P,"generatedColumn",null),lastColumn:e.getArg(P,"lastGeneratedColumn",null)}),P=this._originalMappings[++f];else for(var A=P.originalColumn;P&&P.originalLine===p&&P.originalColumn==A;)m.push({line:e.getArg(P,"generatedLine",null),column:e.getArg(P,"generatedColumn",null),lastColumn:e.getArg(P,"lastGeneratedColumn",null)}),P=this._originalMappings[++f]}return m},As.SourceMapConsumer=i;function a(c,p){var d=c;typeof c=="string"&&(d=e.parseSourceMapInput(c));var m=e.getArg(d,"version"),f=e.getArg(d,"sources"),P=e.getArg(d,"names",[]),y=e.getArg(d,"sourceRoot",null),A=e.getArg(d,"sourcesContent",null),F=e.getArg(d,"mappings"),Z=e.getArg(d,"file",null);if(m!=this._version)throw new Error("Unsupported version: "+m);y&&(y=e.normalize(y)),f=f.map(String).map(e.normalize).map(function(X){return y&&e.isAbsolute(y)&&e.isAbsolute(X)?e.relative(y,X):X}),this._names=n.fromArray(P.map(String),!0),this._sources=n.fromArray(f,!0),this._absoluteSources=this._sources.toArray().map(function(X){return e.computeSourceURL(y,X,p)}),this.sourceRoot=y,this.sourcesContent=A,this._mappings=F,this._sourceMapURL=p,this.file=Z}a.prototype=Object.create(i.prototype),a.prototype.consumer=i,a.prototype._findSourceIndex=function(c){var p=c;if(this.sourceRoot!=null&&(p=e.relative(this.sourceRoot,p)),this._sources.has(p))return this._sources.indexOf(p);var d;for(d=0;d<this._absoluteSources.length;++d)if(this._absoluteSources[d]==c)return d;return-1},a.fromSourceMap=function(c,p){var d=Object.create(a.prototype),m=d._names=n.fromArray(c._names.toArray(),!0),f=d._sources=n.fromArray(c._sources.toArray(),!0);d.sourceRoot=c._sourceRoot,d.sourcesContent=c._generateSourcesContent(d._sources.toArray(),d.sourceRoot),d.file=c._file,d._sourceMapURL=p,d._absoluteSources=d._sources.toArray().map(function(D){return e.computeSourceURL(d.sourceRoot,D,p)});for(var P=c._mappings.toArray().slice(),y=d.__generatedMappings=[],A=d.__originalMappings=[],F=0,Z=P.length;F<Z;F++){var X=P[F],w=new o;w.generatedLine=X.generatedLine,w.generatedColumn=X.generatedColumn,X.source&&(w.source=f.indexOf(X.source),w.originalLine=X.originalLine,w.originalColumn=X.originalColumn,X.name&&(w.name=m.indexOf(X.name)),A.push(w)),y.push(w)}return s(d.__originalMappings,e.compareByOriginalPositions),d},a.prototype._version=3,Object.defineProperty(a.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function o(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}a.prototype._parseMappings=function(c,p){for(var d=1,m=0,f=0,P=0,y=0,A=0,F=c.length,Z=0,X={},w={},D=[],k=[],V,T,z,_,j;Z<F;)if(c.charAt(Z)===";")d++,Z++,m=0;else if(c.charAt(Z)===",")Z++;else{for(V=new o,V.generatedLine=d,_=Z;_<F&&!this._charIsMappingSeparator(c,_);_++);if(T=c.slice(Z,_),z=X[T],z)Z+=T.length;else{for(z=[];Z<_;)r.decode(c,Z,w),j=w.value,Z=w.rest,z.push(j);if(z.length===2)throw new Error("Found a source, but no line and column");if(z.length===3)throw new Error("Found a source and line, but no column");X[T]=z}V.generatedColumn=m+z[0],m=V.generatedColumn,z.length>1&&(V.source=y+z[1],y+=z[1],V.originalLine=f+z[2],f=V.originalLine,V.originalLine+=1,V.originalColumn=P+z[3],P=V.originalColumn,z.length>4&&(V.name=A+z[4],A+=z[4])),k.push(V),typeof V.originalLine=="number"&&D.push(V)}s(k,e.compareByGeneratedPositionsDeflated),this.__generatedMappings=k,s(D,e.compareByOriginalPositions),this.__originalMappings=D},a.prototype._findMapping=function(c,p,d,m,f,P){if(c[d]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+c[d]);if(c[m]<0)throw new TypeError("Column must be greater than or equal to 0, got "+c[m]);return t.search(c,p,f,P)},a.prototype.computeColumnSpans=function(){for(var c=0;c<this._generatedMappings.length;++c){var p=this._generatedMappings[c];if(c+1<this._generatedMappings.length){var d=this._generatedMappings[c+1];if(p.generatedLine===d.generatedLine){p.lastGeneratedColumn=d.generatedColumn-1;continue}}p.lastGeneratedColumn=1/0}},a.prototype.originalPositionFor=function(c){var p={generatedLine:e.getArg(c,"line"),generatedColumn:e.getArg(c,"column")},d=this._findMapping(p,this._generatedMappings,"generatedLine","generatedColumn",e.compareByGeneratedPositionsDeflated,e.getArg(c,"bias",i.GREATEST_LOWER_BOUND));if(d>=0){var m=this._generatedMappings[d];if(m.generatedLine===p.generatedLine){var f=e.getArg(m,"source",null);f!==null&&(f=this._sources.at(f),f=e.computeSourceURL(this.sourceRoot,f,this._sourceMapURL));var P=e.getArg(m,"name",null);return P!==null&&(P=this._names.at(P)),{source:f,line:e.getArg(m,"originalLine",null),column:e.getArg(m,"originalColumn",null),name:P}}}return{source:null,line:null,column:null,name:null}},a.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(c){return c==null}):!1},a.prototype.sourceContentFor=function(c,p){if(!this.sourcesContent)return null;var d=this._findSourceIndex(c);if(d>=0)return this.sourcesContent[d];var m=c;this.sourceRoot!=null&&(m=e.relative(this.sourceRoot,m));var f;if(this.sourceRoot!=null&&(f=e.urlParse(this.sourceRoot))){var P=m.replace(/^file:\/\//,"");if(f.scheme=="file"&&this._sources.has(P))return this.sourcesContent[this._sources.indexOf(P)];if((!f.path||f.path=="/")&&this._sources.has("/"+m))return this.sourcesContent[this._sources.indexOf("/"+m)]}if(p)return null;throw new Error('"'+m+'" is not in the SourceMap.')},a.prototype.generatedPositionFor=function(c){var p=e.getArg(c,"source");if(p=this._findSourceIndex(p),p<0)return{line:null,column:null,lastColumn:null};var d={source:p,originalLine:e.getArg(c,"line"),originalColumn:e.getArg(c,"column")},m=this._findMapping(d,this._originalMappings,"originalLine","originalColumn",e.compareByOriginalPositions,e.getArg(c,"bias",i.GREATEST_LOWER_BOUND));if(m>=0){var f=this._originalMappings[m];if(f.source===d.source)return{line:e.getArg(f,"generatedLine",null),column:e.getArg(f,"generatedColumn",null),lastColumn:e.getArg(f,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},As.BasicSourceMapConsumer=a;function u(c,p){var d=c;typeof c=="string"&&(d=e.parseSourceMapInput(c));var m=e.getArg(d,"version"),f=e.getArg(d,"sections");if(m!=this._version)throw new Error("Unsupported version: "+m);this._sources=new n,this._names=new n;var P={line:-1,column:0};this._sections=f.map(function(y){if(y.url)throw new Error("Support for url field in sections not implemented.");var A=e.getArg(y,"offset"),F=e.getArg(A,"line"),Z=e.getArg(A,"column");if(F<P.line||F===P.line&&Z<P.column)throw new Error("Section offsets must be ordered and non-overlapping.");return P=A,{generatedOffset:{generatedLine:F+1,generatedColumn:Z+1},consumer:new i(e.getArg(y,"map"),p)}})}return u.prototype=Object.create(i.prototype),u.prototype.constructor=i,u.prototype._version=3,Object.defineProperty(u.prototype,"sources",{get:function(){for(var c=[],p=0;p<this._sections.length;p++)for(var d=0;d<this._sections[p].consumer.sources.length;d++)c.push(this._sections[p].consumer.sources[d]);return c}}),u.prototype.originalPositionFor=function(c){var p={generatedLine:e.getArg(c,"line"),generatedColumn:e.getArg(c,"column")},d=t.search(p,this._sections,function(f,P){var y=f.generatedLine-P.generatedOffset.generatedLine;return y||f.generatedColumn-P.generatedOffset.generatedColumn}),m=this._sections[d];return m?m.consumer.originalPositionFor({line:p.generatedLine-(m.generatedOffset.generatedLine-1),column:p.generatedColumn-(m.generatedOffset.generatedLine===p.generatedLine?m.generatedOffset.generatedColumn-1:0),bias:c.bias}):{source:null,line:null,column:null,name:null}},u.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(c){return c.consumer.hasContentsOfAllSources()})},u.prototype.sourceContentFor=function(c,p){for(var d=0;d<this._sections.length;d++){var m=this._sections[d],f=m.consumer.sourceContentFor(c,!0);if(f)return f}if(p)return null;throw new Error('"'+c+'" is not in the SourceMap.')},u.prototype.generatedPositionFor=function(c){for(var p=0;p<this._sections.length;p++){var d=this._sections[p];if(d.consumer._findSourceIndex(e.getArg(c,"source"))!==-1){var m=d.consumer.generatedPositionFor(c);if(m){var f={line:m.line+(d.generatedOffset.generatedLine-1),column:m.column+(d.generatedOffset.generatedLine===m.line?d.generatedOffset.generatedColumn-1:0)};return f}}}return{line:null,column:null}},u.prototype._parseMappings=function(c,p){this.__generatedMappings=[],this.__originalMappings=[];for(var d=0;d<this._sections.length;d++)for(var m=this._sections[d],f=m.consumer._generatedMappings,P=0;P<f.length;P++){var y=f[P],A=m.consumer._sources.at(y.source);A=e.computeSourceURL(m.consumer.sourceRoot,A,this._sourceMapURL),this._sources.add(A),A=this._sources.indexOf(A);var F=null;y.name&&(F=m.consumer._names.at(y.name),this._names.add(F),F=this._names.indexOf(F));var Z={source:A,generatedLine:y.generatedLine+(m.generatedOffset.generatedLine-1),generatedColumn:y.generatedColumn+(m.generatedOffset.generatedLine===y.generatedLine?m.generatedOffset.generatedColumn-1:0),originalLine:y.originalLine,originalColumn:y.originalColumn,name:F};this.__generatedMappings.push(Z),typeof Z.originalLine=="number"&&this.__originalMappings.push(Z)}s(this.__generatedMappings,e.compareByGeneratedPositionsDeflated),s(this.__originalMappings,e.compareByOriginalPositions)},As.IndexedSourceMapConsumer=u,As}var Po={},Cf;function TD(){if(Cf)return Po;Cf=1;var e=uP().SourceMapGenerator,t=ci(),n=/(\r?\n)/,r=10,s="$$$isSourceNode$$$";function i(a,o,u,c,p){this.children=[],this.sourceContents={},this.line=a??null,this.column=o??null,this.source=u??null,this.name=p??null,this[s]=!0,c!=null&&this.add(c)}return i.fromStringWithSourceMap=function(a,o,u){var c=new i,p=a.split(n),d=0,m=function(){var F=X(),Z=X()||"";return F+Z;function X(){return d<p.length?p[d++]:void 0}},f=1,P=0,y=null;return o.eachMapping(function(F){if(y!==null)if(f<F.generatedLine)A(y,m()),f++,P=0;else{var Z=p[d]||"",X=Z.substr(0,F.generatedColumn-P);p[d]=Z.substr(F.generatedColumn-P),P=F.generatedColumn,A(y,X),y=F;return}for(;f<F.generatedLine;)c.add(m()),f++;if(P<F.generatedColumn){var Z=p[d]||"";c.add(Z.substr(0,F.generatedColumn)),p[d]=Z.substr(F.generatedColumn),P=F.generatedColumn}y=F},this),d<p.length&&(y&&A(y,m()),c.add(p.splice(d).join(""))),o.sources.forEach(function(F){var Z=o.sourceContentFor(F);Z!=null&&(u!=null&&(F=t.join(u,F)),c.setSourceContent(F,Z))}),c;function A(F,Z){if(F===null||F.source===void 0)c.add(Z);else{var X=u?t.join(u,F.source):F.source;c.add(new i(F.originalLine,F.originalColumn,X,Z,F.name))}}},i.prototype.add=function(a){if(Array.isArray(a))a.forEach(function(o){this.add(o)},this);else if(a[s]||typeof a=="string")a&&this.children.push(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.prepend=function(a){if(Array.isArray(a))for(var o=a.length-1;o>=0;o--)this.prepend(a[o]);else if(a[s]||typeof a=="string")this.children.unshift(a);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+a);return this},i.prototype.walk=function(a){for(var o,u=0,c=this.children.length;u<c;u++)o=this.children[u],o[s]?o.walk(a):o!==""&&a(o,{source:this.source,line:this.line,column:this.column,name:this.name})},i.prototype.join=function(a){var o,u,c=this.children.length;if(c>0){for(o=[],u=0;u<c-1;u++)o.push(this.children[u]),o.push(a);o.push(this.children[u]),this.children=o}return this},i.prototype.replaceRight=function(a,o){var u=this.children[this.children.length-1];return u[s]?u.replaceRight(a,o):typeof u=="string"?this.children[this.children.length-1]=u.replace(a,o):this.children.push("".replace(a,o)),this},i.prototype.setSourceContent=function(a,o){this.sourceContents[t.toSetString(a)]=o},i.prototype.walkSourceContents=function(a){for(var o=0,u=this.children.length;o<u;o++)this.children[o][s]&&this.children[o].walkSourceContents(a);for(var c=Object.keys(this.sourceContents),o=0,u=c.length;o<u;o++)a(t.fromSetString(c[o]),this.sourceContents[c[o]])},i.prototype.toString=function(){var a="";return this.walk(function(o){a+=o}),a},i.prototype.toStringWithSourceMap=function(a){var o={code:"",line:1,column:0},u=new e(a),c=!1,p=null,d=null,m=null,f=null;return this.walk(function(P,y){o.code+=P,y.source!==null&&y.line!==null&&y.column!==null?((p!==y.source||d!==y.line||m!==y.column||f!==y.name)&&u.addMapping({source:y.source,original:{line:y.line,column:y.column},generated:{line:o.line,column:o.column},name:y.name}),p=y.source,d=y.line,m=y.column,f=y.name,c=!0):c&&(u.addMapping({generated:{line:o.line,column:o.column}}),p=null,c=!1);for(var A=0,F=P.length;A<F;A++)P.charCodeAt(A)===r?(o.line++,o.column=0,A+1===F?(p=null,c=!1):c&&u.addMapping({source:y.source,original:{line:y.line,column:y.column},generated:{line:o.line,column:o.column},name:y.name})):o.column++}),this.walkSourceContents(function(P,y){u.setSourceContent(P,y)}),{code:o.code,map:u}},Po.SourceNode=i,Po}var Af;function WD(){return Af||(Af=1,vi.SourceMapGenerator=uP().SourceMapGenerator,vi.SourceMapConsumer=GD().SourceMapConsumer,vi.SourceNode=TD().SourceNode),vi}const LD="2.1.0",RD={version:LD};var Df;function _D(){return Df||(Df=1,(function(e){(function(){var t,n,r,s,i,a,o,u,c,p,d,m,f,P,y,A,F,Z,X,w,D,k,V,T,z,_;i=wD(),a=BD(),t=i.Syntax;function j(l){return Ne.Expression.hasOwnProperty(l.type)}function L(l){return Ne.Statement.hasOwnProperty(l.type)}n={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,Coalesce:3,LogicalOR:4,LogicalAND:5,BitwiseOR:6,BitwiseXOR:7,BitwiseAND:8,Equality:9,Relational:10,BitwiseSHIFT:11,Additive:12,Multiplicative:13,Exponentiation:14,Await:15,Unary:15,Postfix:16,OptionalChaining:17,Call:18,New:19,TaggedTemplate:20,Member:21,Primary:22},r={"??":n.Coalesce,"||":n.LogicalOR,"&&":n.LogicalAND,"|":n.BitwiseOR,"^":n.BitwiseXOR,"&":n.BitwiseAND,"==":n.Equality,"!=":n.Equality,"===":n.Equality,"!==":n.Equality,is:n.Equality,isnt:n.Equality,"<":n.Relational,">":n.Relational,"<=":n.Relational,">=":n.Relational,in:n.Relational,instanceof:n.Relational,"<<":n.BitwiseSHIFT,">>":n.BitwiseSHIFT,">>>":n.BitwiseSHIFT,"+":n.Additive,"-":n.Additive,"*":n.Multiplicative,"%":n.Multiplicative,"/":n.Multiplicative,"**":n.Exponentiation};var H=1,se=2,he=4,re=8,ie=16,te=32,ee=64,ye=se|he,Ye=H|se,Y=H|se|he,ke=H,_e=he,ft=H|he,Se=H,He=H|te,ce=0,Ae=H|ie,nt=H|re;function $e(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Me(l,b){var g="";for(b|=0;b>0;b>>>=1,l+=l)b&1&&(g+=l);return g}function Kt(l){return/[\r\n]/g.test(l)}function Te(l){var b=l.length;return b&&a.code.isLineTerminator(l.charCodeAt(b-1))}function Ft(l,b){var g;for(g in b)b.hasOwnProperty(g)&&(l[g]=b[g]);return l}function et(l,b){var g,M;function x(G){return typeof G=="object"&&G instanceof Object&&!(G instanceof RegExp)}for(g in b)b.hasOwnProperty(g)&&(M=b[g],x(M)?x(l[g])?et(l[g],M):l[g]=et({},M):l[g]=M);return l}function rt(l){var b,g,M,x,G;if(l!==l)throw new Error("Numeric literal whose value is NaN");if(l<0||l===0&&1/l<0)throw new Error("Numeric literal whose value is negative");if(l===1/0)return c?"null":p?"1e400":"1e+400";if(b=""+l,!p||b.length<3)return b;for(g=b.indexOf("."),!c&&b.charCodeAt(0)===48&&g===1&&(g=0,b=b.slice(1)),M=b,b=b.replace("e+","e"),x=0,(G=M.indexOf("e"))>0&&(x=+M.slice(G+1),M=M.slice(0,G)),g>=0&&(x-=M.length-g-1,M=+(M.slice(0,g)+M.slice(g+1))+""),G=0;M.charCodeAt(M.length+G-1)===48;)--G;return G!==0&&(x-=G,M=M.slice(0,G)),x!==0&&(M+="e"+x),(M.length<b.length||d&&l>1e12&&Math.floor(l)===l&&(M="0x"+l.toString(16)).length<b.length)&&+M===l&&(b=M),b}function pt(l,b){return(l&-2)===8232?(b?"u":"\\u")+(l===8232?"2028":"2029"):l===10||l===13?(b?"":"\\")+(l===10?"n":"r"):String.fromCharCode(l)}function _t(l){var b,g,M,x,G,I,W,U;if(g=l.toString(),l.source){if(b=g.match(/\/([^/]*)$/),!b)return g;for(M=b[1],g="",W=!1,U=!1,x=0,G=l.source.length;x<G;++x)I=l.source.charCodeAt(x),U?(g+=pt(I,U),U=!1):(W?I===93&&(W=!1):I===47?g+="\\":I===91&&(W=!0),g+=pt(I,U),U=I===92);return"/"+g+"/"+M}return g}function gt(l,b){var g;return l===8?"\\b":l===12?"\\f":l===9?"\\t":(g=l.toString(16).toUpperCase(),c||l>255?"\\u"+"0000".slice(g.length)+g:l===0&&!a.code.isDecimalDigit(b)?"\\0":l===11?"\\x0B":"\\x"+"00".slice(g.length)+g)}function wt(l){if(l===92)return"\\\\";if(l===10)return"\\n";if(l===13)return"\\r";if(l===8232)return"\\u2028";if(l===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function Et(l){var b,g,M,x;for(x=m==="double"?'"':"'",b=0,g=l.length;b<g;++b)if(M=l.charCodeAt(b),M===39){x='"';break}else if(M===34){x="'";break}else M===92&&++b;return x+l+x}function Ke(l){var b="",g,M,x,G=0,I=0,W,U;for(g=0,M=l.length;g<M;++g){if(x=l.charCodeAt(g),x===39)++G;else if(x===34)++I;else if(x===47&&c)b+="\\";else if(a.code.isLineTerminator(x)||x===92){b+=wt(x);continue}else if(!a.code.isIdentifierPartES5(x)&&(c&&x<32||!c&&!f&&(x<32||x>126))){b+=gt(x,l.charCodeAt(g+1));continue}b+=String.fromCharCode(x)}if(W=!(m==="double"||m==="auto"&&I<G),U=W?"'":'"',!(W?G:I))return U+b+U;for(l=b,b=U,g=0,M=l.length;g<M;++g)x=l.charCodeAt(g),(x===39&&W||x===34&&!W)&&(b+="\\"),b+=String.fromCharCode(x);return b+U}function vt(l){var b,g,M,x="";for(b=0,g=l.length;b<g;++b)M=l[b],x+=Array.isArray(M)?vt(M):M;return x}function ve(l,b){if(!k)return Array.isArray(l)?vt(l):l;if(b==null){if(l instanceof s)return l;b={}}return b.loc==null?new s(null,null,k,l,b.name||null):new s(b.loc.start.line,b.loc.start.column,k===!0?b.loc.source||null:k,l,b.name||null)}function Be(){return y||" "}function Q(l,b){var g,M,x,G;return g=ve(l).toString(),g.length===0?[b]:(M=ve(b).toString(),M.length===0?[l]:(x=g.charCodeAt(g.length-1),G=M.charCodeAt(0),(x===43||x===45)&&x===G||a.code.isIdentifierPartES5(x)&&a.code.isIdentifierPartES5(G)||x===47&&G===105?[l,Be(),b]:a.code.isWhiteSpace(x)||a.code.isLineTerminator(x)||a.code.isWhiteSpace(G)||a.code.isLineTerminator(G)?[l,b]:[l,y,b]))}function Ie(l){return[o,l]}function Ve(l){var b;b=o,o+=u,l(o),o=b}function rr(l){var b;for(b=l.length-1;b>=0&&!a.code.isLineTerminator(l.charCodeAt(b));--b);return l.length-1-b}function br(l,b){var g,M,x,G,I,W,U,me;for(g=l.split(/\r\n|[\r\n]/),W=Number.MAX_VALUE,M=1,x=g.length;M<x;++M){for(G=g[M],I=0;I<G.length&&a.code.isWhiteSpace(G.charCodeAt(I));)++I;W>I&&(W=I)}for(typeof b<"u"?(U=o,g[1][W]==="*"&&(b+=" "),o=b):(W&1&&--W,U=o),M=1,x=g.length;M<x;++M)me=ve(Ie(g[M].slice(W))),g[M]=k?me.join(""):me;return o=U,g.join(`
`)}function St(l,b){if(l.type==="Line"){if(Te(l.value))return"//"+l.value;var g="//"+l.value;return T||(g+=`
`),g}return w.format.indent.adjustMultilineComment&&/[\n\r]/.test(l.value)?br("/*"+l.value+"*/",b):"/*"+l.value+"*/"}function Ot(l,b){var g,M,x,G,I,W,U,me,ze,Bt,Gt,xn,Fn,ht;if(l.leadingComments&&l.leadingComments.length>0){if(G=b,T){for(x=l.leadingComments[0],b=[],me=x.extendedRange,ze=x.range,Gt=V.substring(me[0],ze[0]),ht=(Gt.match(/\n/g)||[]).length,ht>0?(b.push(Me(`
`,ht)),b.push(Ie(St(x)))):(b.push(Gt),b.push(St(x))),Bt=ze,g=1,M=l.leadingComments.length;g<M;g++)x=l.leadingComments[g],ze=x.range,xn=V.substring(Bt[1],ze[0]),ht=(xn.match(/\n/g)||[]).length,b.push(Me(`
`,ht)),b.push(Ie(St(x))),Bt=ze;Fn=V.substring(ze[1],me[1]),ht=(Fn.match(/\n/g)||[]).length,b.push(Me(`
`,ht))}else for(x=l.leadingComments[0],b=[],Z&&l.type===t.Program&&l.body.length===0&&b.push(`
`),b.push(St(x)),Te(ve(b).toString())||b.push(`
`),g=1,M=l.leadingComments.length;g<M;++g)x=l.leadingComments[g],U=[St(x)],Te(ve(U).toString())||U.push(`
`),b.push(Ie(U));b.push(Ie(G))}if(l.trailingComments)if(T)x=l.trailingComments[0],me=x.extendedRange,ze=x.range,Gt=V.substring(me[0],ze[0]),ht=(Gt.match(/\n/g)||[]).length,ht>0?(b.push(Me(`
`,ht)),b.push(Ie(St(x)))):(b.push(Gt),b.push(St(x)));else for(I=!Te(ve(b).toString()),W=Me(" ",rr(ve([o,b,u]).toString())),g=0,M=l.trailingComments.length;g<M;++g)x=l.trailingComments[g],I?(g===0?b=[b,u]:b=[b,W],b.push(St(x,W))):b=[b,Ie(St(x))],g!==M-1&&!Te(ve(b).toString())&&(b=[b,`
`]);return b}function jt(l,b,g){var M,x=0;for(M=l;M<b;M++)V[M]===`
`&&x++;for(M=1;M<x;M++)g.push(P)}function je(l,b,g){return b<g?["(",l,")"]:l}function An(l){var b,g,M;for(M=l.split(/\r\n|\n/),b=1,g=M.length;b<g;b++)M[b]=P+o+M[b];return M}function on(l,b){var g,M,x;return g=l[w.verbatim],typeof g=="string"?M=je(An(g),n.Sequence,b):(M=An(g.content),x=g.precedence!=null?g.precedence:n.Sequence,M=je(M,x,b)),ve(M,l)}function Ne(){}Ne.prototype.maybeBlock=function(l,b){var g,M,x=this;return M=!w.comment||!l.leadingComments,l.type===t.BlockStatement&&M?[y,this.generateStatement(l,b)]:l.type===t.EmptyStatement&&M?";":(Ve(function(){g=[P,Ie(x.generateStatement(l,b))]}),g)},Ne.prototype.maybeBlockSuffix=function(l,b){var g=Te(ve(b).toString());return l.type===t.BlockStatement&&(!w.comment||!l.leadingComments)&&!g?[b,y]:g?[b,o]:[b,P,o]};function ot(l){return ve(l.name,l)}function It(l,b){return l.async?"async"+(b?Be():y):""}function Dn(l){var b=l.generator&&!w.moz.starlessGenerator;return b?"*"+y:""}function sr(l){var b=l.value,g="";return b.async&&(g+=It(b,!l.computed)),b.generator&&(g+=Dn(b)?"*":""),g}Ne.prototype.generatePattern=function(l,b,g){return l.type===t.Identifier?ot(l):this.generateExpression(l,b,g)},Ne.prototype.generateFunctionParams=function(l){var b,g,M,x;if(x=!1,l.type===t.ArrowFunctionExpression&&!l.rest&&(!l.defaults||l.defaults.length===0)&&l.params.length===1&&l.params[0].type===t.Identifier)M=[It(l,!0),ot(l.params[0])];else{for(M=l.type===t.ArrowFunctionExpression?[It(l,!1)]:[],M.push("("),l.defaults&&(x=!0),b=0,g=l.params.length;b<g;++b)x&&l.defaults[b]?M.push(this.generateAssignment(l.params[b],l.defaults[b],"=",n.Assignment,Y)):M.push(this.generatePattern(l.params[b],n.Assignment,Y)),b+1<g&&M.push(","+y);l.rest&&(l.params.length&&M.push(","+y),M.push("..."),M.push(ot(l.rest))),M.push(")")}return M},Ne.prototype.generateFunctionBody=function(l){var b,g;return b=this.generateFunctionParams(l),l.type===t.ArrowFunctionExpression&&(b.push(y),b.push("=>")),l.expression?(b.push(y),g=this.generateExpression(l.body,n.Assignment,Y),g.toString().charAt(0)==="{"&&(g=["(",g,")"]),b.push(g)):b.push(this.maybeBlock(l.body,nt)),b},Ne.prototype.generateIterationForStatement=function(l,b,g){var M=["for"+(b.await?Be()+"await":"")+y+"("],x=this;return Ve(function(){b.left.type===t.VariableDeclaration?Ve(function(){M.push(b.left.kind+Be()),M.push(x.generateStatement(b.left.declarations[0],ce))}):M.push(x.generateExpression(b.left,n.Call,Y)),M=Q(M,l),M=[Q(M,x.generateExpression(b.right,n.Assignment,Y)),")"]}),M.push(this.maybeBlock(b.body,g)),M},Ne.prototype.generatePropertyKey=function(l,b){var g=[];return b&&g.push("["),g.push(this.generateExpression(l,n.Assignment,Y)),b&&g.push("]"),g},Ne.prototype.generateAssignment=function(l,b,g,M,x){return n.Assignment<M&&(x|=H),je([this.generateExpression(l,n.Call,x),y+g+y,this.generateExpression(b,n.Assignment,x)],n.Assignment,M)},Ne.prototype.semicolon=function(l){return!F&&l&te?"":";"},Ne.Statement={BlockStatement:function(l,b){var g,M,x=["{",P],G=this;return Ve(function(){l.body.length===0&&T&&(g=l.range,g[1]-g[0]>2&&(M=V.substring(g[0]+1,g[1]-1),M[0]===`
`&&(x=["{"]),x.push(M)));var I,W,U,me;for(me=Se,b&re&&(me|=ie),I=0,W=l.body.length;I<W;++I)T&&(I===0&&(l.body[0].leadingComments&&(g=l.body[0].leadingComments[0].extendedRange,M=V.substring(g[0],g[1]),M[0]===`
`&&(x=["{"])),l.body[0].leadingComments||jt(l.range[0],l.body[0].range[0],x)),I>0&&!l.body[I-1].trailingComments&&!l.body[I].leadingComments&&jt(l.body[I-1].range[1],l.body[I].range[0],x)),I===W-1&&(me|=te),l.body[I].leadingComments&&T?U=G.generateStatement(l.body[I],me):U=Ie(G.generateStatement(l.body[I],me)),x.push(U),Te(ve(U).toString())||T&&I<W-1&&l.body[I+1].leadingComments||x.push(P),T&&I===W-1&&(l.body[I].trailingComments||jt(l.body[I].range[1],l.range[1],x))}),x.push(Ie("}")),x},BreakStatement:function(l,b){return l.label?"break "+l.label.name+this.semicolon(b):"break"+this.semicolon(b)},ContinueStatement:function(l,b){return l.label?"continue "+l.label.name+this.semicolon(b):"continue"+this.semicolon(b)},ClassBody:function(l,b){var g=["{",P],M=this;return Ve(function(x){var G,I;for(G=0,I=l.body.length;G<I;++G)g.push(x),g.push(M.generateExpression(l.body[G],n.Sequence,Y)),G+1<I&&g.push(P)}),Te(ve(g).toString())||g.push(P),g.push(o),g.push("}"),g},ClassDeclaration:function(l,b){var g,M;return g=["class"],l.id&&(g=Q(g,this.generateExpression(l.id,n.Sequence,Y))),l.superClass&&(M=Q("extends",this.generateExpression(l.superClass,n.Unary,Y)),g=Q(g,M)),g.push(y),g.push(this.generateStatement(l.body,He)),g},DirectiveStatement:function(l,b){return w.raw&&l.raw?l.raw+this.semicolon(b):Et(l.directive)+this.semicolon(b)},DoWhileStatement:function(l,b){var g=Q("do",this.maybeBlock(l.body,Se));return g=this.maybeBlockSuffix(l.body,g),Q(g,["while"+y+"(",this.generateExpression(l.test,n.Sequence,Y),")"+this.semicolon(b)])},CatchClause:function(l,b){var g,M=this;return Ve(function(){var x;l.param?(g=["catch"+y+"(",M.generateExpression(l.param,n.Sequence,Y),")"],l.guard&&(x=M.generateExpression(l.guard,n.Sequence,Y),g.splice(2,0," if ",x))):g=["catch"]}),g.push(this.maybeBlock(l.body,Se)),g},DebuggerStatement:function(l,b){return"debugger"+this.semicolon(b)},EmptyStatement:function(l,b){return";"},ExportDefaultDeclaration:function(l,b){var g=["export"],M;return M=b&te?He:Se,g=Q(g,"default"),L(l.declaration)?g=Q(g,this.generateStatement(l.declaration,M)):g=Q(g,this.generateExpression(l.declaration,n.Assignment,Y)+this.semicolon(b)),g},ExportNamedDeclaration:function(l,b){var g=["export"],M,x=this;return M=b&te?He:Se,l.declaration?Q(g,this.generateStatement(l.declaration,M)):(l.specifiers&&(l.specifiers.length===0?g=Q(g,"{"+y+"}"):l.specifiers[0].type===t.ExportBatchSpecifier?g=Q(g,this.generateExpression(l.specifiers[0],n.Sequence,Y)):(g=Q(g,"{"),Ve(function(G){var I,W;for(g.push(P),I=0,W=l.specifiers.length;I<W;++I)g.push(G),g.push(x.generateExpression(l.specifiers[I],n.Sequence,Y)),I+1<W&&g.push(","+P)}),Te(ve(g).toString())||g.push(P),g.push(o+"}")),l.source?g=Q(g,["from"+y,this.generateExpression(l.source,n.Sequence,Y),this.semicolon(b)]):g.push(this.semicolon(b))),g)},ExportAllDeclaration:function(l,b){return["export"+y,"*"+y,"from"+y,this.generateExpression(l.source,n.Sequence,Y),this.semicolon(b)]},ExpressionStatement:function(l,b){var g,M;function x(W){var U;return W.slice(0,5)!=="class"?!1:(U=W.charCodeAt(5),U===123||a.code.isWhiteSpace(U)||a.code.isLineTerminator(U))}function G(W){var U;return W.slice(0,8)!=="function"?!1:(U=W.charCodeAt(8),U===40||a.code.isWhiteSpace(U)||U===42||a.code.isLineTerminator(U))}function I(W){var U,me,ze;if(W.slice(0,5)!=="async"||!a.code.isWhiteSpace(W.charCodeAt(5)))return!1;for(me=6,ze=W.length;me<ze&&a.code.isWhiteSpace(W.charCodeAt(me));++me);return me===ze||W.slice(me,me+8)!=="function"?!1:(U=W.charCodeAt(me+8),U===40||a.code.isWhiteSpace(U)||U===42||a.code.isLineTerminator(U))}return g=[this.generateExpression(l.expression,n.Sequence,Y)],M=ve(g).toString(),M.charCodeAt(0)===123||x(M)||G(M)||I(M)||X&&b&ie&&l.expression.type===t.Literal&&typeof l.expression.value=="string"?g=["(",g,")"+this.semicolon(b)]:g.push(this.semicolon(b)),g},ImportDeclaration:function(l,b){var g,M,x=this;return l.specifiers.length===0?["import",y,this.generateExpression(l.source,n.Sequence,Y),this.semicolon(b)]:(g=["import"],M=0,l.specifiers[M].type===t.ImportDefaultSpecifier&&(g=Q(g,[this.generateExpression(l.specifiers[M],n.Sequence,Y)]),++M),l.specifiers[M]&&(M!==0&&g.push(","),l.specifiers[M].type===t.ImportNamespaceSpecifier?g=Q(g,[y,this.generateExpression(l.specifiers[M],n.Sequence,Y)]):(g.push(y+"{"),l.specifiers.length-M===1?(g.push(y),g.push(this.generateExpression(l.specifiers[M],n.Sequence,Y)),g.push(y+"}"+y)):(Ve(function(G){var I,W;for(g.push(P),I=M,W=l.specifiers.length;I<W;++I)g.push(G),g.push(x.generateExpression(l.specifiers[I],n.Sequence,Y)),I+1<W&&g.push(","+P)}),Te(ve(g).toString())||g.push(P),g.push(o+"}"+y)))),g=Q(g,["from"+y,this.generateExpression(l.source,n.Sequence,Y),this.semicolon(b)]),g)},VariableDeclarator:function(l,b){var g=b&H?Y:ye;return l.init?[this.generateExpression(l.id,n.Assignment,g),y,"=",y,this.generateExpression(l.init,n.Assignment,g)]:this.generatePattern(l.id,n.Assignment,g)},VariableDeclaration:function(l,b){var g,M,x,G,I,W=this;g=[l.kind],I=b&H?Se:ce;function U(){for(G=l.declarations[0],w.comment&&G.leadingComments?(g.push(`
`),g.push(Ie(W.generateStatement(G,I)))):(g.push(Be()),g.push(W.generateStatement(G,I))),M=1,x=l.declarations.length;M<x;++M)G=l.declarations[M],w.comment&&G.leadingComments?(g.push(","+P),g.push(Ie(W.generateStatement(G,I)))):(g.push(","+y),g.push(W.generateStatement(G,I)))}return l.declarations.length>1?Ve(U):U(),g.push(this.semicolon(b)),g},ThrowStatement:function(l,b){return[Q("throw",this.generateExpression(l.argument,n.Sequence,Y)),this.semicolon(b)]},TryStatement:function(l,b){var g,M,x,G;if(g=["try",this.maybeBlock(l.block,Se)],g=this.maybeBlockSuffix(l.block,g),l.handlers)for(M=0,x=l.handlers.length;M<x;++M)g=Q(g,this.generateStatement(l.handlers[M],Se)),(l.finalizer||M+1!==x)&&(g=this.maybeBlockSuffix(l.handlers[M].body,g));else{for(G=l.guardedHandlers||[],M=0,x=G.length;M<x;++M)g=Q(g,this.generateStatement(G[M],Se)),(l.finalizer||M+1!==x)&&(g=this.maybeBlockSuffix(G[M].body,g));if(l.handler)if(Array.isArray(l.handler))for(M=0,x=l.handler.length;M<x;++M)g=Q(g,this.generateStatement(l.handler[M],Se)),(l.finalizer||M+1!==x)&&(g=this.maybeBlockSuffix(l.handler[M].body,g));else g=Q(g,this.generateStatement(l.handler,Se)),l.finalizer&&(g=this.maybeBlockSuffix(l.handler.body,g))}return l.finalizer&&(g=Q(g,["finally",this.maybeBlock(l.finalizer,Se)])),g},SwitchStatement:function(l,b){var g,M,x,G,I,W=this;if(Ve(function(){g=["switch"+y+"(",W.generateExpression(l.discriminant,n.Sequence,Y),")"+y+"{"+P]}),l.cases)for(I=Se,x=0,G=l.cases.length;x<G;++x)x===G-1&&(I|=te),M=Ie(this.generateStatement(l.cases[x],I)),g.push(M),Te(ve(M).toString())||g.push(P);return g.push(Ie("}")),g},SwitchCase:function(l,b){var g,M,x,G,I,W=this;return Ve(function(){for(l.test?g=[Q("case",W.generateExpression(l.test,n.Sequence,Y)),":"]:g=["default:"],x=0,G=l.consequent.length,G&&l.consequent[0].type===t.BlockStatement&&(M=W.maybeBlock(l.consequent[0],Se),g.push(M),x=1),x!==G&&!Te(ve(g).toString())&&g.push(P),I=Se;x<G;++x)x===G-1&&b&te&&(I|=te),M=Ie(W.generateStatement(l.consequent[x],I)),g.push(M),x+1!==G&&!Te(ve(M).toString())&&g.push(P)}),g},IfStatement:function(l,b){var g,M,x,G=this;return Ve(function(){g=["if"+y+"(",G.generateExpression(l.test,n.Sequence,Y),")"]}),x=b&te,M=Se,x&&(M|=te),l.alternate?(g.push(this.maybeBlock(l.consequent,Se)),g=this.maybeBlockSuffix(l.consequent,g),l.alternate.type===t.IfStatement?g=Q(g,["else ",this.generateStatement(l.alternate,M)]):g=Q(g,Q("else",this.maybeBlock(l.alternate,M)))):g.push(this.maybeBlock(l.consequent,M)),g},ForStatement:function(l,b){var g,M=this;return Ve(function(){g=["for"+y+"("],l.init?l.init.type===t.VariableDeclaration?g.push(M.generateStatement(l.init,ce)):(g.push(M.generateExpression(l.init,n.Sequence,ye)),g.push(";")):g.push(";"),l.test&&(g.push(y),g.push(M.generateExpression(l.test,n.Sequence,Y))),g.push(";"),l.update&&(g.push(y),g.push(M.generateExpression(l.update,n.Sequence,Y))),g.push(")")}),g.push(this.maybeBlock(l.body,b&te?He:Se)),g},ForInStatement:function(l,b){return this.generateIterationForStatement("in",l,b&te?He:Se)},ForOfStatement:function(l,b){return this.generateIterationForStatement("of",l,b&te?He:Se)},LabeledStatement:function(l,b){return[l.label.name+":",this.maybeBlock(l.body,b&te?He:Se)]},Program:function(l,b){var g,M,x,G,I;for(G=l.body.length,g=[Z&&G>0?`
`:""],I=Ae,x=0;x<G;++x)!Z&&x===G-1&&(I|=te),T&&(x===0&&(l.body[0].leadingComments||jt(l.range[0],l.body[x].range[0],g)),x>0&&!l.body[x-1].trailingComments&&!l.body[x].leadingComments&&jt(l.body[x-1].range[1],l.body[x].range[0],g)),M=Ie(this.generateStatement(l.body[x],I)),g.push(M),x+1<G&&!Te(ve(M).toString())&&(T&&l.body[x+1].leadingComments||g.push(P)),T&&x===G-1&&(l.body[x].trailingComments||jt(l.body[x].range[1],l.range[1],g));return g},FunctionDeclaration:function(l,b){return[It(l,!0),"function",Dn(l)||Be(),l.id?ot(l.id):"",this.generateFunctionBody(l)]},ReturnStatement:function(l,b){return l.argument?[Q("return",this.generateExpression(l.argument,n.Sequence,Y)),this.semicolon(b)]:["return"+this.semicolon(b)]},WhileStatement:function(l,b){var g,M=this;return Ve(function(){g=["while"+y+"(",M.generateExpression(l.test,n.Sequence,Y),")"]}),g.push(this.maybeBlock(l.body,b&te?He:Se)),g},WithStatement:function(l,b){var g,M=this;return Ve(function(){g=["with"+y+"(",M.generateExpression(l.object,n.Sequence,Y),")"]}),g.push(this.maybeBlock(l.body,b&te?He:Se)),g}},Ft(Ne.prototype,Ne.Statement),Ne.Expression={SequenceExpression:function(l,b,g){var M,x,G;for(n.Sequence<b&&(g|=H),M=[],x=0,G=l.expressions.length;x<G;++x)M.push(this.generateExpression(l.expressions[x],n.Assignment,g)),x+1<G&&M.push(","+y);return je(M,n.Sequence,b)},AssignmentExpression:function(l,b,g){return this.generateAssignment(l.left,l.right,l.operator,b,g)},ArrowFunctionExpression:function(l,b,g){return je(this.generateFunctionBody(l),n.ArrowFunction,b)},ConditionalExpression:function(l,b,g){return n.Conditional<b&&(g|=H),je([this.generateExpression(l.test,n.Coalesce,g),y+"?"+y,this.generateExpression(l.consequent,n.Assignment,g),y+":"+y,this.generateExpression(l.alternate,n.Assignment,g)],n.Conditional,b)},LogicalExpression:function(l,b,g){return l.operator==="??"&&(g|=ee),this.BinaryExpression(l,b,g)},BinaryExpression:function(l,b,g){var M,x,G,I,W,U;return I=r[l.operator],x=l.operator==="**"?n.Postfix:I,G=l.operator==="**"?I:I+1,I<b&&(g|=H),W=this.generateExpression(l.left,x,g),U=W.toString(),U.charCodeAt(U.length-1)===47&&a.code.isIdentifierPartES5(l.operator.charCodeAt(0))?M=[W,Be(),l.operator]:M=Q(W,l.operator),W=this.generateExpression(l.right,G,g),l.operator==="/"&&W.toString().charAt(0)==="/"||l.operator.slice(-1)==="<"&&W.toString().slice(0,3)==="!--"?(M.push(Be()),M.push(W)):M=Q(M,W),l.operator==="in"&&!(g&H)?["(",M,")"]:(l.operator==="||"||l.operator==="&&")&&g&ee?["(",M,")"]:je(M,I,b)},CallExpression:function(l,b,g){var M,x,G;for(M=[this.generateExpression(l.callee,n.Call,Ye)],l.optional&&M.push("?."),M.push("("),x=0,G=l.arguments.length;x<G;++x)M.push(this.generateExpression(l.arguments[x],n.Assignment,Y)),x+1<G&&M.push(","+y);return M.push(")"),g&se?je(M,n.Call,b):["(",M,")"]},ChainExpression:function(l,b,g){n.OptionalChaining<b&&(g|=se);var M=this.generateExpression(l.expression,n.OptionalChaining,g);return je(M,n.OptionalChaining,b)},NewExpression:function(l,b,g){var M,x,G,I,W;if(x=l.arguments.length,W=g&he&&!A&&x===0?ft:ke,M=Q("new",this.generateExpression(l.callee,n.New,W)),!(g&he)||A||x>0){for(M.push("("),G=0,I=x;G<I;++G)M.push(this.generateExpression(l.arguments[G],n.Assignment,Y)),G+1<I&&M.push(","+y);M.push(")")}return je(M,n.New,b)},MemberExpression:function(l,b,g){var M,x;return M=[this.generateExpression(l.object,n.Call,g&se?Ye:ke)],l.computed?(l.optional&&M.push("?."),M.push("["),M.push(this.generateExpression(l.property,n.Sequence,g&se?Y:ft)),M.push("]")):(!l.optional&&l.object.type===t.Literal&&typeof l.object.value=="number"&&(x=ve(M).toString(),x.indexOf(".")<0&&!/[eExX]/.test(x)&&a.code.isDecimalDigit(x.charCodeAt(x.length-1))&&!(x.length>=2&&x.charCodeAt(0)===48)&&M.push(" ")),M.push(l.optional?"?.":"."),M.push(ot(l.property))),je(M,n.Member,b)},MetaProperty:function(l,b,g){var M;return M=[],M.push(typeof l.meta=="string"?l.meta:ot(l.meta)),M.push("."),M.push(typeof l.property=="string"?l.property:ot(l.property)),je(M,n.Member,b)},UnaryExpression:function(l,b,g){var M,x,G,I,W;return x=this.generateExpression(l.argument,n.Unary,Y),y===""?M=Q(l.operator,x):(M=[l.operator],l.operator.length>2?M=Q(M,x):(I=ve(M).toString(),W=I.charCodeAt(I.length-1),G=x.toString().charCodeAt(0),((W===43||W===45)&&W===G||a.code.isIdentifierPartES5(W)&&a.code.isIdentifierPartES5(G))&&M.push(Be()),M.push(x))),je(M,n.Unary,b)},YieldExpression:function(l,b,g){var M;return l.delegate?M="yield*":M="yield",l.argument&&(M=Q(M,this.generateExpression(l.argument,n.Yield,Y))),je(M,n.Yield,b)},AwaitExpression:function(l,b,g){var M=Q(l.all?"await*":"await",this.generateExpression(l.argument,n.Await,Y));return je(M,n.Await,b)},UpdateExpression:function(l,b,g){return l.prefix?je([l.operator,this.generateExpression(l.argument,n.Unary,Y)],n.Unary,b):je([this.generateExpression(l.argument,n.Postfix,Y),l.operator],n.Postfix,b)},FunctionExpression:function(l,b,g){var M=[It(l,!0),"function"];return l.id?(M.push(Dn(l)||Be()),M.push(ot(l.id))):M.push(Dn(l)||y),M.push(this.generateFunctionBody(l)),M},ArrayPattern:function(l,b,g){return this.ArrayExpression(l,b,g,!0)},ArrayExpression:function(l,b,g,M){var x,G,I=this;return l.elements.length?(G=M?!1:l.elements.length>1,x=["[",G?P:""],Ve(function(W){var U,me;for(U=0,me=l.elements.length;U<me;++U)l.elements[U]?(x.push(G?W:""),x.push(I.generateExpression(l.elements[U],n.Assignment,Y))):(G&&x.push(W),U+1===me&&x.push(",")),U+1<me&&x.push(","+(G?P:y))}),G&&!Te(ve(x).toString())&&x.push(P),x.push(G?o:""),x.push("]"),x):"[]"},RestElement:function(l,b,g){return"..."+this.generatePattern(l.argument)},ClassExpression:function(l,b,g){var M,x;return M=["class"],l.id&&(M=Q(M,this.generateExpression(l.id,n.Sequence,Y))),l.superClass&&(x=Q("extends",this.generateExpression(l.superClass,n.Unary,Y)),M=Q(M,x)),M.push(y),M.push(this.generateStatement(l.body,He)),M},MethodDefinition:function(l,b,g){var M,x;return l.static?M=["static"+y]:M=[],l.kind==="get"||l.kind==="set"?x=[Q(l.kind,this.generatePropertyKey(l.key,l.computed)),this.generateFunctionBody(l.value)]:x=[sr(l),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)],Q(M,x)},Property:function(l,b,g){return l.kind==="get"||l.kind==="set"?[l.kind,Be(),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)]:l.shorthand?l.value.type==="AssignmentPattern"?this.AssignmentPattern(l.value,n.Sequence,Y):this.generatePropertyKey(l.key,l.computed):l.method?[sr(l),this.generatePropertyKey(l.key,l.computed),this.generateFunctionBody(l.value)]:[this.generatePropertyKey(l.key,l.computed),":"+y,this.generateExpression(l.value,n.Assignment,Y)]},ObjectExpression:function(l,b,g){var M,x,G,I=this;return l.properties.length?(M=l.properties.length>1,Ve(function(){G=I.generateExpression(l.properties[0],n.Sequence,Y)}),!M&&!Kt(ve(G).toString())?["{",y,G,y,"}"]:(Ve(function(W){var U,me;if(x=["{",P,W,G],M)for(x.push(","+P),U=1,me=l.properties.length;U<me;++U)x.push(W),x.push(I.generateExpression(l.properties[U],n.Sequence,Y)),U+1<me&&x.push(","+P)}),Te(ve(x).toString())||x.push(P),x.push(o),x.push("}"),x)):"{}"},AssignmentPattern:function(l,b,g){return this.generateAssignment(l.left,l.right,"=",b,g)},ObjectPattern:function(l,b,g){var M,x,G,I,W,U=this;if(!l.properties.length)return"{}";if(I=!1,l.properties.length===1)W=l.properties[0],W.type===t.Property&&W.value.type!==t.Identifier&&(I=!0);else for(x=0,G=l.properties.length;x<G;++x)if(W=l.properties[x],W.type===t.Property&&!W.shorthand){I=!0;break}return M=["{",I?P:""],Ve(function(me){var ze,Bt;for(ze=0,Bt=l.properties.length;ze<Bt;++ze)M.push(I?me:""),M.push(U.generateExpression(l.properties[ze],n.Sequence,Y)),ze+1<Bt&&M.push(","+(I?P:y))}),I&&!Te(ve(M).toString())&&M.push(P),M.push(I?o:""),M.push("}"),M},ThisExpression:function(l,b,g){return"this"},Super:function(l,b,g){return"super"},Identifier:function(l,b,g){return ot(l)},ImportDefaultSpecifier:function(l,b,g){return ot(l.id||l.local)},ImportNamespaceSpecifier:function(l,b,g){var M=["*"],x=l.id||l.local;return x&&M.push(y+"as"+Be()+ot(x)),M},ImportSpecifier:function(l,b,g){var M=l.imported,x=[M.name],G=l.local;return G&&G.name!==M.name&&x.push(Be()+"as"+Be()+ot(G)),x},ExportSpecifier:function(l,b,g){var M=l.local,x=[M.name],G=l.exported;return G&&G.name!==M.name&&x.push(Be()+"as"+Be()+ot(G)),x},Literal:function(l,b,g){var M;if(l.hasOwnProperty("raw")&&D&&w.raw)try{if(M=D(l.raw).body[0].expression,M.type===t.Literal&&M.value===l.value)return l.raw}catch{}return l.regex?"/"+l.regex.pattern+"/"+l.regex.flags:typeof l.value=="bigint"?l.value.toString()+"n":l.bigint?l.bigint+"n":l.value===null?"null":typeof l.value=="string"?Ke(l.value):typeof l.value=="number"?rt(l.value):typeof l.value=="boolean"?l.value?"true":"false":_t(l.value)},GeneratorExpression:function(l,b,g){return this.ComprehensionExpression(l,b,g)},ComprehensionExpression:function(l,b,g){var M,x,G,I,W=this;return M=l.type===t.GeneratorExpression?["("]:["["],w.moz.comprehensionExpressionStartsWithAssignment&&(I=this.generateExpression(l.body,n.Assignment,Y),M.push(I)),l.blocks&&Ve(function(){for(x=0,G=l.blocks.length;x<G;++x)I=W.generateExpression(l.blocks[x],n.Sequence,Y),x>0||w.moz.comprehensionExpressionStartsWithAssignment?M=Q(M,I):M.push(I)}),l.filter&&(M=Q(M,"if"+y),I=this.generateExpression(l.filter,n.Sequence,Y),M=Q(M,["(",I,")"])),w.moz.comprehensionExpressionStartsWithAssignment||(I=this.generateExpression(l.body,n.Assignment,Y),M=Q(M,I)),M.push(l.type===t.GeneratorExpression?")":"]"),M},ComprehensionBlock:function(l,b,g){var M;return l.left.type===t.VariableDeclaration?M=[l.left.kind,Be(),this.generateStatement(l.left.declarations[0],ce)]:M=this.generateExpression(l.left,n.Call,Y),M=Q(M,l.of?"of":"in"),M=Q(M,this.generateExpression(l.right,n.Sequence,Y)),["for"+y+"(",M,")"]},SpreadElement:function(l,b,g){return["...",this.generateExpression(l.argument,n.Assignment,Y)]},TaggedTemplateExpression:function(l,b,g){var M=Ye;g&se||(M=ke);var x=[this.generateExpression(l.tag,n.Call,M),this.generateExpression(l.quasi,n.Primary,_e)];return je(x,n.TaggedTemplate,b)},TemplateElement:function(l,b,g){return l.value.raw},TemplateLiteral:function(l,b,g){var M,x,G;for(M=["`"],x=0,G=l.quasis.length;x<G;++x)M.push(this.generateExpression(l.quasis[x],n.Primary,Y)),x+1<G&&(M.push("${"+y),M.push(this.generateExpression(l.expressions[x],n.Sequence,Y)),M.push(y+"}"));return M.push("`"),M},ModuleSpecifier:function(l,b,g){return this.Literal(l,b,g)},ImportExpression:function(l,b,g){return je(["import(",this.generateExpression(l.source,n.Assignment,Y),")"],n.Call,b)}},Ft(Ne.prototype,Ne.Expression),Ne.prototype.generateExpression=function(l,b,g){var M,x;return x=l.type||t.Property,w.verbatim&&l.hasOwnProperty(w.verbatim)?on(l,b):(M=this[x](l,b,g),w.comment&&(M=Ot(l,M)),ve(M,l))},Ne.prototype.generateStatement=function(l,b){var g,M;return g=this[l.type](l,b),w.comment&&(g=Ot(l,g)),M=ve(g).toString(),l.type===t.Program&&!Z&&P===""&&M.charAt(M.length-1)===`
`&&(g=k?ve(g).replaceRight(/\s+$/,""):M.replace(/\s+$/,"")),ve(g,l)};function Mr(l){var b;if(b=new Ne,L(l))return b.generateStatement(l,Se);if(j(l))return b.generateExpression(l,n.Sequence,Y);throw new Error("Unknown node type: "+l.type)}function Pr(l,b){var g=$e(),M,x;return b!=null?(typeof b.indent=="string"&&(g.format.indent.style=b.indent),typeof b.base=="number"&&(g.format.indent.base=b.base),b=et(g,b),u=b.format.indent.style,typeof b.base=="string"?o=b.base:o=Me(u,b.format.indent.base)):(b=g,u=b.format.indent.style,o=Me(u,b.format.indent.base)),c=b.format.json,p=b.format.renumber,d=c?!1:b.format.hexadecimal,m=c?"double":b.format.quotes,f=b.format.escapeless,P=b.format.newline,y=b.format.space,b.format.compact&&(P=y=u=o=""),A=b.format.parentheses,F=b.format.semicolons,Z=b.format.safeConcatenation,X=b.directive,D=c?null:b.parse,k=b.sourceMap,V=b.sourceCode,T=b.format.preserveBlankLines&&V!==null,w=b,k&&(e.browser?s=xD.sourceMap.SourceNode:s=WD().SourceNode),M=Mr(l),k?(x=M.toStringWithSourceMap({file:b.file,sourceRoot:b.sourceMapRoot}),b.sourceContent&&x.map.setSourceContent(b.sourceMap,b.sourceContent),b.sourceMapWithCode?x:x.map.toString()):(x={code:M.toString(),map:null},b.sourceMapWithCode?x:x.code)}z={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},_=$e().format,e.version=RD.version,e.generate=Pr,e.attachComments=i.attachComments,e.Precedence=et({},n),e.browser=!1,e.FORMAT_MINIFY=z,e.FORMAT_DEFAULTS=_})()})(ef)),ef}var ID=_D();const ND=sP(ID);class zD{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:t=>this.replacement=t}}replace(t,n,r,s){t&&n&&(r!=null?t[n][r]=s:t[n]=s)}remove(t,n,r){t&&n&&(r!=null?t[n].splice(r,1):delete t[n])}}class YD extends zD{constructor(t,n){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:r=>this.replacement=r},this.enter=t,this.leave=n}visit(t,n,r,s){if(t){if(this.enter){const a=this.should_skip,o=this.should_remove,u=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,t,n,r,s),this.replacement&&(t=this.replacement,this.replace(n,r,s,t)),this.should_remove&&this.remove(n,r,s);const c=this.should_skip,p=this.should_remove;if(this.should_skip=a,this.should_remove=o,this.replacement=u,c)return t;if(p)return null}let i;for(i in t){const a=t[i];if(a&&typeof a=="object")if(Array.isArray(a)){const o=a;for(let u=0;u<o.length;u+=1){const c=o[u];xf(c)&&(this.visit(c,t,i,u)||u--)}}else xf(a)&&this.visit(a,t,i,null)}if(this.leave){const a=this.replacement,o=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,t,n,r,s),this.replacement&&(t=this.replacement,this.replace(n,r,s,t)),this.should_remove&&this.remove(n,r,s);const u=this.should_remove;if(this.replacement=a,this.should_remove=o,u)return null}}return t}}function xf(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"}function HD(e,{enter:t,leave:n}){return new YD(t,n).visit(e,null)}let cP=[];function KD(e){cP.push(e)}let Os=new Map;function OD(e,t){Os.set(e,t)}function lP(e,t={}){var m;const{wrapAsync:n=!1,addReturn:r=!0,emitMiniLocations:s=!0,emitWidgets:i=!0}=t;let a=DD(e,{ecmaVersion:2022,allowAwaitOutsideFunction:!0,locations:!0}),o=[];const u=(f,P)=>{const y=Os.get("minilang");if(y){const A=`[${f}]`,F=y.getLocations(A,P.start);o=o.concat(F)}else{const A=xa(`"${f}"`,P.start,e);o=o.concat(A)}};let c=[];HD(a,{enter(f,P){var y,A,F;if(sx(f)){const{name:Z}=f.tag,X=Os.get(Z),w=f.quasi.quasis[0].value.raw,D=f.quasi.start+1;if(s){const k=X.getLocations(w,D);o=o.concat(k)}return this.skip(),this.replace(ux(Z,w,D))}if(ix(f,"tidal")){const Z=f.quasi.quasis[0].value.raw,X=f.quasi.start+1;if(s){const w=ax(Z,X);o=o.concat(w)}return this.skip(),this.replace(ox(Z,X))}if(JD(f,P)){const{quasis:Z}=f,{raw:X}=Z[0].value;return this.skip(),s&&u(X,f),this.replace(Ff(X,f))}if(jD(f)){const{value:Z}=f;return this.skip(),s&&u(Z,f),this.replace(Ff(Z,f))}if(UD(f))return i&&c.push({from:f.arguments[0].start,to:f.arguments[0].end,value:f.arguments[0].raw,min:((y=f.arguments[1])==null?void 0:y.value)??0,max:((A=f.arguments[2])==null?void 0:A.value)??1,step:(F=f.arguments[3])==null?void 0:F.value,type:"slider"}),this.replace(QD(f));if(qD(f)){const Z=f.callee.property.name,X=c.filter(D=>D.type===Z).length,w={to:f.end,index:X,type:Z,id:t.id};return i&&c.push(w),this.replace($D(f,w))}if(ex(f,P))return this.replace(tx(f));if(nx(f))return this.replace(rx(f))},leave(f,P,y,A){}});let{body:p}=a;if(!p.length)console.warn("empty body -> fallback to silence"),p.push({type:"ExpressionStatement",expression:{type:"Identifier",name:"silence"}});else if(!((m=p==null?void 0:p[p.length-1])!=null&&m.expression))throw new Error("unexpected ast format without body expression");if(r){const{expression:f}=p[p.length-1];p[p.length-1]={type:"ReturnStatement",argument:f}}let d=ND.generate(a);return n&&(d=`(async ()=>{${d}})()`),s?{output:d,miniLocations:o,widgets:c}:{output:d}}function jD(e,t,n){return e.type!=="Literal"?!1:e.raw[0]==='"'}function JD(e,t){return e.type==="TemplateLiteral"&&t.type!=="TaggedTemplateExpression"}function Ff(e,t){const{start:n}=t,r=Os.get("minilang");let s="m";return r&&r.name&&(s=r.name),{type:"CallExpression",callee:{type:"Identifier",name:s},arguments:[{type:"Literal",value:e},{type:"Literal",value:n}],optional:!1}}function UD(e){return e.type==="CallExpression"&&e.callee.name==="slider"}function qD(e){var t;return e.type==="CallExpression"&&cP.includes((t=e.callee.property)==null?void 0:t.name)}function QD(e){const t="slider_"+e.arguments[0].start;return e.arguments.unshift({type:"Literal",value:t,raw:t}),e.callee.name="sliderWithID",e}function pP(e){return`${e.id||""}_widget_${e.type}_${e.index}`}function $D(e,t){const n=pP(t);return e.arguments.unshift({type:"Literal",value:n,raw:n}),e}function ex(e,t){return e.type==="CallExpression"&&e.callee.name==="samples"&&t.type!=="AwaitExpression"}function tx(e){return{type:"AwaitExpression",argument:e}}function nx(e){return e.type==="LabeledStatement"}function rx(e){return{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"MemberExpression",object:e.body.expression,property:{type:"Identifier",name:"p"}},arguments:[{type:"Literal",value:e.label.name,raw:`'${e.label.name}'`}]}}}function sx(e){return e.type==="TaggedTemplateExpression"&&Os.has(e.tag.name)}function ix(e,t){return e.type==="TaggedTemplateExpression"&&e.tag.name===t}function ax(e,t){return e.split("").reduce((n,r,s)=>(r!=='"'||(!n.length||n[n.length-1].length>1?n.push([s+1]):n[n.length-1].push(s)),n),[]).map(([n,r])=>{const s=e.slice(n,r);return xa(`"${s}"`,t+n-1)}).flat()}function ox(e,t){return{type:"CallExpression",callee:{type:"Identifier",name:"tidal"},arguments:[{type:"Literal",value:e},{type:"Literal",value:t}],optional:!1}}function ux(e,t,n){return{type:"CallExpression",callee:{type:"Identifier",name:e},arguments:[{type:"Literal",value:t},{type:"Literal",value:n}],optional:!1}}function Vm(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function Xm(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var hP=[0,2,4,-1,1,3,5],dP=hP.map(e=>Math.floor(e*7/12));function mP(e){const{step:t,alt:n,oct:r,dir:s=1}=e,i=hP[t]+7*n;if(r===void 0)return[s*i];const a=r-dP[t]-4*n;return[s*i,s*a]}var cx=[3,0,4,1,5,2,6];function fP(e){const[t,n,r]=e,s=cx[lx(t)],i=Math.floor((t+1)/7);if(n===void 0)return{step:s,alt:i,dir:r};const a=n+4*i+dP[s];return{step:s,alt:i,oct:a,dir:r}}function lx(e){const t=(e+1)%7;return t<0?7+t:t}var wf=(e,t)=>Array(Math.abs(t)+1).join(e),Yo=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),px="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",hx="(AA|A|P|M|m|d|dd)([-+]?\\d+)",dx=new RegExp("^"+px+"|"+hx+"$");function mx(e){const t=dx.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var Ef={};function Xn(e){return typeof e=="string"?Ef[e]||(Ef[e]=fx(e)):Xm(e)?Xn(yx(e)):Vm(e)?Xn(e.name):Yo}var Sf=[0,2,4,5,7,9,11],gP="PMMPPMM";function fx(e){const t=mx(e);if(t[0]==="")return Yo;const n=+t[0],r=t[1],s=(Math.abs(n)-1)%7,i=gP[s];if(i==="M"&&r==="P")return Yo;const a=i==="M"?"majorable":"perfectable",o=""+n+r,u=n<0?-1:1,c=n===8||n===-8?n:u*(s+1),p=gx(a,r),d=Math.floor((Math.abs(n)-1)/7),m=u*(Sf[s]+p+12*d),f=(u*(Sf[s]+p)%12+12)%12,P=mP({step:s,alt:p,oct:d,dir:u});return{empty:!1,name:o,num:n,q:r,step:s,alt:p,dir:u,type:a,simple:c,semitones:m,chroma:f,coord:P,oct:d}}function yP(e,t){const[n,r=0]=e,s=n*7+r*12<0,i=t||s?[-n,-r,-1]:[n,r,1];return Xn(fP(i))}function gx(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function yx(e){const{step:t,alt:n,oct:r=0,dir:s}=e;if(!s)return"";const i=t+1+7*r,a=i===0?t+1:i,o=s<0?"-":"",u=gP[t]==="M"?"majorable":"perfectable";return o+a+bx(u,n)}function bx(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?wf("A",t):wf("d",e==="perfectable"?t:t+1)}var Bf=(e,t)=>Array(Math.abs(t)+1).join(e),bP=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Zf=new Map,Mx=e=>"CDEFGAB".charAt(e),Za=e=>e<0?Bf("b",-e):Bf("#",e),Gm=e=>e[0]==="b"?-e.length:e.length;function Xe(e){const t=JSON.stringify(e),n=Zf.get(t);if(n)return n;const r=typeof e=="string"?Ax(e):Xm(e)?Xe(Dx(e)):Vm(e)?Xe(e.name):bP;return Zf.set(t,r),r}var Px=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Tm(e){const t=Px.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function vx(e){return Xe(fP(e))}var Cx=(e,t)=>(e%t+t)%t,vo=[0,2,4,5,7,9,11];function Ax(e){const t=Tm(e);if(t[0]===""||t[3]!=="")return bP;const n=t[0],r=t[1],s=t[2],i=(n.charCodeAt(0)+3)%7,a=Gm(r),o=s.length?+s:void 0,u=mP({step:i,alt:a,oct:o}),c=n+r+s,p=n+r,d=(vo[i]+a+120)%12,m=o===void 0?Cx(vo[i]+a,12)-1188:vo[i]+a+12*(o+1),f=m>=0&&m<=127?m:null,P=o===void 0?null:Math.pow(2,(m-69)/12)*440;return{empty:!1,acc:r,alt:a,chroma:d,coord:u,freq:P,height:m,letter:n,midi:f,name:c,oct:o,pc:p,step:i}}function Dx(e){const{step:t,alt:n,oct:r}=e,s=Mx(t);if(!s)return"";const i=s+Za(n);return r||r===0?i+r:i}function vn(e,t){const n=Xe(e),r=Array.isArray(t)?t:Xn(t).coord;if(n.empty||!r||r.length<2)return"";const s=n.coord,i=s.length===1?[s[0]+r[0]]:[s[0]+r[0],s[1]+r[1]];return vx(i).name}function MP(e,t){const n=e.length;return r=>{if(!t)return"";const s=r<0?(n- -r%n)%n:r%n,i=Math.floor(r/n),a=vn(t,[0,i]);return vn(a,e[s])}}function ka(e,t){const n=Xe(e),r=Xe(t);if(n.empty||r.empty)return"";const s=n.coord,i=r.coord,a=i[0]-s[0],o=s.length===2&&i.length===2?i[1]-s[1]:-Math.floor(a*7/12),u=r.height===n.height&&r.midi!==null&&n.oct===r.oct&&n.step>r.step;return yP([a,o],u).name}var kf=(e,t)=>Array(t+1).join(e),xx=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function PP(e){const t=xx.exec(e);return t?[t[1],t[2],t[3]]:["","",""]}function zi(e){const[t,n,r]=PP(e);if(n==="")return"";let s=4;for(let a=0;a<r.length;a++)s+=r.charAt(a)===","?-1:1;const i=t[0]==="_"?t.replace(/_/g,"b"):t[0]==="^"?t.replace(/\^/g,"#"):"";return n.charCodeAt(0)>96?n.toUpperCase()+i+(s+1):n+i+s}function vP(e){const t=Xe(e);if(t.empty||!t.oct&&t.oct!==0)return"";const{letter:n,acc:r,oct:s}=t,i=r[0]==="b"?r.replace(/b/g,"_"):r.replace(/#/g,"^"),a=s>4?n.toLowerCase():n,o=s===5?"":s>4?kf("'",s-5):kf(",",4-s);return i+a+o}function Fx(e,t){return vP(vn(zi(e),t))}function wx(e,t){return ka(zi(e),zi(t))}var Ex={abcToScientificNotation:zi,scientificToAbcNotation:vP,tokenize:PP,transpose:Fx,distance:wx};function Sx(e,t){const n=[];for(;t--;n[t]=t+e);return n}function Bx(e,t){const n=[];for(;t--;n[t]=e-t);return n}function Zx(e,t){return e<t?Sx(e,t-e+1):Bx(e,e-t+1)}function kx(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function Vx(e){return e.filter(t=>t===0||t)}function CP(e){return e.map(t=>Xe(t)).filter(t=>!t.empty).sort((t,n)=>t.height-n.height).map(t=>t.name)}function Xx(e){return CP(e).filter((t,n,r)=>n===0||t!==r[n-1])}function Gx(e,t=Math.random){let n,r,s=e.length;for(;s;)n=Math.floor(t()*s--),r=e[s],e[s]=e[n],e[n]=r;return e}function AP(e){return e.length===0?[[]]:AP(e.slice(1)).reduce((t,n)=>t.concat(e.map((r,s)=>{const i=n.slice();return i.splice(s,0,e[0]),i})),[])}const Tx=Object.freeze(Object.defineProperty({__proto__:null,compact:Vx,permutations:AP,range:Zx,rotate:kx,shuffle:Gx,sortedNoteNames:CP,sortedUniqNoteNames:Xx},Symbol.toStringTag,{value:"Module"}));function Wx(e,t){const n=[];for(;t--;n[t]=t+e);return n}function Lx(e,t){const n=[];for(;t--;n[t]=e-t);return n}function Va(e,t){return e<t?Wx(e,t-e+1):Lx(e,e-t+1)}function ms(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function Wm(e){return e.filter(t=>t===0||t)}function Rx(e,t=Math.random){let n,r,s=e.length;for(;s;)n=Math.floor(t()*s--),r=e[s],e[s]=e[n],e[n]=r;return e}function DP(e){return e.length===0?[[]]:DP(e.slice(1)).reduce((t,n)=>t.concat(e.map((r,s)=>{const i=n.slice();return i.splice(s,0,e[0]),i})),[])}var _x={compact:Wm,permutations:DP,range:Va,rotate:ms,shuffle:Rx},hr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Lm=e=>Number(e).toString(2).padStart(12,"0"),Vf=e=>parseInt(e,2),Ix=/^[01]{12}$/;function Rm(e){return Ix.test(e)}var Nx=e=>typeof e=="number"&&e>=0&&e<=4095,zx=e=>e&&Rm(e.chroma),Xf={[hr.chroma]:hr};function Mt(e){const t=Rm(e)?e:Nx(e)?Lm(e):Array.isArray(e)?tF(e):zx(e)?e.chroma:hr.chroma;return Xf[t]=Xf[t]||eF(t)}var Yx=Mt,xP=e=>Mt(e).chroma,Hx=e=>Mt(e).intervals,Kx=e=>Mt(e).setNum,Ox=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function jx(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(Ox[n]);return t}function Jx(e){return Mt(e).intervals.map(t=>vn("C",t))}function Ux(){return Va(2048,4095).map(Lm)}function _m(e,t=!0){const n=Mt(e).chroma.split("");return Wm(n.map((r,s)=>{const i=ms(s,n);return t&&i[0]==="0"?null:i.join("")}))}function qx(e,t){return Mt(e).setNum===Mt(t).setNum}function Xa(e){const t=Mt(e).setNum;return n=>{const r=Mt(n).setNum;return t&&t!==r&&(r&t)===r}}function Ga(e){const t=Mt(e).setNum;return n=>{const r=Mt(n).setNum;return t&&t!==r&&(r|t)===r}}function FP(e){const t=Mt(e);return n=>{const r=Xe(n);return t&&!r.empty&&t.chroma.charAt(r.chroma)==="1"}}function Qx(e){const t=FP(e);return n=>n.filter(t)}var wP={get:Mt,chroma:xP,num:Kx,intervals:Hx,chromas:Ux,isSupersetOf:Ga,isSubsetOf:Xa,isNoteIncludedIn:FP,isEqual:qx,filter:Qx,modes:_m,notes:Jx,pcset:Yx};function $x(e){const t=e.split("");return t.map((n,r)=>ms(r,t).join(""))}function eF(e){const t=Vf(e),n=$x(e).map(Vf).filter(i=>i>=2048).sort()[0],r=Lm(n),s=jx(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:s}}function tF(e){if(e.length===0)return hr.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=Xe(e[r]),t.empty&&(t=Xn(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var nF=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],rF=nF;({...hr});var Im=[],wi={};function EP(){return Im.slice()}function sF(e,t,n){const r=aF(e),s={...Mt(e),name:n||"",quality:r,intervals:e,aliases:t};Im.push(s),s.name&&(wi[s.name]=s),wi[s.setNum]=s,wi[s.chroma]=s,s.aliases.forEach(i=>iF(s,i))}function iF(e,t){wi[t]=e}function aF(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}rF.forEach(([e,t,n])=>sF(e.split(" "),n.split(" "),t));Im.sort((e,t)=>e.setNum-t.setNum);var oF=e=>{const t=e.reduce((n,r)=>{const s=Xe(r).chroma;return s!==void 0&&(n[s]=n[s]||Xe(r).name),n},{});return n=>t[n]};function uF(e,t={}){const n=e.map(r=>Xe(r).pc).filter(r=>r);return Xe.length===0?[]:fF(n,1,t).filter(r=>r.weight).sort((r,s)=>s.weight-r.weight).map(r=>r.name)}var Ta={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Wa=e=>t=>!!(t&e),cF=Wa(Ta.anyThirds),lF=Wa(Ta.perfectFifth),pF=Wa(Ta.anySeventh),hF=Wa(Ta.nonPerfectFifths);function dF(e){const t=parseInt(e.chroma,2);return cF(t)&&lF(t)&&pF(t)}function mF(e){const t=parseInt(e,2);return hF(t)?e:(t|16).toString(2)}function fF(e,t,n){const r=e[0],s=Xe(r).chroma,i=oF(e),a=_m(e,!1),o=[];return a.forEach((u,c)=>{const p=n.assumePerfectFifth&&mF(u);EP().filter(d=>n.assumePerfectFifth&&dF(d)?d.chroma===p:d.chroma===u).forEach(d=>{const m=d.aliases[0],f=i(c);c!==s?o.push({weight:.5*t,name:`${f}${m}/${r}`}):o.push({weight:1*t,name:`${f}${m}`})})}),o}function li(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}var SP=[0,2,4,5,7,9,11],BP=({step:e,alt:t})=>(SP[e]+t+120)%12,Nm=({step:e,alt:t,oct:n,dir:r=1})=>r*(SP[e]+t+12*(n===void 0?-100:n)),ZP=e=>{const t=Nm(e);return e.oct!==void 0&&t>=-12&&t<=115?t+12:null};function La(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"}var kP=[0,2,4,-1,1,3,5],VP=kP.map(e=>Math.floor(e*7/12));function Ra(e){const{step:t,alt:n,oct:r,dir:s=1}=e,i=kP[t]+7*n;if(r===void 0)return[s*i];const a=r-VP[t]-4*n;return[s*i,s*a]}var gF=[3,0,4,1,5,2,6];function _a(e){const[t,n,r]=e,s=gF[yF(t)],i=Math.floor((t+1)/7);if(n===void 0)return{step:s,alt:i,dir:r};const a=n+4*i+VP[s];return{step:s,alt:i,oct:a,dir:r}}function yF(e){const t=(e+1)%7;return t<0?7+t:t}var Gf=(e,t)=>Array(Math.abs(t)+1).join(e),Ho={empty:!0,name:"",acc:""},bF="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",MF="(AA|A|P|M|m|d|dd)([-+]?\\d+)",PF=new RegExp("^"+bF+"|"+MF+"$");function zm(e){const t=PF.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var Tf={};function xt(e){return typeof e=="string"?Tf[e]||(Tf[e]=vF(e)):La(e)?xt(AF(e)):li(e)?xt(e.name):Ho}var Wf=[0,2,4,5,7,9,11],XP="PMMPPMM";function vF(e){const t=zm(e);if(t[0]==="")return Ho;const n=+t[0],r=t[1],s=(Math.abs(n)-1)%7,i=XP[s];if(i==="M"&&r==="P")return Ho;const a=i==="M"?"majorable":"perfectable",o=""+n+r,u=n<0?-1:1,c=n===8||n===-8?n:u*(s+1),p=CF(a,r),d=Math.floor((Math.abs(n)-1)/7),m=u*(Wf[s]+p+12*d),f=(u*(Wf[s]+p)%12+12)%12,P=Ra({step:s,alt:p,oct:d,dir:u});return{empty:!1,name:o,num:n,q:r,step:s,alt:p,dir:u,type:a,simple:c,semitones:m,chroma:f,coord:P,oct:d}}function pi(e,t){const[n,r=0]=e,s=n*7+r*12<0,i=t||s?[-n,-r,-1]:[n,r,1];return xt(_a(i))}function CF(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function AF(e){const{step:t,alt:n,oct:r=0,dir:s}=e;if(!s)return"";const i=t+1+7*r,a=i===0?t+1:i,o=s<0?"-":"",u=XP[t]==="M"?"majorable":"perfectable";return o+a+DF(u,n)}function DF(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?Gf("A",t):Gf("d",e==="perfectable"?t:t+1)}var Lf=(e,t)=>Array(Math.abs(t)+1).join(e),GP={empty:!0,name:"",pc:"",acc:""},Rf=new Map,Ym=e=>"CDEFGAB".charAt(e),Hm=e=>e<0?Lf("b",-e):Lf("#",e),Km=e=>e[0]==="b"?-e.length:e.length;function Gn(e){const t=JSON.stringify(e),n=Rf.get(t);if(n)return n;const r=typeof e=="string"?wF(e):La(e)?Gn(EF(e)):li(e)?Gn(e.name):GP;return Rf.set(t,r),r}var xF=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Ia(e){const t=xF.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function Om(e){return Gn(_a(e))}var FF=(e,t)=>(e%t+t)%t,Co=[0,2,4,5,7,9,11];function wF(e){const t=Ia(e);if(t[0]===""||t[3]!=="")return GP;const n=t[0],r=t[1],s=t[2],i=(n.charCodeAt(0)+3)%7,a=Km(r),o=s.length?+s:void 0,u=Ra({step:i,alt:a,oct:o}),c=n+r+s,p=n+r,d=(Co[i]+a+120)%12,m=o===void 0?FF(Co[i]+a,12)-1188:Co[i]+a+12*(o+1),f=m>=0&&m<=127?m:null,P=o===void 0?null:Math.pow(2,(m-69)/12)*440;return{empty:!1,acc:r,alt:a,chroma:d,coord:u,freq:P,height:m,letter:n,midi:f,name:c,oct:o,pc:p,step:i}}function EF(e){const{step:t,alt:n,oct:r}=e,s=Ym(t);if(!s)return"";const i=s+Hm(n);return r||r===0?i+r:i}function is(e,t){const n=Gn(e),r=Array.isArray(t)?t:xt(t).coord;if(n.empty||!r||r.length<2)return"";const s=n.coord,i=s.length===1?[s[0]+r[0]]:[s[0]+r[0],s[1]+r[1]];return Om(i).name}function Na(e,t){const n=e.length;return r=>{if(!t)return"";const s=r<0?(n- -r%n)%n:r%n,i=Math.floor(r/n),a=is(t,[0,i]);return is(a,e[s])}}function jm(e,t){const n=Gn(e),r=Gn(t);if(n.empty||r.empty)return"";const s=n.coord,i=r.coord,a=i[0]-s[0],o=s.length===2&&i.length===2?i[1]-s[1]:-Math.floor(a*7/12),u=r.height===n.height&&r.midi!==null&&n.midi!==null&&n.step>r.step;return pi([a,o],u).name}var TP=(e,t)=>Array(Math.abs(t)+1).join(e);function fs(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}var WP=fs("isNamed","isNamedPitch",li);const LP=Object.freeze(Object.defineProperty({__proto__:null,accToAlt:Km,altToAcc:Hm,chroma:BP,coordToInterval:pi,coordToNote:Om,coordinates:Ra,deprecate:fs,distance:jm,fillStr:TP,height:Nm,interval:xt,isNamed:WP,isNamedPitch:li,isPitch:La,midi:ZP,note:Gn,pitch:_a,stepToLetter:Ym,tokenizeInterval:zm,tokenizeNote:Ia,tonicIntervalsTransposer:Na,transpose:is},Symbol.toStringTag,{value:"Module"}));var SF=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],BF=SF,ZF={...hr,name:"",quality:"Unknown",intervals:[],aliases:[]},gs=[],Dr={};function Jm(e){return Dr[e]||ZF}var kF=fs("ChordType.chordType","ChordType.get",Jm);function VF(){return gs.map(e=>e.name).filter(e=>e)}function XF(){return gs.map(e=>e.aliases[0]).filter(e=>e)}function GF(){return Object.keys(Dr)}function za(){return gs.slice()}var TF=fs("ChordType.entries","ChordType.all",za);function WF(){gs=[],Dr={}}function RP(e,t,n){const r=RF(e),s={...Mt(e),name:n||"",quality:r,intervals:e,aliases:t};gs.push(s),s.name&&(Dr[s.name]=s),Dr[s.setNum]=s,Dr[s.chroma]=s,s.aliases.forEach(i=>LF(s,i))}function LF(e,t){Dr[t]=e}function RF(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}BF.forEach(([e,t,n])=>RP(e.split(" "),n.split(" "),t));gs.sort((e,t)=>e.setNum-t.setNum);var _P={names:VF,symbols:XF,get:Jm,all:za,add:RP,removeAll:WF,keys:GF,entries:TF,chordType:kF},_F=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],IF=_F,NF={...hr,intervals:[],aliases:[]},Ya=[],xr={};function IP(){return Ya.map(e=>e.name)}function Ha(e){return xr[e]||NF}var zF=Ha;function ys(){return Ya.slice()}var YF=ys;function HF(){return Object.keys(xr)}function KF(){Ya=[],xr={}}function NP(e,t,n=[]){const r={...Mt(e),name:t,intervals:e,aliases:n};return Ya.push(r),xr[r.name]=r,xr[r.setNum]=r,xr[r.chroma]=r,r.aliases.forEach(s=>OF(r,s)),r}function OF(e,t){xr[t]=e}IF.forEach(([e,t,...n])=>NP(e.split(" "),t,n));var zP={names:IP,get:Ha,all:ys,add:NP,removeAll:KF,keys:HF,entries:YF,scaleType:zF},Ko={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Um(e){const[t,n,r,s]=Ia(e);return t===""?["",e]:t==="A"&&s==="ug"?["","aug"]:[t+n,r+s]}function Wr(e){if(e==="")return Ko;if(Array.isArray(e)&&e.length===2)return Ei(e[1],e[0]);{const[t,n]=Um(e),r=Ei(n,t);return r.empty?Ei(e):r}}function Ei(e,t,n){const r=Jm(e),s=Gn(t||""),i=Gn(n||"");if(r.empty||t&&s.empty||n&&i.empty)return Ko;const a=jm(s.pc,i.pc),o=r.intervals.indexOf(a)+1;if(!i.empty&&!o)return Ko;const u=Array.from(r.intervals);for(let m=1;m<o;m++){const f=u[0][0],P=u[0][1],y=parseInt(f,10)+7;u.push(`${y}${P}`),u.shift()}const c=s.empty?[]:u.map(m=>is(s,m));e=r.aliases.indexOf(e)!==-1?e:r.aliases[0];const p=`${s.empty?"":s.pc}${e}${i.empty||o<=1?"":"/"+i.pc}`,d=`${t?s.pc+" ":""}${r.name}${o>1&&n?" over "+i.pc:""}`;return{...r,name:d,symbol:p,type:r.name,root:i.name,intervals:u,rootDegree:o,tonic:s.name,notes:c}}var jF=fs("Chord.chord","Chord.get",Wr);function JF(e,t){const[n,r]=Um(e);return n?is(n,t)+r:e}function UF(e){const t=Wr(e),n=Ga(t.chroma);return ys().filter(r=>n(r.chroma)).map(r=>r.name)}function qF(e){const t=Wr(e),n=Ga(t.chroma);return za().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function QF(e){const t=Wr(e),n=Xa(t.chroma);return za().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function $F(e){const{intervals:t,tonic:n}=Wr(e),r=Na(t,n);return s=>s?r(s>0?s-1:s):""}function e7(e){const{intervals:t,tonic:n}=Wr(e);return Na(t,n)}var t7={getChord:Ei,get:Wr,detect:uF,chordScales:UF,extended:qF,reduced:QF,tokenize:Um,transpose:JF,degrees:$F,steps:e7,chord:jF},n7=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],r7=n7,Ka=[];r7.forEach(([e,t,n])=>p7(e,t,n));var s7={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function i7(){return Ka.reduce((e,t)=>(t.names.forEach(n=>e.push(n)),e),[])}function a7(){return Ka.map(e=>e.shorthand)}var o7=/^([^.]+)(\.*)$/;function qm(e){const[t,n,r]=o7.exec(e)||[],s=Ka.find(o=>o.shorthand===n||o.names.includes(n));if(!s)return s7;const i=h7(s.fraction,r.length),a=i[0]/i[1];return{...s,name:e,dots:r,value:a,fraction:i}}var u7=e=>qm(e).value,c7=e=>qm(e).fraction,l7={names:i7,shorthands:a7,get:qm,value:u7,fraction:c7};function p7(e,t,n){Ka.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:t,names:n})}function h7(e,t){const n=Math.pow(2,t);let r=e[0]*n,s=e[1]*n;const i=r;for(let a=0;a<t;a++)r+=i/Math.pow(2,a+1);for(;r%2===0&&s%2===0;)r/=2,s/=2;return[r,s]}function d7(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var YP=xt,m7=e=>xt(e).name,f7=e=>xt(e).semitones,g7=e=>xt(e).q,y7=e=>xt(e).num;function b7(e){const t=xt(e);return t.empty?"":t.simple+t.q}function M7(e){const t=xt(e);if(t.empty)return"";const n=(7-t.step)%7,r=t.type==="perfectable"?-t.alt:-(t.alt+1);return xt({step:n,alt:r,oct:t.oct,dir:t.dir}).name}var P7=[1,2,2,3,3,4,5,5,6,6,7,7],v7="P m M m M P d P m M m M".split(" ");function C7(e){const t=e<0?-1:1,n=Math.abs(e),r=n%12,s=Math.floor(n/12);return t*(P7[r]+7*s)+v7[r]}var A7=ka,HP=KP((e,t)=>[e[0]+t[0],e[1]+t[1]]),D7=e=>t=>HP(e,t),x7=KP((e,t)=>[e[0]-t[0],e[1]-t[1]]);function F7(e,t){const n=YP(e);if(n.empty)return"";const[r,s,i]=n.coord;return pi([r+t,s,i]).name}var as={names:d7,get:YP,name:m7,num:y7,semitones:f7,quality:g7,fromSemitones:C7,distance:A7,invert:M7,simplify:b7,add:HP,addTo:D7,substract:x7,transposeFifths:F7};function KP(e){return(t,n)=>{const r=xt(t).coord,s=xt(n).coord;if(r&&s){const i=e(r,s);return pi(i).name}}}function OP(e){return+e>=0&&+e<=127}function jP(e){if(OP(e))return+e;const t=Xe(e);return t.empty?null:t.midi}function w7(e,t=440){return Math.pow(2,(e-69)/12)*t}var E7=Math.log(2),S7=Math.log(440);function Qm(e){const t=12*(Math.log(e)-S7)/E7+69;return Math.round(t*100)/100}var B7="C C# D D# E F F# G G# A A# B".split(" "),Z7="C Db D Eb E F Gb G Ab A Bb B".split(" ");function yr(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);const n=(t.sharps===!0?B7:Z7)[e%12];if(t.pitchClass)return n;const r=Math.floor(e/12)-1;return n+r}function $m(e){return e%12}function k7(e){return e.split("").reduce((t,n,r)=>(r<12&&n==="1"&&t.push(r),t),[])}function V7(e){return e.map($m).sort((t,n)=>t-n).filter((t,n,r)=>n===0||t!==r[n-1])}function e1(e){return Array.isArray(e)?V7(e):k7(e)}function X7(e){const t=e1(e);return n=>{const r=$m(n);for(let s=0;s<12;s++){if(t.includes(r+s))return n+s;if(t.includes(r-s))return n-s}}}function JP(e,t){const n=e1(e),r=n.length;return s=>{const i=s<0?(r- -s%r)%r:s%r,a=Math.floor(s/r);return n[i]+a*12+t}}function G7(e,t){const n=JP(e,t);return r=>{if(r!==0)return n(r>0?r-1:r)}}var T7={chroma:$m,freqToMidi:Qm,isMidi:OP,midiToFreq:w7,midiToNoteName:yr,pcsetNearest:X7,pcset:e1,pcsetDegrees:G7,pcsetSteps:JP,toMidi:jP},W7=["C","D","E","F","G","A","B"],UP=e=>e.name,qP=e=>e.map(Xe).filter(t=>!t.empty);function L7(e){return e===void 0?W7.slice():Array.isArray(e)?qP(e).map(UP):[]}var Cn=Xe,R7=e=>Cn(e).name,_7=e=>Cn(e).pc,I7=e=>Cn(e).acc,N7=e=>Cn(e).oct,z7=e=>Cn(e).midi,Y7=e=>Cn(e).freq,H7=e=>Cn(e).chroma;function QP(e){return yr(e)}function K7(e){return yr(Qm(e))}function O7(e){return yr(Qm(e),{sharps:!0})}function j7(e){return yr(e,{sharps:!0})}var J7=ka,Mn=vn,U7=vn,$P=e=>t=>Mn(t,e),q7=$P,ev=e=>t=>Mn(e,t),Q7=ev;function Yi(e,t){return Mn(e,[t,0])}var $7=Yi;function ew(e,t){return Mn(e,[0,t])}var t1=(e,t)=>e.height-t.height,tw=(e,t)=>t.height-e.height;function tv(e,t){return t=t||t1,qP(e).sort(t).map(UP)}function nv(e){return tv(e,t1).filter((t,n,r)=>n===0||t!==r[n-1])}var nw=e=>{const t=Cn(e);return t.empty?"":yr(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function rv(e,t){const n=Cn(e);if(n.empty)return"";const r=Cn(t||yr(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;const s=n.chroma-n.alt,i=r.chroma-r.alt,a=s>11||i<0?-1:s<0||i>11?1:0,o=n.oct+a;return r.pc+o}var dr={names:L7,get:Cn,name:R7,pitchClass:_7,accidentals:I7,octave:N7,midi:z7,ascending:t1,descending:tw,distance:J7,sortedNames:tv,sortedUniqNames:nv,fromMidi:QP,fromMidiSharps:j7,freq:Y7,fromFreq:K7,fromFreqSharps:O7,chroma:H7,transpose:Mn,tr:U7,transposeBy:$P,trBy:q7,transposeFrom:ev,trFrom:Q7,transposeFifths:Yi,transposeOctaves:ew,trFifths:$7,simplify:nw,enharmonic:rv},sv={empty:!0,name:"",chordType:""},_f={};function mr(e){return typeof e=="string"?_f[e]||(_f[e]=cw(e)):typeof e=="number"?mr(Oa[e]||""):Xm(e)?iw(e):Vm(e)?mr(e.name):sv}var rw=mr;function sw(e=!0){return(e?Oa:uw).slice()}function iw(e){return mr(Za(e.alt)+Oa[e.step])}var aw=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function ow(e){return aw.exec(e)||["","","",""]}var iv="I II III IV V VI VII",Oa=iv.split(" "),uw=iv.toLowerCase().split(" ");function cw(e){const[t,n,r,s]=ow(e);if(!r)return sv;const i=r.toUpperCase(),a=Oa.indexOf(i),o=Gm(n),u=1;return{empty:!1,name:t,roman:r,interval:Xn({step:a,alt:o,dir:u}).name,acc:n,chordType:s,alt:o,step:a,major:r===i,oct:0,dir:u}}var lw={names:sw,get:mr,romanNumeral:rw},bt=Object.freeze([]),av={type:"major",tonic:"",alteration:0,keySignature:""},Si={tonic:"",grades:bt,intervals:bt,scale:bt,triads:bt,chords:bt,chordsHarmonicFunction:bt,chordScales:bt,secondaryDominants:bt,secondaryDominantSupertonics:bt,substituteDominantsMinorRelative:bt,substituteDominants:bt,substituteDominantSupertonics:bt,secondaryDominantsMinorRelative:bt},pw={...av,...Si,type:"major",minorRelative:"",scale:bt,substituteDominants:bt,secondaryDominantSupertonics:bt,substituteDominantsMinorRelative:bt},hw={...av,type:"minor",relativeMajor:"",natural:Si,harmonic:Si,melodic:Si},Ao=(e,t,n="")=>t.map((r,s)=>`${e[s]}${n}${r}`);function ja(e,t,n,r,s){return i=>{const a=e.map(f=>mr(f).interval||""),o=a.map(f=>Mn(i,f)),u=Ao(o,n),c=o.map(f=>Mn(f,"5P")).map(f=>o.includes(f)&&!u.includes(f+"7")?f+"7":""),p=If(c,t),d=c.map(f=>{if(!f)return"";const P=f.slice(0,-1);return Mn(P,"5d")+"7"}),m=If(d,t);return{tonic:i,grades:e,intervals:a,scale:o,triads:Ao(o,t),chords:u,chordsHarmonicFunction:r.slice(),chordScales:Ao(o,s," "),secondaryDominants:c,secondaryDominantSupertonics:p,substituteDominants:d,substituteDominantSupertonics:m,secondaryDominantsMinorRelative:p,substituteDominantsMinorRelative:m}}}var If=(e,t)=>e.map((n,r)=>{if(!n)return"";const s=n.slice(0,-1),i=Mn(s,"5P");return t[r].endsWith("m")?i+"m7":i+"m7b5"}),ov=(e,t)=>{const n=Xe(e),r=Xe(t);return n.empty||r.empty?0:r.coord[0]-n.coord[0]},dw=ja("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),mw=ja("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),fw=ja("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),gw=ja("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function yw(e){const t=Xe(e).pc;if(!t)return pw;const n=dw(t),r=ov("C",t);return{...n,type:"major",minorRelative:Mn(t,"-3m"),alteration:r,keySignature:Za(r)}}function bw(e){const t=Xe(e).pc;if(!t)return hw;const n=ov("C",t)-3;return{type:"minor",tonic:t,relativeMajor:Mn(t,"3m"),alteration:n,keySignature:Za(n),natural:mw(t),harmonic:fw(t),melodic:gw(t)}}function Mw(e){return typeof e=="number"?Yi("C",e):typeof e=="string"&&/^b+|#+$/.test(e)?Yi("C",Gm(e)):null}var Pw={majorKey:yw,majorTonicFromKeySignature:Mw,minorKey:bw},vw=Xn;function Cw(e){const t=Xn(e);return t.empty?"":t.simple+t.q}function Aw(e,t){const n=vw(e);if(n.empty)return"";const[r,s,i]=n.coord;return yP([r+t,s,i]).name}var n1=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Nf={...hr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},r1=n1.map(ww),Oo={};r1.forEach(e=>{Oo[e.name]=e,e.aliases.forEach(t=>{Oo[t]=e})});function Zr(e){return typeof e=="string"?Oo[e.toLowerCase()]||Nf:e&&e.name?Zr(e.name):Nf}var Dw=Zr;function uv(){return r1.slice()}var xw=uv;function Fw(){return r1.map(e=>e.name)}function ww(e){const[t,n,r,s,i,a,o]=e,u=o?[o]:[],c=Number(n).toString(2);return{empty:!1,intervals:Ha(s).intervals,modeNum:t,chroma:c,normalized:c,name:s,setNum:n,alt:r,triad:i,seventh:a,aliases:u}}function Ew(e,t){return Zr(e).intervals.map(n=>vn(t,n))}function cv(e){return(t,n)=>{const r=Zr(t);if(r.empty)return[];const s=ms(r.modeNum,e),i=r.intervals.map(a=>vn(n,a));return s.map((a,o)=>i[o]+a)}}var Sw=cv(n1.map(e=>e[4])),Bw=cv(n1.map(e=>e[5]));function lv(e,t){const n=Zr(t),r=Zr(e);return n.empty||r.empty?"":Cw(Aw("1P",r.alt-n.alt))}function Zw(e,t,n){return vn(n,lv(e,t))}var kw={get:Zr,names:Fw,all:uv,distance:lv,relativeTonic:Zw,notes:Ew,triads:Sw,seventhChords:Bw,entries:xw,mode:Dw};function Vw(e){const[t,n,r,s]=Tm(e);return t===""?Do("",e):t==="A"&&s==="ug"?Do("","aug"):Do(t+n,r+s)}function Do(e,t){const n=t.split("/");if(n.length===1)return[e,n[0],""];const[r,s,i,a]=Tm(n[1]);return r!==""&&i===""&&a===""?[e,n[0],r+s]:[e,t,""]}function Xw(e,t){return t.map(mr).map(n=>vn(e,Xn(n))+n.chordType)}function Gw(e,t){return t.map(n=>{const[r,s]=Vw(n),i=ka(e,r);return mr(Xn(i)).name+s})}var Tw={fromRomanNumerals:Xw,toRomanNumerals:Gw};function pv(e){const t=Wm(e.map(n=>typeof n=="number"?n:jP(n)));return!e.length||t.length!==e.length?[]:t.reduce((n,r)=>{const s=n[n.length-1];return n.concat(Va(s,r).slice(1))},[t[0]])}function Ww(e,t){return pv(e).map(n=>yr(n,t))}var Lw={numeric:pv,chromatic:Ww},Rw={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function hv(e){if(typeof e!="string")return["",""];const t=e.indexOf(" "),n=Xe(e.substring(0,t));if(n.empty){const s=Xe(e);return s.empty?["",e]:[s.name,""]}const r=e.substring(n.name.length+1).toLowerCase();return[n.name,r.length?r:""]}var _w=IP;function Tn(e){const t=Array.isArray(e)?e:hv(e),n=Xe(t[0]).name,r=Ha(t[1]);if(r.empty)return Rw;const s=r.name,i=n?r.intervals.map(o=>vn(n,o)):[],a=n?n+" "+s:s;return{...r,name:a,type:s,tonic:n,notes:i}}var Iw=Tn;function Nw(e,t={}){const n=xP(e),r=Xe(t.tonic??e[0]??""),s=r.chroma;if(s===void 0)return[];const i=n.split("");i[s]="1";const a=ms(s,i).join(""),o=ys().find(c=>c.chroma===a),u=[];return o&&u.push(r.name+" "+o.name),t.match==="exact"||dv(a).forEach(c=>{u.push(r.name+" "+c)}),u}function zw(e){const t=Tn(e),n=Xa(t.chroma);return EP().filter(r=>n(r.chroma)).map(r=>r.aliases[0])}function dv(e){const t=Rm(e)?e:Tn(e).chroma,n=Ga(t);return ys().filter(r=>n(r.chroma)).map(r=>r.name)}function Yw(e){const t=Xa(Tn(e).chroma);return ys().filter(n=>t(n.chroma)).map(n=>n.name)}function mv(e){const t=e.map(s=>Xe(s).pc).filter(s=>s),n=t[0],r=nv(t);return ms(r.indexOf(n),r)}function Hw(e){const t=Tn(e);if(t.empty)return[];const n=t.tonic?t.notes:t.intervals;return _m(t.chroma).map((r,s)=>{const i=Tn(r).name;return i?[n[s],i]:["",""]}).filter(r=>r[0])}function Kw(e){const t=Array.isArray(e)?mv(e):Tn(e).notes,n=t.map(r=>Xe(r).chroma);return r=>{const s=Xe(typeof r=="number"?QP(r):r),i=s.height;if(i===void 0)return;const a=i%12,o=n.indexOf(a);if(o!==-1)return rv(s.name,t[o])}}function Ow(e){const t=Kw(e);return(n,r)=>{const s=Xe(n).height,i=Xe(r).height;return s===void 0||i===void 0?[]:Va(s,i).map(t).filter(a=>a)}}function jw(e){const{intervals:t,tonic:n}=Tn(e),r=MP(t,n);return s=>s?r(s>0?s-1:s):""}function Jw(e){const{intervals:t,tonic:n}=Tn(e);return MP(t,n)}var os={degrees:jw,detect:Nw,extended:dv,get:Tn,modeNames:Hw,names:_w,rangeOf:Ow,reduced:Yw,scaleChords:zw,scaleNotes:mv,steps:Jw,tokenize:hv,scale:Iw},Uw={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},qw=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function Qw(){return qw.slice()}var $w=/^(\d*\d(?:\+\d)*)\/(\d+)$/,zf=new Map;function eE(e){const t=JSON.stringify(e),n=zf.get(t);if(n)return n;const r=rE(s1(e));return zf.set(t,r),r}function s1(e){if(typeof e=="string"){const[i,a,o]=$w.exec(e)||[];return s1([a,o])}const[t,n]=e,r=+n;if(typeof t=="number")return[t,r];const s=t.split("+").map(i=>+i);return s.length===1?[s[0],r]:[s,r]}var tE={names:Qw,parse:s1,get:eE},nE=e=>Math.log(e)/Math.log(2)%1===0;function rE([e,t]){const n=Array.isArray(e)?e.reduce((o,u)=>o+u,0):e,r=t;if(n===0||r===0)return Uw;const s=Array.isArray(e)?`${e.join("+")}/${t}`:`${e}/${t}`,i=Array.isArray(e)?e:[],a=r===4||r===2?"simple":r===8&&n%3===0?"compound":nE(r)?"irregular":"irrational";return{empty:!1,name:s,type:a,upper:n,lower:r,additive:i}}var sE=LP,iE=wP,aE=_P,oE=zP;const uE=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:Ex,Array:Tx,Chord:t7,ChordDictionary:aE,ChordType:_P,Collection:_x,Core:LP,DurationValue:l7,Interval:as,Key:Pw,Midi:T7,Mode:kw,Note:dr,PcSet:iE,Pcset:wP,Progression:Tw,Range:Lw,RomanNumeral:lw,Scale:os,ScaleDictionary:oE,ScaleType:zP,TimeSignature:tE,Tonal:sE,accToAlt:Km,altToAcc:Hm,chroma:BP,coordToInterval:pi,coordToNote:Om,coordinates:Ra,deprecate:fs,distance:jm,fillStr:TP,height:Nm,interval:xt,isNamed:WP,isNamedPitch:li,isPitch:La,midi:ZP,note:Gn,pitch:_a,stepToLetter:Ym,tokenizeInterval:zm,tokenizeNote:Ia,tonicIntervalsTransposer:Na,transpose:is},Symbol.toStringTag,{value:"Module"})),cE=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],lE=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],pE=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],hE={b:-1,"#":1},dE=e=>{const[t,...n]=e.split("");return lE.indexOf(t.toLowerCase())+n.reduce((r,s)=>r+hE[s],0)};function mE(e){const t=(e||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return t?t.slice(1):[]}const jo=e=>e%12,fv=e=>{let t=Number(e);return isNaN(t)?as.semitones(e):t},Jo=(e,t)=>{if(typeof e=="number")return e;if(typeof e=="string")return $n(e,t)},fE=(e,t=!1)=>{const n=Math.floor(e/12)-1;return(t?pE:cE)[e%12]+n};function gE(e,t,n=1){e=e.map(s=>typeof s=="string"?$n(s):s);const r=Math.floor(t/e.length)*n*12;return t=Yt(t,e.length),e[t]+r}function yE(e,t,n){let r=0,s=1/0;return t.forEach((i,a)=>{const o=Math.abs(i-e);(o<s||n)&&(r=a,s=o)}),r}let xo={};function bE(e,t,n,r){let[s,i]=os.tokenize(t);const a=Jo(s),o=jo(a);if(!xo[i]){let{intervals:d}=os.get(`C ${i}`);xo[i]=d.map(fv)}const u=xo[i];if(!u)return null;let c=a;if(n){n=Jo(n,3);const d=jo(n),m=Yt(d-o,12),f=yE(m,u,r);e=e+f,c=n-m}const p=Math.floor(e/u.length)*12;return e=Yt(e,u.length),u[e]+c+p}let Yf={below:e=>e.slice(-1)[0],duck:e=>e.slice(-1)[0],above:e=>e[0],root:e=>e[0]};function ME({chord:e,dictionary:t,offset:n=0,n:r,mode:s="below",anchor:i="c5",octaves:a=1}){const[o,u]=mE(e),c=dE(o);i=Jo((i==null?void 0:i.note)||i,4);const p=jo(i),d=t[u].map(k=>(typeof k=="string"?k.split(" "):k).map(fv));let m,f,P=d.map((k,V)=>{const T=Yf[s](k),z=Yt(p-T-c,12);return(m===void 0||z<m)&&(m=z,f=V),z});s==="root"&&(f=0);const y=Math.ceil(n/d.length)*12,A=Yt(f+n,d.length),F=d[A],Z=Yf[s](F),X=i-P[A]+y,w=F.map(k=>X-Z+k);let D=w.map(k=>fE(k));return s==="duck"&&(D=D.filter((k,V)=>w[V]!==i)),r!==void 0?[gE(D,r,a)]:D}const PE=e=>(e<=0?-1:1)+e*7+"P";function vE(e,t){t=t.replaceAll(":"," "),e=Math.ceil(e);let{intervals:n,tonic:r,empty:s}=os.get(t);if(s&&fr(t)||s&&!r)throw new Error('incomplete scale. Make sure to use ":" instead of spaces, example: .scale("C:major")');if(s)throw new Error(`invalid scale "${t}"`);r=r||"C";const{pc:i,oct:a=3}=dr.get(r),o=Math.floor(e/n.length),u=Yt(e,n.length),c=as.add(n[u],PE(o));return dr.transpose(i+a,c)}function Hf(e,t,n){let[r,s]=os.tokenize(e),{notes:i}=os.get(`${r} ${s}`);if(i=i.map(f=>dr.get(f).pc),t=Number(t),isNaN(t))throw new Error(`scale offset "${t}" not a number`);const{pc:a,oct:o=3}=dr.get(n),u=i.indexOf(a);if(u===-1)throw new Error(`note "${n}" is not in scale "${e}"`);let c=u,p=o,d=a;const m=Math.sign(t);for(;Math.abs(c-u)<Math.abs(t);){c+=m;const f=Yt(c,i.length);m<0&&d[0]==="C"&&(p+=m),d=i[f],m>0&&d[0]==="C"&&(p+=m)}return d+p}const{transpose:gv,trans:yv}=R(["transpose","trans"],function(e,t){return t.withHap(n=>{const r=n.value.note??n.value;if(typeof r=="number"){let a;typeof e=="number"?a=e:typeof e=="string"&&(a=as.semitones(e)||0);const o=r+a;return typeof n.value=="object"?n.withValue(()=>({...n.value,note:o})):n.withValue(()=>o)}if(typeof r!="string"||!fr(r))return ct(`[tonal] transpose: not a note "${r}"`,"warning"),n;const s=isNaN(Number(e))?String(e):as.fromSemitones(e),i=dr.simplify(dr.transpose(r,s));return typeof n.value=="object"?n.withValue(()=>({...n.value,note:i})):n.withValue(()=>i)})}),{scaleTranspose:bv,scaleTrans:Mv,strans:Pv}=R(["scaleTranspose","scaleTrans","strans"],function(e,t){return t.withHap(n=>{if(!n.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof n.value=="object")return n.withValue(()=>({...n.value,note:Hf(n.context.scale,Number(e),n.value.note)}));if(typeof n.value!="string")throw new Error("can only use scaleTranspose with notes");return n.withValue(()=>Hf(n.context.scale,Number(e),n.value))})}),vv=R("scale",function(e,t){return Array.isArray(e)&&(e=e.flat().join(" ")),t.fmap(n=>{const r=typeof n=="object";let s=r?n.n:n;if(r&&delete n.n,fr(s))return it(s);let i=Number(s),a=0;if(isNaN(i)){if(s=String(s),!/^[-+]?\d+(#*|b*){1}$/.test(s))return ct(`[tonal] invalid scale step "${s}", expected number or integer with optional # b suffixes`,"error"),Ge;const o=s.indexOf("#");if(o>=0)i=Number(s.substring(0,o)),a=s.length-o;else{const u=s.indexOf("b");i=Number(s.substring(0,u)),a=u-s.length}}try{let o;r&&n.anchor?o=bE(i,e,n.anchor):o=vE(i,e),a!=0&&(o=dr.transpose(o,as.fromSemitones(a))),n=it(r?{...n,note:o}:o)}catch(o){ct(`[tonal] ${o.message}`,"error"),n=Ge}return n}).outerJoin().withHap(n=>n.setContext({...n.context,scale:e}))},!0,!0);var Kf={},Di={},Ds={},Of;function Cv(){if(Of)return Ds;Of=1,Ds.__esModule=!0,Ds.getBestVoicing=void 0;function e(t){var n=t.chord,r=t.range,s=t.finder,i=t.picker,a=t.lastVoicing,o=s(n,r);return o.length?i(o,a):[]}return Ds.getBestVoicing=e,Ds}var xs={};const Av=FD(uE);var Fs={},jf;function Dv(){if(jf)return Fs;jf=1,Fs.__esModule=!0,Fs.tokenizeChord=void 0;function e(t){var n=(t||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return n?n.slice(1):[]}return Fs.tokenizeChord=e,Fs}var Jf;function CE(){if(Jf)return xs;Jf=1,xs.__esModule=!0,xs.voicingsInRange=void 0;var e=Av,t=xv(),n=Dv();function r(s,i,a){i===void 0&&(i=t.lefthand),a===void 0&&(a=["D3","A4"]);var o=(0,n.tokenizeChord)(s),u=o[0],c=o[1];if(!i[c])return[];var p=i[c].map(function(m){return m.split(" ")}),d=e.Range.chromatic(a);return p.reduce(function(m,f){var P=f.map(function(Z){return e.Interval.substract(Z,f[0])}),y=e.Note.transpose(u,f[0]),A=d.filter(function(Z){return e.Note.chroma(Z)===e.Note.chroma(y)}).filter(function(Z){return e.Note.midi(e.Note.transpose(Z,P[P.length-1]))<=e.Note.midi(a[1])}).map(function(Z){return e.Note.enharmonic(Z,y)}),F=A.map(function(Z){return P.map(function(X){return e.Note.transpose(Z,X)})});return m.concat(F)},[])}return xs.voicingsInRange=r,xs}var Uf;function xv(){return Uf||(Uf=1,(function(e){var t=Di.__assign||function(){return t=Object.assign||function(o){for(var u,c=1,p=arguments.length;c<p;c++){u=arguments[c];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])}return o},t.apply(this,arguments)},n=Di.__rest||function(o,u){var c={};for(var p in o)Object.prototype.hasOwnProperty.call(o,p)&&u.indexOf(p)<0&&(c[p]=o[p]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,p=Object.getOwnPropertySymbols(o);d<p.length;d++)u.indexOf(p[d])<0&&Object.prototype.propertyIsEnumerable.call(o,p[d])&&(c[p[d]]=o[p[d]]);return c};e.__esModule=!0,e.dictionaryVoicing=e.dictionaryVoicingFinder=e.triads=e.guidetones=e.lefthand=void 0;var r=Cv(),s=CE();e.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},e.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},e.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var i=function(o){return function(u,c){return(0,s.voicingsInRange)(u,o,c)}};e.dictionaryVoicingFinder=i;var a=function(o){var u=o.dictionary,c=o.range,p=n(o,["dictionary","range"]);return(0,r.getBestVoicing)(t(t({},p),{range:c,finder:(0,e.dictionaryVoicingFinder)(u)}))};e.dictionaryVoicing=a})(Di)),Di}var ws={},qf;function AE(){if(qf)return ws;qf=1,ws.__esModule=!0,ws.minTopNoteDiff=void 0;var e=Av;function t(n,r){if(!r)return n[0];var s=function(i){return Math.abs(e.Note.midi(r[r.length-1])-e.Note.midi(i[i.length-1]))};return n.reduce(function(i,a){return s(a)<s(i)?a:i},n[0])}return ws.minTopNoteDiff=t,ws}var Qf;function DE(){return Qf||(Qf=1,(function(e){e.__esModule=!0;var t=xv(),n=AE(),r=Cv(),s=Dv();e.default={tokenizeChord:s.tokenizeChord,getBestVoicing:r.getBestVoicing,dictionaryVoicing:t.dictionaryVoicing,dictionaryVoicingFinder:t.dictionaryVoicingFinder,lefthand:t.lefthand,guidetones:t.guidetones,triads:t.triads,minTopNoteDiff:n.minTopNoteDiff}})(Kf)),Kf}var xE=DE();const $f=sP(xE),Jr={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},Ws={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing:FE,minTopNoteDiff:wE}=$f.default||$f,EE={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},SE={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},BE={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},ZE={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},Lr={lefthand:{dictionary:EE,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:BE,mode:"below",anchor:"a4"},guidetones:{dictionary:SE,mode:"above",anchor:"a4"},legacy:{dictionary:ZE,mode:"below",anchor:"a4"}};let Fv="ireal";const i1=e=>Fv=e,wv=(e,t)=>a1(e,Lr[e].dictionary,t),a1=(e,t,n=["F3","A4"])=>{Object.assign(Lr,{[e]:{dictionary:t,range:n}})},Ja=(e,t,n={})=>{Object.assign(Lr,{[e]:{dictionary:t,...n}})},kE=(e,t,n)=>{const{dictionary:r,range:s}=Lr[t];return FE({chord:e,dictionary:r,range:s,picker:wE,lastVoicing:n})};let Bi;const Ev=R("voicings",function(e,t){return t.fmap(n=>(Bi=kE(n,e,Bi),Oe(...Bi))).outerJoin()}),Sv=R("rootNotes",function(e,t){return t.fmap(n=>{const r=(n.chord||n).match(/^([a-gA-G][b#]?).*$/)[1]+e;return n.chord?{note:r}:r})}),Bv=R("voicing",function(e){return e.fmap(t=>{t=typeof t=="string"?{chord:t}:t;let{dictionary:n=Fv,chord:r,anchor:s,offset:i,mode:a,n:o,octaves:u,...c}=t;n=typeof n=="string"?Lr[n]:{dictionary:n,mode:"below",anchor:"c5"};try{let p=ME({...n,chord:r,anchor:s,offset:i,mode:a,n:o,octaves:u});return Oe(...p).note().set(c)}catch{return ct(`[voicing]: unknown chord "${r}"`),Ge}}).outerJoin()});function $r(e,t,n){n=Array.isArray(n)?n:[n],n.forEach(r=>{r[t]=r[e]})}$r("^","",[Jr,Ws]);Object.keys(Jr).forEach(e=>{if(e.includes("-")){let t=e.replace("-","m");$r(e,t,[Ws,Jr])}if(e.includes("^")){let t=e.replace("^","M");$r(e,t,[Ws,Jr])}if(e.includes("+")){let t=e.replace("+","aug");$r(e,t,[Ws,Jr])}});Ja("ireal",Jr);Ja("ireal-ext",Ws);function Zv(){Bi=void 0,i1("ireal")}const kv="@strudel/tonal",VE=Object.freeze(Object.defineProperty({__proto__:null,addVoicings:a1,packageName:kv,registerVoicings:Ja,resetVoicings:Zv,rootNotes:Sv,scale:vv,scaleTrans:Mv,scaleTranspose:bv,setDefaultVoicings:i1,setVoicingRange:wv,strans:Pv,trans:yv,transpose:gv,voicing:Bv,voicingAlias:$r,voicingRegistry:Lr,voicings:Ev},Symbol.toStringTag,{value:"Module"}));async function Vv(){const e=Ns(Ns,Promise.resolve().then(()=>_M),Promise.resolve().then(()=>LA),Promise.resolve().then(()=>VE),Promise.resolve().then(()=>GA),{hush:Gv,evaluate:Tv});await Promise.all([e,hm()])}let Uo,Fr;function Xv(e={}){um(),e.miniAllStrings!==!1&&Dm();const{prebake:t,...n}=e;return Fr=Mm({...n,transpiler:lP}),Uo=(async()=>(await Vv(),await(t==null?void 0:t()),Fr))(),zs(()=>Fr.scheduler.now()),Uo}window.initStrudel=Xv;O.prototype.play=function(){if(!Fr)throw new Error(".play: no repl found. Have you called initStrudel?");return Uo.then(()=>{Fr.setPattern(this,!0)}),this};function Gv(){Fr.stop()}async function Tv(e,t=!0){return Fr.evaluate(e,t)}const dB=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:Mu,Cyclist:_d,DEFAULT_MAX_POLYPHONY:va,Fraction:K,Hap:mt,Pattern:O,StartRules:y3,State:Sr,SyntaxError:pr,TimeSpan:tt,__chooseWith:ga,_brandBy:ma,_fitslice:Gu,_irand:fa,_keyDown:ya,_match:Tu,_mod:Yt,_morph:sa,_polymeterListSteps:Lu,_retime:Xi,_slices:Gi,accelerate:sc,activeLabel:Qp,ad:nd,add:qg,addVoicings:a1,adsr:td,aliasBank:t3,almostAlways:yM,almostNever:gM,always:MM,amp:uc,get analysers(){return Ct},get analysersData(){return lr},analyze:Cc,anchor:Ah,and:gy,apply:Ky,applyFM:Ys,applyGainCurve:wn,ar:sd,arp:Zg,arpWith:Bg,arrange:Tg,as:Cd,att:lc,attack:cc,averageArray:uu,backgroundImage:LM,band:ry,bandf:Zc,bandq:Xc,bank:vc,base64ToUnicode:yu,bbexpr:nl,bbst:sl,beat:f2,begin:Tc,berlin:sM,berlinWith:Td,binary:z2,binaryN:Bd,bind:Ng,binshift:x0,bite:Qy,bjork:ua,blshift:ay,bor:sy,bp:Vc,bpa:Wl,bpattack:Tl,bpd:zl,bpdecay:Nl,bpe:Zl,bpenv:Bl,bpf:kc,bpq:Gc,bpr:tp,bprelease:ep,bps:Jl,bpsustain:jl,brak:ub,brand:J2,brandBy:j2,brshift:oy,bxor:iy,bypass:Tb,byteBeatExpression:tl,byteBeatStartTime:rl,calculateSteps:Sg,cat:Su,ccn:ld,ccv:pd,ceil:vy,ch:al,channel:Pl,channels:il,choose:kd,chooseCycles:Vd,chooseIn:q2,chooseInWith:ri,chooseOut:Q2,chooseWith:ni,chop:i2,chord:Ph,chunk:xb,chunkBack:Eb,chunkBackInto:Gb,chunkInto:Vb,chunkback:Sb,chunkbackinto:Xb,chunkinto:kb,clamp:qs,cleanupUi:RM,clip:W0,coarse:Yc,code2hash:Fg,color:$0,colour:ed,comb:C0,compose:Pg,compress:Ey,compressSpan:Sy,compressor:Hh,compressorAttack:jh,compressorKnee:Kh,compressorRatio:Oh,compressorRelease:Jh,compressspan:By,connectToDestination:lm,constant:vg,contract:Yu,control:cd,controls:y2,cosine:S2,cosine2:B2,cpm:Oy,cps:T0,createClock:Dd,createFilter:Vs,createParam:ei,createParams:aa,crush:zc,ctf:Al,ctlNum:hd,ctranspose:nh,curry:Pe,curve:N0,cut:vl,cutoff:Cl,cycleToSeconds:Vi,dec:xc,decay:Dc,defaultPrebake:Vv,degrade:oM,degradeBy:aM,degradeByWith:iM,degree:eh,delay:bp,delayfb:Pp,delayfeedback:Mp,delaysync:xp,delayt:Ap,delaytime:Cp,deltaSlide:z0,det:Ep,detune:wp,dfb:vp,dict:Ch,dictionary:vh,dist:Yh,distort:zh,div:ey,djf:yp,dough:d3,doughTrigger:ym,drawFrequencyScope:vm,drawLine:Cu,drawTimeScope:Pm,drive:el,drop:Iu,dry:Zp,drywet:Kd,ds:rd,dspWorklet:gm,dt:Dp,duck:qc,duckattack:$c,duckdepth:Qc,dur:_0,duration:R0,e:P2,early:jy,echo:Mb,echoWith:fb,echowith:gb,eish:w2,end:Wc,enhance:P0,eq:hy,eqt:dy,euclid:M2,euclidLegato:D2,euclidLegatoRot:x2,euclidRot:C2,euclidish:F2,euclidrot:v2,evalScope:Ns,evaluate:Tv,every:Hy,expand:zu,expression:t0,extend:Nu,fadeInTime:Xp,fadeOutTime:Vp,fadeTime:kp,fanchor:rp,fast:Wy,fastChunk:Zb,fastGap:Zy,fastcat:Pt,fastchunk:Bb,fastgap:ky,fft:Ac,filter:Ib,filterWhen:Nb,firstOf:Yy,fit:p2,flatten:Zn,floor:Py,fm:dc,fmattack:fc,fmdecay:yc,fmenv:mc,fmh:pc,fmi:hc,fmrelease:Mc,fmsustain:bc,fmvelocity:Pc,fmwave:gc,focus:Vy,focusSpan:Xy,focusspan:Gy,fractionalArgs:Cg,frameRate:E0,frames:S0,freeze:f0,freq:Gp,freqToMidi:Ji,fromBipolar:Ay,fshift:r0,fshiftnote:s0,fshiftphase:i0,ftype:np,func:by,gain:ac,gainNode:Zt,gap:Xr,gat:jp,gate:Op,getADSRValues:fn,getAnalyserById:pm,getAnalyzerData:ai,getAudioContext:De,getAudioContextCurrentTime:o3,getAudioDevices:rm,getCachedBuffer:HM,getCompressor:Hd,getControlName:oa,getCurrentKeyboardState:vu,getDefaultValue:st,getEventOffsetMs:gg,getFreq:ou,getFrequency:lu,getLeafLocation:Da,getLeafLocations:xa,getLeaves:Am,getLfo:ii,getLoadedBuffer:KM,getOscillator:mm,getParamADSR:mn,getPerformanceTimeSeconds:Eg,getPitchEnvelope:ns,getPlayableNoteValue:Mg,getSampleBuffer:Jd,getSampleBufferSource:Ud,getSampleInfo:jd,getSound:Xs,getSoundIndex:bg,getTime:Ti,getTrigger:Id,getVibratoOscillator:rs,getWidgetID:pP,getWorklet:en,getZZFX:fm,grow:Yb,gt:cy,gte:py,h:P3,harmonic:rh,hash2code:wg,hbrick:F0,hcutoff:lp,hold:Bc,hours:B0,hp,hpa:Gl,hpattack:Xl,hpd:Il,hpdecay:_l,hpe:Sl,hpenv:El,hpf:pp,hpq:mp,hpr:$l,hprelease:Ql,hps:Ol,hpsustain:Kl,hresonance:dp,hsl:_b,hsla:Rb,hurry:Ly,hush:Gv,id:Ar,imag:M0,inhabit:BM,inhabitmod:kM,initAudio:om,initAudioOnFirstClick:um,initStrudel:Xv,initializeAudioOutput:cm,innerBind:zg,inside:Iy,inv:ib,invert:sb,ir:Xh,irand:U2,irbegin:Wh,iresponse:Gh,irspeed:Th,isControlName:qu,isNote:fr,isNoteWithOctave:mg,isPattern:ta,isaw:ti,isaw2:pa,iter:vb,iterBack:Cb,iterback:Ab,itri:X2,itri2:G2,jux:mb,juxBy:hb,juxby:db,kcutoff:u0,keep:Jg,keepif:Ug,keyAlias:Pu,keyDown:vM,krush:o0,label:$p,lastOf:zy,late:Zu,lbrick:w0,legato:L0,leslie:Jp,lfo:K0,linger:$y,listRange:Ui,loadBuffer:Pa,lock:Fp,logKey:ji,loop:Lc,loopAt:c2,loopAtCps:h2,loopBegin:Rc,loopEnd:Ic,loopat:l2,loopatcps:d2,loopb:_c,loope:Nc,lp:xl,lpa:Vl,lpattack:kl,lpd:Rl,lpdecay:Ll,lpe:wl,lpenv:Fl,lpf:Dl,lpq:gp,lpr:ql,lprelease:Ul,lps:Hl,lpsustain:Yl,lrate:Up,lsize:qp,lt:uy,lte:ly,m:M3,mapArgs:Qi,mask:Lg,midi2note:yg,midiToFreq:Er,midibend:Md,midichan:id,midicmd:ud,midimap:ad,midiport:od,miditouch:Pd,mini:Fa,mini2ast:cs,miniAllStrings:Dm,minify:v3,minutes:Z0,mod:ty,mode:Fh,morph:g2,mouseX:R2,mouseY:W2,mousex:L2,mousey:T2,mtranspose:th,mul:$g,n:nc,nanFallback:cu,ne:my,net:fy,never:bM,noise:op,noises:Ma,note:rc,noteToMidi:$n,nothing:nn,nrpnn:dd,nrpv:md,nudge:ah,numeralArgs:Wt,objectMap:bu,octave:oh,octaveR:ih,octaves:xh,octer:c0,octersub:l0,octersubsub:p0,off:ob,offset:Dh,often:mM,onTriggerSample:em,or:yy,orbit:uh,outerBind:Yg,outside:Ny,overgain:ch,overshape:lh,pace:Wu,packageName:kv,pairs:mu,palindrome:pb,pan:ph,panchor:Kp,panic:u3,panorient:fh,panspan:hh,pansplay:dh,panwidth:mh,parse:Cm,parseFractional:du,parseNumeral:qi,partials:v0,patt:Wp,pattack:Tp,patternifyAST:Tr,pcurve:Hp,pdec:Rp,pdecay:Lp,penv:Yp,perlin:rM,perlinWith:Gd,ph:pl,phasdp:Ml,phaser:hl,phasercenter:fl,phaserdepth:yl,phaserrate:ll,phasersweep:dl,phc:gl,phd:bl,phs:ml,pick:Wd,pickF:CM,pickOut:DM,pickReset:EM,pickRestart:FM,pickSqueeze:ZM,pickmod:Ld,pickmodF:AM,pickmodOut:xM,pickmodReset:SM,pickmodRestart:wM,pickmodSqueeze:VM,pipe:hu,pitchJump:Y0,pitchJumpTime:H0,ply:Ty,pm:Xg,polyBind:Og,polyTouch:vd,polymeter:$s,polyrhythm:kg,postgain:oc,pow:ny,pr:Vg,prel:zp,prelease:Np,press:lb,pressBy:cb,processSampleMap:Qd,progNum:fd,psus:Ip,psustain:_p,pure:it,pw:ol,pwrate:ul,pwsweep:cl,rand:Dt,rand2:O2,randcat:$2,randrun:Zd,range:Dy,range2:Fy,rangex:xy,rarely:fM,rate:gh,ratio:wy,rdim:Zh,real:b0,ref:m2,register:R,registerControl:B,registerLanguage:OD,registerSamplesPrefix:UM,registerSound:En,registerSynthSounds:hm,registerVoicings:Ja,registerWidgetType:KD,registerZZFXSounds:p3,reify:J,rel:Sc,release:Ec,removeUndefineds:Vr,repeatCycles:Db,repeatTime:O0,repl:WM,resetDefaultValues:im,resetDefaults:r3,resetGlobalEffects:c3,resetLoadedSounds:a3,resetVoicings:Zv,resonance:fp,rev:ku,reverseBuffer:qd,rfade:Vh,rib:Lb,ribbon:Wb,ring:h0,ringdf:m0,ringf:d0,rlp:Sh,room:wh,roomdim:Bh,roomfade:kh,roomlp:Eh,roomsize:Lh,rootNotes:Sv,rotate:pu,round:My,rsize:Ih,run:Sd,s:Qu,s_add:qb,s_alt:Ob,s_cat:Kb,s_contract:t2,s_expand:$b,s_extend:e2,s_polymeter:jb,s_sub:Qb,s_taper:Jb,s_taperlist:Ub,s_tour:n2,s_zip:r2,samples:$d,saw:us,saw2:la,scale:vv,scaleTrans:Mv,scaleTranspose:bv,scram:D0,scramble:K2,scrub:Ad,seconds:k0,seg:tb,segment:eb,semitone:bh,seq:Bu,seqPLoop:Wg,sequence:rn,sequenceP:Du,set:jg,setDefault:n3,setDefaultAudioContext:am,setDefaultValue:Ca,setDefaultValues:s3,setDefaultVoicings:i1,setGainCurve:e3,setLogger:Yd,setMaxPolyphony:tm,setMultiChannelOrbits:nm,setStringParser:Au,setTime:zs,setVersionDefaults:i3,setVoicingRange:wv,shape:Nh,shrink:Ku,shrinklist:Hu,shuffle:H2,signal:Ht,silence:Ge,sine:xd,sine2:ha,size:Rh,slice:Ju,slide:yh,slow:Ry,slowChunk:wb,slowcat:er,slowcatPrime:na,slowchunk:Fb,smear:A0,sol2note:Ag,someCycles:dM,someCyclesBy:hM,sometimes:pM,sometimesBy:lM,songPtr:V0,sound:$u,soundMap:bn,source:ec,sparsity:_y,speak:GM,speed:ia,splice:u2,splitAt:$i,spread:Bp,square:Fd,square2:Z2,squeeze:XM,squeezeBind:Hg,squiz:Qh,src:tc,stack:Oe,stackBy:Gg,stackCentre:Eu,stackLeft:Fu,stackRight:wu,steady:E2,stepBind:Kg,stepalt:Ru,stepcat:Vt,steps:s2,stepsPerOctave:sh,strans:Pv,stretch:Uh,striate:a2,stringifyValues:ea,struct:Rg,strudelScope:Rd,stut:Pb,stutWith:yb,stutwith:bb,sub:Qg,superdough:Aa,superdoughTrigger:l3,superimpose:_g,sus:wc,sustain:Fc,sustainpedal:n0,swing:rb,swingBy:nb,sysex:gd,sysexdata:bd,sysexid:yd,sz:_h,take:_u,time:da,timeCat:ra,timecat:Hb,toBipolar:Cy,tokenizeNote:au,tour:Ou,trans:yv,transpiler:lP,transpose:gv,tremolo:Hc,tremolodepth:Oc,tremolophase:Jc,tremoloshape:Uc,tremoloskew:jc,tremolosync:Kc,tri:k2,tri2:V2,triode:a0,tsdelay:y0,uid:X0,undegrade:cM,undegradeBy:uM,unicodeToBase64:gu,uniq:Dg,uniqsort:xg,uniqsortr:fu,unison:Sp,unit:qh,v:ap,val:G0,valueToMidi:fg,velocity:ic,vib:sp,vibmod:up,vibrato:ip,vmod:cp,voice:Mh,voicing:Bv,voicingAlias:$r,voicingRegistry:Lr,voicings:Ev,vowel:$h,waveformN:dm,waveloss:e0,wchoose:tM,wchooseCycles:Xd,webAudioTimeout:qr,webaudioOutput:bm,webaudioRepl:Mm,when:ab,whenKey:PM,withValue:Ig,within:zb,wrandcat:nM,xfade:Uu,xsdelay:g0,zcrush:U0,zdelay:q0,zip:ju,zipWith:Us,zmod:J0,znoise:j0,zoom:Jy,zoomArc:Uy,zoomarc:qy,zrand:I0,zzfx:Q0},Symbol.toStringTag,{value:"Module"}));let hn=[],or=0;const xi=4;let XE=e=>{let t=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(r){return n.lc=t.push(r),()=>{for(let i=or+xi;i<hn.length;)hn[i]===r?hn.splice(i,xi):i+=xi;let s=t.indexOf(r);~s&&(t.splice(s,1),--n.lc||n.off())}},notify(r,s){let i=!hn.length;for(let a of t)hn.push(a,n.value,r,s);if(i){for(or=0;or<hn.length;or+=xi)hn[or](hn[or+1],hn[or+2],hn[or+3]);hn.length=0}},off(){},set(r){let s=n.value;s!==r&&(n.value=r,n.notify(s))},subscribe(r){let s=n.listen(r);return r(n.value),s},value:e};return n},GE=(e={})=>{let t=XE(e);return t.setKey=function(n,r){let s=t.value;typeof r>"u"&&n in t.value?(t.value={...t.value},delete t.value[n],t.notify(s,n)):t.value[n]!==r&&(t.value={...t.value,[n]:r},t.notify(s,n))},t};if(typeof DelayNode<"u"){class e extends DelayNode{constructor(n,r,s,i){super(n),r=Math.abs(r),this.delayTime.value=s;const a=n.createGain();a.gain.value=Math.min(Math.abs(i),.995),this.feedback=a.gain;const o=n.createGain();return o.gain.value=r,this.delayGain=o,this.connect(a),this.connect(o),a.connect(this),this.connect=u=>o.connect(u),this}start(n){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,n+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(t,n,r){return new e(this,t,n,r)}}var o1={};o1.generateReverb=function(e,t){for(var n=e.audioContext||new AudioContext,r=n.sampleRate,s=e.numChannels||2,i=e.decayTime*1.5,a=Math.round(e.decayTime*r),o=Math.round(i*r),u=Math.round((e.fadeInTime||0)*r),c=Math.pow(1/1e3,1/a),p=n.createBuffer(s,o,r),d=0;d<s;d++){for(var m=p.getChannelData(d),f=0;f<o;f++)m[f]=LE()*Math.pow(c,f);for(var f=0;f<u;f++)m[f]*=f/u}TE(p,e.lpFreqStart||0,e.lpFreqEnd||0,e.decayTime,t)};o1.generateGraph=function(e,t,n,r,s){var i=document.createElement("canvas");i.width=t,i.height=n;var a=i.getContext("2d");a.fillStyle="#000",a.fillRect(0,0,i.width,i.height),a.fillStyle="#fff";for(var o=t/e.length,u=n/(s-r),c=0;c<e.length;c++)a.fillRect(c*o,n-(e[c]-r)*u,1,1);return i};var TE=function(e,t,n,r,s){if(t==0){s(e);return}var i=WE(e),a=new OfflineAudioContext(e.numberOfChannels,i[0].length,e.sampleRate),o=a.createBufferSource();o.buffer=e;var u=a.createBiquadFilter();t=Math.min(t,e.sampleRate/2),n=Math.min(n,e.sampleRate/2),u.type="lowpass",u.Q.value=1e-4,u.frequency.setValueAtTime(t,0),u.frequency.linearRampToValueAtTime(n,r),o.connect(u),u.connect(a.destination),o.start(),a.oncomplete=function(c){s(c.renderedBuffer)},a.startRendering(),window.filterNode=u},WE=function(e){for(var t=[],n=0;n<e.numberOfChannels;n++)t[n]=e.getChannelData(n);return t},LE=function(){return Math.random()*2-1};let Wv=e=>console.log(e);function u1(e,t="cyclist"){zt(`[${t}] error: ${e.message}`)}const zt=(...e)=>Wv(...e),Lv=e=>{Wv=e},RE=e=>{var s;if(typeof e!="string")return[];const[t,n="",r]=((s=e.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/))==null?void 0:s.slice(1))||[];return t?[t,n,r?Number(r):void 0]:[]},_E={c:0,d:2,e:4,f:5,g:7,a:9,b:11},IE={"#":1,b:-1,s:1,f:-1},Ua=(e,t=3)=>{const[n,r,s=t]=RE(e);if(!n)throw new Error('not a note: "'+e+'"');const i=_E[n.toLowerCase()],a=(r==null?void 0:r.split("").reduce((o,u)=>o+IE[u],0))||0;return(Number(s)+1)*12+i+a},Rv=e=>Math.pow(2,(e-69)/12)*440,kr=(e,t,n)=>Math.min(Math.max(e,t),n),NE=e=>12*Math.log(e/440)/Math.LN2+69,zE=(e,t)=>{if(typeof e!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:r}=e;return typeof n=="number"?NE(n):typeof r=="string"?Ua(r):typeof r=="number"?r:t};function jn(e,t=0,n){return isNaN(Number(e))?(!n&&zt(`"${e}" is not a number, falling back to ${t}`,"warning"),t):e}const _v=(e,t)=>(e%t+t)%t,eg=(e,t)=>_v(Math.round(jn(e,0)),t);function YE(e,t){return e/t}typeof AudioContext<"u"&&(AudioContext.prototype.adjustLength=function(e,t,n=1,r=0){const s=Math.floor(kr(r,0,1)*t.length),i=t.sampleRate*e,a=this.createBuffer(t.numberOfChannels,t.length,t.sampleRate);for(let o=0;o<t.numberOfChannels;o++){let u=t.getChannelData(o),c=a.getChannelData(o);for(let p=0;p<i;p++){let d=(s+p*Math.abs(n))%u.length;n<1&&(d=d*-1),c[p]=u.at(d)||0}}return a},AudioContext.prototype.createReverb=function(e,t,n,r,s,i,a){const o=this.createConvolver();return o.generate=(u=2,c=.1,p=15e3,d=1e3,m,f,P)=>{o.duration=u,o.fade=c,o.lp=p,o.dim=d,o.ir=m,o.irspeed=f,o.irbegin=P,m?o.buffer=this.adjustLength(u,m,f,P):o1.generateReverb({audioContext:this,numChannels:2,decayTime:u,fadeInTime:c,lpFreqStart:p,lpFreqEnd:d},y=>{o.buffer=y})},o.generate(e,t,n,r,s,i,a),o});var tg={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class e extends GainNode{constructor(n,r){if(super(n),!tg[r])throw new Error("vowel: unknown vowel "+r);const{gains:s,qs:i,freqs:a}=tg[r],o=n.createGain();for(let u=0;u<5;u++){const c=n.createGain();c.gain.value=s[u];const p=n.createBiquadFilter();p.type="bandpass",p.Q.value=i[u],p.frequency.value=a[u],this.connect(p),p.connect(c),c.connect(o)}return o.gain.value=8,this.connect=u=>o.connect(u),this}}AudioContext.prototype.createVowelFilter=function(t){return new e(this,t)}}const HE="data:text/javascript;base64,KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NsYXNzIGd0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMoZSwxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGUsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKXtsZXQgcj10W3NdLmxlbmd0aDtyIT10aGlzLmlucHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKHMscil9Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspe2xldCByPWVbc10ubGVuZ3RoO3IhPXRoaXMub3V0cHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhzLHIpfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxlKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkoZSk7Zm9yKGxldCBzPTA7czxlO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KGUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtzXT10aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQsZSl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bc109bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dFtlXVtzXTt0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5zZXQocix0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IHI9dGhpcy5vdXRwdXRCdWZmZXJzW2VdW3NdLnN1YmFycmF5KDAsMTI4KTt0W2VdW3NdLnNldChyKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IGU9MDtlPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW2VdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspZm9yKGxldCBzPTA7czx0aGlzLmJsb2NrU2l6ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdW3NdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW2VdW3NdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQsZSxzKXtjb25zdCBvPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIW8/ITE6KHRoaXMuc3RhcnRlZD1vLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLHMpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhlKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQsZSxzKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBJdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLnNpemUqMikscz0wO3M8ZS5sZW5ndGg7cys9Mil7Y29uc3QgYT1NYXRoLlBJKnMvdGhpcy5zaXplO2Vbc109TWF0aC5jb3MoYSksZVtzKzFdPS1NYXRoLnNpbihhKX10aGlzLnRhYmxlPWU7Zm9yKHZhciByPTAsbz0xO3RoaXMuc2l6ZT5vO288PD0xKXIrKzt0aGlzLl93aWR0aD1yJTI9PT0wP3ItMTpyLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgaT0wO2k8dGhpcy5fYml0cmV2Lmxlbmd0aDtpKyspe3RoaXMuX2JpdHJldltpXT0wO2Zvcih2YXIgdT0wO3U8dGhpcy5fd2lkdGg7dSs9Mil7dmFyIGM9dGhpcy5fd2lkdGgtdS0yO3RoaXMuX2JpdHJldltpXXw9KGk+Pj51JjMpPDxjfX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxyPTA7cjx0Lmxlbmd0aDtyKz0yKXNbcj4+PjFdPXRbcl07cmV0dXJuIHN9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLHI9MDtyPHMubGVuZ3RoO3IrPTIpc1tyXT10W3I+Pj4xXSxzW3IrMV09MDtyZXR1cm4gc31jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgZT10aGlzLl9jc2l6ZSxzPWU+Pj4xLHI9MjtyPHM7cis9Mil0W2Utcl09dFtyXSx0W2UtcisxXT0tdFtyKzFdfXRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxlKXtpZih0PT09ZSl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9ZSx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgscj0xPDxzLG89ZS9yPDwxLGksdSxjPXRoaXMuX2JpdHJldjtpZihvPT09NClmb3IoaT0wLHU9MDtpPGU7aSs9byx1Kyspe2NvbnN0IGQ9Y1t1XTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKGksZCxyKX1lbHNlIGZvcihpPTAsdT0wO2k8ZTtpKz1vLHUrKyl7Y29uc3QgZD1jW3VdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQoaSxkLHIpfXZhciBhPXRoaXMuX2ludj8tMToxLGg9dGhpcy50YWJsZTtmb3Iocj4+PTI7cj49MjtyPj49Mil7bz1lL3I8PDE7dmFyIG09bz4+PjI7Zm9yKGk9MDtpPGU7aSs9bylmb3IodmFyIHA9aSttLGw9aSxmPTA7bDxwO2wrPTIsZis9cil7Y29uc3QgZD1sLHY9ZCttLGc9dittLEk9ZyttLGI9dFtkXSxCPXRbZCsxXSxfPXRbdl0sdz10W3YrMV0sVD10W2ddLFA9dFtnKzFdLHk9dFtJXSxBPXRbSSsxXSx4PWIsVj1CLEY9aFtmXSxNPWEqaFtmKzFdLE89XypGLXcqTSxOPV8qTSt3KkYsWT1oWzIqZl0sTD1hKmhbMipmKzFdLEg9VCpZLVAqTCxVPVQqTCtQKlksSz1oWzMqZl0sWj1hKmhbMypmKzFdLCQ9eSpLLUEqWixHPXkqWitBKkssaj14K0gsaz1WK1Usej14LUgsSj1WLVUsUT1PKyQsRT1OK0csUj1hKihPLSQpLFg9YSooTi1HKSxzdD1qK1EsaXQ9aytFLG90PWotUSxhdD1rLUUsdXQ9eitYLGh0PUotUixjdD16LVgsbHQ9SitSO3RbZF09c3QsdFtkKzFdPWl0LHRbdl09dXQsdFt2KzFdPWh0LHRbZ109b3QsdFtnKzFdPWF0LHRbSV09Y3QsdFtJKzFdPWx0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPW9bZV0sdT1vW2UrMV0sYz1vW2Urc10sYT1vW2UrcysxXSxoPWkrYyxtPXUrYSxwPWktYyxsPXUtYTtyW3RdPWgsclt0KzFdPW0sclt0KzJdPXAsclt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPXRoaXMuX2ludj8tMToxLHU9cyoyLGM9cyozLGE9b1tlXSxoPW9bZSsxXSxtPW9bZStzXSxwPW9bZStzKzFdLGw9b1tlK3VdLGY9b1tlK3UrMV0sZD1vW2UrY10sdj1vW2UrYysxXSxnPWErbCxJPWgrZixiPWEtbCxCPWgtZixfPW0rZCx3PXArdixUPWkqKG0tZCksUD1pKihwLXYpLHk9ZytfLEE9SSt3LHg9YitQLFY9Qi1ULEY9Zy1fLE09SS13LE89Yi1QLE49QitUO3JbdF09eSxyW3QrMV09QSxyW3QrMl09eCxyW3QrM109VixyW3QrNF09RixyW3QrNV09TSxyW3QrNl09TyxyW3QrN109Tn1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQsZT10aGlzLl9jc2l6ZSxzPXRoaXMuX3dpZHRoLHI9MTw8cyxvPWUvcjw8MSxpLHUsYz10aGlzLl9iaXRyZXY7aWYobz09PTQpZm9yKGk9MCx1PTA7aTxlO2krPW8sdSsrKXtjb25zdCBmdD1jW3VdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKGksZnQ+Pj4xLHI+Pj4xKX1lbHNlIGZvcihpPTAsdT0wO2k8ZTtpKz1vLHUrKyl7Y29uc3QgZnQ9Y1t1XTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChpLGZ0Pj4+MSxyPj4+MSl9dmFyIGE9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihyPj49MjtyPj0yO3I+Pj0yKXtvPWUvcjw8MTt2YXIgbT1vPj4+MSxwPW0+Pj4xLGw9cD4+PjE7Zm9yKGk9MDtpPGU7aSs9bylmb3IodmFyIGY9MCxkPTA7Zjw9bDtmKz0yLGQrPXIpe3ZhciB2PWkrZixnPXYrcCxJPWcrcCxiPUkrcCxCPXRbdl0sXz10W3YrMV0sdz10W2ddLFQ9dFtnKzFdLFA9dFtJXSx5PXRbSSsxXSxBPXRbYl0seD10W2IrMV0sVj1CLEY9XyxNPWhbZF0sTz1hKmhbZCsxXSxOPXcqTS1UKk8sWT13Kk8rVCpNLEw9aFsyKmRdLEg9YSpoWzIqZCsxXSxVPVAqTC15KkgsSz1QKkgreSpMLFo9aFszKmRdLCQ9YSpoWzMqZCsxXSxHPUEqWi14KiQsaj1BKiQreCpaLGs9VitVLHo9RitLLEo9Vi1VLFE9Ri1LLEU9TitHLFI9WStqLFg9YSooTi1HKSxzdD1hKihZLWopLGl0PWsrRSxvdD16K1IsYXQ9SitzdCx1dD1RLVg7aWYodFt2XT1pdCx0W3YrMV09b3QsdFtnXT1hdCx0W2crMV09dXQsZj09PTApe3ZhciBodD1rLUUsY3Q9ei1SO3RbSV09aHQsdFtJKzFdPWN0O2NvbnRpbnVlfWlmKGYhPT1sKXt2YXIgbHQ9SixFdD0tUSxSdD1rLER0PS16LHF0PS1hKnN0LFd0PS1hKlgsWXQ9LWEqUixMdD0tYSpFLEh0PWx0K3F0LFV0PUV0K1d0LEt0PVJ0K0x0LFp0PUR0LVl0LG10PWkrcC1mLHZ0PWkrbS1mO3RbbXRdPUh0LHRbbXQrMV09VXQsdFt2dF09S3QsdFt2dCsxXT1adH19fX1fc2luZ2xlUmVhbFRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IHI9dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPW9bZV0sdT1vW2Urc10sYz1pK3UsYT1pLXU7clt0XT1jLHJbdCsxXT0wLHJbdCsyXT1hLHJbdCszXT0wfV9zaW5nbGVSZWFsVHJhbnNmb3JtNCh0LGUscyl7Y29uc3Qgcj10aGlzLl9vdXQsbz10aGlzLl9kYXRhLGk9dGhpcy5faW52Py0xOjEsdT1zKjIsYz1zKjMsYT1vW2VdLGg9b1tlK3NdLG09b1tlK3VdLHA9b1tlK2NdLGw9YSttLGY9YS1tLGQ9aCtwLHY9aSooaC1wKSxnPWwrZCxJPWYsYj0tdixCPWwtZCxfPWYsdz12O3JbdF09ZyxyW3QrMV09MCxyW3QrMl09SSxyW3QrM109YixyW3QrNF09QixyW3QrNV09MCxyW3QrNl09XyxyW3QrN109d319Y29uc3QgQz0obix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChuLHQpLGUpLHB0PShuLHQpPT4obiV0K3QpJXQ7ZnVuY3Rpb24gYnQobix0PTEpe3JldHVybiBuPj10P24tPXQ6bjwwJiYobis9dCksbn1jb25zdCBEPTEyODtmdW5jdGlvbiBCdChuLHQpe3JldHVybiB0PU1hdGgubWluKHQsMS10KSxuPHQ/KG4vPXQsbituLW4qbi0xKTpuPjEtdD8obj0obi0xKS90LG4qbituK24rMSk6MH1jb25zdCBydD17dHJpKG4sdD0uNSl7Y29uc3QgZT0xLXQ7cmV0dXJuIG4+PXQ/MS9lLW4vZTpuL3R9LHNpbmUobil7cmV0dXJuIE1hdGguc2luKE1hdGguUEkqMipuKSouNSsuNX0scmFtcChuKXtyZXR1cm4gbn0sc2F3KG4pe3JldHVybiAxLW59LHNxdWFyZShuLHQ9LjUpe3JldHVybiBuPj10PzA6MX0sY3VzdG9tKG4sdD1bMCwxXSl7Y29uc3QgZT10Lmxlbmd0aC0xLHM9TWF0aC5mbG9vcihuKmUpLHI9MS9lLG89Qyh0W3NdLDAsMSksdT1DKHRbcysxXSwwLDEpLGM9byxhPTAsaD1yO3JldHVybih1LWMpLyhoLWEpKihuLXIqcykrb30sc2F3YmxlcChuLHQpe3JldHVybiAyKm4tMS1CdChuLHQpfX07ZnVuY3Rpb24gcShuLHQpe3JldHVybiB0Lmxlbmd0aD4xP3Rbbl06dFswXX1jb25zdCBfdD1PYmplY3Qua2V5cyhydCk7Y2xhc3Mgd3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToidGltZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJza2V3IixkZWZhdWx0VmFsdWU6LjV9LHtuYW1lOiJkZXB0aCIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJwaGFzZW9mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJjdXJ2ZSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkY29mZnNldCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJtaW4iLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToibWF4IixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlfWluY3JlbWVudFBoYXNlKHQpe3RoaXMucGhhc2UrPXQsdGhpcy5waGFzZT4xJiYodGhpcy5waGFzZT10aGlzLnBoYXNlLTEpfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9cy5iZWdpblswXTtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXIpcmV0dXJuITA7Y29uc3Qgbz1lWzBdLGk9cy5mcmVxdWVuY3lbMF0sdT1zLnRpbWVbMF0sYz1zLmRlcHRoWzBdLGE9cy5za2V3WzBdLGg9cy5waGFzZW9mZnNldFswXSxtPXMuY3VydmVbMF0scD1zLmRjb2Zmc2V0WzBdLGw9cy5taW5bMF0sZj1zLm1heFswXSxkPV90W3Muc2hhcGVbMF1dLHY9b1swXS5sZW5ndGg/PzA7dGhpcy5waGFzZT09bnVsbCYmKHRoaXMucGhhc2U9cHQodSppK2gsMSkpO2NvbnN0IGc9aS9zYW1wbGVSYXRlO2ZvcihsZXQgST0wO0k8djtJKyspe2ZvcihsZXQgYj0wO2I8by5sZW5ndGg7YisrKXtsZXQgQj0ocnRbZF0odGhpcy5waGFzZSxhKStwKSpjO0I9TWF0aC5wb3coQixtKSxvW2JdW0ldPUMoQixsLGYpfXRoaXMuaW5jcmVtZW50UGhhc2UoZyl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsZm8tcHJvY2Vzc29yIix3dCk7Y2xhc3MgU3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY29hcnNlIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLG89ZVswXSxpPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhaSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9aTtsZXQgdT1zLmNvYXJzZVswXT8/MDt1PU1hdGgubWF4KDEsdSk7Zm9yKGxldCBjPTA7YzxEO2MrKylmb3IobGV0IGE9MDthPHIubGVuZ3RoO2ErKylvW2FdW2NdPWMldT09PTA/clthXVtjXTpvW2FdW2MtMV07cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjb2Fyc2UtcHJvY2Vzc29yIixTdCk7Y2xhc3MgVHQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiY3J1c2giLGRlZmF1bHRWYWx1ZTowfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0sbz1lWzBdLGk9clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFpKXJldHVybiExO3RoaXMuc3RhcnRlZD1pO2xldCB1PXMuY3J1c2hbMF0/Pzg7dT1NYXRoLm1heCgxLHUpO2ZvcihsZXQgYz0wO2M8RDtjKyspZm9yKGxldCBhPTA7YTxyLmxlbmd0aDthKyspe2NvbnN0IGg9TWF0aC5wb3coMix1LTEpO29bYV1bY109TWF0aC5yb3VuZChyW2FdW2NdKmgpL2h9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJjcnVzaC1wcm9jZXNzb3IiLFR0KTtjbGFzcyBQdCBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJzaGFwZSIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IHI9dFswXSxvPWVbMF0saT1yWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWkpcmV0dXJuITE7dGhpcy5zdGFydGVkPWk7bGV0IHU9cy5zaGFwZVswXTt1PXU8MT91OjEtNGUtMTAsdT0yKnUvKDEtdSk7Y29uc3QgYz1NYXRoLm1heCguMDAxLE1hdGgubWluKDEscy5wb3N0Z2FpblswXSkpO2ZvcihsZXQgYT0wO2E8RDthKyspZm9yKGxldCBoPTA7aDxyLmxlbmd0aDtoKyspb1toXVthXT0oMSt1KSpyW2hdW2FdLygxK3UqTWF0aC5hYnMocltoXVthXSkpKmM7cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzaGFwZS1wcm9jZXNzb3IiLFB0KTtmdW5jdGlvbiBTKG4pe2NvbnN0IHQ9bipuO3JldHVybiBuKigyNyt0KS8oMjcrOSp0KX1jb25zdCBkdD0zLjE0MTU5MjY1MzU5O2NsYXNzIHl0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjUwMH0se25hbWU6InEiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZHJpdmUiLGRlZmF1bHRWYWx1ZTouNjl9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExLHRoaXMucDA9WzAsMF0sdGhpcy5wMT1bMCwwXSx0aGlzLnAyPVswLDBdLHRoaXMucDM9WzAsMF0sdGhpcy5wMzI9WzAsMF0sdGhpcy5wMzM9WzAsMF0sdGhpcy5wMzQ9WzAsMF19cHJvY2Vzcyh0LGUscyl7Y29uc3Qgcj10WzBdLG89ZVswXSxpPXJbMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhaSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9aTtjb25zdCB1PXMucVswXSxjPUMoTWF0aC5leHAocy5kcml2ZVswXSksLjEsMmUzKTtsZXQgYT1zLmZyZXF1ZW5jeVswXTthPWEqMipkdC9zYW1wbGVSYXRlLGE9YT4xPzE6YTtjb25zdCBoPU1hdGgubWluKDgsdSouMTMpO2xldCBtPTEvYypNYXRoLm1pbigxLjc1LDEraCk7Zm9yKGxldCBwPTA7cDxEO3ArKylmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKyl7Y29uc3QgZj10aGlzLnAzW2xdKi4zNjA4OTErdGhpcy5wMzJbbF0qLjQxNzI5K3RoaXMucDMzW2xdKi4xNzc4OTYrdGhpcy5wMzRbbF0qLjA0Mzk3MjU7dGhpcy5wMzRbbF09dGhpcy5wMzNbbF0sdGhpcy5wMzNbbF09dGhpcy5wMzJbbF0sdGhpcy5wMzJbbF09dGhpcy5wM1tsXSx0aGlzLnAwW2xdKz0oUyhyW2xdW3BdKmMtaCpmKS1TKHRoaXMucDBbbF0pKSphLHRoaXMucDFbbF0rPShTKHRoaXMucDBbbF0pLVModGhpcy5wMVtsXSkpKmEsdGhpcy5wMltsXSs9KFModGhpcy5wMVtsXSktUyh0aGlzLnAyW2xdKSkqYSx0aGlzLnAzW2xdKz0oUyh0aGlzLnAyW2xdKS1TKHRoaXMucDNbbF0pKSphLG9bbF1bcF09ZiptfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigibGFkZGVyLXByb2Nlc3NvciIseXQpO2NsYXNzIEF0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImRpc3RvcnQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToicG9zdGdhaW4iLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCByPXRbMF0sbz1lWzBdLGk9clswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFpKXJldHVybiExO3RoaXMuc3RhcnRlZD1pO2NvbnN0IHU9TWF0aC5leHBtMShzLmRpc3RvcnRbMF0pLGM9TWF0aC5tYXgoLjAwMSxNYXRoLm1pbigxLHMucG9zdGdhaW5bMF0pKTtmb3IobGV0IGE9MDthPEQ7YSsrKWZvcihsZXQgaD0wO2g8ci5sZW5ndGg7aCsrKW9baF1bYV09KDErdSkqcltoXVthXS8oMSt1Kk1hdGguYWJzKHJbaF1bYV0pKSpjO3JldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiZGlzdG9ydC1wcm9jZXNzb3IiLEF0KTtmdW5jdGlvbiB4dChuLHQsZSl7cmV0dXJuIGUqKHQtbikrbn1mdW5jdGlvbiBWdChuLHQsZSl7cmV0dXJuIG48Mj8wOnh0KC10Ki41LHQqLjUsZS8obi0xKSl9ZnVuY3Rpb24gdHQobix0KXtyZXR1cm4gbipNYXRoLnBvdygyLHQvMTIpfWNsYXNzIEZ0IGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlPVtdfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjF9XX1wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZTw9cy5iZWdpblswXSlyZXR1cm4hMDtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7Y29uc3Qgcj1lWzBdLG89cy52b2ljZXNbMF0saT1zLmZyZXFzcHJlYWRbMF0sdT1zLnBhbnNwcmVhZFswXSouNSsuNSxjPU1hdGguc3FydCgxLXUpLGE9TWF0aC5zcXJ0KHUpO2ZvcihsZXQgaD0wO2g8bztoKyspe2NvbnN0IG09KGgmMSk9PTE7bGV0IHA9YyxsPWE7bSYmKHA9YSxsPWMpO2ZvcihsZXQgZj0wO2Y8clswXS5sZW5ndGg7ZisrKXtsZXQgZD10dChzLmZyZXF1ZW5jeVtmXT8/cy5mcmVxdWVuY3lbMF0scy5kZXR1bmVbMF0vMTAwKTtkPXR0KGQsVnQobyxpLGgpKTtjb25zdCB2PXB0KGQvc2FtcGxlUmF0ZSwxKTt0aGlzLnBoYXNlW2hdPXRoaXMucGhhc2VbaF0/P01hdGgucmFuZG9tKCk7Y29uc3QgZz1ydC5zYXdibGVwKHRoaXMucGhhc2VbaF0sdik7clswXVtmXT1yWzBdW2ZdK2cqcCxyWzFdW2ZdPXJbMV1bZl0rZypsLHRoaXMucGhhc2VbaF09YnQodGhpcy5waGFzZVtoXSt2KX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzdXBlcnNhdy1vc2NpbGxhdG9yIixGdCk7Y29uc3QgTXQ9MjA0ODtmdW5jdGlvbiBPdChuKXtsZXQgdD1uZXcgRmxvYXQzMkFycmF5KG4pO2Zvcih2YXIgZT0wO2U8bjtlKyspdFtlXT0uNSooMS1NYXRoLmNvcygyKk1hdGguUEkqZS9uKSk7cmV0dXJuIHR9Y2xhc3MgTnQgZXh0ZW5kcyBndHtzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJwaXRjaEZhY3RvciIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcih0KXt0LnByb2Nlc3Nvck9wdGlvbnM9e2Jsb2NrU2l6ZTpNdH0sc3VwZXIodCksdGhpcy5mZnRTaXplPXRoaXMuYmxvY2tTaXplLHRoaXMudGltZUN1cnNvcj0wLHRoaXMuaGFubldpbmRvdz1PdCh0aGlzLmJsb2NrU2l6ZSksdGhpcy5mZnQ9bmV3IEl0KHRoaXMuZmZ0U2l6ZSksdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcj10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZD10aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKSx0aGlzLnRpbWVDb21wbGV4QnVmZmVyPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMubWFnbml0dWRlcz1uZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZS8yKzEpLHRoaXMucGVha0luZGV4ZXM9bmV3IEludDMyQXJyYXkodGhpcy5tYWduaXR1ZGVzLmxlbmd0aCksdGhpcy5uYlBlYWtzPTB9cHJvY2Vzc09MQSh0LGUscyl7bGV0IHI9cy5waXRjaEZhY3RvcltzLnBpdGNoRmFjdG9yLmxlbmd0aC0xXTtyPDAmJihyPXIqLjI1KSxyPU1hdGgubWF4KDAscisxKTtmb3IodmFyIG89MDtvPHRoaXMubmJJbnB1dHM7bysrKWZvcih2YXIgaT0wO2k8dFtvXS5sZW5ndGg7aSsrKXt2YXIgdT10W29dW2ldLGM9ZVtvXVtpXTt0aGlzLmFwcGx5SGFubldpbmRvdyh1KSx0aGlzLmZmdC5yZWFsVHJhbnNmb3JtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIsdSksdGhpcy5jb21wdXRlTWFnbml0dWRlcygpLHRoaXMuZmluZFBlYWtzKCksdGhpcy5zaGlmdFBlYWtzKHIpLHRoaXMuZmZ0LmNvbXBsZXRlU3BlY3RydW0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmludmVyc2VUcmFuc2Zvcm0odGhpcy50aW1lQ29tcGxleEJ1ZmZlcix0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCksdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLGMpLHRoaXMuYXBwbHlIYW5uV2luZG93KGMpfXRoaXMudGltZUN1cnNvcis9dGhpcy5ob3BTaXplfWFwcGx5SGFubldpbmRvdyh0KXtmb3IodmFyIGU9MDtlPHRoaXMuYmxvY2tTaXplO2UrKyl0W2VdPXRbZV0qdGhpcy5oYW5uV2luZG93W2VdKjEuNjJ9Y29tcHV0ZU1hZ25pdHVkZXMoKXtmb3IodmFyIHQ9MCxlPTA7dDx0aGlzLm1hZ25pdHVkZXMubGVuZ3RoOyl7bGV0IHM9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlXSxyPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbZSsxXTt0aGlzLm1hZ25pdHVkZXNbdF09cyoqMityKioyLHQrPTEsZSs9Mn19ZmluZFBlYWtzKCl7dGhpcy5uYlBlYWtzPTA7dmFyIHQ9MjtsZXQgZT10aGlzLm1hZ25pdHVkZXMubGVuZ3RoLTI7Zm9yKDt0PGU7KXtsZXQgcz10aGlzLm1hZ25pdHVkZXNbdF07aWYodGhpcy5tYWduaXR1ZGVzW3QtMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0LTJdPj1zKXt0Kys7Y29udGludWV9aWYodGhpcy5tYWduaXR1ZGVzW3QrMV0+PXN8fHRoaXMubWFnbml0dWRlc1t0KzJdPj1zKXt0Kys7Y29udGludWV9dGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3NdPXQsdGhpcy5uYlBlYWtzKyssdCs9Mn19c2hpZnRQZWFrcyh0KXt0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZC5maWxsKDApO2Zvcih2YXIgZT0wO2U8dGhpcy5uYlBlYWtzO2UrKyl7bGV0IGk9dGhpcy5wZWFrSW5kZXhlc1tlXSx1PU1hdGgucm91bmQoaSp0KTtpZih1PnRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7dmFyIHM9MCxyPXRoaXMuZmZ0U2l6ZTtpZihlPjApe2xldCBoPXRoaXMucGVha0luZGV4ZXNbZS0xXTtzPWktTWF0aC5mbG9vcigoaS1oKS8yKX1pZihlPHRoaXMubmJQZWFrcy0xKXtsZXQgaD10aGlzLnBlYWtJbmRleGVzW2UrMV07cj1pK01hdGguY2VpbCgoaC1pKS8yKX1sZXQgYz1zLWksYT1yLWk7Zm9yKHZhciBvPWM7bzxhO28rKyl7bGV0IGg9aStvLG09dStvO2lmKG0+PXRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7bGV0IHA9MipNYXRoLlBJKihtLWgpL3RoaXMuZmZ0U2l6ZSxsPU1hdGguY29zKHAqdGhpcy50aW1lQ3Vyc29yKSxmPU1hdGguc2luKHAqdGhpcy50aW1lQ3Vyc29yKSxkPWgqMix2PWQrMSxnPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbZF0sST10aGlzLmZyZXFDb21wbGV4QnVmZmVyW3ZdLGI9ZypsLUkqZixCPWcqZitJKmwsXz1tKjIsdz1fKzE7dGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWRbX10rPWIsdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWRbd10rPUJ9fX19cmVnaXN0ZXJQcm9jZXNzb3IoInBoYXNlLXZvY29kZXItcHJvY2Vzc29yIixOdCk7Y2xhc3MgQ3QgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGk9ZHQsdGhpcy5waGk9LXRoaXMucGksdGhpcy5ZMD0wLHRoaXMuWTE9MCx0aGlzLlBXPXRoaXMucGksdGhpcy5CPTIuMyx0aGlzLmRwaGlmPTAsdGhpcy5lbnZmPTB9c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiYmVnaW4iLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksbWluOjB9LHtuYW1lOiJmcmVxdWVuY3kiLGRlZmF1bHRWYWx1ZTo0NDAsbWluOk51bWJlci5FUFNJTE9OfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFl9LHtuYW1lOiJwdWxzZXdpZHRoIixkZWZhdWx0VmFsdWU6MSxtaW46MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2NvbnN0IHI9ZVswXTtsZXQgbz0xLGk7Zm9yKGxldCB1PTA7dTwoclswXS5sZW5ndGg/PzApO3UrKyl7Y29uc3QgYz0oMS1DKHEodSxzLnB1bHNld2lkdGgpLC0uOTksLjk5KSkqdGhpcy5waSxhPXEodSxzLmRldHVuZSksaD10dChxKHUscy5mcmVxdWVuY3kpLGEvMTAwKTtpPWgqKHRoaXMucGkvKHNhbXBsZVJhdGUqLjUpKSx0aGlzLmRwaGlmKz0uMSooaS10aGlzLmRwaGlmKSxvKj0uOTk5OCx0aGlzLmVudmYrPS4xKihvLXRoaXMuZW52ZiksdGhpcy5CPTIuMyooMS0xZS00KmgpLHRoaXMuQjwwJiYodGhpcy5CPTApLHRoaXMucGhpKz10aGlzLmRwaGlmLHRoaXMucGhpPj10aGlzLnBpJiYodGhpcy5waGktPTIqdGhpcy5waSk7bGV0IG09TWF0aC5jb3ModGhpcy5waGkrdGhpcy5CKnRoaXMuWTApO3RoaXMuWTA9LjUqKG0rdGhpcy5ZMCk7bGV0IHA9TWF0aC5jb3ModGhpcy5waGkrdGhpcy5CKnRoaXMuWTErYyk7dGhpcy5ZMT0uNSoocCt0aGlzLlkxKTtmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKylyW2xdW3VdPS4xNSoobS1wKSp0aGlzLmVudmZ9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJwdWxzZS1vc2NpbGxhdG9yIixDdCk7Y29uc3QgbnQ9e2JpdEM6ZnVuY3Rpb24obix0LGUpe3JldHVybiBuJnQ/ZTowfSxicjpmdW5jdGlvbihuLHQ9OCl7aWYodD4zMil0aHJvdyBuZXcgRXJyb3IoImJyKCkgU2l6ZSBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIDMyIik7e2xldCBlPTA7Zm9yKGxldCBzPTA7czx0LTA7cysrKWUrPW50LmJpdEMobiwyKipzLDIqKih0LShzKzEpKSk7cmV0dXJuIGV9fSxzaW5mOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLnNpbihuLygxMjgvTWF0aC5QSSkpfSxjb3NmOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLmNvcyhuLygxMjgvTWF0aC5QSSkpfSx0YW5mOmZ1bmN0aW9uKG4pe3JldHVybiBNYXRoLnRhbihuLygxMjgvTWF0aC5QSSkpfSxyZWdHOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQudGVzdChuLnRvU3RyaW5nKDIpKX19O2xldCBXLGV0O2Z1bmN0aW9uIGt0KG4pe2lmKChXfHxldCk9PW51bGwpe1c9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTWF0aCksZXQ9Vy5tYXAocz0+TWF0aFtzXSk7Y29uc3QgdD1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhudCksZT10Lm1hcChzPT5udFtzXSk7Vy5wdXNoKCJpbnQiLCJ3aW5kb3ciLC4uLnQpLGV0LnB1c2goTWF0aC5mbG9vcixnbG9iYWxUaGlzLC4uLmUpfXJldHVybiBuZXcgRnVuY3Rpb24oLi4uVywidCIsYHJldHVybiAwLAoke258fDB9O2ApLmJpbmQoZ2xvYmFsVGhpcywuLi5ldCl9Y2xhc3MgenQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dD0+e2xldHtjb2RlVGV4dDplfT10LmRhdGE7Y29uc3R7Ynl0ZUJlYXRTdGFydFRpbWU6c309dC5kYXRhO3MhPW51bGwmJih0aGlzLnQ9MCx0aGlzLmluaXRpYWxPZmZzZXQ9TWF0aC5mbG9vcihzKSksZT1lLnRyaW0oKS5yZXBsYWNlKC9eZXZhbFwodW5lc2NhcGVcKGVzY2FwZSg/OmB8XCgnfFwoInxcKGApKC4qPykoPzpgfCdcKXwiXCl8YFwpKS5yZXBsYWNlXChcL3VcKFwuXC5cKVwvZyxbIidgXVwkMSVbIidgXVwpXClcKSQvLChyLG8pPT51bmVzY2FwZShlc2NhcGUobykucmVwbGFjZSgvdSguLikvZywiJDElIikpKSx0aGlzLmZ1bmM9a3QoZSl9LHRoaXMuaW5pdGlhbE9mZnNldD1udWxsLHRoaXMudD1udWxsLHRoaXMuZnVuYz1udWxsfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjAsbWluOk51bWJlci5ORUdBVElWRV9JTkZJTklUWSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO3RoaXMudD09bnVsbCYmKHRoaXMudD1zLmJlZ2luWzBdKnNhbXBsZVJhdGUpO2NvbnN0IHI9ZVswXTtmb3IobGV0IG89MDtvPHJbMF0ubGVuZ3RoO28rKyl7Y29uc3QgaT1xKG8scy5kZXR1bmUpLHU9dHQocShvLHMuZnJlcXVlbmN5KSxpLzEwMCk7bGV0IGM9dGhpcy50LyhzYW1wbGVSYXRlLzI1NikqdSt0aGlzLmluaXRpYWxPZmZzZXQ7Y29uc3QgbT0oKHRoaXMuZnVuYyhjKSYyNTUpLzEyNy41LTEpKi4yO2ZvcihsZXQgcD0wO3A8ci5sZW5ndGg7cCsrKXJbcF1bb109QyhtLC0uNCwuNCk7dGhpcy50PXRoaXMudCsxfXJldHVybiEwfX1yZWdpc3RlclByb2Nlc3NvcigiYnl0ZS1iZWF0LXByb2Nlc3NvciIsenQpfSkoKTsK";let Fo={};function Iv(e,t){const n=Ee();if(Fo[e])return Fo[e];const r=2*n.sampleRate,s=n.createBuffer(1,r,n.sampleRate),i=s.getChannelData(0);let a=0,o,u,c,p,d,m,f;o=u=c=p=d=m=f=0;for(let P=0;P<r;P++)if(e==="white")i[P]=Math.random()*2-1;else if(e==="brown"){let y=Math.random()*2-1;i[P]=(a+.02*y)/1.02,a=i[P]}else if(e==="pink"){let y=Math.random()*2-1;o=.99886*o+y*.0555179,u=.99332*u+y*.0750759,c=.969*c+y*.153852,p=.8665*p+y*.3104856,d=.55*d+y*.5329522,m=-.7616*m-y*.016898,i[P]=o+u+c+p+d+m+f+y*.5362,i[P]*=.11,f=y*.115926}else if(e==="crackle"){const y=t*.01;Math.random()<y?i[P]=Math.random()*2-1:i[P]=0}return e!=="crackle"&&(Fo[e]=s),s}function qo(e="white",t,n=.02){const r=Ee().createBufferSource();return r.buffer=Iv(e,n),r.loop=!0,r.start(t),{node:r,stop:s=>r.stop(s)}}function KE(e,t,n){const r=qo("pink",n);return{node:zv(e,r.node,t),stop:s=>r==null?void 0:r.stop(s)}}const c1=["pink","white","brown","crackle"];function Lt(e){const t=Ee().createGain();return t.gain.value=e,t}const ng=(e,t,n,r)=>r-n===0?0:(t-e)/(r-n);function gn(e,t,n,r){const s=new AudioWorkletNode(e,t,r);return Object.entries(n).forEach(([i,a])=>{s.parameters.get(i).value=a}),s}const Sn=(e,t,n,r,s,i,a,o,u,c="exponential")=>{t=jn(t),n=jn(n),r=jn(r),s=jn(s);const p=c==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";c==="exponential"&&(i=i===0?.001:i,a=a===0?.001:a);const d=a-i,m=a,f=i+r*d,P=u-o,y=A=>{let F;if(t>A){let Z=ng(i,m,0,t);F=A*Z+(i>m?i:0)}else F=(A-t)*ng(m,f,0,n)+m;return c==="exponential"&&(F=F||.001),F};e.setValueAtTime(i,o),t>P?e[p](y(P),u):t+n>P?(e[p](y(t),o+t),e[p](y(P),u)):(e[p](y(t),o+t),e[p](y(t+n),o+t+n),e.setValueAtTime(f,u)),e[p](i,u+s)};function Nv(e,t,n,r,s,i){const a={threshold:t??-3,ratio:n??10,knee:r??10,attack:s??.005,release:i??.05};return new DynamicsCompressorNode(e,a)}const Bn=(e,t="linear",n)=>{const[r,s,i,a]=e;if(r==null&&s==null&&i==null&&a==null)return n??[.001,.001,1,.01];const o=i??(r!=null&&s==null||r==null&&s==null?1:.001);return[Math.max(r??0,.001),Math.max(s??0,.001),Math.min(o,1),Math.max(a??0,.01)]};function Zi(e,t,n,r,s,i,a,o,u,c,p,d,m,f){const P="exponential",[y,A,F,Z]=Bn([s,i,a,o],P,[.005,.14,0,.1]);let X,w;if(m==="ladder"?(X=gn(e,"ladder-processor",{frequency:n,q:r,drive:f}),w=X.parameters.get("frequency")):(X=e.createBiquadFilter(),X.type=t,X.Q.value=r,X.frequency.value=n,w=X.frequency),(s??i??a??o??u)!==void 0){u=jn(u,1,!0),d=jn(d,0,!0);const D=Math.abs(u),k=D*d;let V=kr(2**-k*n,0,2e4),T=kr(2**(D-k)*n,0,2e4);return u<0&&([V,T]=[T,V]),Sn(w,y,A,F,Z,V,T,c,p,P),X}return X}let rg=e=>e<.5?1:1-(e-.5)/.5;function zv(e,t,n=0){const r=Ee();if(!n)return e;let s=r.createGain(),i=r.createGain();e.connect(s),t.connect(i),s.gain.value=rg(n),i.gain.value=rg(1-n);let a=r.createGain();return s.connect(a),i.connect(a),a}let OE=["linear","exponential"];function js(e,t,n,r){if(!(t.pattack??t.pdecay??t.psustain??t.prelease??t.penv))return;const s=jn(t.penv,1,!0),i=OE[t.pcurve??0];let[a,o,u,c]=Bn([t.pattack,t.pdecay,t.psustain,t.prelease],i,[.2,.001,1,.001]),p=t.panchor??u;const d=s*100,m=0-d*p,f=d-d*p;Sn(e,a,o,u,c,m,f,n,r,i)}function Js(e,t,n){const{vibmod:r=.5,vib:s}=t;let i;if(s>0){i=Ee().createOscillator(),i.frequency.value=s;const a=Ee().createGain();return a.gain.value=r*100,i.connect(a),a.connect(e),i.start(n),i}}function Ls(e,t,n,r){const s=new ConstantSourceNode(e),i=Lt(0);return i.connect(e.destination),s.connect(i),s.onended=()=>{try{i.disconnect()}catch{}try{s.disconnect()}catch{}t()},s.start(n),s.stop(r),s}const jE=(e,t=1,n="sine")=>{const r=Ee();let s;c1.includes(n)?(s=r.createBufferSource(),s.buffer=Iv(n,2),s.loop=!0):(s=r.createOscillator(),s.type=n,s.frequency.value=e),s.start();const i=new GainNode(r,{gain:t});return s.connect(i),{node:i,stop:a=>s.stop(a)}},JE=(e,t,n,r="sine")=>{const s=e.value*t,i=s*n;return jE(s,i,r)};function Hi(e,t,n){const{fmh:r=1,fmi:s,fmenv:i="exp",fmattack:a,fmdecay:o,fmsustain:u,fmrelease:c,fmvelocity:p,fmwave:d="sine",duration:m}=t;let f,P=()=>{};if(s){const y=Ee().createGain(),A=JE(e,r,s,d);if(f=A.node,P=A.stop,![a,o,u,c,p].some(F=>F!==void 0))f.connect(e);else{const[F,Z,X,w]=Bn([a,o,u,c]),D=n+m;Sn(y.gain,F,Z,X,w,0,1,n,D,i==="exp"?"exponential":"linear"),f.connect(y),y.connect(e)}}return{stop:P}}const l1={},wo={},UE=e=>l1[e];function qE(e,t){var n=1024;if(e<n)return e+" B";var r=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],s=-1;do e/=n,++s;while(e>=n);return e.toFixed(1)+" "+r[s]}function Yv(e,t){const{s:n,n:r=0,speed:s=1}=e;let i=zE(e,36),a=i-36,o,u=0;if(Array.isArray(t))u=eg(r,t.length),o=t[u];else{const d=f=>Ua(f)-i,m=Object.keys(t).filter(f=>!f.startsWith("_")).reduce((f,P,y)=>!f||Math.abs(d(P))<Math.abs(d(f))?P:f,null);a=-d(m),u=eg(r,t[m].length),o=t[m][u]}const c=`${n}:${u}`;let p=Math.abs(s)*Math.pow(2,a/12);return{transpose:a,sampleUrl:o,index:u,midi:i,label:c,playbackRate:p}}const Hv=async(e,t,n)=>{let{sampleUrl:r,label:s,playbackRate:i}=Yv(e,t);n&&(r=await n(r));const a=Ee(),o=await p1(r,a,s);return e.unit==="c"&&(i=i*o.duration),{buffer:o,playbackRate:i}},Kv=async(e,t,n)=>{let{buffer:r,playbackRate:s}=await Hv(e,t,n);e.speed<0&&(r=Ov(r));const i=Ee().createBufferSource();i.buffer=r,i.playbackRate.value=s;const{s:a,loopBegin:o=0,loopEnd:u=1,begin:c=0,end:p=1}=e,d=c*i.buffer.duration;(a.startsWith("wt_")||e.loop)&&(i.loop=!0,i.loopStart=o*i.buffer.duration-d,i.loopEnd=u*i.buffer.duration-d);const m=i.buffer.duration/i.playbackRate.value,f=(p-c)*m;return{bufferSource:i,offset:d,bufferDuration:m,sliceDuration:f}},p1=(e,t,n,r=0)=>{const s=n?`sound "${n}:${r}"`:"sample";if(e=e.replace("#","%23"),!wo[e]){zt(`[sampler] load ${s}..`,"load-sample",{url:e});const i=Date.now();wo[e]=fetch(e).then(a=>a.arrayBuffer()).then(async a=>{const o=Date.now()-i,u=qE(a.byteLength);zt(`[sampler] load ${s}... done! loaded ${u} in ${o}ms`,"loaded-sample",{url:e});const c=await t.decodeAudioData(a);return l1[e]=c,c})}return wo[e]};function Ov(e){const t=Ee(),n=t.createBuffer(e.numberOfChannels,e.length,t.sampleRate);for(let r=0;r<e.numberOfChannels;r++)n.copyToChannel(e.getChannelData(r).slice().reverse(),r,r);return n}const QE=e=>l1[e];function jv(e){if(e.startsWith("bubo:")){const[t,n]=e.split(":");e=`github:Bubobubobubobubo/dough-${n}`}return e}function Jv(e,t=""){if(!e.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,r]=e.split("github:");return r=r.endsWith("/")?r.slice(0,-1):r,r.split("/").length===2&&(r+="/main"),`https://raw.githubusercontent.com/${r}/${t}`}const Uv=(e,t,n=e._base||"")=>Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&(s=[s]),typeof s!="object")throw new Error("wrong sample map format for "+r);n=s._base||n,n=jv(n),n.startsWith("github:")&&(n=Jv(n,""));const i=a=>n+a;Array.isArray(s)?s=s.map(i):s=Object.fromEntries(Object.entries(s).map(([a,o])=>[a,(typeof o=="string"?[o]:o).map(i)])),t(r,s)});let qv={};function $E(e,t){qv[e]=t}function eS(e){const t=Object.entries(qv).find(([n])=>e.startsWith(n));if(t)return t[1]}const Qv=async(e,t=e._base||"",n={})=>{if(typeof e=="string"){const i=eS(e);if(i)return i(e);if(e=jv(e),e.startsWith("github:")&&(e=Jv(e,"strudel.json")),e.startsWith("local:")&&(e="http://localhost:5432"),e.startsWith("shabda:")){let[o,u]=e.split("shabda:");e=`https://shabda.ndre.gr/${u}.json?strudel=1`}if(e.startsWith("shabda/speech")){let[o,u]=e.split("shabda/speech");u=u.startsWith("/")?u.substring(1):u;let[c,p]=u.split(":"),d="f",m="en-GB";c&&([m,d]=c.split("/")),e=`https://shabda.ndre.gr/speech/${p}.json?gender=${d}&language=${m}&strudel=1'`}if(typeof fetch!="function")return;const a=e.split("/").slice(0,-1).join("/");return typeof fetch>"u"?void 0:fetch(e).then(o=>o.json()).then(o=>Qv(o,t||o._base||a,n)).catch(o=>{throw console.error(o),new Error(`error loading "${e}"`)})}const{prebake:r,tag:s}=n;Uv(e,(i,a)=>Kn(i,(o,u,c)=>$v(o,u,c,a),{type:"sample",samples:a,baseUrl:t,prebake:r,tag:s}),t)},sg=[];async function $v(e,t,n,r,s){let{s:i,nudge:a=0,cut:o,loop:u,clip:c=void 0,n:p=0,speed:d=1,duration:m}=t;if(d===0)return;const f=Ee();let[P,y,A,F]=Bn([t.attack,t.decay,t.sustain,t.release]);const{bufferSource:Z,sliceDuration:X,offset:w}=await Kv(t,r,s);if(f.currentTime>e){zt(`[sampler] still loading sound "${i}:${p}"`,"highlight");return}if(!Z){zt(`[sampler] could not load "${i}:${p}"`,"error");return}let D=Js(Z.detune,t,e);const k=e+a;Z.start(k,w);const V=f.createGain(),T=Z.connect(V);c==null&&u==null&&t.release==null&&(m=X);let z=e+m;Sn(T.gain,P,y,A,F,0,1,e,z,"linear"),js(Z.detune,t,e,z);const _=f.createGain();T.connect(_),Z.onended=function(){Z.disconnect(),D==null||D.stop(),T.disconnect(),_.disconnect(),n()};let j=z+F+.01;Z.stop(j);const L={node:_,bufferSource:Z,stop:H=>{Z.stop(H)}};if(o!==void 0){const H=sg[o];H&&(H.node.gain.setValueAtTime(1,k),H.node.gain.linearRampToValueAtTime(0,k+.01)),sg[o]=L}return L}const h1=128,Qo="System Standard";let e9=h1;function t9(e){e9=parseInt(e)??h1}let n9=!1;function r9(e){n9=e==!0}function tS(e){return typeof e=="number"?e%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[e]??0}const kn=GE();function Kn(e,t,n={}){e=e.toLowerCase().replace(/\s+/g,"_"),kn.setKey(e,{onTrigger:t,data:n})}let s9=e=>e;function Hn(e){return s9(e)}function nS(e){s9=e}function $o(e){for(const n in e)e[n.toLowerCase()]=e[n];const t=kn.get();for(const n in t){const[r,s]=n.split("_");if(!s)continue;const i=e[r];if(i){if(typeof i=="string")t[`${i}_${s}`.toLowerCase()]=t[n];else if(Array.isArray(i))for(const a of i)t[`${a}_${s}`.toLowerCase()]=t[n]}}kn.set({...t})}async function rS(e){const t=await(await fetch(e)).json();$o(t)}async function sS(...e){switch(e.length){case 1:return typeof e[0]=="string"?rS(e[0]):$o(e[0]);case 2:return $o({[e[0]]:e[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+e.length)}}function ki(e){return typeof e!="string"?(console.warn(`getSound: expected string got "${e}". fall back to triangle`),kn.get().triangle):kn.get()[e.toLowerCase()]}const i9=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let e=await navigator.mediaDevices.enumerateDevices();e=e.filter(n=>n.kind==="audiooutput"&&n.deviceId!=="default");const t=new Map;return t.set(Qo,""),e.forEach(n=>{t.set(n.label,n.deviceId)}),t};let hi={s:"triangle",gain:.8,postgain:1,density:".03",ftype:"12db",fanchor:0,resonance:1,hresonance:1,bandq:1,channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const iS=Object.freeze({...hi});function aS(e,t){hi[e]=t}function oS(){hi={...iS}}let d1=new Map(Object.entries(hi));function m1(e,t){d1.set(e,t)}function at(e){return d1.get(e)}function uS(e){Object.keys(e).forEach(t=>{m1(t,e[t])})}function a9(){d1=new Map(Object.entries(hi))}function cS(e){a9(),e==="1.0"&&m1("fanchor",.5)}const lS=()=>kn.set({});let eu;const o9=()=>(eu=new AudioContext,eu),Ee=()=>eu||o9();function pS(){return Ee().currentTime}let Eo;function hS(){return Eo||(Eo=Ee().audioWorklet.addModule(HE)),Eo}async function u9(e={}){const{disableWorklets:t=!1,maxPolyphony:n,audioDeviceName:r=Qo,multiChannelOrbits:s=!1}=e;if(t9(n),r9(s),typeof window>"u")return;const i=Ee();if(r!=null&&r!=Qo)try{const a=(await i9()).get(r),o=(a??"").length>0;i.sinkId!==a&&o&&await i.setSinkId(a),zt(`[superdough] Audio Device set to ${r}, it might take a few seconds before audio plays on all output channels`)}catch{zt("[superdough] failed to set audio interface","warning")}if(await i.resume(),t){zt("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await hS(),zt("[superdough] AudioWorklets loaded")}catch(a){console.warn("could not load AudioWorklet effects",a)}zt("[superdough] ready")}let So;async function dS(e){return So||(So=new Promise(t=>{document.addEventListener("click",async function n(){document.removeEventListener("click",n),await u9(e),t()})})),So}let Ki,es;function c9(){const e=Ee(),t=e.destination.maxChannelCount;e.destination.channelCount=t,Ki=new ChannelMergerNode(e,{numberOfInputs:e.destination.channelCount}),es=new GainNode(e),Ki.connect(es),es.connect(e.destination)}const l9=(e,t=[0,1])=>{const n=Ee();Ki==null&&c9();const r=new StereoPannerNode(n);e.connect(r);const s=new ChannelSplitterNode(n,{numberOfOutputs:r.channelCount});r.connect(s),t.forEach((i,a)=>{s.connect(Ki,a%r.channelCount,i%n.destination.channelCount)})},mS=()=>{es!=null&&(es.gain.linearRampToValueAtTime(0,Ee().currentTime+.01),es=null)};function fS(e,t,n,r){var s;if(n=kr(n,0,.98),!Re[e].delayNode){const i=Ee().createFeedbackDelay(1,t,n);(s=i.start)==null||s.call(i,r),Oi(i,e),Re[e].delayNode=i}return Re[e].delayNode.delayTime.value!==t&&Re[e].delayNode.delayTime.setValueAtTime(t,r),Re[e].delayNode.feedback.value!==n&&Re[e].delayNode.feedback.setValueAtTime(n,r),Re[e].delayNode}function qa(e,t,n,r={}){const{shape:s=0,...i}=r,{dcoffset:a=-.5,depth:o=1}=r,u={frequency:1,depth:o,skew:.5,phaseoffset:0,time:t,begin:t,end:n,shape:tS(s),dcoffset:a,min:a*o,max:a*o+o,curve:1,...i};return gn(e,"lfo-processor",u)}function gS(e,t,n=1,r=.5,s=1e3,i=2e3){const a=Ee(),o=qa(a,e,t,{frequency:n,depth:i*2}),u=2;let c=0;const p=[];for(let d=0;d<u;d++){const m=a.createBiquadFilter();m.type="notch",m.gain.value=1,m.frequency.value=s+c,m.Q.value=2-Math.min(Math.max(r*2,0),1.9),o.connect(m.detune),c+=282,d>0&&p[d-1].connect(m),p.push(m)}return p[p.length-1]}function yS(e){e=e??0;const t=["12db","ladder","24db"];return typeof e=="number"?t[Math.floor(_v(e,t.length))]:e}let Re={};function Oi(e,t){Re[t]==null&&u1(new Error("target orbit does not exist"),"superdough"),e.connect(Re[t].gain)}function bS(e,t,n){Re[t]==null&&(Re[t]={gain:new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"})},l9(Re[t].gain,n))}function MS(e,t,n,r=.1,s=1){[t].flat().forEach(i=>{if(Re[i]==null){u1(new Error(`duck target orbit ${i} does not exist`),"superdough");return}Ls(e,()=>{Re[i].gain.gain.cancelScheduledValues(n);const a=Re[i].gain.gain.value;Re[i].gain.gain.linearRampToValueAtTime(kr(1-Math.pow(s,.5),.01,a),n),Re[i].gain.gain.exponentialRampToValueAtTime(1,n+Math.max(.002,r))},0,n-.01)})}let jr=(e,t)=>e!==void 0&&e!==t;function PS(e,t,n,r,s,i,a,o){if(!Re[e].reverbNode){const u=Ee().createReverb(t,n,r,s,i,a,o);Oi(u,e),Re[e].reverbNode=u}return(jr(t,Re[e].reverbNode.duration)||jr(n,Re[e].reverbNode.fade)||jr(r,Re[e].reverbNode.lp)||jr(s,Re[e].reverbNode.dim)||jr(a,Re[e].reverbNode.irspeed)||jr(o,Re[e].reverbNode.irbegin)||Re[e].reverbNode.ir!==i)&&Re[e].reverbNode.generate(t,n,r,s,i,a,o),Re[e].reverbNode}let kt={},wr={};function p9(e,t=1024,n=.5){if(!kt[e]){const r=Ee().createAnalyser();r.fftSize=t,r.smoothingTimeConstant=n,kt[e]=r,wr[e]=new Float32Array(kt[e].frequencyBinCount)}return kt[e].fftSize!==t&&(kt[e].fftSize=t,wr[e]=new Float32Array(kt[e].frequencyBinCount)),kt[e]}function Qa(e="time",t=1){const n={time:()=>{var r;return(r=kt[t])==null?void 0:r.getFloatTimeDomainData(wr[t])},frequency:()=>{var r;return(r=kt[t])==null?void 0:r.getFloatFrequencyData(wr[t])}}[e];if(!n)throw new Error(`getAnalyzerData: ${e} not supported. use one of ${Object.keys(n).join(", ")}`);return n(),wr[t]}function Bo(e,t,n){const r=Lt(n);return e.connect(r),r.connect(t),r}function vS(){Re={},kt={},wr={}}let Es=new Map;function ig(e){return(Array.isArray(e)?e:[e]).map(t=>t-1)}const f1=async(e,t,n,r=.5,s=.5)=>{var xn,Fn,ht;const i=Ee();let{stretch:a}=e;if(a!=null&&(t=t-.04),typeof e!="object")throw new Error(`expected hap.value to be an object, but got "${e}". Hint: append .note() or .s() to the end`,"error");if(e.duration=n,t<i.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${t.toFixed(2)}, now: ${i.currentTime.toFixed(2)})`);return}let{tremolo:o,tremolosync:u,tremolodepth:c=1,tremoloskew:p,tremolophase:d=0,tremoloshape:m,s:f=at("s"),bank:P,source:y,gain:A=at("gain"),postgain:F=at("postgain"),density:Z=at("density"),duckorbit:X,duckattack:w,duckdepth:D,fanchor:k=at("fanchor"),drive:V=.69,release:T=0,cutoff:z,lpenv:_,lpattack:j,lpdecay:L,lpsustain:H,lprelease:se,resonance:he=at("resonance"),hpenv:re,hcutoff:ie,hpattack:te,hpdecay:ee,hpsustain:ye,hprelease:Ye,hresonance:Y=at("hresonance"),bpenv:ke,bandf:_e,bpattack:ft,bpdecay:Se,bpsustain:He,bprelease:ce,bandq:Ae=at("bandq"),phaserrate:nt,phaserdepth:$e=at("phaserdepth"),phasersweep:Me,phasercenter:Kt,coarse:Te,crush:Ft,dry:et,shape:rt,shapevol:pt=at("shapevol"),distort:_t,distortvol:gt=at("distortvol"),pan:wt,vowel:Et,delay:Ke=at("delay"),delayfeedback:vt=at("delayfeedback"),delaysync:ve=at("delaysync"),delaytime:Be,orbit:Q=at("orbit"),room:Ie,roomfade:Ve,roomlp:rr,roomdim:br,roomsize:St,ir:Ot,irspeed:jt,irbegin:je,i:An=at("i"),velocity:on=at("velocity"),analyze:Ne,fft:ot=at("fft"),compressor:It,compressorRatio:Dn,compressorKnee:sr,compressorAttack:Mr,compressorRelease:Pr}=e;Be=Be??YE(ve,r);const l=ig(n9&&Q>0?[Q*2-1,Q*2]:at("channels")),b=e.channels!=null?ig(e.channels):l;bS(i,Q,b),X!=null&&MS(i,X,t,w,D),A=Hn(jn(A,1)),F=Hn(F),pt=Hn(pt),gt=Hn(gt),Ke=Hn(Ke),on=Hn(on),c=Hn(c),A*=on;const g=t+n,M=g+T,x=Math.round(Math.random()*1e6);for(let $=0;$<=Es.size-e9;$++){const We=Es.entries().next(),Ce=We.value[1],ut=We.value[0],vr=t+.25;(Fn=(xn=Ce==null?void 0:Ce.node)==null?void 0:xn.gain)==null||Fn.linearRampToValueAtTime(0,vr),(ht=Ce==null?void 0:Ce.stop)==null||ht.call(Ce,vr),Es.delete(ut)}let G=[];if(["-","~","_"].includes(f))return;P&&f&&(f=`${P}_${f}`,e.s=f);let I;if(y)I=y(t,e,n,r);else if(ki(f)){const{onTrigger:$}=ki(f),We=await $(t,e,()=>{G.forEach(Ce=>Ce==null?void 0:Ce.disconnect()),Es.delete(x)});We&&(I=We.node,Es.set(x,We))}else throw new Error(`sound ${f} not found! Is it loaded?`);if(!I)return;if(i.currentTime>t){zt("[webaudio] skip hap: still loading",i.currentTime-t);return}const W=[];W.push(I),a!==void 0&&W.push(gn(i,"phase-vocoder-processor",{pitchFactor:a})),W.push(Lt(A));const U=yS(e.ftype);if(z!==void 0){let $=()=>Zi(i,"lowpass",z,he,j,L,H,se,_,t,g,k,U,V);W.push($()),U==="24db"&&W.push($())}if(ie!==void 0){let $=()=>Zi(i,"highpass",ie,Y,te,ee,ye,Ye,re,t,g,k);W.push($()),U==="24db"&&W.push($())}if(_e!==void 0){let $=()=>Zi(i,"bandpass",_e,Ae,ft,Se,He,ce,ke,t,g,k);W.push($()),U==="24db"&&W.push($())}if(Et!==void 0){const $=i.createVowelFilter(Et);W.push($)}if(Te!==void 0&&W.push(gn(i,"coarse-processor",{coarse:Te})),Ft!==void 0&&W.push(gn(i,"crush-processor",{crush:Ft})),rt!==void 0&&W.push(gn(i,"shape-processor",{shape:rt,postgain:pt})),_t!==void 0&&W.push(gn(i,"distort-processor",{distort:_t,postgain:gt})),u!=null&&(o=r*u),o!==void 0){const $=Math.max(1-c,0),We=new GainNode(i,{gain:$}),Ce=s/r;qa(i,t,M,{skew:p??(m!=null?.5:1),frequency:o,depth:c,time:Ce,dcoffset:0,shape:m,phaseoffset:d,min:0,max:1,curve:1.5}).connect(We.gain),W.push(We)}if(It!==void 0&&W.push(Nv(i,It,Dn,sr,Mr,Pr)),wt!==void 0){const $=i.createStereoPanner();$.pan.value=2*wt-1,W.push($)}if(nt!==void 0&&$e>0){const $=gS(t,M,nt,$e,Kt,Me);W.push($)}const me=new GainNode(i,{gain:F});W.push(me);let ze;if(Ke>0&&Be>0&&vt>0){const $=fS(Q,Be,vt,t);ze=Bo(me,$,Ke),G.push(ze)}let Bt;if(Ie>0){let $;if(Ot!==void 0){let Ce,ut=ki(Ot);Array.isArray(ut)?Ce=ut.data.samples[An%ut.data.samples.length]:typeof ut=="object"&&(Ce=Object.values(ut.data.samples).flat()[An%Object.values(ut.data.samples).length]),$=await p1(Ce,i,Ot,0)}const We=PS(Q,St,Ve,rr,br,$,jt,je);Bt=Bo(me,We,Ie),G.push(Bt)}let Gt;if(Ne){const $=p9(Ne,2**(ot+5));Gt=Bo(me,$,1),G.push(Gt)}if(et!=null){et=Hn(et);const $=new GainNode(i,{gain:et});W.push($),Oi($,Q)}else Oi(me,Q);W.slice(1).reduce(($,We)=>$.connect(We),W[0]),G=G.concat(W)},CS=(e,t,n,r)=>{f1(t,e-n,t.duration/r,r)},ks=(e,t=36)=>{let{note:n,freq:r}=e;return n=n||t,typeof n=="string"&&(n=Ua(n)),!r&&typeof n=="number"&&(r=Rv(n)),Number(r)};function Fi(e){var t;e!=null&&(e.disconnect(),(t=e.parameters.get("end"))==null||t.setValueAtTime(0,0))}const AS=["triangle","square","sawtooth","sine"],DS=[["tri","triangle"],["sqr","square"],["saw","sawtooth"],["sin","sine"]];function xS(e,t){const n=e,r=new Float32Array(t);for(let s=0;s<t;s++){const i=s*2/t-1;r[s]=Math.tanh(i*n)}return r}function FS(){[...AS].forEach(e=>{Kn(e,(t,n,r)=>{const[s,i,a,o]=Bn([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u=d9(e,t,n),{node:c,stop:p,triggerRelease:d}=u;const m=Lt(.3),{duration:f}=n;c.onended=()=>{c.disconnect(),m.disconnect(),r()};const P=Lt(1);let y=c.connect(m).connect(P);const A=t+f;Sn(y.gain,s,i,a,o,0,1,t,A,"linear");const F=A+o+.01;return d==null||d(F),p(F),{node:y,stop:Z=>{p(Z)}}},{type:"synth",prebake:!0})}),Kn("sbd",(e,t,n)=>{const{duration:r,decay:s=.5,pdecay:i=.5,penv:a=36,clip:o}=t,u=Ee(),c=.02,p=1.2,d=.025,m=1,f=u.createOscillator();f.type="triangle",f.frequency.value=ks(t,29),f.detune.setValueAtTime(a*100,0),f.detune.setValueAtTime(a*100,e),f.detune.exponentialRampToValueAtTime(.001,e+i);const P=Lt(1);P.gain.setValueAtTime(1,e+c),P.gain.exponentialRampToValueAtTime(.001,e+c+s),f.start(e);const y=qo("brown",e,2),A=Lt(1);A.gain.setValueAtTime(p,e),A.gain.exponentialRampToValueAtTime(.001,e+d);const F=new WaveShaperNode(u);F.curve=xS(2,u.sampleRate);const Z=Lt(m);f.onended=()=>{f.disconnect(),P.disconnect(),F.disconnect(),y.node.disconnect(),A.disconnect(),Z.disconnect(),n()};const X=f.connect(F).connect(P).connect(Z);y.node.connect(A).connect(Z);let w=e+s+.01;return o!=null&&(w=Math.min(e+o*r,w)),Z.gain.setValueAtTime(m,w-.01),Z.gain.linearRampToValueAtTime(0,w),f.stop(w),y.stop(w),{node:X,stop:D=>{f.stop(D)}}},{type:"synth",prebake:!0}),Kn("supersaw",(e,t,n)=>{const r=Ee();let{duration:s,n:i,unison:a=5,spread:o=.6,detune:u}=t;u=u??i??.18;const c=ks(t),[p,d,m,f]=Bn([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),P=e+s,y=P+f+.01,A=kr(a,1,100);let F=A>1?kr(o,0,1):0,Z=gn(r,"supersaw-oscillator",{frequency:c,begin:e,end:y,freqspread:u,voices:A,panspread:F},{outputChannelCount:[2]});const X=1/Math.sqrt(A);js(Z.parameters.get("detune"),t,e,P);const w=Js(Z.parameters.get("detune"),t,e),D=Hi(Z.parameters.get("frequency"),t,e);let k=Lt(1);k=Z.connect(k),Sn(k.gain,p,d,m,f,0,.3*X,e,P,"linear");let V=Ls(r,()=>{Fi(Z),k.disconnect(),n(),D==null||D.stop(),w==null||w.stop()},e,y);return{node:k,stop:T=>{V.stop(T)}}},{prebake:!0,type:"synth"}),Kn("bytebeat",(e,t,n)=>{const r=["(t%255 >= t/255%255)*255","(t*(t*8%60 <= 300)|(-t)*(t*4%512 < 256))+t/400","t","t*(t >> 10^t)","t&128","t&t>>8","((t%255+t%128+t%64+t%32+t%16+t%127.8+t%64.8+t%32.8+t%16.8)/3)","((t%64+t%63.8+t%64.15+t%64.35+t%63.5)/1.25)","(t&(t>>7)-t)","(sin(t*PI/128)*127+127)","((t^t/2+t+64*(sin((t*PI/64)+(t*PI/32768))+64))%128*2)","((t^t/2+t+64*(cos >> 0))%127.85*2)","((t^t/2+t+64)%128*2)","(((t * .25)^(t * .25)/100+(t * .25))%128)*2","((t^t/2+t+64)%7 * 24)"],{n:s=0}=t,i=ks(t),{byteBeatExpression:a=r[s%r.length],byteBeatStartTime:o}=t,u=Ee();let{duration:c}=t;const[p,d,m,f]=Bn([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),P=e+c,y=P+f+.01;let A=gn(u,"byte-beat-processor",{frequency:i,begin:e,end:y},{outputChannelCount:[2]});A.port.postMessage({codeText:a,byteBeatStartTime:o,frequency:i});let F=Lt(1);F=A.connect(F),Sn(F.gain,p,d,m,f,0,1,e,P,"linear");let Z=Ls(u,()=>{Fi(A),F.disconnect(),n()},e,y);return{node:F,stop:X=>{Z.stop(X)}}},{prebake:!0,type:"synth"}),Kn("pulse",(e,t,n)=>{const r=Ee();let{pwrate:s,pwsweep:i}=t;i==null&&(s!=null?i=.3:i=0),s==null&&i!=null&&(s=1);let{duration:a,pw:o=.5}=t;const u=ks(t),[c,p,d,m]=Bn([t.attack,t.decay,t.sustain,t.release],"linear",[.001,.05,.6,.01]),f=e+a,P=f+m+.01;let y=gn(r,"pulse-oscillator",{frequency:u,begin:e,end:P,pulsewidth:o},{outputChannelCount:[2]});js(y.parameters.get("detune"),t,e,f);const A=Js(y.parameters.get("detune"),t,e),F=Hi(y.parameters.get("frequency"),t,e);let Z=Lt(1);Z=y.connect(Z),Sn(Z.gain,c,p,d,m,0,1,e,f,"linear");let X;i!=0&&(X=qa(r,e,P,{frequency:s,depth:i}),X.connect(y.parameters.get("pulsewidth")));let w=Ls(r,()=>{Fi(y),Fi(X),Z.disconnect(),n(),F==null||F.stop(),A==null||A.stop()},e,P);return{node:Z,stop:D=>{w.stop(D)}}},{prebake:!0,type:"synth"}),[...c1].forEach(e=>{Kn(e,(t,n,r)=>{const[s,i,a,o]=Bn([n.attack,n.decay,n.sustain,n.release],"linear",[.001,.05,.6,.01]);let u,{density:c}=n;u=qo(e,t,c);let{node:p,stop:d,triggerRelease:m}=u;const f=Lt(.3),{duration:P}=n;p.onended=()=>{p.disconnect(),f.disconnect(),r()};const y=Lt(1);let A=p.connect(f).connect(y);const F=t+P;Sn(A.gain,s,i,a,o,0,1,t,F,"linear");const Z=F+o+.01;return m==null||m(Z),d(Z),{node:A,stop:X=>{d(X)}}},{type:"synth",prebake:!0})}),DS.forEach(([e,t])=>kn.set({...kn.get(),[e]:kn.get()[t]}))}function h9(e,t){const n=new Float32Array(e+1),r=new Float32Array(e+1),s=Ee(),i=s.createOscillator(),a={sawtooth:c=>[0,-1/c],square:c=>[0,c%2===0?0:1/c],triangle:c=>[c%2===0?0:1/(c*c),0]};if(!a[t])throw new Error(`unknown wave type ${t}`);n[0]=0,r[0]=0;let o=1;for(;o<=e;){const[c,p]=a[t](o);n[o]=c,r[o]=p,o++}const u=s.createPeriodicWave(n,r);return i.setPeriodicWave(u),i}function d9(e,t,n){let{n:r,duration:s,noise:i=0}=n,a;!r||e==="sine"?(a=Ee().createOscillator(),a.type=e||"triangle"):a=h9(r,e),a.frequency.value=ks(n),a.start(t);let o=Js(a.detune,n,t);js(a.detune,n,t,t+s);const u=Hi(a.frequency,n,t);let c;return i&&(c=KE(a,i,t)),{node:(c==null?void 0:c.node)||a,stop:p=>{u.stop(p),o==null||o.stop(p),c==null||c.stop(p),a.stop(p)},triggerRelease:p=>{}}}function wS(e=1,t=.05,n=220,r=0,s=0,i=.1,a=0,o=1,u=0,c=0,p=0,d=0,m=0,f=0,P=0,y=0,A=0,F=1,Z=0,X=0){let w=Math.PI*2,D=Ee().sampleRate,k=ee=>ee>0?1:-1,V=u*=500*w/D/D,T=n*=(1+t*2*Math.random()-t)*w/D,z=[],_=0,j=0,L=0,H=1,se=0,he=0,re=0,ie,te;for(r=r*D+9,Z*=D,s*=D,i*=D,A*=D,c*=500*w/D**3,P*=w/D,p*=w/D,d*=D,m=m*D|0,te=r+Z+s+i+A|0;L<te;z[L++]=re)++he%(y*100|0)||(re=a?a>1?a>2?a>3?Math.sin((_%w)**3):Math.max(Math.min(Math.tan(_),1),-1):1-(2*_/w%2+2)%2:1-4*Math.abs(Math.round(_/w)-_/w):Math.sin(_),re=(m?1-X+X*Math.sin(w*L/m):1)*k(re)*Math.abs(re)**o*e*1*(L<r?L/r:L<r+Z?1-(L-r)/Z*(1-F):L<r+Z+s?F:L<te-A?(te-L-A)/i*F:0),re=A?re/2+(A>L?0:(L<te-A?1:(te-L)/A)*z[L-A|0]/2):re),ie=(n+=u+=c)*Math.cos(P*j++),_+=ie-ie*f*(1-(Math.sin(L)+1)*1e9%2),H&&++H>d&&(n+=p,T+=p,H=0),m&&!(++se%m)&&(n=T,u=V,H||(H=1));return z}const m9=(e,t)=>{let{s:n,note:r=36,freq:s,zrand:i=0,attack:a=0,decay:o=0,sustain:u=.8,release:c=.1,curve:p=1,slide:d=0,deltaSlide:m=0,pitchJump:f=0,pitchJumpTime:P=0,lfo:y=0,znoise:A=0,zmod:F=0,zcrush:Z=0,zdelay:X=0,tremolo:w=0,duration:D=.2,zzfx:k}=e;const V=Math.max(D-a-o,0);typeof r=="string"&&(r=Ua(r)),!s&&typeof r=="number"&&(s=Rv(r)),n=n.replace("z_","");const T=["sine","triangle","sawtooth","tan","noise"].indexOf(n)||0;p=n==="square"?0:p;const z=wS(...k||[.25,i,s,a,V,c,T,p,d,m,f,P,y,A,F,Z,X,u,o,w]),_=Ee(),j=_.createBuffer(1,z.length,_.sampleRate);j.getChannelData(0).set(z);const L=Ee().createBufferSource();return L.buffer=j,L.start(t),{node:L}};function ES(){["zzfx","z_sine","z_sawtooth","z_triangle","z_square","z_tan","z_noise"].forEach(e=>{Kn(e,(t,n,r)=>{const{node:s}=m9({s:e,...n},t);return s.onended=()=>{s.disconnect(),r()},{node:s,stop:()=>{}}},{type:"synth",prebake:!0})})}let Qt;async function f9(e,t){const n=`dsp-worklet-${Date.now()}`,r=`${t}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${n}', MyProcessor);
`,s=`data:text/javascript;base64,${btoa(r)}`;await e.audioWorklet.addModule(s);const i=new AudioWorkletNode(e,n);return{node:i,stop:()=>i.port.postMessage("stop")}}const g9=()=>{var e;Qt&&(Qt==null||Qt.stop(),(e=Qt==null?void 0:Qt.node)==null||e.disconnect())};typeof window<"u"&&window.addEventListener("message",e=>{var t;e.data==="strudel-stop"?g9():(t=e.data)!=null&&t.dough&&(Qt==null||Qt.node.port.postMessage(e.data))});const SS=async e=>{const t=Ee();g9(),Qt=await f9(t,e),Qt.node.connect(t.destination)};function y9(e,t,n,r){window.postMessage({time:r,dough:e.value,currentTime:t,duration:e.duration,cps:n})}const nr=(e="test-canvas",t)=>{let{contextType:n="2d",pixelated:r=!1,pixelRatio:s=window.devicePixelRatio}=t||{},i=document.querySelector("#"+e);if(!i){i=document.createElement("canvas"),i.id=e,i.width=window.innerWidth*s,i.height=window.innerHeight*s,i.style="pointer-events:none;width:100%;height:100%;position:fixed;top:0;left:0",r&&(i.style.imageRendering="pixelated"),document.body.prepend(i);let a;window.addEventListener("resize",()=>{a&&clearTimeout(a),a=setTimeout(()=>{i.width=window.innerWidth*s,i.height=window.innerHeight*s},200)})}return i.getContext(n,{willReadFrequently:!0})};let ts={};function b9(e){ts[e]!==void 0&&(cancelAnimationFrame(ts[e]),delete ts[e])}function BS(e){Object.keys(ts).forEach(t=>(!e||t.startsWith(e))&&b9(t))}let Yn={};At.prototype.draw=function(e,t){if(typeof window>"u")return this;let{id:n=1,lookbehind:r=0,lookahead:s=0}=t,i=Math.max(B1(),0);b9(n),r=Math.abs(r),Yn[n]=(Yn[n]||[]).filter(c=>!c.isInFuture(i));let a=this.queryArc(i,i+s).filter(c=>c.hasOnset());Yn[n]=Yn[n].concat(a);let o;const u=()=>{const c=B1(),p=c+s;Yn[n]=Yn[n].filter(f=>f.isInNearPast(r,c));let d=Math.max(o||p,p-1/10);const m=this.queryArc(d,p).filter(f=>f.hasOnset());Yn[n]=Yn[n].concat(m),o=p,e(Yn[n],c,p,this),ts[n]=requestAnimationFrame(u)};return ts[n]=requestAnimationFrame(u),this};const ZS=(e=!0,t)=>{const n=nr();e&&n.clearRect(0,0,n.canvas.width,n.canvas.height),BS(t)};At.prototype.onPaint=function(e){return this.withState(t=>{t.controls.painters||(t.controls.painters=[]),t.controls.painters.push(e)})};At.prototype.getPainters=function(){let e=[];return this.queryArc(0,0,{painters:e}),e};class M9{constructor(t,n){this.onFrame=t,this.onError=n}start(){const t=this;let n=requestAnimationFrame(function r(s){try{t.onFrame(s)}catch(i){t.onError(i)}n=requestAnimationFrame(r)});t.cancel=()=>{cancelAnimationFrame(n)}}stop(){this.cancel&&this.cancel()}}class kS{constructor(t,n){this.visibleHaps=[],this.lastFrame=null,this.drawTime=n,this.painters=[],this.framer=new M9(()=>{if(!this.scheduler){console.warn("Drawer: no scheduler");return}const r=Math.abs(this.drawTime[0]),s=this.drawTime[1],i=this.scheduler.now()+s;if(this.lastFrame===null){this.lastFrame=i;return}const a=this.scheduler.pattern.queryArc(Math.max(this.lastFrame,i-1/10),i);this.lastFrame=i,this.visibleHaps=(this.visibleHaps||[]).filter(u=>u.whole&&u.endClipped>=i-r-s).concat(a.filter(u=>u.hasOnset()));const o=i-s;t(this.visibleHaps,o,this,this.painters)},r=>{console.warn("draw error",r)})}setDrawTime(t){this.drawTime=t}invalidate(t=this.scheduler,n){if(!t)return;n=n??t.now(),this.scheduler=t;let[r,s]=this.drawTime;const[i,a]=[Math.max(n,0),n+s+.1];this.visibleHaps=this.visibleHaps.filter(u=>{var c;return((c=u.whole)==null?void 0:c.begin)<n}),this.painters=[];const o=t.pattern.queryArc(i,a,{painters:this.painters});this.visibleHaps=this.visibleHaps.concat(o)}start(t){this.scheduler=t,this.invalidate(),this.framer.start()}stop(){this.framer&&this.framer.stop()}}function VS(e){return typeof window>"u"?"#fff":getComputedStyle(document.documentElement).getPropertyValue(e)}let P9={background:"#222",foreground:"#75baff",caret:"#ffcc00",selection:"rgba(128, 203, 196, 0.5)",selectionMatch:"#036dd626",lineHighlight:"#00000050",gutterBackground:"transparent",gutterForeground:"#8a919966"};function Vn(){return P9}function XS(e){P9=e}let ag="#22222210";At.prototype.animate=function({callback:e,sync:t=!1,smear:n=.5}={}){window.frame&&cancelAnimationFrame(window.frame);const r=nr();let{clientWidth:s,clientHeight:i}=r.canvas;s*=window.devicePixelRatio,i*=window.devicePixelRatio;let a=n===0?"99":Number((1-n)*100).toFixed(0);a=a.length===1?`0${a}`:a,ag=`#200010${a}`;const o=u=>{let c;u=Math.round(u),c=this.slow(1e3).queryArc(u,u),r.fillStyle=ag,r.fillRect(0,0,s,i),c.forEach(p=>{let{x:d,y:m,w:f,h:P,s:y,r:A,angle:F=0,fill:Z="darkseagreen"}=p.value;if(f*=s,P*=i,A!==void 0&&F!==void 0){const w=F*2*Math.PI,[D,k]=[(s-f)/2,(i-P)/2];d=D+Math.cos(w)*A*D,m=k+Math.sin(w)*A*k}else d*=s-f,m*=i-P;const X={...p.value,x:d,y:m,w:f,h:P};r.fillStyle=Z,y==="rect"?r.fillRect(d,m,f,P):y==="ellipse"&&(r.beginPath(),r.ellipse(d+f/2,m+P/2,f/2,P/2,0,0,2*Math.PI),r.fill()),e&&e(r,X,p)}),window.frame=requestAnimationFrame(o)};return window.frame=requestAnimationFrame(o),uC};const{x:g1,y:GS,w:TS,h:WS,angle:LS,r:RS,fill:_S,smear:IS}=tC("x","y","w","h","angle","r","fill","smear"),NS=ru("rescale",function(e,t){return t.mul(g1(e).w(e).y(e).h(e))}),zS=ru("moveXY",function(e,t,n){return n.add(g1(e).y(t))}),YS=ru("zoomIn",function(e,t){const n=iC(1).sub(e).div(2);return t.rescale(e).move(n,n)}),tu={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function HS(e){return e=e.toLowerCase(),e[0]==="#"?nu(e):tu[e]!==void 0?nu(tu[e]):-1}function nu(e){return e=e.slice(1),parseInt(e,16)}const Ss=(e,t,n)=>e*(n-t)+t,og=e=>{let{value:t}=e;typeof e.value!="object"&&(t={value:t});let{note:n,n:r,freq:s,s:i}=t;if(s)return aC(s);if(n=n??r,typeof n=="string")try{return oC(n)}catch{return 0}return typeof n=="number"?n:i?"_"+i:t};At.prototype.pianoroll=function(e={}){let{cycles:t=4,playhead:n=.5,overscan:r=0,hideNegative:s=!1,ctx:i=nr(),id:a=1}=e,o=-t*n,u=t*(1-n);const c=(p,d)=>(!s||p.whole.begin>=0)&&p.isWithinTime(d+o,d+u);return this.draw((p,d)=>{$a({...e,time:d,ctx:i,haps:p.filter(m=>c(m,d))})},{lookbehind:o-r,lookahead:u+r,id:a}),this};function KS(e){return nC(e)?e.pianoroll():t=>t.pianoroll(e)}function $a({time:e,haps:t,cycles:n=4,playhead:r=.5,flipTime:s=0,flipValues:i=0,hideNegative:a=!1,inactive:o=Vn().foreground,active:u=Vn().foreground,background:c="transparent",smear:p=0,playheadColor:d=Vn().foreground,minMidi:m=10,maxMidi:f=90,autorange:P=0,timeframe:y,fold:A=1,vertical:F=0,labels:Z=!1,fill:X=1,fillActive:w=!1,strokeActive:D=!0,stroke:k,hideInactive:V=0,colorizeInactive:T=1,fontFamily:z,ctx:_,id:j}={}){const L=_.canvas.width,H=_.canvas.height;let se=-n*r,he=n*(1-r);j&&(t=t.filter(ce=>ce.hasTag(j))),y&&(console.warn("timeframe is deprecated! use from/to instead"),se=0,he=y);const re=F?H:L,ie=F?L:H;let te=F?[re,0]:[0,re];const ee=he-se,ye=F?[0,ie]:[ie,0];let Ye=f-m+1,Y=ie/Ye,ke=[];s&&te.reverse(),i&&ye.reverse();const{min:_e,max:ft,values:Se}=t.reduce(({min:ce,max:Ae,values:nt},$e)=>{const Me=og($e);return{min:Me<ce?Me:ce,max:Me>Ae?Me:Ae,values:nt.includes(Me)?nt:[...nt,Me]}},{min:1/0,max:-1/0,values:[]});P&&(m=_e,f=ft,Ye=f-m+1),ke=Se.sort((ce,Ae)=>typeof ce=="number"&&typeof Ae=="number"?ce-Ae:typeof ce=="number"?1:String(ce).localeCompare(String(Ae))),Y=A?ie/ke.length:ie/Ye,_.fillStyle=c,_.globalAlpha=1,p||(_.clearRect(0,0,L,H),_.fillRect(0,0,L,H)),t.forEach(ce=>{var vt;const Ae=ce.whole.begin<=e&&ce.endClipped>e;let nt=k??(D&&Ae),$e=!Ae&&X||Ae&&w;if(V&&!Ae)return;let Me=(vt=ce.value)==null?void 0:vt.color;u=Me||u,o=T&&Me||o,Me=Ae?u:o,_.fillStyle=$e?Me:"transparent",_.strokeStyle=Me;const{velocity:Kt=1,gain:Te=1}=ce.value||{};_.globalAlpha=Kt*Te;const Ft=(ce.whole.begin-(s?he:se))/ee,et=Ss(Ft,...te);let rt=Ss(ce.duration/ee,0,re);const pt=og(ce),_t=A?ke.indexOf(pt)/ke.length:(Number(pt)-m)/Ye,gt=Ss(_t,...ye);let wt=0;const Et=Ss(e/ee,...te);let Ke;if(F?Ke=[gt+1-(i?Y:0),re-Et+et+wt+1-(s?0:rt),Y-2,rt-2]:Ke=[et-Et+wt+1-(s?rt:0),gt+1-(i?0:Y),rt-2,Y-2],nt&&_.strokeRect(...Ke),$e&&_.fillRect(...Ke),Z){const ve=ce.value.note??ce.value.s+(ce.value.n?`:${ce.value.n}`:""),{label:Be,activeLabel:Q}=ce.value,Ie=(Ae&&Q||Be)??ve;let Ve=F?rt:Y*.75;_.font=`${Ve}px ${z||"monospace"}`,_.fillStyle=$e?"black":Me,_.textBaseline="top",_.fillText(Ie,...Ke)}}),_.globalAlpha=1;const He=Ss(-se/ee,...te);return _.strokeStyle=d,_.beginPath(),F?(_.moveTo(0,He),_.lineTo(ie,He)):(_.moveTo(He,0),_.lineTo(He,ie)),_.stroke(),this}function y1(e,t={}){let[n,r]=e;n=Math.abs(n);const s=r+n,i=s!==0?n/s:0;return{fold:1,...t,cycles:s,playhead:i}}const v9=(e={})=>(t,n,r,s)=>$a({ctx:t,time:n,haps:r,...y1(s,e)});At.prototype.punchcard=function(e){return this.onPaint(v9(e))};At.prototype.wordfall=function(e){return this.punchcard({vertical:1,labels:1,stroke:0,fillActive:1,active:"white",...e})};function OS(e){const{drawTime:t,...n}=e;$a({...y1(t),...n})}function jS(e,t,n,r){const s=(e-90)*Math.PI/180;return[n+Math.cos(s)*t,r+Math.sin(s)*t]}const ug=(e,t,n,r,s=0)=>jS((e+s)*360,t*e,n,r);function cg(e){let{ctx:t,from:n=0,to:r=3,margin:s=50,cx:i=100,cy:a=100,rotate:o=0,thickness:u=s/2,color:c=Vn().foreground,cap:p="round",stretch:d=1,fromOpacity:m=1,toOpacity:f=1}=e;n*=d,r*=d,o*=d,t.lineWidth=u,t.lineCap=p,t.strokeStyle=c,t.globalAlpha=m,t.beginPath();let[P,y]=ug(n,s,i,a,o);t.moveTo(P,y);const A=1/60;let F=n;for(;F<=r;){const[Z,X]=ug(F,s,i,a,o);t.globalAlpha=(F-n)/(r-n)*f,t.lineTo(Z,X),F+=A}t.stroke()}function JS(e){let{stretch:t=1,size:n=80,thickness:r=n/2,cap:s="butt",inset:i=3,playheadColor:a="#ffffff",playheadLength:o=.02,playheadThickness:u=r,padding:c=0,steady:p=1,activeColor:d=Vn().foreground,inactiveColor:m=Vn().gutterForeground,colorizeInactive:f=0,fade:P=!0,ctx:y,time:A,haps:F,drawTime:Z,id:X}=e;X&&(F=F.filter(L=>L.hasTag(X)));const[w,D]=[y.canvas.width,y.canvas.height];y.clearRect(0,0,w*2,D*2);const[k,V]=[w/2,D/2],T={margin:n/t,cx:k,cy:V,stretch:t,cap:s,thickness:r},z={...T,thickness:u,from:i-o,to:i,color:a},[_]=Z,j=p*A;F.forEach(L=>{var ee;const H=L.whole.begin<=A&&L.endClipped>A,se=L.whole.begin-A+i,he=L.endClipped-A+i-c,re=((ee=L.value)==null?void 0:ee.color)||d,ie=f||H?re:m,te=P?1-Math.abs((L.whole.begin-A)/_):1;cg({ctx:y,...T,from:se,to:he,rotate:j,color:ie,fromOpacity:te,toOpacity:te})}),cg({ctx:y,...z,rotate:j})}At.prototype.spiral=function(e={}){return this.onPaint((t,n,r,s)=>JS({ctx:t,time:n,haps:r,drawTime:s,...e}))};const US=sC(36),lg=(e,t,n,r)=>{r=r*Math.PI*2;const s=Math.sin(r)*n+e,i=Math.cos(r)*n+t;return[s,i]},pg=(e,t)=>.5-Math.log2(e/t)%1;function C9({haps:e,ctx:t,id:n,hapcircles:r=1,circle:s=0,edo:i=12,root:a=US,thickness:o=3,hapRadius:u=6,mode:c="flake",margin:p=10}={}){const d=c==="polygon",m=c==="flake",f=t.canvas.width,P=t.canvas.height;t.clearRect(0,0,f,P);const y=Vn().foreground,A=Math.min(f,P)/2-o/2-u-p,F=f/2,Z=P/2;n&&(e=e.filter(w=>w.hasTag(n))),t.strokeStyle=y,t.fillStyle=y,t.globalAlpha=1,t.lineWidth=o,s&&(t.beginPath(),t.arc(F,Z,A,0,2*Math.PI),t.stroke()),i&&(Array.from({length:i},(w,D)=>{const k=pg(a*Math.pow(2,D/i),a),[V,T]=lg(F,Z,A,k);t.beginPath(),t.arc(V,T,u,0,2*Math.PI),t.fill()}),t.stroke());let X=[];t.lineWidth=u,e.forEach(w=>{let D;try{D=rC(w)}catch{return}const k=pg(D,a),[V,T]=lg(F,Z,A,k),z=w.value.color||y;t.strokeStyle=z,t.fillStyle=z;const{velocity:_=1,gain:j=1}=w.value||{},L=_*j;t.globalAlpha=L,X.push([V,T,k,z,L]),t.beginPath(),r&&(t.moveTo(V+u,T),t.arc(V,T,u,0,2*Math.PI),t.fill()),m&&(t.moveTo(F,Z),t.lineTo(V,T)),t.stroke()}),t.strokeStyle=y,t.globalAlpha=1,d&&X.length&&(X=X.sort((w,D)=>w[2]-D[2]),t.beginPath(),t.moveTo(X[0][0],X[0][1]),X.forEach(([w,D,k,V,T])=>{t.strokeStyle=V,t.globalAlpha=T,t.lineTo(w,D)}),t.lineTo(X[0][0],X[0][1]),t.stroke())}At.prototype.pitchwheel=function(e={}){let{ctx:t=nr(),id:n=1}=e;return this.tag(n).onPaint((r,s,i)=>C9({...e,ctx:t,haps:i.filter(a=>a.isActive(s)),id:n}))};const mB=Object.freeze(Object.defineProperty({__proto__:null,Drawer:kS,Framer:M9,__pianoroll:$a,angle:LS,cleanupDraw:ZS,colorMap:tu,convertColorToNumber:HS,convertHexToNumber:nu,drawPianoroll:OS,fill:_S,getComputedPropertyValue:VS,getDrawContext:nr,getDrawOptions:y1,getPunchcardPainter:v9,getTheme:Vn,h:WS,moveXY:zS,pianoroll:KS,pitchwheel:C9,r:RS,rescale:NS,setTheme:XS,smear:IS,w:TS,x:g1,y:GS,zoomIn:YS},Symbol.toStringTag,{value:"Module"})),{Pattern:qS,logger:QS,repl:$S}=cC;Lv(QS);const eB=e=>(e.ensureObjectValue(),e.value),A9=(e,t,n,r,s)=>{var i;return f1(eB(e),s,n,r,(i=e.whole)==null?void 0:i.begin.valueOf())};function tB(e={}){return e={getTime:()=>Ee().currentTime,defaultOutput:A9,...e},$S(e)}qS.prototype.dough=function(){return this.onTrigger(y9,1)};function D9(e,{align:t=!0,color:n="white",thickness:r=3,scale:s=.25,pos:i=.75,trigger:a=0,ctx:o=nr(),id:u=1}={}){o.lineWidth=r,o.strokeStyle=n;let c=o.canvas;if(!e){o.beginPath();let y=i*c.height;o.moveTo(0,y),o.lineTo(c.width,y),o.stroke();return}const p=Qa("time",u);o.beginPath();const d=e.frequencyBinCount;let m=t?Array.from(p).findIndex((y,A,F)=>A&&F[A-1]>-a&&y<=-a):0;m=Math.max(m,0);const f=c.width*1/d;let P=0;for(let y=m;y<d;y++){const A=p[y]+1,F=(i-s*(A-1))*c.height;y===0?o.moveTo(P,F):o.lineTo(P,F),P+=f}o.stroke()}function x9(e,{color:t="white",scale:n=.25,pos:r=.75,lean:s=.5,min:i=-150,max:a=0,ctx:o=nr(),id:u=1}={}){if(!e){o.beginPath();let P=r*p.height;o.moveTo(0,P),o.lineTo(p.width,P),o.stroke();return}const c=Qa("frequency",u),p=o.canvas;o.fillStyle=t;const d=e.frequencyBinCount,m=p.width*1/d;let f=0;for(let P=0;P<d;P++){const y=dg((c[P]-i)/(a-i),0,1)*n,A=y*p.height,F=(r-y*s)*p.height;o.fillRect(f,F,Math.max(m,1),A),f+=m}}function F9(e=0,t="0,0,0",n=nr()){e?(n.fillStyle=`rgba(${t},${1-e})`,n.fillRect(0,0,n.canvas.width,n.canvas.height)):n.clearRect(0,0,n.canvas.width,n.canvas.height)}At.prototype.fscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(()=>{F9(e.smear,"0,0,0",e.ctx),kt[t]&&x9(kt[t],e)},{id:t})};At.prototype.tscope=function(e={}){let t=e.id??1;return this.analyze(t).draw(n=>{var r,s;e.color=((s=(r=n[0])==null?void 0:r.value)==null?void 0:s.color)||Vn().foreground,e.color,F9(e.smear,"0,0,0",e.ctx),D9(kt[t],e)},{id:t})};At.prototype.scope=At.prototype.tscope;let hg={};At.prototype.spectrum=function(e={}){let t=e.id??1;return this.analyze(t).draw(n=>{var r,s;e.color=((s=(r=n[0])==null?void 0:r.value)==null?void 0:s.color)||hg[t]||Vn().foreground,hg[t]=e.color,nB(kt[t],e)},{id:t})};At.prototype.scope=At.prototype.tscope;const Zo=new Map;function nB(e,{thickness:t=3,speed:n=1,min:r=-80,max:s=0,ctx:i=nr(),id:a=1,color:o}={}){if(i.lineWidth=t,i.strokeStyle=o,!e)return;const u=n,c=Qa("frequency",a),p=i.canvas;i.fillStyle=o;const d=e.frequencyBinCount;let m=Zo.get(a)||i.getImageData(0,0,p.width,p.height);Zo.set(a,m),i.clearRect(0,0,i.canvas.width,i.canvas.height),i.putImageData(m,-u,0);let f=p.width-n;for(let P=0;P<d;P++){const y=dg((c[P]-r)/(s-r),0,1);i.globalAlpha=y;const A=Math.log(P+1)/Math.log(d)*p.height;i.fillRect(f,p.height-A,u,2)}Zo.set(a,i.getImageData(0,0,p.width,p.height))}const fB=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_MAX_POLYPHONY:h1,aliasBank:sS,get analysers(){return kt},get analysersData(){return wr},applyFM:Hi,applyGainCurve:Hn,connectToDestination:l9,createFilter:Zi,dough:SS,doughTrigger:y9,drawFrequencyScope:x9,drawTimeScope:D9,drywet:zv,dspWorklet:f9,errorLogger:u1,gainNode:Lt,getADSRValues:Bn,getAnalyserById:p9,getAnalyzerData:Qa,getAudioContext:Ee,getAudioContextCurrentTime:pS,getAudioDevices:i9,getCachedBuffer:UE,getCompressor:Nv,getDefaultValue:at,getLfo:qa,getLoadedBuffer:QE,getOscillator:d9,getParamADSR:Sn,getPitchEnvelope:js,getSampleBuffer:Hv,getSampleBufferSource:Kv,getSampleInfo:Yv,getSound:ki,getVibratoOscillator:Js,getWorklet:gn,getZZFX:m9,initAudio:u9,initAudioOnFirstClick:dS,initializeAudioOutput:c9,loadBuffer:p1,logger:zt,noises:c1,onTriggerSample:$v,panic:mS,processSampleMap:Uv,registerSamplesPrefix:$E,registerSound:Kn,registerSynthSounds:FS,registerZZFXSounds:ES,resetDefaultValues:a9,resetDefaults:oS,resetGlobalEffects:vS,resetLoadedSounds:lS,reverseBuffer:Ov,samples:Qv,setDefault:aS,setDefaultAudioContext:o9,setDefaultValue:m1,setDefaultValues:uS,setGainCurve:nS,setLogger:Lv,setMaxPolyphony:t9,setMultiChannelOrbits:r9,setVersionDefaults:cS,soundMap:kn,superdough:f1,superdoughTrigger:CS,waveformN:h9,webAudioTimeout:Ls,webaudioOutput:A9,webaudioRepl:tB},Symbol.toStringTag,{value:"Module"}));export{mB as a,fB as b,dB as i};
