import{d as B,f as U1,g as gm,h as q1,L as i1,k as Jm,l as V,m as Km,o as oe,p as ae}from"./index-CY-ssS-c.js";import"./strudel-core-Cml4IbyB.js";import"./strudel-web-Ddx65js9.js";function H1(m){return m!==null&&typeof m=="object"&&"name"in m&&typeof m.name=="string"}function J1(m){return m!==null&&typeof m=="object"&&"step"in m&&typeof m.step=="number"&&"alt"in m&&typeof m.alt=="number"&&!isNaN(m.step)&&!isNaN(m.alt)}var Wm=[0,2,4,-1,1,3,5],Xm=Wm.map(m=>Math.floor(m*7/12));function Qm(m){const{step:n,alt:e,oct:t,dir:M=1}=m,r=Wm[n]+7*e;if(t===void 0)return[M*r];const P=t-Xm[n]-4*e;return[M*r,M*P]}var ie=[3,0,4,1,5,2,6];function Ym(m){const[n,e,t]=m,M=ie[se(n)],r=Math.floor((n+1)/7);if(e===void 0)return{step:M,alt:r,dir:t};const P=e+4*r+Xm[M];return{step:M,alt:r,oct:P,dir:t}}function se(m){const n=(m+1)%7;return n<0?7+n:n}var ym=(m,n)=>Array(Math.abs(n)+1).join(m),_1=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),ce="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",ue="(AA|A|P|M|m|d|dd)([-+]?\\d+)",de=new RegExp("^"+ce+"|"+ue+"$");function le(m){const n=de.exec(`${m}`);return n===null?["",""]:n[1]?[n[1],n[2]]:[n[4],n[3]]}var vm={};function N(m){return typeof m=="string"?vm[m]||(vm[m]=fe(m)):J1(m)?N(pe(m)):H1(m)?N(m.name):_1}var Am=[0,2,4,5,7,9,11],Zm="PMMPPMM";function fe(m){const n=le(m);if(n[0]==="")return _1;const e=+n[0],t=n[1],M=(Math.abs(e)-1)%7,r=Zm[M];if(r==="M"&&t==="P")return _1;const P=r==="M"?"majorable":"perfectable",o=""+e+t,a=e<0?-1:1,i=e===8||e===-8?e:a*(M+1),c=he(P,t),s=Math.floor((Math.abs(e)-1)/7),u=a*(Am[M]+c+12*s),d=(a*(Am[M]+c)%12+12)%12,f=Qm({step:M,alt:c,oct:s,dir:a});return{empty:!1,name:o,num:e,q:t,step:M,alt:c,dir:a,type:P,simple:i,semitones:u,chroma:d,coord:f,oct:s}}function mn(m,n){const[e,t=0]=m,M=e*7+t*12<0,r=n||M?[-e,-t,-1]:[e,t,1];return N(Ym(r))}function he(m,n){return n==="M"&&m==="majorable"||n==="P"&&m==="perfectable"?0:n==="m"&&m==="majorable"?-1:/^A+$/.test(n)?n.length:/^d+$/.test(n)?-1*(m==="perfectable"?n.length:n.length+1):0}function pe(m){const{step:n,alt:e,oct:t=0,dir:M}=m;if(!M)return"";const r=n+1+7*t,P=r===0?n+1:r,o=M<0?"-":"",a=Zm[n]==="M"?"majorable":"perfectable";return o+P+be(a,e)}function be(m,n){return n===0?m==="majorable"?"M":"P":n===-1&&m==="majorable"?"m":n>0?ym("A",n):ym("d",m==="perfectable"?n:n+1)}var jm=(m,n)=>Array(Math.abs(n)+1).join(m),nn=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Nm=new Map,ge=m=>"CDEFGAB".charAt(m),u1=m=>m<0?jm("b",-m):jm("#",m),K1=m=>m[0]==="b"?-m.length:m.length;function l(m){const n=JSON.stringify(m),e=Nm.get(n);if(e)return e;const t=typeof m=="string"?je(m):J1(m)?l(Ne(m)):H1(m)?l(m.name):nn;return Nm.set(n,t),t}var ye=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function W1(m){const n=ye.exec(m);return n?[n[1].toUpperCase(),n[2].replace(/x/g,"##"),n[3],n[4]]:["","","",""]}function ve(m){return l(Ym(m))}var Ae=(m,n)=>(m%n+n)%n,V1=[0,2,4,5,7,9,11];function je(m){const n=W1(m);if(n[0]===""||n[3]!=="")return nn;const e=n[0],t=n[1],M=n[2],r=(e.charCodeAt(0)+3)%7,P=K1(t),o=M.length?+M:void 0,a=Qm({step:r,alt:P,oct:o}),i=e+t+M,c=e+t,s=(V1[r]+P+120)%12,u=o===void 0?Ae(V1[r]+P,12)-1188:V1[r]+P+12*(o+1),d=u>=0&&u<=127?u:null,f=o===void 0?null:Math.pow(2,(u-69)/12)*440;return{empty:!1,acc:t,alt:P,chroma:s,coord:a,freq:f,height:u,letter:e,midi:d,name:i,oct:o,pc:c,step:r}}function Ne(m){const{step:n,alt:e,oct:t}=m,M=ge(n);if(!M)return"";const r=M+u1(e);return t||t===0?r+t:r}function v(m,n){const e=l(m),t=Array.isArray(n)?n:N(n).coord;if(e.empty||!t||t.length<2)return"";const M=e.coord,r=M.length===1?[M[0]+t[0]]:[M[0]+t[0],M[1]+t[1]];return ve(r).name}function en(m,n){const e=m.length;return t=>{if(!n)return"";const M=t<0?(e- -t%e)%e:t%e,r=Math.floor(t/e),P=v(n,[0,r]);return v(P,m[M])}}function d1(m,n){const e=l(m),t=l(n);if(e.empty||t.empty)return"";const M=e.coord,r=t.coord,P=r[0]-M[0],o=M.length===2&&r.length===2?r[1]-M[1]:-Math.floor(P*7/12),a=t.height===e.height&&t.midi!==null&&e.oct===t.oct&&e.step>t.step;return mn([P,o],a).name}var wm=(m,n)=>Array(n+1).join(m),we=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function tn(m){const n=we.exec(m);return n?[n[1],n[2],n[3]]:["","",""]}function s1(m){const[n,e,t]=tn(m);if(e==="")return"";let M=4;for(let P=0;P<t.length;P++)M+=t.charAt(P)===","?-1:1;const r=n[0]==="_"?n.replace(/_/g,"b"):n[0]==="^"?n.replace(/\^/g,"#"):"";return e.charCodeAt(0)>96?e.toUpperCase()+r+(M+1):e+r+M}function Mn(m){const n=l(m);if(n.empty||!n.oct&&n.oct!==0)return"";const{letter:e,acc:t,oct:M}=n,r=t[0]==="b"?t.replace(/b/g,"_"):t.replace(/#/g,"^"),P=M>4?e.toLowerCase():e,o=M===5?"":M>4?wm("'",M-5):wm(",",4-M);return r+P+o}function Ie(m,n){return Mn(v(s1(m),n))}function xe(m,n){return d1(s1(m),s1(n))}var Te={abcToScientificNotation:s1,scientificToAbcNotation:Mn,tokenize:tn,transpose:Ie,distance:xe};function De(m,n){const e=[];for(;n--;e[n]=n+m);return e}function Se(m,n){const e=[];for(;n--;e[n]=m-n);return e}function $e(m,n){return m<n?De(m,n-m+1):Se(m,m-n+1)}function Ce(m,n){const e=n.length,t=(m%e+e)%e;return n.slice(t,e).concat(n.slice(0,t))}function Ve(m){return m.filter(n=>n===0||n)}function rn(m){return m.map(n=>l(n)).filter(n=>!n.empty).sort((n,e)=>n.height-e.height).map(n=>n.name)}function Oe(m){return rn(m).filter((n,e,t)=>e===0||n!==t[e-1])}function ke(m,n=Math.random){let e,t,M=m.length;for(;M;)e=Math.floor(n()*M--),t=m[M],m[M]=m[e],m[e]=t;return m}function Pn(m){return m.length===0?[[]]:Pn(m.slice(1)).reduce((n,e)=>n.concat(m.map((t,M)=>{const r=e.slice();return r.splice(M,0,m[0]),r})),[])}const Ee=Object.freeze(Object.defineProperty({__proto__:null,compact:Ve,permutations:Pn,range:$e,rotate:Ce,shuffle:ke,sortedNoteNames:rn,sortedUniqNoteNames:Oe},Symbol.toStringTag,{value:"Module"}));function Fe(m,n){const e=[];for(;n--;e[n]=n+m);return e}function qe(m,n){const e=[];for(;n--;e[n]=m-n);return e}function l1(m,n){return m<n?Fe(m,n-m+1):qe(m,m-n+1)}function G(m,n){const e=n.length,t=(m%e+e)%e;return n.slice(t,e).concat(n.slice(0,t))}function X1(m){return m.filter(n=>n===0||n)}function _e(m,n=Math.random){let e,t,M=m.length;for(;M;)e=Math.floor(n()*M--),t=m[M],m[M]=m[e],m[e]=t;return m}function on(m){return m.length===0?[[]]:on(m.slice(1)).reduce((n,e)=>n.concat(m.map((t,M)=>{const r=e.slice();return r.splice(M,0,m[0]),r})),[])}var ze={compact:X1,permutations:on,range:l1,rotate:G,shuffle:_e},x={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Q1=m=>Number(m).toString(2).padStart(12,"0"),Im=m=>parseInt(m,2),Be=/^[01]{12}$/;function Y1(m){return Be.test(m)}var Ge=m=>typeof m=="number"&&m>=0&&m<=4095,Re=m=>m&&Y1(m.chroma),xm={[x.chroma]:x};function p(m){const n=Y1(m)?m:Ge(m)?Q1(m):Array.isArray(m)?nt(m):Re(m)?m.chroma:x.chroma;return xm[n]=xm[n]||mt(n)}var Le=p,an=m=>p(m).chroma,Ue=m=>p(m).intervals,He=m=>p(m).setNum,Je=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function Ke(m){const n=[];for(let e=0;e<12;e++)m.charAt(e)==="1"&&n.push(Je[e]);return n}function We(m){return p(m).intervals.map(n=>v("C",n))}function Xe(){return l1(2048,4095).map(Q1)}function Z1(m,n=!0){const e=p(m).chroma.split("");return X1(e.map((t,M)=>{const r=G(M,e);return n&&r[0]==="0"?null:r.join("")}))}function Qe(m,n){return p(m).setNum===p(n).setNum}function f1(m){const n=p(m).setNum;return e=>{const t=p(e).setNum;return n&&n!==t&&(t&n)===t}}function h1(m){const n=p(m).setNum;return e=>{const t=p(e).setNum;return n&&n!==t&&(t|n)===t}}function sn(m){const n=p(m);return e=>{const t=l(e);return n&&!t.empty&&n.chroma.charAt(t.chroma)==="1"}}function Ye(m){const n=sn(m);return e=>e.filter(n)}var cn={get:p,chroma:an,num:He,intervals:Ue,chromas:Xe,isSupersetOf:h1,isSubsetOf:f1,isNoteIncludedIn:sn,isEqual:Qe,filter:Ye,modes:Z1,notes:We,pcset:Le};function Ze(m){const n=m.split("");return n.map((e,t)=>G(t,n).join(""))}function mt(m){const n=Im(m),e=Ze(m).map(Im).filter(r=>r>=2048).sort()[0],t=Q1(e),M=Ke(m);return{empty:!1,name:"",setNum:n,chroma:m,normalized:t,intervals:M}}function nt(m){if(m.length===0)return x.chroma;let n;const e=[0,0,0,0,0,0,0,0,0,0,0,0];for(let t=0;t<m.length;t++)n=l(m[t]),n.empty&&(n=N(m[t])),n.empty||(e[n.chroma]=1);return e.join("")}var et=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],tt=et;({...x});var mm=[],M1={};function un(){return mm.slice()}function Mt(m,n,e){const t=Pt(m),M={...p(m),name:e||"",quality:t,intervals:m,aliases:n};mm.push(M),M.name&&(M1[M.name]=M),M1[M.setNum]=M,M1[M.chroma]=M,M.aliases.forEach(r=>rt(M,r))}function rt(m,n){M1[n]=m}function Pt(m){const n=e=>m.indexOf(e)!==-1;return n("5A")?"Augmented":n("3M")?"Major":n("5d")?"Diminished":n("3m")?"Minor":"Unknown"}tt.forEach(([m,n,e])=>Mt(m.split(" "),e.split(" "),n));mm.sort((m,n)=>m.setNum-n.setNum);var ot=m=>{const n=m.reduce((e,t)=>{const M=l(t).chroma;return M!==void 0&&(e[M]=e[M]||l(t).name),e},{});return e=>n[e]};function at(m,n={}){const e=m.map(t=>l(t).pc).filter(t=>t);return l.length===0?[]:ft(e,1,n).filter(t=>t.weight).sort((t,M)=>M.weight-t.weight).map(t=>t.name)}var p1={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},b1=m=>n=>!!(n&m),it=b1(p1.anyThirds),st=b1(p1.perfectFifth),ct=b1(p1.anySeventh),ut=b1(p1.nonPerfectFifths);function dt(m){const n=parseInt(m.chroma,2);return it(n)&&st(n)&&ct(n)}function lt(m){const n=parseInt(m,2);return ut(n)?m:(n|16).toString(2)}function ft(m,n,e){const t=m[0],M=l(t).chroma,r=ot(m),P=Z1(m,!1),o=[];return P.forEach((a,i)=>{const c=e.assumePerfectFifth&&lt(a);un().filter(s=>e.assumePerfectFifth&&dt(s)?s.chroma===c:s.chroma===a).forEach(s=>{const u=s.aliases[0],d=r(i);i!==M?o.push({weight:.5*n,name:`${d}${u}/${t}`}):o.push({weight:1*n,name:`${d}${u}`})})}),o}function Q(m){return m!==null&&typeof m=="object"&&"name"in m&&typeof m.name=="string"}var dn=[0,2,4,5,7,9,11],ln=({step:m,alt:n})=>(dn[m]+n+120)%12,nm=({step:m,alt:n,oct:e,dir:t=1})=>t*(dn[m]+n+12*(e===void 0?-100:e)),fn=m=>{const n=nm(m);return m.oct!==void 0&&n>=-12&&n<=115?n+12:null};function g1(m){return m!==null&&typeof m=="object"&&"step"in m&&typeof m.step=="number"&&"alt"in m&&typeof m.alt=="number"}var hn=[0,2,4,-1,1,3,5],pn=hn.map(m=>Math.floor(m*7/12));function y1(m){const{step:n,alt:e,oct:t,dir:M=1}=m,r=hn[n]+7*e;if(t===void 0)return[M*r];const P=t-pn[n]-4*e;return[M*r,M*P]}var ht=[3,0,4,1,5,2,6];function v1(m){const[n,e,t]=m,M=ht[pt(n)],r=Math.floor((n+1)/7);if(e===void 0)return{step:M,alt:r,dir:t};const P=e+4*r+pn[M];return{step:M,alt:r,oct:P,dir:t}}function pt(m){const n=(m+1)%7;return n<0?7+n:n}var Tm=(m,n)=>Array(Math.abs(n)+1).join(m),z1={empty:!0,name:"",acc:""},bt="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",gt="(AA|A|P|M|m|d|dd)([-+]?\\d+)",yt=new RegExp("^"+bt+"|"+gt+"$");function em(m){const n=yt.exec(`${m}`);return n===null?["",""]:n[1]?[n[1],n[2]]:[n[4],n[3]]}var Dm={};function b(m){return typeof m=="string"?Dm[m]||(Dm[m]=vt(m)):g1(m)?b(jt(m)):Q(m)?b(m.name):z1}var Sm=[0,2,4,5,7,9,11],bn="PMMPPMM";function vt(m){const n=em(m);if(n[0]==="")return z1;const e=+n[0],t=n[1],M=(Math.abs(e)-1)%7,r=bn[M];if(r==="M"&&t==="P")return z1;const P=r==="M"?"majorable":"perfectable",o=""+e+t,a=e<0?-1:1,i=e===8||e===-8?e:a*(M+1),c=At(P,t),s=Math.floor((Math.abs(e)-1)/7),u=a*(Sm[M]+c+12*s),d=(a*(Sm[M]+c)%12+12)%12,f=y1({step:M,alt:c,oct:s,dir:a});return{empty:!1,name:o,num:e,q:t,step:M,alt:c,dir:a,type:P,simple:i,semitones:u,chroma:d,coord:f,oct:s}}function Y(m,n){const[e,t=0]=m,M=e*7+t*12<0,r=n||M?[-e,-t,-1]:[e,t,1];return b(v1(r))}function At(m,n){return n==="M"&&m==="majorable"||n==="P"&&m==="perfectable"?0:n==="m"&&m==="majorable"?-1:/^A+$/.test(n)?n.length:/^d+$/.test(n)?-1*(m==="perfectable"?n.length:n.length+1):0}function jt(m){const{step:n,alt:e,oct:t=0,dir:M}=m;if(!M)return"";const r=n+1+7*t,P=r===0?n+1:r,o=M<0?"-":"",a=bn[n]==="M"?"majorable":"perfectable";return o+P+Nt(a,e)}function Nt(m,n){return n===0?m==="majorable"?"M":"P":n===-1&&m==="majorable"?"m":n>0?Tm("A",n):Tm("d",m==="perfectable"?n:n+1)}var $m=(m,n)=>Array(Math.abs(n)+1).join(m),gn={empty:!0,name:"",pc:"",acc:""},Cm=new Map,tm=m=>"CDEFGAB".charAt(m),Mm=m=>m<0?$m("b",-m):$m("#",m),rm=m=>m[0]==="b"?-m.length:m.length;function w(m){const n=JSON.stringify(m),e=Cm.get(n);if(e)return e;const t=typeof m=="string"?xt(m):g1(m)?w(Tt(m)):Q(m)?w(m.name):gn;return Cm.set(n,t),t}var wt=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function A1(m){const n=wt.exec(m);return n?[n[1].toUpperCase(),n[2].replace(/x/g,"##"),n[3],n[4]]:["","","",""]}function Pm(m){return w(v1(m))}var It=(m,n)=>(m%n+n)%n,O1=[0,2,4,5,7,9,11];function xt(m){const n=A1(m);if(n[0]===""||n[3]!=="")return gn;const e=n[0],t=n[1],M=n[2],r=(e.charCodeAt(0)+3)%7,P=rm(t),o=M.length?+M:void 0,a=y1({step:r,alt:P,oct:o}),i=e+t+M,c=e+t,s=(O1[r]+P+120)%12,u=o===void 0?It(O1[r]+P,12)-1188:O1[r]+P+12*(o+1),d=u>=0&&u<=127?u:null,f=o===void 0?null:Math.pow(2,(u-69)/12)*440;return{empty:!1,acc:t,alt:P,chroma:s,coord:a,freq:f,height:u,letter:e,midi:d,name:i,oct:o,pc:c,step:r}}function Tt(m){const{step:n,alt:e,oct:t}=m,M=tm(n);if(!M)return"";const r=M+Mm(e);return t||t===0?r+t:r}function q(m,n){const e=w(m),t=Array.isArray(n)?n:b(n).coord;if(e.empty||!t||t.length<2)return"";const M=e.coord,r=M.length===1?[M[0]+t[0]]:[M[0]+t[0],M[1]+t[1]];return Pm(r).name}function j1(m,n){const e=m.length;return t=>{if(!n)return"";const M=t<0?(e- -t%e)%e:t%e,r=Math.floor(t/e),P=q(n,[0,r]);return q(P,m[M])}}function om(m,n){const e=w(m),t=w(n);if(e.empty||t.empty)return"";const M=e.coord,r=t.coord,P=r[0]-M[0],o=M.length===2&&r.length===2?r[1]-M[1]:-Math.floor(P*7/12),a=t.height===e.height&&t.midi!==null&&e.midi!==null&&e.step>t.step;return Y([P,o],a).name}var yn=(m,n)=>Array(Math.abs(n)+1).join(m);function R(m,n,e){return function(...t){return console.warn(`${m} is deprecated. Use ${n}.`),e.apply(this,t)}}var vn=R("isNamed","isNamedPitch",Q);const An=Object.freeze(Object.defineProperty({__proto__:null,accToAlt:rm,altToAcc:Mm,chroma:ln,coordToInterval:Y,coordToNote:Pm,coordinates:y1,deprecate:R,distance:om,fillStr:yn,height:nm,interval:b,isNamed:vn,isNamedPitch:Q,isPitch:g1,midi:fn,note:w,pitch:v1,stepToLetter:tm,tokenizeInterval:em,tokenizeNote:A1,tonicIntervalsTransposer:j1,transpose:q},Symbol.toStringTag,{value:"Module"}));var Dt=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 Δ#4 Δ#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -Δ7 mΔ -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 Δ9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],St=Dt,$t={...x,name:"",quality:"Unknown",intervals:[],aliases:[]},L=[],$={};function am(m){return $[m]||$t}var Ct=R("ChordType.chordType","ChordType.get",am);function Vt(){return L.map(m=>m.name).filter(m=>m)}function Ot(){return L.map(m=>m.aliases[0]).filter(m=>m)}function kt(){return Object.keys($)}function N1(){return L.slice()}var Et=R("ChordType.entries","ChordType.all",N1);function Ft(){L=[],$={}}function jn(m,n,e){const t=_t(m),M={...p(m),name:e||"",quality:t,intervals:m,aliases:n};L.push(M),M.name&&($[M.name]=M),$[M.setNum]=M,$[M.chroma]=M,M.aliases.forEach(r=>qt(M,r))}function qt(m,n){$[n]=m}function _t(m){const n=e=>m.indexOf(e)!==-1;return n("5A")?"Augmented":n("3M")?"Major":n("5d")?"Diminished":n("3m")?"Minor":"Unknown"}St.forEach(([m,n,e])=>jn(m.split(" "),e.split(" "),n));L.sort((m,n)=>m.setNum-n.setNum);var Nn={names:Vt,symbols:Ot,get:am,all:N1,add:jn,removeAll:Ft,keys:kt,entries:Et,chordType:Ct},zt=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Bt=zt,Gt={...x,intervals:[],aliases:[]},w1=[],C={};function wn(){return w1.map(m=>m.name)}function I1(m){return C[m]||Gt}var Rt=I1;function U(){return w1.slice()}var Lt=U;function Ut(){return Object.keys(C)}function Ht(){w1=[],C={}}function In(m,n,e=[]){const t={...p(m),name:n,intervals:m,aliases:e};return w1.push(t),C[t.name]=t,C[t.setNum]=t,C[t.chroma]=t,t.aliases.forEach(M=>Jt(t,M)),t}function Jt(m,n){C[n]=m}Bt.forEach(([m,n,...e])=>In(m.split(" "),n,e));var xn={names:wn,get:I1,all:U,add:In,removeAll:Ht,keys:Ut,entries:Lt,scaleType:Rt},B1={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function im(m){const[n,e,t,M]=A1(m);return n===""?["",m]:n==="A"&&M==="ug"?["","aug"]:[n+e,t+M]}function k(m){if(m==="")return B1;if(Array.isArray(m)&&m.length===2)return r1(m[1],m[0]);{const[n,e]=im(m),t=r1(e,n);return t.empty?r1(m):t}}function r1(m,n,e){const t=am(m),M=w(n||""),r=w(e||"");if(t.empty||n&&M.empty||e&&r.empty)return B1;const P=om(M.pc,r.pc),o=t.intervals.indexOf(P)+1;if(!r.empty&&!o)return B1;const a=Array.from(t.intervals);for(let u=1;u<o;u++){const d=a[0][0],f=a[0][1],E=parseInt(d,10)+7;a.push(`${E}${f}`),a.shift()}const i=M.empty?[]:a.map(u=>q(M,u));m=t.aliases.indexOf(m)!==-1?m:t.aliases[0];const c=`${M.empty?"":M.pc}${m}${r.empty||o<=1?"":"/"+r.pc}`,s=`${n?M.pc+" ":""}${t.name}${o>1&&e?" over "+r.pc:""}`;return{...t,name:s,symbol:c,type:t.name,root:r.name,intervals:a,rootDegree:o,tonic:M.name,notes:i}}var Kt=R("Chord.chord","Chord.get",k);function Wt(m,n){const[e,t]=im(m);return e?q(e,n)+t:m}function Xt(m){const n=k(m),e=h1(n.chroma);return U().filter(t=>e(t.chroma)).map(t=>t.name)}function Qt(m){const n=k(m),e=h1(n.chroma);return N1().filter(t=>e(t.chroma)).map(t=>n.tonic+t.aliases[0])}function Yt(m){const n=k(m),e=f1(n.chroma);return N1().filter(t=>e(t.chroma)).map(t=>n.tonic+t.aliases[0])}function Zt(m){const{intervals:n,tonic:e}=k(m),t=j1(n,e);return M=>M?t(M>0?M-1:M):""}function mM(m){const{intervals:n,tonic:e}=k(m);return j1(n,e)}var nM={getChord:r1,get:k,detect:at,chordScales:Xt,extended:Qt,reduced:Yt,tokenize:im,transpose:Wt,degrees:Zt,steps:mM,chord:Kt},eM=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],tM=eM,x1=[];tM.forEach(([m,n,e])=>cM(m,n,e));var MM={empty:!0,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function rM(){return x1.reduce((m,n)=>(n.names.forEach(e=>m.push(e)),m),[])}function PM(){return x1.map(m=>m.shorthand)}var oM=/^([^.]+)(\.*)$/;function sm(m){const[n,e,t]=oM.exec(m)||[],M=x1.find(o=>o.shorthand===e||o.names.includes(e));if(!M)return MM;const r=uM(M.fraction,t.length),P=r[0]/r[1];return{...M,name:m,dots:t,value:P,fraction:r}}var aM=m=>sm(m).value,iM=m=>sm(m).fraction,sM={names:rM,shorthands:PM,get:sm,value:aM,fraction:iM};function cM(m,n,e){x1.push({empty:!1,dots:"",name:"",value:1/m,fraction:m<1?[1/m,1]:[1,m],shorthand:n,names:e})}function uM(m,n){const e=Math.pow(2,n);let t=m[0]*e,M=m[1]*e;const r=t;for(let P=0;P<n;P++)t+=r/Math.pow(2,P+1);for(;t%2===0&&M%2===0;)t/=2,M/=2;return[t,M]}function dM(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var Tn=b,lM=m=>b(m).name,fM=m=>b(m).semitones,hM=m=>b(m).q,pM=m=>b(m).num;function bM(m){const n=b(m);return n.empty?"":n.simple+n.q}function gM(m){const n=b(m);if(n.empty)return"";const e=(7-n.step)%7,t=n.type==="perfectable"?-n.alt:-(n.alt+1);return b({step:e,alt:t,oct:n.oct,dir:n.dir}).name}var yM=[1,2,2,3,3,4,5,5,6,6,7,7],vM="P m M m M P d P m M m M".split(" ");function AM(m){const n=m<0?-1:1,e=Math.abs(m),t=e%12,M=Math.floor(e/12);return n*(yM[t]+7*M)+vM[t]}var jM=d1,Dn=Sn((m,n)=>[m[0]+n[0],m[1]+n[1]]),NM=m=>n=>Dn(m,n),wM=Sn((m,n)=>[m[0]-n[0],m[1]-n[1]]);function IM(m,n){const e=Tn(m);if(e.empty)return"";const[t,M,r]=e.coord;return Y([t+n,M,r]).name}var _={names:dM,get:Tn,name:lM,num:pM,semitones:fM,quality:hM,fromSemitones:AM,distance:jM,invert:gM,simplify:bM,add:Dn,addTo:NM,substract:wM,transposeFifths:IM};function Sn(m){return(n,e)=>{const t=b(n).coord,M=b(e).coord;if(t&&M){const r=m(t,M);return Y(r).name}}}function $n(m){return+m>=0&&+m<=127}function Cn(m){if($n(m))return+m;const n=l(m);return n.empty?null:n.midi}function xM(m,n=440){return Math.pow(2,(m-69)/12)*n}var TM=Math.log(2),DM=Math.log(440);function cm(m){const n=12*(Math.log(m)-DM)/TM+69;return Math.round(n*100)/100}var SM="C C# D D# E F F# G G# A A# B".split(" "),$M="C Db D Eb E F Gb G Ab A Bb B".split(" ");function S(m,n={}){if(isNaN(m)||m===-1/0||m===1/0)return"";m=Math.round(m);const e=(n.sharps===!0?SM:$M)[m%12];if(n.pitchClass)return e;const t=Math.floor(m/12)-1;return e+t}function um(m){return m%12}function CM(m){return m.split("").reduce((n,e,t)=>(t<12&&e==="1"&&n.push(t),n),[])}function VM(m){return m.map(um).sort((n,e)=>n-e).filter((n,e,t)=>e===0||n!==t[e-1])}function dm(m){return Array.isArray(m)?VM(m):CM(m)}function OM(m){const n=dm(m);return e=>{const t=um(e);for(let M=0;M<12;M++){if(n.includes(t+M))return e+M;if(n.includes(t-M))return e-M}}}function Vn(m,n){const e=dm(m),t=e.length;return M=>{const r=M<0?(t- -M%t)%t:M%t,P=Math.floor(M/t);return e[r]+P*12+n}}function kM(m,n){const e=Vn(m,n);return t=>{if(t!==0)return e(t>0?t-1:t)}}var EM={chroma:um,freqToMidi:cm,isMidi:$n,midiToFreq:xM,midiToNoteName:S,pcsetNearest:OM,pcset:dm,pcsetDegrees:kM,pcsetSteps:Vn,toMidi:Cn},FM=["C","D","E","F","G","A","B"],On=m=>m.name,kn=m=>m.map(l).filter(n=>!n.empty);function qM(m){return m===void 0?FM.slice():Array.isArray(m)?kn(m).map(On):[]}var A=l,_M=m=>A(m).name,zM=m=>A(m).pc,BM=m=>A(m).acc,GM=m=>A(m).oct,RM=m=>A(m).midi,LM=m=>A(m).freq,UM=m=>A(m).chroma;function En(m){return S(m)}function HM(m){return S(cm(m))}function JM(m){return S(cm(m),{sharps:!0})}function KM(m){return S(m,{sharps:!0})}var WM=d1,y=v,XM=v,Fn=m=>n=>y(n,m),QM=Fn,qn=m=>n=>y(m,n),YM=qn;function c1(m,n){return y(m,[n,0])}var ZM=c1;function mr(m,n){return y(m,[0,n])}var lm=(m,n)=>m.height-n.height,nr=(m,n)=>n.height-m.height;function _n(m,n){return n=n||lm,kn(m).sort(n).map(On)}function zn(m){return _n(m,lm).filter((n,e,t)=>e===0||n!==t[e-1])}var er=m=>{const n=A(m);return n.empty?"":S(n.midi||n.chroma,{sharps:n.alt>0,pitchClass:n.midi===null})};function Bn(m,n){const e=A(m);if(e.empty)return"";const t=A(n||S(e.midi||e.chroma,{sharps:e.alt<0,pitchClass:!0}));if(t.empty||t.chroma!==e.chroma)return"";if(e.oct===void 0)return t.pc;const M=e.chroma-e.alt,r=t.chroma-t.alt,P=M>11||r<0?-1:M<0||r>11?1:0,o=e.oct+P;return t.pc+o}var T={names:qM,get:A,name:_M,pitchClass:zM,accidentals:BM,octave:GM,midi:RM,ascending:lm,descending:nr,distance:WM,sortedNames:_n,sortedUniqNames:zn,fromMidi:En,fromMidiSharps:KM,freq:LM,fromFreq:HM,fromFreqSharps:JM,chroma:UM,transpose:y,tr:XM,transposeBy:Fn,trBy:QM,transposeFrom:qn,trFrom:YM,transposeFifths:c1,transposeOctaves:mr,trFifths:ZM,simplify:er,enharmonic:Bn},Gn={empty:!0,name:"",chordType:""},Vm={};function D(m){return typeof m=="string"?Vm[m]||(Vm[m]=ir(m)):typeof m=="number"?D(T1[m]||""):J1(m)?rr(m):H1(m)?D(m.name):Gn}var tr=D;function Mr(m=!0){return(m?T1:ar).slice()}function rr(m){return D(u1(m.alt)+T1[m.step])}var Pr=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function or(m){return Pr.exec(m)||["","","",""]}var Rn="I II III IV V VI VII",T1=Rn.split(" "),ar=Rn.toLowerCase().split(" ");function ir(m){const[n,e,t,M]=or(m);if(!t)return Gn;const r=t.toUpperCase(),P=T1.indexOf(r),o=K1(e),a=1;return{empty:!1,name:n,roman:t,interval:N({step:P,alt:o,dir:a}).name,acc:e,chordType:M,alt:o,step:P,major:t===r,oct:0,dir:a}}var sr={names:Mr,get:D,romanNumeral:tr},h=Object.freeze([]),Ln={type:"major",tonic:"",alteration:0,keySignature:""},P1={tonic:"",grades:h,intervals:h,scale:h,triads:h,chords:h,chordsHarmonicFunction:h,chordScales:h,secondaryDominants:h,secondaryDominantSupertonics:h,substituteDominantsMinorRelative:h,substituteDominants:h,substituteDominantSupertonics:h,secondaryDominantsMinorRelative:h},cr={...Ln,...P1,type:"major",minorRelative:"",scale:h,substituteDominants:h,secondaryDominantSupertonics:h,substituteDominantsMinorRelative:h},ur={...Ln,type:"minor",relativeMajor:"",natural:P1,harmonic:P1,melodic:P1},k1=(m,n,e="")=>n.map((t,M)=>`${m[M]}${e}${t}`);function D1(m,n,e,t,M){return r=>{const P=m.map(d=>D(d).interval||""),o=P.map(d=>y(r,d)),a=k1(o,e),i=o.map(d=>y(d,"5P")).map(d=>o.includes(d)&&!a.includes(d+"7")?d+"7":""),c=Om(i,n),s=i.map(d=>{if(!d)return"";const f=d.slice(0,-1);return y(f,"5d")+"7"}),u=Om(s,n);return{tonic:r,grades:m,intervals:P,scale:o,triads:k1(o,n),chords:a,chordsHarmonicFunction:t.slice(),chordScales:k1(o,M," "),secondaryDominants:i,secondaryDominantSupertonics:c,substituteDominants:s,substituteDominantSupertonics:u,secondaryDominantsMinorRelative:c,substituteDominantsMinorRelative:u}}}var Om=(m,n)=>m.map((e,t)=>{if(!e)return"";const M=e.slice(0,-1),r=y(M,"5P");return n[t].endsWith("m")?r+"m7":r+"m7b5"}),Un=(m,n)=>{const e=l(m),t=l(n);return e.empty||t.empty?0:t.coord[0]-e.coord[0]},dr=D1("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),lr=D1("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),fr=D1("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),hr=D1("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));function pr(m){const n=l(m).pc;if(!n)return cr;const e=dr(n),t=Un("C",n);return{...e,type:"major",minorRelative:y(n,"-3m"),alteration:t,keySignature:u1(t)}}function br(m){const n=l(m).pc;if(!n)return ur;const e=Un("C",n)-3;return{type:"minor",tonic:n,relativeMajor:y(n,"3m"),alteration:e,keySignature:u1(e),natural:lr(n),harmonic:fr(n),melodic:hr(n)}}function gr(m){return typeof m=="number"?c1("C",m):typeof m=="string"&&/^b+|#+$/.test(m)?c1("C",K1(m)):null}var yr={majorKey:pr,majorTonicFromKeySignature:gr,minorKey:br},vr=N;function Ar(m){const n=N(m);return n.empty?"":n.simple+n.q}function jr(m,n){const e=vr(m);if(e.empty)return"";const[t,M,r]=e.coord;return mn([t+n,M,r]).name}var fm=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],km={...x,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},hm=fm.map(xr),G1={};hm.forEach(m=>{G1[m.name]=m,m.aliases.forEach(n=>{G1[n]=m})});function O(m){return typeof m=="string"?G1[m.toLowerCase()]||km:m&&m.name?O(m.name):km}var Nr=O;function Hn(){return hm.slice()}var wr=Hn;function Ir(){return hm.map(m=>m.name)}function xr(m){const[n,e,t,M,r,P,o]=m,a=o?[o]:[],i=Number(e).toString(2);return{empty:!1,intervals:I1(M).intervals,modeNum:n,chroma:i,normalized:i,name:M,setNum:e,alt:t,triad:r,seventh:P,aliases:a}}function Tr(m,n){return O(m).intervals.map(e=>v(n,e))}function Jn(m){return(n,e)=>{const t=O(n);if(t.empty)return[];const M=G(t.modeNum,m),r=t.intervals.map(P=>v(e,P));return M.map((P,o)=>r[o]+P)}}var Dr=Jn(fm.map(m=>m[4])),Sr=Jn(fm.map(m=>m[5]));function Kn(m,n){const e=O(n),t=O(m);return e.empty||t.empty?"":Ar(jr("1P",t.alt-e.alt))}function $r(m,n,e){return v(e,Kn(m,n))}var Cr={get:O,names:Ir,all:Hn,distance:Kn,relativeTonic:$r,notes:Tr,triads:Dr,seventhChords:Sr,entries:wr,mode:Nr};function Vr(m){const[n,e,t,M]=W1(m);return n===""?E1("",m):n==="A"&&M==="ug"?E1("","aug"):E1(n+e,t+M)}function E1(m,n){const e=n.split("/");if(e.length===1)return[m,e[0],""];const[t,M,r,P]=W1(e[1]);return t!==""&&r===""&&P===""?[m,e[0],t+M]:[m,n,""]}function Or(m,n){return n.map(D).map(e=>v(m,N(e))+e.chordType)}function kr(m,n){return n.map(e=>{const[t,M]=Vr(e),r=d1(m,t);return D(N(r)).name+M})}var Er={fromRomanNumerals:Or,toRomanNumerals:kr};function Wn(m){const n=X1(m.map(e=>typeof e=="number"?e:Cn(e)));return!m.length||n.length!==m.length?[]:n.reduce((e,t)=>{const M=e[e.length-1];return e.concat(l1(M,t).slice(1))},[n[0]])}function Fr(m,n){return Wn(m).map(e=>S(e,n))}var qr={numeric:Wn,chromatic:Fr},_r={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Xn(m){if(typeof m!="string")return["",""];const n=m.indexOf(" "),e=l(m.substring(0,n));if(e.empty){const M=l(m);return M.empty?["",m]:[M.name,""]}const t=m.substring(e.name.length+1).toLowerCase();return[e.name,t.length?t:""]}var zr=wn;function I(m){const n=Array.isArray(m)?m:Xn(m),e=l(n[0]).name,t=I1(n[1]);if(t.empty)return _r;const M=t.name,r=e?t.intervals.map(o=>v(e,o)):[],P=e?e+" "+M:M;return{...t,name:P,type:M,tonic:e,notes:r}}var Br=I;function Gr(m,n={}){const e=an(m),t=l(n.tonic??m[0]??""),M=t.chroma;if(M===void 0)return[];const r=e.split("");r[M]="1";const P=G(M,r).join(""),o=U().find(i=>i.chroma===P),a=[];return o&&a.push(t.name+" "+o.name),n.match==="exact"||Qn(P).forEach(i=>{a.push(t.name+" "+i)}),a}function Rr(m){const n=I(m),e=f1(n.chroma);return un().filter(t=>e(t.chroma)).map(t=>t.aliases[0])}function Qn(m){const n=Y1(m)?m:I(m).chroma,e=h1(n);return U().filter(t=>e(t.chroma)).map(t=>t.name)}function Lr(m){const n=f1(I(m).chroma);return U().filter(e=>n(e.chroma)).map(e=>e.name)}function Yn(m){const n=m.map(M=>l(M).pc).filter(M=>M),e=n[0],t=zn(n);return G(t.indexOf(e),t)}function Ur(m){const n=I(m);if(n.empty)return[];const e=n.tonic?n.notes:n.intervals;return Z1(n.chroma).map((t,M)=>{const r=I(t).name;return r?[e[M],r]:["",""]}).filter(t=>t[0])}function Hr(m){const n=Array.isArray(m)?Yn(m):I(m).notes,e=n.map(t=>l(t).chroma);return t=>{const M=l(typeof t=="number"?En(t):t),r=M.height;if(r===void 0)return;const P=r%12,o=e.indexOf(P);if(o!==-1)return Bn(M.name,n[o])}}function Jr(m){const n=Hr(m);return(e,t)=>{const M=l(e).height,r=l(t).height;return M===void 0||r===void 0?[]:l1(M,r).map(n).filter(P=>P)}}function Kr(m){const{intervals:n,tonic:e}=I(m),t=en(n,e);return M=>M?t(M>0?M-1:M):""}function Wr(m){const{intervals:n,tonic:e}=I(m);return en(n,e)}var z={degrees:Kr,detect:Gr,extended:Qn,get:I,modeNames:Ur,names:zr,rangeOf:Jr,reduced:Lr,scaleChords:Rr,scaleNotes:Yn,steps:Wr,tokenize:Xn,scale:Br},Xr={empty:!0,name:"",upper:void 0,lower:void 0,type:void 0,additive:[]},Qr=["4/4","3/4","2/4","2/2","12/8","9/8","6/8","3/8"];function Yr(){return Qr.slice()}var Zr=/^(\d*\d(?:\+\d)*)\/(\d+)$/,Em=new Map;function mP(m){const n=JSON.stringify(m),e=Em.get(n);if(e)return e;const t=tP(pm(m));return Em.set(n,t),t}function pm(m){if(typeof m=="string"){const[r,P,o]=Zr.exec(m)||[];return pm([P,o])}const[n,e]=m,t=+e;if(typeof n=="number")return[n,t];const M=n.split("+").map(r=>+r);return M.length===1?[M[0],t]:[M,t]}var nP={names:Yr,parse:pm,get:mP},eP=m=>Math.log(m)/Math.log(2)%1===0;function tP([m,n]){const e=Array.isArray(m)?m.reduce((o,a)=>o+a,0):m,t=n;if(e===0||t===0)return Xr;const M=Array.isArray(m)?`${m.join("+")}/${n}`:`${m}/${n}`,r=Array.isArray(m)?m:[],P=t===4||t===2?"simple":t===8&&e%3===0?"compound":eP(t)?"irregular":"irrational";return{empty:!1,name:M,type:P,upper:e,lower:t,additive:r}}var MP=An,rP=cn,PP=Nn,oP=xn;const aP=Object.freeze(Object.defineProperty({__proto__:null,AbcNotation:Te,Array:Ee,Chord:nM,ChordDictionary:PP,ChordType:Nn,Collection:ze,Core:An,DurationValue:sM,Interval:_,Key:yr,Midi:EM,Mode:Cr,Note:T,PcSet:rP,Pcset:cn,Progression:Er,Range:qr,RomanNumeral:sr,Scale:z,ScaleDictionary:oP,ScaleType:xn,TimeSignature:nP,Tonal:MP,accToAlt:rm,altToAcc:Mm,chroma:ln,coordToInterval:Y,coordToNote:Pm,coordinates:y1,deprecate:R,distance:om,fillStr:yn,height:nm,interval:b,isNamed:vn,isNamedPitch:Q,isPitch:g1,midi:fn,note:w,pitch:v1,stepToLetter:tm,tokenizeInterval:em,tokenizeNote:A1,tonicIntervalsTransposer:j1,transpose:q},Symbol.toStringTag,{value:"Module"})),iP=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],sP=["c","db","d","eb","e","f","gb","g","ab","a","bb","b"],cP=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],uP={b:-1,"#":1},dP=m=>{const[n,...e]=m.split("");return sP.indexOf(n.toLowerCase())+e.reduce((t,M)=>t+uP[M],0)};function lP(m){const n=(m||"").match(/^([A-G][b#]*)([^/]*)[/]?([A-G][b#]*)?$/);return n?n.slice(1):[]}const R1=m=>m%12,Zn=m=>{let n=Number(m);return isNaN(n)?_.semitones(m):n},L1=(m,n)=>{if(typeof m=="number")return m;if(typeof m=="string")return Km(m,n)},fP=(m,n=!1)=>{const e=Math.floor(m/12)-1;return(n?cP:iP)[m%12]+e};function hP(m,n,e=1){m=m.map(M=>typeof M=="string"?Km(M):M);const t=Math.floor(n/m.length)*e*12;return n=V(n,m.length),m[n]+t}function pP(m,n,e){let t=0,M=1/0;return n.forEach((r,P)=>{const o=Math.abs(r-m);(o<M||e)&&(t=P,M=o)}),t}let F1={};function bP(m,n,e,t){let[M,r]=z.tokenize(n);const P=L1(M),o=R1(P);if(!F1[r]){let{intervals:s}=z.get(`C ${r}`);F1[r]=s.map(Zn)}const a=F1[r];if(!a)return null;let i=P;if(e){e=L1(e,3);const s=R1(e),u=V(s-o,12),d=pP(u,a,t);m=m+d,i=e-u}const c=Math.floor(m/a.length)*12;return m=V(m,a.length),a[m]+i+c}let Fm={below:m=>m.slice(-1)[0],duck:m=>m.slice(-1)[0],above:m=>m[0],root:m=>m[0]};function gP({chord:m,dictionary:n,offset:e=0,n:t,mode:M="below",anchor:r="c5",octaves:P=1}){const[o,a]=lP(m),i=dP(o);r=L1((r==null?void 0:r.note)||r,4);const c=R1(r),s=n[a].map(j=>(typeof j=="string"?j.split(" "):j).map(Zn));let u,d,f=s.map((j,$1)=>{const Pe=Fm[M](j),C1=V(c-Pe-i,12);return(u===void 0||C1<u)&&(u=C1,d=$1),C1});M==="root"&&(d=0);const E=Math.ceil(e/s.length)*12,m1=V(d+e,s.length),n1=s[m1],g=Fm[M](n1),S1=r-f[m1]+E,bm=n1.map(j=>S1-g+j);let e1=bm.map(j=>fP(j));return M==="duck"&&(e1=e1.filter((j,$1)=>bm[$1]!==r)),t!==void 0?[hP(e1,t,P)]:e1}const yP=m=>(m<=0?-1:1)+m*7+"P";function vP(m,n){n=n.replaceAll(":"," "),m=Math.ceil(m);let{intervals:e,tonic:t,empty:M}=z.get(n);if(M&&U1(n)||M&&!t)throw new Error('incomplete scale. Make sure to use ":" instead of spaces, example: .scale("C:major")');if(M)throw new Error(`invalid scale "${n}"`);t=t||"C";const{pc:r,oct:P=3}=T.get(t),o=Math.floor(m/e.length),a=V(m,e.length),i=_.add(e[a],yP(o));return T.transpose(r+P,i)}function qm(m,n,e){let[t,M]=z.tokenize(m),{notes:r}=z.get(`${t} ${M}`);if(r=r.map(d=>T.get(d).pc),n=Number(n),isNaN(n))throw new Error(`scale offset "${n}" not a number`);const{pc:P,oct:o=3}=T.get(e),a=r.indexOf(P);if(a===-1)throw new Error(`note "${e}" is not in scale "${m}"`);let i=a,c=o,s=P;const u=Math.sign(n);for(;Math.abs(i-a)<Math.abs(n);){i+=u;const d=V(i,r.length);u<0&&s[0]==="C"&&(c+=u),s=r[d],u>0&&s[0]==="C"&&(c+=u)}return s+c}const{transpose:qP,trans:_P}=B(["transpose","trans"],function(m,n){return n.withHap(e=>{const t=e.value.note??e.value;if(typeof t=="number"){let P;typeof m=="number"?P=m:typeof m=="string"&&(P=_.semitones(m)||0);const o=t+P;return typeof e.value=="object"?e.withValue(()=>({...e.value,note:o})):e.withValue(()=>o)}if(typeof t!="string"||!U1(t))return i1(`[tonal] transpose: not a note "${t}"`,"warning"),e;const M=isNaN(Number(m))?String(m):_.fromSemitones(m),r=T.simplify(T.transpose(t,M));return typeof e.value=="object"?e.withValue(()=>({...e.value,note:r})):e.withValue(()=>r)})}),{scaleTranspose:zP,scaleTrans:BP,strans:GP}=B(["scaleTranspose","scaleTrans","strans"],function(m,n){return n.withHap(e=>{if(!e.context.scale)throw new Error("can only use scaleTranspose after .scale");if(typeof e.value=="object")return e.withValue(()=>({...e.value,note:qm(e.context.scale,Number(m),e.value.note)}));if(typeof e.value!="string")throw new Error("can only use scaleTranspose with notes");return e.withValue(()=>qm(e.context.scale,Number(m),e.value))})}),RP=B("scale",function(m,n){return Array.isArray(m)&&(m=m.flat().join(" ")),n.fmap(e=>{const t=typeof e=="object";let M=t?e.n:e;if(t&&delete e.n,U1(M))return gm(M);let r=Number(M),P=0;if(isNaN(r)){if(M=String(M),!/^[-+]?\d+(#*|b*){1}$/.test(M))return i1(`[tonal] invalid scale step "${M}", expected number or integer with optional # b suffixes`,"error"),q1;const o=M.indexOf("#");if(o>=0)r=Number(M.substring(0,o)),P=M.length-o;else{const a=M.indexOf("b");r=Number(M.substring(0,a)),P=a-M.length}}try{let o;t&&e.anchor?o=bP(r,m,e.anchor):o=vP(r,m),P!=0&&(o=T.transpose(o,_.fromSemitones(P))),e=gm(t?{...e,note:o}:o)}catch(o){i1(`[tonal] ${o.message}`,"error"),e=q1}return e}).outerJoin().withHap(e=>e.setContext({...e.context,scale:m}))},!0,!0);var _m={},t1={},H={},zm;function me(){if(zm)return H;zm=1,H.__esModule=!0,H.getBestVoicing=void 0;function m(n){var e=n.chord,t=n.range,M=n.finder,r=n.picker,P=n.lastVoicing,o=M(e,t);return o.length?r(o,P):[]}return H.getBestVoicing=m,H}var J={};const ne=ae(aP);var K={},Bm;function ee(){if(Bm)return K;Bm=1,K.__esModule=!0,K.tokenizeChord=void 0;function m(n){var e=(n||"").match(/^([A-G][b#]*)([^\/]*)[\/]?([A-G][b#]*)?$/);return e?e.slice(1):[]}return K.tokenizeChord=m,K}var Gm;function AP(){if(Gm)return J;Gm=1,J.__esModule=!0,J.voicingsInRange=void 0;var m=ne,n=te(),e=ee();function t(M,r,P){r===void 0&&(r=n.lefthand),P===void 0&&(P=["D3","A4"]);var o=(0,e.tokenizeChord)(M),a=o[0],i=o[1];if(!r[i])return[];var c=r[i].map(function(u){return u.split(" ")}),s=m.Range.chromatic(P);return c.reduce(function(u,d){var f=d.map(function(g){return m.Interval.substract(g,d[0])}),E=m.Note.transpose(a,d[0]),m1=s.filter(function(g){return m.Note.chroma(g)===m.Note.chroma(E)}).filter(function(g){return m.Note.midi(m.Note.transpose(g,f[f.length-1]))<=m.Note.midi(P[1])}).map(function(g){return m.Note.enharmonic(g,E)}),n1=m1.map(function(g){return f.map(function(S1){return m.Note.transpose(g,S1)})});return u.concat(n1)},[])}return J.voicingsInRange=t,J}var Rm;function te(){return Rm||(Rm=1,(function(m){var n=t1.__assign||function(){return n=Object.assign||function(o){for(var a,i=1,c=arguments.length;i<c;i++){a=arguments[i];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])}return o},n.apply(this,arguments)},e=t1.__rest||function(o,a){var i={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&a.indexOf(c)<0&&(i[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,c=Object.getOwnPropertySymbols(o);s<c.length;s++)a.indexOf(c[s])<0&&Object.prototype.propertyIsEnumerable.call(o,c[s])&&(i[c[s]]=o[c[s]]);return i};m.__esModule=!0,m.dictionaryVoicing=m.dictionaryVoicingFinder=m.triads=m.guidetones=m.lefthand=void 0;var t=me(),M=AP();m.lefthand={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},m.guidetones={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},m.triads={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]};var r=function(o){return function(a,i){return(0,M.voicingsInRange)(a,o,i)}};m.dictionaryVoicingFinder=r;var P=function(o){var a=o.dictionary,i=o.range,c=e(o,["dictionary","range"]);return(0,t.getBestVoicing)(n(n({},c),{range:i,finder:(0,m.dictionaryVoicingFinder)(a)}))};m.dictionaryVoicing=P})(t1)),t1}var W={},Lm;function jP(){if(Lm)return W;Lm=1,W.__esModule=!0,W.minTopNoteDiff=void 0;var m=ne;function n(e,t){if(!t)return e[0];var M=function(r){return Math.abs(m.Note.midi(t[t.length-1])-m.Note.midi(r[r.length-1]))};return e.reduce(function(r,P){return M(P)<M(r)?P:r},e[0])}return W.minTopNoteDiff=n,W}var Um;function NP(){return Um||(Um=1,(function(m){m.__esModule=!0;var n=te(),e=jP(),t=me(),M=ee();m.default={tokenizeChord:M.tokenizeChord,getBestVoicing:t.getBestVoicing,dictionaryVoicing:n.dictionaryVoicing,dictionaryVoicingFinder:n.dictionaryVoicingFinder,lefthand:n.lefthand,guidetones:n.guidetones,triads:n.triads,minTopNoteDiff:e.minTopNoteDiff}})(_m)),_m}var wP=NP();const Hm=oe(wP),F={2:["1P 5P 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P"],5:["1P 5P 8P 12P","5P 8P 12P 15P"],6:["1P 5P 6M 8P 10M","1P 5P 8P 10M 13M","3M 5P 8P 10M 13M","5P 8P 10M 12P 13M"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M"],9:["1P 5P 7m 9M 10M","1P 7m 9M 10M 12P","3M 7m 8P 9M 12P","7m 9M 10M 14m 15P","3M 7m 8P 12P 16M","7m 10M 12P 15P 16M"],11:["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],13:["1P 6M 7m 9M 10M","1P 7m 9M 10M 13M","3M 7m 8P 9M 13M","7m 8P 9M 10M 13M","7m 9M 10M 13M 15P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 8P 9M 13M","5P 8P 9M 10M 13M"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 12P 17M"],"+":["1P 3M 6m 8P 10M","1P 6m 8P 10M 13m","3M 6m 8P 10M 13m","3M 8P 10M 13m 15P","6m 8P 10M 13m 15P","6m 10M 13m 15P 17M"],o:["1P 5d 8P 10m 12d","3m 8P 10m 12d 15P","5d 8P 10m 12d 15P"],h:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P","1P 4P 5P 8P 11P","5P 8P 11P 12P","5P 8P 11P 12P 15P"],"^":["1P 5P 8P 10M","1P 5P 8P 10M 12P","3M 5P 8P 10M 12P","3M 8P 10M 12P 15P","5P 8P 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 5P 8P 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 5P 7M 10M 12P","1P 10M 12P 14M","3M 8P 10M 12P 14M","5P 8P 10M 12P 14M","5P 8P 10M 14M 17M"],"-7":["1P 3m 5P 7m 10m","1P 5P 7m 10m 12P","3m 7m 8P 10m 12P","3m 7m 8P 10m 14m","5P 7m 8P 10m 14m","7m 10m 12P 14m 15P","5P 8P 10m 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 5P 7m 8P 11P","5P 8P 11P 12P 14m","7m 8P 11P 12P 14m","7m 11P 12P 14m 18P"],h7:["3m 5d 7m 8P 10m","1P 5d 7m 10m 12d","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 5P 7M 9M 10M","1P 7M 9M 10M 12P","3M 7M 8P 9M 12P","3M 7M 8P 12P 16M","5P 8P 10M 14M 16M","7M 8P 10M 12P 16M"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 8P 13M 16M","7M 8P 10M 13M 16M"],"^7#11":["1P 5P 7M 10M 12d","3M 7M 8P 10M 12d","1P 7M 10M 12d 14M","3M 7M 8P 12d 14M","5P 8P 10M 12d 14M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 8P 9M 12d","3M 8P 9M 12d 14M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 8P 10M 13m","6m 7M 8P 10M 13m"],"-6":["1P 3m 5P 6M 8P","1P 5P 6M 8P 10m","3m 5P 6M 8P 10m","1P 5P 8P 10m 13M","3m 5P 8P 10m 13M","5P 8P 10m 12P 13M","5P 8P 10m 13M 15P"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 10m","1P 5P 7M 10m 12P","3m 7M 8P 10m 12P","5P 7M 8P 10m 14M","5P 8P 10m 14M 17m"],"-^9":["1P 3m 5P 7M 9M","1P 7M 9M 10m 12P","3m 7M 8P 9M 12P","5P 8P 9M 10m 14M"],"-9":["1P 3m 5P 7m 9M","3m 5P 7m 8P 9M","3m 7m 8P 9M 12P","5P 8P 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 12P 15P 16M"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["1P 3m 7m 9M 11P","3m 7m 8P 9M 11P","1P 4P 7m 10m 12P","5P 8P 11P 14m","3m 7m 9M 11P 15P","5P 8P 11P 14m 16M","7m 10m 12P 15P 18P"],"-7b5":["3m 5d 7m 8P 10m","1P 7m 10m 12d","1P 5d 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 7m 8P 10m 14m","5d 8P 10m 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["1P 7m 9M 10m 12d","3m 7m 8P 9M 12d","5d 8P 9M 10m 14m","7m 10m 12d 15P 16M"],"-b6":["1P 5P 6m 8P 10m","1P 5P 8P 10m 13m","3m 5P 8P 10m 13m","5P 8P 10m 13m","5P 8P 10m 13m 15P"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 10m 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 8P 10m 14m","7m 10m 10M 14m 15P"],"7#11":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7b5":["1P 3M 7m 10M 12d","3M 7m 8P 10M 12d","7m 10M 12d 14m 15P"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P"],"7#9#5":["1P 3M 7m 10m 13m","3M 7m 10m 13m 15P","7m 10M 13m 15P 17m"],"7#9b5":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7#9#11":["1P 3M 7m 10m 12d","3M 7m 10m 12d 15P","7m 10M 12d 15P 17m"],"7b9#11":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9b5":["1P 7m 9m 10M 12d","3M 7m 8P 9m 12d","7m 8P 10M 12d 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 8P 9m 10m","7m 8P 10M 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 8P 9m 13m","7m 9m 10M 13m 15P"],"7alt":["3M 7m 8P 9m 12d","1P 7m 10m 10M 13m","3M 7m 8P 10m 13m","3M 7m 9m 12d 15P","3M 7m 10m 13m 15P","7m 10M 12d 15P 17m","7m 10M 13m 15P 17m"],"13#11":["1P 6M 7m 10M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["1P 3M 6M 7m 9m","1P 6M 7m 9m 10M","3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["1P 3M 6M 7m 10m","3M 7m 8P 10m 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 5P 7m 9M 11P","5P 7m 8P 9M 11P","7m 8P 9M 11P 12P","7m 8P 11P 12P 16M"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","5P 7m 9M 11P 13M","7m 9M 11P 13M 15P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},X={2:["1P 5P 6M 8P 9M","1P 5P 8P 9M 12P","5P 8P 9M 12P 13M","5P 8P 9M 12P 15P"],5:["1P 5P 8P 12P","1P 5P 8P 9M 12P","5P 8P 12P 15P","5P 8P 12P 15P 16M"],6:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],7:["1P 5P 7m 8P 10M","1P 7m 8P 10M 12P","3M 7m 8P 10M 12P","3M 7m 8P 10M 14m","3M 7m 10M 12P 15P","7m 10M 12P 14m 15P","7m 10M 12P 15P 17M","7m 10M 14m 17M 19P"],9:["1P 6M 7m 9M 10M","3M 7m 9M 10M 12P","1P 7m 9M 10M 13M","3M 7m 9M 10M 13M","3M 7m 9M 12P 15P","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],11:["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],13:["3M 7m 9M 10M 13M","3M 7m 9M 13M 15P","3M 7m 10M 13M 16M","7m 10M 12P 13M 16M","7m 10M 13M 16M 17M","7m 10M 13M 16M 19P"],69:["1P 5P 6M 9M 10M","1P 5P 9M 10M 13M","3M 5P 9M 10M 13M","5P 8P 9M 10M 13M","3M 6M 9M 12P 15P"],add9:["1P 5P 8P 9M 10M","1P 5P 9M 10M 12P","3M 8P 9M 10M 12P","3M 8P 9M 12P 15P","5P 8P 9M 10M 15P","5P 8P 9M 12P 17M"],"+":["1P 6m 8P 9M 10M","1P 6m 8P 10M 13m","3M 8P 9M 10M 13m","3M 8P 10M 13m 15P","6m 10M 13m 15P 16M","6m 10M 13m 15P 17M"],o:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],h:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],sus:["1P 4P 5P 8P 9M","1P 4P 5P 8P 11P","1P 5P 8P 9M 11P","5P 8P 9M 11P 12P","5P 8P 11P 12P 13M","5P 8P 11P 13M 15P"],"^":["1P 3M 5P 6M 9M","1P 5P 8P 10M 12P","3M 5P 9M 10M 12P","1P 5P 8P 10M 13M","3M 8P 10M 13M 15P","5P 9M 10M 12P 15P"],"-":["1P 3m 5P 8P 10m","1P 3m 5P 9M 11P","3m 5P 8P 9M 11P","5P 8P 9M 10m 11P","1P 5P 9M 10m 12P","3m 5P 8P 10m 12P","5P 8P 10m 12P 15P"],"^7":["1P 6M 7M 9M 10M","3M 7M 9M 10M 12P","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"-7":["1P 3m 5P 7m 9M","1P 3m 5P 7m 10m","1P 5P 7m 10m 11P","3m 7m 8P 10m 11P","1P 5P 7m 10m 12P","3m 7m 9M 10m 12P","3m 7m 8P 10m 14m","5P 7m 9M 10m 14m","7m 10m 11P 14m 15P","7m 10m 12P 15P 16M","5P 8P 11P 14m 17m","7m 10m 12P 15P 17m"],"7sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],h7:["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],o7:["1P 6M 8P 10m 12d","1P 6M 10m 12d 13M","3m 8P 10m 12d 13M","3m 8P 12d 13M 15P","5d 10m 12d 13M 15P","5d 10m 13M 15P 17m","6M 12d 13M 15P 17m","6M 12d 15P 17m 19d"],"^9":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^13":["1P 6M 7M 9M 10M","1P 7M 9M 10M 13M","3M 7M 9M 12P 13M","3M 7M 9M 10M 13M","3M 7M 8P 9M 13M","3M 7M 9M 13M 14M","3M 7M 10M 13M 16M","7M 10M 13M 14M 16M","7M 10M 13M 16M 17M","7M 10M 13M 16M 19P"],"^7#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 10M 12d 14M","7M 10M 12d 13M 14M","7M 10M 12d 13M 16M","7M 10M 12d 14M 17M"],"^9#11":["1P 3M 5d 7M 9M","1P 7M 9M 10M 12d","3M 7M 9M 10M 12d","3M 7M 9M 12d 13M","3M 7M 9M 12d 14M","7M 10M 12d 14M 16M","7M 10M 12d 13M 16M"],"^7#5":["1P 6m 7M 10M 13m","3M 7M 9M 10M 13m","3M 7M 10M 13m 14M","7M 10M 13m 14M 16M","7M 10M 13m 14M 17M"],"-6":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","1P 5P 6M 10m 11P","3m 5P 6M 8P 11P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 10m 11P 13M","5P 8P 10m 13M 16M"],"-69":["1P 3m 5P 6M 9M","3m 5P 6M 8P 9M","3m 6M 9M 10m 12P","1P 5P 9M 10m 13M","3m 5P 8P 9M 13M","5P 8P 9M 10m 13M","5P 8P 10m 13M 16M"],"-^7":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-^9":["1P 3m 5P 7M 9M","1P 5P 7M 10m 11P","3m 7M 9M 10m 11P","3m 7M 9M 10m 12P","3m 7M 9M 12P 14M","7M 10m 11P 12P 14M","7M 10m 12P 14M 16M"],"-9":["1P 3m 5P 7m 9M","1P 3m 7m 9M 11P","3m 7m 9M 10m 11P","3m 7m 9M 10m 12P","3m 7m 9M 10m 14m","3m 7m 9M 12P 15P","7m 10m 11P 14m 16M","7m 10m 12P 16M 18P"],"-add9":["1P 2M 3m 5P 8P","1P 3m 5P 9M","3m 5P 8P 9M 12P","5P 8P 9M 10m 12P"],"-11":["3m 5P 7m 9M 11P","7m 9M 10m 11P","1P 4P 7m 10m 12P","3m 7m 9M 11P 12P","7m 9M 10m 11P 12P","3m 7m 9M 11P 14m","4P 10m 12P 14m","5P 8P 11P 14m","5P 8P 11P 14m 16M","7m 10m 12P 16M 18P","7m 10m 11P 16M 21m"],"-7b5":["1P 5d 7m 10m 11P","3m 5d 7m 8P 11P","5d 7m 8P 10m 11P","1P 7m 10m 12d","3m 7m 8P 10m 12d","3m 7m 8P 12d 14m","5d 8P 10m 11P 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 15P","5d 8P 10m 14m 17m"],h9:["3m 5d 7m 9M 11P","1P 7m 9M 10m 12d","3m 7m 9M 12d 14m","5d 8P 9M 10m 14m","7m 10m 11P 12d 14m","7m 10m 12d 14m 16M"],"-b6":["1P 3m 5P 6m 8P","3m 5P 8P 11P 13m","5P 8P 10m 11P 13m"],"-#5":["1P 6m 8P 10m 13m","3m 6m 8P 11P 13m","6m 8P 10m 13m 15P"],"7b9":["1P 3M 7m 9m 10M","3M 7m 8P 9m 10M","3M 7m 8P 9m 14m","7m 9m 10M 14m 15P"],"7#9":["1P 3M 7m 10m","3M 7m 10m 10M 12P","3M 7m 10m 12P 14m","7m 10M 12P 14m 17m"],"7#11":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7b5":["1P 3M 7m 9M 12d","3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"7#5":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"9#11":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9b5":["1P 7m 9M 10M 12d","3M 7m 8P 9M 12d","7m 10M 12d 15P 16M"],"9#5":["1P 7m 9M 10M 13m","3M 7m 9M 10M 13m","3M 7m 9M 13m 14m","7m 10M 13m 14m 16M","7m 10M 13m 16M 17M"],"7b13":["1P 3M 7m 10M 13m","3M 7m 8P 10M 13m","3M 7m 8P 13m 14m","7m 10M 13m 14m 15P","7m 10M 13m 14m 17M"],"7#9#5":["3M 7m 10m 10M 13m","3M 7m 10m 13m 14m","7m 10M 13m 14m 17m"],"7#9b5":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7#9#11":["3M 7m 10m 10M 12d","3M 7m 10m 12d 14m","7m 10M 12d 14m 17m"],"7b9#11":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9b5":["3M 7m 9m 10M 12d","3M 7m 9m 12d 14m","7m 8P 10M 12d 16m","7m 10M 12d 14m 16m"],"7b9#5":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7b9#9":["1P 3M 7m 9m 10m","3M 7m 10m 13m 16m","7m 10M 13m 16m 17m"],"7b9b13":["1P 7m 9m 10M 13m","3M 7m 9m 10M 13m","3M 7m 10M 13m 16m","7m 10M 13m 14m 16m","7m 10M 13m 16m 17M"],"7alt":["3M 7m 8P 10m 13m","3M 7m 9m 12d 13m","3M 7m 9m 10m 13m","3M 7m 10m 13m 14m","3M 7m 9m 12d 14m","3M 7m 10m 13m 15P","3M 7m 10m 13m 16m","7m 10M 12d 14m 16m","7m 10M 12d 13m 16m","7m 10M 13m 15P 17m","7m 10M 13m 16m 17m","7m 10M 13m 16m 19d"],"13#11":["3M 7m 9M 12d 13M","7m 10M 12d 13M 16M"],"13b9":["3M 7m 9m 10M 13M","3M 7m 10M 13M 16m","7m 10M 13M 16m 17M"],"13#9":["3M 7m 10m 10M 13M","7m 10M 13M 14m 17m"],"7b9sus":["1P 5P 7m 9m 11P","5P 7m 8P 9m 11P","7m 8P 11P 14m 16m"],"7susadd3":["1P 4P 5P 7m 10M","5P 8P 10M 11P 14m","7m 11P 12P 15P 17M"],"9sus":["1P 4P 6M 7m 9M","1P 5P 7m 9M 11P","4P 6M 7m 9M 11P","5P 8P 9M 11P 14m","7m 9M 11P 13M 15P","7m 11P 12P 14m 18P"],"13sus":["1P 4P 6M 7m 9M","1P 7m 9M 11P 13M","4P 7m 9M 11P 13M","7m 9M 11P 13M 15P","7m 11P 13M 14m 16M","7m 11P 13M 16M 18P"],"7b13sus":["1P 5P 7m 11P 13m","5P 7m 8P 11P 13m","7m 11P 13m 14m 15P"]},{dictionaryVoicing:IP,minTopNoteDiff:xP}=Hm.default||Hm,TP={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},DP={m7:["3m 7m","7m 10m"],m9:["3m 7m","7m 10m"],7:["3M 7m","7m 10M"],"^7":["3M 7M","7M 10M"],"^9":["3M 7M","7M 10M"],69:["3M 6M"],6:["3M 6M","6M 10M"],m7b5:["3m 7m","7m 10m"],"7b9":["3M 7m","7m 10M"],"7b13":["3M 7m","7m 10M"],o7:["3m 6M","6M 10m"],"7#11":["3M 7m","7m 10M"],"7#9":["3M 7m","7m 10M"],mM7:["3m 7M","7M 10m"],m6:["3m 6M","6M 10m"]},SP={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},$P={"":["1P 3M 5P","3M 5P 8P","5P 8P 10M"],M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},Z={lefthand:{dictionary:TP,range:["F3","A4"],mode:"below",anchor:"a4"},triads:{dictionary:SP,mode:"below",anchor:"a4"},guidetones:{dictionary:DP,mode:"above",anchor:"a4"},legacy:{dictionary:$P,mode:"below",anchor:"a4"}};let Me="ireal";const CP=m=>Me=m,LP=(m,n)=>VP(m,Z[m].dictionary,n),VP=(m,n,e=["F3","A4"])=>{Object.assign(Z,{[m]:{dictionary:n,range:e}})},re=(m,n,e={})=>{Object.assign(Z,{[m]:{dictionary:n,...e}})},OP=(m,n,e)=>{const{dictionary:t,range:M}=Z[n];return IP({chord:m,dictionary:t,range:M,picker:xP,lastVoicing:e})};let o1;const UP=B("voicings",function(m,n){return n.fmap(e=>(o1=OP(e,m,o1),Jm(...o1))).outerJoin()}),HP=B("rootNotes",function(m,n){return n.fmap(e=>{const t=(e.chord||e).match(/^([a-gA-G][b#]?).*$/)[1]+m;return e.chord?{note:t}:t})}),JP=B("voicing",function(m){return m.fmap(n=>{n=typeof n=="string"?{chord:n}:n;let{dictionary:e=Me,chord:t,anchor:M,offset:r,mode:P,n:o,octaves:a,...i}=n;e=typeof e=="string"?Z[e]:{dictionary:e,mode:"below",anchor:"c5"};try{let c=gP({...e,chord:t,anchor:M,offset:r,mode:P,n:o,octaves:a});return Jm(...c).note().set(i)}catch{return i1(`[voicing]: unknown chord "${t}"`),q1}}).outerJoin()});function a1(m,n,e){e=Array.isArray(e)?e:[e],e.forEach(t=>{t[n]=t[m]})}a1("^","",[F,X]);Object.keys(F).forEach(m=>{if(m.includes("-")){let n=m.replace("-","m");a1(m,n,[X,F])}if(m.includes("^")){let n=m.replace("^","M");a1(m,n,[X,F])}if(m.includes("+")){let n=m.replace("+","aug");a1(m,n,[X,F])}});re("ireal",F);re("ireal-ext",X);function KP(){o1=void 0,CP("ireal")}const WP="@strudel/tonal";export{VP as addVoicings,WP as packageName,re as registerVoicings,KP as resetVoicings,HP as rootNotes,RP as scale,BP as scaleTrans,zP as scaleTranspose,CP as setDefaultVoicings,LP as setVoicingRange,GP as strans,_P as trans,qP as transpose,JP as voicing,a1 as voicingAlias,Z as voicingRegistry,UP as voicings};
